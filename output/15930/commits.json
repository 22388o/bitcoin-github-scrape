[
  {
    "sha": "fad40ec9151248c6e8225e14980424f581d23e02",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWQ0MGVjOTE1MTI0OGM2ZTgyMjVlMTQ5ODA0MjRmNTgxZDIzZTAy",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-04-09T12:56:13Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-05-01T14:21:21Z"
      },
      "message": "wallet: Use IsValidNumArgs in getwalletinfo rpc",
      "tree": {
        "sha": "f6778f4b5614bfb64f3804959f4f2ec3400d9ea6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f6778f4b5614bfb64f3804959f4f2ec3400d9ea6"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fad40ec9151248c6e8225e14980424f581d23e02",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUijWwv/WabOyt0TCLqD96cSJJjgWvWMdBayG/7Z702yco4WvH1+ITwaoSdzvfoJ\nYYbmWp1t8BYyPuZyVKizBK5cWlP5GZ9Z8ZfeQo4dQo3fMS1CYATq3CeRVXozj5y6\n32vztsDZJ1YaVyM/iITX7SLeQwH7C5gEKr1SW0qXivysmsbjOKbfkm3UVksGD1wV\nKlkE3nDq7wya72ZT3rz5jak5iRpGyICQpYHonVrTsfOsHaMcEZ2q39zi4eWcy/BG\nezoosITH+lFqBDh/h/6iP7Yf4HG4vH40kJnA40fvC7qCGB2HWg8WZDgPesoNtnFl\nFyuMnsx3NHj0ocjO29IbsYQRhlAPVugNaiEKq07TOrmlssQGe34lNpMtG0B0UDAJ\nlZgk9iroCrIIOKFf7rpuqwF37pwBGKsoEegBh1jsrnh5biMK/b7TP8JMR51FHGsh\ngdxqEdJSI7GpNryUI+np3Xyz50xpcG9CUr3Xj5StHnkJsilZl1cyG9G1d7srx5XL\nSUEv5cDs\n=OgC1\n-----END PGP SIGNATURE-----",
        "payload": "tree f6778f4b5614bfb64f3804959f4f2ec3400d9ea6\nparent 2eb8c5d7a28b4dcecd60484773eaacd1608f6291\nauthor MarcoFalke <falke.marco@gmail.com> 1554814573 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1556720481 -0400\n\nwallet: Use IsValidNumArgs in getwalletinfo rpc\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fad40ec9151248c6e8225e14980424f581d23e02",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fad40ec9151248c6e8225e14980424f581d23e02",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fad40ec9151248c6e8225e14980424f581d23e02/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2eb8c5d7a28b4dcecd60484773eaacd1608f6291",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2eb8c5d7a28b4dcecd60484773eaacd1608f6291",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2eb8c5d7a28b4dcecd60484773eaacd1608f6291"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 6,
      "deletions": 4
    },
    "files": [
      {
        "sha": "336b3c73b3cea3f2d32bc8c86b5e925f5736a744",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 4,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fad40ec9151248c6e8225e14980424f581d23e02/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fad40ec9151248c6e8225e14980424f581d23e02/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=fad40ec9151248c6e8225e14980424f581d23e02",
        "patch": "@@ -2382,9 +2382,7 @@ static UniValue getwalletinfo(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() != 0)\n-        throw std::runtime_error(\n-            RPCHelpMan{\"getwalletinfo\",\n+    const RPCHelpMan help{\"getwalletinfo\",\n                 \"Returns an object containing various wallet state info.\\n\",\n                 {},\n                 RPCResult{\n@@ -2408,7 +2406,11 @@ static UniValue getwalletinfo(const JSONRPCRequest& request)\n                     HelpExampleCli(\"getwalletinfo\", \"\")\n             + HelpExampleRpc(\"getwalletinfo\", \"\")\n                 },\n-            }.ToString());\n+    };\n+\n+    if (request.fHelp || !help.IsValidNumArgs(request.params.size())) {\n+        throw std::runtime_error(help.ToString());\n+    }\n \n     // Make sure the results are valid at least up to the most recent block\n     // the user could have gotten from another RPC command prior to now"
      }
    ]
  },
  {
    "sha": "fad13e925e197163a942f3f0d1ba2c95a2b65a56",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWQxM2U5MjVlMTk3MTYzYTk0MmYzZjBkMWJhMmM5NWEyYjY1YTU2",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-05-02T14:10:28Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-05-02T14:09:48Z"
      },
      "message": "rpcwallet: Make helper methods const on CWallet",
      "tree": {
        "sha": "dee3ceffde19ddb6aef59ec312a96dad00e36756",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dee3ceffde19ddb6aef59ec312a96dad00e36756"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fad13e925e197163a942f3f0d1ba2c95a2b65a56",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgH4gwAz5aB5nIHT13eRWt0IoFl6Pk/VB10jnLsw/KakHgpnU83KFcrmdUqBETE\ne3ya5ssFEqcgwPvtS/P8nNP7BWKhAWr/z2XGoyI02YXHdOe6Yltac+fpWCpK9KZW\nUNOD1RsbEmmxjiZxdxEnbx5zLKQzJWhRk+5ozMpLuILrUIfR5/EIDS4rJ+pKddSw\nPUp4MFjVXamPB4vGnEhEpbB2ew64xa6rHDc9DaZB6XzlqcktWi+rImJrVPa8u4hf\nK8iM8ExAqxGpardUT/z0u0ZBnzZMr9swaiBdmlNi3fwVULEagy2TyQwYb1JJn+lf\n/uJnZXswOXziLRV/BMeHMCbbCNoiDZ7yiygB74Nek9Xzm9MrE96DOzfg3uqPqtlb\n/+CZYGGia59t3zPi9tQR5uJUMcVMwKiCzi9vp7ClFJGLmgIUSMko+FJe6oopiY4p\nt1kkpMOq1ZwMfgyBi5UpiOmuiGYiAvMx879rsugsqPmQ5AWTMYsERrasgEzB2li7\nsr+aO3ly\n=izZs\n-----END PGP SIGNATURE-----",
        "payload": "tree dee3ceffde19ddb6aef59ec312a96dad00e36756\nparent fad40ec9151248c6e8225e14980424f581d23e02\nauthor MarcoFalke <falke.marco@gmail.com> 1556806228 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1556806188 -0400\n\nrpcwallet: Make helper methods const on CWallet\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fad13e925e197163a942f3f0d1ba2c95a2b65a56",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fad13e925e197163a942f3f0d1ba2c95a2b65a56",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fad13e925e197163a942f3f0d1ba2c95a2b65a56/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fad40ec9151248c6e8225e14980424f581d23e02",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fad40ec9151248c6e8225e14980424f581d23e02",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fad40ec9151248c6e8225e14980424f581d23e02"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 6,
      "deletions": 6
    },
    "files": [
      {
        "sha": "02da2a7114fb046247cebc20b82556263f91e9c1",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fad13e925e197163a942f3f0d1ba2c95a2b65a56/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fad13e925e197163a942f3f0d1ba2c95a2b65a56/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=fad13e925e197163a942f3f0d1ba2c95a2b65a56",
        "patch": "@@ -70,14 +70,14 @@ std::shared_ptr<CWallet> GetWalletForJSONRPCRequest(const JSONRPCRequest& reques\n     return wallets.size() == 1 || (request.fHelp && wallets.size() > 0) ? wallets[0] : nullptr;\n }\n \n-std::string HelpRequiringPassphrase(CWallet * const pwallet)\n+std::string HelpRequiringPassphrase(const CWallet* pwallet)\n {\n     return pwallet && pwallet->IsCrypted()\n         ? \"\\nRequires wallet passphrase to be set with walletpassphrase call.\"\n         : \"\";\n }\n \n-bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n+bool EnsureWalletIsAvailable(const CWallet* pwallet, bool avoidException)\n {\n     if (pwallet) return true;\n     if (avoidException) return false;\n@@ -89,7 +89,7 @@ bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n         \"Wallet file not specified (must request wallet RPC through /wallet/<filename> uri-path).\");\n }\n \n-void EnsureWalletIsUnlocked(CWallet * const pwallet)\n+void EnsureWalletIsUnlocked(const CWallet* pwallet)\n {\n     if (pwallet->IsLocked()) {\n         throw JSONRPCError(RPC_WALLET_UNLOCK_NEEDED, \"Error: Please enter the wallet passphrase with walletpassphrase first.\");"
      },
      {
        "sha": "90617472ccbec7a6f4f3d162484b359393857f28",
        "filename": "src/wallet/rpcwallet.h",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fad13e925e197163a942f3f0d1ba2c95a2b65a56/src/wallet/rpcwallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fad13e925e197163a942f3f0d1ba2c95a2b65a56/src/wallet/rpcwallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.h?ref=fad13e925e197163a942f3f0d1ba2c95a2b65a56",
        "patch": "@@ -31,9 +31,9 @@ void RegisterWalletRPCCommands(interfaces::Chain& chain, std::vector<std::unique\n  */\n std::shared_ptr<CWallet> GetWalletForJSONRPCRequest(const JSONRPCRequest& request);\n \n-std::string HelpRequiringPassphrase(CWallet *);\n-void EnsureWalletIsUnlocked(CWallet *);\n-bool EnsureWalletIsAvailable(CWallet *, bool avoidException);\n+std::string HelpRequiringPassphrase(const CWallet*);\n+void EnsureWalletIsUnlocked(const CWallet*);\n+bool EnsureWalletIsAvailable(const CWallet*, bool avoidException);\n \n UniValue getaddressinfo(const JSONRPCRequest& request);\n UniValue signrawtransactionwithwallet(const JSONRPCRequest& request);"
      }
    ]
  },
  {
    "sha": "999931cf8f167c7547f1015cdf05437a460c27f0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5OTk5MzFjZjhmMTY3Yzc1NDdmMTAxNWNkZjA1NDM3YTQ2MGMyN2Yw",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-04-09T13:10:08Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-05-02T14:10:23Z"
      },
      "message": "rpc: Add getbalances RPC",
      "tree": {
        "sha": "c5b16556718785c7c98a6dc3209b1c3dcbabf7aa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c5b16556718785c7c98a6dc3209b1c3dcbabf7aa"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/999931cf8f167c7547f1015cdf05437a460c27f0",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUjOegv/fWEXDE61/N+yQzOmqEcjU+PhCetdLUBB+6wqUMrnsbSHvQpMLLRYJPB5\ne+Ve2Wb5oFgFmmJ+zKCQfzpPMJLoQ9AX7xuLNPZBig8x2+Gq9kFvcm61MRZ8MvB8\n/vTBPki5R/7BkqMFr9Dv0BwcKQrcLQ8tA/aX89RGWWYciSgCdeiDbRIQuXez7n84\n9f7aXh3D9RWmtT/8bSCDQAPl+0G2Ldl3/bWjLLL6SsXsgIYB+MxHPqJWcfP7gcBH\nr68GPa+b7vX9HDWNSRXh/B5In7v3DC3BqF/aNzBAIyIQd4+iWoS5hgRtBTYJ2IuF\ntlKOgRc1PIEH+8VL7QTR1DdhLChLmmalW0yS0oZh2sCSmWVdr1TmxcFS9T6/ODgZ\nZ80D7OgLtmmssWWTe6YEfaDsLadgn6O3SLP4lBjcbNv4j0FJqbNKM8eLVG5sWo3c\nnxkzvPwDAnGGjlaN66Z7wYotrcjFBc+p2IE8MvWesVoczfwM1YzlfUSPYdOSbmxv\nCRfhvzqO\n=mN+Z\n-----END PGP SIGNATURE-----",
        "payload": "tree c5b16556718785c7c98a6dc3209b1c3dcbabf7aa\nparent fad13e925e197163a942f3f0d1ba2c95a2b65a56\nauthor MarcoFalke <falke.marco@gmail.com> 1554815408 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1556806223 -0400\n\nrpc: Add getbalances RPC\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/999931cf8f167c7547f1015cdf05437a460c27f0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/999931cf8f167c7547f1015cdf05437a460c27f0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/999931cf8f167c7547f1015cdf05437a460c27f0/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fad13e925e197163a942f3f0d1ba2c95a2b65a56",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fad13e925e197163a942f3f0d1ba2c95a2b65a56",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fad13e925e197163a942f3f0d1ba2c95a2b65a56"
      }
    ],
    "stats": {
      "total": 90,
      "additions": 83,
      "deletions": 7
    },
    "files": [
      {
        "sha": "18da83dfe8c669c993c7183297f4193312a1c40a",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 69,
        "deletions": 6,
        "changes": 75,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/999931cf8f167c7547f1015cdf05437a460c27f0/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/999931cf8f167c7547f1015cdf05437a460c27f0/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=999931cf8f167c7547f1015cdf05437a460c27f0",
        "patch": "@@ -1,5 +1,5 @@\n // Copyright (c) 2010 Satoshi Nakamoto\n-// Copyright (c) 2009-2018 The Bitcoin Core developers\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n@@ -9,7 +9,6 @@\n #include <core_io.h>\n #include <init.h>\n #include <interfaces/chain.h>\n-#include <validation.h>\n #include <key_io.h>\n #include <net.h>\n #include <node/transaction.h>\n@@ -27,10 +26,11 @@\n #include <timedata.h>\n #include <util/bip32.h>\n #include <util/fees.h>\n-#include <util/system.h>\n #include <util/moneystr.h>\n+#include <util/system.h>\n #include <util/url.h>\n #include <util/validation.h>\n+#include <validation.h>\n #include <wallet/coincontrol.h>\n #include <wallet/feebumper.h>\n #include <wallet/psbtwallet.h>\n@@ -2373,6 +2373,68 @@ static UniValue settxfee(const JSONRPCRequest& request)\n     return true;\n }\n \n+static UniValue getbalances(const JSONRPCRequest& request)\n+{\n+    std::shared_ptr<CWallet> const rpc_wallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(rpc_wallet.get(), request.fHelp)) {\n+        return NullUniValue;\n+    }\n+    CWallet& wallet = *rpc_wallet;\n+\n+    const RPCHelpMan help{\n+        \"getbalances\",\n+        \"Returns an object with all balances in \" + CURRENCY_UNIT + \".\\n\",\n+        {},\n+        RPCResult{\n+            \"{\\n\"\n+            \"    \\\"mine\\\": {                        (object) balances from outputs that the wallet can sign\\n\"\n+            \"      \\\"trusted\\\": xxx                 (numeric) trusted balance (outputs created by the wallet or confirmed outputs)\\n\"\n+            \"      \\\"untrusted_pending\\\": xxx       (numeric) untrusted pending balance (outputs created by others that are in the mempool)\\n\"\n+            \"      \\\"immature\\\": xxx                (numeric) balance from immature coinbase outputs\\n\"\n+            \"    },\\n\"\n+            \"    \\\"watchonly\\\": {                   (object) watchonly balances (not present if wallet does not watch anything)\\n\"\n+            \"      \\\"trusted\\\": xxx                 (numeric) trusted balance (outputs created by the wallet or confirmed outputs)\\n\"\n+            \"      \\\"untrusted_pending\\\": xxx       (numeric) untrusted pending balance (outputs created by others that are in the mempool)\\n\"\n+            \"      \\\"immature\\\": xxx                (numeric) balance from immature coinbase outputs\\n\"\n+            \"    },\\n\"\n+            \"}\\n\"},\n+        RPCExamples{\n+            HelpExampleCli(\"getbalances\", \"\") +\n+            HelpExampleRpc(\"getbalances\", \"\")},\n+    };\n+\n+    if (request.fHelp || !help.IsValidNumArgs(request.params.size())) {\n+        throw std::runtime_error(help.ToString());\n+    }\n+\n+    // Make sure the results are valid at least up to the most recent block\n+    // the user could have gotten from another RPC command prior to now\n+    wallet.BlockUntilSyncedToCurrentChain();\n+\n+    auto locked_chain = wallet.chain().lock();\n+    LOCK(wallet.cs_wallet);\n+\n+    UniValue obj(UniValue::VOBJ);\n+\n+    const auto bal = wallet.GetBalance();\n+    UniValue balances{UniValue::VOBJ};\n+    {\n+        UniValue balances_mine{UniValue::VOBJ};\n+        balances_mine.pushKV(\"trusted\", ValueFromAmount(bal.m_mine_trusted));\n+        balances_mine.pushKV(\"untrusted_pending\", ValueFromAmount(bal.m_mine_untrusted_pending));\n+        balances_mine.pushKV(\"immature\", ValueFromAmount(bal.m_mine_immature));\n+        balances.pushKV(\"mine\", balances_mine);\n+    }\n+    if (wallet.HaveWatchOnly()) {\n+        UniValue balances_watchonly{UniValue::VOBJ};\n+        balances_watchonly.pushKV(\"trusted\", ValueFromAmount(bal.m_watchonly_trusted));\n+        balances_watchonly.pushKV(\"untrusted_pending\", ValueFromAmount(bal.m_watchonly_untrusted_pending));\n+        balances_watchonly.pushKV(\"immature\", ValueFromAmount(bal.m_watchonly_immature));\n+        balances.pushKV(\"watchonly\", balances_watchonly);\n+    }\n+    return balances;\n+}\n+\n static UniValue getwalletinfo(const JSONRPCRequest& request)\n {\n     std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\n@@ -2389,9 +2451,9 @@ static UniValue getwalletinfo(const JSONRPCRequest& request)\n             \"{\\n\"\n             \"  \\\"walletname\\\": xxxxx,               (string) the wallet name\\n\"\n             \"  \\\"walletversion\\\": xxxxx,            (numeric) the wallet version\\n\"\n-            \"  \\\"balance\\\": xxxxxxx,                (numeric) the total confirmed balance of the wallet in \" + CURRENCY_UNIT + \"\\n\"\n-            \"  \\\"unconfirmed_balance\\\": xxx,        (numeric) the total unconfirmed balance of the wallet in \" + CURRENCY_UNIT + \"\\n\"\n-            \"  \\\"immature_balance\\\": xxxxxx,        (numeric) the total immature balance of the wallet in \" + CURRENCY_UNIT + \"\\n\"\n+            \"  \\\"balance\\\": xxxxxxx,                (numeric) Identical to getbalances().mine.trusted\\n\"\n+            \"  \\\"unconfirmed_balance\\\": xxx,        (numeric) Identical to getbalances().mine.untrusted_pending\\n\"\n+            \"  \\\"immature_balance\\\": xxxxxx,        (numeric) Identical to getbalances().mine.immature\\n\"\n             \"  \\\"txcount\\\": xxxxxxx,                (numeric) the total number of transactions in the wallet\\n\"\n             \"  \\\"keypoololdest\\\": xxxxxx,           (numeric) the timestamp (seconds since Unix epoch) of the oldest pre-generated key in the key pool\\n\"\n             \"  \\\"keypoolsize\\\": xxxx,               (numeric) how many new keys are pre-generated (only counts external keys)\\n\"\n@@ -4075,6 +4137,7 @@ static const CRPCCommand commands[] =\n     { \"wallet\",             \"getreceivedbylabel\",               &getreceivedbylabel,            {\"label\",\"minconf\"} },\n     { \"wallet\",             \"gettransaction\",                   &gettransaction,                {\"txid\",\"include_watchonly\"} },\n     { \"wallet\",             \"getunconfirmedbalance\",            &getunconfirmedbalance,         {} },\n+    { \"wallet\",             \"getbalances\",                      &getbalances,                   {} },\n     { \"wallet\",             \"getwalletinfo\",                    &getwalletinfo,                 {} },\n     { \"wallet\",             \"importaddress\",                    &importaddress,                 {\"address\",\"label\",\"rescan\",\"p2sh\"} },\n     { \"wallet\",             \"importmulti\",                      &importmulti,                   {\"requests\",\"options\"} },"
      },
      {
        "sha": "4d1f1ccdc13883c1c64f142d8434d485fd196847",
        "filename": "test/functional/wallet_balance.py",
        "status": "modified",
        "additions": 14,
        "deletions": 1,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/999931cf8f167c7547f1015cdf05437a460c27f0/test/functional/wallet_balance.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/999931cf8f167c7547f1015cdf05437a460c27f0/test/functional/wallet_balance.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/wallet_balance.py?ref=999931cf8f167c7547f1015cdf05437a460c27f0",
        "patch": "@@ -59,14 +59,24 @@ def run_test(self):\n         assert_equal(len(self.nodes[0].listunspent()), 0)\n         assert_equal(len(self.nodes[1].listunspent()), 0)\n \n-        self.log.info(\"Mining blocks ...\")\n+        self.log.info(\"Check that only node 0 is watching an address\")\n+        assert 'watchonly' in self.nodes[0].getbalances()\n+        assert 'watchonly' not in self.nodes[1].getbalances()\n \n+        self.log.info(\"Mining blocks ...\")\n         self.nodes[0].generate(1)\n         self.sync_all()\n         self.nodes[1].generate(1)\n         self.nodes[1].generatetoaddress(101, ADDRESS_WATCHONLY)\n         self.sync_all()\n \n+        assert_equal(self.nodes[0].getbalances()['mine']['trusted'], 50)\n+        assert_equal(self.nodes[0].getwalletinfo()['balance'], 50)\n+        assert_equal(self.nodes[1].getbalances()['mine']['trusted'], 50)\n+\n+        assert_equal(self.nodes[0].getbalances()['watchonly']['immature'], 5000)\n+        assert 'watchonly' not in self.nodes[1].getbalances()\n+\n         assert_equal(self.nodes[0].getbalance(), 50)\n         assert_equal(self.nodes[1].getbalance(), 50)\n \n@@ -107,8 +117,11 @@ def test_balances(*, fee_node_1=0):\n             assert_equal(self.nodes[1].getbalance(minconf=1), Decimal('0'))\n             # getunconfirmedbalance\n             assert_equal(self.nodes[0].getunconfirmedbalance(), Decimal('60'))  # output of node 1's spend\n+            assert_equal(self.nodes[0].getbalances()['mine']['untrusted_pending'], Decimal('60'))\n             assert_equal(self.nodes[0].getwalletinfo()[\"unconfirmed_balance\"], Decimal('60'))\n+\n             assert_equal(self.nodes[1].getunconfirmedbalance(), Decimal('0'))  # Doesn't include output of node 0's send since it was spent\n+            assert_equal(self.nodes[1].getbalances()['mine']['untrusted_pending'], Decimal('0'))\n             assert_equal(self.nodes[1].getwalletinfo()[\"unconfirmed_balance\"], Decimal('0'))\n \n         test_balances(fee_node_1=Decimal('0.01'))"
      }
    ]
  },
  {
    "sha": "facfb4111d14a3b06c46690a2cca7ca91cea8a96",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWNmYjQxMTFkMTRhM2IwNmM0NjY5MGEyY2NhN2NhOTFjZWE4YTk2",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-05-01T14:39:18Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-05-03T17:59:44Z"
      },
      "message": "rpc: Deprecate getunconfirmedbalance and getwalletinfo balances",
      "tree": {
        "sha": "ec25c6769f97bd1d47379fc7c816b71b28d8d578",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ec25c6769f97bd1d47379fc7c816b71b28d8d578"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/facfb4111d14a3b06c46690a2cca7ca91cea8a96",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUjgzAwAxiHULiMVhIaoSKl2WsUqq6qQZLirnYKFghKyb+o69SucGWHwB1ybQ09M\nAMsuVFODAiTPLN1GXH7/z52X1c9d1NXPACOx2UhyZllHwJHZRmKNS45HbMJndFQG\n8/aD3L9OVh7tpb72CJLdFXGq/kQmkZZdEs74HrpWhK2oPxFSpcQH9QsoSkIApFB9\nlQyZd23UJMrsLXTAhfasX0s6cn2klzG1A9+ppjx58p5qehETcVF8D54ejwo9f18J\n7j5wsx/3P/E6h9s3wT1NvTS4/67oekv5G8WP4RLdYya6qKPDnj/wnX9sFHOBgElM\nXHtC02ByVwvszEi1dkmVbvZrb5wwcDK4owZTHn5rZ+N0HYrYuJMfrVAPdQ1uLO7I\n6qedfWpNIz2i5+CKXfy3Hzx0WIt9xmh5EsO8dIYYtod3G6wxa30J818R62oVN9Lk\nz95r06Wjj0Hnai6CKMYMVN/8QbCFSQe59WrzLX+W42bugx2Qnpw7nO2nWKeurnfF\naf5Nb2MF\n=Cek+\n-----END PGP SIGNATURE-----",
        "payload": "tree ec25c6769f97bd1d47379fc7c816b71b28d8d578\nparent 999931cf8f167c7547f1015cdf05437a460c27f0\nauthor MarcoFalke <falke.marco@gmail.com> 1556721558 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1556906384 -0400\n\nrpc: Deprecate getunconfirmedbalance and getwalletinfo balances\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/facfb4111d14a3b06c46690a2cca7ca91cea8a96",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/facfb4111d14a3b06c46690a2cca7ca91cea8a96",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/facfb4111d14a3b06c46690a2cca7ca91cea8a96/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "999931cf8f167c7547f1015cdf05437a460c27f0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/999931cf8f167c7547f1015cdf05437a460c27f0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/999931cf8f167c7547f1015cdf05437a460c27f0"
      }
    ],
    "stats": {
      "total": 17,
      "additions": 13,
      "deletions": 4
    },
    "files": [
      {
        "sha": "834c9b36dc0ea2e7e79fcf837a1ed6473307a2f2",
        "filename": "doc/release-notes.md",
        "status": "modified",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/facfb4111d14a3b06c46690a2cca7ca91cea8a96/doc/release-notes.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/facfb4111d14a3b06c46690a2cca7ca91cea8a96/doc/release-notes.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes.md?ref=facfb4111d14a3b06c46690a2cca7ca91cea8a96",
        "patch": "@@ -61,6 +61,15 @@ platform.\n Notable changes\n ===============\n \n+New RPCs\n+--------\n+\n+- `getbalances` returns an object with all balances (`mine`,\n+  `untrusted_pending` and `immature`). Please refer to the RPC help of\n+  `getbalances` for details. The new RPC is intended to replace\n+  `getunconfirmedbalance` and the balance fields in `getwalletinfo`, as well as\n+  `getbalance`. The old calls may be removed in a future version.\n+\n Updated RPCs\n ------------\n "
      },
      {
        "sha": "76f59a7bb01b2d982f38f52f5ba4c961663ef52d",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/facfb4111d14a3b06c46690a2cca7ca91cea8a96/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/facfb4111d14a3b06c46690a2cca7ca91cea8a96/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=facfb4111d14a3b06c46690a2cca7ca91cea8a96",
        "patch": "@@ -785,7 +785,7 @@ static UniValue getunconfirmedbalance(const JSONRPCRequest &request)\n     if (request.fHelp || request.params.size() > 0)\n         throw std::runtime_error(\n             RPCHelpMan{\"getunconfirmedbalance\",\n-                \"Returns the server's total unconfirmed balance\\n\",\n+                \"DEPRECATED\\nIdentical to getbalances().mine.untrusted_pending\\n\",\n                 {},\n                 RPCResults{},\n                 RPCExamples{\"\"},\n@@ -2451,9 +2451,9 @@ static UniValue getwalletinfo(const JSONRPCRequest& request)\n             \"{\\n\"\n             \"  \\\"walletname\\\": xxxxx,               (string) the wallet name\\n\"\n             \"  \\\"walletversion\\\": xxxxx,            (numeric) the wallet version\\n\"\n-            \"  \\\"balance\\\": xxxxxxx,                (numeric) Identical to getbalances().mine.trusted\\n\"\n-            \"  \\\"unconfirmed_balance\\\": xxx,        (numeric) Identical to getbalances().mine.untrusted_pending\\n\"\n-            \"  \\\"immature_balance\\\": xxxxxx,        (numeric) Identical to getbalances().mine.immature\\n\"\n+            \"  \\\"balance\\\": xxxxxxx,                (numeric) DEPRECATED. Identical to getbalances().mine.trusted\\n\"\n+            \"  \\\"unconfirmed_balance\\\": xxx,        (numeric) DEPRECATED. Identical to getbalances().mine.untrusted_pending\\n\"\n+            \"  \\\"immature_balance\\\": xxxxxx,        (numeric) DEPRECATED. Identical to getbalances().mine.immature\\n\"\n             \"  \\\"txcount\\\": xxxxxxx,                (numeric) the total number of transactions in the wallet\\n\"\n             \"  \\\"keypoololdest\\\": xxxxxx,           (numeric) the timestamp (seconds since Unix epoch) of the oldest pre-generated key in the key pool\\n\"\n             \"  \\\"keypoolsize\\\": xxxx,               (numeric) how many new keys are pre-generated (only counts external keys)\\n\""
      }
    ]
  }
]