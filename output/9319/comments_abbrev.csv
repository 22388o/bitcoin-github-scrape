CodeShark,2016-12-11T08:32:34Z,concept ACK,https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-266269940,266269940,
laanwj,2016-12-15T16:53:13Z,"Adding a specific limit for user-added nodes makes it easier to reason about, and avoids some annoying edge cases. Good idea. Concept ACK.",https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-267379599,267379599,
TheBlueMatt,2016-12-24T21:04:59Z,"ACK b8d170dab441896970d5ab0f15ca672173592065\n\nWould very much like to see this for 0.14.",https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-269100401,269100401,
sipa,2016-12-30T13:24:55Z,"One nit: your last commit has 'documnetation' in the title.\n",https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-269771285,269771285,
sipa,2016-12-30T13:48:07Z,utACK 1c7dcacabd7327273a138aec4fd74a404b32e596,https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-269773446,269773446,
kanoi,2017-01-01T22:58:22Z,Missing command line and RPC options to set the limit.,https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-269923454,269923454,
MarcoFalke,2017-01-01T23:45:30Z,@kanoi You can find the reasons why this is not supported in #9217 and similar discussions.,https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-269925070,269925070,
kanoi,2017-01-02T00:35:42Z,That discussion is only about RPC.,https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-269926753,269926753,
TheBlueMatt,2017-01-02T01:09:19Z,"@kanoi that discussion is about outbound connection P2P slots, not RPC. The issue here is that lots of folks configure Bitcoin Core by adding a long list of known IP addresses from arbitrary sources to addnode. This used to be especially common, but still exists today. In those cases, we absolutely cannot default to simply make 100 outbound connections (for the same reasons as discussed in #9217).",https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-269927790,269927790,
kanoi,2017-01-02T01:40:35Z,"Nothing to do with defaults - I'm referring to having an arbitrary constant number that can't be changed without modifying the code - there's no logical reason to set it at 8 and enforce that number for eternity.\nDefault of 8 is not the issue, forcing it to always be 8 is the issue.",https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-269928785,269928785,
TheBlueMatt,2017-01-02T01:47:29Z,"@kanoi changing the maximum outbound connections is far out of scope for this PR. If you wish to do so, please comment on #9217, #6533, #6014, etc.",https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-269929024,269929024,
kanoi,2017-01-02T01:55:01Z,"I don't see the reason for adding a new setting and ignoring adding an option to configure it.\nIf the setting isn't necessary then why add it.\nIf the setting is necessary, why not allow it to be configured.",https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-269929239,269929239,
TheBlueMatt,2017-01-02T01:59:57Z,There is no new setting here? It uses the same connection slot count as previously (8).,https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-269929369,269929369,
kanoi,2017-01-02T02:14:08Z,"Really?\n\n> This commit introduces a new limit of eight connections just for\naddnode peers which is not subject to any of the other connection\nlimitations (including maxconnections).\n",https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-269929798,269929798,
sipa,2017-01-02T02:16:31Z,"> If the setting is necessary, why not allow it to be configured.\n\nConfigurable settings are useful when there are distinctly different environments that require different behaviour.\n\nReasons for a higher number of outgoing connections:\n* Better partition resistance (but more than a few has hardly any effect).\n\nReasons for a lower number of outgoing connections:\n* More load on the ",https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-269929860,269929860,
TheBlueMatt,2017-01-04T22:29:14Z,"Needs rebase, should be easy.",https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-270505841,270505841,
laanwj,2017-01-05T10:59:11Z,"Conflicts:\n```\n<<<<<<< 406f35d99d0fcd2f50370280e605283d04da466a\n                OpenNetworkConnection(CAddress(service, NODE_NONE), false, &grant, info.strAddedNode.c_str(), false);\n                if (!interruptNet.sleep_for(std::chrono::milliseconds(500)))\n                    return;\n||||||| merged common ancestors\n                OpenNetworkConnection(CAddress(service, NODE_NONE),",https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-270618428,270618428,
gmaxwell,2017-01-05T19:03:31Z,rebased.,https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-270728428,270728428,
sipa,2017-01-05T19:27:47Z,utACK 032ba3f0665432bd15ff76ee01cde245ad29e3e6,https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-270734249,270734249,
TheBlueMatt,2017-01-05T22:27:25Z,Diff looks equivalent to me from my previous ACK at b8d170dab441896970d5ab0f15ca672173592065 to 032ba3f0665432bd15ff76ee01cde245ad29e3e6,https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-270776076,270776076,
btcdrak,2017-01-07T18:08:18Z,Post humus ACK 032ba3f,https://github.com/bitcoin/bitcoin/pull/9319#issuecomment-271099731,271099731,
sipa,2016-12-11T05:06:32Z,Are addnode connections no longer counted under the normal max connection limit?,https://github.com/bitcoin/bitcoin/pull/9319#discussion_r91847856,91847856,src/init.cpp
gmaxwell,2016-12-11T05:09:40Z,"They are not. See also commit message, pr text, and release note. :)",https://github.com/bitcoin/bitcoin/pull/9319#discussion_r91847887,91847887,src/init.cpp
paveljanik,2016-12-11T17:29:14Z,"What do you mean by ""aggressive""connection here?",https://github.com/bitcoin/bitcoin/pull/9319#discussion_r91860490,91860490,doc/release-notes.md
paveljanik,2016-12-11T17:32:05Z,"This is new behaviour, addnoded nodes are not punished/banned. Right?\n",https://github.com/bitcoin/bitcoin/pull/9319#discussion_r91860538,91860538,src/net_processing.cpp
paveljanik,2016-12-11T17:32:38Z,addnode missing in the helptext.,https://github.com/bitcoin/bitcoin/pull/9319#discussion_r91860551,91860551,src/rpc/net.cpp
gmaxwell,2016-12-11T20:07:42Z,"""Ban-disconnects are also exempted for peers added via addnode since\nthe outbound addnode logic ignores bans. Previously it would ban\nan addnode then immediately reconnect to it.""",https://github.com/bitcoin/bitcoin/pull/9319#discussion_r91863883,91863883,src/net_processing.cpp
gmaxwell,2016-12-11T23:42:54Z,fixed.,https://github.com/bitcoin/bitcoin/pull/9319#discussion_r91869291,91869291,src/rpc/net.cpp
sipa,2016-12-27T16:29:37Z,"If no connection was established, this sleep runs while holding the semaphore. Is that a problem? I think this is the only thread that accesses the semaphore, but if that's the case... why are we using a semaphore?",https://github.com/bitcoin/bitcoin/pull/9319#discussion_r93947482,93947482,src/net.cpp
sipa,2016-12-27T16:36:59Z,"This makes addnoded connections no longer prevent random connections to the same netgroups. Is that change implied by ""which is not subject to any of the other connection limitations""?",https://github.com/bitcoin/bitcoin/pull/9319#discussion_r93948173,93948173,src/net.cpp
gmaxwell,2016-12-29T18:33:01Z,"That was the intent. At least the idea was to make the automatic and addnode connections operate largely independent of each other, not auto-connecting to amazon because you've got an addnode to amazon seems odd.\n\nAt least my perspective on the netgroup limitation is that with your limited 8 outbound slots you don't want to harm your partition resistance by spending multiple of them on a singl",https://github.com/bitcoin/bitcoin/pull/9319#discussion_r94165888,94165888,src/net.cpp
sipa,2016-12-29T18:38:04Z,That makes sense. I just wanted to make sure it was intentional.,https://github.com/bitcoin/bitcoin/pull/9319#discussion_r94166363,94166363,src/net.cpp
gmaxwell,2016-12-29T18:41:41Z,"It's okay to hold extras here because this is the only place they're taken. What they're used for is to sleep until a release, which is also the case for outbound peers use of a semaphore. The result is so that when this thread is inactive because we're at connection maximum and a connection goes down the code to make a new connection begins instantly. \n\nPerhaps it would be better to use some ",https://github.com/bitcoin/bitcoin/pull/9319#discussion_r94166774,94166774,src/net.cpp
gmaxwell,2016-12-29T19:01:53Z,"Do you think I should add a comment like, ""Inbound and addnode connections don't use our limited pool of automatic outbound connections, so we don't consider them for netgroup exclusion.""?",https://github.com/bitcoin/bitcoin/pull/9319#discussion_r94168773,94168773,src/net.cpp
TheBlueMatt,2016-12-29T19:05:01Z,"Sure, always add comments :).",https://github.com/bitcoin/bitcoin/pull/9319#discussion_r94169095,94169095,src/net.cpp
gmaxwell,2016-12-30T02:56:12Z,Done,https://github.com/bitcoin/bitcoin/pull/9319#discussion_r94199248,94199248,src/net.cpp
theuni,2017-01-02T19:02:32Z,"We'll soon have an OnDisconnected() event that will allow us to change this (and possibly the outbound behavior) more easily. Using the same mechanism here makes sense for now, imo.",https://github.com/bitcoin/bitcoin/pull/9319#discussion_r94339948,94339948,src/net.cpp
droark,2017-01-07T06:53:17Z,"FYI, I'm getting a warning for this on macOS 10.12.\n\n```\nnet.cpp:1807:75: warning: if statement has empty body [-Wempty-body]\n        if (!interruptNet.sleep_for(std::chrono::seconds(tried ? 60 : 2)));\n                                                                          ^\nnet.cpp:1807:75: note: put the semicolon on a separate line to silence this warning\n```\n\nLooks like a st",https://github.com/bitcoin/bitcoin/pull/9319#discussion_r95053851,95053851,src/net.cpp
MarcoFalke,2017-01-07T14:04:24Z,"@droark If it is not merged, provide feedback. After it is merged, pull requests are very welcomed.",https://github.com/bitcoin/bitcoin/pull/9319#discussion_r95058892,95058892,src/net.cpp
droark,2017-01-07T17:51:20Z,Thanks. Just filed #9487.,https://github.com/bitcoin/bitcoin/pull/9319#discussion_r95062507,95062507,src/net.cpp
