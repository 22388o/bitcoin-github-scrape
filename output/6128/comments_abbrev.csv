jgarzik,2015-05-13T16:06:10Z,"hmmmm.  I think this is a symptom of a different problem.\n\nWe have a set of messages that appears before the debug log is initialized.  These should be buffered and dumped into the current log.\n\nMoving messages down just adds code in places where it would not otherwise go, if not for this log issue.\n",https://github.com/bitcoin/bitcoin/pull/6128#issuecomment-101726196,101726196,
ajweiss,2015-05-14T21:02:41Z,"Is that still true (in light of the params modularization)?  I actually\nimplemented a quick buffer but since came to realize that it might be\ncompletely unnecessary.  At least in the non-exception case, the logs are\ninitialized as soon as the parameter interaction checking begins in\nAppInit2 and nothing really needs to hit the logs before that.  It looks\nlike this may be as simple as just mov",https://github.com/bitcoin/bitcoin/pull/6128#issuecomment-102168920,102168920,
laanwj,2015-05-15T10:02:06Z,"Can't we move ""the cut"" up instead? I'd personally prefer that to buffering, as buffering logs tends to add complexity for avoiding message loss in crashes. Writing directly to file is nice and robust.\n",https://github.com/bitcoin/bitcoin/pull/6128#issuecomment-102352217,102352217,
jgarzik,2015-05-15T16:19:22Z,"@laanwj Not really, no.  This is a familiar problem in many softwares:  You need logging at the earliest instant -- yet the logging itself has dependencies, such as reading the configuration file and determining the log file location.  Logging occurs before this point, no matter where you locate the cut.\n",https://github.com/bitcoin/bitcoin/pull/6128#issuecomment-102451651,102451651,
ajweiss,2015-05-15T18:13:26Z,"Regardless, the cut and version message are going to have to be moved earlier in the init process since they now happen quite late after parameter checking.  I'll push two commits, one that moves the cut earlier in the initialization process.  The second will add buffering.  \n\nAgain, while playing yesterday, I noted that with the cut and version message moved very nearly to the top of AppInit2, ",https://github.com/bitcoin/bitcoin/pull/6128#issuecomment-102476119,102476119,
ajweiss,2015-05-15T21:42:29Z,"Ok, opened a new very simple PR #6147 that just moves the emission of the log cut to a sensible place.  I'm working on trying to get the code to emit a message before this cut now.  If I succeed, I'll PR the more complex buffering stuff.\n",https://github.com/bitcoin/bitcoin/pull/6128#issuecomment-102532202,102532202,
