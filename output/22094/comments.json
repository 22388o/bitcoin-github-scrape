[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851966621",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-851966621",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 851966621,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MTk2NjYyMQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-01T09:12:30Z",
    "updated_at": "2021-06-01T09:12:30Z",
    "author_association": "MEMBER",
    "body": "What is the goal of this change? Is it to remove a suppression? If yes, why is the suppression not removed in this pull?\r\n\r\nAlso, it seems a bit early to fuzz years larger than 2106 (80 years in the future). The network code will need to be changed anyway by then and this change doesn't seem to make it any easier (or harder).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851966621/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851968154",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-851968154",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 851968154,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MTk2ODE1NA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-01T09:14:44Z",
    "updated_at": "2021-06-01T09:14:44Z",
    "author_association": "MEMBER",
    "body": "See also https://github.com/bitcoin/bips/pull/967#issue-467275837",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851968154/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851990149",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-851990149",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 851990149,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MTk5MDE0OQ==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-01T09:48:32Z",
    "updated_at": "2021-06-01T09:48:32Z",
    "author_association": "MEMBER",
    "body": "Using a named cast makes the truncation conversion explicit, which ISTM is preferable than implicit. Happy to close if explicit isn't seen as better or sufficient justification.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851990149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/852004997",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-852004997",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 852004997,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MjAwNDk5Nw==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-01T10:12:15Z",
    "updated_at": "2021-06-01T10:12:15Z",
    "author_association": "MEMBER",
    "body": "Updated the PR title.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/852004997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/852005702",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-852005702",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 852005702,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MjAwNTcwMg==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-01T10:13:24Z",
    "updated_at": "2021-06-01T10:13:24Z",
    "author_association": "MEMBER",
    "body": "I agree that absent any other points the explicit conversion is better than the implicit one. Though, this silences a warning, which might also be worthy to fix. Either by saying it is \"invalid\" (can be fixed in several decades) and ignoring it or by updating the fuzz test to not fuzz years past 2106.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/852005702/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/852006551",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-852006551",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 852006551,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MjAwNjU1MQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-01T10:14:55Z",
    "updated_at": "2021-06-01T10:14:55Z",
    "author_association": "MEMBER",
    "body": "Either way, the suppressions file should be updated as part of the change, if applicable.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/852006551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/888234734",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-888234734",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 888234734,
    "node_id": "IC_kwDOABII58408WLu",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-28T11:28:23Z",
    "updated_at": "2021-07-28T11:28:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "Given that the second argument of `Connected()` is never used, maybe it is better to drop it:\r\n<details>\r\n<summary>[patch] remove nTime argument</summary>\r\n\r\n```diff\r\ndiff --git i/src/addrman.cpp w/src/addrman.cpp\r\nindex 8192b4eba6..149d929e73 100644\r\n--- i/src/addrman.cpp\r\n+++ w/src/addrman.cpp\r\n@@ -570,13 +570,13 @@ void CAddrMan::GetAddr_(std::vector<CAddress>& vAddr, size_t max_addresses, size\r\n         if (ai.IsTerrible(now)) continue;\r\n \r\n         vAddr.push_back(ai);\r\n     }\r\n }\r\n \r\n-void CAddrMan::Connected_(const CService& addr, int64_t nTime)\r\n+void CAddrMan::Connected_(const CService& addr)\r\n {\r\n     AssertLockHeld(cs);\r\n \r\n     CAddrInfo* pinfo = Find(addr);\r\n \r\n     // if not found, bail out\r\n@@ -588,14 +588,16 @@ void CAddrMan::Connected_(const CService& addr, int64_t nTime)\r\n     // check whether we are talking about the exact same CService (including same port)\r\n     if (info != addr)\r\n         return;\r\n \r\n     // update info\r\n     int64_t nUpdateInterval = 20 * 60;\r\n-    if (nTime - info.nTime > nUpdateInterval)\r\n-        info.nTime = nTime;\r\n+    const auto now = GetAdjustedTime();\r\n+    if (now - info.nTime > nUpdateInterval) {\r\n+        info.nTime = now;\r\n+    }\r\n }\r\n \r\n void CAddrMan::SetServices_(const CService& addr, ServiceFlags nServices)\r\n {\r\n     AssertLockHeld(cs);\r\n \r\ndiff --git i/src/addrman.h w/src/addrman.h\r\nindex 1fc64ac07f..28f445b071 100644\r\n--- i/src/addrman.h\r\n+++ w/src/addrman.h\r\n@@ -605,18 +605,18 @@ public:\r\n         GetAddr_(vAddr, max_addresses, max_pct, network);\r\n         Check();\r\n         return vAddr;\r\n     }\r\n \r\n     //! Outer function for Connected_()\r\n-    void Connected(const CService &addr, int64_t nTime = GetAdjustedTime())\r\n+    void Connected(const CService &addr)\r\n         EXCLUSIVE_LOCKS_REQUIRED(!cs)\r\n     {\r\n         LOCK(cs);\r\n         Check();\r\n-        Connected_(addr, nTime);\r\n+        Connected_(addr);\r\n         Check();\r\n     }\r\n \r\n     void SetServices(const CService &addr, ServiceFlags nServices)\r\n         EXCLUSIVE_LOCKS_REQUIRED(!cs)\r\n     {\r\n@@ -760,15 +760,14 @@ private:\r\n      *  this information doesn't leak topology information to network spies.\r\n      *\r\n      *  net_processing calls this function when it *disconnects* from a peer to\r\n      *  not leak information about currently connected peers.\r\n      *\r\n      * @param[in]   addr     The address of the peer we were connected to\r\n-     * @param[in]   nTime    The time that we were last connected to this peer\r\n      */\r\n-    void Connected_(const CService& addr, int64_t nTime) EXCLUSIVE_LOCKS_REQUIRED(cs);\r\n+    void Connected_(const CService& addr) EXCLUSIVE_LOCKS_REQUIRED(cs);\r\n \r\n     //! Update an entry's service bits.\r\n     void SetServices_(const CService &addr, ServiceFlags nServices) EXCLUSIVE_LOCKS_REQUIRED(cs);\r\n \r\n     //! Remove invalid addresses.\r\n     void RemoveInvalid() EXCLUSIVE_LOCKS_REQUIRED(cs);\r\ndiff --git i/src/test/fuzz/addrman.cpp w/src/test/fuzz/addrman.cpp\r\nindex 92c34e74d9..38c551e0e3 100644\r\n--- i/src/test/fuzz/addrman.cpp\r\n+++ w/src/test/fuzz/addrman.cpp\r\n@@ -100,13 +100,13 @@ FUZZ_TARGET_INIT(addrman, initialize_addrman)\r\n                     addr_man.Attempt(*opt_service, fuzzed_data_provider.ConsumeBool(), ConsumeTime(fuzzed_data_provider));\r\n                 }\r\n             },\r\n             [&] {\r\n                 const std::optional<CService> opt_service = ConsumeDeserializable<CService>(fuzzed_data_provider);\r\n                 if (opt_service) {\r\n-                    addr_man.Connected(*opt_service, ConsumeTime(fuzzed_data_provider));\r\n+                    addr_man.Connected(*opt_service);\r\n                 }\r\n             },\r\n             [&] {\r\n                 const std::optional<CService> opt_service = ConsumeDeserializable<CService>(fuzzed_data_provider);\r\n                 if (opt_service) {\r\n                     addr_man.SetServices(*opt_service, ConsumeWeakEnum(fuzzed_data_provider, ALL_SERVICE_FLAGS));\r\n```\r\n</details>\r\n\r\nEither way, the suppression `unsigned-integer-overflow:addrman.cpp` cannot be removed because according to https://github.com/bitcoin/bitcoin/pull/21000 there is another place in `addrman.cpp` that has a similar problem.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/888234734/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889774297",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-889774297",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 889774297,
    "node_id": "IC_kwDOABII5841CODZ",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T09:43:52Z",
    "updated_at": "2021-08-10T14:11:40Z",
    "author_association": "MEMBER",
    "body": "> Given that the second argument of `Connected()` is never used, maybe it is better to drop it:\r\n> [patch] remove nTime argument\r\n> \r\n> Either way, the suppression `unsigned-integer-overflow:addrman.cpp` cannot be removed because according to #21000 there is another place in `addrman.cpp` that has a similar problem.\r\n\r\nThanks!  Removing the argument seems out of scope of this change, but you're right.\r\n\r\nRebased, added a second UBSan fix, and removed the addrman UBSan suppressions that these changes seem to allow. There is a third one at the top of #21000; <strike>I didn't reproduce the warning but may still look into it.</strike> -> Edit: done.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889774297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889870386",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-889870386",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 889870386,
    "node_id": "IC_kwDOABII5841Clgy",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T12:49:11Z",
    "updated_at": "2021-07-30T12:49:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Removing the argument seems out of scope of this change\r\n\r\nWhy? If the purpose is to silence the warning, removing the argument will achieve that (+ remove some dead code).\r\n\r\nWith current `master` we have wrong behavior (e.g. treat year 2110 as year 1974) and a warning due to that. With this PR in its current form (523c26d) we have wrong behavior (same as in `master`), no warning now from fuzzing and no warning ever, even in year 2110.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889870386/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889879516",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-889879516",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 889879516,
    "node_id": "IC_kwDOABII5841Cnvc",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T13:05:21Z",
    "updated_at": "2021-07-30T13:05:21Z",
    "author_association": "MEMBER",
    "body": "> Why? If the purpose is to silence the warning, removing the argument will achieve that (+ remove some dead code).\r\n\r\nWould it not just replace one int64 value for another int64 being passed into a uint32?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889879516/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889980497",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-889980497",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 889980497,
    "node_id": "IC_kwDOABII5841DAZR",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T15:46:06Z",
    "updated_at": "2021-07-30T15:46:06Z",
    "author_association": "MEMBER",
    "body": "Updated per @MarcoFalke's https://github.com/bitcoin/bitcoin/pull/22094#discussion_r679802857 to raise if the file compat is corrupt.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889980497/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890872916",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-890872916",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 890872916,
    "node_id": "IC_kwDOABII5841GaRU",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-02T09:24:35Z",
    "updated_at": "2021-08-02T09:24:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Would it not just replace one int64 value for another int64 being passed into a uint32?\r\n\r\nCorrect. But that new `int64` (returned by `GetAdjustedTime()`) will not overflow the `uint32_t` range before year 2106 and after that we would get a warning _as deserved_.\r\n\r\nThe underlying problem is that the code is not ready for year>2106 and the fuzzer tests with such years. Given that it is difficult to fix the code, I think it would be better to make the fuzzer not test with years>2106 (removing the second argument of `CAddrMan::Connected()` will achieve that).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890872916/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896065016",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-896065016",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 896065016,
    "node_id": "IC_kwDOABII5841aN34",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-10T14:12:36Z",
    "updated_at": "2021-08-10T16:09:00Z",
    "author_association": "MEMBER",
    "body": "@vasild I added your proposed change at the top as a commit authored by you (though it doesn't fix the UBSan error for me) and added TODO comments regarding updates needed by the Year 2106.\r\n\r\nHopefully this makes the issue more explicit in the code and documentation.\r\n\r\nAlso fixed the remaining addrman issues listed in https://github.com/bitcoin/bitcoin/pull/21000 that were suppressed.\r\n\r\nA final commit removes all four of the UBSan addrman suppressions.\r\n\r\nEdit: hm, seeing new UBSan errors in both the CI and locally. Looking.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896065016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/898606006",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-898606006",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 898606006,
    "node_id": "IC_kwDOABII5841j6O2",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-13T17:14:35Z",
    "updated_at": "2021-08-21T05:04:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22740](https://github.com/bitcoin/bitcoin/pull/22740) ([addrman] Move serialization code to cpp by amitiuttarwar)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/898606006/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/909837048",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-909837048",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 909837048,
    "node_id": "IC_kwDOABII5842OwL4",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-01T03:11:56Z",
    "updated_at": "2021-09-01T03:11:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n\ud83d\udc19 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/909837048/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/949567300",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#issuecomment-949567300",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22094",
    "id": 949567300,
    "node_id": "IC_kwDOABII5844mT9E",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-22T12:04:40Z",
    "updated_at": "2021-10-22T12:04:40Z",
    "author_association": "MEMBER",
    "body": "Needs rebase if still relevant",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/949567300/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679802857",
    "pull_request_review_id": 718916274,
    "id": 679802857,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTgwMjg1Nw==",
    "diff_hunk": "@@ -317,7 +318,7 @@ class CAddrMan\n \n         uint8_t compat;\n         s >> compat;\n-        const uint8_t lowest_compatible = compat - INCOMPATIBILITY_BASE;\n+        const uint8_t lowest_compatible = std::max(compat - INCOMPATIBILITY_BASE, 0);",
    "path": "src/addrman.h",
    "position": null,
    "original_position": 13,
    "commit_id": "2706a9d81b132622f58f5775fffa399b2f665c2e",
    "original_commit_id": "523c26d8c201066658d7acea412eba544657c736",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Can you explain why treating corrupt files as file format version 0 is the right fix?",
    "created_at": "2021-07-30T09:55:06Z",
    "updated_at": "2021-07-30T09:55:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#discussion_r679802857",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22094",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679802857"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22094#discussion_r679802857"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22094"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679802857/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 321,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679919237",
    "pull_request_review_id": 719069584,
    "id": 679919237,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTkxOTIzNw==",
    "diff_hunk": "@@ -317,7 +318,7 @@ class CAddrMan\n \n         uint8_t compat;\n         s >> compat;\n-        const uint8_t lowest_compatible = compat - INCOMPATIBILITY_BASE;\n+        const uint8_t lowest_compatible = std::max(compat - INCOMPATIBILITY_BASE, 0);",
    "path": "src/addrman.h",
    "position": null,
    "original_position": 13,
    "commit_id": "2706a9d81b132622f58f5775fffa399b2f665c2e",
    "original_commit_id": "523c26d8c201066658d7acea412eba544657c736",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good point, it should raise.\r\n```diff\r\n-        if (lowest_compatible > FILE_FORMAT) {\r\n+        if (lowest_compatible > FILE_FORMAT || compat < INCOMPATIBILITY_BASE) {\r\n```\r\n",
    "created_at": "2021-07-30T13:20:07Z",
    "updated_at": "2021-07-30T13:20:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#discussion_r679919237",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22094",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679919237"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22094#discussion_r679919237"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22094"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679919237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 321,
    "side": "RIGHT",
    "in_reply_to_id": 679802857
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693763530",
    "pull_request_review_id": 735848096,
    "id": 693763530,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5Mzc2MzUzMA==",
    "diff_hunk": "@@ -590,9 +592,12 @@ void CAddrMan::Connected_(const CService& addr, int64_t nTime)\n         return;\n \n     // update info\n-    int64_t nUpdateInterval = 20 * 60;\n-    if (nTime - info.nTime > nUpdateInterval)\n-        info.nTime = nTime;\n+    const int64_t nUpdateInterval{20 * 60};\n+    const int64_t now{GetAdjustedTime()};\n+    // TODO: change CAddress::nTime from uint32 to int64 before the Year 2106.\n+    if (now - static_cast<int64_t>(info.nTime) > nUpdateInterval) {\n+        info.nTime = static_cast<uint32_t>(now);\n+    }",
    "path": "src/addrman.cpp",
    "position": 48,
    "original_position": 48,
    "commit_id": "2706a9d81b132622f58f5775fffa399b2f665c2e",
    "original_commit_id": "2706a9d81b132622f58f5775fffa399b2f665c2e",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This warrants an assert that `now`, when cast to `uint32_t` will not overflow, i.e. year 2106 be silently converted to year 1970:\r\n\r\n```cpp\r\n        assert(now <= std::numeric_limits<uint32>::max());\r\n        info.nTime = static_cast<uint32_t>(now);\r\n```",
    "created_at": "2021-08-23T08:23:46Z",
    "updated_at": "2021-08-23T09:16:05Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#discussion_r693763530",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22094",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693763530"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22094#discussion_r693763530"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22094"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693763530/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 595,
    "original_start_line": 595,
    "start_side": "RIGHT",
    "line": 600,
    "original_line": 600,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693768497",
    "pull_request_review_id": 735848096,
    "id": 693768497,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5Mzc2ODQ5Nw==",
    "diff_hunk": "@@ -329,11 +329,12 @@ bool CAddrMan::Add_(const CAddress& addr, const CNetAddr& source, int64_t nTimeP\n \n     if (pinfo) {\n         // periodically update nTime\n-        bool fCurrentlyOnline = (GetAdjustedTime() - addr.nTime < 24 * 60 * 60);\n+        // TODO: change CAddress::nTime from uint32 to int64 before the Year 2106.\n+        bool fCurrentlyOnline = (GetAdjustedTime() - static_cast<int64_t>(addr.nTime) < 24 * 60 * 60);\n         int64_t nUpdateInterval = (fCurrentlyOnline ? 60 * 60 : 24 * 60 * 60);\n-        if (addr.nTime && (!pinfo->nTime || pinfo->nTime < addr.nTime - nUpdateInterval - nTimePenalty))\n-            pinfo->nTime = std::max((int64_t)0, addr.nTime - nTimePenalty);\n-\n+        if (addr.nTime && (!pinfo->nTime || pinfo->nTime < static_cast<int64_t>(addr.nTime) - nUpdateInterval - nTimePenalty)) {\n+            pinfo->nTime = std::max<uint32_t>(0, static_cast<int64_t>(addr.nTime) - nTimePenalty);",
    "path": "src/addrman.cpp",
    "position": 12,
    "original_position": 12,
    "commit_id": "2706a9d81b132622f58f5775fffa399b2f665c2e",
    "original_commit_id": "2706a9d81b132622f58f5775fffa399b2f665c2e",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This will implicitly convert the second argument of `std::max` from `int64_t` to `uint32_t`:\r\n\r\n```cpp\r\n    int64_t x = 10;\r\n    int64_t y = 14;\r\n    std::cout << std::max<uint32_t>(0, x - y) << std::endl;\r\n```\r\nproduces this warning (with both gcc and clang; that particular warning switch is not turned on in Bitcoin Core):\r\n```\r\nwarning: implicit conversion loses integer precision: 'long' to 'const unsigned int' [-Wshorten-64-to-32]\r\n    std::cout << std::max<uint32_t>(0, x - y) << std::endl;\r\n                 ~~~                   ~~^~~\r\n```\r\nand prints `4294967292` instead of the intended `0`.\r\n\r\nI would go for [KISS](https://en.wikipedia.org/wiki/KISS_principle):\r\n```cpp\r\nif (addr.nTime > nTimePenalty) {\r\n    pinfo->nTime = static_cast<uint32_t>(addr.nTime - nTimePenalty);\r\n} else {\r\n    pinfo->nTime = 0;\r\n}\r\n```",
    "created_at": "2021-08-23T08:30:39Z",
    "updated_at": "2021-08-23T09:16:05Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22094#discussion_r693768497",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22094",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693768497"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22094#discussion_r693768497"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22094"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693768497/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 336,
    "original_line": 336,
    "side": "RIGHT"
  }
]