gmaxwell,2012-04-02T06:09:33Z,NAK.  Most confusing possibility yet proposed. :(\n\nThe problem with relative progress is that people restart while syncing and freak out when it goes to zero... thinking that it's started from the start again. Some people have even given up on the reference client as a result of this (or so they say on IRC).\n\nBehavior that changes in ways that would take a paragraph to explain based on state w,https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4872830,4872830,
Diapolo,2012-04-02T06:40:55Z,"I'm new in that discussion, but think about it for a while ... the ugly thing is not really the full resync, but if you didn't start the client for a few days and it has to catch up let's say 1000 blocks. This would be displayed relative and does not seem to stuck for so long on 99%. I even added the strings ""abs. display"" / ""rel. display"" as a hint.\n\nBut okay, so if the consens would be to not ",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4873072,4873072,
laanwj,2012-04-02T06:59:57Z,"We've already tried the ""show relative progress"" thing once. It didn't fly.\n\nUnless someone develops an elegant widget that shows both absolute and relative information in a neat, intuitive way (and cross-validates this with the complainers on the bitcoin forums and here) I'm reluctant to try it again.\n\nI do agree with only showing ""catching up"" and the progress bar when the network connection",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4873254,4873254,
Diapolo,2012-04-02T08:04:41Z,"So if a relative display didn't fly what about displaying ""x of y blocks (z %)"" as text on the progressbar? I think it's very nice, because you see progress per block and not per % (which is ver imprecise).\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4873969,4873969,
Diapolo,2012-04-02T08:27:29Z,Updated to be not relative anymore and changed network detection part as laanwj suggested.\n,https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4874227,4874227,
laanwj,2012-04-02T08:41:46Z,"The problem is that the source information (the YY in ""XX of YY blocks"") is\nimprecise too. Showing that number only gives a false sense of precision.\n\nOn the other hand I agree with you. If you show a progress bar, the % is\nredundant as it is already visually conveyed.\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4874419,4874419,
Diapolo,2012-04-02T08:46:46Z,"Can you explain, why YY is imprecise? That are the current all time blocks in the network (claimed by the nodes), but even if the real value is not correct, the new text display is clear.\n\nIf you start the client and it sits on 99% for minutes you think fuck what's up. If it reads 9900 of 10000 blocks (99%) and keeps moving block for block you see it's working and it progresses further.\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4874478,4874478,
sipa,2012-04-02T10:01:25Z,"I'd say use an absolute percentage chain always, but put in readable text on it ""est. X blocks left"".\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4875514,4875514,
Diapolo,2012-04-02T10:13:58Z,"Last commit makes it absolute again, so that's fine and I won't touch it anymore ^^.\n\nSo we have the coice if we keep ""%"", use my suggestion ""x of y blocks (z%) or something like sipa suggested above. As I said everything is better than a simple % because users want to see at least a real progress.\n\nEdit: Tried it and a ""x blocks remaining (y % done)"" message looks nice and clean, too.\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4875673,4875673,
laanwj,2012-04-02T10:43:13Z,"Thanks for making it absolute again.\n\nI'm convinced. I think we should drop the percentage from the text and show\n""xx of estimated yy"". Percentage is implicit in the progess bar visual and\ndoesnt add anything.\n\nSipa's suggestion to show only the estimated number of blocks left is also\ngood. Advantage is that it shows only one number, disadvantage is that the\nderived number is less useful f",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4875988,4875988,
Diapolo,2012-04-02T11:13:32Z,"The more I think about it, the better I like sipas idea of only showing the remaining blocks. And for problem diagnostic we have a tooltip, which shows the real numbers.\n\nSo ""~xx blocks remaining"" as text? Centered on the progressbar (perhaps hard to read as this uses the native OS style for the bar and text) or to the right of the bar?\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4876430,4876430,
laanwj,2012-04-02T12:04:36Z,I'd say show it _on_ the progress bar. That's one less level of\nindirection. If it looks weird on some OS we can always change it.\n,https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4877036,4877036,
Diapolo,2012-04-02T13:36:02Z,"Was a bit tricky to count backwards (blocks remaining) and keep track of the right value (scale) of the progressbar, but now it's ready for testing / review :).\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4878451,4878451,
sipa,2012-04-02T14:28:27Z,"Looks good so far, but\n- small blocks for the progress percentage are not nice when combined with text\n- at least here, it's completely unreadable: dark blocks for progress with black text; is there a way to get something like this: http://stackoverflow.com/questions/6258690/is-there-any-way-to-change-the-color-of-text-halfway-through-a-character-on-a ?\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4879464,4879464,
Diapolo,2012-04-02T14:35:09Z,"@sipa The style/design of the progressbar comes from the OS and can only be changed by some form of Qt stylesheets afaik (see: http://harmattan-dev.nokia.com/docs/library/html/qt4/qprogressbar.html#details).\n\n2 options, put the text right to the progressbar or search the web for howto edit the style of the bar (which is a hard work, because of the different OS GUIs and color schemes :-/).\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4879609,4879609,
Diapolo,2012-04-02T16:42:06Z,"Okay, I found a way to apply stylesheets to the bar and it can be very well customized ... will add a commit so you could try it out @sipa.\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4882562,4882562,
laanwj,2012-04-02T16:50:20Z,"Ok, let us know how it goes. Sounds like something that is a nightmare to get right on all OSes. Otherwise, putting the text in the progressBarLabel to the left of the progress bar is fine too.\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4882746,4882746,
Diapolo,2012-04-02T17:11:20Z,"OMFG what a mess, but now I'm happy :-D. So on Windows the bar looks equal, no matter what theme I activate and even if I chose the classic theme.\n\nI moved some one-time functions so that they don't get called everytime setNumConnections() is called.\n\nTo the style itself, I chose an orange as bar color, because of the Bitcoin icon and I think it ROCKS! But hey let's vote or you can make own su",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4883233,4883233,
laanwj,2012-04-02T17:27:15Z,"_So on Windows the bar looks equal, no matter what theme I activate and even if I chose the classic theme._\n\nThis does mean we lose platform-native styling for the progress bar. Not that that is necessarily a problem, I think it looks nice (also on Ubuntu 11.10).\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4883549,4883549,
Diapolo,2012-04-02T21:59:36Z,"I had to edit the code once more, because in the end of a sync the bar was rather jerky and jumped a bit too much. Because of that I had to seperate the ""~x blocks remaining"" text from the real progress bar values, to be not linked. Now the displayed text is one thing and the progressbar progress display another one.\n\nEdit: I will rebase this after I got some final ACKs :).\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4889871,4889871,
sipa,2012-04-03T01:26:01Z,"It looks nice, visual ACK. I didn't check the source code changes.\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4892624,4892624,
laanwj,2012-04-03T06:05:12Z,That last commit did certainly make it better. It seemed like the number never changed while I was looking :-)\n\nEdit: ACK\n,https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4895073,4895073,
Diapolo,2012-04-03T06:31:57Z,"@laanwj Could you take a short look over the last commit. If you are fine with that, I will rebase!\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4895352,4895352,
Diapolo,2012-04-04T05:00:16Z,"So we have 1 ""visual"" ACK and laanwjs ACK, further dev votes :)?\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4947387,4947387,
laanwj,2012-04-04T06:29:27Z,"I don't think there's much more to be done, except determine whether we want this for 0.6.1 or 0.7.0. The code change is small and simple enough to make it end up in 0.6.1 IMO, the only hindrance is that some translation messages have been changed and it usually takes a while to update them.\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4948044,4948044,
Diapolo,2012-04-04T06:51:46Z,"As for the translations, I would push the new master file (en) early to transifex, so that translators have enough time to keep up. So I guess there will be RCs for 0.6.1 and I suggest let's integrate this one here.\n\nRemember, there is that Wallet-HTML-thing from #945, which has to do with translations, too (even if we would do that).\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4948230,4948230,
laanwj,2012-04-04T06:58:27Z,"Yes, agreed. I'm for merging this as soon as possible.\n(and also #1002, depending on whether we fix URL handling for 0.6.1)\n\n#945 is for 0.7.0 as it is pretty low-priority (nearly no visual difference) but a lot of hassle for translators.\n",https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4948298,4948298,
sipa,2012-04-04T10:38:37Z,Fine for 0.6.1 for me.\n,https://github.com/bitcoin/bitcoin/pull/1025#issuecomment-4950906,4950906,
laanwj,2012-04-02T06:42:29Z,"Do not make this check in the setModel function but in setNumBlocks. \n\nBackground: in Qt, a model is assigned to a widget at most once (there are exceptions, for example when reading a new file and everything should be reset), so it must not make judgements based on temporary state.\n\nAlso this does not handle the case where number of connections goes back to 0.\n",https://github.com/bitcoin/bitcoin/pull/1025#discussion_r631634,631634,src/qt/bitcoingui.cpp
Diapolo,2012-04-02T08:02:11Z,"Good point, will change that behaviour.\n",https://github.com/bitcoin/bitcoin/pull/1025#discussion_r631846,631846,src/qt/bitcoingui.cpp
Diapolo,2012-04-02T13:37:46Z,@laanwj Will this interfere with status bar warnings or do they only work if there is a connection?\n,https://github.com/bitcoin/bitcoin/pull/1025#discussion_r632923,632923,src/qt/bitcoingui.cpp
laanwj,2012-04-02T16:48:49Z,"Yes, this interferes with the status bar warnings. But those do only work if the client was connected to the network at one point or another.\n",https://github.com/bitcoin/bitcoin/pull/1025#discussion_r634249,634249,src/qt/bitcoingui.cpp
Diapolo,2012-04-02T17:13:02Z,"I removed that one, because we set the text below, so that was not needed. The same was true for the progressBar tooltip a few lines below.\n",https://github.com/bitcoin/bitcoin/pull/1025#discussion_r634412,634412,src/qt/bitcoingui.cpp
laanwj,2012-04-03T06:45:11Z,"maybe also add an explanation why we need OS independent progress bar style, so that people in the future will understand :-)\n",https://github.com/bitcoin/bitcoin/pull/1025#discussion_r637564,637564,src/qt/bitcoingui.cpp
Diapolo,2012-04-03T06:57:56Z,"Like: ""we did this, because with some OSes default style, text on the progress bar is unreadable"" ;)?\n",https://github.com/bitcoin/bitcoin/pull/1025#discussion_r637593,637593,src/qt/bitcoingui.cpp
laanwj,2012-04-03T07:03:22Z,Right!\n,https://github.com/bitcoin/bitcoin/pull/1025#discussion_r637605,637605,src/qt/bitcoingui.cpp
