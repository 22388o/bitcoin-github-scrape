[
  {
    "sha": "2eaab4e8102ae3a84c9cee350e689576747e68bc",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyZWFhYjRlODEwMmFlM2E4NGM5Y2VlMzUwZTY4OTU3Njc0N2U2OGJj",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2015-12-03T08:27:33Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-04-06T11:27:28Z"
      },
      "message": "[Refactor] CreateTransaction(): use bit flags\nThis will allow to add flags for RBF and other features",
      "tree": {
        "sha": "79175754c053806e9557feeb89fedd50854cd7cc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/79175754c053806e9557feeb89fedd50854cd7cc"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2eaab4e8102ae3a84c9cee350e689576747e68bc",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJXBPKgAAoJECnUvLZBb1PsxvYP/0lqHMP/4D4DRnKJtTaIH/88\nV21zRBF/JRB1uC/uAnGP0cVdlT6dXB1kMxchqW/Rp4szDOwTRlGY1IhLi3JF+kno\n2lv0EJZhR4XF494U5L3fMpxELSBRiHinDNMl/g1gRahdpBUGo3r0Mbmr0/H1dtsi\nbKWN9/iMNiP+bxOgJNdyBeE6LdMQM+y4IfMyfi1bvfG+B4w/SEGx65MU9hG++2di\nVo+Gwo82fTGVMV+HRXHRoH22umv78NrVjx+rOSCVRfTDGyoNRuEzPEXbmZxZZ/yN\n7KWCQVdkby3YqD3z+/DKvI5FiWtYrr6UqZNrg5IZQ/LbyK6BAhT4cdrneQUy/N5B\nbYHQ45rDd/dUHjZVA48aigbeYxgeFntVCa3mlMV85YZksZ2UFLvJGhFtZNQZ3uDb\nOBMuvH5Ojfydosc+xnTK8r8c9Tl+07afoD0/4qS2RkgpK0rVtuwK4FB92t0v/0tE\nqelvW1h+rtkU3jLom/2C4qpon4oKObeAXumKMIoIK+47MBkuu2bRX0Lg6dFfPl9X\nsuaBaDTFfPfl2mIAwUyyUO+/JvVo23y6MGf2hJZ6y5kScZFusbnPcTnBE4L5MACs\nCh5CnAImltnWQJi6+nSKGxnqIl6BtBUJoGw2xL6TaDp0EYY+or5LiFnKEpapbJq8\nMEqw8n6INBeplRVU4jkj\n=BGuG\n-----END PGP SIGNATURE-----",
        "payload": "tree 79175754c053806e9557feeb89fedd50854cd7cc\nparent 1b2460bd5824170ab85757e35f81197199cce9d6\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1449131253 +0100\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1459942048 +0200\n\n[Refactor] CreateTransaction(): use bit flags\nThis will allow to add flags for RBF and other features\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2eaab4e8102ae3a84c9cee350e689576747e68bc",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2eaab4e8102ae3a84c9cee350e689576747e68bc",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2eaab4e8102ae3a84c9cee350e689576747e68bc/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1b2460bd5824170ab85757e35f81197199cce9d6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1b2460bd5824170ab85757e35f81197199cce9d6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1b2460bd5824170ab85757e35f81197199cce9d6"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 9,
      "deletions": 5
    },
    "files": [
      {
        "sha": "71301b2ca41d3d863d59d11365dbafce95796ff0",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2eaab4e8102ae3a84c9cee350e689576747e68bc/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2eaab4e8102ae3a84c9cee350e689576747e68bc/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=2eaab4e8102ae3a84c9cee350e689576747e68bc",
        "patch": "@@ -1951,7 +1951,7 @@ bool CWallet::FundTransaction(CMutableTransaction& tx, CAmount &nFeeRet, int& nC\n \n     CReserveKey reservekey(this);\n     CWalletTx wtx;\n-    if (!CreateTransaction(vecSend, wtx, reservekey, nFeeRet, nChangePosRet, strFailReason, &coinControl, false))\n+    if (!CreateTransaction(vecSend, wtx, reservekey, nFeeRet, nChangePosRet, strFailReason, &coinControl, CREATE_TX_DONT_SIGN))\n         return false;\n \n     if (nChangePosRet != -1)\n@@ -1968,7 +1968,7 @@ bool CWallet::FundTransaction(CMutableTransaction& tx, CAmount &nFeeRet, int& nC\n }\n \n bool CWallet::CreateTransaction(const vector<CRecipient>& vecSend, CWalletTx& wtxNew, CReserveKey& reservekey, CAmount& nFeeRet,\n-                                int& nChangePosRet, std::string& strFailReason, const CCoinControl* coinControl, bool sign)\n+                                int& nChangePosRet, std::string& strFailReason, const CCoinControl* coinControl, unsigned int flags)\n {\n     CAmount nValue = 0;\n     unsigned int nSubtractFeeFromAmount = 0;\n@@ -2189,7 +2189,7 @@ bool CWallet::CreateTransaction(const vector<CRecipient>& vecSend, CWalletTx& wt\n                     bool signSuccess;\n                     const CScript& scriptPubKey = coin.first->vout[coin.second].scriptPubKey;\n                     CScript& scriptSigRes = txNew.vin[nIn].scriptSig;\n-                    if (sign)\n+                    if (!(flags & CREATE_TX_DONT_SIGN))\n                         signSuccess = ProduceSignature(TransactionSignatureCreator(this, &txNewConst, nIn, SIGHASH_ALL), scriptPubKey, scriptSigRes);\n                     else\n                         signSuccess = ProduceSignature(DummySignatureCreator(this), scriptPubKey, scriptSigRes);\n@@ -2205,7 +2205,7 @@ bool CWallet::CreateTransaction(const vector<CRecipient>& vecSend, CWalletTx& wt\n                 unsigned int nBytes = ::GetSerializeSize(txNew, SER_NETWORK, PROTOCOL_VERSION);\n \n                 // Remove scriptSigs if we used dummy signatures for fee calculation\n-                if (!sign) {\n+                if (flags & CREATE_TX_DONT_SIGN) {\n                     BOOST_FOREACH (CTxIn& vin, txNew.vin)\n                         vin.scriptSig = CScript();\n                 }"
      },
      {
        "sha": "8206847040ba4c4471736fc644b396cc8468d5e1",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2eaab4e8102ae3a84c9cee350e689576747e68bc/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2eaab4e8102ae3a84c9cee350e689576747e68bc/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=2eaab4e8102ae3a84c9cee350e689576747e68bc",
        "patch": "@@ -533,6 +533,10 @@ class CAccountingEntry\n     std::vector<char> _ssExtra;\n };\n \n+enum CreateTransactionFlags {\n+    CREATE_TX_DEFAULT     = 0,\n+    CREATE_TX_DONT_SIGN   = (1U << 0)\n+};\n \n /** \n  * A CWallet is an extension of a keystore, which also maintains a set of transactions and balances,\n@@ -746,7 +750,7 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n      * selected by SelectCoins(); Also create the change output, when needed\n      */\n     bool CreateTransaction(const std::vector<CRecipient>& vecSend, CWalletTx& wtxNew, CReserveKey& reservekey, CAmount& nFeeRet, int& nChangePosRet,\n-                           std::string& strFailReason, const CCoinControl *coinControl = NULL, bool sign = true);\n+                           std::string& strFailReason, const CCoinControl *coinControl = NULL, unsigned int flags = CREATE_TX_DEFAULT);\n     bool CommitTransaction(CWalletTx& wtxNew, CReserveKey& reservekey);\n \n     bool AddAccountingEntry(const CAccountingEntry&, CWalletDB & pwalletdb);"
      }
    ]
  },
  {
    "sha": "ffb6938dfa6979292fe49104a405d4c951f26b3d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmZmI2OTM4ZGZhNjk3OTI5MmZlNDkxMDRhNDA1ZDRjOTUxZjI2YjNk",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2015-12-03T08:53:23Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-04-06T11:28:16Z"
      },
      "message": "Allow to opt-into RBF when creating a transaction",
      "tree": {
        "sha": "ee3ce359d2671442d33db6f4da8cf0b32ab24737",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ee3ce359d2671442d33db6f4da8cf0b32ab24737"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ffb6938dfa6979292fe49104a405d4c951f26b3d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJXBPLQAAoJECnUvLZBb1Ps5OYP/i8y3SddMTPkwKhNm/nxAj/P\nkwNg/pyOcaK+NiSDEFRBZ/HeDzg0gxZOFSj0aDVfB0vEbgjfWc3ZkIfeS/sPgE/l\ndsXxt4o7LEk8aH85a06jkDdcindTE+Ornbe0YNqHcyPqWekJdYPkNK1Lv7M1c7Ji\nI6Bb7hlnrL07BdwKuIK3I7JKDLtngvkNhQAB5+vPDx8fk1YZ0d+Tkk9kqvg4MkFh\nVewqR9Kv4uE5IjK9JHOe2I17YWpEdvJkaKsxR/+DHB63XhHrUiKSBB8PbtjuDcaf\nibGlOQgmnEMgSPcgYYgOgD/sw9N7HbPHegmbuJkDTRey0PXSPh4Q5Ns9rPHZ9n4g\ncTZG/8WkVNykhal+dRGy1Jq8HmnjSJxCjOMcPXXLZ88eyl1JoXtPQLA1G75TFmCL\nSORlPkAkJpu8jKukERiS5eUGVoP2zJp7HP24wzKCnGXqRAfLXMbkF9WdUq8FqgIT\nO5Nx42eOy+VJ1EN674ney+DCjjNFjnP0IVumjbjoWbG2ryl+5At7nSNDCOG/hoiB\nTFp7WSFuZv4HCZoxk+11Gczvqt1MAT4gQRZNYG1QloTBDLVCS9SQyRQ15CqR+wId\nvmCho+P+q9C1SL8YttgrViZ6Nr/tSS9/6YJKf3oaeypXeQczwMl9h7Be6J+sQoJL\nSYc6hLGBGw8OOxY9jKQK\n=a8Vn\n-----END PGP SIGNATURE-----",
        "payload": "tree ee3ce359d2671442d33db6f4da8cf0b32ab24737\nparent 2eaab4e8102ae3a84c9cee350e689576747e68bc\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1449132803 +0100\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1459942096 +0200\n\nAllow to opt-into RBF when creating a transaction\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ffb6938dfa6979292fe49104a405d4c951f26b3d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ffb6938dfa6979292fe49104a405d4c951f26b3d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ffb6938dfa6979292fe49104a405d4c951f26b3d/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2eaab4e8102ae3a84c9cee350e689576747e68bc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2eaab4e8102ae3a84c9cee350e689576747e68bc",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2eaab4e8102ae3a84c9cee350e689576747e68bc"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 3,
      "deletions": 2
    },
    "files": [
      {
        "sha": "b2732e92e4b0d58535965e6ad9514e0b161ebb4c",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ffb6938dfa6979292fe49104a405d4c951f26b3d/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ffb6938dfa6979292fe49104a405d4c951f26b3d/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=ffb6938dfa6979292fe49104a405d4c951f26b3d",
        "patch": "@@ -2179,7 +2179,7 @@ bool CWallet::CreateTransaction(const vector<CRecipient>& vecSend, CWalletTx& wt\n                 // nLockTime set above actually works.\n                 BOOST_FOREACH(const PAIRTYPE(const CWalletTx*,unsigned int)& coin, setCoins)\n                     txNew.vin.push_back(CTxIn(coin.first->GetHash(),coin.second,CScript(),\n-                                              std::numeric_limits<unsigned int>::max()-1));\n+                                              std::numeric_limits<unsigned int>::max() - ((flags & CREATE_TX_RBF_OPT_IN) ? 2 : 1) ));\n \n                 // Sign\n                 int nIn = 0;"
      },
      {
        "sha": "e4219619a0e718b2d70f3053a211828aea84bfa1",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ffb6938dfa6979292fe49104a405d4c951f26b3d/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ffb6938dfa6979292fe49104a405d4c951f26b3d/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=ffb6938dfa6979292fe49104a405d4c951f26b3d",
        "patch": "@@ -535,7 +535,8 @@ class CAccountingEntry\n \n enum CreateTransactionFlags {\n     CREATE_TX_DEFAULT     = 0,\n-    CREATE_TX_DONT_SIGN   = (1U << 0)\n+    CREATE_TX_DONT_SIGN   = (1U << 0),\n+    CREATE_TX_RBF_OPT_IN  = (1U << 1)\n };\n \n /** "
      }
    ]
  },
  {
    "sha": "d4b6eedac3b3ce95b086ca0eabac89aa2d015232",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNGI2ZWVkYWMzYjNjZTk1YjA4NmNhMGVhYmFjODlhYTJkMDE1MjMy",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2015-12-03T15:29:45Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-04-06T11:28:59Z"
      },
      "message": "[bitcoin-tx] allow to set nSequence number over the in= command",
      "tree": {
        "sha": "9f2c58bd580625344199dd1d84d7a59e0dd4ea62",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9f2c58bd580625344199dd1d84d7a59e0dd4ea62"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d4b6eedac3b3ce95b086ca0eabac89aa2d015232",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJXBPL7AAoJECnUvLZBb1Ps5dAQAK9hORz7P3PqxekGCvApUwGB\nPgW+0wPeO1BhKAgF5Uw1/SJxyDyqa03CL0mWTJenAWFcx1TCg92k0vemOHwIZuxs\nSsGQ8EB1hAea303l3QmstbzGGR+VyNuJh+zDlFu3ooFc3aRCb3vlTZ7FDGg1mic7\n5zd8xo91M4dpiU3H4/cHE9gD5FcURQzmtAe46T73rq/IEUfe/0L4MVJ2MbSw4PcD\nKafCb/5whdlc//S9hYKanG05SFbTZGPxvVz1oUYklz8Q4VfleSKjs1PfnNFzkynm\n9A3/4itnWj2wWl3Kiz8pe/vqMifIgX5YWvCRd7XJJgoGX4xvQuI78cpvO/V5t16a\nmK8IYDI7zicAaCkxFl6KmG5Q+pc39A+pG9eGQ0TMcQHn9B6lFQBowbK6vAKuFl7t\nHiHF3q3uQMmFEssuzlwv5K9tAwqN5N97bmUQgaNG3YG3dB0+jh9jTD5hYnoxF5Cl\nm/WQevIopXmDowuBuaTOMt0UePII/TlqEfJUzhXZzbw+BU5wQC0tmYmXIvMVVxeb\nT5OsHr/rq82vVCkxXi5f4dQ6jiE/n1bAP+bdUV63MUarwxP1SNVBkneDKzI+oMP4\nRm0uXJMfKSLr2BZthvvnhSr3FOvF3m1OvVfBQSpdHHc7mq4IZ71dpC4BOsGfXMnC\niTUWNS0u/qCkMUssbkg0\n=5M0K\n-----END PGP SIGNATURE-----",
        "payload": "tree 9f2c58bd580625344199dd1d84d7a59e0dd4ea62\nparent ffb6938dfa6979292fe49104a405d4c951f26b3d\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1449156585 +0100\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1459942139 +0200\n\n[bitcoin-tx] allow to set nSequence number over the in= command\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d4b6eedac3b3ce95b086ca0eabac89aa2d015232",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d4b6eedac3b3ce95b086ca0eabac89aa2d015232",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d4b6eedac3b3ce95b086ca0eabac89aa2d015232/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ffb6938dfa6979292fe49104a405d4c951f26b3d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ffb6938dfa6979292fe49104a405d4c951f26b3d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ffb6938dfa6979292fe49104a405d4c951f26b3d"
      }
    ],
    "stats": {
      "total": 21,
      "additions": 13,
      "deletions": 8
    },
    "files": [
      {
        "sha": "d5e2fc279bc2524fb6a64482cf37cc59925261e9",
        "filename": "src/bitcoin-tx.cpp",
        "status": "modified",
        "additions": 13,
        "deletions": 8,
        "changes": 21,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d4b6eedac3b3ce95b086ca0eabac89aa2d015232/src/bitcoin-tx.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d4b6eedac3b3ce95b086ca0eabac89aa2d015232/src/bitcoin-tx.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-tx.cpp?ref=d4b6eedac3b3ce95b086ca0eabac89aa2d015232",
        "patch": "@@ -71,7 +71,7 @@ static bool AppInitRawTx(int argc, char* argv[])\n         strUsage = HelpMessageGroup(_(\"Commands:\"));\n         strUsage += HelpMessageOpt(\"delin=N\", _(\"Delete input N from TX\"));\n         strUsage += HelpMessageOpt(\"delout=N\", _(\"Delete output N from TX\"));\n-        strUsage += HelpMessageOpt(\"in=TXID:VOUT\", _(\"Add input to TX\"));\n+        strUsage += HelpMessageOpt(\"in=TXID:VOUT(:SEQUENCE_NUMBER)\", _(\"Add input to TX\"));\n         strUsage += HelpMessageOpt(\"locktime=N\", _(\"Set TX lock time to N\"));\n         strUsage += HelpMessageOpt(\"nversion=N\", _(\"Set TX version to N\"));\n         strUsage += HelpMessageOpt(\"outaddr=VALUE:ADDRESS\", _(\"Add address-based output to TX\"));\n@@ -181,15 +181,15 @@ static void MutateTxLocktime(CMutableTransaction& tx, const string& cmdVal)\n \n static void MutateTxAddInput(CMutableTransaction& tx, const string& strInput)\n {\n+    std::vector<std::string> vStrInputParts;\n+    boost::split(vStrInputParts, strInput, boost::is_any_of(\":\"));\n+\n     // separate TXID:VOUT in string\n-    size_t pos = strInput.find(':');\n-    if ((pos == string::npos) ||\n-        (pos == 0) ||\n-        (pos == (strInput.size() - 1)))\n+    if (vStrInputParts.size()<2)\n         throw runtime_error(\"TX input missing separator\");\n \n     // extract and validate TXID\n-    string strTxid = strInput.substr(0, pos);\n+    string strTxid = vStrInputParts[0];\n     if ((strTxid.size() != 64) || !IsHex(strTxid))\n         throw runtime_error(\"invalid TX input txid\");\n     uint256 txid(uint256S(strTxid));\n@@ -198,13 +198,18 @@ static void MutateTxAddInput(CMutableTransaction& tx, const string& strInput)\n     static const unsigned int maxVout = MAX_BLOCK_SIZE / minTxOutSz;\n \n     // extract and validate vout\n-    string strVout = strInput.substr(pos + 1, string::npos);\n+    string strVout = vStrInputParts[1];\n     int vout = atoi(strVout);\n     if ((vout < 0) || (vout > (int)maxVout))\n         throw runtime_error(\"invalid TX input vout\");\n \n+    // extract the optional sequence number\n+    uint32_t nSequenceIn=std::numeric_limits<unsigned int>::max();\n+    if (vStrInputParts.size() > 2)\n+        nSequenceIn = atoi(vStrInputParts[2]);\n+\n     // append to transaction input list\n-    CTxIn txin(txid, vout);\n+    CTxIn txin(txid, vout, CScript(), nSequenceIn);\n     tx.vin.push_back(txin);\n }\n "
      }
    ]
  },
  {
    "sha": "339ae24f8944846596f85eb19b3925127380dedd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozMzlhZTI0Zjg5NDQ4NDY1OTZmODVlYjE5YjM5MjUxMjczODBkZWRk",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2015-12-22T12:52:57Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-04-06T11:45:11Z"
      },
      "message": "[RPC] createrawtransaction: add option to set the sequence number per input",
      "tree": {
        "sha": "4aea53bafa77af5073a26cd50b4557d838ebb9fe",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4aea53bafa77af5073a26cd50b4557d838ebb9fe"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/339ae24f8944846596f85eb19b3925127380dedd",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJXBPbIAAoJECnUvLZBb1Ps/kEQAIa1K8iqeyf3rGOhVQC1DKFF\n8NcXSjVqDrWqMpNcf4KZOGIA/MbBDJYk3KeXxt+DhQIlXcamfl/y+EQsJU5jynmA\nyaLq8ksakOGU5W5JVg4N7HTR9ZLb22+2LCo8wVMRqtgIs9hrowvxZzyHUlOfnLqh\nk3RgtKY1f5DmYpPDazSEPNN0vwTcrGvnpW/WzJULmPArMClTOvzkfBYFInKxrZMU\nP9pE/48kb3kAJs9ZoNEXA9+wvssdpFYXpbTidz5NT9H/GGN4GBffIklEuTAJOCuk\nadJirYt7qLSHwVW5LSjngs0z3tdj/wobbNs/ZVJiW0tb+Nr/NU4Z8SwkgM3Kor4Z\nrcBQ0X4sKRqxXiT2ClrEIdM8crnR5Kq2fvZwGDsEDs2K3+CGTsDfH85+bW4hZoAG\nDybgRX8KUbD9Z/iDnoddENuLsOwnodsBRtXrAIuMR4kHxgpSslcVaSid4B5mgNW2\nxAym2m9iv+BinbXNnxCgctdqqy6nL+Jjwus0ghEFCHQnUJu3PtWvdN+oZWW5XZur\nfICNcMGMOPCjCZiXFELULEZ1yY8mwrxxflF9yoBfWdm8D5DfWTZiZGpfWSZuCTt6\nFAbFDAPGe6AMWeOO3YQz/gCri6PzLY/1KMPvJry85k7f6ugjdbwDSQfM0apXSG5z\nwCimjM8I5GwBssodBtba\n=mDvB\n-----END PGP SIGNATURE-----",
        "payload": "tree 4aea53bafa77af5073a26cd50b4557d838ebb9fe\nparent d4b6eedac3b3ce95b086ca0eabac89aa2d015232\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1450788777 +0100\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1459943111 +0200\n\n[RPC] createrawtransaction: add option to set the sequence number per input\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/339ae24f8944846596f85eb19b3925127380dedd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/339ae24f8944846596f85eb19b3925127380dedd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/339ae24f8944846596f85eb19b3925127380dedd/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d4b6eedac3b3ce95b086ca0eabac89aa2d015232",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d4b6eedac3b3ce95b086ca0eabac89aa2d015232",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d4b6eedac3b3ce95b086ca0eabac89aa2d015232"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 13,
      "deletions": 0
    },
    "files": [
      {
        "sha": "473c305dbc2ec56a38d0094fa8cd20352343d34e",
        "filename": "qa/rpc-tests/rawtransactions.py",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/339ae24f8944846596f85eb19b3925127380dedd/qa/rpc-tests/rawtransactions.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/339ae24f8944846596f85eb19b3925127380dedd/qa/rpc-tests/rawtransactions.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/rawtransactions.py?ref=339ae24f8944846596f85eb19b3925127380dedd",
        "patch": "@@ -139,5 +139,11 @@ def run_test(self):\n         self.sync_all()\n         assert_equal(self.nodes[0].getbalance(), bal+Decimal('50.00000000')+Decimal('2.19000000')) #block reward + tx\n \n+        inputs  = [ {'txid' : \"1d1d4e24ed99057e84c3f80fd8fbec79ed9e1acee37da269356ecea000000000\", 'vout' : 1, 'sequence' : 1000}]\n+        outputs = { self.nodes[0].getnewaddress() : 1 }\n+        rawtx   = self.nodes[0].createrawtransaction(inputs, outputs)\n+        decrawtx= self.nodes[0].decoderawtransaction(rawtx)\n+        assert_equal(decrawtx['vin'][0]['sequence'], 1000)\n+\n if __name__ == '__main__':\n     RawTransactionsTest().main()"
      },
      {
        "sha": "9d9f618a93ee8dbd788f4e9fd5a01b360089677e",
        "filename": "src/rpc/rawtransaction.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/339ae24f8944846596f85eb19b3925127380dedd/src/rpc/rawtransaction.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/339ae24f8944846596f85eb19b3925127380dedd/src/rpc/rawtransaction.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/rawtransaction.cpp?ref=339ae24f8944846596f85eb19b3925127380dedd",
        "patch": "@@ -334,6 +334,7 @@ UniValue createrawtransaction(const UniValue& params, bool fHelp)\n             \"       {\\n\"\n             \"         \\\"txid\\\":\\\"id\\\",    (string, required) The transaction id\\n\"\n             \"         \\\"vout\\\":n        (numeric, required) The output number\\n\"\n+            \"         \\\"sequence\\\":n    (numeric, optional) The sequence number (will overwrite RBF opt-in)\\n\"\n             \"       }\\n\"\n             \"       ,...\\n\"\n             \"     ]\\n\"\n@@ -384,6 +385,12 @@ UniValue createrawtransaction(const UniValue& params, bool fHelp)\n             throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout must be positive\");\n \n         uint32_t nSequence = (rawTx.nLockTime ? std::numeric_limits<uint32_t>::max() - 1 : std::numeric_limits<uint32_t>::max());\n+\n+        // overwrite sequence number if provided by user\n+        const UniValue& sequenceObj = find_value(o, \"sequence\");\n+        if (sequenceObj.isNum())\n+            nSequence = sequenceObj.get_int();\n+\n         CTxIn in(COutPoint(txid, nOutput), CScript(), nSequence);\n \n         rawTx.vin.push_back(in);"
      }
    ]
  }
]