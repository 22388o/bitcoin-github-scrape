[
  {
    "sha": "d9712b14815585aedbc9fd32d2875bfc1f27e81d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkOTcxMmIxNDgxNTU4NWFlZGJjOWZkMzJkMjg3NWJmYzFmMjdlODFk",
    "commit": {
      "author": {
        "name": "LongShao007",
        "email": "007longshao@gmail.com",
        "date": "2019-06-08T02:43:00Z"
      },
      "committer": {
        "name": "LongShao007",
        "email": "007longshao@gmail.com",
        "date": "2019-06-08T02:57:37Z"
      },
      "message": "define variables about scriptsig size of coinbase tx",
      "tree": {
        "sha": "c02ada2bfe010c94861b5c296924e20d2ab4360e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c02ada2bfe010c94861b5c296924e20d2ab4360e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d9712b14815585aedbc9fd32d2875bfc1f27e81d",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE63tGVN0VOLj6CAnwAKXUsR9dhFEFAlz7JCoACgkQAKXUsR9d\nhFGFahAA2VGH/0qL1EeyR8dSY3bwsbJZLyLmiyJk4/UMpfYOWkBFAD5JszS/LaMw\nmCaUP6r+C+wnfKOf5Pi0nuk3GTb/O9Zt9zvyn45lXUhWkXKw8f+lHy26By2osniO\nxRynEzGdNz5Q3ixPZScEtF785/dPA+zKVOU1HsPi0+gwhibm11ET3TLozJerfrnK\nXkjzEtVGWV60iAtODkUbUts8kDF/E9+oZS75lmtcjSu5h9xfQuZ9eYK/hEnojDso\nGRmepf0g1rqX/J8TEmaB2os70XD1ZH0SViAWiz47cUYRfNn4dKgBVnTF/WvdwGY+\n/nreY0DmU04Yn7b+EBftampViozkz8TnhNp78fYgOrjc7btJJ1SoULqZVM6vTfI4\nVxcxvXqEv5aYm6UHghqrK0BfZg7Mcnp9+L4yjWu3IBA6WHBTTP5nXLJWij54ZLZ7\nbm90ceLqq3eD+75Qcfr/UIKebyFU6HvBfyg1fJ8LzNynijHakXwRZguBE6aqtRZB\nr5WWAJQHW60PJ8pegFoybVXYLRoJzQzy3WJWVP+L/kLU+gJsdtUJy+BuQaxPxioZ\nfC7g3qid4cou25uCzWYtwPqJw7+x2pPx5IHBvmPAXkPtFa2hZ8BYBIYn1g7T8M8U\n9pGroUhl+yHgyiF6MmvN7/BUABUBzwSkofMeY4BdSGnTIIihUlE=\n=M+/j\n-----END PGP SIGNATURE-----",
        "payload": "tree c02ada2bfe010c94861b5c296924e20d2ab4360e\nparent 5d2ccf0ce9ca1571c650a69319fb9c1e0b626ecb\nauthor LongShao007 <007longshao@gmail.com> 1559961780 +0800\ncommitter LongShao007 <007longshao@gmail.com> 1559962657 +0800\n\ndefine variables about scriptsig size of coinbase tx\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d9712b14815585aedbc9fd32d2875bfc1f27e81d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d9712b14815585aedbc9fd32d2875bfc1f27e81d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d9712b14815585aedbc9fd32d2875bfc1f27e81d/comments",
    "author": {
      "login": "LongShao007",
      "id": 7669610,
      "node_id": "MDQ6VXNlcjc2Njk2MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7669610?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LongShao007",
      "html_url": "https://github.com/LongShao007",
      "followers_url": "https://api.github.com/users/LongShao007/followers",
      "following_url": "https://api.github.com/users/LongShao007/following{/other_user}",
      "gists_url": "https://api.github.com/users/LongShao007/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LongShao007/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LongShao007/subscriptions",
      "organizations_url": "https://api.github.com/users/LongShao007/orgs",
      "repos_url": "https://api.github.com/users/LongShao007/repos",
      "events_url": "https://api.github.com/users/LongShao007/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LongShao007/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "LongShao007",
      "id": 7669610,
      "node_id": "MDQ6VXNlcjc2Njk2MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7669610?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LongShao007",
      "html_url": "https://github.com/LongShao007",
      "followers_url": "https://api.github.com/users/LongShao007/followers",
      "following_url": "https://api.github.com/users/LongShao007/following{/other_user}",
      "gists_url": "https://api.github.com/users/LongShao007/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LongShao007/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LongShao007/subscriptions",
      "organizations_url": "https://api.github.com/users/LongShao007/orgs",
      "repos_url": "https://api.github.com/users/LongShao007/repos",
      "events_url": "https://api.github.com/users/LongShao007/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LongShao007/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "5d2ccf0ce9ca1571c650a69319fb9c1e0b626ecb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5d2ccf0ce9ca1571c650a69319fb9c1e0b626ecb",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/5d2ccf0ce9ca1571c650a69319fb9c1e0b626ecb"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 8,
      "deletions": 2
    },
    "files": [
      {
        "sha": "9a290fc16d85c919f185ebe7cb8e58814f5b372e",
        "filename": "src/consensus/consensus.h",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d9712b14815585aedbc9fd32d2875bfc1f27e81d/src/consensus/consensus.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d9712b14815585aedbc9fd32d2875bfc1f27e81d/src/consensus/consensus.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/consensus.h?ref=d9712b14815585aedbc9fd32d2875bfc1f27e81d",
        "patch": "@@ -18,6 +18,11 @@ static const int64_t MAX_BLOCK_SIGOPS_COST = 80000;\n /** Coinbase transaction outputs can only be spent after this number of new blocks (network rule) */\n static const int COINBASE_MATURITY = 100;\n \n+/** The maximum allowed size for scriptSig in vin of coinbase transaction, in bytes */\n+static const unsigned int MAX_COINBASE_TX_VIN_SCRIPTSIG_SIZE = 100;\n+/** The minimum allowed size for scriptSig in vin of coinbase transaction, in bytes */\n+static const unsigned int MIN_COINBASE_TX_VIN_SCRIPTSIG_SIZE = 2;\n+\n static const int WITNESS_SCALE_FACTOR = 4;\n \n static const size_t MIN_TRANSACTION_WEIGHT = WITNESS_SCALE_FACTOR * 60; // 60 is the lower bound for the size of a valid serialized CTransaction"
      },
      {
        "sha": "7705481eb4a429dbc5d1bd82775fd36379bd8d63",
        "filename": "src/consensus/tx_check.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d9712b14815585aedbc9fd32d2875bfc1f27e81d/src/consensus/tx_check.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d9712b14815585aedbc9fd32d2875bfc1f27e81d/src/consensus/tx_check.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/tx_check.cpp?ref=d9712b14815585aedbc9fd32d2875bfc1f27e81d",
        "patch": "@@ -5,6 +5,7 @@\n #include <consensus/tx_check.h>\n \n #include <primitives/transaction.h>\n+#include <consensus/consensus.h>\n #include <consensus/validation.h>\n \n bool CheckTransaction(const CTransaction& tx, CValidationState &state, bool fCheckDuplicateInputs)\n@@ -43,7 +44,7 @@ bool CheckTransaction(const CTransaction& tx, CValidationState &state, bool fChe\n \n     if (tx.IsCoinBase())\n     {\n-        if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100)\n+        if (tx.vin[0].scriptSig.size() < MIN_COINBASE_TX_VIN_SCRIPTSIG_SIZE || tx.vin[0].scriptSig.size() > MAX_COINBASE_TX_VIN_SCRIPTSIG_SIZE)\n             return state.Invalid(ValidationInvalidReason::CONSENSUS, false, REJECT_INVALID, \"bad-cb-length\");\n     }\n     else"
      },
      {
        "sha": "f6c99f93c8a72cd32aff4f2bb9de615a0da9ac34",
        "filename": "src/miner.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d9712b14815585aedbc9fd32d2875bfc1f27e81d/src/miner.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d9712b14815585aedbc9fd32d2875bfc1f27e81d/src/miner.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/miner.cpp?ref=d9712b14815585aedbc9fd32d2875bfc1f27e81d",
        "patch": "@@ -438,7 +438,7 @@ void IncrementExtraNonce(CBlock* pblock, const CBlockIndex* pindexPrev, unsigned\n     unsigned int nHeight = pindexPrev->nHeight+1; // Height first in coinbase required for block.version=2\n     CMutableTransaction txCoinbase(*pblock->vtx[0]);\n     txCoinbase.vin[0].scriptSig = (CScript() << nHeight << CScriptNum(nExtraNonce)) + COINBASE_FLAGS;\n-    assert(txCoinbase.vin[0].scriptSig.size() <= 100);\n+    assert(txCoinbase.vin[0].scriptSig.size() <= MAX_COINBASE_TX_VIN_SCRIPTSIG_SIZE);\n \n     pblock->vtx[0] = MakeTransactionRef(std::move(txCoinbase));\n     pblock->hashMerkleRoot = BlockMerkleRoot(*pblock);"
      }
    ]
  }
]