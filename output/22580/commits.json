[
  {
    "sha": "080b47d9ce6288e1725857b3026291981ef75e34",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowODBiNDdkOWNlNjI4OGUxNzI1ODU3YjMwMjYyOTE5ODFlZjc1ZTM0",
    "commit": {
      "author": {
        "name": "Pavol Rusnak",
        "email": "pavol@rusnak.io",
        "date": "2020-07-24T09:03:31Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-07-29T08:02:26Z"
      },
      "message": "rpc: reset scantxoutset progress on finish\n\nGithub-Pull: #19362\nRebased-From: 8c4129b4540f4f739413ed9a6fbfc78afc252f42",
      "tree": {
        "sha": "a33052e9bbea7b379b4e906c45f30cf0c2cc4aa6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a33052e9bbea7b379b4e906c45f30cf0c2cc4aa6"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/080b47d9ce6288e1725857b3026291981ef75e34",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAmECYKAACgkQLuufXMCV\nJsESsxAAuc3Bpas9kkBbo1kX7KJNpjuTezS/bK0YWLXzaHdM+YLOpfI1KkNGqy2N\nprCaogaJRT9UHUiVQDp/6oYiwp2uPVg0tebGxhLxVCO7PNG7n7O7OeZrJCRS/Cv/\nM9kb0L3AGIAlihcnKGoPDpwiA29DyQLgZnuALyGDTbHQeUViA+GZfwnYsCdjC6yK\nRl+BGHKm8RvvuBKe3Gp6u5fAYQGB8Kes+r7DvhTDXeGIE7m7ujjp7xCggo/oy5RG\n585MuMcYnzu9XW9hDnbek6deMIZKhi5RI+8mmcX6YUJWeXbI6XxV4ipl+GWL/alH\naXDrCj+m2J+novX3cFlX9tSogo+/1OCDNpGKbloSKb4SGK/pjvHvM3xB/XXVZH8S\n0kmqR6HscH2hckDb/uvDEB7yP9SmEi6xl6F6LyH5w+o7Eaj7wKzhALoeIaytBj/S\nsMEkye5Db+9X3+4fxVNEmhD5m1IO5+idL7V/QglS4vzFDaiOiqwZyAjmvxGUVKZZ\nD8iTWE6hGPuxVXa18ToKFStRUyO5q+QDBaN4/tLfXuO4Du5yUC6M40cCWSCd/TVp\n4JVIaiCz+Qd8/zJR37uvhvBAsimwBXANnkqYvYwvkCi702MVxcsDTrBvlsneq3Js\nLEOVXBv1daugAkOHLXqyGTWiY1S018B5HdLid6NsWu4D5jHJ20c=\n=auNK\n-----END PGP SIGNATURE-----",
        "payload": "tree a33052e9bbea7b379b4e906c45f30cf0c2cc4aa6\nparent 997e528a34185c68665d10cef43da883934ea03a\nauthor Pavol Rusnak <pavol@rusnak.io> 1595581411 +0200\ncommitter fanquake <fanquake@gmail.com> 1627545746 +0800\n\nrpc: reset scantxoutset progress on finish\n\nGithub-Pull: #19362\nRebased-From: 8c4129b4540f4f739413ed9a6fbfc78afc252f42\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/080b47d9ce6288e1725857b3026291981ef75e34",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/080b47d9ce6288e1725857b3026291981ef75e34",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/080b47d9ce6288e1725857b3026291981ef75e34/comments",
    "author": {
      "login": "prusnak",
      "id": 42201,
      "node_id": "MDQ6VXNlcjQyMjAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/42201?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prusnak",
      "html_url": "https://github.com/prusnak",
      "followers_url": "https://api.github.com/users/prusnak/followers",
      "following_url": "https://api.github.com/users/prusnak/following{/other_user}",
      "gists_url": "https://api.github.com/users/prusnak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prusnak/subscriptions",
      "organizations_url": "https://api.github.com/users/prusnak/orgs",
      "repos_url": "https://api.github.com/users/prusnak/repos",
      "events_url": "https://api.github.com/users/prusnak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prusnak/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "997e528a34185c68665d10cef43da883934ea03a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/997e528a34185c68665d10cef43da883934ea03a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/997e528a34185c68665d10cef43da883934ea03a"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 2,
      "deletions": 1
    },
    "files": [
      {
        "sha": "509107d88a091bb5c93d8fd8ad0d89c96c17c118",
        "filename": "src/rpc/blockchain.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/080b47d9ce6288e1725857b3026291981ef75e34/src/rpc/blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/080b47d9ce6288e1725857b3026291981ef75e34/src/rpc/blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.cpp?ref=080b47d9ce6288e1725857b3026291981ef75e34",
        "patch": "@@ -2109,13 +2109,15 @@ class CoinsViewScanReserver\n         if (g_scan_in_progress.exchange(true)) {\n             return false;\n         }\n+        CHECK_NONFATAL(g_scan_progress == 0);\n         m_could_reserve = true;\n         return true;\n     }\n \n     ~CoinsViewScanReserver() {\n         if (m_could_reserve) {\n             g_scan_in_progress = false;\n+            g_scan_progress = 0;\n         }\n     }\n };\n@@ -2228,7 +2230,6 @@ static RPCHelpMan scantxoutset()\n         std::vector<CTxOut> input_txos;\n         std::map<COutPoint, Coin> coins;\n         g_should_abort_scan = false;\n-        g_scan_progress = 0;\n         int64_t count = 0;\n         std::unique_ptr<CCoinsViewCursor> pcursor;\n         CBlockIndex* tip;"
      }
    ]
  }
]