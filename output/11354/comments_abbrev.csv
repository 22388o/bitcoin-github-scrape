promag,2017-09-17T08:28:10Z,IMO commit message and PR title are too long.,https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-330029241,330029241,
sipa,2017-09-17T18:40:05Z,"I believe this is exactly right.\n\nIt only applies in the case where both a grandparent and a parent cache don't have an entry, and a new entry is created in the child cache. When flushing to the parent, it can be marked as fresh.",https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-330069638,330069638,
gmaxwell,2017-09-18T08:40:52Z,Why is more important than how in commit messages.    When would a fresh entry in a child be flushed into the parent?,https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-330159215,330159215,
danra,2017-09-18T21:56:36Z,"@gmaxwell Do you mean to ask where are all the possible flows in the code in which this change would actually effect something? If so, I don't know. It's a general fix to an over-restriction in the coins DB itself - I don't know how small/large its actual optimization impact would be.\n\nOr, perhaps I misunderstood your question.",https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-330367954,330367954,
gmaxwell,2017-09-19T07:16:51Z,"Right, I understand what this is doing (with a bit of sipa's help at least); but I can't come up with any case in the code where it would actually happen.  I think it's the right thing to do, but I'm at a loss as to how to test it or prioritize it in my review.",https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-330451580,330451580,
danra,2017-09-19T09:13:37Z,"I can wildly guess this may happen in case of a reorg, in case a previously\nspent output which was already flushed becomes unspent. I might be wrong as\nI haven't looked at reorg handling yet.  That said, even if this currently\ndoesn't happen in a reorg, future changes to its implementation could\ntrigger this case, since logically this is definitely something that may\nhappen as a result of a r",https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-330479525,330479525,
sdaftuar,2017-09-20T19:19:21Z,"I don't think it's currently possible to trigger this logic, because pruned/spent coins aren't loaded from parent caches (GetCoins() can only return true if an unspent coin is found), and we currently erase things from the cache when we flush to a parent (so when a coin is spent and DIRTY, it loses DIRTY-ness at the same time it is erased). \n\n@danra I agree that it's possible in the future thi",https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-330953733,330953733,
laanwj,2017-12-12T10:59:13Z,"Closing this, as the consensus is that the risk is too high considering the potential benefit.",https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-351017757,351017757,
ryanofsky,2017-12-12T15:26:53Z,"FWIW, #9384 makes the same optimization and goes a little further, and preferring to erase, rather than keep around unnecessary cache entries that are fresh and pruned.",https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-351084831,351084831,
