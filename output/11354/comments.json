[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330029241",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-330029241",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11354",
    "id": 330029241,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDAyOTI0MQ==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-17T08:28:10Z",
    "updated_at": "2017-09-17T08:28:10Z",
    "author_association": "MEMBER",
    "body": "IMO commit message and PR title are too long.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330029241/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330069638",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-330069638",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11354",
    "id": 330069638,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDA2OTYzOA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-17T18:40:05Z",
    "updated_at": "2017-09-17T18:40:05Z",
    "author_association": "MEMBER",
    "body": "I believe this is exactly right.\r\n\r\nIt only applies in the case where both a grandparent and a parent cache don't have an entry, and a new entry is created in the child cache. When flushing to the parent, it can be marked as fresh.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330069638/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330159215",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-330159215",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11354",
    "id": 330159215,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDE1OTIxNQ==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-18T08:40:52Z",
    "updated_at": "2017-09-18T08:40:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Why is more important than how in commit messages.    When would a fresh entry in a child be flushed into the parent?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330159215/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330367954",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-330367954",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11354",
    "id": 330367954,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDM2Nzk1NA==",
    "user": {
      "login": "danra",
      "id": 84245,
      "node_id": "MDQ6VXNlcjg0MjQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/84245?u=0e901471205a3304684bac0a4e6e72a842f64c94&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danra",
      "html_url": "https://github.com/danra",
      "followers_url": "https://api.github.com/users/danra/followers",
      "following_url": "https://api.github.com/users/danra/following{/other_user}",
      "gists_url": "https://api.github.com/users/danra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
      "organizations_url": "https://api.github.com/users/danra/orgs",
      "repos_url": "https://api.github.com/users/danra/repos",
      "events_url": "https://api.github.com/users/danra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-18T21:56:36Z",
    "updated_at": "2017-09-18T21:56:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "@gmaxwell Do you mean to ask where are all the possible flows in the code in which this change would actually effect something? If so, I don't know. It's a general fix to an over-restriction in the coins DB itself - I don't know how small/large its actual optimization impact would be.\r\n\r\nOr, perhaps I misunderstood your question.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330367954/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330451580",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-330451580",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11354",
    "id": 330451580,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDQ1MTU4MA==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-19T07:16:51Z",
    "updated_at": "2017-09-19T07:16:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "Right, I understand what this is doing (with a bit of sipa's help at least); but I can't come up with any case in the code where it would actually happen.  I think it's the right thing to do, but I'm at a loss as to how to test it or prioritize it in my review.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330451580/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330479525",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-330479525",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11354",
    "id": 330479525,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDQ3OTUyNQ==",
    "user": {
      "login": "danra",
      "id": 84245,
      "node_id": "MDQ6VXNlcjg0MjQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/84245?u=0e901471205a3304684bac0a4e6e72a842f64c94&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danra",
      "html_url": "https://github.com/danra",
      "followers_url": "https://api.github.com/users/danra/followers",
      "following_url": "https://api.github.com/users/danra/following{/other_user}",
      "gists_url": "https://api.github.com/users/danra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
      "organizations_url": "https://api.github.com/users/danra/orgs",
      "repos_url": "https://api.github.com/users/danra/repos",
      "events_url": "https://api.github.com/users/danra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-19T09:13:37Z",
    "updated_at": "2017-09-19T09:13:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "I can wildly guess this may happen in case of a reorg, in case a previously\nspent output which was already flushed becomes unspent. I might be wrong as\nI haven't looked at reorg handling yet.  That said, even if this currently\ndoesn't happen in a reorg, future changes to its implementation could\ntrigger this case, since logically this is definitely something that may\nhappen as a result of a reorg.\n\nThat's all the extra input I can offer for now, I am sure @sipa and others\nwould be more qualified to answer :)\n\nOn Tue, Sep 19, 2017 at 10:16 AM, Gregory Maxwell <notifications@github.com>\nwrote:\n\n> Right, I understand what this is doing (with a bit of sipa's help at\n> least); but I can't come up with any case in the code where it would\n> actually happen. I think it's the right thing to do, but I'm at a loss as\n> to how to test it or prioritize it in my review.\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-330451580>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAFJFaHZZypmBMUZZDaavmlpyaRjHhyFks5sj2plgaJpZM4PZ5zD>\n> .\n>\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330479525/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330953733",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-330953733",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11354",
    "id": 330953733,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDk1MzczMw==",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-20T19:19:21Z",
    "updated_at": "2017-09-20T19:40:59Z",
    "author_association": "MEMBER",
    "body": "I don't think it's currently possible to trigger this logic, because pruned/spent coins aren't loaded from parent caches (GetCoins() can only return true if an unspent coin is found), and we currently erase things from the cache when we flush to a parent (so when a coin is spent and DIRTY, it loses DIRTY-ness at the same time it is erased). \r\n\r\n@danra I agree that it's possible in the future this could be an optimization (eg in a future where we might write to the parent without clearing the cache), but given that this logic is consensus critical and already super complicated, I think we should just put a comment in that explains this a bit more, and not make any actual code changes -- optimizing consensus code in a way that we don't believe can trigger seems like way too much risk for zero reward.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330953733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/351017757",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-351017757",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11354",
    "id": 351017757,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTAxNzc1Nw==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-12T10:59:13Z",
    "updated_at": "2017-12-12T10:59:13Z",
    "author_association": "MEMBER",
    "body": "Closing this, as the consensus is that the risk is too high considering the potential benefit.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/351017757/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/351084831",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11354#issuecomment-351084831",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11354",
    "id": 351084831,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTA4NDgzMQ==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-12T15:26:53Z",
    "updated_at": "2017-12-12T15:26:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "FWIW, #9384 makes the same optimization and goes a little further, and preferring to erase, rather than keep around unnecessary cache entries that are fresh and pruned.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/351084831/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]