[
  {
    "sha": "1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxYzJhMWJhYzBhZDY5MDE4NjhjMWE0MDAzYzdjYmRkY2RmNDZhMjli",
    "commit": {
      "author": {
        "name": "Francesco 'makevoid' Canessa",
        "email": "makevoid@gmail.com",
        "date": "2016-03-03T10:54:31Z"
      },
      "committer": {
        "name": "Francesco 'makevoid' Canessa",
        "email": "makevoid@gmail.com",
        "date": "2016-06-13T15:09:14Z"
      },
      "message": "Add address label to request payment QR Code (QT)\n\nIn the Receive 'Tab' of the QT wallet, when 'Show'ing a previously requested payment, add a label underneath the QR Code showing the bitcoin address where the funds will go to.\n\nThis way the user can be sure that the QR code scanner app the user using is reading the correct bitcoin address, preventing funds to be stolen.\n\nIncludes fix for HiDPI screens by @jonasschnelli.",
      "tree": {
        "sha": "26013d188def1420c61f2fd92df67f54af7e0289",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/26013d188def1420c61f2fd92df67f54af7e0289"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b/comments",
    "author": {
      "login": "makevoid",
      "id": 14677,
      "node_id": "MDQ6VXNlcjE0Njc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14677?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/makevoid",
      "html_url": "https://github.com/makevoid",
      "followers_url": "https://api.github.com/users/makevoid/followers",
      "following_url": "https://api.github.com/users/makevoid/following{/other_user}",
      "gists_url": "https://api.github.com/users/makevoid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/makevoid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/makevoid/subscriptions",
      "organizations_url": "https://api.github.com/users/makevoid/orgs",
      "repos_url": "https://api.github.com/users/makevoid/repos",
      "events_url": "https://api.github.com/users/makevoid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/makevoid/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "makevoid",
      "id": 14677,
      "node_id": "MDQ6VXNlcjE0Njc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14677?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/makevoid",
      "html_url": "https://github.com/makevoid",
      "followers_url": "https://api.github.com/users/makevoid/followers",
      "following_url": "https://api.github.com/users/makevoid/following{/other_user}",
      "gists_url": "https://api.github.com/users/makevoid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/makevoid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/makevoid/subscriptions",
      "organizations_url": "https://api.github.com/users/makevoid/orgs",
      "repos_url": "https://api.github.com/users/makevoid/repos",
      "events_url": "https://api.github.com/users/makevoid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/makevoid/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "44c1b1c9bb54082625c7ad76af25473abf79f866",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/44c1b1c9bb54082625c7ad76af25473abf79f866",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/44c1b1c9bb54082625c7ad76af25473abf79f866"
      }
    ],
    "stats": {
      "total": 27,
      "additions": 20,
      "deletions": 7
    },
    "files": [
      {
        "sha": "4163f4189c5e9ef87afdb894731dcf8010966a31",
        "filename": "src/qt/forms/receiverequestdialog.ui",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b/src/qt/forms/receiverequestdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b/src/qt/forms/receiverequestdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/receiverequestdialog.ui?ref=1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b",
        "patch": "@@ -22,7 +22,7 @@\n      <property name=\"minimumSize\">\n       <size>\n        <width>300</width>\n-       <height>300</height>\n+       <height>320</height>\n       </size>\n      </property>\n      <property name=\"toolTip\">"
      },
      {
        "sha": "bab9923d20d4985cb0d8c647bba10cf53baaf56f",
        "filename": "src/qt/guiconstants.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b/src/qt/guiconstants.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b/src/qt/guiconstants.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiconstants.h?ref=1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b",
        "patch": "@@ -43,7 +43,7 @@ static const int TOOLTIP_WRAP_THRESHOLD = 80;\n static const int MAX_URI_LENGTH = 255;\n \n /* QRCodeDialog -- size of exported QR Code image */\n-#define EXPORT_IMAGE_SIZE 256\n+#define QR_IMAGE_SIZE 300\n \n /* Number of frames in spinner animation */\n #define SPINNER_FRAMES 36"
      },
      {
        "sha": "b13ea3df709bb926c3a5e1127d6a2d99a5ee1a8b",
        "filename": "src/qt/receiverequestdialog.cpp",
        "status": "modified",
        "additions": 17,
        "deletions": 5,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b/src/qt/receiverequestdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b/src/qt/receiverequestdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.cpp?ref=1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b",
        "patch": "@@ -45,7 +45,7 @@ QImage QRImageWidget::exportImage()\n {\n     if(!pixmap())\n         return QImage();\n-    return pixmap()->toImage().scaled(EXPORT_IMAGE_SIZE, EXPORT_IMAGE_SIZE);\n+    return pixmap()->toImage();\n }\n \n void QRImageWidget::mousePressEvent(QMouseEvent *event)\n@@ -166,20 +166,32 @@ void ReceiveRequestDialog::update()\n                 ui->lblQRCode->setText(tr(\"Error encoding URI into QR Code.\"));\n                 return;\n             }\n-            QImage myImage = QImage(code->width + 8, code->width + 8, QImage::Format_RGB32);\n-            myImage.fill(0xffffff);\n+            QImage qrImage = QImage(code->width + 8, code->width + 8, QImage::Format_RGB32);\n+            qrImage.fill(0xffffff);\n             unsigned char *p = code->data;\n             for (int y = 0; y < code->width; y++)\n             {\n                 for (int x = 0; x < code->width; x++)\n                 {\n-                    myImage.setPixel(x + 4, y + 4, ((*p & 1) ? 0x0 : 0xffffff));\n+                    qrImage.setPixel(x + 4, y + 4, ((*p & 1) ? 0x0 : 0xffffff));\n                     p++;\n                 }\n             }\n             QRcode_free(code);\n \n-            ui->lblQRCode->setPixmap(QPixmap::fromImage(myImage).scaled(300, 300));\n+            QImage qrAddrImage = QImage(QR_IMAGE_SIZE, QR_IMAGE_SIZE+20, QImage::Format_RGB32);\n+            qrAddrImage.fill(0xffffff);\n+            QPainter painter(&qrAddrImage);\n+            painter.drawImage(0, 0, qrImage.scaled(QR_IMAGE_SIZE, QR_IMAGE_SIZE));\n+            QFont font = GUIUtil::fixedPitchFont();\n+            font.setPixelSize(12);\n+            painter.setFont(font);\n+            QRect paddedRect = qrAddrImage.rect();\n+            paddedRect.setHeight(QR_IMAGE_SIZE+12);\n+            painter.drawText(paddedRect, Qt::AlignBottom|Qt::AlignCenter, info.address);\n+            painter.end();\n+\n+            ui->lblQRCode->setPixmap(QPixmap::fromImage(qrAddrImage));\n             ui->btnSaveAs->setEnabled(true);\n         }\n     }"
      },
      {
        "sha": "676745a858f6cdd59db033736aeac8cf77b31a85",
        "filename": "src/qt/receiverequestdialog.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b/src/qt/receiverequestdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b/src/qt/receiverequestdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.h?ref=1c2a1bac0ad6901868c1a4003c7cbddcdf46a29b",
        "patch": "@@ -10,6 +10,7 @@\n #include <QDialog>\n #include <QImage>\n #include <QLabel>\n+#include <QPainter>\n \n class OptionsModel;\n "
      }
    ]
  }
]