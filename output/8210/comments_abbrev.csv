jonasschnelli,2016-06-16T18:52:21Z,"If you compile OSX binaries over depends, you now need the MacOSX10.11.tar.gz SDK.\n",https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226578897,226578897,
sipa,2016-06-16T18:53:34Z,What advantages does 5.6.1 have over 5.5.0?\n,https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226579277,226579277,
jonasschnelli,2016-06-16T18:58:36Z,"The release notes for Qt5.6 are here: https://blog.qt.io/blog/2016/03/16/qt-5-6-released/\n\nThe reason why I'd like to see this go in before 0.13 is the missing HiDPI support for linux and windows in 5.5\n(https://github.com/bitcoin/bitcoin/issues/6472).\n\nI know, most devs don't care about HiDPI, but almost every laptops and screens sold today support HiDPI.\n",https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226580739,226580739,
laanwj,2016-06-17T08:05:45Z,"As I remember there are quite a few upstream issues solved in 5.6.1, from HiDPI to crashes and window manager integration.\nWe definitely need to upgrade Qt before 0.13.\n",https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226706918,226706918,
laanwj,2016-06-17T08:12:09Z,Why does this need the OSX toolchain bump?\n,https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226708200,226708200,
jonasschnelli,2016-06-17T08:15:53Z,"I ran into Qt compile issues (c++11 atomic issues) with MaxOSX10.9 clang compiler. Haven't tracked it down and I think a toolchain bump to 10.11 is necessary for #7770 anyways and does not affect the minimum required platform,\n",https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226708931,226708931,
laanwj,2016-06-17T08:16:40Z,Ah sorry yes I missed the atomic thing. Makes sense.\n,https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226709070,226709070,
jonasschnelli,2016-06-17T09:29:35Z,There are some issues which I could not already solve\n\n##### Linux\n\nSomehow it links against libdbus-1.so now and will be rejected by `symbol-check.py`:\n\n```\nqt/bitcoin-qt: NEEDED library libdbus-1.so.3 is not allowed\n```\n\nhttps://bitcoin.jonasschnelli.ch/pulls/8210/build-linux.log\n\n##### MinGW\n\nIt doesn't find `-lqwindows` anymore:\n\n```\nchecking for static Qt plugins: -lqwindows.,https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226724039,226724039,
fanquake,2016-06-17T15:16:03Z,"One TODO you could add here is dropping [dbus from the qt build](https://github.com/bitcoin/bitcoin/pull/7993#issuecomment-223114395).\nThanks for picking this up and putting it on top of the toolchain bump. Ill test this, and if it's merged for 0.13, I can rebase #8053 and turn it into testing a QT5.7 update, and the potential enhancements surrounding that.\n",https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226797358,226797358,
jonasschnelli,2016-06-17T18:46:38Z,Compiles now on all three gitian platform: https://bitcoin.jonasschnelli.ch/pulls/8210/\n\nThe remaining question:\ndynamic link against `libdbus-1`\nhttps://github.com/bitcoin/bitcoin/pull/8210/files#diff-a225cfb1575f5550c4ba2b912127a730R71\n,https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226850415,226850415,
jonasschnelli,2016-06-17T18:49:12Z,Travis fails because of a missing file (MacOSX10.11.sdk.tar.gz) on bitcoincore.org. Must be placed there by @theuni.\n,https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226850965,226850965,
laanwj,2016-06-18T07:20:53Z,"> Travis fails because of a missing file (MacOSX10.11.sdk.tar.gz) on bitcoincore.org. Must be placed there by @theuni. \n\nCan we temporarily use a different host?\n\nI wouldn't mind using mine, until we find a permenant solution: https://download.visucore.com/bitcoin/MacOSX10.11.sdk.tar.gz\n",https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226926944,226926944,
theuni,2016-06-18T07:54:14Z,"I uploaded this before I left, #8184 should show it being found.\n",https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226928146,226928146,
theuni,2016-06-18T08:06:34Z,"Looks like we might need to whitelist a new range at bitcoincore.org for\nthe generic build image. The download fails with ""access denied"". I can fix\nnext week if there's no workaround in place yet.\n\n...stupid SDK restrictions...\n",https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226928575,226928575,
theuni,2016-06-18T08:59:35Z,"Iirc there's a --runtime-dbus (or so) introduced in 5.6 or 5.7 that makes\nthe desired behavior explicit. That, combined with deleting the dbus\ndependency (and even the package itself) should fix the NEEDED problem.\n",https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226930545,226930545,
jonasschnelli,2016-06-18T13:35:13Z,"- Travis is now happy (temporary set the SDK path to https://bitcoin.jonasschnelli.ch)\n- libdbus is now loaded at runtime, so the symbols-check is back to the old state\n- All three gitian platforms built successfully https://bitcoin.jonasschnelli.ch/pulls/8210/\n",https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226942837,226942837,
laanwj,2016-06-18T14:40:30Z,"Woohoo, green!\n\nGoing to test this.\n- [x] Gitian build was succesful for all platforms\n- [x] Checked the bitcoin-qt executable for Linux - at first glance everything seems to work as it should, no glitches (on Ubuntu 16.04)\n- [x] Checked the bitcoin-qt.exe for Windows in wine - everything seems ok (on Ubuntu 16.04)\n\nbitcoin-qt dependencies:\n\n```\n 0x0000000000000001 (NEEDED)             S",https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-226945879,226945879,
laanwj,2016-06-20T07:58:24Z,"Did anyone test the OSX executables?\n\nIf so, and there were no issues, I think this is ready for merge.\n",https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-227074159,227074159,
theuni,2016-06-23T03:14:01Z,"I'm not sure that I understand the pkg-config changes here. We don't use pkg-config for win because I don't believe it's reliable there. From what I can tell, this seems to confirm that suspicion.\n\nI think this probably introduced a few bugs, but I won't be able to work on this for ~1.5 more weeks. I've made a note to verify these changes before release.\n\nOther than the windows stuff, this loo",https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-227939005,227939005,
laanwj,2016-06-23T14:39:23Z,> I think this probably introduced a few bugs\n\nIf anything the windows gitian executables seem to be working fine.\n,https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-228071102,228071102,
MarcoFalke,2016-07-08T16:37:09Z,> I think this probably introduced a few bugs\n\n@theuni  Did you find any bugs?\n,https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-231408700,231408700,
theuni,2016-07-08T17:36:08Z,"@MarcoFalke The pkg-config issue was fixed with 0c928cb13cc9146bb2c0f39d1d3b6e1e660a375d. I just tested to see if the xcb issue was reintroduced, and it wasn't. So it looks like we're all good here.\n",https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-231423190,231423190,
MarcoFalke,2016-07-10T09:43:38Z,Good to hear. Thanks for having a look.\n,https://github.com/bitcoin/bitcoin/pull/8210#issuecomment-231580085,231580085,
jonasschnelli,2016-06-17T14:06:43Z,@theuni: Is this a problem? I guess Qt links to `libdbus` dynamic anyways? And we disable the static library (https://github.com/bitcoin/bitcoin/blob/master/depends/packages/dbus.mk#L9).\n,https://github.com/bitcoin/bitcoin/pull/8210#discussion_r67515248,67515248,contrib/devtools/symbol-check.py
jonasschnelli,2016-06-17T14:07:17Z,IMO this is necessary in non-pkgconfig mode (MinGW). @theuni: thoughts?\n,https://github.com/bitcoin/bitcoin/pull/8210#discussion_r67515314,67515314,build-aux/m4/bitcoin_qt.m4
theuni,2016-06-18T09:27:53Z,"I believe this hasn't been necessary in the past because qt assumed more\nabout win builds than other environments. If that's the case, and it's\nneeded now, we'll need to make sure we only check for this for 5.6+.\n",https://github.com/bitcoin/bitcoin/pull/8210#discussion_r67598315,67598315,build-aux/m4/bitcoin_qt.m4
theuni,2016-06-23T03:09:07Z,This seems to be using pkg-config in the if(!pkgconfig) case?\n,https://github.com/bitcoin/bitcoin/pull/8210#discussion_r68169976,68169976,build-aux/m4/bitcoin_qt.m4
