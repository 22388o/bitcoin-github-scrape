laanwj,2016-05-26T05:20:13Z,"Concept/ut ACK. This function was crazy, it shouldn't be doing DNS lookups in the RPC function. I also can't imagine this being useful to anyone.\nAPI change needs mention in the release notes\n",https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-221780192,221780192,
petertodd,2016-05-26T10:34:54Z,Concept ACK\n,https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-221836366,221836366,
sipa,2016-05-26T13:03:00Z,Concept ACK\n,https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-221864256,221864256,
theuni,2016-05-26T15:38:58Z,"Ok, I'll add a mention in the notes and drop the RFC in the title.\n",https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-221908587,221908587,
TheBlueMatt,2016-05-27T09:15:10Z,"Knowing whether or not your addnodes are connected is a useful feature, and not trivial from getpeerinfo. I certainly use this regularly.\n\nOn May 24, 2016 11:24:09 AM PDT, Cory Fields notifications@github.com wrote:\n\n> As discussed with @laanwj and @sdaftuar in Zurich. The output format is\n> kept the same as before, though the input params change.\n> \n> As far as I can tell, this has no test",https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-222099426,222099426,
sipa,2016-05-27T09:17:57Z,"Can't we just check addrName to see whether we're connected to a particular addnode? That changes the question from ""is there a connection whose IP corresponds to what name N currently refers to?"" to ""is there a connection to what N referred to at the time of connection?"". I don't think that matters, or is it intended to migrate addnode'd connections even when the IP their name refers to changes?\",https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-222099955,222099955,
TheBlueMatt,2016-05-27T18:49:47Z,"We could, but thats a bit of an awkward question given the behavior of the auto-connect thread (which I do not think should change). If you change the question to that, then the background auto-connect thread may still spin trying to connect to/connecting to the host that was added, as its hostname has changed, even though the RPC will tell you you're connected.\n",https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-222225243,222225243,
sipa,2016-05-27T18:55:22Z,"Agree, the RPC and the thread should be consistent.\n",https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-222226570,222226570,
theuni,2016-05-27T19:24:07Z,"They're not consistent, though. If I call ""getaddednodeinfo true"", and there's a disconnected dns entry, it will resolve at that moment and return with a list of ip's. However, the connection thread re-resolves and attempts to connect up to 2 min later.\n\nSo when using a seednode here (the only plausible use-case I can imagine), the results won't match what the thread actually tries to connect to",https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-222232869,222232869,
TheBlueMatt,2016-05-27T20:56:12Z,"I dont think this is useful for addnode'ing a seednode, indeed, but the use-case is allowing one to set a hostname to addnode, and then change the hostname freely, having the addnode follow the hostname as it changes. This is useful eg if you have a bunch of nodes which all addnode something, and you want to migrate the addnode'ed node.\n",https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-222251269,222251269,
laanwj,2016-05-30T10:52:01Z,"> indeed, but the use-case is allowing one to set a hostname to addnode, and then change the hostname freely, having the addnode follow the hostname as it changes\n\nThis doesn't actually remove the functionality to do that.\n\nFurthermore the `getaddednodeinfo` output is not stable in this case either, if the DNS entry changed from the time you connected to the time you call the RPC.\n\nIf you wa",https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-222466813,222466813,
sipa,2016-05-30T10:55:03Z,"For an alternative (using the addrName used at connection time to detect\nwhether an addnode is connected or not), see #8113.\n",https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-222467291,222467291,
laanwj,2016-05-31T13:10:37Z,Closing in favor of #8113\n,https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-222683241,222683241,
