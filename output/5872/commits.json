[
  {
    "sha": "49f4f99d4fb349e38915d56734566f25398a985a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0OWY0Zjk5ZDRmYjM0OWUzODkxNWQ1NjczNDU2NmYyNTM5OGE5ODVh",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2015-03-09T18:35:15Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2015-03-09T18:36:30Z"
      },
      "message": "configure: BITCOIN_SUBDIR_TO_INCLUDE: Improve compatibility with paths including space and multiline cpp output",
      "tree": {
        "sha": "c08623c1f1df85971d0eb7098c4631c3ab85dd75",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c08623c1f1df85971d0eb7098c4631c3ab85dd75"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/49f4f99d4fb349e38915d56734566f25398a985a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/49f4f99d4fb349e38915d56734566f25398a985a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/49f4f99d4fb349e38915d56734566f25398a985a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/49f4f99d4fb349e38915d56734566f25398a985a/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "52a5f903605760f54370863679740f5ac0354f13",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/52a5f903605760f54370863679740f5ac0354f13",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/52a5f903605760f54370863679740f5ac0354f13"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "5f0a3b1be66b1915802bf5ca4a5bb72c1aab82a5",
        "filename": "build-aux/m4/bitcoin_subdir_to_include.m4",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/49f4f99d4fb349e38915d56734566f25398a985a/build-aux/m4/bitcoin_subdir_to_include.m4",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/49f4f99d4fb349e38915d56734566f25398a985a/build-aux/m4/bitcoin_subdir_to_include.m4",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build-aux/m4/bitcoin_subdir_to_include.m4?ref=49f4f99d4fb349e38915d56734566f25398a985a",
        "patch": "@@ -5,7 +5,7 @@ AC_DEFUN([BITCOIN_SUBDIR_TO_INCLUDE],[\n     AC_MSG_RESULT([default])\n   else\n     echo \"#include <$2$3.h>\" >conftest.cpp\n-    newinclpath=`${CXXCPP} ${CPPFLAGS} -M conftest.cpp 2>/dev/null | [ tr -d '\\\\n\\\\r\\\\\\\\' | sed -e 's/^.*[[:space:]:]\\(\\/[^[:space:]]*\\)]$3[\\.h[[:space:]].*$/\\1/' -e t -e d`]\n+    newinclpath=$(${CXXCPP} ${CPPFLAGS} -M conftest.cpp 2>/dev/null | sed [-E -e ':a' -e '/\\\\$/!b b' -e N -e 's/\\\\\\n/ /' -e 't a' -e ':b' -e 's/^[^:]*:[[:space:]]*(([^[:space:]\\]|\\\\.)*[[:space:]])*(([^[:space:]\\]|\\\\.)*)]$3\\.h[([[:space:]].*)?$/\\3/' -e 't' -e d])\n     AC_MSG_RESULT([${newinclpath}])\n     if test \"x${newinclpath}\" != \"x\"; then\n       eval \"$1=\\\"\\$$1\\\"' -I${newinclpath}'\""
      }
    ]
  },
  {
    "sha": "e856193daf6f8714912f1a2512888b91f8ef4fb9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplODU2MTkzZGFmNmY4NzE0OTEyZjFhMjUxMjg4OGI5MWY4ZWY0ZmI5",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2016-06-08T21:40:25Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2016-06-08T21:40:25Z"
      },
      "message": "BITCOIN_SUBDIR_TO_INCLUDE: Improve compatibility further, and reformat to be more readable",
      "tree": {
        "sha": "e396ab0d8857b8fd98c95f7be813ca11404fed20",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e396ab0d8857b8fd98c95f7be813ca11404fed20"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e856193daf6f8714912f1a2512888b91f8ef4fb9",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e856193daf6f8714912f1a2512888b91f8ef4fb9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e856193daf6f8714912f1a2512888b91f8ef4fb9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e856193daf6f8714912f1a2512888b91f8ef4fb9/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "49f4f99d4fb349e38915d56734566f25398a985a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/49f4f99d4fb349e38915d56734566f25398a985a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/49f4f99d4fb349e38915d56734566f25398a985a"
      }
    ],
    "stats": {
      "total": 42,
      "additions": 38,
      "deletions": 4
    },
    "files": [
      {
        "sha": "7dd76b3880a7523ccd8864b39dc6bfb6babe6529",
        "filename": "build-aux/m4/bitcoin_subdir_to_include.m4",
        "status": "modified",
        "additions": 38,
        "deletions": 4,
        "changes": 42,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e856193daf6f8714912f1a2512888b91f8ef4fb9/build-aux/m4/bitcoin_subdir_to_include.m4",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e856193daf6f8714912f1a2512888b91f8ef4fb9/build-aux/m4/bitcoin_subdir_to_include.m4",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build-aux/m4/bitcoin_subdir_to_include.m4?ref=e856193daf6f8714912f1a2512888b91f8ef4fb9",
        "patch": "@@ -1,14 +1,48 @@\n dnl BITCOIN_SUBDIR_TO_INCLUDE([CPPFLAGS-VARIABLE-NAME],[SUBDIRECTORY-NAME],[HEADER-FILE])\n dnl SUBDIRECTORY-NAME must end with a path separator\n AC_DEFUN([BITCOIN_SUBDIR_TO_INCLUDE],[\n-  if test \"x$2\" = \"x\"; then\n+  m4_pushdef([_result_var],[$1])\n+  m4_pushdef([_rel_path],[$2])\n+  m4_pushdef([_header_file],[$3.h])\n+  if test \"x[]_rel_path\" = \"x\"; then\n     AC_MSG_RESULT([default])\n   else\n-    echo \"#include <$2$3.h>\" >conftest.cpp\n-    newinclpath=$(${CXXCPP} ${CPPFLAGS} -M conftest.cpp 2>/dev/null | sed [-E -e ':a' -e '/\\\\$/!b b' -e N -e 's/\\\\\\n/ /' -e 't a' -e ':b' -e 's/^[^:]*:[[:space:]]*(([^[:space:]\\]|\\\\.)*[[:space:]])*(([^[:space:]\\]|\\\\.)*)]$3\\.h[([[:space:]].*)?$/\\3/' -e 't' -e d])\n+    echo '[#]include <'\"_rel_path\"'/_header_file>' >conftest.cpp\n+    newinclpath=$(\n+      ${CXXCPP} ${CPPFLAGS} -M conftest.cpp 2>/dev/null |\n+      ${SED} -E m4_bpatsubsts([[\n+        :build_line\n+# If the line doesn't end with a backslash, it is complete; go on to process it\n+        /\\\\$/!b have_complete_line\n+# Otherwise, read the next line, and concatenate it to the current one with a space\n+        N\n+        s/\\\\\\n/ /\n+# Then go back and check for a trailing backslash again.\n+        t build_line\n+\n+# When we get here, we have the completed line, with all continuations collapsed.\n+        :have_complete_line\n+        s/^[^:]*:[[:space:]]*(([^[:space:]\\]|\\\\.)*[[:space:]])*(([^[:space:]\\]|\\\\.)*)(\\\\|\\\\\\\\|\\/)?]]patsubst(]_header_file[,[\\.],[\\\\.])[[([[:space:]].*)?$/\\3/\n+#         ^^^^^^^ The Make line begins with a target (which we don't care about)\n+#                ^^^^^^^^^^^^ Ignore any spaces following it\n+#                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Match any number of other dependencies\n+#                                                              ^^^^^^^^^^^^^^^^^^^^^^ Match any path components for our dependency; note this is reference 3, which we are replacing with\n+#                                                                                    ^^^^^^^^^^^^^ Accept the path ending in a backslash, a double-backslash (ie escaped), or a forward slash\n+#                                                                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ The filename must match exactly (periods are escaped, since a normal period matches any character in regex)\n+#                                                                                                                                      ^^^^^^^^^^^^^^^^^ Filename must be followed by a space, but after that we don't care; we still need to match it all so it gets replaced, however\n+# Delete the line, but only if we failed to find the directory (t jumps past the d if we matched)\n+        t\n+        d\n+]],[\n+\\s*\\(#.*\\)?$],[],[\n+        \\(.*\\)],[ -e '\\1'])\n+dnl ^^^^^^^^^^^^^^^^^^^^^^^ Deletes comments and processes sed expressions into -e arguments\n+    )\n+\n     AC_MSG_RESULT([${newinclpath}])\n     if test \"x${newinclpath}\" != \"x\"; then\n-      eval \"$1=\\\"\\$$1\\\"' -I${newinclpath}'\"\n+      eval \"_result_var=\\\"\\$_result_var\\\"' -I${newinclpath}'\"\n     fi\n   fi\n+  m4_popdef([_result_var],[_rel_path],[_header_file])\n ])"
      }
    ]
  }
]