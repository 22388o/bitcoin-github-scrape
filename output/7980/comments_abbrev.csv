paveljanik,2016-05-01T16:16:00Z,"@MarcoFalke Marko, do you have a sample of how it fails without this change? I did 100 runs of master to compare and ACK this and it was always OK...\n",https://github.com/bitcoin/bitcoin/pull/7980#issuecomment-216052887,216052887,
MarcoFalke,2016-05-02T11:05:20Z,"@paveljanik This depends on your environment. I will post exact steps to reproduce tonight, when I am home.\n",https://github.com/bitcoin/bitcoin/pull/7980#issuecomment-216203086,216203086,
laanwj,2016-05-02T14:02:30Z,+1 for using OrderedDict. Normal dicts's order is randomized (they use a random seed for security reasons) and it's clear that the order of those outputs here matters.\n\nAside: as of Python 3.5 [OrderedDict is implemented in C](https://bugs.python.org/issue16991) and hence almost as fast as normal dict. Not that it matters in this particular instance.\n,https://github.com/bitcoin/bitcoin/pull/7980#issuecomment-216243949,216243949,
laanwj,2016-05-02T14:03:26Z,"To reproduce I'd suggest using an OrderedDict with the items reversed.\n\n(can't do it myself right now, running the extended test suite using python 3)\n\nThis PR is also part of #7814.\n",https://github.com/bitcoin/bitcoin/pull/7980#issuecomment-216244153,216244153,
MarcoFalke,2016-05-02T16:05:05Z,"@paveljanik To test this you can use `python -h` to see how you enable random hash seeds, if it is not yet enabled.\n\nE.g. `python -R qa/rpc-tests/smartfees.py --srcdir=src` fails on master, passes with this patch.\n",https://github.com/bitcoin/bitcoin/pull/7980#issuecomment-216277888,216277888,
paveljanik,2016-05-02T16:32:44Z,"Still not able to reproduce here on master, OS X.\n\nOn the other hand, this command now failed for me on OS X, with this PR:\n\n```\n$ python -R qa/rpc-tests/smartfees.py  --srcdir=src\nInitializing test directory /var/folders/65/fn0h49r55k7779vg1b_h461r0000gn/T/test2CcA11\nThis test is time consuming, please be patient\nSplitting inputs to small size so we can generate low priority tx's\nFinishe",https://github.com/bitcoin/bitcoin/pull/7980#issuecomment-216285580,216285580,
paveljanik,2016-05-02T16:44:20Z,"When I run the test as `./smartfee.py`, it is always OK here though (both master and this PR) - this is what I did before.\n\nUsing your method (with or without `-R`), I have various failures here, e.g.:\n\n```\nbitcoin-master$ python -R qa/rpc-tests/smartfees.py  --srcdir=src\nInitializing test directory /var/folders/65/fn0h49r55k7779vg1b_h461r0000gn/T/test_u6yGY\nThis test is time consuming, ple",https://github.com/bitcoin/bitcoin/pull/7980#issuecomment-216288557,216288557,
MarcoFalke,2016-05-02T17:36:49Z,@paveljanik Thanks for noticing! Of course I need to fix it in the other places as well...\n,https://github.com/bitcoin/bitcoin/pull/7980#issuecomment-216304970,216304970,
paveljanik,2016-05-02T20:25:45Z,Tests are running.\n\n@MarcoFalke Feel free to cherrypick typos from https://github.com/bitcoin/bitcoin/commit/bcdd81cc8abf3505c827610190daa746be7e0d96\n,https://github.com/bitcoin/bitcoin/pull/7980#issuecomment-216352518,216352518,
MarcoFalke,2016-05-03T06:29:35Z,"@paveljanik Done, thx.\n",https://github.com/bitcoin/bitcoin/pull/7980#issuecomment-216448587,216448587,
paveljanik,2016-05-03T07:08:04Z,"20 runs of `rm -rf cache/; python -R qa/rpc-tests/smartfees.py  --srcdir=src` in both master and this PR: master 12x Failed, this PR: all OK.\n\nACK https://github.com/bitcoin/bitcoin/pull/7980/commits/43bbcd075355630544a530f3cc52014edb3787b2\n",https://github.com/bitcoin/bitcoin/pull/7980#issuecomment-216455114,216455114,
