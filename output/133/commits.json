[
  {
    "sha": "8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4YmI1ZWRjMWM5MDU0ZDgzNWVmNzljOWYxYWIzZTAyMWIwNjkzMzAz",
    "commit": {
      "author": {
        "name": "Matt Corallo",
        "email": "matt@bluematt.me",
        "date": "2011-03-26T12:01:27Z"
      },
      "committer": {
        "name": "Matt Corallo",
        "email": "matt@bluematt.me",
        "date": "2011-03-30T18:45:56Z"
      },
      "message": "Allow UPnP mapping when USE_UPNP is defined and miniupnpc is installed at build time(statically linked).\n\nThanks joepie91 for the translation of the new copyright notices into Dutch.\nThanks sipa for the translation of the new copyright notices into French.\nThanks megu for the translation of the new copyright notices into Spanish.\nThanks justmoon/Blitzboom for the translation of the new copyright notices into German.\nThanks Joozero for the translation of the new copyright notices into Italian.\nRemaining translations were provided by Google Translate.",
      "tree": {
        "sha": "3f97435a0e5c512bcbafe15bb0f8a014a7b6e278",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3f97435a0e5c512bcbafe15bb0f8a014a7b6e278"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "454bc86479a387893604cd662aae994d37699672",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/454bc86479a387893604cd662aae994d37699672",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/454bc86479a387893604cd662aae994d37699672"
      }
    ],
    "stats": {
      "total": 394,
      "additions": 362,
      "deletions": 32
    },
    "files": [
      {
        "sha": "a28c7ef8595cd220e6389c029b64640c253032f6",
        "filename": "build-msw.txt",
        "status": "modified",
        "additions": 19,
        "deletions": 6,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/build-msw.txt",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/build-msw.txt",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build-msw.txt?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -3,7 +3,8 @@ Distributed under the MIT/X11 software license, see the accompanying\n file license.txt or http://www.opensource.org/licenses/mit-license.php.\n This product includes software developed by the OpenSSL Project for use in\n the OpenSSL Toolkit (http://www.openssl.org/).  This product includes\n-cryptographic software written by Eric Young (eay@cryptsoft.com).\n+cryptographic software written by Eric Young (eay@cryptsoft.com) and UPnP\n+software written by Thomas Bernard.\n \n \n WINDOWS BUILD NOTES\n@@ -25,23 +26,26 @@ Dependencies\n ------------\n Libraries you need to download separately and build:\n \n-                default path  download\n-wxWidgets       \\wxwidgets-2.9.1-mgw   http://www.wxwidgets.org/downloads/\n-OpenSSL         \\openssl-1.0.0c-mgw    http://www.openssl.org/source/\n-Berkeley DB     \\db-4.7.25.NC-mgw      http://www.oracle.com/technology/software/products/berkeley-db/index.html\n-Boost           \\boost-1.43.0-mgw      http://www.boost.org/users/download/\n+                default path               download\n+wxWidgets       \\wxwidgets-2.9.1-mgw       http://www.wxwidgets.org/downloads/\n+OpenSSL         \\openssl-1.0.0c-mgw        http://www.openssl.org/source/\n+Berkeley DB     \\db-4.7.25.NC-mgw          http://www.oracle.com/technology/software/products/berkeley-db/index.html\n+Boost           \\boost-1.43.0-mgw          http://www.boost.org/users/download/\n+miniupnpc       \\upnpc-exe-win32-20110215  http://miniupnp.tuxfamily.org/files/\n \n Their licenses:\n wxWidgets      LGPL 2.1 with very liberal exceptions\n OpenSSL        Old BSD license with the problematic advertising requirement\n Berkeley DB    New BSD license with additional requirement that linked software must be free open source\n Boost          MIT-like license\n+miniupnpc      New (3-clause) BSD license\n \n Versions used in this release:\n wxWidgets    2.9.1\n OpenSSL      1.0.0c\n Berkeley DB  4.7.25.NC\n Boost        1.43.0\n+miniupnpc    1.5-20110215\n \n \n Notes\n@@ -90,6 +94,15 @@ Note:\n building with boost 1.45.0 failed because of boost ticket 4614, 4258\n builds fine with boost 1.43.0\n \n+MiniUPnPc\n+---------\n+Building miniupnpc failed on Windows Server 2003, thus it is expected that a binary copy will be used.\n+See http://miniupnp.tuxfamily.org/forum/viewtopic.php?t=642\n+UPnP support is optional, make with USE_UPNP= to disable it.\n+\n+Get upnpc-exe-win32-20110215.zip and unzip it to \\upnpc-exe-win32-20110215\n+Get miniupnpc-1.5.20110215.tar.gz and copy *.h to \\upnpc-exe-win32-20110215\\miniupnpc\n+\n Bitcoin\n -------\n DOS prompt:"
      },
      {
        "sha": "a67a3be2e8a91590d620fff63e6f74dadb93e147",
        "filename": "build-osx.txt",
        "status": "modified",
        "additions": 43,
        "deletions": 2,
        "changes": 45,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/build-osx.txt",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/build-osx.txt",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build-osx.txt?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -3,7 +3,8 @@ Distributed under the MIT/X11 software license, see the accompanying\n file license.txt or http://www.opensource.org/licenses/mit-license.php.\n This product includes software developed by the OpenSSL Project for use in\n the OpenSSL Toolkit (http://www.openssl.org/).  This product includes\n-cryptographic software written by Eric Young (eay@cryptsoft.com).\n+cryptographic software written by Eric Young (eay@cryptsoft.com) and UPnP\n+software written by Thomas Bernard.\n \n \n Mac OS X build instructions\n@@ -108,11 +109,51 @@ file lib/libcrypto.a\n \n output should look like this:\n \n-ib/libcrypto.a: Mach-O universal binary with 2 architectures\n+lib/libcrypto.a: Mach-O universal binary with 2 architectures\n lib/libcrypto.a (for architecture i386):\tcurrent ar archive random library\n lib/libcrypto.a (for architecture x86_64):\tcurrent ar archive random library\n \n \n+miniupnpc\n+---------\n+\n+The process for miniupnpc (optional) is similar to that of OpenSSL.\n+\n+Download from http://miniupnp.tuxfamily.org/files/.\n+\n+cd ~/bitcoin/deps\n+tar xvf ~/Downloads/miniupnpc-1.5.tar\n+mv miniupnpc-1.5 miniupnpc-1.5-x86_64\n+tar xvf ~/Downloads/miniupnpc-1.5.tar\n+mv miniupnpc-1.5 miniupnpc-1.5-i386\n+# build x86_64 (64 bit intel) binary\n+cd miniupnpc-1.5-x86_64\n+export CFLAGS=\"-arch x86_64\"\n+export LDFLAGS=\"-arch x86_64\"\n+export PREFIX=\"/Users/macuser/bitcoin/deps\"\n+make && make install\n+# build i386 (32 bit intel) binary\n+cd miniupnpc-1.5-i386\n+export CFLAGS=\"-arch i386\"\n+export LDFLAGS=\"-arch i386\"\n+export PREFIX=\"/Users/macuser/bitcoin/deps\"\n+make\n+\n+# combine the libs\n+cd ~/bitcoin/deps\n+lipo -arch i386 miniupnpc-1.5-i386/libminiupnpc.a -arch x86_64 miniupnpc-1.5-x86_64/libminiupnpc.a -o lib/libminiupnpc.a -create\n+\n+Verify your binaries\n+\n+file lib/libminiupnpc.a\n+\n+output should look like this:\n+\n+lib/libminiupnpc.a: Mach-O universal binary with 2 architectures\n+lib/libminiupnpc.a (for architecture i386):\tcurrent ar archive random library\n+lib/libminiupnpc.a (for architecture x86_64):\tcurrent ar archive random library\n+\n+\n Berkeley DB\n -----------\n "
      },
      {
        "sha": "b959f1a2d9087abdbababcf51fe678b3a6351aea",
        "filename": "build-unix.txt",
        "status": "modified",
        "additions": 17,
        "deletions": 1,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/build-unix.txt",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/build-unix.txt",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build-unix.txt?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -3,7 +3,8 @@ Distributed under the MIT/X11 software license, see the accompanying\n file license.txt or http://www.opensource.org/licenses/mit-license.php.\n This product includes software developed by the OpenSSL Project for use in\n the OpenSSL Toolkit (http://www.openssl.org/).  This product includes\n-cryptographic software written by Eric Young (eay@cryptsoft.com).\n+cryptographic software written by Eric Young (eay@cryptsoft.com) and UPnP\n+software written by Thomas Bernard.\n \n \n UNIX BUILD NOTES\n@@ -36,17 +37,23 @@ You need to download wxWidgets from http://www.wxwidgets.org/downloads/\n and build it yourself.  See the build instructions and configure parameters\n below.\n \n+Requires miniupnpc for UPnP port mapping.  To compile with UPnP support,\n+install miniupnpc and compile after setting USE_UPNP.  It can be downloaded\n+from http://miniupnp.tuxfamily.org/files/.  \n+\n Licenses of statically linked libraries:\n wxWidgets      LGPL 2.1 with very liberal exceptions\n Berkeley DB    New BSD license with additional requirement that linked software must be free open source\n Boost          MIT-like license\n+miniupnpc      New (3-clause) BSD license\n \n Versions used in this release:\n GCC          4.3.3\n OpenSSL      0.9.8g\n wxWidgets    2.9.0\n Berkeley DB  4.7.25.NC\n Boost        1.37\n+miniupnpc    1.5\n \n \n Notes\n@@ -73,6 +80,15 @@ make install\n ldconfig\n \n \n+miniupnpc\n+---------\n+tar -xzvf miniupnpc-1.5.tar.gz\n+cd miniupnpc-1.5\n+make\n+sudo su\n+make install\n+\n+\n Berkeley DB\n -----------\n You need Berkeley DB 4.7.  Don't use 4.8, the database/log0000* files"
      },
      {
        "sha": "82205363de091ca4e1decbcfd6b4e37b6a7d17ed",
        "filename": "db.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/db.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/db.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/db.cpp?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -790,7 +790,7 @@ bool CWalletDB::LoadWallet()\n                 if (strKey == \"fMinimizeOnClose\")   ssValue >> fMinimizeOnClose;\n                 if (strKey == \"fUseProxy\")          ssValue >> fUseProxy;\n                 if (strKey == \"addrProxy\")          ssValue >> addrProxy;\n-\n+                if (fHaveUPnP && strKey == \"fUseUPnP\")           ssValue >> fUseUPnP;\n             }\n         }\n         pcursor->close();\n@@ -807,6 +807,8 @@ bool CWalletDB::LoadWallet()\n     printf(\"fMinimizeOnClose = %d\\n\", fMinimizeOnClose);\n     printf(\"fUseProxy = %d\\n\", fUseProxy);\n     printf(\"addrProxy = %s\\n\", addrProxy.ToString().c_str());\n+    if (fHaveUPnP)\n+        printf(\"fUseUPnP = %d\\n\", fUseUPnP);\n \n \n     // Upgrade"
      },
      {
        "sha": "903ef4c5c5fba352fe16285e9ba58c7abbab57bb",
        "filename": "init.cpp",
        "status": "modified",
        "additions": 18,
        "deletions": 0,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/init.cpp?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -157,6 +157,13 @@ bool AppInit2(int argc, char* argv[])\n             \"  -addnode=<ip>    \\t  \"   + _(\"Add a node to connect to\\n\") +\n             \"  -connect=<ip>    \\t\\t  \" + _(\"Connect only to the specified node\\n\") +\n             \"  -nolisten        \\t  \"   + _(\"Don't accept connections from outside\\n\") +\n+#ifdef USE_UPNP\n+#if USE_UPNP\n+            \"  -noupnp          \\t  \"   + _(\"Don't attempt to use UPnP to map the listening port\\n\") +\n+#else\n+            \"  -upnp            \\t  \"   + _(\"Attempt to use UPnP to map the listening port\\n\") +\n+#endif\n+#endif\n             \"  -paytxfee=<amt>  \\t  \"   + _(\"Fee per KB to add to transactions you send\\n\") +\n #ifdef GUI\n             \"  -server          \\t\\t  \" + _(\"Accept command line and JSON-RPC commands\\n\") +\n@@ -449,6 +456,17 @@ bool AppInit2(int argc, char* argv[])\n             wxMessageBox(_(\"Warning: -paytxfee is set very high.  This is the transaction fee you will pay if you send a transaction.\"), \"Bitcoin\", wxOK | wxICON_EXCLAMATION);\n     }\n \n+    if (fHaveUPnP)\n+    {\n+#if USE_UPNP\n+    if (GetBoolArg(\"-noupnp\"))\n+        fUseUPnP = false;\n+#else\n+    if (GetBoolArg(\"-upnp\"))\n+        fUseUPnP = true;\n+#endif\n+    }\n+\n     //\n     // Create the main window and start the node\n     //"
      },
      {
        "sha": "5d5ec90e2363b3229f5698b0d1ba0cf2e3fb8257",
        "filename": "locale/de/LC_MESSAGES/bitcoin.mo",
        "status": "modified",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/de/LC_MESSAGES/bitcoin.mo",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/de/LC_MESSAGES/bitcoin.mo",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/locale/de/LC_MESSAGES/bitcoin.mo?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303"
      },
      {
        "sha": "33b32d17ee608fee056c6334ea66ee1b0ab6071f",
        "filename": "locale/de/LC_MESSAGES/bitcoin.po",
        "status": "modified",
        "additions": 5,
        "deletions": 2,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/de/LC_MESSAGES/bitcoin.po",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/de/LC_MESSAGES/bitcoin.po",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/locale/de/LC_MESSAGES/bitcoin.po?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -1,9 +1,11 @@\n # DataWraith <DataWraith@web.de>, 2010.\n msgid \"\"\n msgstr \"\"\n+\"Project-Id-Version: \\n\"\n \"POT-Creation-Date: 2010-05-26 22:02-0000\\n\"\n \"PO-Revision-Date: 2010-06-03 13:11+0200\\n\"\n \"Last-Translator: DataWraith\\n\"\n+\"Language-Team: \\n\"\n \"MIME-Version: 1.0\\n\"\n \"Content-Type: text/plain; charset=UTF-8\\n\"\n \"Content-Transfer-Encoding: 8bit\\n\"\n@@ -707,7 +709,7 @@ msgid \"\"\n \"\\n\"\n \"This product includes software developed by the OpenSSL Project for use in the \\n\"\n \"OpenSSL Toolkit (http://www.openssl.org/) and cryptographic software written by \\n\"\n-\"Eric Young (eay@cryptsoft.com).\"\n+\"Eric Young (eay@cryptsoft.com) and UPnP software written by Thomas Bernard.\"\n msgstr \"\"\n \"Copyright (c) 2009-2010 Bitcoin Developers\\n\"\n \"\\n\"\n@@ -718,7 +720,8 @@ msgstr \"\"\n \"\\n\"\n \"Dieses Produkt enth\u00e4lt Software, die vom OpenSSL-Projekt zur Nutzung im\\n\"\n \"OpenSSL Toolkit (http://www.openssl.org/) geschrieben wurde sowie\\n\"\n-\"kryptographische Software von Eric Young (eay@cryptsoft.com).\"\n+\"kryptographische Software von Eric Young (eay@cryptsoft.com)\\n\"\n+\"und UPnP-Software, entwickelt von Thomas Bernard.\"\n \n #: ../../../uibase.cpp:619\n msgid \"Enter a Bitcoin address (e.g. 1NS17iag9jJgTHD1VXjvLCEnZuQ3rJED9L) or IP address (e.g. 123.45.6.7)\""
      },
      {
        "sha": "234acbd011a6f04047117c236f18a12dc2363e5f",
        "filename": "locale/es/LC_MESSAGES/bitcoin.mo",
        "status": "modified",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/es/LC_MESSAGES/bitcoin.mo",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/es/LC_MESSAGES/bitcoin.mo",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/locale/es/LC_MESSAGES/bitcoin.mo?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303"
      },
      {
        "sha": "0617ab4b4862cc911cb6413997199b02d23bcab5",
        "filename": "locale/es/LC_MESSAGES/bitcoin.po",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/es/LC_MESSAGES/bitcoin.po",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/es/LC_MESSAGES/bitcoin.po",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/locale/es/LC_MESSAGES/bitcoin.po?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -734,7 +734,7 @@ msgid \"\"\n \"\\n\"\n \"This product includes software developed by the OpenSSL Project for use in the \\n\"\n \"OpenSSL Toolkit (http://www.openssl.org/) and cryptographic software written by \\n\"\n-\"Eric Young (eay@cryptsoft.com).\"\n+\"Eric Young (eay@cryptsoft.com) and UPnP software written by Thomas Bernard.\"\n msgstr \"\"\n \"Copyright (c) 2009-2010 Bitcoin Developers\\n\"\n \"\\n\"\n@@ -745,7 +745,7 @@ msgstr \"\"\n \"\\n\"\n \"Este producto incluye software desarrollado por OpenSSL Project para su uso en el\\n\"\n \"OpenSSL Toolkit (http://www.openssl.org/) y software criptografico escrito por \\n\"\n-\"Eric Young (eay@cryptsoft.com).\"\n+\"Eric Young (eay@cryptsoft.com) y UPnP software escrito por Thomas Bernard.\"\n \n #: ../../../uibase.cpp:613\n msgid \"Enter a Bitcoin address (e.g. 1NS17iag9jJgTHD1VXjvLCEnZuQ3rJED9L) or IP address (e.g. 123.45.6.7)\""
      },
      {
        "sha": "f4d669b4c01b4cda7742b30dc9737d88b8befe43",
        "filename": "locale/fr/LC_MESSAGES/bitcoin.mo",
        "status": "modified",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/fr/LC_MESSAGES/bitcoin.mo",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/fr/LC_MESSAGES/bitcoin.mo",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/locale/fr/LC_MESSAGES/bitcoin.mo?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303"
      },
      {
        "sha": "b173364c09173065173b1c850017c363ffc9594b",
        "filename": "locale/fr/LC_MESSAGES/bitcoin.po",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/fr/LC_MESSAGES/bitcoin.po",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/fr/LC_MESSAGES/bitcoin.po",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/locale/fr/LC_MESSAGES/bitcoin.po?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -739,7 +739,7 @@ msgid \"\"\n \"\\n\"\n \"This product includes software developed by the OpenSSL Project for use in the \\n\"\n \"OpenSSL Toolkit (http://www.openssl.org/) and cryptographic software written by \\n\"\n-\"Eric Young (eay@cryptsoft.com).\"\n+\"Eric Young (eay@cryptsoft.com) and UPnP software written by Thomas Bernard.\"\n msgstr \"\"\n \"Copyright (c) 2009-2010 Bitcoin Developers\\n\"\n \"\\n\"\n@@ -750,7 +750,7 @@ msgstr \"\"\n \"\\n\"\n \"Ce produit comprend des composants logiciels d\u00e9velopp\u00e9s pour le Projet OpenSSL \\n\"\n \"OpenSSL Toolkit (http://www.openssl.org/) ainsi que des composants cryptographiques \\n\"\n-\"\u00e9crits par Eric Young (eay@cryptsoft.com).\"\n+\"\u00e9crits par Eric Young (eay@cryptsoft.com) et des logiciels UPnP \u00e9crits par Thomas Bernard..\"\n \n #: ../../../uibase.cpp:613\n msgid \"Enter a Bitcoin address (e.g. 1NS17iag9jJgTHD1VXjvLCEnZuQ3rJED9L) or IP address (e.g. 123.45.6.7)\""
      },
      {
        "sha": "93470180374ed067441d74f63f21ccd783d23bc4",
        "filename": "locale/it/LC_MESSAGES/bitcoin.mo",
        "status": "modified",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/it/LC_MESSAGES/bitcoin.mo",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/it/LC_MESSAGES/bitcoin.mo",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/locale/it/LC_MESSAGES/bitcoin.mo?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303"
      },
      {
        "sha": "cf13239a1b87908c284ea8b017669f29ec708c12",
        "filename": "locale/it/LC_MESSAGES/bitcoin.po",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/it/LC_MESSAGES/bitcoin.po",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/it/LC_MESSAGES/bitcoin.po",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/locale/it/LC_MESSAGES/bitcoin.po?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -705,7 +705,7 @@ msgid \"\"\n \"\\n\"\n \"This product includes software developed by the OpenSSL Project for use in the \\n\"\n \"OpenSSL Toolkit (http://www.openssl.org/) and cryptographic software written by \\n\"\n-\"Eric Young (eay@cryptsoft.com).\"\n+\"Eric Young (eay@cryptsoft.com) and UPnP software written by Thomas Bernard.\"\n msgstr \"\"\n \"Copyright (c) 2009-2010 Bitcoin Developers\\n\"\n \"\\n\"\n@@ -714,9 +714,9 @@ msgstr \"\"\n \"Distribuito sotto la licenza software MIT/X11, guarda il file license.txt\\n\"\n \"incluso oppure su http://www.opensource.org/licenses/mit-license.php.\\n\"\n \"\\n\"\n-\"Questo prodoto include software sviluppato dal progetto OpenSSL per\\n\"\n+\"Questo prodotto include software sviluppato dal progetto OpenSSL per\\n\"\n \"l'uso del (http://www.openssl.org/) e il software criptografico scritto\\n\"\n-\"da Eric Young (eay@cryptsoft.com).\"\n+\"da Eric Young (eay@cryptsoft.com) e UPnP software scritto da Thomas Bernard.\"\n \n #: ../../../uibase.cpp:619\n msgid \"Enter a Bitcoin address (e.g. 1NS17iag9jJgTHD1VXjvLCEnZuQ3rJED9L) or IP address (e.g. 123.45.6.7)\""
      },
      {
        "sha": "11a547e411c66c81576f0e073cc4fbe78827d8b4",
        "filename": "locale/nl/LC_MESSAGES/bitcoin.mo",
        "status": "modified",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/nl/LC_MESSAGES/bitcoin.mo",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/nl/LC_MESSAGES/bitcoin.mo",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/locale/nl/LC_MESSAGES/bitcoin.mo?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303"
      },
      {
        "sha": "2e30388dba369a4a9167fd7acda98248fdf7f3c5",
        "filename": "locale/nl/LC_MESSAGES/bitcoin.po",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/nl/LC_MESSAGES/bitcoin.po",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/nl/LC_MESSAGES/bitcoin.po",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/locale/nl/LC_MESSAGES/bitcoin.po?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -706,7 +706,7 @@ msgid \"\"\n \"\\n\"\n \"This product includes software developed by the OpenSSL Project for use in the \\n\"\n \"OpenSSL Toolkit (http://www.openssl.org/) and cryptographic software written by \\n\"\n-\"Eric Young (eay@cryptsoft.com).\"\n+\"Eric Young (eay@cryptsoft.com) and UPnP software written by Thomas Bernard.\"\n msgstr \"\"\n \"Copyright (c) 2009-2011 Bitcoin-ontwikkelaars\\n\"\n \"\\n\"\n@@ -717,7 +717,8 @@ msgstr \"\"\n \"\\n\"\n \"Dit product bevat software ontwikkeld door het OpenSSL project for gebruik \\n\"\n \"in de OpenSSL Toolkit (http://www.openssl.org/), en cryptografische \\n\"\n-\"software geschreven door Eric Young (eay@cryptsoft.com).\"\n+\"software geschreven door Eric Young (eay@cryptsoft.com)) en UPnP software geschreven\\n\"\n+\"door Thomas Bernard.\"\n \n #: ../../../uibase.cpp:619\n msgid \"Enter a Bitcoin address (e.g. 1NS17iag9jJgTHD1VXjvLCEnZuQ3rJED9L) or IP address (e.g. 123.45.6.7)\""
      },
      {
        "sha": "20e100f578d4effd13e14dfd43061c9b24b2be25",
        "filename": "locale/pt/LC_MESSAGES/bitcoin.mo",
        "status": "modified",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/pt/LC_MESSAGES/bitcoin.mo",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/pt/LC_MESSAGES/bitcoin.mo",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/locale/pt/LC_MESSAGES/bitcoin.mo?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303"
      },
      {
        "sha": "9bf193e19bb62268dec37223c1deae7299b03a35",
        "filename": "locale/pt/LC_MESSAGES/bitcoin.po",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/pt/LC_MESSAGES/bitcoin.po",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/pt/LC_MESSAGES/bitcoin.po",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/locale/pt/LC_MESSAGES/bitcoin.po?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -705,7 +705,7 @@ msgid \"\"\n \"\\n\"\r\n \"This product includes software developed by the OpenSSL Project for use in the \\n\"\r\n \"OpenSSL Toolkit (http://www.openssl.org/) and cryptographic software written by \\n\"\r\n-\"Eric Young (eay@cryptsoft.com).\"\r\n+\"Eric Young (eay@cryptsoft.com) and UPnP software written by Thomas Bernard.\"\r\n msgstr \"\"\r\n \"Copyright (c) 2009-2010 Bitcoin Developers\\n\"\r\n \"\\n\"\r\n@@ -716,7 +716,8 @@ msgstr \"\"\n \"http://www.opensource.org/licenses/mit-license.php.\\n\"\r\n \"Este producto inclui software desenvolvido pelo projecto OpenSSL, para \\n\"\r\n \"ser utilizado no OpenSSL Toolkit (http://www.openssl.org) e software de \\n\"\r\n-\"criptografia desenvolvido por Eric Young (eay@cryptsoft.com).\"\r\n+\"criptografia desenvolvido por Eric Young (eay@cryptsoft.com)\\n\"\r\n+\"e UPnP software escrito por Thomas Bernard.\"\r\n \r\n #: ../../../uibase.cpp:619\r\n msgid \"Enter a Bitcoin address (e.g. 1NS17iag9jJgTHD1VXjvLCEnZuQ3rJED9L) or IP address (e.g. 123.45.6.7)\"\r"
      },
      {
        "sha": "b44c10ad47263ed7130b28abb929ee457524bafe",
        "filename": "locale/ru/LC_MESSAGES/bitcoin.mo",
        "status": "modified",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/ru/LC_MESSAGES/bitcoin.mo",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/ru/LC_MESSAGES/bitcoin.mo",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/locale/ru/LC_MESSAGES/bitcoin.mo?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303"
      },
      {
        "sha": "5a87259c9ebcc905610715e3a31d932cc3cfcf92",
        "filename": "locale/ru/LC_MESSAGES/bitcoin.po",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/ru/LC_MESSAGES/bitcoin.po",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/locale/ru/LC_MESSAGES/bitcoin.po",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/locale/ru/LC_MESSAGES/bitcoin.po?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -769,7 +769,7 @@ msgid \"\"\n \"\\n\"\n \"This product includes software developed by the OpenSSL Project for use in the \\n\"\n \"OpenSSL Toolkit (http://www.openssl.org/) and cryptographic software written by \\n\"\n-\"Eric Young (eay@cryptsoft.com).\"\n+\"Eric Young (eay@cryptsoft.com) and UPnP software written by Thomas Bernard.\"\n msgstr \"\"\n \"\u0412\u0441\u0435 \u043f\u0440\u0430\u0432\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b (c) 2009-2010 Bitcoin Developers\\n\"\n \"\\n\"\n@@ -780,7 +780,7 @@ msgstr \"\"\n \"\\n\"\n \"\u042d\u0442\u043e\u0442 \u043f\u0440\u043e\u0434\u0443\u043a\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u041f\u041e, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u043c OpenSSL \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0432\\n\"\n \"OpenSSL Toolkit (http://www.openssl.org/), \u0438 \u043a\u0440\u0438\u043f\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u041f\u041e, \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043d\u043e\u0435\\n\"\n-\"Eric Young (eay@cryptsoft.com).\"\n+\"Eric Young (eay@cryptsoft.com) \u0438 UPnP \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u043e\u0433\u043e \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f, \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043d\u043e\u0433\u043e Thomas Bernard.\"\n \n #: ../../../uibase.cpp:613\n msgid \"Enter a Bitcoin address (e.g. 1NS17iag9jJgTHD1VXjvLCEnZuQ3rJED9L) or IP address (e.g. 123.45.6.7)\""
      },
      {
        "sha": "c45f85837cbc5f6c899710c89180fe6774472ebd",
        "filename": "main.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/main.cpp?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -65,6 +65,14 @@ int fLimitProcessors = false;\n int nLimitProcessors = 1;\n int fMinimizeToTray = true;\n int fMinimizeOnClose = true;\n+#ifdef USE_UPNP\n+#if USE_UPNP\n+int fUseUPnP = true;\n+#else\n+int fUseUPnP = false;\n+#endif\n+#endif\n+\n \n \n "
      },
      {
        "sha": "71fbdfd3a1253e3cf4b2cb0a67c19d11d2150333",
        "filename": "main.h",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/main.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/main.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/main.h?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -22,6 +22,11 @@ static const int64 CENT = 1000000;\n static const int64 MAX_MONEY = 21000000 * COIN;\n inline bool MoneyRange(int64 nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\n static const int COINBASE_MATURITY = 100;\n+#ifdef USE_UPNP\n+static const int fHaveUPnP = true;\n+#else\n+static const int fHaveUPnP = false;\n+#endif\n \n \n \n@@ -55,6 +60,7 @@ extern int fLimitProcessors;\n extern int nLimitProcessors;\n extern int fMinimizeToTray;\n extern int fMinimizeOnClose;\n+extern int fUseUPnP;\n \n \n "
      },
      {
        "sha": "1969ecc97173a8d51702dbfb7d53381481d3c17e",
        "filename": "makefile.mingw",
        "status": "modified",
        "additions": 11,
        "deletions": 2,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/makefile.mingw",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/makefile.mingw",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/makefile.mingw?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -2,6 +2,7 @@\n # Distributed under the MIT/X11 software license, see the accompanying\n # file license.txt or http://www.opensource.org/licenses/mit-license.php.\n \n+USE_UPNP:=0\n \n INCLUDEPATHS= \\\n  -I\"C:\\boost-1.43.0-mgw\" \\\n@@ -25,15 +26,23 @@ LIBS= \\\n  -l boost_program_options-mgw45-mt-s-1_43 \\\n  -l boost_thread-mgw45-mt-s-1_43 \\\n  -l db_cxx \\\n- -l eay32 \\\n- -l kernel32 -l user32 -l gdi32 -l comdlg32 -l winspool -l winmm -l shell32 -l comctl32 -l ole32 -l oleaut32 -l uuid -l rpcrt4 -l advapi32 -l ws2_32 -l shlwapi\n+ -l eay32\n \n DEFS=-DWIN32 -D__WXMSW__ -D_WINDOWS -DNOPCH\n DEBUGFLAGS=-g -D__WXDEBUG__\n CFLAGS=-mthreads -O2 -w -Wno-invalid-offsetof -Wformat $(DEBUGFLAGS) $(DEFS) $(INCLUDEPATHS)\n HEADERS=headers.h strlcpy.h serialize.h uint256.h util.h key.h bignum.h base58.h \\\n     script.h db.h net.h irc.h main.h rpc.h uibase.h ui.h noui.h init.h\n \n+ifdef USE_UPNP\n+ INCLUDEPATHS += -I\"C:\\upnpc-exe-win32-20110215\"\n+ LIBPATHS += -L\"C:\\upnpc-exe-win32-20110215\"\n+ LIBS += -l miniupnpc -l iphlpapi\n+ DEFS += -DSTATICLIB -DUSE_UPNP=$(USE_UPNP)\n+endif\n+\n+LIBS += -l kernel32 -l user32 -l gdi32 -l comdlg32 -l winspool -l winmm -l shell32 -l comctl32 -l ole32 -l oleaut32 -l uuid -l rpcrt4 -l advapi32 -l ws2_32 -l shlwapi\n+\n OBJS= \\\n     obj/util.o \\\n     obj/script.o \\"
      },
      {
        "sha": "4836ea3f4fc3f4e7ae37c6b7bfc9ff8625156473",
        "filename": "makefile.osx",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/makefile.osx",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/makefile.osx",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/makefile.osx?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -16,6 +16,8 @@ LIBPATHS= \\\n \n WXLIBS=$(shell $(DEPSDIR)/bin/wx-config --libs --static)\n \n+USE_UPNP:=0\n+\n LIBS= -dead_strip \\\n  $(DEPSDIR)/lib/libdb_cxx-4.8.a \\\n  $(DEPSDIR)/lib/libboost_system.a \\\n@@ -44,6 +46,11 @@ OBJS= \\\n     obj/init.o \\\n     cryptopp/obj/sha.o \\\n     cryptopp/obj/cpu.o\n+\n+ifdef USE_UPNP\n+\tLIBS += $(DEPSDIR)/lib/libminiupnpc.a\n+\tDEFS += -DUSE_UPNP=$(USE_UPNP)\n+endif\n \t\n \n all: bitcoin"
      },
      {
        "sha": "61b925e3bc6d321868898a8d9730526f0a8b01b6",
        "filename": "makefile.unix",
        "status": "modified",
        "additions": 13,
        "deletions": 2,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/makefile.unix",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/makefile.unix",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/makefile.unix?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -8,6 +8,10 @@ WXINCLUDEPATHS=$(shell wx-config --cxxflags)\n \n WXLIBS=$(shell wx-config --libs)\n \n+USE_UPNP:=0\n+\n+DEFS=-DNOPCH -DFOURWAYSSE2 -DUSE_SSL\n+\n # for boost 1.37, add -mt to the boost libraries\n LIBS= \\\n  -Wl,-Bstatic \\\n@@ -17,13 +21,20 @@ LIBS= \\\n    -l boost_thread \\\n    -l db_cxx \\\n    -l ssl \\\n-   -l crypto \\\n+   -l crypto\n+\n+ifdef USE_UPNP\n+\tLIBS += -l miniupnpc\n+\tDEFS += -DUSE_UPNP=$(USE_UPNP)\n+endif\n+\n+LIBS+= \\\n  -Wl,-Bdynamic \\\n    -l gthread-2.0 \\\n    -l z \\\n    -l dl\n \n-DEFS=-DNOPCH -DFOURWAYSSE2 -DUSE_SSL\n+\n DEBUGFLAGS=-g -D__WXDEBUG__\n CXXFLAGS=-O2 -Wno-invalid-offsetof -Wformat $(DEBUGFLAGS) $(DEFS)\n HEADERS=headers.h strlcpy.h serialize.h uint256.h util.h key.h bignum.h base58.h \\"
      },
      {
        "sha": "2e8d4f48a04cfe1db0518e226df41f9b329b042d",
        "filename": "net.cpp",
        "status": "modified",
        "additions": 123,
        "deletions": 1,
        "changes": 124,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/net.cpp?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -4,11 +4,21 @@\n \n #include \"headers.h\"\n \n+#ifdef USE_UPNP\n+#include <miniupnpc/miniwget.h>\n+#include <miniupnpc/miniupnpc.h>\n+#include <miniupnpc/upnpcommands.h>\n+#include <miniupnpc/upnperrors.h>\n+#endif\n+\n static const int MAX_OUTBOUND_CONNECTIONS = 8;\n \n void ThreadMessageHandler2(void* parg);\n void ThreadSocketHandler2(void* parg);\n void ThreadOpenConnections2(void* parg);\n+#ifdef USE_UPNP\n+void ThreadMapPort2(void* parg);\n+#endif\n bool OpenNetworkConnection(const CAddress& addrConnect);\n \n \n@@ -857,6 +867,109 @@ void ThreadSocketHandler2(void* parg)\n \n \n \n+#ifdef USE_UPNP\n+void ThreadMapPort(void* parg)\n+{\n+    IMPLEMENT_RANDOMIZE_STACK(ThreadMapPort(parg));\n+    try\n+    {\n+        vnThreadsRunning[5]++;\n+        ThreadMapPort2(parg);\n+        vnThreadsRunning[5]--;\n+    }\n+    catch (std::exception& e) {\n+        vnThreadsRunning[5]--;\n+        PrintException(&e, \"ThreadMapPort()\");\n+    } catch (...) {\n+        vnThreadsRunning[5]--;\n+        PrintException(NULL, \"ThreadMapPort()\");\n+    }\n+    printf(\"ThreadMapPort exiting\\n\");\n+}\n+\n+void ThreadMapPort2(void* parg)\n+{\n+    printf(\"ThreadMapPort started\\n\");\n+\n+    char port[6];\n+    sprintf(port, \"%d\", ntohs(GetDefaultPort()));\n+\n+    const char * rootdescurl = 0;\n+    const char * multicastif = 0;\n+    const char * minissdpdpath = 0;\n+    struct UPNPDev * devlist = 0;\n+    char lanaddr[64];\n+\n+    devlist = upnpDiscover(2000, multicastif, minissdpdpath, 0);\n+\n+    struct UPNPUrls urls;\n+    struct IGDdatas data;\n+    int r;\n+\n+    if (UPNP_GetValidIGD(devlist, &urls, &data, lanaddr, sizeof(lanaddr)) == 1)\n+    {\n+        char intClient[16];\n+        char intPort[6];\n+\n+#ifndef __WXMSW__\n+        r = UPNP_AddPortMapping(urls.controlURL, data.first.servicetype,\n+\t                        port, port, lanaddr, 0, \"TCP\", 0);\n+#else\n+        r = UPNP_AddPortMapping(urls.controlURL, data.first.servicetype,\n+\t                        port, port, lanaddr, 0, \"TCP\", 0, \"0\");\n+#endif\n+        if(r!=UPNPCOMMAND_SUCCESS)\n+            printf(\"AddPortMapping(%s, %s, %s) failed with code %d (%s)\\n\",\n+                port, port, lanaddr, r, strupnperror(r));\n+        else\n+            printf(\"UPnP Port Mapping successful.\\n\");\n+        loop {\n+            if (fShutdown || !fUseUPnP)\n+            {\n+                r = UPNP_DeletePortMapping(urls.controlURL, data.first.servicetype, port, \"TCP\", 0);\n+                printf(\"UPNP_DeletePortMapping() returned : %d\\n\", r);\n+                freeUPNPDevlist(devlist); devlist = 0;\n+                FreeUPNPUrls(&urls);\n+                return;\n+            }\n+            Sleep(2000);\n+        }\n+    } else {\n+        printf(\"No valid UPnP IGDs found\\n\");\n+        freeUPNPDevlist(devlist); devlist = 0;\n+        FreeUPNPUrls(&urls);\n+        loop {\n+            if (fShutdown)\n+                return;\n+            Sleep(2000);\n+        }\n+    }\n+}\n+\n+void MapPort(bool fMapPort)\n+{\n+    if (fUseUPnP != fMapPort)\n+    {\n+        fUseUPnP = fMapPort;\n+        CWalletDB().WriteSetting(\"fUseUPnP\", fUseUPnP);\n+    }\n+    if (fUseUPnP && vnThreadsRunning[5] < 1)\n+    {\n+        if (!CreateThread(ThreadMapPort, NULL))\n+            printf(\"Error: ThreadMapPort(ThreadMapPort) failed\\n\");\n+    }\n+}\n+#endif\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n static const char *strDNSSeed[] = {\n     \"bitseed.xf2.org\",\n };\n@@ -1409,6 +1522,10 @@ void StartNode(void* parg)\n     // Start threads\n     //\n \n+    // Map ports with UPnP\n+    if (fHaveUPnP)\n+        MapPort(fUseUPnP);\n+\n     // Get addresses from IRC and advertise ours\n     if (!CreateThread(ThreadIRCSeed, NULL))\n         printf(\"Error: CreateThread(ThreadIRCSeed) failed\\n\");\n@@ -1434,7 +1551,11 @@ bool StopNode()\n     fShutdown = true;\n     nTransactionsUpdated++;\n     int64 nStart = GetTime();\n-    while (vnThreadsRunning[0] > 0 || vnThreadsRunning[2] > 0 || vnThreadsRunning[3] > 0 || vnThreadsRunning[4] > 0)\n+    while (vnThreadsRunning[0] > 0 || vnThreadsRunning[2] > 0 || vnThreadsRunning[3] > 0 || vnThreadsRunning[4] > 0\n+#ifdef USE_UPNP\n+        || vnThreadsRunning[5] > 0\n+#endif\n+    )\n     {\n         if (GetTime() - nStart > 20)\n             break;\n@@ -1445,6 +1566,7 @@ bool StopNode()\n     if (vnThreadsRunning[2] > 0) printf(\"ThreadMessageHandler still running\\n\");\n     if (vnThreadsRunning[3] > 0) printf(\"ThreadBitcoinMiner still running\\n\");\n     if (vnThreadsRunning[4] > 0) printf(\"ThreadRPCServer still running\\n\");\n+    if (fHaveUPnP && vnThreadsRunning[5] > 0) printf(\"ThreadMapPort still running\\n\");\n     while (vnThreadsRunning[2] > 0 || vnThreadsRunning[4] > 0)\n         Sleep(20);\n     Sleep(50);"
      },
      {
        "sha": "b3bd74da474f6730c02af8d69d4b3383b9d457e2",
        "filename": "net.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/net.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/net.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/net.h?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -30,6 +30,7 @@ CNode* FindNode(unsigned int ip);\n CNode* ConnectNode(CAddress addrConnect, int64 nTimeout=0);\n void AbandonRequests(void (*fn)(void*, CDataStream&), void* param1);\n bool AnySubscribed(unsigned int nChannel);\n+void MapPort(bool fMapPort);\n void DNSAddressSeed();\n bool BindListenPort(string& strError=REF(string()));\n void StartNode(void* parg);"
      },
      {
        "sha": "2d5594d2ee0c01c1d12380d9c7854517acdf2860",
        "filename": "ui.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/ui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/ui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ui.cpp?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -1665,6 +1665,10 @@ COptionsDialog::COptionsDialog(wxWindow* parent) : COptionsDialogBase(parent)\n     m_checkBoxStartOnSystemStartup->SetValue(fTmpStartOnSystemStartup = GetStartOnSystemStartup());\n     m_checkBoxMinimizeToTray->SetValue(fMinimizeToTray);\n     m_checkBoxMinimizeOnClose->SetValue(fMinimizeOnClose);\n+    if (fHaveUPnP)\n+        m_checkBoxUseUPnP->SetValue(fUseUPnP);\n+    else\n+        m_checkBoxUseUPnP->Enable(false);\n     m_checkBoxUseProxy->SetValue(fUseProxy);\n     m_textCtrlProxyIP->Enable(fUseProxy);\n     m_textCtrlProxyPort->Enable(fUseProxy);\n@@ -1784,6 +1788,13 @@ void COptionsDialog::OnButtonApply(wxCommandEvent& event)\n         walletdb.WriteSetting(\"fMinimizeOnClose\", fMinimizeOnClose);\n     }\n \n+    if (fHaveUPnP && fUseUPnP != m_checkBoxUseUPnP->GetValue())\n+    {\n+        fUseUPnP = m_checkBoxUseUPnP->GetValue();\n+        walletdb.WriteSetting(\"fUseUPnP\", fUseUPnP);\n+        MapPort(fUseUPnP);\n+    }\n+\n     fUseProxy = m_checkBoxUseProxy->GetValue();\n     walletdb.WriteSetting(\"fUseProxy\", fUseProxy);\n "
      },
      {
        "sha": "41be5d75278280fcf2bb792a400ad7a41e2ba8bb",
        "filename": "uibase.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/uibase.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/uibase.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/uibase.cpp?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -371,6 +371,9 @@ COptionsDialogBase::COptionsDialogBase( wxWindow* parent, wxWindowID id, const w\n \tm_checkBoxMinimizeToTray = new wxCheckBox( m_panelMain, wxID_ANY, _(\"&Minimize to the tray instead of the taskbar\"), wxDefaultPosition, wxDefaultSize, 0 );\n \tbSizer69->Add( m_checkBoxMinimizeToTray, 0, wxALL, 5 );\n \t\n+\tm_checkBoxUseUPnP = new wxCheckBox( m_panelMain, wxID_ANY, _(\"Map port using &UPnP\"), wxDefaultPosition, wxDefaultSize, 0 );\n+\tbSizer69->Add( m_checkBoxUseUPnP, 0, wxALL, 5 );\n+\t\n \tm_checkBoxMinimizeOnClose = new wxCheckBox( m_panelMain, wxID_ANY, _(\"M&inimize to the tray on close\"), wxDefaultPosition, wxDefaultSize, 0 );\n \tbSizer69->Add( m_checkBoxMinimizeOnClose, 0, wxALL|wxALIGN_CENTER_VERTICAL, 5 );\n \t\n@@ -544,7 +547,7 @@ CAboutDialogBase::CAboutDialogBase( wxWindow* parent, wxWindowID id, const wxStr\n \t\n \tbSizer631->Add( 0, 4, 0, wxEXPAND, 5 );\n \t\n-\tm_staticTextMain = new wxStaticText( this, wxID_ANY, _(\"Copyright (c) 2009-2011 Bitcoin Developers\\n\\nThis is experimental software.\\n\\nDistributed under the MIT/X11 software license, see the accompanying file \\nlicense.txt or http://www.opensource.org/licenses/mit-license.php.\\n\\nThis product includes software developed by the OpenSSL Project for use in the \\nOpenSSL Toolkit (http://www.openssl.org/) and cryptographic software written by \\nEric Young (eay@cryptsoft.com).\"), wxDefaultPosition, wxDefaultSize, 0 );\n+\tm_staticTextMain = new wxStaticText( this, wxID_ANY, _(\"Copyright (c) 2009-2011 Bitcoin Developers\\n\\nThis is experimental software.\\n\\nDistributed under the MIT/X11 software license, see the accompanying file \\nlicense.txt or http://www.opensource.org/licenses/mit-license.php.\\n\\nThis product includes software developed by the OpenSSL Project for use in the \\nOpenSSL Toolkit (http://www.openssl.org/) and cryptographic software written by \\nEric Young (eay@cryptsoft.com) and UPnP software written by Thomas Bernard.\"), wxDefaultPosition, wxDefaultSize, 0 );\n \tm_staticTextMain->Wrap( -1 );\n \tbSizer631->Add( m_staticTextMain, 0, wxALL, 5 );\n \t"
      },
      {
        "sha": "c5da8f50816b632dd2c12476658d33250501fd04",
        "filename": "uibase.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/uibase.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/uibase.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/uibase.h?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -170,6 +170,7 @@ class COptionsDialogBase : public wxDialog\n \t\twxStaticText* m_staticText35;\n \t\twxCheckBox* m_checkBoxStartOnSystemStartup;\n \t\twxCheckBox* m_checkBoxMinimizeToTray;\n+\t\twxCheckBox* m_checkBoxUseUPnP;\n \t\twxCheckBox* m_checkBoxMinimizeOnClose;\n \t\twxCheckBox* m_checkBoxUseProxy;\n \t\t"
      },
      {
        "sha": "d55566eefc5f708a460897525f1280f8098eee29",
        "filename": "uiproject.fbp",
        "status": "modified",
        "additions": 57,
        "deletions": 1,
        "changes": 58,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/uiproject.fbp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8bb5edc1c9054d835ef79c9f1ab3e021b0693303/uiproject.fbp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/uiproject.fbp?ref=8bb5edc1c9054d835ef79c9f1ab3e021b0693303",
        "patch": "@@ -2122,6 +2122,62 @@\n                                                         <event name=\"OnUpdateUI\"></event>\r\n                                                     </object>\r\n                                                 </object>\r\n+                                                <object class=\"sizeritem\" expanded=\"1\">\r\n+                                                    <property name=\"border\">5</property>\r\n+                                                    <property name=\"flag\">wxALL</property>\r\n+                                                    <property name=\"proportion\">0</property>\r\n+                                                    <object class=\"wxCheckBox\" expanded=\"1\">\r\n+                                                        <property name=\"bg\"></property>\r\n+                                                        <property name=\"checked\">0</property>\r\n+                                                        <property name=\"context_help\"></property>\r\n+                                                        <property name=\"enabled\">1</property>\r\n+                                                        <property name=\"fg\"></property>\r\n+                                                        <property name=\"font\"></property>\r\n+                                                        <property name=\"hidden\">0</property>\r\n+                                                        <property name=\"id\">wxID_ANY</property>\r\n+                                                        <property name=\"label\">Map port using &amp;UPnP</property>\r\n+                                                        <property name=\"maximum_size\"></property>\r\n+                                                        <property name=\"minimum_size\"></property>\r\n+                                                        <property name=\"name\">m_checkBoxUseUPnP</property>\r\n+                                                        <property name=\"permission\">protected</property>\r\n+                                                        <property name=\"pos\"></property>\r\n+                                                        <property name=\"size\"></property>\r\n+                                                        <property name=\"style\"></property>\r\n+                                                        <property name=\"subclass\"></property>\r\n+                                                        <property name=\"tooltip\"></property>\r\n+                                                        <property name=\"validator_data_type\"></property>\r\n+                                                        <property name=\"validator_style\">wxFILTER_NONE</property>\r\n+                                                        <property name=\"validator_type\">wxDefaultValidator</property>\r\n+                                                        <property name=\"validator_variable\"></property>\r\n+                                                        <property name=\"window_extra_style\"></property>\r\n+                                                        <property name=\"window_name\"></property>\r\n+                                                        <property name=\"window_style\"></property>\r\n+                                                        <event name=\"OnChar\"></event>\r\n+                                                        <event name=\"OnCheckBox\"></event>\r\n+                                                        <event name=\"OnEnterWindow\"></event>\r\n+                                                        <event name=\"OnEraseBackground\"></event>\r\n+                                                        <event name=\"OnKeyDown\"></event>\r\n+                                                        <event name=\"OnKeyUp\"></event>\r\n+                                                        <event name=\"OnKillFocus\"></event>\r\n+                                                        <event name=\"OnLeaveWindow\"></event>\r\n+                                                        <event name=\"OnLeftDClick\"></event>\r\n+                                                        <event name=\"OnLeftDown\"></event>\r\n+                                                        <event name=\"OnLeftUp\"></event>\r\n+                                                        <event name=\"OnMiddleDClick\"></event>\r\n+                                                        <event name=\"OnMiddleDown\"></event>\r\n+                                                        <event name=\"OnMiddleUp\"></event>\r\n+                                                        <event name=\"OnMotion\"></event>\r\n+                                                        <event name=\"OnMouseEvents\"></event>\r\n+                                                        <event name=\"OnMouseWheel\"></event>\r\n+                                                        <event name=\"OnPaint\"></event>\r\n+                                                        <event name=\"OnRightDClick\"></event>\r\n+                                                        <event name=\"OnRightDown\"></event>\r\n+                                                        <event name=\"OnRightUp\"></event>\r\n+                                                        <event name=\"OnSetFocus\"></event>\r\n+                                                        <event name=\"OnSize\"></event>\r\n+                                                        <event name=\"OnUpdateUI\"></event>\r\n+                                                    </object>\r\n+                                                </object>\r\n                                                 <object class=\"sizeritem\" expanded=\"1\">\r\n                                                     <property name=\"border\">5</property>\r\n                                                     <property name=\"flag\">wxALL|wxALIGN_CENTER_VERTICAL</property>\r\n@@ -3345,7 +3401,7 @@\n                                                 <property name=\"font\"></property>\r\n                                                 <property name=\"hidden\">0</property>\r\n                                                 <property name=\"id\">wxID_ANY</property>\r\n-                                                <property name=\"label\">Copyright (c) 2009-2011 Bitcoin Developers&#x0A;&#x0A;This is experimental software.&#x0A;&#x0A;Distributed under the MIT/X11 software license, see the accompanying file &#x0A;license.txt or http://www.opensource.org/licenses/mit-license.php.&#x0A;&#x0A;This product includes software developed by the OpenSSL Project for use in the &#x0A;OpenSSL Toolkit (http://www.openssl.org/) and cryptographic software written by &#x0A;Eric Young (eay@cryptsoft.com).</property>\r\n+                                                <property name=\"label\">Copyright (c) 2009-2011 Bitcoin Developers&#x0A;&#x0A;This is experimental software.&#x0A;&#x0A;Distributed under the MIT/X11 software license, see the accompanying file &#x0A;license.txt or http://www.opensource.org/licenses/mit-license.php.&#x0A;&#x0A;This product includes software developed by the OpenSSL Project for use in the &#x0A;OpenSSL Toolkit (http://www.openssl.org/) and cryptographic software written by &#x0A;Eric Young (eay@cryptsoft.com) and UPnP software written by Thomas Bernard.</property>\r\n                                                 <property name=\"maximum_size\"></property>\r\n                                                 <property name=\"minimum_size\"></property>\r\n                                                 <property name=\"name\">m_staticTextMain</property>\r"
      }
    ]
  }
]