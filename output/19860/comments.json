[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685761138",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#issuecomment-685761138",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19860",
    "id": 685761138,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTc2MTEzOA==",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?u=06eb9ae4f9b3f954056098860decccbf1340e40f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T14:07:46Z",
    "updated_at": "2020-09-02T14:07:46Z",
    "author_association": "MEMBER",
    "body": "Draft until #19724 is merged.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685761138/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685764141",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#issuecomment-685764141",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19860",
    "id": 685764141,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTc2NDE0MQ==",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?u=06eb9ae4f9b3f954056098860decccbf1340e40f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T14:12:38Z",
    "updated_at": "2020-09-02T14:14:03Z",
    "author_association": "MEMBER",
    "body": "There is an interesting overlap with #19858 (periodic BLOCK_RELAY conns to sync tips).\r\n\r\n I think those temporarily BLOCK_RELAY conns probably should be selected similarly to the existent new `BLOCK_RELAY` conns, meaning diversified by both `set_connected_full_relay` and `set_connected_block_relay`. If many of our peers are Sybils, it also would improve the chance of not connecting to the same netgroup.\r\n\r\nSimilarly to the work in this PR, I think we better select them as diverse as we can. If an attacker is capable to influence this selection, making it less diverse (by dropping one of the checks) won't really help neither with the robustness of these selected connections nor with their privacy.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685764141/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685812232",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#issuecomment-685812232",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19860",
    "id": 685812232,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTgxMjIzMg==",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T15:27:35Z",
    "updated_at": "2020-09-02T15:27:35Z",
    "author_association": "MEMBER",
    "body": "> Prevents BLOCK_RELAY connections from affecting our further full-relay peer selection, because otherwise, an attacker with sufficient ADDR-related capabilities may infer to which netgroups those (supposedly more private) connections belong.\r\n\r\nDo you have a way to model what an attacker's capability would need to be in order to deduce something like this?  On the face of it, it seems strange to me make this kind of peering behavior dependent of the order in which we connect peers (full-relay first or block-relay first), and in particular, my presumption would be that it's more important to aim for peer netgroup diversity (as a first-order solution to being eclipsed) than it is to worry about inference based on that diversity (which is a second-order concern with regards to eclipse attacks) -- but if the inference capability is strong then perhaps I'm mistaken in thinking that?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685812232/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685885260",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#issuecomment-685885260",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19860",
    "id": 685885260,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTg4NTI2MA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T17:27:14Z",
    "updated_at": "2021-10-16T13:47:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685885260/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/686305852",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#issuecomment-686305852",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19860",
    "id": 686305852,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NjMwNTg1Mg==",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?u=06eb9ae4f9b3f954056098860decccbf1340e40f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-03T07:20:01Z",
    "updated_at": "2020-09-03T07:22:26Z",
    "author_association": "MEMBER",
    "body": "@sdaftuar I agree that immediate diversity is more important than theoretical anti-inference. But since it's easy to get confused here, I want to point out that after the second commit:\r\n- *new* block relay conns are made with full diversity, same as before\r\n- *new* full relay conns are made distinct w.r.t. existing full relay conns\r\n\r\nThe difference is only that *existing* block relay conns don't affect *new* full relay conns.\r\n\r\nSo, like, just 2 of the existing peers, for now, won't participate in diversity enforcement. If we have more (say 8 block relay conns), we might introduce some randomness: like 4 conns are used to diversify new full conns, and 4 are hidden.\r\n\r\n>Do you have a way to model what an attacker's capability would need to be in order to deduce something like this?\r\n\r\nNo, not right now. I just assume an attacker can influence what our AddrMan has. The influence shouldn't even be that strong, they just have to force us to connect to a set of (given by them) peers on-demand with some probability.\r\n\r\nFor example, they exploited eviction and made us connect to them (via regular conns) exclusively. Now to eclipse us they have to find out about our block-relay-only conns and potentially disrupt those. May be feasible with these capabilities and enough protocol knowledge :)\r\nSince block-relay-only conns are created (sort of) specifically to handle scenarios like this, I wanna make them more robust.\r\n\r\n-----------------\r\n\r\nIf this is not convincing, I can drop the commit until when/if I can actually demostrate a feasible attack.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/686305852/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/686409962",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#issuecomment-686409962",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19860",
    "id": 686409962,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NjQwOTk2Mg==",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?u=06eb9ae4f9b3f954056098860decccbf1340e40f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-03T10:53:38Z",
    "updated_at": "2020-09-03T11:11:33Z",
    "author_association": "MEMBER",
    "body": "Added one more improvement: diversify by MANUAL connections (consider them regular full outbound). The privacy considerations I have for BLOCK_RELAY don't apply here because MANUAL are not particularly private... (since they support full relay)\r\n\r\nNot sure whether they should be excluded when considering `count_failure`, similarly to \"Having one persistent outbound peer probably means it's from our local network [...]\" reasoning in the comment.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/686409962/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/689359226",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#issuecomment-689359226",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19860",
    "id": 689359226,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTM1OTIyNg==",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?u=06eb9ae4f9b3f954056098860decccbf1340e40f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-09T07:16:51Z",
    "updated_at": "2020-09-09T07:16:51Z",
    "author_association": "MEMBER",
    "body": "This PR is now updated to be a non-controversial improvement:\r\n- don't diversify by ADDR_FETCH and FEELER\r\n- do diversify by MANUAL\r\n\r\nI dropped the part about BLOCK_RELAY diversity.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/689359226/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/909334620",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#issuecomment-909334620",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19860",
    "id": 909334620,
    "node_id": "IC_kwDOABII5842M1hc",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?u=06eb9ae4f9b3f954056098860decccbf1340e40f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-31T15:18:45Z",
    "updated_at": "2021-08-31T15:18:45Z",
    "author_association": "MEMBER",
    "body": "Sorry for being absent, I'll try to rebase it sometime soon.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/909334620/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/912111900",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#issuecomment-912111900",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19860",
    "id": 912111900,
    "node_id": "IC_kwDOABII5842Xbkc",
    "user": {
      "login": "amitiuttarwar",
      "id": 1500952,
      "node_id": "MDQ6VXNlcjE1MDA5NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1500952?u=f0ef8142342bcda68fe46c952d3c653456811ed4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitiuttarwar",
      "html_url": "https://github.com/amitiuttarwar",
      "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
      "following_url": "https://api.github.com/users/amitiuttarwar/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
      "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
      "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
      "events_url": "https://api.github.com/users/amitiuttarwar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-02T22:48:28Z",
    "updated_at": "2021-09-02T22:48:28Z",
    "author_association": "MEMBER",
    "body": "- concept ACK to removing netgroup influence of ADDR_FETCH & FEELER \r\n- OP says they \"are now not included in `count_failure` consideration (see new documentation)\" << what is this in reference to? is this a relic from a previous version of the PR? \r\n- unsure about including MANUAL peers for outbound diversity & don't see anything on this PR that explains why. can you share your reasoning?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/912111900/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/919132802",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#issuecomment-919132802",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19860",
    "id": 919132802,
    "node_id": "IC_kwDOABII5842yNqC",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?u=06eb9ae4f9b3f954056098860decccbf1340e40f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-14T13:07:22Z",
    "updated_at": "2021-09-14T13:07:22Z",
    "author_association": "MEMBER",
    "body": "@amitiuttarwar\r\n\r\n>OP says they \"are now not included in count_failure consideration (see new documentation)\" << what is this in reference to? is this a relic from a previous version of the PR?\r\n\r\nI don't even remember. Dropped this from the description. A lot of discussion in this PR, maybe worth opening a new one...\r\n\r\n>unsure about including MANUAL peers for outbound diversity & don't see anything on this PR that explains why. can you share your reasoning?\r\n\r\nI just think MANUAL is just no different from a regular outbound peer. If you have a MANUAL to netgroup XYZ, you probably don't want OUTBOUND_FULL_RELAY or whatever to XYZ either (previously we would allow this).\r\nNote, this does not limit MANUAL conns in any way.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/919132802/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482217837",
    "pull_request_review_id": 481013853,
    "id": 482217837,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjIxNzgzNw==",
    "diff_hunk": "@@ -861,6 +861,12 @@ class CNode\n         return m_conn_type == ConnectionType::INBOUND;\n     }\n \n+    /* Whether we send addr messages over this connection */\n+    bool RelayAddrsWithConn() const",
    "path": "src/net.h",
    "position": null,
    "original_position": 5,
    "commit_id": "aeec31d7b32b744fecb4115176a5d4e8586cdec2",
    "original_commit_id": "f26b0ddac590ac96e86fe043de744747e834ec0e",
    "user": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: Would be a bit clearer IMO to use the `Is` prefix or similar to distinguish between the interrogative and the imperative.",
    "created_at": "2020-09-02T16:51:39Z",
    "updated_at": "2020-09-24T10:26:54Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r482217837",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482217837"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r482217837"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482217837/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 907,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482222193",
    "pull_request_review_id": 481019518,
    "id": 482222193,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjIyMjE5Mw==",
    "diff_hunk": "@@ -1830,7 +1830,8 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         // Only connect out to one peer per network group (/16 for IPv4).\n         int nOutboundFullRelay = 0;\n         int nOutboundBlockRelay = 0;\n-        std::set<std::vector<unsigned char> > setConnected;\n+        std::set<std::vector<unsigned char> > set_connected_full_relay;\n+        std::set<std::vector<unsigned char> > set_connected_block_relay;",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "aeec31d7b32b744fecb4115176a5d4e8586cdec2",
    "original_commit_id": "c63c87507a7246183d8c055ea5fc54413ff38626",
    "user": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: I don't believe the `> >` construction is necessary anymore here. See other uses`<*>>` in the codebase.",
    "created_at": "2020-09-02T16:58:11Z",
    "updated_at": "2020-09-24T10:26:54Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r482222193",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482222193"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r482222193"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482222193/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1834,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482751269",
    "pull_request_review_id": 481549835,
    "id": 482751269,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjc1MTI2OQ==",
    "diff_hunk": "@@ -861,6 +861,12 @@ class CNode\n         return m_conn_type == ConnectionType::INBOUND;\n     }\n \n+    /* Whether we send addr messages over this connection */\n+    bool RelayAddrsWithConn() const",
    "path": "src/net.h",
    "position": null,
    "original_position": 5,
    "commit_id": "aeec31d7b32b744fecb4115176a5d4e8586cdec2",
    "original_commit_id": "f26b0ddac590ac96e86fe043de744747e834ec0e",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Not my work: see #19724 this is based on.",
    "created_at": "2020-09-03T07:03:40Z",
    "updated_at": "2020-09-24T10:26:54Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r482751269",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482751269"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r482751269"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482751269/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 907,
    "side": "RIGHT",
    "in_reply_to_id": 482217837
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483659033",
    "pull_request_review_id": 482697819,
    "id": 483659033,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzY1OTAzMw==",
    "diff_hunk": "@@ -1830,7 +1830,8 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         // Only connect out to one peer per network group (/16 for IPv4).\n         int nOutboundFullRelay = 0;\n         int nOutboundBlockRelay = 0;\n-        std::set<std::vector<unsigned char> > setConnected;\n+        std::set<std::vector<unsigned char>> set_connected_full_relay;\n+        std::set<std::vector<unsigned char>> set_connected_block_relay;",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "aeec31d7b32b744fecb4115176a5d4e8586cdec2",
    "original_commit_id": "229aba769e6fefb9d47c9bc3845418f3286ea8a4",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "On the threading side, it sounds to me a bit inefficient to recompute those sets for each test membership of a selected addr as we have to lock and iterate `vNodes` each time. A future improvement could be to cache them and only update as we add/drop nodes ?",
    "created_at": "2020-09-04T14:42:43Z",
    "updated_at": "2020-09-24T10:26:54Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r483659033",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483659033"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r483659033"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483659033/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1834,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483670784",
    "pull_request_review_id": 482697819,
    "id": 483670784,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzY3MDc4NA==",
    "diff_hunk": "@@ -1838,19 +1838,25 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n                 if (pnode->IsFullOutboundConn()) nOutboundFullRelay++;\n                 if (pnode->IsBlockOnlyConn()) nOutboundBlockRelay++;\n \n-                // Netgroups for inbound and manual peers are not excluded because our goal here\n-                // is to not use multiple of our limited outbound slots on a single netgroup\n-                // but inbound and manual peers do not use our outbound slots. Inbound peers\n-                // also have the added issue that they could be attacker controlled and used\n-                // to prevent us from connecting to particular hosts if we used them here.\n+                // Our goal here is to not use multiple of our limited outbound slots on a single netgroup.\n                 switch (pnode->m_conn_type) {\n                     case ConnectionType::INBOUND:\n+                        // Not an outbound slot.\n+                        // Additionally, they could be attacker controlled and used to prevent\n+                        // us from connecting to particular hosts if we used them here.",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 14,
    "commit_id": "aeec31d7b32b744fecb4115176a5d4e8586cdec2",
    "original_commit_id": "a7bc2eb07030fda62d860cf2a077d5e6163da6a9",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You can precise further exact caution we should have wrt to inbound netgroup diversity.\r\n\r\n\"If we enforce some netgroup diversity on our inbound slots in the future we should avoid to intersect this set of pinned netgroups with the outbound one. That way to avoid an attacker restraining diversity of potential outbound connections by already occupying a netgroup as an inbound\"",
    "created_at": "2020-09-04T14:54:56Z",
    "updated_at": "2020-09-24T10:26:54Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r483670784",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483670784"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r483670784"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483670784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1846,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483671287",
    "pull_request_review_id": 482697819,
    "id": 483671287,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzY3MTI4Nw==",
    "diff_hunk": "@@ -1845,7 +1845,6 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n                         // Not an outbound slot.\n                         // Additionally, they could be attacker controlled and used to prevent\n                         // us from connecting to particular hosts if we used them here.\n-                    case ConnectionType::MANUAL:\n                         // Manually selected, so should not affect our peer selection.",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "aeec31d7b32b744fecb4115176a5d4e8586cdec2",
    "original_commit_id": "b2e36fff58f33e4b8da5b080837fa3f2bdc314aa",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You should remove this comment.",
    "created_at": "2020-09-04T14:55:46Z",
    "updated_at": "2020-09-24T10:26:54Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r483671287",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483671287"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r483671287"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483671287/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1848,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484357785",
    "pull_request_review_id": 483463444,
    "id": 484357785,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDM1Nzc4NQ==",
    "diff_hunk": "@@ -1830,7 +1830,8 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         // Only connect out to one peer per network group (/16 for IPv4).\n         int nOutboundFullRelay = 0;\n         int nOutboundBlockRelay = 0;\n-        std::set<std::vector<unsigned char> > setConnected;\n+        std::set<std::vector<unsigned char>> set_connected_full_relay;\n+        std::set<std::vector<unsigned char>> set_connected_block_relay;",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "aeec31d7b32b744fecb4115176a5d4e8586cdec2",
    "original_commit_id": "229aba769e6fefb9d47c9bc3845418f3286ea8a4",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I would leave this for future improvements.",
    "created_at": "2020-09-07T10:57:01Z",
    "updated_at": "2020-09-24T10:26:54Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r484357785",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484357785"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r484357785"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484357785/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1834,
    "side": "RIGHT",
    "in_reply_to_id": 483659033
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484773801",
    "pull_request_review_id": 483948729,
    "id": 484773801,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc3MzgwMQ==",
    "diff_hunk": "@@ -1838,19 +1838,25 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n                 if (pnode->IsFullOutboundConn()) nOutboundFullRelay++;\n                 if (pnode->IsBlockOnlyConn()) nOutboundBlockRelay++;\n \n-                // Netgroups for inbound and manual peers are not excluded because our goal here\n-                // is to not use multiple of our limited outbound slots on a single netgroup\n-                // but inbound and manual peers do not use our outbound slots. Inbound peers\n-                // also have the added issue that they could be attacker controlled and used\n-                // to prevent us from connecting to particular hosts if we used them here.\n+                // Our goal here is to not use multiple of our limited outbound slots on a single netgroup.\n                 switch (pnode->m_conn_type) {\n                     case ConnectionType::INBOUND:\n+                        // Not an outbound slot.\n+                        // Additionally, they could be attacker controlled and used to prevent\n+                        // us from connecting to particular hosts if we used them here.",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 14,
    "commit_id": "aeec31d7b32b744fecb4115176a5d4e8586cdec2",
    "original_commit_id": "a7bc2eb07030fda62d860cf2a077d5e6163da6a9",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'd rather not keep comments w.r.t potential future improvements in the codebase.",
    "created_at": "2020-09-08T09:18:08Z",
    "updated_at": "2020-09-24T10:26:54Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r484773801",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484773801"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r484773801"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484773801/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1846,
    "side": "RIGHT",
    "in_reply_to_id": 483670784
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/489450880",
    "pull_request_review_id": 489643249,
    "id": 489450880,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQ1MDg4MA==",
    "diff_hunk": "@@ -1838,19 +1838,22 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n                 if (pnode->IsFullOutboundConn()) nOutboundFullRelay++;\n                 if (pnode->IsBlockOnlyConn()) nOutboundBlockRelay++;\n \n-                // Netgroups for inbound and manual peers are not excluded because our goal here\n-                // is to not use multiple of our limited outbound slots on a single netgroup\n-                // but inbound and manual peers do not use our outbound slots. Inbound peers\n-                // also have the added issue that they could be attacker controlled and used\n-                // to prevent us from connecting to particular hosts if we used them here.\n+                // Our goal here is to not use multiple of our limited outbound slots on a single netgroup.",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "aeec31d7b32b744fecb4115176a5d4e8586cdec2",
    "original_commit_id": "9c2babb8a4f7b243d8fe7e32085071f9cb25a99a",
    "user": {
      "login": "Zero-1729",
      "id": 23586626,
      "node_id": "MDQ6VXNlcjIzNTg2NjI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/23586626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Zero-1729",
      "html_url": "https://github.com/Zero-1729",
      "followers_url": "https://api.github.com/users/Zero-1729/followers",
      "following_url": "https://api.github.com/users/Zero-1729/following{/other_user}",
      "gists_url": "https://api.github.com/users/Zero-1729/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Zero-1729/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Zero-1729/subscriptions",
      "organizations_url": "https://api.github.com/users/Zero-1729/orgs",
      "repos_url": "https://api.github.com/users/Zero-1729/repos",
      "events_url": "https://api.github.com/users/Zero-1729/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Zero-1729/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: maybe consider rephrasing this to \n\n```\n// Our goal here is to not use multiple limited outbound slots on a single netgroup.\n```",
    "created_at": "2020-09-16T13:47:13Z",
    "updated_at": "2020-09-24T10:26:54Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r489450880",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/489450880"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r489450880"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/489450880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1841,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/708960012",
    "pull_request_review_id": 754819181,
    "id": 708960012,
    "node_id": "PRRC_kwDOABII584qQd8M",
    "diff_hunk": "@@ -2034,6 +2037,10 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n                 addr = addrman.Select();\n             }\n \n+            // The following checks are never applied to MANUAL and ADDR_FETCH,\n+            // because those connections are made elsewhere.\n+            assert(conn_type != ConnectionType::MANUAL && conn_type != ConnectionType::ADDR_FETCH);",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 37,
    "commit_id": "aeec31d7b32b744fecb4115176a5d4e8586cdec2",
    "original_commit_id": "d2c729632720f6cee67bedc661d49b967dc20506",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The following two variants are equivalent:\r\n\r\n```cpp\r\nassert(A && B);\r\n```\r\nvs\r\n```cpp\r\nassert(A);\r\nassert(B);\r\n```\r\n\r\nHowever if the first variant fails it would be impossible to say which one of `A` or `B` was false just by looking at the message (something like `assertion \"A && B\" failed`). With the second variant it is clear whether `A` or `B` was false.",
    "created_at": "2021-09-15T08:28:36Z",
    "updated_at": "2021-09-15T08:38:12Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r708960012",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/708960012"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19860#discussion_r708960012"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19860"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/708960012/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2042,
    "side": "RIGHT"
  }
]