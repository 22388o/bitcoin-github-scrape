DrahtBot,2021-05-05 00:20:34,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20966 (banman: save the banlist in a JSON format on disk by vasild)\n* #18689 (rpc: allow dumptxoutset to dump human-read",https://github.com/bitcoin/bitcoin/pull/21850#issuecomment-832338024,832338024,
laanwj,2021-05-10 12:51:03,"Code review and concept ACK 2ca79de5a92be6f5179c47a4e28bcb5109a3670b\nGetting the data directory seems common enough (as well as shared between all commands) to have on gArgs directly.\nAgree that ideally, the arguments would be passed in some way instead of part of a global, but this is at least a step forward toward that.",https://github.com/bitcoin/bitcoin/pull/21850#issuecomment-836660661,836660661,
kiminuo,2021-05-10 14:43:15,"> Just my opinion, but I do think since this is switching code to a new ArgsManager interface, it would be better for the interface to have explicit Base and Net methods instead of using the previous `bool net_specific=true` default argument. E.g. something like:\n\nI find this to be a very good suggestion. If this PR needs to be touched, I would do it in this PR. Otherwise, I would reserve that",https://github.com/bitcoin/bitcoin/pull/21850#issuecomment-836786273,836786273,
MarcoFalke,2021-05-10 14:57:49,Is there a reason to suffix the return type to the function name? Wouldn't `GetDataDirBase` and `GetDataDirNet` be sufficient?,https://github.com/bitcoin/bitcoin/pull/21850#issuecomment-836803565,836803565,
laanwj,2021-05-17 12:28:39,"> GetDataDirNetPath() would seem more readable than GetDataDirPath(true) at call sites,\n\nAgree. Boolean arguments tend to be bad for readability.",https://github.com/bitcoin/bitcoin/pull/21850#issuecomment-842284611,842284611,
kiminuo,2021-05-21 09:41:22,"> \n> \n> Code review ACK [2ca79de](https://github.com/bitcoin/bitcoin/commit/2ca79de5a92be6f5179c47a4e28bcb5109a3670b).\n> \n> Just my opinion, but I do think since this is switching code to a new ArgsManager interface, it would be better for the interface to have explicit Base and Net methods instead of using the previous `bool net_specific=true` default argument. E.g. something like:\n> \",https://github.com/bitcoin/bitcoin/pull/21850#issuecomment-845826044,845826044,
MarcoFalke,2021-05-24 06:18:31,"ACK 457515aab1042d842ee2ac6752ebf577ae6dee2b ðŸšŠ\n\n<details><summary>Show signature and timestamp</summary>\n\nSignature:\n\n```\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nACK 457515aab1042d842ee2ac6752ebf577ae6dee2b ðŸšŠ\n-----BEGIN PGP SIGNATURE-----\n\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUibDgwAqnNrcU52+PTrpofeW2/FPyAMU3psifPGg3tyNYmI379eF9mbdd",https://github.com/bitcoin/bitcoin/pull/21850#issuecomment-846780568,846780568,
ryanofsky,2021-05-21 17:36:56,"In commit ""Use `ArgsManager.GetDataDirBasePath()` and `ArgsManager.GetDataDirNetPath()` instead of `ArgsManager.GetDataDirPath(net_identifier)`"" (80dec1717258fd74ae32274affed71daf2949e46)\n\nIMO it would be a little better to keep the `GetDataDirPath` method and argumentless `GetDataDirPath()` calls unchanged in this commit, so the commit is smaller. Then the subsequent scripted-diff commit coul",https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637092957,637092957,src/test/util/setup_common.cpp
MarcoFalke,2021-05-22 09:39:00,"80dec1717258fd74ae32274affed71daf2949e46: The goal of this pull is to remove the `GetDataDir` function, but here you introduce more call sites?\n\nAlso, it could make sense to have this in a separate commit and move the other mechanical changes to a scripted diff",https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637381180,637381180,src/util/system.h
kiminuo,2021-05-22 12:31:21,"> [80dec17](https://github.com/bitcoin/bitcoin/commit/80dec1717258fd74ae32274affed71daf2949e46): The goal of this pull is to remove the `GetDataDir` function, but here you introduce more call sites?\n\n`GetDataDir(false)` actually calls `const fs::path& ArgsManager::GetDataDir(bool net_specific) const` (i.e. https://github.com/bitcoin/bitcoin/commit/80dec1717258fd74ae32274affed71daf2949e46#diff-",https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637398451,637398451,src/util/system.h
kiminuo,2021-05-22 13:22:27,"I have moved the tests changes to a separate commit (https://github.com/bitcoin/bitcoin/pull/21850/commits/7f5774c09affebc8837a4d117aae198d6fd6157a). \n\nThe PR differs in one trailing newline as an effect. So there is no code change, only git commit changes.\n\nedit: Hm, merge conflict apparently, will sort out later.\nedit: Hopefully, done.",https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637403602,637403602,src/test/util/setup_common.cpp
MarcoFalke,2021-05-22 16:06:19,d5f1458ea3821cdf87954f012bd1606659cf818f: This is adding trailing whitespace. Also the commit title is wrong. `Path` should be removed.,https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637420867,637420867,src/util/system.h
MarcoFalke,2021-05-22 16:18:27,162b12cbc1051dbb8a25f271d0def1985f7cd73e: This can be squashed into d5f1458ea3821cdf87954f012bd1606659cf818f?,https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637422179,637422179,src/util/system.cpp
MarcoFalke,2021-05-22 16:21:02,849ea30efe96b29ec3023d10b077ffb4f7fa0f86: According to clang-format this newline should be removed,https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637422437,637422437,src/util/system.h
kiminuo,2021-05-22 20:42:42,Would it make sense to add a clang-format linter to Cirrus or maybe to `lint-all.sh` to enforce proper code style? ,https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637448706,637448706,src/util/system.h
MarcoFalke,2021-05-23 06:03:54,"There are cases where clang-format is ""wrong"", so we can't enforce this. Maybe suggestions could make sense, but they might be noisy.",https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637492728,637492728,src/util/system.h
kiminuo,2021-05-23 06:40:38,"Yes, it should. I can do it if another touch is needed.",https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637496209,637496209,src/util/system.cpp
MarcoFalke,2021-05-23 06:47:44,My ACK is the only one. I am happy to re-ACK if you decide to push.,https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637497000,637497000,src/util/system.cpp
hebasto,2021-05-23 10:36:34,"This comment is not true now.\nAlso suggesting to move this comment update into the _""Add `ArgsManager.GetDataDirBase()` and `ArgsManager.GetDataDirNet()` as an intended replacement for `ArgsManager.GetDataDirPath(net_identifier)`""_ commit (babd5ed0204b01793c8c96d079d5304efdcc36e5).",https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637524751,637524751,src/util/system.h
kiminuo,2021-05-24 06:06:07,"Right. I'm not sure about wording though. \n\nMaybe any of the following variants:\n\n* `* @param net_specific Whether to append network identifier to base datadir first` or\n* `* @param net_specific Use network specific datadir variant` or \n* `* @param net_specific Forwarded either to ArgsManager.GetDataDirNet() or ArgsManager.GetDataDirBase()`",https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637709278,637709278,src/util/system.h
MarcoFalke,2021-05-24 06:20:04,"The `AbsPathForConfigVal` function should probably be made a method on `ArgsManager` anyway. The comment can be fixed up in the follow-up.\n\nHappy to re-ACK if you push, though.",https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637714380,637714380,src/util/system.h
hebasto,2021-05-24 06:23:54,The second one lgtm.,https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637715879,637715879,src/util/system.h
kiminuo,2021-05-24 08:32:50,"> The `AbsPathForConfigVal` function should probably be made a method on `ArgsManager` anyway. The comment can be fixed up in the follow-up.\n\nYes, it seems so.\n\n> The second one lgtm.\n\nDone. Thanks.",https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637780606,637780606,src/util/system.h
