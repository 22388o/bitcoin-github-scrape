[
  {
    "sha": "5598e9b0562285fe8260029a597d97271dbc1792",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1NTk4ZTliMDU2MjI4NWZlODI2MDAyOWE1OTdkOTcyNzFkYmMxNzky",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "github@jonasschnelli.ch",
        "date": "2019-06-13T20:19:03Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2019-06-18T17:51:45Z"
      },
      "message": "Add basic semaphore2 CI setup",
      "tree": {
        "sha": "f1fb056d09be3b7e96968cb07811e053ad5cdd1d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f1fb056d09be3b7e96968cb07811e053ad5cdd1d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5598e9b0562285fe8260029a597d97271dbc1792",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAl0JJLMACgkQHrd2uwPH\nki1VdhAA1OQDk1i/j04YZzM6dwtQt+qydMGcJAogXDfHeWEGbVTE8OX0YM1Ww/SH\nrkwrmEgF1oHjKT6AvP1cN/eAWVWCpAbSrLMox0FDkRu6nSotjKONnmUrp2a4vgOq\nUbk0/1Z/b3NFg3EyA5VvV3KJptHbhIVmCk0dthQmX0r6aXk1QWw8rybt+HOiVBvX\nNZEcvHbCU4TZ7QVHpHcbvlY800TBY/4TileI8tOIH8IkQNvaj4iDvNU8GlUZtqTs\n7S+lMLhNg0S0asOss35wKivI8c7URgcXo6EG19OoecRud73fZm6ept/MRr3ICixu\ny2B2QcWoIcHIODwiANZfxT548SCRmoI4rEt1z53y/N03VD515bUpLsaPkpIMmWof\nteCxJRYAEpKGbtzS55ItO/mZcnx95taopVdhwKc1PXTJ9C5v03HFDVTBnQD2rHyT\nc7qPK8RJj3/HAOSfYGlCErSrjbLuolhY+tc1QuEE8VrTM6/wkS9cgZNH+nT4DaRh\nLe+8PVYknQ27wBUNpnX8Qy9lfKZ4X6hJm1zamjleX7ju70gAenWogfFGeph3I4UE\nR9a2G7T++JOdcout7HWiUDEMpV+91Gu8LqOgT5yg8CqWQk1KvHUR6Ah1DcEXmGoJ\nyCs/afb2EwJrDL/wDwHJQzJSwiIFTpQV87fKWxtMCGucn/nmxcg=\n=0VFf\n-----END PGP SIGNATURE-----",
        "payload": "tree f1fb056d09be3b7e96968cb07811e053ad5cdd1d\nparent 7524376a81a1955f4da4adb23005f2122b18a270\nauthor Jonas Schnelli <github@jonasschnelli.ch> 1560457143 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1560880305 +0200\n\nAdd basic semaphore2 CI setup\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5598e9b0562285fe8260029a597d97271dbc1792",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5598e9b0562285fe8260029a597d97271dbc1792",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5598e9b0562285fe8260029a597d97271dbc1792/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7524376a81a1955f4da4adb23005f2122b18a270",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7524376a81a1955f4da4adb23005f2122b18a270",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7524376a81a1955f4da4adb23005f2122b18a270"
      }
    ],
    "stats": {
      "total": 117,
      "additions": 117,
      "deletions": 0
    },
    "files": [
      {
        "sha": "acf2caea8a192049d0af83eddc09b40c16eaebb5",
        "filename": ".semaphore/semaphore.yml",
        "status": "added",
        "additions": 74,
        "deletions": 0,
        "changes": 74,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5598e9b0562285fe8260029a597d97271dbc1792/.semaphore/semaphore.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5598e9b0562285fe8260029a597d97271dbc1792/.semaphore/semaphore.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/.semaphore/semaphore.yml?ref=5598e9b0562285fe8260029a597d97271dbc1792",
        "patch": "@@ -0,0 +1,74 @@\n+version: v1.0\r\n+name: Bitcoin Core\r\n+agent:\r\n+  machine:\r\n+    type: e1-standard-2\r\n+    os_image: ubuntu1804\r\n+\r\n+blocks:\r\n+  - name: Compile and test Bitcoin-Core\r\n+    task:\r\n+      jobs:\r\n+      - name: x86_64 Linux Ubuntu 18.04 depends tests\r\n+        env_vars:\r\n+        - name: TARGET_HOST\r\n+          value: x86_64-linux-gnu\r\n+        - name: PACKAGES\r\n+          value: \"\"\r\n+        - name: RUN_UNIT_TESTS\r\n+          value: \"true\"\r\n+        - name: RUN_FUNCTIONAL_TESTS\r\n+          value: \"true\"\r\n+        - name: BITCOIN_CONFIG\r\n+          value: \"--disable-dependency-tracking --enable-zmq --with-gui=qt5 --enable-glibc-back-compat --enable-reduce-exports --enable-debug\"\r\n+        commands:\r\n+          - checkout\r\n+          - set -o errexit; source .semaphore/update_build_test.sh\r\n+      - name: ARM Linux Ubuntu 18.04 depends tests\r\n+        env_vars:\r\n+        - name: TARGET_HOST\r\n+          value: arm-linux-gnueabihf\r\n+        - name: PACKAGES\r\n+          value: \"g++-arm-linux-gnueabihf\"\r\n+        - name: RUN_UNIT_TESTS\r\n+          value: \"false\"\r\n+        - name: RUN_FUNCTIONAL_TESTS\r\n+          value: \"false\"\r\n+        - name: BITCOIN_CONFIG\r\n+          value: \"--disable-dependency-tracking --enable-glibc-back-compat --enable-reduce-exports CXXFLAGS=-Wno-psabi\"\r\n+        commands:\r\n+          - checkout\r\n+          - set -o errexit; source .semaphore/update_build_test.sh\r\n+      - name: Win64 Ubuntu 18.04 depends\r\n+        env_vars:\r\n+        - name: TARGET_HOST\r\n+          value: x86_64-w64-mingw32\r\n+        - name: PACKAGES\r\n+          value: \"nsis g++-mingw-w64-x86-64 wine-binfmt wine64\"\r\n+        - name: RUN_UNIT_TESTS\r\n+          value: \"false\"\r\n+        - name: RUN_FUNCTIONAL_TESTS\r\n+          value: \"false\"\r\n+        - name: BITCOIN_CONFIG\r\n+          value: \"--enable-reduce-exports --disable-gui-tests\"\r\n+        commands:\r\n+          - checkout\r\n+          - set -o errexit; source .semaphore/update_build_test.sh\r\n+      - name: X86 Ubuntu system libs\r\n+        env_vars:\r\n+        - name: TARGET_HOST\r\n+          value: system\r\n+        - name: PACKAGES\r\n+          value: \"python3-zmq libdb-dev libdb++-dev libevent-dev libboost-system-dev libboost-filesystem-dev libboost-chrono-dev libboost-test-dev libboost-thread-dev qtbase5-dev qttools5-dev-tools protobuf-compiler libdbus-1-dev libharfbuzz-dev libprotobuf-dev\"\r\n+        - name: RUN_UNIT_TESTS\r\n+          value: \"false\"\r\n+        - name: RUN_FUNCTIONAL_TESTS\r\n+          value: \"false\"\r\n+        - name: BITCOIN_CONFIG\r\n+          value: \"--enable-reduce-exports --disable-gui-tests --with-gui=qt5 --with-incompatible-bdb\"\r\n+        commands:\r\n+          - g++ --version\r\n+          - sem-version cpp 6\r\n+          - g++ --version\r\n+          - checkout\r\n+          - set -o errexit; source .semaphore/update_build_test.sh\r"
      },
      {
        "sha": "07df227deff3907d3b5d1e56352d327557d1d454",
        "filename": ".semaphore/update_build_test.sh",
        "status": "added",
        "additions": 43,
        "deletions": 0,
        "changes": 43,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5598e9b0562285fe8260029a597d97271dbc1792/.semaphore/update_build_test.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5598e9b0562285fe8260029a597d97271dbc1792/.semaphore/update_build_test.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/.semaphore/update_build_test.sh?ref=5598e9b0562285fe8260029a597d97271dbc1792",
        "patch": "@@ -0,0 +1,43 @@\n+#!/usr/bin/env bash\n+#\n+# Copyright (c) 2019 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+export LC_ALL=C.UTF-8\n+\n+sudo apt-get update\n+sudo apt-get install --no-install-recommends --no-upgrade -qq $PACKAGES\n+\n+./autogen.sh\n+if [ \"$TARGET_HOST\" != \"system\" ]; then\n+\tcd depends\n+\tls -la\n+\tcache list\n+\tcache restore $TARGET_HOST-built\n+\tls -la\n+\tmake HOST=$TARGET_HOST -j4 V=1\n+\tls -la\n+\tcache store $TARGET_HOST-built built/$TARGET_HOST\n+\tcache list\n+\tcd ..\n+fi\n+\n+if [[ $TARGET_HOST = *-mingw32 ]]; then\n+  sudo update-alternatives --set $TARGET_HOST-g++ $(which $TARGET_HOST-g++-posix)\n+fi\n+\n+if [ \"$TARGET_HOST\" = \"system\" ]; then\n+\t./configure $BITCOIN_CONFIG\n+else\n+\t./configure --prefix=`pwd`/depends/$TARGET_HOST $BITCOIN_CONFIG\n+fi\n+make -j4\n+\n+if [ \"$RUN_UNIT_TESTS\" = \"true\" ]; then\n+\tmake check VERBOSE=1\n+fi\n+\n+if [ \"$RUN_FUNCTIONAL_TESTS\" = \"true\" ]; then\n+\t./test/functional/test_runner.py --ci --combinedlogslen=4000 --quiet --failfast\n+fi"
      }
    ]
  }
]