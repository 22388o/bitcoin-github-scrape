[
  {
    "sha": "f20b359bb9dabc7be11c3e3319e435aa42a8f0f5",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmMjBiMzU5YmI5ZGFiYzdiZTExYzNlMzMxOWU0MzVhYTQyYThmMGY1",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2020-07-05T13:25:11Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2020-07-05T14:39:17Z"
      },
      "message": "cli: reduce DefaultRequestHandler memory allocations",
      "tree": {
        "sha": "d92294220081ad807f056cd9172d42cbe287a4df",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d92294220081ad807f056cd9172d42cbe287a4df"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f20b359bb9dabc7be11c3e3319e435aa42a8f0f5",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAl8B5hUACgkQT1chs9Dj\nkh1kug//QNcQ4b7nlnv2hhvETtky+hJ75Iwkf1kj3Lb4fegxu5CtxbiwmIStqufI\nbZSan73FTI5R5APWLbKiFAK9WHq1o2heUj5EpXByKr8ujcu7sn0rUDWDn/D/Kkhg\nGn9p+QLaDpdnNtk4EKP46PPF5KfPkSn2YUP6hOKV7U6fHDe3g7Wp+o+xHQAZUC6l\n0oskbVyhLly3WW6ZSMrR9QF4m1VWmHx4A4xNXaJREL1gjjieMco1r27E1wEB6yja\n5WTXmGe+PjNMnQsv+H0HHi1d55Ocev+6NwOeq/eiLHXi/VEKR9vIY8Y/0KQQN1c+\ndl3XnRJQWqg3Ug6WSteeL1/4Rj4EOzDbmZLKidOTp5omrDXpiqxJlJCOMtx2jdWd\niZBAnyjIVYDzx2dh/4lJ1f5E85NFfZ4ptw70GnVqJvLom5RqlNmWOEzAo/tGWCP4\n732oxEkeYCb/ywTeEmJZcQ60vR08d16VgqHssFiWkrazqCK63/ltreG0SsYT3Fvq\nY8/W8XpaoOxcz3BXMjVdzd+k57HdlrrM+fohGGbgTu0IzgOCd9Q1tFrXviYDspQX\ncVUZLRFFGo/avghM+cX1PZDqkGy/OnrHBi+tJZvB0elc8A9Hz6Qf2GqU57FFbonr\nlTPti1do8n3NRzj1bBxZRJy6UCsHCYawhU5W1SeKzxgtdPX+p/A=\n=1CkZ\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIEOAT1LaTwEL+D3rorviANknqKCuU2MRQyJTynQOUz3MCP/wEDYpVV7hP2gm\nVgNmUNtEqPgI8QRfAeYX8Aj6u8rbL5i7qACD3+MNLvkMjikoaHR0cHM6Ly9maW5u\nZXkuY2FsZW5kYXIuZXRlcm5pdHl3YWxsLmNvbf/wEJ7hQ0Lk3Eca5k0hvOR+UzsI\n8QRfAeYW8Ai27VRKhYR9+QCD3+MNLvkMjiMiaHR0cHM6Ly9idGMuY2FsZW5kYXIu\nY2F0YWxsYXh5LmNvbf/wEOElyaqcr/D3ELxEYVqRTw4I8QRfAeYW8AgHA/f1zUK0\nGQCD3+MNLvkMji4taHR0cHM6Ly9hbGljZS5idGMuY2FsZW5kYXIub3BlbnRpbWVz\ndGFtcHMub3Jn8BDvupDNBta4NvzRqAlEVLthCPEEXwHmFvAIwxIVQXMFGAAAg9/j\nDS75DI4sK2h0dHBzOi8vYm9iLmJ0Yy5jYWxlbmRhci5vcGVudGltZXN0YW1wcy5v\ncmc=\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree d92294220081ad807f056cd9172d42cbe287a4df\nparent 8783bcc099e9c8e31010ff59260cf4dbac430355\nauthor Jon Atack <jon@atack.com> 1593955511 +0200\ncommitter Jon Atack <jon@atack.com> 1593959957 +0200\n\ncli: reduce DefaultRequestHandler memory allocations\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f20b359bb9dabc7be11c3e3319e435aa42a8f0f5",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f20b359bb9dabc7be11c3e3319e435aa42a8f0f5",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f20b359bb9dabc7be11c3e3319e435aa42a8f0f5/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8783bcc099e9c8e31010ff59260cf4dbac430355",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8783bcc099e9c8e31010ff59260cf4dbac430355",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8783bcc099e9c8e31010ff59260cf4dbac430355"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 5,
      "deletions": 5
    },
    "files": [
      {
        "sha": "9afcda45782994a0f532cd7524a2276e647d9f3e",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f20b359bb9dabc7be11c3e3319e435aa42a8f0f5/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f20b359bb9dabc7be11c3e3319e435aa42a8f0f5/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=f20b359bb9dabc7be11c3e3319e435aa42a8f0f5",
        "patch": "@@ -516,16 +516,16 @@ static void ParseError(const UniValue& error, std::string& strPrint, int& nRet)\n  */\n static void GetWalletBalances(UniValue& result)\n {\n-    std::unique_ptr<BaseRequestHandler> rh{MakeUnique<DefaultRequestHandler>()};\n-    const UniValue listwallets = ConnectAndCallRPC(rh.get(), \"listwallets\", /* args=*/{});\n+    DefaultRequestHandler rh;\n+    const UniValue listwallets = ConnectAndCallRPC(&rh, \"listwallets\", /* args=*/{});\n     if (!find_value(listwallets, \"error\").isNull()) return;\n     const UniValue& wallets = find_value(listwallets, \"result\");\n     if (wallets.size() <= 1) return;\n \n     UniValue balances(UniValue::VOBJ);\n     for (const UniValue& wallet : wallets.getValues()) {\n         const std::string wallet_name = wallet.get_str();\n-        const UniValue getbalances = ConnectAndCallRPC(rh.get(), \"getbalances\", /* args=*/{}, wallet_name);\n+        const UniValue getbalances = ConnectAndCallRPC(&rh, \"getbalances\", /* args=*/{}, wallet_name);\n         const UniValue& balance = find_value(getbalances, \"result\")[\"mine\"][\"trusted\"];\n         balances.pushKV(wallet_name, balance);\n     }\n@@ -540,8 +540,8 @@ static UniValue GetNewAddress()\n {\n     Optional<std::string> wallet_name{};\n     if (gArgs.IsArgSet(\"-rpcwallet\")) wallet_name = gArgs.GetArg(\"-rpcwallet\", \"\");\n-    std::unique_ptr<BaseRequestHandler> rh{MakeUnique<DefaultRequestHandler>()};\n-    return ConnectAndCallRPC(rh.get(), \"getnewaddress\", /* args=*/{}, wallet_name);\n+    DefaultRequestHandler rh;\n+    return ConnectAndCallRPC(&rh, \"getnewaddress\", /* args=*/{}, wallet_name);\n }\n \n /**"
      }
    ]
  }
]