[
  {
    "sha": "6a7a27d68322c4a752b00ee4b8820626d48245b2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2YTdhMjdkNjgzMjJjNGE3NTJiMDBlZTRiODgyMDYyNmQ0ODI0NWIy",
    "commit": {
      "author": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2019-01-20T22:58:59Z"
      },
      "committer": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2019-01-23T11:21:45Z"
      },
      "message": "Drop defunct Windows compat fixes\n\n\"The AI_ADDRCONFIG flag is defined on the Windows SDK for Windows Vista\nand later. The AI_ADDRCONFIG flag is supported on Windows Vista and\nlater.\"\nhttps://docs.microsoft.com/en-us/windows/desktop/api/ws2tcpip/nf-ws2tcpip-getaddrinfo\n\nHowever, the version of MinGW we use on Travis is not current and does\nnot carry the relevant definition, as such I defined it in compat.\nhttps://github.com/wine-mirror/wine/blob/master/include/ws2tcpip.h\n\nTesting confirms that the PROTECTION_LEVEL_UNRESTRICTED and\nIPV6_PROTECTION_LEVEL are now supported by the version of windows that\nwe test against, so can be removed.\nhttps://travis-ci.org/bitcoin/bitcoin/jobs/483255439",
      "tree": {
        "sha": "fc21c7921fa338f6b7b3b041329529e89929532c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fc21c7921fa338f6b7b3b041329529e89929532c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6a7a27d68322c4a752b00ee4b8820626d48245b2",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQEcBAABCgAGBQJcSE5MAAoJEG7l83hfeLNF6Q4H/if265UvB8xDC6ylxPKqtGAt\nwmYKP8KsPUknv7ZMKIjiXp+eM1lDhReMhrGNSm4ULpj8Sj2mZTWSCt5lPI1jESjl\nIjQn389S7tK6jagbm2mFM6ipAQAqWxjRlhVol4X8+v/6HsnkVcTn0SN+tbFalPCp\nPwALgOSCYA7ugxwJf6SV1i0Io8dRJQKbag5ACU2kHFb1IDqv1P8+5EeQEcJcdZsI\nZuUUiAvWlMiMJR/ELqWaBt7WCW3qK8CS8Mi1feYKbvCEpx4C33hyGLpv/TeVVZrq\ndAdD+72uNlfTm0+SVHi6pdBtvhIEYYNDKl3Bb80eHiuOS9oyQ1YjRwoITjsQERA=\n=iGH7\n-----END PGP SIGNATURE-----",
        "payload": "tree fc21c7921fa338f6b7b3b041329529e89929532c\nparent 9bad1e0b22c1065c5ab73d74ac96747ecf33dcdf\nauthor Ben Woosley <ben.woosley@gmail.com> 1548025139 -0800\ncommitter Ben Woosley <ben.woosley@gmail.com> 1548242505 -0800\n\nDrop defunct Windows compat fixes\n\n\"The AI_ADDRCONFIG flag is defined on the Windows SDK for Windows Vista\nand later. The AI_ADDRCONFIG flag is supported on Windows Vista and\nlater.\"\nhttps://docs.microsoft.com/en-us/windows/desktop/api/ws2tcpip/nf-ws2tcpip-getaddrinfo\n\nHowever, the version of MinGW we use on Travis is not current and does\nnot carry the relevant definition, as such I defined it in compat.\nhttps://github.com/wine-mirror/wine/blob/master/include/ws2tcpip.h\n\nTesting confirms that the PROTECTION_LEVEL_UNRESTRICTED and\nIPV6_PROTECTION_LEVEL are now supported by the version of windows that\nwe test against, so can be removed.\nhttps://travis-ci.org/bitcoin/bitcoin/jobs/483255439\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6a7a27d68322c4a752b00ee4b8820626d48245b2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6a7a27d68322c4a752b00ee4b8820626d48245b2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6a7a27d68322c4a752b00ee4b8820626d48245b2/comments",
    "author": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9bad1e0b22c1065c5ab73d74ac96747ecf33dcdf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9bad1e0b22c1065c5ab73d74ac96747ecf33dcdf",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9bad1e0b22c1065c5ab73d74ac96747ecf33dcdf"
      }
    ],
    "stats": {
      "total": 41,
      "additions": 19,
      "deletions": 22
    },
    "files": [
      {
        "sha": "589635937ec6aac5ffd334d10d9f1b8292d22b8b",
        "filename": ".travis.yml",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6a7a27d68322c4a752b00ee4b8820626d48245b2/.travis.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6a7a27d68322c4a752b00ee4b8820626d48245b2/.travis.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/.travis.yml?ref=6a7a27d68322c4a752b00ee4b8820626d48245b2",
        "patch": "@@ -71,15 +71,15 @@ jobs:\n         DPKG_ADD_ARCH=\"i386\"\n         PACKAGES=\"python3 nsis g++-mingw-w64-i686 wine-binfmt wine32\"\n         GOAL=\"deploy\"\n-        BITCOIN_CONFIG=\"--enable-reduce-exports --disable-gui-tests\"\n+        BITCOIN_CONFIG=\"--enable-reduce-exports --disable-gui-tests CPPFLAGS=-DFAIL_ON_EXTRANEOUS_COMPAT\"\n \n     - stage: test\n       name: 'Win64  [GOAL: deploy]  [no gui tests]'\n       env: >-\n         HOST=x86_64-w64-mingw32\n         PACKAGES=\"python3 nsis g++-mingw-w64-x86-64 wine-binfmt wine64\"\n         GOAL=\"deploy\"\n-        BITCOIN_CONFIG=\"--enable-reduce-exports --disable-gui-tests\"\n+        BITCOIN_CONFIG=\"--enable-reduce-exports --disable-gui-tests CPPFLAGS=-DFAIL_ON_EXTRANEOUS_COMPAT\"\n \n     - stage: test\n       name: '32-bit + dash  [GOAL: install]'"
      },
      {
        "sha": "1805d59830bdae2663dbf4a2683455d2cd0c7230",
        "filename": "src/compat.h",
        "status": "modified",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6a7a27d68322c4a752b00ee4b8820626d48245b2/src/compat.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6a7a27d68322c4a752b00ee4b8820626d48245b2/src/compat.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/compat.h?ref=6a7a27d68322c4a752b00ee4b8820626d48245b2",
        "patch": "@@ -48,6 +48,23 @@\n #include <unistd.h>\n #endif\n \n+// Fix for ancient MinGW versions, that don't have defined these in ws2tcpip.h.\n+// Todo: Can be removed when our pull-tester is upgraded to a modern MinGW version.\n+#ifdef WIN32\n+#ifndef AI_ADDRCONFIG\n+#define AI_ADDRCONFIG 0x00000400\n+#elif defined(FAIL_ON_EXTRANEOUS_COMPAT)\n+#error Unnecessary fix for AI_ADDRCONFIG\n+#endif\n+#ifndef PROCESS_DEP_ENABLE\n+// We define this here, because GCCs winbase.h limits this to _WIN32_WINNT >= 0x0601 (Windows 7),\n+// which is not correct. Can be removed, when GCCs winbase.h is fixed!\n+#define PROCESS_DEP_ENABLE 0x00000001\n+#elif defined(FAIL_ON_EXTRANEOUS_COMPAT)\n+#error Unnecessary fix for PROCESS_DEP_ENABLE\n+#endif\n+#endif\n+\n #ifndef WIN32\n typedef unsigned int SOCKET;\n #include <errno.h>"
      },
      {
        "sha": "363431ba614e4f44e75171f72a9732d2b4521146",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 5,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6a7a27d68322c4a752b00ee4b8820626d48245b2/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6a7a27d68322c4a752b00ee4b8820626d48245b2/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=6a7a27d68322c4a752b00ee4b8820626d48245b2",
        "patch": "@@ -893,11 +893,6 @@ bool AppInitBasicSetup()\n     // Enable Data Execution Prevention (DEP)\n     // Minimum supported OS versions: WinXP SP3, WinVista >= SP1, Win Server 2008\n     // A failure is non-critical and needs no further attention!\n-#ifndef PROCESS_DEP_ENABLE\n-    // We define this here, because GCCs winbase.h limits this to _WIN32_WINNT >= 0x0601 (Windows 7),\n-    // which is not correct. Can be removed, when GCCs winbase.h is fixed!\n-#define PROCESS_DEP_ENABLE 0x00000001\n-#endif\n     typedef BOOL (WINAPI *PSETPROCDEPPOL)(DWORD);\n     PSETPROCDEPPOL setProcDEPPol = (PSETPROCDEPPOL)GetProcAddress(GetModuleHandleA(\"Kernel32.dll\"), \"SetProcessDEPPolicy\");\n     if (setProcDEPPol != nullptr) setProcDEPPol(PROCESS_DEP_ENABLE);"
      },
      {
        "sha": "4bf7e71729ec5b1845c2b0e0bd8715754542eeeb",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 11,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6a7a27d68322c4a752b00ee4b8820626d48245b2/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6a7a27d68322c4a752b00ee4b8820626d48245b2/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=6a7a27d68322c4a752b00ee4b8820626d48245b2",
        "patch": "@@ -58,17 +58,6 @@ static constexpr int DUMP_PEERS_INTERVAL = 15 * 60;\n #define MSG_DONTWAIT 0\n #endif\n \n-// Fix for ancient MinGW versions, that don't have defined these in ws2tcpip.h.\n-// Todo: Can be removed when our pull-tester is upgraded to a modern MinGW version.\n-#ifdef WIN32\n-#ifndef PROTECTION_LEVEL_UNRESTRICTED\n-#define PROTECTION_LEVEL_UNRESTRICTED 10\n-#endif\n-#ifndef IPV6_PROTECTION_LEVEL\n-#define IPV6_PROTECTION_LEVEL 23\n-#endif\n-#endif\n-\n /** Used to pass flags to the Bind() function */\n enum BindFlags {\n     BF_NONE         = 0,"
      },
      {
        "sha": "6c386a9ade702c1caa0502244079f9955976a39d",
        "filename": "src/netbase.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 4,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6a7a27d68322c4a752b00ee4b8820626d48245b2/src/netbase.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6a7a27d68322c4a752b00ee4b8820626d48245b2/src/netbase.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/netbase.cpp?ref=6a7a27d68322c4a752b00ee4b8820626d48245b2",
        "patch": "@@ -80,11 +80,7 @@ bool static LookupIntern(const char *pszName, std::vector<CNetAddr>& vIP, unsign\n     aiHint.ai_socktype = SOCK_STREAM;\n     aiHint.ai_protocol = IPPROTO_TCP;\n     aiHint.ai_family = AF_UNSPEC;\n-#ifdef WIN32\n-    aiHint.ai_flags = fAllowLookup ? 0 : AI_NUMERICHOST;\n-#else\n     aiHint.ai_flags = fAllowLookup ? AI_ADDRCONFIG : AI_NUMERICHOST;\n-#endif\n     struct addrinfo *aiRes = nullptr;\n     int nErr = getaddrinfo(pszName, nullptr, &aiHint, &aiRes);\n     if (nErr)"
      }
    ]
  }
]