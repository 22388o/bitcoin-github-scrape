gmaxwell,2016-09-14T09:30:40Z,"Concept ACK, though might it be better to just introduce a new, trivial, P2P message for this purpose instead of overloading filterclear?\n",https://github.com/bitcoin/bitcoin/pull/8709#issuecomment-246957287,246957287,
morcos,2016-09-14T11:39:51Z,"Maybe I'm missing something, but how is that accomplished by just this PR?  How are you starting blocksonly?\nIt seems reasonable to me that if you're not setting NODE_BLOOM that other nodes should respect that and not send you filter messages of any kind.\n\nI think avoiding txs during catch up could be already accomplished using the feefilter message or as @gmaxwell points out by a new mechanism",https://github.com/bitcoin/bitcoin/pull/8709#issuecomment-246986270,246986270,
rebroad,2016-09-14T19:43:33Z,"@morcos This is a necessary first step prior to being able to code that - if the code mentioned was to be added to the network now without this pull merged and running on the network then the current behaviour would be to ban the nodes that start blocksonly and later request the TXs.  Am I making sense?\n\nYes, you are correct in that we are talking about savnig the bandwidth from inv messages. Fe",https://github.com/bitcoin/bitcoin/pull/8709#issuecomment-247130810,247130810,
TheBlueMatt,2016-09-14T21:07:46Z,"Its kind of a shame that we didnt catch this at the time of the BIP, but this isnt really sufficient to use as a feature, now that there are nodes which will disconnect/ban you for sending a filterclear. A new P2P message would certainly require a new BIP and some kind of version bump/signaling capability before we could use this. Alternatively, we could update the BIP and assume no one uses -node",https://github.com/bitcoin/bitcoin/pull/8709#issuecomment-247153908,247153908,
rebroad,2016-09-15T06:33:01Z,"@TheBlueMatt This pull is safe but the pull that uses filterclear will need to be careful due to the ban-happy nodes you mention. As far as I know only bitcoin core nodes currently do this, and they are easy to spot as they have protocol version 70011 to 70014 and don't advertise BLOOM services. These nodes are a small minority (since BLOOM is by default on), so it might be so few as to not need t",https://github.com/bitcoin/bitcoin/pull/8709#issuecomment-247247189,247247189,
TheBlueMatt,2016-09-15T12:47:28Z,"Sure, but ban-happy nodes won't be identifiable unless we also bump the protocol version with this pull (which i don't think we should do), so it may be useless without thinking about it further.\nMy preference would be to just do this and update the BIP to note that you should not ban on filterclear, while pointing out that, due to a previous version of the BIP, some nodes may do this. We would t",https://github.com/bitcoin/bitcoin/pull/8709#issuecomment-247318299,247318299,
morcos,2016-09-15T13:07:35Z,"I misunderstood how filterclear and fRelayTxes interact, and now I think this change makes sense.\n\nutACK\n",https://github.com/bitcoin/bitcoin/pull/8709#issuecomment-247322810,247322810,
pstratem,2016-09-20T04:48:18Z,@rebroad you can achieve the effect you desire by simply reconnecting after IBD\n,https://github.com/bitcoin/bitcoin/pull/8709#issuecomment-248200651,248200651,
rebroad,2016-09-20T07:12:10Z,"@pstratem Sorry, I don't understand what you mean - what effect are you referring to? Without this patch, my node was banning my SPV wallet. I do agree that to address the overloading of whitelist that I need to change this to require an additional command line option. Perhaps -bloomwhite ?\n",https://github.com/bitcoin/bitcoin/pull/8709#issuecomment-248221772,248221772,
gmaxwell,2016-09-22T18:44:16Z,ACK.\n,https://github.com/bitcoin/bitcoin/pull/8709#issuecomment-248992193,248992193,
rebroad,2016-10-17T05:15:18Z,Is making this optional via a command line option what is needed to get more ACKs?\n,https://github.com/bitcoin/bitcoin/pull/8709#issuecomment-254114339,254114339,
