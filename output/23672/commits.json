[
  {
    "sha": "b35942e500159ce601e909375fdafd8497f23b36",
    "node_id": "C_kwDOABII59oAKGIzNTk0MmU1MDAxNTljZTYwMWU5MDkzNzVmZGFmZDg0OTdmMjNiMzY",
    "commit": {
      "author": {
        "name": "Dimitri",
        "email": "kvaciral@protonmail.com",
        "date": "2021-12-03T20:42:52Z"
      },
      "committer": {
        "name": "Dimitri",
        "email": "kvaciral@protonmail.com",
        "date": "2021-12-05T21:07:04Z"
      },
      "message": "tests: Add data-driven testcases to rpc_decodescript.py",
      "tree": {
        "sha": "c8305c345c62d389b7be32d8a31d2f723938d56c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c8305c345c62d389b7be32d8a31d2f723938d56c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b35942e500159ce601e909375fdafd8497f23b36",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b35942e500159ce601e909375fdafd8497f23b36",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b35942e500159ce601e909375fdafd8497f23b36",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b35942e500159ce601e909375fdafd8497f23b36/comments",
    "author": {
      "login": "Kvaciral",
      "id": 864811,
      "node_id": "MDQ6VXNlcjg2NDgxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/864811?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kvaciral",
      "html_url": "https://github.com/Kvaciral",
      "followers_url": "https://api.github.com/users/Kvaciral/followers",
      "following_url": "https://api.github.com/users/Kvaciral/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kvaciral/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kvaciral/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kvaciral/subscriptions",
      "organizations_url": "https://api.github.com/users/Kvaciral/orgs",
      "repos_url": "https://api.github.com/users/Kvaciral/repos",
      "events_url": "https://api.github.com/users/Kvaciral/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kvaciral/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Kvaciral",
      "id": 864811,
      "node_id": "MDQ6VXNlcjg2NDgxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/864811?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kvaciral",
      "html_url": "https://github.com/Kvaciral",
      "followers_url": "https://api.github.com/users/Kvaciral/followers",
      "following_url": "https://api.github.com/users/Kvaciral/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kvaciral/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kvaciral/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kvaciral/subscriptions",
      "organizations_url": "https://api.github.com/users/Kvaciral/orgs",
      "repos_url": "https://api.github.com/users/Kvaciral/repos",
      "events_url": "https://api.github.com/users/Kvaciral/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kvaciral/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "26a1147ce56083d7aa820ac115c16b01e47d911c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/26a1147ce56083d7aa820ac115c16b01e47d911c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/26a1147ce56083d7aa820ac115c16b01e47d911c"
      }
    ],
    "stats": {
      "total": 133,
      "additions": 133,
      "deletions": 0
    },
    "files": [
      {
        "sha": "12f3c92230e9f6f9b977935e7c117f654652f8c4",
        "filename": "test/functional/data/rpc_decodescript.json",
        "status": "added",
        "additions": 120,
        "deletions": 0,
        "changes": 120,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b35942e500159ce601e909375fdafd8497f23b36/test/functional/data/rpc_decodescript.json",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b35942e500159ce601e909375fdafd8497f23b36/test/functional/data/rpc_decodescript.json",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/data/rpc_decodescript.json?ref=b35942e500159ce601e909375fdafd8497f23b36",
        "patch": "@@ -0,0 +1,120 @@\n+[\n+    [\n+        \"5120eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee\",\n+        {\n+            \"asm\": \"1 eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee\",\n+            \"address\": \"bcrt1pamhwamhwamhwamhwamhwamhwamhwamhwamhwamhwamhwamhwamhqz6nvlh\",\n+            \"type\": \"witness_v1_taproot\",\n+            \"p2sh\": \"2Mt5gBng2UVL3xX4FUQinSBthq8gWQqs37g\"\n+        }\n+    ],\n+    [\n+        \"5102eeee\",\n+        {\n+            \"asm\": \"1 -28398\",\n+            \"address\": \"bcrt1pamhqk96edn\",\n+            \"type\": \"witness_unknown\",\n+            \"p2sh\": \"2ND89Zqxi19tq7AjL5Y3un8fDWRwpwrk4tf\"\n+        }\n+    ],\n+    [\n+        \"0020eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee\",\n+        {\n+            \"asm\": \"0 eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee\",\n+            \"address\": \"bcrt1qamhwamhwamhwamhwamhwamhwamhwamhwamhwamhwamhwamhwamhqgdn98t\",\n+            \"type\": \"witness_v0_scripthash\",\n+            \"p2sh\": \"2MwGk8mw1GBP6U9D5X8gTvgvXpuknmAK3fo\"\n+        }\n+    ],\n+    [\n+        \"a914eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee87\",\n+        {\n+            \"asm\": \"OP_HASH160 eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee OP_EQUAL\",\n+            \"address\": \"2NF2b3KS8xXb9XHvbRMXdZh8s5g92rUZHtp\",\n+            \"type\": \"scripthash\"\n+        }\n+    ],\n+    [\n+        \"6a00\",\n+        {\n+            \"asm\": \"OP_RETURN 0\",\n+            \"type\": \"nulldata\",\n+            \"p2sh\": \"2NG8CqGyR16jkZU5H7J9WM5xpCT6Fpw6bww\"\n+        }\n+    ],\n+    [\n+        \"6aee\",\n+        {\n+            \"asm\": \"OP_RETURN OP_UNKNOWN\",\n+            \"type\": \"nonstandard\",\n+            \"p2sh\": \"2NGU1bmCBhSooc3vkPYdea2ngDcwhNx8CeF\",\n+            \"segwit\": {\n+                \"asm\": \"0 44358a3abb4cc9f635f459edffb2a1210f849857aaf12106a1af645e034faa95\",\n+                \"hex\": \"002044358a3abb4cc9f635f459edffb2a1210f849857aaf12106a1af645e034faa95\",\n+                \"address\": \"bcrt1qgs6c5w4mfnylvd05t8kllv4pyy8cfxzh4tcjzp4p4aj9uq60422sw9mgmf\",\n+                \"type\": \"witness_v0_scripthash\",\n+                \"p2sh-segwit\": \"2N9xFeGJC4Z2BQcVEq7vyeNUZiVoANFbrX1\"\n+            }\n+        }\n+    ],\n+    [\n+        \"6a02ee\",\n+        {\n+            \"asm\": \"OP_RETURN [error]\",\n+            \"type\": \"nonstandard\",\n+            \"p2sh\": \"2N9JFV56rrkTYVnrJTMFSpKNsq6j5NbAdQr\",\n+            \"segwit\": {\n+                \"asm\": \"0 6f3d493995bda1f72a8f4de96663be22b583623a05f5ae98f38c45b8e03ca5da\",\n+                \"hex\": \"00206f3d493995bda1f72a8f4de96663be22b583623a05f5ae98f38c45b8e03ca5da\",\n+                \"address\": \"bcrt1qdu75jwv4hkslw250fh5kvca7y26cxc36qh66ax8n33zm3cpu5hdqdtm4gp\",\n+                \"type\": \"witness_v0_scripthash\",\n+                \"p2sh-segwit\": \"2N3TqW8vuVr987Z695CmLNmLLXobBRMmqho\"\n+            }\n+        }\n+    ],\n+    [\n+        \"02eeee\",\n+        {\n+            \"asm\": \"-28398\",\n+            \"type\": \"nonstandard\",\n+            \"p2sh\": \"2N34iiGoUUkVSPiaaTFpJjB1FR9TXQu3PGM\",\n+            \"segwit\": {\n+                \"asm\": \"0 96c2368fc30514a438a8bd909f93c49a1549d77198ccbdb792043b666cb24f42\",\n+                \"hex\": \"002096c2368fc30514a438a8bd909f93c49a1549d77198ccbdb792043b666cb24f42\",\n+                \"address\": \"bcrt1qjmprdr7rq522gw9ghkgfly7yng25n4m3nrxtmdujqsakvm9jfapqk795l5\",\n+                \"type\": \"witness_v0_scripthash\",\n+                \"p2sh-segwit\": \"2MtoejEictTQ6XtmHYzoYttt35Ec6krqFKN\"\n+            }\n+        }\n+    ],\n+    [\n+        \"ba\",\n+        {\n+            \"asm\": \"OP_CHECKSIGADD\",\n+            \"type\": \"nonstandard\",\n+            \"p2sh\": \"2MyX11u6v747zcKHTJMjXFgkj1vYZgHr4i1\",\n+            \"segwit\": {\n+                \"asm\": \"0 281c93990bac2c69cf372c9a3b66c406c86cca826d6407b68e644da22eef8186\",\n+                \"hex\": \"0020281c93990bac2c69cf372c9a3b66c406c86cca826d6407b68e644da22eef8186\",\n+                \"address\": \"bcrt1q9qwf8xgt4skxnneh9jdrkekyqmyxej5zd4jq0d5wv3x6yth0sxrqe2wl7r\",\n+                \"type\": \"witness_v0_scripthash\",\n+                \"p2sh-segwit\": \"2NBoeWVFMmZdEhLzP5kpvjnJ8c1GucsCbFK\"\n+            }\n+        }\n+    ],\n+    [\n+        \"50\",\n+        {\n+            \"asm\": \"OP_RESERVED\",\n+            \"type\": \"nonstandard\",\n+            \"p2sh\": \"2NEqnmDnSWcfTRBG2t6M53ey6mjc8ncHesN\",\n+            \"segwit\": {\n+                \"asm\": \"0 5c62e091b8c0565f1bafad0dad5934276143ae2ccef7a5381e8ada5b1a8d26d2\",\n+                \"hex\": \"00205c62e091b8c0565f1bafad0dad5934276143ae2ccef7a5381e8ada5b1a8d26d2\",\n+                \"address\": \"bcrt1qt33wpydccpt97xa045x66kf5yas58t3vemm62wq73td9kx5dymfqknplwh\",\n+                \"type\": \"witness_v0_scripthash\",\n+                \"p2sh-segwit\": \"2NEtjT3ku2KjZo53bnwKX2v928Mzx5sjdUh\"\n+            }\n+        }\n+    ]\n+]\n\\ No newline at end of file"
      },
      {
        "sha": "56f596d4199d484b101f107d39f058077cd79d94",
        "filename": "test/functional/rpc_decodescript.py",
        "status": "modified",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b35942e500159ce601e909375fdafd8497f23b36/test/functional/rpc_decodescript.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b35942e500159ce601e909375fdafd8497f23b36/test/functional/rpc_decodescript.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/rpc_decodescript.py?ref=b35942e500159ce601e909375fdafd8497f23b36",
        "patch": "@@ -4,6 +4,9 @@\n # file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \"\"\"Test decoding scripts via decodescript RPC command.\"\"\"\n \n+import json\n+import os\n+\n from test_framework.messages import (\n     sha256,\n     tx_from_hex,\n@@ -252,13 +255,23 @@ def decoderawtransaction_asm_sighashtype(self):\n         rpc_result = self.nodes[0].decoderawtransaction(txSave.serialize().hex())\n         assert_equal('OP_RETURN 3011020701010101010101020601010101010101', rpc_result['vin'][0]['scriptSig']['asm'])\n \n+    def decodescript_datadriven_tests(self):\n+        with open(os.path.join(os.path.dirname(os.path.realpath(__file__)), 'data/rpc_decodescript.json'), encoding='utf-8') as f:\n+            dd_tests = json.load(f)\n+\n+        for script, result in dd_tests:\n+            rpc_result = self.nodes[0].decodescript(script)\n+            assert_equal(result, rpc_result)\n+\n     def run_test(self):\n         self.log.info(\"Test decoding of standard input scripts [scriptSig]\")\n         self.decodescript_script_sig()\n         self.log.info(\"Test decoding of standard output scripts [scriptPubKey]\")\n         self.decodescript_script_pub_key()\n         self.log.info(\"Test 'asm' script decoding of transactions\")\n         self.decoderawtransaction_asm_sighashtype()\n+        self.log.info(\"Data-driven tests\")\n+        self.decodescript_datadriven_tests()\n \n if __name__ == '__main__':\n     DecodeScriptTest().main()"
      }
    ]
  }
]