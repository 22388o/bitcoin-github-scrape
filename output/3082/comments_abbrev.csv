sipa,2013-10-12T17:13:39Z,"Some comments on the help output:\n\n```\nUsage:\n  bitcoin-rpc [options] <command> [params]  Send command to -server or bitcoind\n```\n\nNot sure if it was introduced by this commit, but I have no idea what ""sending to -server"" would mean.\n\n```\n  -rpcport=<port>        Listen for JSON-RPC connections on <port> (default: 8332 or testnet: 18332)\n```\n\nFor bitcoin-rpc, that should probably read",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26201614,26201614,
laanwj,2013-10-12T22:15:39Z,"```\nNot sure if it was introduced by this commit, but I have no idea what ""sending to -server"" would mean.\n```\n\nThat was not introduced in this commit. It is also in bitcoind, I literally took that over. I suppose it means ""a bitcoin-qt started with -server"".\n\nAgree on the rpcport having different meaning for the client than for the server, and indeed the SSL server settings can go.\n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26207209,26207209,
laanwj,2013-10-13T12:20:38Z,"Updated the help message accordingly, and added mention in bitcoind help message that using it as client is deprecated.\n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26216766,26216766,
sipa,2013-10-13T15:08:10Z,ACK.\n\nOne nit: -rpcsslciphers isn't used by the RPC client either.\n,https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26219652,26219652,
super3,2013-10-13T23:08:00Z,"Good work. Any stats on the performance over Bitcoind? \n\nAny idea on the time period for deprecation and drop of RPC from Bitcoind? A fair amount of codebase in based on Bitcoind, so that might cause some breakage even if it is deprecated for a while. \n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26229337,26229337,
sipa,2013-10-13T23:16:56Z,"I expect performance to be exactly identical to bitcoind for now.\n\nOnce we can create a stripped-down version with less dependencies, startup time may be reduced a bit. But really, it's just thin wrapper to expose an interface intended for computers to humans. If performance matters to you, you should be sending JSON-RPC directly instead of exec()ing a binary for every call.\n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26229504,26229504,
super3,2013-10-14T03:48:51Z,"Just curious. Thanks for clarifying.\n\nOn Sun, Oct 13, 2013 at 7:17 PM, Pieter Wuille notifications@github.comwrote:\n\n> I expect performance to be exactly identical to bitcoind for now.\n> \n> Once we can create a stripped-down version with less dependencies, startup\n> time may be reduced a bit. But really, it's just thin wrapper to expose an\n> interface intended for computers to humans. If p",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26234368,26234368,
laanwj,2013-10-14T07:19:56Z,"Performance wasn't the concern here, just sanity. Why would you need bitcoind on a system that only does requests? And good luck browsing through the bitcoind help message to find options that concern the client. Even as bitcoin developer I needed three reworks to get those right. There is just no excuse in the world to merge the client and server into one executable.\n\nIMO the deprecation time p",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26239184,26239184,
laanwj,2013-10-15T10:50:16Z,"Ok I've hidden -rpcsslciphers for the client. I still think it would be useful to have it in the client as well (SSL_CTX_set_cipher_list isn't even called in the client), but that is off-topic for this pull.\n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26324716,26324716,
laanwj,2013-10-20T10:08:59Z,"In case we agree with adding a seperate RPC client, can we please merge this soon? Every change to the help message results in an ugly merge in init.cpp.\n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26670150,26670150,
sipa,2013-10-20T11:32:47Z,"@gavinandresen @jgarzik @gmaxwell Any general opinion about this?\n\nIMHO, the fact that bitcoind is both a client and a server is confusing, and that alone warrants separating them (though certainly not instantly, too much legacy code relies on bitcoind for now).\n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26671252,26671252,
laanwj,2013-10-20T12:08:11Z,"Right, a lot of code relies on bitcoind being a client, that's why this doesn't disable or change the functionality in bitcoind, it just adds a new executable with only the RPC functionality. Removing is completely separate and should be left to a further future release when people had the chance to switch over.\n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26671772,26671772,
sipa,2013-10-20T13:52:54Z,"@laanwj If we ever choose to actually separate the code, there is always the option to make bitcoind exec() bitcoin-cli in case some command is provided still.\n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26673388,26673388,
jgarzik,2013-10-20T14:22:29Z,"ACK, with optional, feel-free-to-merge-without-this comments,\n\n1) I would name it ""bitcoin-cli"" or ""bitcoin-remote"" mirroring some existing practices.\n\n2) Remove, rather than deprecate, ""bitcoind <command>"" usage.  Will break some scripts, but so what.  I'm more willing to break stuff like this, as 1.0 approaches.\n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26673898,26673898,
luke-jr,2013-10-20T14:29:44Z,"Is there any reason this should be Bitcoin-specific? Couldn't a generic-JSON-RPC CLI client (perhaps written in Python?) work just as well, without complicating the codebase unnecessarily?\n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26674010,26674010,
laanwj,2013-10-20T14:43:38Z,"@jgarzik Bitcoin-cli/remote is fine with me, I don't have any opinion on the name.\nI still prefer a two-step deprecation process though.\n\n@luke-jr How is this complicating the codebase? If anything, this is the beginning of a clean-up. I did some code movements in the original commit to separate different concerns into different files, which I've left out here for easier review, but they can st",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26674284,26674284,
super3,2013-10-20T16:26:22Z,"@sipa I like the idea backward compatibility using exec() to call bitcoin-cli. I assume care of course must be taken to prevent malicious injection via Bitcoind. \n\n@jgarzik I agree that it needs to removed, but I'd rather devs have at least one release cycle to use bitcoin-cli and change their core code to match. Then you can remove on ~1.0. Deprecation give devs a fair warning. Removing is just",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26676366,26676366,
luke-jr,2013-10-20T16:42:56Z,"Complication, for example see all the different conditionals in strUsage now.\n\nArgument parsing might be an issue, I suppose - are there any cases where a Number might be confused with a String or vice-versa? JSON doesn't have doubles or integers, just Numbers - a client or server that makes a distinction is a bug.\n\nAs long as we're modularising the code, it makes the most sense to _actually_ ",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26676733,26676733,
laanwj,2013-10-20T19:59:58Z,"@luke-jr yes, the helpmessage function is complicated somewhat by this, but that's the only one. To make it more readable it could be formatted as a table with a bitfield per option (which client kinds it applies to), if anyone cares enough to do that.\n\nA seperate git repository sounds pointless. It's useful to be able to build everything at once. A different directory within src/ would make sen",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26681172,26681172,
sipa,2013-10-20T20:37:23Z,"Well I guess actual separate repositories is one potential future, but I doubt we'll get to the point with the current codebase where that makes sense.\n\nI am in favor of a nice and shiny python RPC client, which supports things like tab completion, and inline help, and batch processing, and pipelines of queries. and unicorns. As long as nobody creates one, I think this will do just fine. If some",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26681993,26681993,
super3,2013-10-20T20:47:47Z,"@sipa That kinda sounds like a fun project for me, after I do a few more documentation sweeps. I can add unicorns as long as you don't mind them being [green](http://gunicorn.org/). \n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26682228,26682228,
laanwj,2013-10-20T20:51:37Z,"Wouldn't tab completion ideally be something in the shell instead of in the executable itself? Ie, bash has extensible command completion.\n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26682344,26682344,
sipa,2013-10-20T20:53:19Z,"Fair enough- I wasn't entirely serious of course. I just mean that a featureful RPC client sounds useful, and Python (or any script language) sounds more appropriate for developing that than C++ - and easier to review.\n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26682386,26682386,
wtogami,2013-10-20T21:08:53Z,"A python RPC client would definitely have benefits except for ease of cross platform distribution.  For example, it appears that py2exe can't be cross-compiled from a Linux host and also relies upon Microsoft DLL's.\n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26682718,26682718,
super3,2013-10-20T21:41:30Z,@sipa Which is why I said it would be a fun project. One or two of those features would be really easy to hack together using existing libs.\n\n@wtogami Hmmm. Didn't know that py2exe had that limitation. Perhaps an alternative might provide the needed cross platform distribution. A quick google search reveals [cx_freeze](http://cx-freeze.sourceforge.net/) as a possibility. \n,https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26683496,26683496,
luke-jr,2013-10-21T04:09:30Z,FWIW: At least my Python install (on Linux) has a bunch of exes for building Windows stuff with.\n,https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26691897,26691897,
jgarzik,2013-10-21T04:17:55Z,"Any sort of python clientage is outside the scope of this pull request.  This PR is fine _right now_, even if a future decision replaces the C++ client with something else down the road.\n",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26692092,26692092,
laanwj,2013-10-21T06:30:14Z,"@sipa I now understand, you're thinking of some kind of interactive client, not so much the rpc client it is now that is used from the shell or shell script. Sure, that'd be a useful project. I played with that idea while making the debug console, but it stayed at that as we don't want a scripting language (js, python) in the main client :-) Let's open a new issue for that.\n\nIt'd be a complement",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26695157,26695157,
BitcoinPullTester,2013-10-21T07:40:13Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/2a03a39020da5ae38f05c38a5bf92c023acdeb90 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/3082#issuecomment-26697663,26697663,
sipa,2013-10-12T17:17:41Z,"Nit: I'm not sure that init should have knowledge about what type of clients it could be built into. How about using bit-position flags for each of the classes instead (HMM_RPC_CLIENT, HMM_OPTIONAL_RPC_SERVER, HMM_NODE, ...), and passing the combination to it?\n",https://github.com/bitcoin/bitcoin/pull/3082#discussion_r6932284,6932284,src/init.h
laanwj,2013-10-12T22:07:50Z,"That's possible. It shouldn't be in init.cpp either. Init contains all kinds of stuff that is unnecessary for the RPC client.\n\nUsing a bitfield still implies knowledge of the type of clients, just in another format. It does need to know about the GUI so it can disable -daemon, for example. I'm not sure this is important enough to warrant a lot of thinking/planning though. Having a parameter is a",https://github.com/bitcoin/bitcoin/pull/3082#discussion_r6932881,6932881,src/init.h
sipa,2013-10-13T14:10:56Z,Shouldn't this be HMM_BITCOIND || HMM_BITCOIN_QT?\n,https://github.com/bitcoin/bitcoin/pull/3082#discussion_r6934529,6934529,src/init.cpp
laanwj,2013-10-13T14:28:20Z,"Yes, you're right.\n",https://github.com/bitcoin/bitcoin/pull/3082#discussion_r6934574,6934574,src/init.cpp
