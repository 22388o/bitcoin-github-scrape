[
  {
    "sha": "70ed2ab7ef9e7ebf56f77b7c410a345ff455938f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3MGVkMmFiN2VmOWU3ZWJmNTZmNzdiN2M0MTBhMzQ1ZmY0NTU5Mzhm",
    "commit": {
      "author": {
        "name": "Aaron Clauson",
        "email": "aaron@sipsorcery.com",
        "date": "2019-11-30T21:31:46Z"
      },
      "committer": {
        "name": "Aaron Clauson",
        "email": "aaron@sipsorcery.com",
        "date": "2019-11-30T21:31:46Z"
      },
      "message": "Add unit test for DB creation with unicode path\n\nAn issue arose when attempting to switch back to the main repo version of leveldb when the bitcoin data directory uses a unicode path. The leveldb windows file IO wrapper was using the *A ANSI win32 calls instead of the Unicode *W ones. This unit test will catch if the path created by leveldb doesn't match what we're expecting. For more info see https://github.com/google/leveldb/issues/755.",
      "tree": {
        "sha": "0a5fe9362dabea71bc8b4571c2a1292ad29932a9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0a5fe9362dabea71bc8b4571c2a1292ad29932a9"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/70ed2ab7ef9e7ebf56f77b7c410a345ff455938f",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEnTzIanL4SUNC6l/RCkG9w/T6/xwFAl3i38IACgkQCkG9w/T6\n/xxSQg/8D0+j5+8geVste+9uysdOiMKxdulMMRMvSFWq1gd4zeTi13lshNqhI74r\n51+vz+AH8dieoI4PNr2YZ5uy99x9Nnh6crl8cDRioUIDKC3AtkoQUMpNxelnKwlI\nugtTHu8goUn1N6rVnMHq7/bJh5kKBECNIORjr2z6mOYrMstRiTgMslyjloPJqAju\nC0sARmFYprjQMIc8STDXKu8kGEn55NBzJKOTdCV1k6GYnG7u6NXNbLsatb52TxUO\no0T2fnrXzD8zNw9I0RqrUHaRC+7kNl5up1Rld/tiCGVqdvMWPjsnUnw0KTOoKwLA\nF7AKPuqTFE7dYnoZIiOSaY7uqrH5bw5w7NxugfELoMeFBdAy/cszkSOLsfj5W+TO\nW8SZ++CXGLDYdvz8FxhHQW0gsmrKep9wTi2TOikkdf0XJtMKp7mfGERt5/5HUX9D\nEwfzP4wb+J0X5q+ydpD2x9pbpg+77q5zHHgK+5jAdiwHE9B50ruyJJNTl9n+6S1i\npWBVbV4WTeYmeV6JSjZUlxc/4V0cW0miZLA/ibuiNlBlfERHzP1QygX70KxgIZHg\na+xFULctTc/3dwk9dfTzi3qo2o+htTSOK2eOW6rbsjY3AUWBAznSIc1OIICBJhRl\nbXtyIMfJYP19P6TZAg36+7pU6asE2uBqP6T9yFQUmGyIowwfFAA=\n=l8Yo\n-----END PGP SIGNATURE-----",
        "payload": "tree 0a5fe9362dabea71bc8b4571c2a1292ad29932a9\nparent 114e89e596a66f3cb1ebd8fc2d775b61c5722245\nauthor Aaron Clauson <aaron@sipsorcery.com> 1575149506 +0000\ncommitter Aaron Clauson <aaron@sipsorcery.com> 1575149506 +0000\n\nAdd unit test for DB creation with unicode path\n\nAn issue arose when attempting to switch back to the main repo version of leveldb when the bitcoin data directory uses a unicode path. The leveldb windows file IO wrapper was using the *A ANSI win32 calls instead of the Unicode *W ones. This unit test will catch if the path created by leveldb doesn't match what we're expecting. For more info see https://github.com/google/leveldb/issues/755.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/70ed2ab7ef9e7ebf56f77b7c410a345ff455938f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/70ed2ab7ef9e7ebf56f77b7c410a345ff455938f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/70ed2ab7ef9e7ebf56f77b7c410a345ff455938f/comments",
    "author": {
      "login": "sipsorcery",
      "id": 197660,
      "node_id": "MDQ6VXNlcjE5NzY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/197660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipsorcery",
      "html_url": "https://github.com/sipsorcery",
      "followers_url": "https://api.github.com/users/sipsorcery/followers",
      "following_url": "https://api.github.com/users/sipsorcery/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipsorcery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipsorcery/subscriptions",
      "organizations_url": "https://api.github.com/users/sipsorcery/orgs",
      "repos_url": "https://api.github.com/users/sipsorcery/repos",
      "events_url": "https://api.github.com/users/sipsorcery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipsorcery/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipsorcery",
      "id": 197660,
      "node_id": "MDQ6VXNlcjE5NzY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/197660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipsorcery",
      "html_url": "https://github.com/sipsorcery",
      "followers_url": "https://api.github.com/users/sipsorcery/followers",
      "following_url": "https://api.github.com/users/sipsorcery/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipsorcery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipsorcery/subscriptions",
      "organizations_url": "https://api.github.com/users/sipsorcery/orgs",
      "repos_url": "https://api.github.com/users/sipsorcery/repos",
      "events_url": "https://api.github.com/users/sipsorcery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipsorcery/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "114e89e596a66f3cb1ebd8fc2d775b61c5722245",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/114e89e596a66f3cb1ebd8fc2d775b61c5722245",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/114e89e596a66f3cb1ebd8fc2d775b61c5722245"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 12,
      "deletions": 0
    },
    "files": [
      {
        "sha": "b647c0f70b3abf3b6d89146658eee7ab6d6eff88",
        "filename": "src/test/dbwrapper_tests.cpp",
        "status": "modified",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/70ed2ab7ef9e7ebf56f77b7c410a345ff455938f/src/test/dbwrapper_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/70ed2ab7ef9e7ebf56f77b7c410a345ff455938f/src/test/dbwrapper_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/dbwrapper_tests.cpp?ref=70ed2ab7ef9e7ebf56f77b7c410a345ff455938f",
        "patch": "@@ -397,6 +397,18 @@ BOOST_AUTO_TEST_CASE(iterator_string_ordering)\n     }\n }\n \n+BOOST_AUTO_TEST_CASE(unicodepath)\n+{\n+    // Attempt to create a database with a utf8 character in the path.\n+    // On Windows this test will fail if the directory is created using\n+    // the ANSI CreateDirectoryA  call and the code page isn't UTF8.\n+    // It will succeed if the created with  CreateDirectoryW.\n+    fs::path ph = GetDataDir() / \"test_runner_\u20bf_\ud83c\udfc3_20191128_104644\";\n+    CDBWrapper dbw(ph, (1 << 20));\n+\n+    fs::path lockPath = ph / \"LOCK\";\n+    BOOST_CHECK(boost::filesystem::exists(lockPath));\n+}\n \n \n BOOST_AUTO_TEST_SUITE_END()"
      }
    ]
  }
]