[
  {
    "sha": "fac3a054cb76597a45e7cfe31d1067c25872c760",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWMzYTA1NGNiNzY1OTdhNDVlN2NmZTMxZDEwNjdjMjU4NzJjNzYw",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-02-02T22:49:28Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-02-02T22:45:20Z"
      },
      "message": "test: Fix race in p2p_invalid_messages",
      "tree": {
        "sha": "af5a55e12443316a239f3f741fdbb15677ba9657",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/af5a55e12443316a239f3f741fdbb15677ba9657"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fac3a054cb76597a45e7cfe31d1067c25872c760",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGcBAABCgAGBQJcVh2AAAoJEM4rdWl+aaVIfhMMAM8777MF0p/NGhcTF8HTLIb9\n7c3nty5fqYd/ncP08D7Jbv2cpgpNdaEKZi6WQIINjIcmp6X8wpkifniGHF5PbwEu\namO0hqpezU6SO8ASnZ0pHmH/+1xjPMAQBM5tsbG0/VBUNuZsDnpC5S6W/KaRU2kL\nbQx81uqA/oSijv5AyVziq6bCFym+b8VUP9lXxKGOFaPQy6iYTLoH0d6Et0FxXIoM\n2HWNb6fUVAjL+b0697GvEKu/sTa51u6z4A6ZAUoiKTxHdRbmWziKVcbyFMyJmIez\nKnCktUd2sPONDIHi0vW7YeiegeIQdcZHlWLokWi6PO5ERSesSBQQ3OCjoX2KxCwf\nli9X8gVSozLjD0avua8MRqVGnyLaXlid0+yS05jIQaDGVPegc4rlxOaI3pHHfFuX\nur/yB8sk1ogW7ktFNRLCF0s4DhE/+h54nygb/yx87XjKroJkHVSShVhbwbJAF/p5\nC6Eh2zooBZLRjrxwAkuUJjLnP2NeYjD5zyDiWWHKyQ==\n=oXAf\n-----END PGP SIGNATURE-----",
        "payload": "tree af5a55e12443316a239f3f741fdbb15677ba9657\nparent 2c0867a1811bd7120aa66d98723ae96b065a3c1b\nauthor MarcoFalke <falke.marco@gmail.com> 1549147768 -0500\ncommitter MarcoFalke <falke.marco@gmail.com> 1549147520 -0500\n\ntest: Fix race in p2p_invalid_messages\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fac3a054cb76597a45e7cfe31d1067c25872c760",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fac3a054cb76597a45e7cfe31d1067c25872c760",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fac3a054cb76597a45e7cfe31d1067c25872c760/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2c0867a1811bd7120aa66d98723ae96b065a3c1b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2c0867a1811bd7120aa66d98723ae96b065a3c1b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2c0867a1811bd7120aa66d98723ae96b065a3c1b"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "700fdf6e04442da033998fbaff5de3d50752bce4",
        "filename": "test/functional/p2p_invalid_messages.py",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fac3a054cb76597a45e7cfe31d1067c25872c760/test/functional/p2p_invalid_messages.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fac3a054cb76597a45e7cfe31d1067c25872c760/test/functional/p2p_invalid_messages.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/p2p_invalid_messages.py?ref=fac3a054cb76597a45e7cfe31d1067c25872c760",
        "patch": "@@ -1,5 +1,5 @@\n #!/usr/bin/env python3\n-# Copyright (c) 2015-2018 The Bitcoin Core developers\n+# Copyright (c) 2015-2019 The Bitcoin Core developers\n # Distributed under the MIT software license, see the accompanying\n # file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \"\"\"Test node responses to invalid network messages.\"\"\"\n@@ -143,6 +143,7 @@ def run_test(self):\n \n     def test_magic_bytes(self):\n         conn = self.nodes[0].add_p2p_connection(P2PDataStore())\n+        conn._on_data = lambda: None  # Need to ignore all incoming messages from now, since they come with \"invalid\" magic bytes\n         conn.magic_bytes = b'\\x00\\x11\\x22\\x32'\n         with self.nodes[0].assert_debug_log(['PROCESSMESSAGE: INVALID MESSAGESTART ping']):\n             conn.send_message(messages.msg_ping(nonce=0xff))\n@@ -211,6 +212,5 @@ def _tweak_msg_data_size(self, message, wrong_size):\n         return raw_msg_with_wrong_size\n \n \n-\n if __name__ == '__main__':\n     InvalidMessagesTest().main()"
      }
    ]
  }
]