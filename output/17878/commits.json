[
  {
    "sha": "58fc12755ff0ff1b2b4e03c7e0c1944ee454f795",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1OGZjMTI3NTVmZjBmZjFiMmI0ZTAzYzdlMGMxOTQ0ZWU0NTRmNzk1",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2020-01-06T03:26:07Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2020-01-06T03:29:52Z"
      },
      "message": "wallet: Add g_wallet_transaction_changed signal",
      "tree": {
        "sha": "f8fb338ec1060359181bf632075b2895f5b10505",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f8fb338ec1060359181bf632075b2895f5b10505"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/58fc12755ff0ff1b2b4e03c7e0c1944ee454f795",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/58fc12755ff0ff1b2b4e03c7e0c1944ee454f795",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/58fc12755ff0ff1b2b4e03c7e0c1944ee454f795",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/58fc12755ff0ff1b2b4e03c7e0c1944ee454f795/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b949ac9697a6cfe087f60a16c063ab9c5bf1e81f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b949ac9697a6cfe087f60a16c063ab9c5bf1e81f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b949ac9697a6cfe087f60a16c063ab9c5bf1e81f"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 5,
      "deletions": 0
    },
    "files": [
      {
        "sha": "3f7a1130a2512308e98cd07d611271f83c5da1c8",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/58fc12755ff0ff1b2b4e03c7e0c1944ee454f795/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/58fc12755ff0ff1b2b4e03c7e0c1944ee454f795/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=58fc12755ff0ff1b2b4e03c7e0c1944ee454f795",
        "patch": "@@ -48,13 +48,16 @@ static const size_t OUTPUT_GROUP_MAX_ENTRIES = 10;\n static CCriticalSection cs_wallets;\n static std::vector<std::shared_ptr<CWallet>> vpwallets GUARDED_BY(cs_wallets);\n \n+boost::signals2::signal<void (CWallet *wallet, const uint256 &hash, ChangeType status)> g_wallet_transaction_changed;\n+\n bool AddWallet(const std::shared_ptr<CWallet>& wallet)\n {\n     LOCK(cs_wallets);\n     assert(wallet);\n     std::vector<std::shared_ptr<CWallet>>::const_iterator i = std::find(vpwallets.begin(), vpwallets.end(), wallet);\n     if (i != vpwallets.end()) return false;\n     vpwallets.push_back(wallet);\n+    wallet->NotifyTransactionChanged.connect(g_wallet_transaction_changed);\n     return true;\n }\n "
      },
      {
        "sha": "4a4bcdb10b05a4d66066d195d65b42e1baf2a6e2",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/58fc12755ff0ff1b2b4e03c7e0c1944ee454f795/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/58fc12755ff0ff1b2b4e03c7e0c1944ee454f795/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=58fc12755ff0ff1b2b4e03c7e0c1944ee454f795",
        "patch": "@@ -49,6 +49,8 @@ std::vector<std::shared_ptr<CWallet>> GetWallets();\n std::shared_ptr<CWallet> GetWallet(const std::string& name);\n std::shared_ptr<CWallet> LoadWallet(interfaces::Chain& chain, const WalletLocation& location, std::string& error, std::vector<std::string>& warnings);\n \n+extern boost::signals2::signal<void (CWallet *wallet, const uint256 &hash, ChangeType status)> g_wallet_transaction_changed;\n+\n enum class WalletCreationStatus {\n     SUCCESS,\n     CREATION_FAILED,"
      }
    ]
  },
  {
    "sha": "b9059ccb103586d39e132b7a06bc358ef3855864",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiOTA1OWNjYjEwMzU4NmQzOWUxMzJiN2EwNmJjMzU4ZWYzODU1ODY0",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2020-01-06T03:28:19Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2020-01-06T03:29:52Z"
      },
      "message": "zmq: Support -zmqpubwallettx",
      "tree": {
        "sha": "87af3fa15496884cfa40ae367fcbe1e9be730701",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/87af3fa15496884cfa40ae367fcbe1e9be730701"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b9059ccb103586d39e132b7a06bc358ef3855864",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b9059ccb103586d39e132b7a06bc358ef3855864",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b9059ccb103586d39e132b7a06bc358ef3855864",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b9059ccb103586d39e132b7a06bc358ef3855864/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "58fc12755ff0ff1b2b4e03c7e0c1944ee454f795",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/58fc12755ff0ff1b2b4e03c7e0c1944ee454f795",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/58fc12755ff0ff1b2b4e03c7e0c1944ee454f795"
      }
    ],
    "stats": {
      "total": 54,
      "additions": 51,
      "deletions": 3
    },
    "files": [
      {
        "sha": "7bb6c00a4f81700e849c8ff652b8251a5cbb4ebc",
        "filename": "src/zmq/zmqabstractnotifier.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b9059ccb103586d39e132b7a06bc358ef3855864/src/zmq/zmqabstractnotifier.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b9059ccb103586d39e132b7a06bc358ef3855864/src/zmq/zmqabstractnotifier.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/zmq/zmqabstractnotifier.cpp?ref=b9059ccb103586d39e132b7a06bc358ef3855864",
        "patch": "@@ -20,3 +20,8 @@ bool CZMQAbstractNotifier::NotifyTransaction(const CTransaction &/*transaction*/\n {\n     return true;\n }\n+\n+bool CZMQAbstractNotifier::WalletTransactionChanged(CWallet* /*wallet*/, const uint256& /*hashTx*/, ChangeType /*status*/)\n+{\n+    return true;\n+}"
      },
      {
        "sha": "37c04add8545db2e7459455f0532816d4ae9d530",
        "filename": "src/zmq/zmqabstractnotifier.h",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b9059ccb103586d39e132b7a06bc358ef3855864/src/zmq/zmqabstractnotifier.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b9059ccb103586d39e132b7a06bc358ef3855864/src/zmq/zmqabstractnotifier.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/zmq/zmqabstractnotifier.h?ref=b9059ccb103586d39e132b7a06bc358ef3855864",
        "patch": "@@ -5,9 +5,12 @@\n #ifndef BITCOIN_ZMQ_ZMQABSTRACTNOTIFIER_H\n #define BITCOIN_ZMQ_ZMQABSTRACTNOTIFIER_H\n \n+#include <ui_interface.h>\n+#include <uint256.h>\n #include <zmq/zmqconfig.h>\n \n class CBlockIndex;\n+class CWallet;\n class CZMQAbstractNotifier;\n \n typedef CZMQAbstractNotifier* (*CZMQNotifierFactory)();\n@@ -42,6 +45,7 @@ class CZMQAbstractNotifier\n \n     virtual bool NotifyBlock(const CBlockIndex *pindex);\n     virtual bool NotifyTransaction(const CTransaction &transaction);\n+    virtual bool WalletTransactionChanged(CWallet* wallet, const uint256& hashTx, ChangeType status);\n \n protected:\n     void *psocket;"
      },
      {
        "sha": "1d4a558add532aa4da1211be2c8ff16162702337",
        "filename": "src/zmq/zmqnotificationinterface.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b9059ccb103586d39e132b7a06bc358ef3855864/src/zmq/zmqnotificationinterface.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b9059ccb103586d39e132b7a06bc358ef3855864/src/zmq/zmqnotificationinterface.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/zmq/zmqnotificationinterface.cpp?ref=b9059ccb103586d39e132b7a06bc358ef3855864",
        "patch": "@@ -46,6 +46,7 @@ CZMQNotificationInterface* CZMQNotificationInterface::Create()\n     factories[\"pubhashtx\"] = CZMQAbstractNotifier::Create<CZMQPublishHashTransactionNotifier>;\n     factories[\"pubrawblock\"] = CZMQAbstractNotifier::Create<CZMQPublishRawBlockNotifier>;\n     factories[\"pubrawtx\"] = CZMQAbstractNotifier::Create<CZMQPublishRawTransactionNotifier>;\n+    factories[\"pubwallettx\"] = CZMQAbstractNotifier::Create<CZMQPublishWalletTransactionNotifier>;\n \n     for (const auto& entry : factories)\n     {\n@@ -193,4 +194,17 @@ void CZMQNotificationInterface::BlockDisconnected(const std::shared_ptr<const CB\n     }\n }\n \n+void CZMQNotificationInterface::WalletTransactionChanged(CWallet* wallet, const uint256& hashTx, ChangeType status)\n+{\n+    for (std::list<CZMQAbstractNotifier*>::iterator i = notifiers.begin(); i!=notifiers.end(); ) {\n+        CZMQAbstractNotifier *notifier = *i;\n+        if (notifier->WalletTransactionChanged(wallet, hashTx, status)) {\n+            i++;\n+        } else {\n+            notifier->Shutdown();\n+            i = notifiers.erase(i);\n+        }\n+    }\n+}\n+\n CZMQNotificationInterface* g_zmq_notification_interface = nullptr;"
      },
      {
        "sha": "a650332beaedbe6e3cbd0fe18ff2d5d1e6f886af",
        "filename": "src/zmq/zmqnotificationinterface.h",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b9059ccb103586d39e132b7a06bc358ef3855864/src/zmq/zmqnotificationinterface.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b9059ccb103586d39e132b7a06bc358ef3855864/src/zmq/zmqnotificationinterface.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/zmq/zmqnotificationinterface.h?ref=b9059ccb103586d39e132b7a06bc358ef3855864",
        "patch": "@@ -5,10 +5,13 @@\n #ifndef BITCOIN_ZMQ_ZMQNOTIFICATIONINTERFACE_H\n #define BITCOIN_ZMQ_ZMQNOTIFICATIONINTERFACE_H\n \n+#include <ui_interface.h>\n+#include <uint256.h>\n #include <validationinterface.h>\n #include <list>\n \n class CBlockIndex;\n+class CWallet;\n class CZMQAbstractNotifier;\n \n class CZMQNotificationInterface final : public CValidationInterface\n@@ -20,6 +23,8 @@ class CZMQNotificationInterface final : public CValidationInterface\n \n     static CZMQNotificationInterface* Create();\n \n+    void WalletTransactionChanged(CWallet* wallet, const uint256& hashTx, ChangeType status);\n+\n protected:\n     bool Initialize();\n     void Shutdown();"
      },
      {
        "sha": "96bbc7ec8cf1c97f2f873ffd00934006875b506a",
        "filename": "src/zmq/zmqpublishnotifier.cpp",
        "status": "modified",
        "additions": 17,
        "deletions": 3,
        "changes": 20,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b9059ccb103586d39e132b7a06bc358ef3855864/src/zmq/zmqpublishnotifier.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b9059ccb103586d39e132b7a06bc358ef3855864/src/zmq/zmqpublishnotifier.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/zmq/zmqpublishnotifier.cpp?ref=b9059ccb103586d39e132b7a06bc358ef3855864",
        "patch": "@@ -4,18 +4,21 @@\n \n #include <chain.h>\n #include <chainparams.h>\n+#include <rpc/server.h>\n+#include <sstream>\n #include <streams.h>\n-#include <zmq/zmqpublishnotifier.h>\n-#include <validation.h>\n #include <util/system.h>\n-#include <rpc/server.h>\n+#include <validation.h>\n+#include <wallet/wallet.h>\n+#include <zmq/zmqpublishnotifier.h>\n \n static std::multimap<std::string, CZMQAbstractPublishNotifier*> mapPublishNotifiers;\n \n static const char *MSG_HASHBLOCK = \"hashblock\";\n static const char *MSG_HASHTX    = \"hashtx\";\n static const char *MSG_RAWBLOCK  = \"rawblock\";\n static const char *MSG_RAWTX     = \"rawtx\";\n+static const char *MSG_WALLETTX  = \"wallettx\";\n \n // Internal function to send multipart message\n static int zmq_send_multipart(void *sock, const void* data, size_t size, ...)\n@@ -206,3 +209,14 @@ bool CZMQPublishRawTransactionNotifier::NotifyTransaction(const CTransaction &tr\n     ss << transaction;\n     return SendMessage(MSG_RAWTX, &(*ss.begin()), ss.size());\n }\n+\n+bool CZMQPublishWalletTransactionNotifier::WalletTransactionChanged(CWallet* wallet, const uint256& hash, ChangeType status)\n+{\n+    std::ostringstream oss;\n+    uint32_t name_size = htonl(wallet->GetName().size());\n+    oss.write((const char*)&name_size, sizeof(name_size));\n+    oss << wallet->GetName();\n+    oss.write(hash, 32);\n+    std::string s = oss.str();\n+    return SendMessage(MSG_WALLETTX, s.c_str(), s.size());\n+}"
      },
      {
        "sha": "5410417f96e481615c13af69657b39775aa5707e",
        "filename": "src/zmq/zmqpublishnotifier.h",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b9059ccb103586d39e132b7a06bc358ef3855864/src/zmq/zmqpublishnotifier.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b9059ccb103586d39e132b7a06bc358ef3855864/src/zmq/zmqpublishnotifier.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/zmq/zmqpublishnotifier.h?ref=b9059ccb103586d39e132b7a06bc358ef3855864",
        "patch": "@@ -52,4 +52,10 @@ class CZMQPublishRawTransactionNotifier : public CZMQAbstractPublishNotifier\n     bool NotifyTransaction(const CTransaction &transaction) override;\n };\n \n+class CZMQPublishWalletTransactionNotifier : public CZMQAbstractPublishNotifier\n+{\n+public:\n+    bool WalletTransactionChanged(CWallet* wallet, const uint256& hashTx, ChangeType status);\n+};\n+\n #endif // BITCOIN_ZMQ_ZMQPUBLISHNOTIFIER_H"
      }
    ]
  },
  {
    "sha": "aed8034a9098914b9cb41975c7ebb8181e4a102d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphZWQ4MDM0YTkwOTg5MTRiOWNiNDE5NzVjN2ViYjgxODFlNGExMDJk",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2020-01-06T03:29:17Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2020-01-06T12:15:20Z"
      },
      "message": "zmq: Enable -zmqpubwallettx",
      "tree": {
        "sha": "ee7357a1948e1ecc5af841122f42ca6cd50b86f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ee7357a1948e1ecc5af841122f42ca6cd50b86f2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aed8034a9098914b9cb41975c7ebb8181e4a102d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aed8034a9098914b9cb41975c7ebb8181e4a102d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/aed8034a9098914b9cb41975c7ebb8181e4a102d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aed8034a9098914b9cb41975c7ebb8181e4a102d/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b9059ccb103586d39e132b7a06bc358ef3855864",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b9059ccb103586d39e132b7a06bc358ef3855864",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b9059ccb103586d39e132b7a06bc358ef3855864"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 12,
      "deletions": 1
    },
    "files": [
      {
        "sha": "266a1df7cac375a536c701b10dd09c106fe6068f",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aed8034a9098914b9cb41975c7ebb8181e4a102d/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aed8034a9098914b9cb41975c7ebb8181e4a102d/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=aed8034a9098914b9cb41975c7ebb8181e4a102d",
        "patch": "@@ -55,6 +55,9 @@\n #include <validation.h>\n #include <validationinterface.h>\n #include <walletinitinterface.h>\n+#ifdef ENABLE_WALLET\n+#include <wallet/wallet.h>\n+#endif\n \n #include <stdint.h>\n #include <stdio.h>\n@@ -459,6 +462,7 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-zmqpubhashtxhwm=<n>\", strprintf(\"Set publish hash transaction outbound message high water mark (default: %d)\", CZMQAbstractNotifier::DEFAULT_ZMQ_SNDHWM), ArgsManager::ALLOW_ANY, OptionsCategory::ZMQ);\n     gArgs.AddArg(\"-zmqpubrawblockhwm=<n>\", strprintf(\"Set publish raw block outbound message high water mark (default: %d)\", CZMQAbstractNotifier::DEFAULT_ZMQ_SNDHWM), ArgsManager::ALLOW_ANY, OptionsCategory::ZMQ);\n     gArgs.AddArg(\"-zmqpubrawtxhwm=<n>\", strprintf(\"Set publish raw transaction outbound message high water mark (default: %d)\", CZMQAbstractNotifier::DEFAULT_ZMQ_SNDHWM), ArgsManager::ALLOW_ANY, OptionsCategory::ZMQ);\n+    gArgs.AddArg(\"-zmqpubwallettx=<address>\", \"Enable publish wallet transaction in <address>\", ArgsManager::ALLOW_ANY, OptionsCategory::ZMQ);\n #else\n     hidden_args.emplace_back(\"-zmqpubhashblock=<address>\");\n     hidden_args.emplace_back(\"-zmqpubhashtx=<address>\");\n@@ -468,6 +472,7 @@ void SetupServerArgs()\n     hidden_args.emplace_back(\"-zmqpubhashtxhwm=<n>\");\n     hidden_args.emplace_back(\"-zmqpubrawblockhwm=<n>\");\n     hidden_args.emplace_back(\"-zmqpubrawtxhwm=<n>\");\n+    hidden_args.emplace_back(\"-zmqpubwallettx=<address>\");\n #endif\n \n     gArgs.AddArg(\"-checkblocks=<n>\", strprintf(\"How many blocks to check at startup (default: %u, 0 = all)\", DEFAULT_CHECKBLOCKS), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n@@ -1408,6 +1413,12 @@ bool AppInitMain(NodeContext& node)\n     if (g_zmq_notification_interface) {\n         RegisterValidationInterface(g_zmq_notification_interface);\n     }\n+#ifdef ENABLE_WALLET\n+    g_wallet_transaction_changed.connect(\n+        [](CWallet* wallet, const uint256& txid, ChangeType status) {\n+            g_zmq_notification_interface->WalletTransactionChanged(wallet, txid, status);\n+    });\n+#endif\n #endif\n     uint64_t nMaxOutboundLimit = 0; //unlimited unless -maxuploadtarget is set\n     uint64_t nMaxOutboundTimeframe = MAX_UPLOAD_TIMEFRAME;"
      },
      {
        "sha": "e31528cca8f562ae569e441091cd4c72ea8bb8ae",
        "filename": "src/zmq/zmqpublishnotifier.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aed8034a9098914b9cb41975c7ebb8181e4a102d/src/zmq/zmqpublishnotifier.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aed8034a9098914b9cb41975c7ebb8181e4a102d/src/zmq/zmqpublishnotifier.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/zmq/zmqpublishnotifier.cpp?ref=aed8034a9098914b9cb41975c7ebb8181e4a102d",
        "patch": "@@ -216,7 +216,7 @@ bool CZMQPublishWalletTransactionNotifier::WalletTransactionChanged(CWallet* wal\n     uint32_t name_size = htonl(wallet->GetName().size());\n     oss.write((const char*)&name_size, sizeof(name_size));\n     oss << wallet->GetName();\n-    oss.write(hash, 32);\n+    oss.write((const char*) hash.begin(), 32);\n     std::string s = oss.str();\n     return SendMessage(MSG_WALLETTX, s.c_str(), s.size());\n }"
      }
    ]
  },
  {
    "sha": "52a5dd871a0251d33daa58f017ebfbdef360fec2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1MmE1ZGQ4NzFhMDI1MWQzM2RhYTU4ZjAxN2ViZmJkZWYzNjBmZWMy",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2020-01-06T12:16:04Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2020-01-06T12:16:04Z"
      },
      "message": "contrib: Subscribe to wallettx in zmq_sub.py",
      "tree": {
        "sha": "7755fbd84cc4afeeeeedc992556bb382d46bb7e5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7755fbd84cc4afeeeeedc992556bb382d46bb7e5"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/52a5dd871a0251d33daa58f017ebfbdef360fec2",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/52a5dd871a0251d33daa58f017ebfbdef360fec2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/52a5dd871a0251d33daa58f017ebfbdef360fec2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/52a5dd871a0251d33daa58f017ebfbdef360fec2/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "aed8034a9098914b9cb41975c7ebb8181e4a102d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aed8034a9098914b9cb41975c7ebb8181e4a102d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/aed8034a9098914b9cb41975c7ebb8181e4a102d"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 4,
      "deletions": 0
    },
    "files": [
      {
        "sha": "f618a47165d6ac925c75430c47237294c10a3766",
        "filename": "contrib/zmq/zmq_sub.py",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/52a5dd871a0251d33daa58f017ebfbdef360fec2/contrib/zmq/zmq_sub.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/52a5dd871a0251d33daa58f017ebfbdef360fec2/contrib/zmq/zmq_sub.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/zmq/zmq_sub.py?ref=52a5dd871a0251d33daa58f017ebfbdef360fec2",
        "patch": "@@ -47,6 +47,7 @@ def __init__(self):\n         self.zmqSubSocket.setsockopt_string(zmq.SUBSCRIBE, \"hashtx\")\n         self.zmqSubSocket.setsockopt_string(zmq.SUBSCRIBE, \"rawblock\")\n         self.zmqSubSocket.setsockopt_string(zmq.SUBSCRIBE, \"rawtx\")\n+        self.zmqSubSocket.setsockopt_string(zmq.SUBSCRIBE, \"wallettx\")\n         self.zmqSubSocket.connect(\"tcp://127.0.0.1:%i\" % port)\n \n     async def handle(self) :\n@@ -69,6 +70,9 @@ async def handle(self) :\n         elif topic == b\"rawtx\":\n             print('- RAW TX ('+sequence+') -')\n             print(binascii.hexlify(body))\n+        elif topic == b\"wallettx\":\n+            print('- WALLET TX ('+sequence+') -')\n+            print(binascii.hexlify(body))\n         # schedule ourselves to receive the next message\n         asyncio.ensure_future(self.handle())\n "
      }
    ]
  }
]