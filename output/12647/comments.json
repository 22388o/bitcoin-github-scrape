[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372084114",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#issuecomment-372084114",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12647",
    "id": 372084114,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjA4NDExNA==",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-11T02:26:48Z",
    "updated_at": "2018-03-11T02:27:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "This looks fine to me. It looks like the existing leak scenarios are for fatal errors, but more RAII pointer types is good in my opinion.\r\n\r\nIt's kind of weird that you're putting this in a `std::unique_ptr` and then later on giving the raw pointer to a `WalletRescanReserver()`; for that pattern I would have expected to see a `std::shared_ptr`. That being said `WalletRescanReserver()` looks like kind of a mess in general (e.g. it uses a mutex to access `fScanningWallet` in `reserve()`, but not in `isReserved()`).\r\n\r\nutACK 9378d89",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372084114/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372159063",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#issuecomment-372159063",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12647",
    "id": 372159063,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjE1OTA2Mw==",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?u=c6cf723ac2c78d38bf31ae2665cb16e3e4452227&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-11T23:21:19Z",
    "updated_at": "2018-03-11T23:21:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "@eklitzke Thanks for the review. I think it is OK to use a `unique_ptr` there because `reserver` only exists within the lifetime of `walletInstance` so it will go out of scope before `walletInstance` releases or frees the allocated CWallet.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372159063/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372681020",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#issuecomment-372681020",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12647",
    "id": 372681020,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjY4MTAyMA==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-13T14:18:51Z",
    "updated_at": "2018-04-24T14:01:20Z",
    "author_association": "MEMBER",
    "body": "utACK 7dc50d4. In the future we could move `CreateWalletFromFile` to `WalletManager` (introduced in ~~#12587~~ #13034).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372681020/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/374635862",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#issuecomment-374635862",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12647",
    "id": 374635862,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDYzNTg2Mg==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-20T15:16:04Z",
    "updated_at": "2018-03-20T15:16:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "> WalletRescanReserver() looks like kind of a mess in general (e.g. it uses a mutex to access fScanningWallet in reserve(), but not in isReserved()).\r\n\r\nThis should be fine because it's an atomic bool.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/374635862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379847913",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#issuecomment-379847913",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12647",
    "id": 379847913,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTg0NzkxMw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-09T18:25:50Z",
    "updated_at": "2018-04-09T18:25:50Z",
    "author_association": "MEMBER",
    "body": "Needs rebase",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379847913/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381487946",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#issuecomment-381487946",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12647",
    "id": 381487946,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTQ4Nzk0Ng==",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?u=c6cf723ac2c78d38bf31ae2665cb16e3e4452227&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-16T05:57:34Z",
    "updated_at": "2018-04-16T05:57:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MarcoFalke Rebased",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381487946/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/383941581",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#issuecomment-383941581",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12647",
    "id": 383941581,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mzk0MTU4MQ==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-24T13:59:49Z",
    "updated_at": "2018-04-24T13:59:49Z",
    "author_association": "MEMBER",
    "body": "This conflicts with #13063. See [here](https://github.com/bitcoin/bitcoin/pull/13063/files#diff-b2bb174788c7409b671c46ccc86034bdR3925).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/383941581/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/384022779",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#issuecomment-384022779",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12647",
    "id": 384022779,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDAyMjc3OQ==",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?u=c6cf723ac2c78d38bf31ae2665cb16e3e4452227&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-24T17:53:06Z",
    "updated_at": "2018-04-24T17:53:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "No one seems to care about this (myself included), so I'll just close in favor of #13063.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/384022779/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173665252",
    "pull_request_review_id": 102892132,
    "id": 173665252,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MzY2NTI1Mg==",
    "diff_hunk": "@@ -3929,7 +3929,7 @@ CWallet* CWallet::CreateWalletFromFile(const std::string& name, const fs::path&\n \n     int64_t nStart = GetTimeMillis();\n     bool fFirstRun = true;\n-    CWallet *walletInstance = new CWallet(name, CWalletDBWrapper::Create(path));\n+    std::unique_ptr<CWallet> walletInstance(new CWallet(name, CWalletDBWrapper::Create(path)));",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "9378d89cbb9741493411d61bc1cffa4d02204dc5",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Use MakeUnique?",
    "created_at": "2018-03-11T18:57:58Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173665252",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173665252"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173665252"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173665252/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3932,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173665264",
    "pull_request_review_id": 102892132,
    "id": 173665264,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MzY2NTI2NA==",
    "diff_hunk": "@@ -4101,7 +4098,11 @@ CWallet* CWallet::CreateWalletFromFile(const std::string& name, const fs::path&\n         LogPrintf(\"mapAddressBook.size() = %u\\n\",  walletInstance->mapAddressBook.size());\n     }\n \n-    return walletInstance;\n+    walletInstance->m_last_block_processed = chainActive.Tip();\n+\n+    CWallet* wallet_ptr = walletInstance.release();\n+    RegisterValidationInterface(wallet_ptr);\n+    return wallet_ptr;",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 37,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "9378d89cbb9741493411d61bc1cffa4d02204dc5",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Release on return?",
    "created_at": "2018-03-11T18:58:27Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173665264",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173665264"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173665264"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173665264/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 4105,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173671198",
    "pull_request_review_id": 102897769,
    "id": 173671198,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MzY3MTE5OA==",
    "diff_hunk": "@@ -4101,7 +4098,11 @@ CWallet* CWallet::CreateWalletFromFile(const std::string& name, const fs::path&\n         LogPrintf(\"mapAddressBook.size() = %u\\n\",  walletInstance->mapAddressBook.size());\n     }\n \n-    return walletInstance;\n+    walletInstance->m_last_block_processed = chainActive.Tip();\n+\n+    CWallet* wallet_ptr = walletInstance.release();\n+    RegisterValidationInterface(wallet_ptr);\n+    return wallet_ptr;",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 37,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "9378d89cbb9741493411d61bc1cffa4d02204dc5",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Any particular reason? I did it this way so that it would be released before `RegisterValidationInterface` creates a global reference. Basically, if RegisterValidationInterface failed for some reason, a memory leak is probably better than a segfault. I don't feel too strongly though.",
    "created_at": "2018-03-11T21:51:04Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173671198",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173671198"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173671198"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173671198/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 4105,
    "side": "RIGHT",
    "in_reply_to_id": 173665264
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173677594",
    "pull_request_review_id": 102904307,
    "id": 173677594,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MzY3NzU5NA==",
    "diff_hunk": "@@ -3929,7 +3929,7 @@ CWallet* CWallet::CreateWalletFromFile(const std::string& name, const fs::path&\n \n     int64_t nStart = GetTimeMillis();\n     bool fFirstRun = true;\n-    CWallet *walletInstance = new CWallet(name, CWalletDBWrapper::Create(path));\n+    std::unique_ptr<CWallet> walletInstance(new CWallet(name, CWalletDBWrapper::Create(path)));",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "9378d89cbb9741493411d61bc1cffa4d02204dc5",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why? This is exactly what MakeUnique does, except that this constructs one unique_ptr, whereas `std::unique_ptr<CWallet> walletInstance = MakeUnique<...>(...)` would construct two.",
    "created_at": "2018-03-12T00:51:21Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173677594",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173677594"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173677594"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173677594/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3932,
    "side": "RIGHT",
    "in_reply_to_id": 173665252
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173678990",
    "pull_request_review_id": 102905801,
    "id": 173678990,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MzY3ODk5MA==",
    "diff_hunk": "@@ -3929,7 +3929,7 @@ CWallet* CWallet::CreateWalletFromFile(const std::string& name, const fs::path&\n \n     int64_t nStart = GetTimeMillis();\n     bool fFirstRun = true;\n-    CWallet *walletInstance = new CWallet(name, CWalletDBWrapper::Create(path));\n+    std::unique_ptr<CWallet> walletInstance(new CWallet(name, CWalletDBWrapper::Create(path)));",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "9378d89cbb9741493411d61bc1cffa4d02204dc5",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why do you say it would construct two?",
    "created_at": "2018-03-12T01:19:06Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173678990",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173678990"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173678990"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173678990/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3932,
    "side": "RIGHT",
    "in_reply_to_id": 173665252
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173696251",
    "pull_request_review_id": 102925560,
    "id": 173696251,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MzY5NjI1MQ==",
    "diff_hunk": "@@ -3929,7 +3929,7 @@ CWallet* CWallet::CreateWalletFromFile(const std::string& name, const fs::path&\n \n     int64_t nStart = GetTimeMillis();\n     bool fFirstRun = true;\n-    CWallet *walletInstance = new CWallet(name, CWalletDBWrapper::Create(path));\n+    std::unique_ptr<CWallet> walletInstance(new CWallet(name, CWalletDBWrapper::Create(path)));",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "9378d89cbb9741493411d61bc1cffa4d02204dc5",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`MakeUnique` constructs one (the right-hand side), then the left hand side is created using the move constructor.",
    "created_at": "2018-03-12T05:20:14Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173696251",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173696251"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173696251"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173696251/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3932,
    "side": "RIGHT",
    "in_reply_to_id": 173665252
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173739323",
    "pull_request_review_id": 102975738,
    "id": 173739323,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MzczOTMyMw==",
    "diff_hunk": "@@ -3929,7 +3929,7 @@ CWallet* CWallet::CreateWalletFromFile(const std::string& name, const fs::path&\n \n     int64_t nStart = GetTimeMillis();\n     bool fFirstRun = true;\n-    CWallet *walletInstance = new CWallet(name, CWalletDBWrapper::Create(path));\n+    std::unique_ptr<CWallet> walletInstance(new CWallet(name, CWalletDBWrapper::Create(path)));",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "9378d89cbb9741493411d61bc1cffa4d02204dc5",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think the compiler will optimize the copy initialization. Anyway, there are [several advantages](https://stackoverflow.com/a/37514601) and we are using MakeUnique so that we can replace with std::make_unique when we switch to c++14.",
    "created_at": "2018-03-12T09:52:32Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173739323",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173739323"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173739323"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173739323/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3932,
    "side": "RIGHT",
    "in_reply_to_id": 173665252
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173740488",
    "pull_request_review_id": 102977037,
    "id": 173740488,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3Mzc0MDQ4OA==",
    "diff_hunk": "@@ -4101,7 +4098,11 @@ CWallet* CWallet::CreateWalletFromFile(const std::string& name, const fs::path&\n         LogPrintf(\"mapAddressBook.size() = %u\\n\",  walletInstance->mapAddressBook.size());\n     }\n \n-    return walletInstance;\n+    walletInstance->m_last_block_processed = chainActive.Tip();\n+\n+    CWallet* wallet_ptr = walletInstance.release();\n+    RegisterValidationInterface(wallet_ptr);\n+    return wallet_ptr;",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 37,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "9378d89cbb9741493411d61bc1cffa4d02204dc5",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> RegisterValidationInterface failed for some reason\r\n\r\nWe would want to shutdown no? Anyway leave as it is then.",
    "created_at": "2018-03-12T09:56:15Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173740488",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173740488"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173740488"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173740488/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 4105,
    "side": "RIGHT",
    "in_reply_to_id": 173665264
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173844570",
    "pull_request_review_id": 103100383,
    "id": 173844570,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3Mzg0NDU3MA==",
    "diff_hunk": "@@ -3929,7 +3929,7 @@ CWallet* CWallet::CreateWalletFromFile(const std::string& name, const fs::path&\n \n     int64_t nStart = GetTimeMillis();\n     bool fFirstRun = true;\n-    CWallet *walletInstance = new CWallet(name, CWalletDBWrapper::Create(path));\n+    std::unique_ptr<CWallet> walletInstance(new CWallet(name, CWalletDBWrapper::Create(path)));",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "9378d89cbb9741493411d61bc1cffa4d02204dc5",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ah, you're right about the compiler optimization. Didn't realize that. http://en.cppreference.com/w/cpp/language/copy_elision",
    "created_at": "2018-03-12T15:45:48Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173844570",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173844570"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r173844570"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173844570/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3932,
    "side": "RIGHT",
    "in_reply_to_id": 173665252
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174875670",
    "pull_request_review_id": 104308944,
    "id": 174875670,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3NDg3NTY3MA==",
    "diff_hunk": "@@ -4025,9 +4025,6 @@ CWallet* CWallet::CreateWalletFromFile(const std::string& name, const fs::path&\n             pindexRescan = FindForkInGlobalIndex(chainActive, locator);\n     }\n \n-    walletInstance->m_last_block_processed = chainActive.Tip();\n-    RegisterValidationInterface(walletInstance);",
    "path": "src/wallet/wallet.cpp",
    "position": 14,
    "original_position": 14,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "7dc50d40c8bd21f96a2e513b76830d381d2271c8",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't think you want to move the m_last_block_processed line above, because rescan code below will access it.\r\n\r\nI'm also not sure it's a great idea to be moving the `RegisterValidationInterface` call. It may work for now, but create a race condition if we allow loading wallets after node startup (see #10740).\r\n\r\nI think I'd suggest a more limited change than what's implemented here:\r\n\r\n* Creating the wallet above with:\r\n\r\n```c++\r\nauto wallet_deleter = MakeUnique<CWallet>(...);\r\nCWallet* walletInstance = wallet_deleter.get();\r\n```\r\n\r\n* And changing this line to:\r\n\r\n```c++\r\nRegisterValidationInterface(wallet_deleter.release());\r\n```",
    "created_at": "2018-03-15T17:56:46Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r174875670",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174875670"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r174875670"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174875670/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 4062,
    "original_line": 4062,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/175234932",
    "pull_request_review_id": 104741983,
    "id": 175234932,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3NTIzNDkzMg==",
    "diff_hunk": "@@ -4025,9 +4025,6 @@ CWallet* CWallet::CreateWalletFromFile(const std::string& name, const fs::path&\n             pindexRescan = FindForkInGlobalIndex(chainActive, locator);\n     }\n \n-    walletInstance->m_last_block_processed = chainActive.Tip();\n-    RegisterValidationInterface(walletInstance);",
    "path": "src/wallet/wallet.cpp",
    "position": 14,
    "original_position": 14,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "7dc50d40c8bd21f96a2e513b76830d381d2271c8",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't see where `m_last_block_processed` is accessed in the rescan code. It seems to me it's just used to implement `BlockUntilSyncedToCurrentChain`.\r\n\r\nThe RegisterValidationInterface call is tricky. I agree moving it down only works if the wallets are all loaded *before* the Connman starts, as is the case right now, but it would break if wallets are loaded/unloaded via RPC. Once way to handle it could be to call `UnregisterValidationInterface` in the `CWallet` destructor (even without calling `RegisterValidationInterface` in the constructor). In that case, we could leave the register call where it is. What do you think of that?",
    "created_at": "2018-03-16T23:18:21Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r175234932",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/175234932"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r175234932"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/175234932/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 4062,
    "original_line": 4062,
    "side": "LEFT",
    "in_reply_to_id": 174875670
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/175803851",
    "pull_request_review_id": 105393589,
    "id": 175803851,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3NTgwMzg1MQ==",
    "diff_hunk": "@@ -4025,9 +4025,6 @@ CWallet* CWallet::CreateWalletFromFile(const std::string& name, const fs::path&\n             pindexRescan = FindForkInGlobalIndex(chainActive, locator);\n     }\n \n-    walletInstance->m_last_block_processed = chainActive.Tip();\n-    RegisterValidationInterface(walletInstance);",
    "path": "src/wallet/wallet.cpp",
    "position": 14,
    "original_position": 14,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "7dc50d40c8bd21f96a2e513b76830d381d2271c8",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r174875670\r\n\r\n> I don't see where m_last_block_processed is accessed in the rescan code. It seems to me it's just used to implement BlockUntilSyncedToCurrentChain.\r\n\r\nYou're right. I misremembered and it should be fine to move this, if that's desirable.\r\n\r\n>  Once way to handle it could be to call UnregisterValidationInterface in the CWallet destructor (even without calling RegisterValidationInterface in the constructor). In that case, we could leave the register call where it is. What do you think of that?\r\n\r\nSeems good. Would fix the immediate problem and also help with dynamic loading.",
    "created_at": "2018-03-20T15:12:19Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r175803851",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/175803851"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r175803851"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/175803851/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 4062,
    "original_line": 4062,
    "side": "LEFT",
    "in_reply_to_id": 174875670
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179790601",
    "pull_request_review_id": 110103748,
    "id": 179790601,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3OTc5MDYwMQ==",
    "diff_hunk": "@@ -789,6 +789,10 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n \n     ~CWallet()\n     {\n+        // Even if RegisterValidationInstance was never called on this instance,\n+        // the unregister call is safe to make and is a no-op.\n+        UnregisterValidationInterface(this);",
    "path": "src/wallet/wallet.h",
    "position": null,
    "original_position": 6,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "effd82a08f2bf36b680c84b3929aa8414952f204",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think this doesn't work because UnregisterValidationInterface tries to call virtual methods, which isn't something you can do in c++ in the middle of object destruction. I ran into this problem in #10973\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/0bdf0e330d5d16e8e6a93d7d4ad663db812c4c91/src/interface/chain.cpp#L163-L169\r\n\r\n",
    "created_at": "2018-04-06T15:17:02Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r179790601",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179790601"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r179790601"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179790601/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 794,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179884852",
    "pull_request_review_id": 110219633,
    "id": 179884852,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3OTg4NDg1Mg==",
    "diff_hunk": "@@ -789,6 +789,10 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n \n     ~CWallet()\n     {\n+        // Even if RegisterValidationInstance was never called on this instance,\n+        // the unregister call is safe to make and is a no-op.\n+        UnregisterValidationInterface(this);",
    "path": "src/wallet/wallet.h",
    "position": null,
    "original_position": 6,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "effd82a08f2bf36b680c84b3929aa8414952f204",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Hmm, so then should I revert to the version where the Register call was moved to the bottom of the method?",
    "created_at": "2018-04-06T21:54:26Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r179884852",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179884852"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r179884852"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179884852/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 794,
    "side": "RIGHT",
    "in_reply_to_id": 179790601
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180386932",
    "pull_request_review_id": 110795928,
    "id": 180386932,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MDM4NjkzMg==",
    "diff_hunk": "@@ -789,6 +789,10 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n \n     ~CWallet()\n     {\n+        // Even if RegisterValidationInstance was never called on this instance,\n+        // the unregister call is safe to make and is a no-op.\n+        UnregisterValidationInterface(this);",
    "path": "src/wallet/wallet.h",
    "position": null,
    "original_position": 6,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "effd82a08f2bf36b680c84b3929aa8414952f204",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> Hmm, so then should I revert to the version where the Register call was moved to the bottom of the method?\r\n\r\nIIRC the problem with moving the registration is that it creates potential for race conditions if the code is called at any time other than startup, which is something that's been attempted in prs like #10740 (and I also want to support in #10102).\r\n\r\nI think I'd recommend just fixing the memory leak with the minimal suggestion from https://github.com/bitcoin/bitcoin/pull/12647#discussion_r174875670. But if you prefer moving the registration, that also seems fine with a comment mentioning the potential for race conditions.\r\n\r\nI think maybe the best way to clean up error handling and leaks here going forward would be to move initialization logic out of the static `CWallet::CreateWalletFromFile` method into a non-static `bool CWallet::Initialize(...) method`. This way errors could just be handled by returning `false` from `Initialize` and `CreateWalletFromFile` would only be responsible for constructing the wallet, calling Initialize, and deleting/unregistering the wallet object in the case of errors.",
    "created_at": "2018-04-10T11:36:09Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r180386932",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180386932"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r180386932"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180386932/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 794,
    "side": "RIGHT",
    "in_reply_to_id": 179790601
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181628084",
    "pull_request_review_id": 112286133,
    "id": 181628084,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTYyODA4NA==",
    "diff_hunk": "@@ -789,6 +789,10 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n \n     ~CWallet()\n     {\n+        // Even if RegisterValidationInstance was never called on this instance,\n+        // the unregister call is safe to make and is a no-op.\n+        UnregisterValidationInterface(this);",
    "path": "src/wallet/wallet.h",
    "position": null,
    "original_position": 6,
    "commit_id": "5799e57b128e293aa4a133245bd33e9a73eb3cef",
    "original_commit_id": "effd82a08f2bf36b680c84b3929aa8414952f204",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Is there actually a potential for race conditions? The function locks cs_main before the rescan logic and before the `RegisterValidationInterface` call even before it was moved.",
    "created_at": "2018-04-16T05:57:18Z",
    "updated_at": "2018-04-18T17:20:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r181628084",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181628084"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12647#discussion_r181628084"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12647"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181628084/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 794,
    "side": "RIGHT",
    "in_reply_to_id": 179790601
  }
]