[
  {
    "sha": "46f83453701fc6116d97de6a16986388ba63488f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0NmY4MzQ1MzcwMWZjNjExNmQ5N2RlNmExNjk4NjM4OGJhNjM0ODhm",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-26T09:35:52Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-31T17:10:51Z"
      },
      "message": "contrib: Support github pull request gitian-build",
      "tree": {
        "sha": "f73ec076da10d130f948a2e75b22167cdd2e6c6e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f73ec076da10d130f948a2e75b22167cdd2e6c6e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/46f83453701fc6116d97de6a16986388ba63488f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/46f83453701fc6116d97de6a16986388ba63488f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/46f83453701fc6116d97de6a16986388ba63488f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/46f83453701fc6116d97de6a16986388ba63488f/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "29b4ee64695f79511912ae127e66e0fe82f7a0d1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/29b4ee64695f79511912ae127e66e0fe82f7a0d1",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/29b4ee64695f79511912ae127e66e0fe82f7a0d1"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 10,
      "deletions": 1
    },
    "files": [
      {
        "sha": "0e53c3dfd5f0105c1d07c09a3ecf74c3c354d426",
        "filename": "contrib/gitian-build.py",
        "status": "modified",
        "additions": 10,
        "deletions": 1,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/46f83453701fc6116d97de6a16986388ba63488f/contrib/gitian-build.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/46f83453701fc6116d97de6a16986388ba63488f/contrib/gitian-build.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-build.py?ref=46f83453701fc6116d97de6a16986388ba63488f",
        "patch": "@@ -135,6 +135,7 @@ def main():\n \n     parser = argparse.ArgumentParser(usage='%(prog)s [options] signer version')\n     parser.add_argument('-c', '--commit', action='store_true', dest='commit', help='Indicate that the version argument is for a commit or branch')\n+    parser.add_argument('-p', '--pull', action='store_true', dest='pull', help='Indicate that the version argument is the number of a github repository pull request')\n     parser.add_argument('-u', '--url', dest='url', default='https://github.com/bitcoin/bitcoin', help='Specify the URL of the repository. Default is %(default)s')\n     parser.add_argument('-v', '--verify', action='store_true', dest='verify', help='Verify the Gitian build')\n     parser.add_argument('-b', '--build', action='store_true', dest='build', help='Do a Gitian build')\n@@ -196,13 +197,21 @@ def main():\n         exit(1)\n \n     # Add leading 'v' for tags\n+    if args.commit and args.pull:\n+        raise Exception('Cannot have both commit and pull')\n     args.commit = ('' if args.commit else 'v') + args.version\n-    print(args.commit)\n \n     if args.setup:\n         setup()\n \n     os.chdir('bitcoin')\n+    if args.pull:\n+        subprocess.check_call(['git', 'fetch', args.url, 'refs/pull/'+args.version+'/merge'])\n+        os.chdir('../gitian-builder/inputs/bitcoin')\n+        subprocess.check_call(['git', 'fetch', args.url, 'refs/pull/'+args.version+'/merge'])\n+        args.commit = subprocess.check_output(['git', 'show', '-s', '--format=%H', 'FETCH_HEAD'], universal_newlines=True).strip()\n+        args.version = 'pull-' + args.version\n+    print(args.commit)\n     subprocess.check_call(['git', 'fetch'])\n     subprocess.check_call(['git', 'checkout', args.commit])\n     os.chdir(workdir)"
      }
    ]
  }
]