[
  {
    "sha": "059a3cffdfa596aa3adaace3f57fa86fdd3f80fc",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowNTlhM2NmZmRmYTU5NmFhM2FkYWFjZTNmNTdmYTg2ZmRkM2Y4MGZj",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2019-01-14T15:32:05Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2019-01-14T15:32:05Z"
      },
      "message": "contrib: Detailed reporting for http errors in github-merge\n\nPrint detailed error, this makes it easier to diagnose github API issues.",
      "tree": {
        "sha": "915e8a2708870eec177c4d5892639031b7f9b15a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/915e8a2708870eec177c4d5892639031b7f9b15a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/059a3cffdfa596aa3adaace3f57fa86fdd3f80fc",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/059a3cffdfa596aa3adaace3f57fa86fdd3f80fc",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/059a3cffdfa596aa3adaace3f57fa86fdd3f80fc",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/059a3cffdfa596aa3adaace3f57fa86fdd3f80fc/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "035f349371a5b67922ce92c11ad9aa7178fa04f7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/035f349371a5b67922ce92c11ad9aa7178fa04f7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/035f349371a5b67922ce92c11ad9aa7178fa04f7"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 6,
      "deletions": 0
    },
    "files": [
      {
        "sha": "6712d4f3b654429e2b11530aca1cfa7b0497051b",
        "filename": "contrib/devtools/github-merge.py",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/059a3cffdfa596aa3adaace3f57fa86fdd3f80fc/contrib/devtools/github-merge.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/059a3cffdfa596aa3adaace3f57fa86fdd3f80fc/contrib/devtools/github-merge.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/github-merge.py?ref=059a3cffdfa596aa3adaace3f57fa86fdd3f80fc",
        "patch": "@@ -23,6 +23,7 @@\n import json\n import codecs\n from urllib.request import Request, urlopen\n+from urllib.error import HTTPError\n \n # External tools (can be overridden using environment)\n GIT = os.getenv('GIT','git')\n@@ -57,6 +58,11 @@ def retrieve_pr_info(repo,pull):\n         reader = codecs.getreader('utf-8')\n         obj = json.load(reader(result))\n         return obj\n+    except HTTPError as e:\n+        error_message = e.read()\n+        print('Warning: unable to retrieve pull information from github: %s' % e)\n+        print('Detailed error: %s' % error_message)\n+        return None\n     except Exception as e:\n         print('Warning: unable to retrieve pull information from github: %s' % e)\n         return None"
      }
    ]
  },
  {
    "sha": "a4c5bbfcd3a12f310b26cccc78ded32dd3f32ebb",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphNGM1YmJmY2QzYTEyZjMxMGIyNmNjY2M3OGRlZDMyZGQzZjMyZWJi",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2019-01-14T15:33:13Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2019-01-14T15:33:13Z"
      },
      "message": "contrib: Add support for http[s] URLs in github-merge\n\nSometimes it can be useful to use github-merge with read-only access\n(say, for reviewing and testing).",
      "tree": {
        "sha": "82d01524f5c3a2437eb4b3f33f655f39c3842363",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/82d01524f5c3a2437eb4b3f33f655f39c3842363"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a4c5bbfcd3a12f310b26cccc78ded32dd3f32ebb",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a4c5bbfcd3a12f310b26cccc78ded32dd3f32ebb",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a4c5bbfcd3a12f310b26cccc78ded32dd3f32ebb",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a4c5bbfcd3a12f310b26cccc78ded32dd3f32ebb/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "059a3cffdfa596aa3adaace3f57fa86fdd3f80fc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/059a3cffdfa596aa3adaace3f57fa86fdd3f80fc",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/059a3cffdfa596aa3adaace3f57fa86fdd3f80fc"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 4,
      "deletions": 1
    },
    "files": [
      {
        "sha": "bbebd11e8eb2c34bb715756614ddcb8e5628ffef",
        "filename": "contrib/devtools/github-merge.py",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a4c5bbfcd3a12f310b26cccc78ded32dd3f32ebb/contrib/devtools/github-merge.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a4c5bbfcd3a12f310b26cccc78ded32dd3f32ebb/contrib/devtools/github-merge.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/github-merge.py?ref=a4c5bbfcd3a12f310b26cccc78ded32dd3f32ebb",
        "patch": "@@ -168,7 +168,10 @@ def main():\n         print(\"git config --global user.signingkey <key>\",file=stderr)\n         sys.exit(1)\n \n-    host_repo = host+\":\"+repo # shortcut for push/pull target\n+    if host.startswith(('https:','http:')):\n+        host_repo = host+\"/\"+repo+\".git\"\n+    else:\n+        host_repo = host+\":\"+repo\n \n     # Extract settings from command line\n     args = parse_arguments()"
      }
    ]
  },
  {
    "sha": "f1bd219a5b318e4bea361e1247a233e4f251f517",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmMWJkMjE5YTViMzE4ZTRiZWEzNjFlMTI0N2EyMzNlNGYyNTFmNTE3",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2019-01-14T15:33:57Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2019-01-14T15:48:23Z"
      },
      "message": "contrib: Allow use of github API authentication in github-merge\n\nThe API request limit for unauthenticated requests is quite low.\nI started running into rate limiting errors. The limit\nfor authenticated requests is much higher.\n\nThis patch adds an optional configuration setting `user.ghtoken`\nthat, when set, is used to authenticate requests to the API.",
      "tree": {
        "sha": "69ceda55d55309a578ea4ab112a0740f70f6b4ad",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/69ceda55d55309a578ea4ab112a0740f70f6b4ad"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f1bd219a5b318e4bea361e1247a233e4f251f517",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f1bd219a5b318e4bea361e1247a233e4f251f517",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f1bd219a5b318e4bea361e1247a233e4f251f517",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f1bd219a5b318e4bea361e1247a233e4f251f517/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a4c5bbfcd3a12f310b26cccc78ded32dd3f32ebb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a4c5bbfcd3a12f310b26cccc78ded32dd3f32ebb",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a4c5bbfcd3a12f310b26cccc78ded32dd3f32ebb"
      }
    ],
    "stats": {
      "total": 28,
      "additions": 25,
      "deletions": 3
    },
    "files": [
      {
        "sha": "6ee65f40be8239a0ba29edae7059026ef97ebe47",
        "filename": "contrib/devtools/README.md",
        "status": "modified",
        "additions": 19,
        "deletions": 1,
        "changes": 20,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f1bd219a5b318e4bea361e1247a233e4f251f517/contrib/devtools/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f1bd219a5b318e4bea361e1247a233e4f251f517/contrib/devtools/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/README.md?ref=f1bd219a5b318e4bea361e1247a233e4f251f517",
        "patch": "@@ -119,7 +119,25 @@ Configuring the github-merge tool for the bitcoin repository is done in the foll\n \n     git config githubmerge.repository bitcoin/bitcoin\n     git config githubmerge.testcmd \"make -j4 check\" (adapt to whatever you want to use for testing)\n-    git config --global user.signingkey mykeyid (if you want to GPG sign)\n+    git config --global user.signingkey mykeyid\n+\n+Authentication (optional)\n+--------------------------\n+\n+The API request limit for unauthenticated requests is quite low, but the\n+limit for authenticated requests is much higher. If you start running\n+into rate limiting errors it can be useful to set an authentication token\n+so that the script can authenticate requests.\n+\n+- First, go to [Personal access tokens](https://github.com/settings/tokens).\n+- Click 'Generate new token'.\n+- Fill in an arbitrary token description. No further privileges are needed.\n+- Click the `Generate token` button at the bottom of the form.\n+- Copy the generated token (should be a hexadecimal string)\n+\n+Then do:\n+\n+    git config --global user.ghtoken \"pasted token\"\n \n Create and verify timestamps of merge commits\n ---------------------------------------------"
      },
      {
        "sha": "ab834b76237ea7243c0bc7afc50c130cbba67769",
        "filename": "contrib/devtools/github-merge.py",
        "status": "modified",
        "additions": 6,
        "deletions": 2,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f1bd219a5b318e4bea361e1247a233e4f251f517/contrib/devtools/github-merge.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f1bd219a5b318e4bea361e1247a233e4f251f517/contrib/devtools/github-merge.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/github-merge.py?ref=f1bd219a5b318e4bea361e1247a233e4f251f517",
        "patch": "@@ -47,13 +47,15 @@ def git_config_get(option, default=None):\n     except subprocess.CalledProcessError:\n         return default\n \n-def retrieve_pr_info(repo,pull):\n+def retrieve_pr_info(repo,pull,ghtoken):\n     '''\n     Retrieve pull request information from github.\n     Return None if no title can be found, or an error happens.\n     '''\n     try:\n         req = Request(\"https://api.github.com/repos/\"+repo+\"/pulls/\"+pull)\n+        if ghtoken is not None:\n+            req.add_header('Authorization', 'token ' + ghtoken)\n         result = urlopen(req)\n         reader = codecs.getreader('utf-8')\n         obj = json.load(reader(result))\n@@ -140,6 +142,7 @@ def parse_arguments():\n         In addition, you can set the following git configuration variables:\n         githubmerge.repository (mandatory),\n         user.signingkey (mandatory),\n+        user.ghtoken (default: none).\n         githubmerge.host (default: git@github.com),\n         githubmerge.branch (no default),\n         githubmerge.testcmd (default: none).\n@@ -158,6 +161,7 @@ def main():\n     host = git_config_get('githubmerge.host','git@github.com')\n     opt_branch = git_config_get('githubmerge.branch',None)\n     testcmd = git_config_get('githubmerge.testcmd')\n+    ghtoken = git_config_get('user.ghtoken')\n     signingkey = git_config_get('user.signingkey')\n     if repo is None:\n         print(\"ERROR: No repository configured. Use this command to set:\", file=stderr)\n@@ -178,7 +182,7 @@ def main():\n     pull = str(args.pull[0])\n \n     # Receive pull information from github\n-    info = retrieve_pr_info(repo,pull)\n+    info = retrieve_pr_info(repo,pull,ghtoken)\n     if info is None:\n         sys.exit(1)\n     title = info['title'].strip()"
      }
    ]
  }
]