[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647128075",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#issuecomment-647128075",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19347",
    "id": 647128075,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NzEyODA3NQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-21T13:24:33Z",
    "updated_at": "2020-06-21T13:24:33Z",
    "author_association": "MEMBER",
    "body": "@hebasto : you seem to be on a mutex-cleaning spree. Perhaps you'd be interested in this?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647128075/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647128751",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#issuecomment-647128751",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19347",
    "id": 647128751,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NzEyODc1MQ==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-21T13:30:17Z",
    "updated_at": "2020-06-21T13:30:17Z",
    "author_association": "MEMBER",
    "body": "Concept ACK. Made a link here from the tracking issue #19303.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647128751/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647164281",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#issuecomment-647164281",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19347",
    "id": 647164281,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NzE2NDI4MQ==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-21T18:30:04Z",
    "updated_at": "2020-06-21T18:30:04Z",
    "author_association": "MEMBER",
    "body": "nit: s/`cs_inventory`/`m_inventory_mutex`/",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647164281/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647164961",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#issuecomment-647164961",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19347",
    "id": 647164961,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NzE2NDk2MQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-21T18:36:29Z",
    "updated_at": "2020-06-21T18:36:29Z",
    "author_association": "MEMBER",
    "body": "> nit: s/cs_inventory/m_inventory_mutex\r\n\r\nI agree! I'm planning to move this mutex into net processing where it belongs. I'll do the rename at the same time. See https://github.com/jnewbery/bitcoin/commits/2020-06-cs-main-split",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647164961/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647768365",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#issuecomment-647768365",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19347",
    "id": 647768365,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0Nzc2ODM2NQ==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-22T21:03:52Z",
    "updated_at": "2020-06-22T21:03:52Z",
    "author_association": "MEMBER",
    "body": "Does the recent [change](https://github.com/bitcoin/bitcoin/compare/eaced81501f035193523d1abde4569dfc73ae327..6db15a8b79597a0f311490acd89ee50db298c6e8) decrease concurrentness of the code? It seems like a premature optimization a bit, no?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647768365/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647784842",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#issuecomment-647784842",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19347",
    "id": 647784842,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0Nzc4NDg0Mg==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-22T21:44:29Z",
    "updated_at": "2020-06-22T21:44:29Z",
    "author_association": "MEMBER",
    "body": "> Does the recent change decrease concurrentness of the code?\r\n\r\nI think it's fine to expand the lock scope:\r\n\r\n- it's _extremely_ unlikely that this'll increase contention for this lock. `UpdatedBlockTip()` is only called once every ten minutes on average, it's very unlikely that it'll push two block hashes onto the `vBlockHashesToAnnounce` vector (only if there's a re-org), and the time it takes to push an extra hash onto the vector is tiny.\r\n- in the very unlikely case we do block the other thread, it's probably an improvement. Rather than sending one hash in a headers message to the peer, and then another hash in a second headers message, we'll send both in the same message.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647784842/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/648124539",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#issuecomment-648124539",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19347",
    "id": 648124539,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0ODEyNDUzOQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-23T12:51:14Z",
    "updated_at": "2020-06-23T12:51:14Z",
    "author_association": "MEMBER",
    "body": "I've moved the lock scope change to the correct commit, and also moved it one line up, outside the surrounding if block. It doesn't make any difference here, but makes a commit in a future branch tidier.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/648124539/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/655046772",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#issuecomment-655046772",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19347",
    "id": 655046772,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NTA0Njc3Mg==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-07T18:33:46Z",
    "updated_at": "2020-07-07T18:33:46Z",
    "author_association": "MEMBER",
    "body": "utACK e8a2822119233ade0de84f791a9e92918a3d6896",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/655046772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/655724407",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#issuecomment-655724407",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19347",
    "id": 655724407,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NTcyNDQwNw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-08T19:57:06Z",
    "updated_at": "2020-07-08T19:57:06Z",
    "author_association": "MEMBER",
    "body": "ACK e8a2822119233ade0de84f791a9e92918a3d6896 \ud83c\udf6c\r\n\r\n<details><summary>Show signature and timestamp</summary>\r\n\r\nSignature:\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\nACK e8a2822119233ade0de84f791a9e92918a3d6896 \ud83c\udf6c\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\r\npUgLcQv/SQmH5S8+LYeoatDRRklzvqBa7vDSX+1JFkyauaibxrGa2j0CT5pmbrQi\r\nVBQSMZNrfC3F7g0hydzbplkkDzTciuj0rJGK6ScTmPLJA1X1ytCCoOjncCB+hz5O\r\nL250NVZCJRsbESdtIzqfmJZcl/ANYbxeM9ZF+sgVFvG5tq+OMmHy1zWN6Yejxnxh\r\nvryK7Ke16Mny2QLmrgohTQTyYicHzX0wrKDV2v7J1DQL6TaN4nVAsmPV7eKbIAI6\r\nwTPl8msWKfknfrGU2SEurFEdfKN0IapV8KxM+trbjKpakIGcF3sFaP60cHzf1haG\r\nHjfckGlwx9hiYWs6d6RwM9mGI+t8k4UkdPbxrAwjW/OnK0jAw6Zp/NOJK7VX19Em\r\nDcoKZXMHmrdNvIV5sxxXkGJtEQJsknuyIyjmbOB9HezJG+obnSNGuMvdqF7WLV20\r\nUQpV+WhV07LlYz4akXZ/SGsDvRJkFzIskaIc4u2tKVVHM/HIHjsrB7Vy2DTd8A4J\r\nXLhWoDVu\r\n=9k86\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\n[Timestamp of file with hash `19ea9d208bf92e8a00c6a74b291941159f29e27a9ad985a83fc50fb9e7eeb14a  -`](https://opentimestamps.org/info/?004f70656e54696d657374616d7073000050726f6f6600bf89e2e884e89294010819ea9d208bf92e8a00c6a74b291941159f29e27a9ad985a83fc50fb9e7eeb14af0108df50901dbda9abb6da7ebacc3340c3308fff0102fd60bd06ce468d455f1b5a4105cf06108f1045f0624f4f0080e222e4787965af90083dfe30d2ef90c8e232268747470733a2f2f6274632e63616c656e6461722e636174616c6c6178792e636f6dfff0106dcf23eaf62794540a9b5c3f34cee70e08f1045f0624f4f0082527e637c980e8150083dfe30d2ef90c8e292868747470733a2f2f66696e6e65792e63616c656e6461722e657465726e69747977616c6c2e636f6dfff010b561711d9277ebacb3f41eba5075c00808f1045f0624f5f008b398429856ae78fb0083dfe30d2ef90c8e2e2d68747470733a2f2f616c6963652e6274632e63616c656e6461722e6f70656e74696d657374616d70732e6f7267f010e760ef17026c64cb1aa6dd772c2d0ded08f1045f0624f4f008ac0ec51240f25e420083dfe30d2ef90c8e2c2b68747470733a2f2f626f622e6274632e63616c656e6461722e6f70656e74696d657374616d70732e6f7267)\r\n\r\n</details>\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/655724407/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443231429",
    "pull_request_review_id": 434511606,
    "id": 443231429,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIzMTQyOQ==",
    "diff_hunk": "@@ -1103,12 +1103,9 @@ void CConnman::DisconnectNodes()\n             if (pnode->GetRefCount() <= 0) {\n                 bool fDelete = false;\n                 {\n-                    TRY_LOCK(pnode->cs_inventory, lockInv);\n-                    if (lockInv) {\n-                        TRY_LOCK(pnode->cs_vSend, lockSend);\n-                        if (lockSend) {\n-                            fDelete = true;\n-                        }\n+                    TRY_LOCK(pnode->cs_vSend, lockSend);\n+                    if (lockSend) {\n+                        fDelete = true;",
    "path": "src/net.cpp",
    "position": 12,
    "original_position": 12,
    "commit_id": "e8a2822119233ade0de84f791a9e92918a3d6896",
    "original_commit_id": "8c372dd1cc1efbb6b968b06c0c4d70441bf65aef",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "From commit message\r\n> Therefore, cs_inventory can never be locked when the TRY_LOCK(cs_inventory) is reached in DisconnectNodes(). Remove the TRY_LOCK.\r\n\r\nI understand that `if (lockInv)` is never true, and the code block `TRY_LOCK(pnode->cs_vSend, lockSend); ...` is dead in master. This commit makes this code always reachable, right?",
    "created_at": "2020-06-21T15:38:16Z",
    "updated_at": "2020-06-23T12:50:15Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r443231429",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443231429"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r443231429"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443231429/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 1106,
    "original_start_line": 1106,
    "start_side": "LEFT",
    "line": 1108,
    "original_line": 1108,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443234173",
    "pull_request_review_id": 434513971,
    "id": 443234173,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIzNDE3Mw==",
    "diff_hunk": "@@ -1103,12 +1103,9 @@ void CConnman::DisconnectNodes()\n             if (pnode->GetRefCount() <= 0) {\n                 bool fDelete = false;\n                 {\n-                    TRY_LOCK(pnode->cs_inventory, lockInv);\n-                    if (lockInv) {\n-                        TRY_LOCK(pnode->cs_vSend, lockSend);\n-                        if (lockSend) {\n-                            fDelete = true;\n-                        }\n+                    TRY_LOCK(pnode->cs_vSend, lockSend);\n+                    if (lockSend) {\n+                        fDelete = true;",
    "path": "src/net.cpp",
    "position": 12,
    "original_position": 12,
    "commit_id": "e8a2822119233ade0de84f791a9e92918a3d6896",
    "original_commit_id": "8c372dd1cc1efbb6b968b06c0c4d70441bf65aef",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think the comment says \"Therefore, cs_inventory can never be locked *by another thread* ...\", so it is always true (success).",
    "created_at": "2020-06-21T16:11:49Z",
    "updated_at": "2020-06-23T12:50:15Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r443234173",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443234173"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r443234173"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443234173/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 1106,
    "original_start_line": 1106,
    "start_side": "LEFT",
    "line": 1108,
    "original_line": 1108,
    "side": "RIGHT",
    "in_reply_to_id": 443231429
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443235694",
    "pull_request_review_id": 434515339,
    "id": 443235694,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIzNTY5NA==",
    "diff_hunk": "@@ -1103,12 +1103,9 @@ void CConnman::DisconnectNodes()\n             if (pnode->GetRefCount() <= 0) {\n                 bool fDelete = false;\n                 {\n-                    TRY_LOCK(pnode->cs_inventory, lockInv);\n-                    if (lockInv) {\n-                        TRY_LOCK(pnode->cs_vSend, lockSend);\n-                        if (lockSend) {\n-                            fDelete = true;\n-                        }\n+                    TRY_LOCK(pnode->cs_vSend, lockSend);\n+                    if (lockSend) {\n+                        fDelete = true;",
    "path": "src/net.cpp",
    "position": 12,
    "original_position": 12,
    "commit_id": "e8a2822119233ade0de84f791a9e92918a3d6896",
    "original_commit_id": "8c372dd1cc1efbb6b968b06c0c4d70441bf65aef",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Sorry, you're right that this commit message is unclear. Marco is correct that I meant \"cs_inventory can never be locked by another thread\". I'll update the commit message.",
    "created_at": "2020-06-21T16:31:28Z",
    "updated_at": "2020-06-23T12:50:15Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r443235694",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443235694"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r443235694"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443235694/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 1106,
    "original_start_line": 1106,
    "start_side": "LEFT",
    "line": 1108,
    "original_line": 1108,
    "side": "RIGHT",
    "in_reply_to_id": 443231429
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443236860",
    "pull_request_review_id": 434516356,
    "id": 443236860,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIzNjg2MA==",
    "diff_hunk": "@@ -1103,12 +1103,9 @@ void CConnman::DisconnectNodes()\n             if (pnode->GetRefCount() <= 0) {\n                 bool fDelete = false;\n                 {\n-                    TRY_LOCK(pnode->cs_inventory, lockInv);\n-                    if (lockInv) {\n-                        TRY_LOCK(pnode->cs_vSend, lockSend);\n-                        if (lockSend) {\n-                            fDelete = true;\n-                        }\n+                    TRY_LOCK(pnode->cs_vSend, lockSend);\n+                    if (lockSend) {\n+                        fDelete = true;",
    "path": "src/net.cpp",
    "position": 12,
    "original_position": 12,
    "commit_id": "e8a2822119233ade0de84f791a9e92918a3d6896",
    "original_commit_id": "8c372dd1cc1efbb6b968b06c0c4d70441bf65aef",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I've made the commit log clearer.",
    "created_at": "2020-06-21T16:46:01Z",
    "updated_at": "2020-06-23T12:50:15Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r443236860",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443236860"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r443236860"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443236860/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 1106,
    "original_start_line": 1106,
    "start_side": "LEFT",
    "line": 1108,
    "original_line": 1108,
    "side": "RIGHT",
    "in_reply_to_id": 443231429
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443754624",
    "pull_request_review_id": 435181578,
    "id": 443754624,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzc1NDYyNA==",
    "diff_hunk": "@@ -1330,7 +1330,7 @@ void PeerLogicValidation::UpdatedBlockTip(const CBlockIndex *pindexNew, const CB\n         connman->ForEachNode([nNewHeight, &vHashes](CNode* pnode) {\n             if (nNewHeight > (pnode->nStartingHeight != -1 ? pnode->nStartingHeight - 2000 : 0)) {\n                 for (const uint256& hash : reverse_iterate(vHashes)) {\n-                    pnode->PushBlockHash(hash);\n+                    WITH_LOCK(pnode->cs_inventory, pnode->vBlockHashesToAnnounce.push_back(hash));",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "e8a2822119233ade0de84f791a9e92918a3d6896",
    "original_commit_id": "e335e4fcc881260906fb561f23a1b5017ed04d91",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "When doing this anyway, woulid it make sense to move this lock outside the (inner) loop? Re-taking it for every `node \u00d7 every block` seems overkill.",
    "created_at": "2020-06-22T18:40:31Z",
    "updated_at": "2020-06-23T12:50:15Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r443754624",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443754624"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r443754624"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443754624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1333,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443782058",
    "pull_request_review_id": 435217067,
    "id": 443782058,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzc4MjA1OA==",
    "diff_hunk": "@@ -1330,7 +1330,7 @@ void PeerLogicValidation::UpdatedBlockTip(const CBlockIndex *pindexNew, const CB\n         connman->ForEachNode([nNewHeight, &vHashes](CNode* pnode) {\n             if (nNewHeight > (pnode->nStartingHeight != -1 ? pnode->nStartingHeight - 2000 : 0)) {\n                 for (const uint256& hash : reverse_iterate(vHashes)) {\n-                    pnode->PushBlockHash(hash);\n+                    WITH_LOCK(pnode->cs_inventory, pnode->vBlockHashesToAnnounce.push_back(hash));",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "e8a2822119233ade0de84f791a9e92918a3d6896",
    "original_commit_id": "e335e4fcc881260906fb561f23a1b5017ed04d91",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good idea. Done.",
    "created_at": "2020-06-22T19:36:48Z",
    "updated_at": "2020-06-23T12:50:15Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r443782058",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443782058"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r443782058"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443782058/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1333,
    "side": "RIGHT",
    "in_reply_to_id": 443754624
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/444087873",
    "pull_request_review_id": 435603559,
    "id": 444087873,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDA4Nzg3Mw==",
    "diff_hunk": "@@ -1330,7 +1330,7 @@ void PeerLogicValidation::UpdatedBlockTip(const CBlockIndex *pindexNew, const CB\n         connman->ForEachNode([nNewHeight, &vHashes](CNode* pnode) {\n             if (nNewHeight > (pnode->nStartingHeight != -1 ? pnode->nStartingHeight - 2000 : 0)) {\n                 for (const uint256& hash : reverse_iterate(vHashes)) {\n-                    pnode->PushBlockHash(hash);\n+                    WITH_LOCK(pnode->cs_inventory, pnode->vBlockHashesToAnnounce.push_back(hash));",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "e8a2822119233ade0de84f791a9e92918a3d6896",
    "original_commit_id": "e335e4fcc881260906fb561f23a1b5017ed04d91",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "e335e4fcc881260906fb561f23a1b5017ed04d91\r\n\r\nThe suggestion was done in 6db15a8b79597a0f311490acd89ee50db298c6e8, but IMO should be in e335e4fcc881260906fb561f23a1b5017ed04d91.",
    "created_at": "2020-06-23T09:26:06Z",
    "updated_at": "2020-06-23T12:50:15Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r444087873",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/444087873"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r444087873"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/444087873/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1333,
    "side": "RIGHT",
    "in_reply_to_id": 443754624
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/444197371",
    "pull_request_review_id": 435747103,
    "id": 444197371,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE5NzM3MQ==",
    "diff_hunk": "@@ -1330,7 +1330,7 @@ void PeerLogicValidation::UpdatedBlockTip(const CBlockIndex *pindexNew, const CB\n         connman->ForEachNode([nNewHeight, &vHashes](CNode* pnode) {\n             if (nNewHeight > (pnode->nStartingHeight != -1 ? pnode->nStartingHeight - 2000 : 0)) {\n                 for (const uint256& hash : reverse_iterate(vHashes)) {\n-                    pnode->PushBlockHash(hash);\n+                    WITH_LOCK(pnode->cs_inventory, pnode->vBlockHashesToAnnounce.push_back(hash));",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "e8a2822119233ade0de84f791a9e92918a3d6896",
    "original_commit_id": "e335e4fcc881260906fb561f23a1b5017ed04d91",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.",
    "created_at": "2020-06-23T12:50:16Z",
    "updated_at": "2020-06-23T12:50:16Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r444197371",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/444197371"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19347#discussion_r444197371"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19347"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/444197371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1333,
    "side": "RIGHT",
    "in_reply_to_id": 443754624
  }
]