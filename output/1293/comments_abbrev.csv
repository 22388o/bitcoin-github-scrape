jgarzik,2012-05-14T05:17:27Z,"Rebased on top of #1295 (check return values of TxnBegin, TxnCommit)\n",https://github.com/bitcoin/bitcoin/pull/1293#issuecomment-5682814,5682814,
jgarzik,2012-05-14T16:53:47Z,"DEPENDENCY UPDATE: this sits on top of #1300, in addition to #1295\n",https://github.com/bitcoin/bitcoin/pull/1293#issuecomment-5695470,5695470,
jgarzik,2012-05-15T02:55:35Z,"Moved mapDb and mapFileUseCount into class CDBEnv.  mapFileUseCount had to remain public for the moment, until some wrappers may be written that eliminates the need for walletdb and CDB::Rewrite() to directly access these internals.\n\nIt doesn't help that we use this reference counting scheme _sometimes_, and other times we wish to immediately close regardless of reference count.\n",https://github.com/bitcoin/bitcoin/pull/1293#issuecomment-5707392,5707392,
jgarzik,2012-05-19T19:14:57Z,"This seems stable in testing, though the encapsulation isn't the best.  Some of the mapFileUseCount[] stuff is rather delicate, and relies on implicit behavior.  Best left to complete the encapsulation of that to a separate commit, IMO.  Once done, that will fit naturally inside CDBEnv::OpenDb(), which would be split out from CDB::CDB().\n",https://github.com/bitcoin/bitcoin/pull/1293#issuecomment-5804113,5804113,
sipa,2012-05-22T21:00:08Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/1293#issuecomment-5858762,5858762,
sipa,2012-05-14T21:57:14Z,Does mapFileUseCount need to remain global?\n,https://github.com/bitcoin/bitcoin/pull/1293#discussion_r819824,819824,src/walletdb.cpp
jgarzik,2012-05-14T22:17:01Z,"No, that and mapFiles[] could be moved into CDBEnv as well.\n",https://github.com/bitcoin/bitcoin/pull/1293#discussion_r819928,819928,src/walletdb.cpp
