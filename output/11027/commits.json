[
  {
    "sha": "e029c6e709d251809aa04edc08f76a077a2443e7",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplMDI5YzZlNzA5ZDI1MTgwOWFhMDRlZGMwOGY3NmEwNzdhMjQ0M2U3",
    "commit": {
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2017-08-10T22:58:25Z"
      },
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2017-08-10T22:58:25Z"
      },
      "message": "Only return hex field once in getrawtransaction\n\nThe hex is already returned in TxToUniv, no need to give it out a\nsecond independent time in getrawtransaction itself.",
      "tree": {
        "sha": "dd3edae6c43673ea81865bbb8ea3458627ef4677",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dd3edae6c43673ea81865bbb8ea3458627ef4677"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e029c6e709d251809aa04edc08f76a077a2443e7",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e029c6e709d251809aa04edc08f76a077a2443e7",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e029c6e709d251809aa04edc08f76a077a2443e7",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e029c6e709d251809aa04edc08f76a077a2443e7/comments",
    "author": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e526ca6284b9e13be1b912b80dd73a34e739b539",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e526ca6284b9e13be1b912b80dd73a34e739b539",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e526ca6284b9e13be1b912b80dd73a34e739b539"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 1,
      "deletions": 4
    },
    "files": [
      {
        "sha": "ad6067db4687cec0d096319bfda082efc024c81d",
        "filename": "src/rpc/rawtransaction.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 4,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e029c6e709d251809aa04edc08f76a077a2443e7/src/rpc/rawtransaction.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e029c6e709d251809aa04edc08f76a077a2443e7/src/rpc/rawtransaction.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/rawtransaction.cpp?ref=e029c6e709d251809aa04edc08f76a077a2443e7",
        "patch": "@@ -160,13 +160,10 @@ UniValue getrawtransaction(const JSONRPCRequest& request)\n             : \"No such mempool transaction. Use -txindex to enable blockchain transaction queries\") +\n             \". Use gettransaction for wallet transactions.\");\n \n-    std::string strHex = EncodeHexTx(*tx, RPCSerializationFlags());\n-\n     if (!fVerbose)\n-        return strHex;\n+        return EncodeHexTx(*tx, RPCSerializationFlags());\n \n     UniValue result(UniValue::VOBJ);\n-    result.push_back(Pair(\"hex\", strHex));\n     TxToJSON(*tx, hashBlock, result);\n     return result;\n }"
      }
    ]
  },
  {
    "sha": "6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2YmJkYWZjZGM0ZjlkOWUzZjlkZTcyZWQ2ODZjMDYwZmI0YjhiNDY1",
    "commit": {
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2017-08-11T19:21:14Z"
      },
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2017-08-17T17:42:51Z"
      },
      "message": "Pass serialization flags and whether to include hex to TxToUniv",
      "tree": {
        "sha": "2a3cabde520fbe74bde9f434f4a1d724840c73f8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2a3cabde520fbe74bde9f434f4a1d724840c73f8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465/comments",
    "author": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e029c6e709d251809aa04edc08f76a077a2443e7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e029c6e709d251809aa04edc08f76a077a2443e7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e029c6e709d251809aa04edc08f76a077a2443e7"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 8,
      "deletions": 6
    },
    "files": [
      {
        "sha": "ccc72ebb3219280396ce0d65d6ae844ae3771110",
        "filename": "src/core_io.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465/src/core_io.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465/src/core_io.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/core_io.h?ref=6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465",
        "patch": "@@ -31,6 +31,6 @@ UniValue ValueFromAmount(const CAmount& amount);\n std::string FormatScript(const CScript& script);\n std::string EncodeHexTx(const CTransaction& tx, const int serializeFlags = 0);\n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry);\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0);\n \n #endif // BITCOIN_CORE_IO_H"
      },
      {
        "sha": "c32b1ca227d51a89ea9bdc0a65d1b2dac45abd3b",
        "filename": "src/core_write.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465/src/core_write.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465/src/core_write.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/core_write.cpp?ref=6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465",
        "patch": "@@ -153,7 +153,7 @@ void ScriptPubKeyToUniv(const CScript& scriptPubKey,\n     out.pushKV(\"addresses\", a);\n }\n \n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry)\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex, int serialize_flags)\n {\n     entry.pushKV(\"txid\", tx.GetHash().GetHex());\n     entry.pushKV(\"hash\", tx.GetWitnessHash().GetHex());\n@@ -207,5 +207,7 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry)\n     if (!hashBlock.IsNull())\n         entry.pushKV(\"blockhash\", hashBlock.GetHex());\n \n-    entry.pushKV(\"hex\", EncodeHexTx(tx)); // the hex-encoded transaction. used the name \"hex\" to be consistent with the verbose output of \"getrawtransaction\".\n+    if (include_hex) {\n+        entry.pushKV(\"hex\", EncodeHexTx(tx, serialize_flags)); // the hex-encoded transaction. used the name \"hex\" to be consistent with the verbose output of \"getrawtransaction\".\n+    }\n }"
      },
      {
        "sha": "f3c65a2e013f728fc90efd2b7efc7d5f1562cbe6",
        "filename": "src/rpc/blockchain.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465/src/rpc/blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465/src/rpc/blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.cpp?ref=6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465",
        "patch": "@@ -125,7 +125,7 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* blockindex, bool tx\n         if(txDetails)\n         {\n             UniValue objTx(UniValue::VOBJ);\n-            TxToUniv(*tx, uint256(), objTx);\n+            TxToUniv(*tx, uint256(), objTx, true, RPCSerializationFlags());\n             txs.push_back(objTx);\n         }\n         else"
      },
      {
        "sha": "0d0c6449b7bb4d0cdd7393cf01e630fd680f2b34",
        "filename": "src/rpc/rawtransaction.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465/src/rpc/rawtransaction.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465/src/rpc/rawtransaction.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/rawtransaction.cpp?ref=6bbdafcdc4f9d9e3f9de72ed686c060fb4b8b465",
        "patch": "@@ -41,7 +41,7 @@ void TxToJSON(const CTransaction& tx, const uint256 hashBlock, UniValue& entry)\n     // Blockchain contextual information (confirmations and blocktime) is not\n     // available to code in bitcoin-common, so we query them here and push the\n     // data into the returned UniValue.\n-    TxToUniv(tx, uint256(), entry);\n+    TxToUniv(tx, uint256(), entry, true, RPCSerializationFlags());\n \n     if (!hashBlock.IsNull()) {\n         entry.push_back(Pair(\"blockhash\", hashBlock.GetHex()));\n@@ -480,7 +480,7 @@ UniValue decoderawtransaction(const JSONRPCRequest& request)\n         throw JSONRPCError(RPC_DESERIALIZATION_ERROR, \"TX decode failed\");\n \n     UniValue result(UniValue::VOBJ);\n-    TxToUniv(CTransaction(std::move(mtx)), uint256(), result);\n+    TxToUniv(CTransaction(std::move(mtx)), uint256(), result, false);\n \n     return result;\n }"
      }
    ]
  }
]