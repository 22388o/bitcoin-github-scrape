sipa,2017-09-22T19:44:15Z,"We have in fact a simple framework for verifiable scripted changes, see for example #10483. Perhaps you can use that for the first commit.",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-331542757,331542757,
jonasschnelli,2017-09-22T20:31:11Z,UniValue is added as a git subtree. Please propose changes that affect the UniValue sources upstream (https://github.com/bitcoin-core/univalue).,https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-331553104,331553104,
achow101,2017-09-22T21:09:20Z,"@jonasschnelli This is changing how UniValue is used, not changing UniValue itself.",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-331561248,331561248,
jonasschnelli,2017-09-22T21:10:07Z,@achow101: what about that https://github.com/bitcoin/bitcoin/pull/11386/files#diff-49e8bd958c3337da3e89c4a731dc37fd?,https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-331561396,331561396,
achow101,2017-09-22T21:42:13Z,"Oh, missed that.",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-331567393,331567393,
promag,2017-09-24T09:07:16Z,@runn1ng will you remove univalue changes and submit a patch there?,https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-331697270,331697270,
karelbilek,2017-09-24T21:26:37Z,"Sorry, busy weekend, I am doing it now",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-331741331,331741331,
jgarzik,2017-09-24T21:41:50Z,"FWIW, https://github.com/jgarzik/univalue/pull/42",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-331742207,331742207,
karelbilek,2017-09-24T21:57:36Z,Here is the PR https://github.com/bitcoin-core/univalue/pull/5,https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-331743059,331743059,
promag,2017-09-27T15:29:39Z,"For now 1st commit is enough. Meanwhile other merged PR's can use `.push_back(Pair(...))` so keep an eye on that.\n\nConcept ACK.",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-332560270,332560270,
karelbilek,2017-09-27T15:40:49Z,"First commit is not enough.\n\nWithout the UniValue KV bool fix, saving bool values through pushKV falls\nback to some numeric type (not sure which one now) and is saved wrong in\nthe json. Some RPCs are using bool values and tests (correctly) fail.\n\nI am waiting for the UniValue PR to be merged, and then I will change this\nPR to just be a pull from the UniValue subtree + scripted commit.\n\nOn",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-332563878,332563878,
promag,2017-09-27T16:05:27Z,"I know and IMO a failing build is better. Anyway, concept ACK.",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-332572039,332572039,
jnewbery,2017-09-27T21:01:53Z,"I think the subtree update and scripted-diff would need to be atomic to avoid breaking git bisect. Is that correct?\n\nMaybe check with @laanwj or @MarcoFalke if that's possible?",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-332654211,332654211,
promag,2017-09-29T08:51:51Z,If #10583 is merged then there are a couple of `push_back` to replace after rebase.,https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-333070272,333070272,
MarcoFalke,2017-09-29T12:45:10Z,"@jnewbery Since the scripted diff can not contain any other changes (like changes to a subtree) I don't think this is possible. However, it is possible to do in one commit when the scripted diff keyword does not appear.",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-333116357,333116357,
karelbilek,2017-09-30T09:52:21Z,"I don't think I can do it both atomically for bisect *and* as git subtree merge.\n\nI think I can make it atomically if I manually add the changes to the subtree files inside the script, but that will be a bit ugly too.",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-333297684,333297684,
sipa,2017-09-30T18:13:30Z,"If it's impossible to do at once due to the subtree update being a separate commit, I think it's fine to do it as a separate commit in the same PR.",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-333326183,333326183,
jnewbery,2017-10-01T01:18:49Z,"To keep git bisect working, we'd need to do two commits in univalue:\n\n1. Pushing boolean value to univalue correctly\n2. Remove deprecated std::pair wrappers\n\nand do three commits in this repo:\n\n1. subtree update, pulling commit (1) from univalue\n2. do the scripted-diff to change from `push_back(Pair())` to `pushKV()`\n3. subtree update, pulling commit (2) from univalue\n\nis *th",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-333346672,333346672,
karelbilek,2017-10-12T15:36:16Z,"@jnewbery yeah, that could be possible. Actually, the PR in univalue is already written like that. \n\nNow I am waiting for the univalue PR to be merged :)",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-336175997,336175997,
MarcoFalke,2017-11-10T18:34:32Z,"It can be done atomically in two commits. See #11420\n\n",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-343551611,343551611,
laanwj,2017-12-12T12:59:52Z,"FWIW #11420 was merged, anything left to do here?",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-351044244,351044244,
jnewbery,2017-12-12T18:21:56Z,https://github.com/bitcoin-core/univalue/pull/5 needs to be merged in bitcoin-core/univalue before this can go in.,https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-351140688,351140688,
jnewbery,2018-01-08T18:16:26Z,"This now requires https://github.com/bitcoin-core/univalue/pull/10 and https://github.com/bitcoin-core/univalue/pull/11 to be merged, and then separate subtree bumps for those PRs, with the ""Consistently use UniValue.pushKV instead of UniValue.push_back(Pair())"" commit between those two subtree bumps.\n\n@karel-3d has said that he doesn't have time to maintain these PRs, so I'll open a PR that h",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-356048591,356048591,
jnewbery,2018-01-15T14:20:18Z,https://github.com/bitcoin-core/univalue/pull/10 is merged. Waiting for https://github.com/bitcoin-core/univalue/pull/11 before I open a new PR for this.,https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-357695487,357695487,
MarcoFalke,2018-01-15T15:21:47Z,"@jnewbery I think it is cleaner to bump the subtree separately. (Once for bitcoin-core/univalue#10, and then some time in the future, not necessarily now, for bitcoin-core/univalue#11)",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-357712193,357712193,
jnewbery,2018-01-15T15:28:03Z,"> I think it is cleaner to bump the subtree separately.\n\nSure, I'm happy to review a PR that does that.",https://github.com/bitcoin/bitcoin/pull/11386#issuecomment-357713928,357713928,
