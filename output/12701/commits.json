[
  {
    "sha": "b78477821b3c226f4acde778141e0c6a00ab1f97",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiNzg0Nzc4MjFiM2MyMjZmNGFjZGU3NzgxNDFlMGM2YTAwYWIxZjk3",
    "commit": {
      "author": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-03-16T00:45:13Z"
      },
      "committer": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-03-16T00:48:58Z"
      },
      "message": "[wallet] importprivkey: explicit rescan for known key",
      "tree": {
        "sha": "139d547c5e36626c38b6d434cd4f7252c83aea0e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/139d547c5e36626c38b6d434cd4f7252c83aea0e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b78477821b3c226f4acde778141e0c6a00ab1f97",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEExCr/fGGz5EoUVM01V692LbM1MyIFAlqrFHoACgkQV692LbM1\nMyISWg//TIcuO2Fk8TeqL3ih13LVmaonSnkAg9zYPr55BV7fARbblD4opdT7SYoz\nJXFB41LFZ4i6Qsv0dYF/7ACy90Iz8d7JMFSY47PQVmXENcStmtE92sK9KIPP2eKu\nmslYCvM35XtzRE4Tu0qg2mMtkhButLAeCgRV0P1bzqFJLzyb0qzGhHe17dUqQ7Cd\nHMXshaCgpdgF6ngvALTthWSlcLX9VU6KVrVK1lUsRs44/rvs9CuYovdIApJOv8Vt\n/yvFc6q6LXR3C0C0T0u3QeE2zEeK92Zwr3bfMKXaiphpM3na5SAIPnl4KeZllAn8\nkf/AT7gRuRbTlidLMKrsYeFBBy2MhJF0icUWl6yF+nqiyLGn4l45wffiWJ1EySIx\ntHfp6ai3Yb9kn6zU78ARiry2FUTXiPaU1qrZAoj7c9YfhRvm7kG6b25cs7LQ0wH6\nCH8uF/OuE3nZqnQckPDrEQUKkRtk3SPni7cKRp/BOunBV+NwoHPi83rptOcDcQe+\ntThyRUSlNSrZm43FKy/RnUZbpNS/oVhbXHgD3iNIXOe5mAEOb+Qu8nGLBqhtJMI7\nANeG/wMfNjV+NtuYp3Wn0f/sRnZADWIzmclvQLF1XZ0pj1Orc7suKtas8gKFV+8+\nTOWcZyERoYGylVeRj4v6ZdRNLWKOp90vfvT4bRM92yHyAekk/nY=\n=85Mv\n-----END PGP SIGNATURE-----",
        "payload": "tree 139d547c5e36626c38b6d434cd4f7252c83aea0e\nparent e057589dc67f25da6779b60d0e247a3730adbc6d\nauthor Karl-Johan Alm <karljohan-alm@garage.co.jp> 1521161113 +0900\ncommitter Karl-Johan Alm <karljohan-alm@garage.co.jp> 1521161338 +0900\n\n[wallet] importprivkey: explicit rescan for known key\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b78477821b3c226f4acde778141e0c6a00ab1f97",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b78477821b3c226f4acde778141e0c6a00ab1f97",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b78477821b3c226f4acde778141e0c6a00ab1f97/comments",
    "author": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e057589dc67f25da6779b60d0e247a3730adbc6d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e057589dc67f25da6779b60d0e247a3730adbc6d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e057589dc67f25da6779b60d0e247a3730adbc6d"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 6,
      "deletions": 0
    },
    "files": [
      {
        "sha": "c3362a9eb5082fa00b5a1bbff06ce01d9c5b6b89",
        "filename": "src/wallet/rpcdump.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b78477821b3c226f4acde778141e0c6a00ab1f97/src/wallet/rpcdump.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b78477821b3c226f4acde778141e0c6a00ab1f97/src/wallet/rpcdump.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcdump.cpp?ref=b78477821b3c226f4acde778141e0c6a00ab1f97",
        "patch": "@@ -106,6 +106,8 @@ UniValue importprivkey(const JSONRPCRequest& request)\n             \"3. rescan               (boolean, optional, default=true) Rescan the wallet for transactions\\n\"\n             \"\\nNote: This call can take minutes to complete if rescan is true, during that time, other rpc calls\\n\"\n             \"may report that the imported key exists but related transactions are still missing, leading to temporarily incorrect/bogus balances and unspent outputs until rescan completes.\\n\"\n+            \"\\nTip: If you pass rescan=false and later change your mind, you can redo the call with an explicit\\n\"\n+            \"rescan=true. A rescan will begin even if the private key is already known.\\n\"\n             \"\\nExamples:\\n\"\n             \"\\nDump a private key\\n\"\n             + HelpExampleCli(\"dumpprivkey\", \"\\\"myaddress\\\"\") +\n@@ -158,6 +160,10 @@ UniValue importprivkey(const JSONRPCRequest& request)\n \n             // Don't throw error in case a key is already there\n             if (pwallet->HaveKey(vchAddress)) {\n+                // If the user explicitly wanted a rescan, start it\n+                if (!request.params[2].isNull() && fRescan) {\n+                    pwallet->RescanFromTime(TIMESTAMP_MIN, reserver, true /* update */);\n+                }\n                 return NullUniValue;\n             }\n "
      }
    ]
  }
]