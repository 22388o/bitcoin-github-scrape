[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894331601",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-894331601",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 894331601,
    "node_id": "IC_kwDOABII5841TmrR",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-06T15:17:28Z",
    "updated_at": "2021-08-06T15:17:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "See also https://en.wikipedia.org/wiki/Principle_of_least_astonishment",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894331601/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894340417",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-894340417",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 894340417,
    "node_id": "IC_kwDOABII5841To1B",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-06T15:32:22Z",
    "updated_at": "2021-08-06T23:03:11Z",
    "author_association": "MEMBER",
    "body": "Concept/Approach ACK. It may be good to have functional test coverage (or make it a separate function with unit tests).\r\n\r\nEdit: updated the -onlynet documentation in bebcf785c080df9273e03b854832ba3dbd4320ec.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894340417/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894444992",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-894444992",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 894444992,
    "node_id": "IC_kwDOABII5841UCXA",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?u=03240c7cca7b55e5b9239eeab7a5914663a42b91&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-06T18:34:05Z",
    "updated_at": "2021-08-06T18:34:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "> See also https://en.wikipedia.org/wiki/Principle_of_least_astonishment\r\n\r\nThis link says \"The behavior should not astonish or surprise users\"\r\n\r\nI am surprised by lot of things in Bitcoin Core \ud83d\ude04\r\n\r\nConcept ACK. Doesn't make sense to create outbound connections with onion peers if `onlynet=i2p` is used.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894444992/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894527298",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-894527298",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 894527298,
    "node_id": "IC_kwDOABII5841UWdC",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?u=03240c7cca7b55e5b9239eeab7a5914663a42b91&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-06T21:27:21Z",
    "updated_at": "2021-08-06T21:31:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "> It may be good to have functional test coverage (or make it a separate function with unit tests).\r\n\r\nAgree. Do you think these steps are correct for test?\r\n\r\n1. Run Node 1: \r\n```\r\nbitcoind -port=18333 -rpcport=18222 -datadir=\"/home/user/node1\" -regtest=1 -listen=1 -server=1 -debug=net -rpcuser=user1 -rpcpassword=password1 -torcontrol='127.0.0.1:9051' -proxy='127.0.0.1:9050' -onlynet=onion\r\n```\r\n2. Run Node 2:\r\n```\r\nbitcoind -port=18777 -rpcport=18666 -datadir=\"/home/user/node2\" -regtest=1 -listen=1 -server=1 -debug=net -rpcuser=user2 -rpcpassword=password2 -addnode='127.0.0.1:18333' -torcontrol='127.0.0.1:9051' -proxy='127.0.0.1:9050' -onlynet=onion\r\n```\r\n3. Stop Node 1 and 2:\r\n\r\n```\r\nbitcoin-cli -rpcport=18222 -rpcuser=user1 -rpcpassword=password1 stop\r\nbitcoin-cli -rpcport=18666 -rpcuser=user2 -rpcpassword=password2 stop\r\n```\r\n4. Restart Node 2 with different config (`onlynet=i2p` and no `proxy`):\r\n\r\n```\r\nbitcoind -port=18777 -rpcport=18666 -datadir=\"/home/user/node2\" -regtest=1 -listen=1 -server=1 -debug=net -rpcuser=user2 -rpcpassword=password2 -i2psam=127.0.0.1:7656 -onlynet=i2p\r\n```\r\n5. Check debug.log:\r\n\r\n```\r\ntrying connection 3llpwlxkisrm2iu5oayh2hd6df7q36wdmt6nounenzqcxkasxfk34eid.onion\r\n```\r\nMaster branch should print such connection attempts and PR branch should not\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894527298/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894535743",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-894535743",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 894535743,
    "node_id": "IC_kwDOABII5841UYg_",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-06T21:47:58Z",
    "updated_at": "2021-08-06T21:47:58Z",
    "author_association": "MEMBER",
    "body": "Checking the debug log output is a bit of a last resort when there's nothing else to assert on... getnetworkinfo limited/reachable (and maybe getpeerinfo) would probably be good.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894535743/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894605885",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-894605885",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 894605885,
    "node_id": "IC_kwDOABII5841Upo9",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-07T05:05:47Z",
    "updated_at": "2021-09-01T11:28:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#19358](https://github.com/bitcoin/bitcoin/pull/19358) (torcontrol : avoid to set wrong outbound proxy and network settings when creating an inbound onion service. by Saibato)\n* [#15423](https://github.com/bitcoin/bitcoin/pull/15423) (torcontrol: Query Tor for correct -onion configuration by luke-jr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894605885/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894613967",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-894613967",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 894613967,
    "node_id": "IC_kwDOABII5841UrnP",
    "user": {
      "login": "wodry",
      "id": 8447873,
      "node_id": "MDQ6VXNlcjg0NDc4NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8447873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wodry",
      "html_url": "https://github.com/wodry",
      "followers_url": "https://api.github.com/users/wodry/followers",
      "following_url": "https://api.github.com/users/wodry/following{/other_user}",
      "gists_url": "https://api.github.com/users/wodry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wodry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wodry/subscriptions",
      "organizations_url": "https://api.github.com/users/wodry/orgs",
      "repos_url": "https://api.github.com/users/wodry/repos",
      "events_url": "https://api.github.com/users/wodry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wodry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-07T06:37:35Z",
    "updated_at": "2021-08-07T06:37:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Would this fix also #13378 ?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894613967/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894708083",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-894708083",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 894708083,
    "node_id": "IC_kwDOABII5841VClz",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?u=03240c7cca7b55e5b9239eeab7a5914663a42b91&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-07T21:20:30Z",
    "updated_at": "2021-08-07T21:20:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Checking the debug log output is a bit of a last resort when there's nothing else to assert on... getnetworkinfo limited/reachable (and maybe getpeerinfo) would probably be good.\r\n\r\nAlso the steps I mentioned above don't work. They worked on one of my VMs. Maybe it already had some onion address in peers.dat. I was expecting it will add onion peer in peers.dat but it didn't. `addpeeraddress` with some onion address and port followed by `getpeerinfo` should work.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894708083/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894761007",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-894761007",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 894761007,
    "node_id": "IC_kwDOABII5841VPgv",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?u=03240c7cca7b55e5b9239eeab7a5914663a42b91&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-08T08:12:19Z",
    "updated_at": "2021-08-08T08:19:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "Wrote a PowerShell [script ](https://github.com/prayank23/bitcoin-ps-scripts/blob/main/Scripts/Node/onlynet_i2p.ps1) to test this. Tried on Windows 10 and Pop!_OS. Node 2 is connected to Node 1 on Linux and fails on Windows (Master branch).\r\n\r\nTL;DR\r\n   1. Run Node 1 and get onion URL for it. \r\n   2. Sleep 10 seconds\r\n   3. Get onion address for Node 1 from `getnetworkinfo` -> localaddresses -> address ending with .onion and its port\r\n   4. Run Node 2 with `onlynet=i2p` (No Tor proxy)\r\n   5. Sleep 10 seconds\r\n   6.  Add Node 1 in peers.dat for Node 2 using hidden RPC `addpeeraddress`\r\n   7. Sleep 30 seconds\r\n   8. Check if Node 2 is connected to Node 1 with `getpeerinfo`\r\n\r\n```\r\nPeer info:\r\n\r\nxejoddwvi35krze3546qtx6dfmednjs2ccsociyezkyhzdxtemp5v5ad.onion:18444\r\noutbound-full-relay\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894761007/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/895069245",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-895069245",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 895069245,
    "node_id": "IC_kwDOABII5841Waw9",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-09T09:15:52Z",
    "updated_at": "2021-08-09T09:15:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Would this fix also #13378 ?\r\n\r\nTo my understanding, yes, but only if none of `-proxy` or `-onion` is set.\r\n\r\nProviding both `-onlynet=ipv4 -onion=127.0.0.1:9050` is kind of contradictory - why provide an outgoing tor proxy if you only want to connect to IPv4? I think Bitcoin Core should print an error and refuse to start in this case, but instead it treats it as \"onlynet ipv4 or tor\". Changing/fixing that is out of the scope of this PR which only aims to fix the behavior if none of `-proxy` or `-onion` is set.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/895069245/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/895144677",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-895144677",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 895144677,
    "node_id": "IC_kwDOABII5841WtLl",
    "user": {
      "login": "wodry",
      "id": 8447873,
      "node_id": "MDQ6VXNlcjg0NDc4NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8447873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wodry",
      "html_url": "https://github.com/wodry",
      "followers_url": "https://api.github.com/users/wodry/followers",
      "following_url": "https://api.github.com/users/wodry/following{/other_user}",
      "gists_url": "https://api.github.com/users/wodry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wodry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wodry/subscriptions",
      "organizations_url": "https://api.github.com/users/wodry/orgs",
      "repos_url": "https://api.github.com/users/wodry/repos",
      "events_url": "https://api.github.com/users/wodry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wodry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-09T11:22:35Z",
    "updated_at": "2021-08-09T11:22:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Also of course out of this PR, just to mention: I am sure you are already aware that to have multiple \"only\" nets is paradox, the option should better be called e.g. \"net\" instead of \"onlynet\"..",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/895144677/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896565507",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-896565507",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 896565507,
    "node_id": "IC_kwDOABII5841cIED",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-11T07:20:54Z",
    "updated_at": "2021-08-11T07:20:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "`4f4c7d8b11..4f3020d524`: append a functional test to exercise the modified behavior",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896565507/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896577149",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-896577149",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 896577149,
    "node_id": "IC_kwDOABII5841cK59",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-11T07:40:13Z",
    "updated_at": "2021-08-11T07:40:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "`4f3020d524...00b7ba51eb`: hush `test/lint/lint-python.sh`",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896577149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896580901",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-896580901",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 896580901,
    "node_id": "IC_kwDOABII5841cL0l",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-11T07:46:11Z",
    "updated_at": "2021-08-11T07:46:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "`00b7ba51eb...25f9e113db`: change `allow_outbound_onion` to a function, as per suggestion",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896580901/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896610763",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-896610763",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 896610763,
    "node_id": "IC_kwDOABII5841cTHL",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?u=03240c7cca7b55e5b9239eeab7a5914663a42b91&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-11T08:17:39Z",
    "updated_at": "2021-08-11T08:39:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Introduce a basic TCP server in the functional testing framework and use\r\nit to simulate a Tor Control daemon, which is needed in order for the\r\ncode in `src/torcontrol.cpp` to execute the code that is relevant for\r\n`-onlynet`.\r\n\r\nInteresting. Will try this today. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896610763/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896780844",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-896780844",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 896780844,
    "node_id": "IC_kwDOABII5841c8os",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-11T12:22:37Z",
    "updated_at": "2021-08-11T12:22:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "`test_framework/basic_server.py` can also be used to add some functional tests for I2P. We can simulate an I2P router at least as long as the text/line-based SAM is being talked on the socket. Later, when the socket switches from SAM to the binary bitcoin p2p protocol we would have to close the socket.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896780844/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896798367",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-896798367",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 896798367,
    "node_id": "IC_kwDOABII5841dA6f",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-11T12:49:11Z",
    "updated_at": "2021-08-11T12:49:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "`25f9e113db...16bf93e136`: address suggestions",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896798367/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896890081",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-896890081",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 896890081,
    "node_id": "IC_kwDOABII5841dXTh",
    "user": {
      "login": "Talkless",
      "id": 292191,
      "node_id": "MDQ6VXNlcjI5MjE5MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/292191?u=d9debc4e87d0036b59d7d56a02f7f0728a8a76e2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Talkless",
      "html_url": "https://github.com/Talkless",
      "followers_url": "https://api.github.com/users/Talkless/followers",
      "following_url": "https://api.github.com/users/Talkless/following{/other_user}",
      "gists_url": "https://api.github.com/users/Talkless/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Talkless/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Talkless/subscriptions",
      "organizations_url": "https://api.github.com/users/Talkless/orgs",
      "repos_url": "https://api.github.com/users/Talkless/repos",
      "events_url": "https://api.github.com/users/Talkless/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Talkless/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-11T14:45:41Z",
    "updated_at": "2021-08-11T14:45:41Z",
    "author_association": "NONE",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896890081/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/897498176",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-897498176",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 897498176,
    "node_id": "IC_kwDOABII5841frxA",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-12T09:45:29Z",
    "updated_at": "2021-08-12T09:45:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "`16bf93e136...5959ece29e`: address minor suggestions and avoid possibility of colliding listening ports by binding to port 0 (let the OS choose an available port, thanks @darosior for the idea!)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/897498176/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/901778042",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-901778042",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 901778042,
    "node_id": "IC_kwDOABII5841wAp6",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-19T09:56:28Z",
    "updated_at": "2021-08-19T09:56:28Z",
    "author_association": "MEMBER",
    "body": "This has a couple of ACKs and would be very good to have in 22.0 to alleviate user confusion over an impactful user-facing change in the release. @vasild, do you plan to update? Anyone else like to review here?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/901778042/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/901932190",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-901932190",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 901932190,
    "node_id": "IC_kwDOABII5841wmSe",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-19T13:49:51Z",
    "updated_at": "2021-08-19T13:49:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "`5959ece29e...a2ebcda19a`: address some suggestions\r\n\r\n> @vasild, do you plan to update?\r\n\r\nDone! :)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/901932190/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/901982638",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-901982638",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 901982638,
    "node_id": "IC_kwDOABII5841wymu",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-19T14:53:08Z",
    "updated_at": "2021-08-19T17:38:27Z",
    "author_association": "MEMBER",
    "body": "Code review re-ACK a2ebcda19a25067cb8183f25f6ffd0a26065fcc5 per `git diff 5959ece a2ebcda`, rebase on master, debug build, re-ran test a few times, and previously manually verified the behavior extensively as described in https://github.com/bitcoin/bitcoin/pull/22651#discussion_r684429929 and https://github.com/bitcoin/bitcoin/pull/22651#discussion_r684434758\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/901982638/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/902300252",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-902300252",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 902300252,
    "node_id": "IC_kwDOABII5841yAJc",
    "user": {
      "login": "Rspigler",
      "id": 24482484,
      "node_id": "MDQ6VXNlcjI0NDgyNDg0",
      "avatar_url": "https://avatars.githubusercontent.com/u/24482484?u=7354800fee53a3db4ba3c6aa40de4ea8c3bf58f0&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rspigler",
      "html_url": "https://github.com/Rspigler",
      "followers_url": "https://api.github.com/users/Rspigler/followers",
      "following_url": "https://api.github.com/users/Rspigler/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rspigler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rspigler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rspigler/subscriptions",
      "organizations_url": "https://api.github.com/users/Rspigler/orgs",
      "repos_url": "https://api.github.com/users/Rspigler/repos",
      "events_url": "https://api.github.com/users/Rspigler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rspigler/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-19T22:45:57Z",
    "updated_at": "2021-08-19T22:45:57Z",
    "author_association": "NONE",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/902300252/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/902800564",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-902800564",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 902800564,
    "node_id": "IC_kwDOABII5841z6S0",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?u=03240c7cca7b55e5b9239eeab7a5914663a42b91&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-20T16:08:57Z",
    "updated_at": "2021-08-20T16:08:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "reACK https://github.com/bitcoin/bitcoin/pull/22651/commits/a2ebcda19a25067cb8183f25f6ffd0a26065fcc5\r\n\r\nMajor changes since last review:\r\n\r\n1. https://github.com/bitcoin/bitcoin/pull/22651#discussion_r689088453\r\n2. https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-897498176",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/902800564/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/906322657",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-906322657",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 906322657,
    "node_id": "IC_kwDOABII5842BWLh",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-26T11:28:44Z",
    "updated_at": "2021-08-26T11:28:44Z",
    "author_association": "MEMBER",
    "body": "> See also https://en.wikipedia.org/wiki/Principle_of_least_astonishment\r\n\r\nTo be honest this whole situation around onlynet gives me a headache: https://github.com/bitcoin/bitcoin/pull/22648#pullrequestreview-739349992",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/906322657/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/908334015",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-908334015",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 908334015,
    "node_id": "IC_kwDOABII5842JBO_",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-30T13:16:01Z",
    "updated_at": "2021-08-30T13:16:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "`a2ebcda19a...baa6cb12ac`: address minor suggestion and fix commit id in a comment.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/908334015/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/908335719",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-908335719",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 908335719,
    "node_id": "IC_kwDOABII5842JBpn",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-30T13:18:04Z",
    "updated_at": "2021-08-30T13:19:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "@laanwj, I agree with your comments at https://github.com/bitcoin/bitcoin/pull/22648#discussion_r696535966. Opened https://github.com/bitcoin/bitcoin/pull/22834 which if merged will make this PR unnecessary.\r\n\r\nIMO https://github.com/bitcoin/bitcoin/pull/22834 should be merged and this PR (https://github.com/bitcoin/bitcoin/pull/22651) closed without merge. But lets see what reviewers think.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/908335719/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/908513666",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-908513666",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 908513666,
    "node_id": "IC_kwDOABII5842JtGC",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-30T17:00:56Z",
    "updated_at": "2021-08-30T17:00:56Z",
    "author_association": "MEMBER",
    "body": "Code review re-ACK baa6cb12ac5071bb68eb5ec375be73df4f4ae28f per `git diff a2ebcda baa6cb1`, rebase on master, debug build, ran the new test `test/functional/feature_onlynet.py` a few times, previously manually verified the behavior extensively as described in https://github.com/bitcoin/bitcoin/pull/22651#discussion_r684429929 and https://github.com/bitcoin/bitcoin/pull/22651#discussion_r684434758\r\n\r\nWill review #22834 soon. Perhaps the functional test work here can be ~ported over to it if that change is preferred.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/908513666/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/919326718",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-919326718",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 919326718,
    "node_id": "IC_kwDOABII5842y8_-",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-14T16:44:40Z",
    "updated_at": "2021-09-14T16:44:40Z",
    "author_association": "MEMBER",
    "body": "#22834 looks like a better solution IMO",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/919326718/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/962456059",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-962456059",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 962456059,
    "node_id": "IC_kwDOABII5845Xen7",
    "user": {
      "login": "Talkless",
      "id": 292191,
      "node_id": "MDQ6VXNlcjI5MjE5MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/292191?u=d9debc4e87d0036b59d7d56a02f7f0728a8a76e2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Talkless",
      "html_url": "https://github.com/Talkless",
      "followers_url": "https://api.github.com/users/Talkless/followers",
      "following_url": "https://api.github.com/users/Talkless/following{/other_user}",
      "gists_url": "https://api.github.com/users/Talkless/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Talkless/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Talkless/subscriptions",
      "organizations_url": "https://api.github.com/users/Talkless/orgs",
      "repos_url": "https://api.github.com/users/Talkless/repos",
      "events_url": "https://api.github.com/users/Talkless/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Talkless/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-06T14:00:47Z",
    "updated_at": "2021-11-06T14:00:47Z",
    "author_association": "NONE",
    "body": "> #22834 looks like a better solution IMO\r\n\r\nSo this PR should be closed?\r\n\r\n@vasild I'm confused :)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/962456059/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/962931750",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#issuecomment-962931750",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22651",
    "id": 962931750,
    "node_id": "IC_kwDOABII5845ZSwm",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-08T08:47:46Z",
    "updated_at": "2021-11-08T08:47:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing this in favor of https://github.com/bitcoin/bitcoin/pull/22834 which has more (concept) ACKs.\r\n\r\nThanks, @Talkless!",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/962931750/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684419652",
    "pull_request_review_id": 724602061,
    "id": 684419652,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NDQxOTY1Mg==",
    "diff_hunk": "@@ -373,9 +373,18 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, possibly set the proxy for onion addresses.\n+        bool allow_outbound_onion{true};\n+        if (gArgs.IsArgSet(\"-onlynet\")) {\n+            allow_outbound_onion = false;\n+            for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\n+                if (ParseNetwork(net) == NET_ONION) {\n+                    allow_outbound_onion = true;\n+                    break;\n+                }\n+            }\n+        }\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && allow_outbound_onion) {",
    "path": "src/torcontrol.cpp",
    "position": null,
    "original_position": 18,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "4f4c7d8b117e8a9cfb2430d2fc9f420ef48b4f6d",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "A function seems nicer than a localvar here (optionally declare in header file for unit testing)\r\n```diff\r\n+bool AllowOutboundOnion()\r\n+{\r\n+    if (!gArgs.IsArgSet(\"-onlynet\")) return true;\r\n+    for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\r\n+        if (ParseNetwork(net) == NET_ONION) return true;\r\n+    }\r\n+    return false;\r\n+}\r\n          // Now that we know Tor is running, possibly set the proxy for onion addresses.\r\n-        bool allow_outbound_onion{true};\r\n-        if (gArgs.IsArgSet(\"-onlynet\")) {\r\n-            allow_outbound_onion = false;\r\n-            for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\r\n-                if (ParseNetwork(net) == NET_ONION) {\r\n-                    allow_outbound_onion = true;\r\n-                    break;\r\n-                }\r\n-            }\r\n-        }\r\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && allow_outbound_onion) {\r\n+        if (gArgs.GetArg(\"-onion\", \"\").empty() && AllowOutboundOnion()) {\r\n```\r\n",
    "created_at": "2021-08-06T18:12:03Z",
    "updated_at": "2021-08-06T18:43:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r684419652",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684419652"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r684419652"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684419652/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 387,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684429929",
    "pull_request_review_id": 724615495,
    "id": 684429929,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NDQyOTkyOQ==",
    "diff_hunk": "@@ -373,9 +373,18 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, possibly set the proxy for onion addresses.\n+        bool allow_outbound_onion{true};\n+        if (gArgs.IsArgSet(\"-onlynet\")) {\n+            allow_outbound_onion = false;\n+            for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\n+                if (ParseNetwork(net) == NET_ONION) {\n+                    allow_outbound_onion = true;\n+                    break;\n+                }\n+            }\n+        }\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && allow_outbound_onion) {",
    "path": "src/torcontrol.cpp",
    "position": null,
    "original_position": 18,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "4f4c7d8b117e8a9cfb2430d2fc9f420ef48b4f6d",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Tested with this patch on mainnet:\r\n- `onlynet=i2p`: only I2P outbound connections are made (i2pd 2.23)\r\n- `onlynet=ipv4`: only IPv4 outbound connections are made\r\n- `onlynet=onion`: only onion outbound connections are made (tor 0.4.6)",
    "created_at": "2021-08-06T18:31:42Z",
    "updated_at": "2021-08-06T18:31:42Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r684429929",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684429929"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r684429929"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684429929/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 387,
    "side": "RIGHT",
    "in_reply_to_id": 684419652
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684434758",
    "pull_request_review_id": 724621467,
    "id": 684434758,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NDQzNDc1OA==",
    "diff_hunk": "@@ -373,9 +373,18 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, possibly set the proxy for onion addresses.\n+        bool allow_outbound_onion{true};\n+        if (gArgs.IsArgSet(\"-onlynet\")) {\n+            allow_outbound_onion = false;\n+            for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\n+                if (ParseNetwork(net) == NET_ONION) {\n+                    allow_outbound_onion = true;\n+                    break;\n+                }\n+            }\n+        }\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && allow_outbound_onion) {",
    "path": "src/torcontrol.cpp",
    "position": null,
    "original_position": 18,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "4f4c7d8b117e8a9cfb2430d2fc9f420ef48b4f6d",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I did more testing with combinations (all using the proposed function version above ;)\r\n- `onlynet=i2p` and `onlynet=onion`: only I2P and onion outbound connections are made\r\n- `onlynet=ipv4` and `onlynet=onion`: only IPv4 and onion outbound connections are made\r\n- `onlynet=ipv4` and `onlynet=i2p`: only IPv4 and I2P outbound connections are made\r\n\r\n(Test coverage for these cases--single onlynet and combinations--would be great.)",
    "created_at": "2021-08-06T18:40:19Z",
    "updated_at": "2021-08-06T21:41:10Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r684434758",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684434758"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r684434758"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684434758/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 387,
    "side": "RIGHT",
    "in_reply_to_id": 684419652
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684460683",
    "pull_request_review_id": 724654762,
    "id": 684460683,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NDQ2MDY4Mw==",
    "diff_hunk": "@@ -373,9 +373,18 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, possibly set the proxy for onion addresses.\n+        bool allow_outbound_onion{true};\n+        if (gArgs.IsArgSet(\"-onlynet\")) {\n+            allow_outbound_onion = false;\n+            for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\n+                if (ParseNetwork(net) == NET_ONION) {\n+                    allow_outbound_onion = true;\n+                    break;\n+                }\n+            }\n+        }\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && allow_outbound_onion) {\n             CService resolved(LookupNumeric(\"127.0.0.1\", 9050));",
    "path": "src/torcontrol.cpp",
    "position": 33,
    "original_position": 19,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "4f4c7d8b117e8a9cfb2430d2fc9f420ef48b4f6d",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is normally 9150 on Windows so can we use #ifdef here? Although not sure if it is out of scope for this PR\r\n\r\n```suggestion\r\n#ifdef WIN32 \r\n            CService resolved(LookupNumeric(\"127.0.0.1\", 9150));\r\n#else\r\n            CService resolved(LookupNumeric(\"127.0.0.1\", 9050));\r\n#endif\r\n```",
    "created_at": "2021-08-06T19:30:24Z",
    "updated_at": "2021-08-06T19:34:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r684460683",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684460683"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r684460683"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684460683/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 390,
    "original_line": 390,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684500821",
    "pull_request_review_id": 724706581,
    "id": 684500821,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NDUwMDgyMQ==",
    "diff_hunk": "@@ -373,9 +373,18 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, possibly set the proxy for onion addresses.\n+        bool allow_outbound_onion{true};\n+        if (gArgs.IsArgSet(\"-onlynet\")) {\n+            allow_outbound_onion = false;\n+            for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\n+                if (ParseNetwork(net) == NET_ONION) {\n+                    allow_outbound_onion = true;\n+                    break;\n+                }\n+            }\n+        }\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && allow_outbound_onion) {",
    "path": "src/torcontrol.cpp",
    "position": null,
    "original_position": 18,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "4f4c7d8b117e8a9cfb2430d2fc9f420ef48b4f6d",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> Test coverage for these cases--single onlynet and combinations--would be great\r\n\r\nAgree",
    "created_at": "2021-08-06T20:57:43Z",
    "updated_at": "2021-08-06T20:57:43Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r684500821",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684500821"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r684500821"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684500821/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 387,
    "side": "RIGHT",
    "in_reply_to_id": 684419652
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/685023941",
    "pull_request_review_id": 725159850,
    "id": 685023941,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NTAyMzk0MQ==",
    "diff_hunk": "@@ -373,9 +373,18 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, possibly set the proxy for onion addresses.\n+        bool allow_outbound_onion{true};\n+        if (gArgs.IsArgSet(\"-onlynet\")) {\n+            allow_outbound_onion = false;\n+            for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\n+                if (ParseNetwork(net) == NET_ONION) {\n+                    allow_outbound_onion = true;\n+                    break;\n+                }\n+            }\n+        }\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && allow_outbound_onion) {\n             CService resolved(LookupNumeric(\"127.0.0.1\", 9050));",
    "path": "src/torcontrol.cpp",
    "position": 33,
    "original_position": 19,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "4f4c7d8b117e8a9cfb2430d2fc9f420ef48b4f6d",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, ouf of scope of this PR. This belongs to https://github.com/bitcoin/bitcoin/pull/15423, I hope that PR moves forward.",
    "created_at": "2021-08-09T09:01:12Z",
    "updated_at": "2021-08-09T09:01:12Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r685023941",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/685023941"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r685023941"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/685023941/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 390,
    "original_line": 390,
    "side": "RIGHT",
    "in_reply_to_id": 684460683
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686569913",
    "pull_request_review_id": 727141836,
    "id": 686569913,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NjU2OTkxMw==",
    "diff_hunk": "@@ -373,9 +373,18 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, possibly set the proxy for onion addresses.\n+        bool allow_outbound_onion{true};\n+        if (gArgs.IsArgSet(\"-onlynet\")) {\n+            allow_outbound_onion = false;\n+            for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\n+                if (ParseNetwork(net) == NET_ONION) {\n+                    allow_outbound_onion = true;\n+                    break;\n+                }\n+            }\n+        }\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && allow_outbound_onion) {",
    "path": "src/torcontrol.cpp",
    "position": null,
    "original_position": 18,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "4f4c7d8b117e8a9cfb2430d2fc9f420ef48b4f6d",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think it is fine either way. A function would make more sense if this is used in more than one place. The code is now covered by a new functional test `feature_onlynet.py`. Left it as is.",
    "created_at": "2021-08-11T07:27:57Z",
    "updated_at": "2021-08-11T07:27:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686569913",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686569913"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686569913"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686569913/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 387,
    "side": "RIGHT",
    "in_reply_to_id": 684419652
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686576643",
    "pull_request_review_id": 727150046,
    "id": 686576643,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NjU3NjY0Mw==",
    "diff_hunk": "@@ -373,9 +373,18 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, possibly set the proxy for onion addresses.\n+        bool allow_outbound_onion{true};\n+        if (gArgs.IsArgSet(\"-onlynet\")) {\n+            allow_outbound_onion = false;\n+            for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\n+                if (ParseNetwork(net) == NET_ONION) {\n+                    allow_outbound_onion = true;\n+                    break;\n+                }\n+            }\n+        }\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && allow_outbound_onion) {",
    "path": "src/torcontrol.cpp",
    "position": null,
    "original_position": 18,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "4f4c7d8b117e8a9cfb2430d2fc9f420ef48b4f6d",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think the function is not only shorter but also clearer and easier to reason about.",
    "created_at": "2021-08-11T07:37:29Z",
    "updated_at": "2021-08-11T07:37:30Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686576643",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686576643"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686576643"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686576643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 387,
    "side": "RIGHT",
    "in_reply_to_id": 684419652
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686583273",
    "pull_request_review_id": 727158966,
    "id": 686583273,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NjU4MzI3Mw==",
    "diff_hunk": "@@ -373,9 +373,18 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, possibly set the proxy for onion addresses.\n+        bool allow_outbound_onion{true};\n+        if (gArgs.IsArgSet(\"-onlynet\")) {\n+            allow_outbound_onion = false;\n+            for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\n+                if (ParseNetwork(net) == NET_ONION) {\n+                    allow_outbound_onion = true;\n+                    break;\n+                }\n+            }\n+        }\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && allow_outbound_onion) {",
    "path": "src/torcontrol.cpp",
    "position": null,
    "original_position": 18,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "4f4c7d8b117e8a9cfb2430d2fc9f420ef48b4f6d",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Alright, changed to a function.",
    "created_at": "2021-08-11T07:47:03Z",
    "updated_at": "2021-08-11T07:47:03Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686583273",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686583273"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686583273"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686583273/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 387,
    "side": "RIGHT",
    "in_reply_to_id": 684419652
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686598124",
    "pull_request_review_id": 727178072,
    "id": 686598124,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NjU5ODEyNA==",
    "diff_hunk": "@@ -0,0 +1,54 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet",
    "path": "test/functional/feature_onlynet.py",
    "position": null,
    "original_position": 6,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "25f9e113db979ef28b471664ae42c5f52daaba59",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\nTest -onlynet configuration option.\r\n```",
    "created_at": "2021-08-11T08:07:23Z",
    "updated_at": "2021-08-11T09:32:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686598124",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686598124"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686598124"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686598124/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 6,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686656841",
    "pull_request_review_id": 727178072,
    "id": 686656841,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NjY1Njg0MQ==",
    "diff_hunk": "@@ -0,0 +1,54 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n+\n+\n+class OnlynetTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.extra_args = [",
    "path": "test/functional/feature_onlynet.py",
    "position": 24,
    "original_position": 21,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "25f9e113db979ef28b471664ae42c5f52daaba59",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I needed this line for the test to run:\r\n```diff\r\n class OnlynetTest(BitcoinTestFramework):\r\n     def set_test_params(self):\r\n+        self.setup_clean_chain = True\r\n         self.extra_args = [\r\n```\r\nOtherwise, was seeing the following error:\r\n\r\n<details><summary>test output</summary><p>\r\n\r\n```\r\n$ test/functional/feature_onlynet.py \r\n2021-08-11T09:22:40.305000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_p1tdzv8m\r\n2021-08-11T09:22:41.628000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/home/jon/projects/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 130, in main\r\n    self.setup()\r\n  File \"/home/jon/projects/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 285, in setup\r\n    self.setup_network()\r\n  File \"/home/jon/projects/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 379, in setup_network\r\n    self.setup_nodes()\r\n  File \"/home/jon/projects/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 409, in setup_nodes\r\n    assert_equal(n.getblockchaininfo()[\"blocks\"], 199)\r\n  File \"/home/jon/projects/bitcoin/bitcoin/test/functional/test_framework/util.py\", line 49, in assert_equal\r\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\r\nAssertionError: not(0 == 199)\r\n2021-08-11T09:22:41.680000Z TestFramework (INFO): Stopping nodes\r\n2021-08-11T09:22:41.860000Z TestFramework (WARNING): Not cleaning up dir /tmp/bitcoin_func_test_p1tdzv8m\r\n2021-08-11T09:22:41.860000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/bitcoin_func_test_p1tdzv8m/test_framework.log\r\n2021-08-11T09:22:41.861000Z TestFramework (ERROR): \r\n2021-08-11T09:22:41.861000Z TestFramework (ERROR): Hint: Call /home/jon/projects/bitcoin/bitcoin/test/functional/combine_logs.py '/tmp/bitcoin_func_test_p1tdzv8m' to consolidate all logs\r\n2021-08-11T09:22:41.862000Z TestFramework (ERROR): \r\n2021-08-11T09:22:41.862000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\r\n2021-08-11T09:22:41.862000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\r\n2021-08-11T09:22:41.862000Z TestFramework (ERROR): \r\n```\r\n</p></details>\r\n",
    "created_at": "2021-08-11T09:23:47Z",
    "updated_at": "2021-08-11T09:32:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686656841",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686656841"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686656841"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686656841/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 24,
    "original_line": 24,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686657721",
    "pull_request_review_id": 727178072,
    "id": 686657721,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NjY1NzcyMQ==",
    "diff_hunk": "@@ -0,0 +1,54 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n+\n+\n+class OnlynetTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.extra_args = [\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1'],\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-onion=127.0.0.1:9050'],\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-proxy=127.0.0.1:9050'],\n+        ]\n+        self.num_nodes = len(self.extra_args)\n+        self.tor_control_server = BasicServer(bind=('127.0.0.1', 19051),\n+                                              response_generator=tor_control)\n+\n+\n+    def run_test(self):\n+        def networks_dict(d):\n+            r = {}\n+            for x in d['networks']:\n+                r[x['name']] = x\n+            return r\n+\n+        # Would fail without https://github.com/bitcoin/bitcoin/pull/22651\n+        n0 = networks_dict(self.nodes[0].getnetworkinfo())\n+        assert_equal(n0['onion']['reachable'], False)\n+\n+        # Passes with or without https://github.com/bitcoin/bitcoin/pull/22651,\n+        # just to ensure behavior does not change unintended.\n+        n1 = networks_dict(self.nodes[1].getnetworkinfo())\n+        assert_equal(n1['onion']['reachable'], True)\n+\n+        # Passes with or without https://github.com/bitcoin/bitcoin/pull/22651,\n+        # just to ensure behavior does not change unintended.\n+        n2 = networks_dict(self.nodes[2].getnetworkinfo())\n+        assert_equal(n2['onion']['reachable'], True)",
    "path": "test/functional/feature_onlynet.py",
    "position": null,
    "original_position": 50,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "25f9e113db979ef28b471664ae42c5f52daaba59",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Here is a proposed simplification using a dict comprehension in `networks_dict` and a loop for the assertions:\r\n```diff\r\n+    def networks_dict(self, node):\r\n+        info = self.nodes[node].getnetworkinfo()\r\n+        return {network[\"name\"]: network for network in info[\"networks\"]}\r\n \r\n     def run_test(self):\r\n-        def networks_dict(d):\r\n-            r = {}\r\n-            for x in d['networks']:\r\n-                r[x['name']] = x\r\n-            return r\r\n-\r\n-        # Would fail without https://github.com/bitcoin/bitcoin/pull/22651\r\n-        n0 = networks_dict(self.nodes[0].getnetworkinfo())\r\n-        assert_equal(n0['onion']['reachable'], False)\r\n-\r\n-        # Passes with or without https://github.com/bitcoin/bitcoin/pull/22651,\r\n-        # just to ensure behavior does not change unintended.\r\n-        n1 = networks_dict(self.nodes[1].getnetworkinfo())\r\n-        assert_equal(n1['onion']['reachable'], True)\r\n-\r\n-        # Passes with or without https://github.com/bitcoin/bitcoin/pull/22651,\r\n-        # just to ensure behavior does not change unintended.\r\n-        n2 = networks_dict(self.nodes[2].getnetworkinfo())\r\n-        assert_equal(n2['onion']['reachable'], True)\r\n+        for node, reachable in [[0, False], [1, True], [2, True]]:\r\n+            assert_equal(self.networks_dict(node)['onion']['reachable'], reachable)\r\n```\r\nCould perhaps add a comment describing why we expect the first node to not be reachable.",
    "created_at": "2021-08-11T09:24:59Z",
    "updated_at": "2021-08-11T09:33:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686657721",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686657721"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686657721"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686657721/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 50,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686661675",
    "pull_request_review_id": 727178072,
    "id": 686661675,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NjY2MTY3NQ==",
    "diff_hunk": "@@ -0,0 +1,93 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+A basic TCP server that responds to requests based on a given/custom criteria.\n+\"\"\"\n+\n+import socket\n+import threading\n+\n+\n+class BasicServer:\n+    # @param[in] bind Listen address and port tuple, for example (\"127.0.0.1\", 80)\n+    # @param[in] response_generator j\n+    def __init__(self, *, bind, response_generator):\n+        \"\"\"\n+        :param bind: Listen address-port tuple, for example (\"127.0.0.1\", 80)\n+\n+        :param response_generator: A callback function, supplied with the\n+        request. It returns a reply that is to be send to the client either as\n+        a string or as an array which is joined into a single string. If it\n+        returns None, then the connection is closed by the server.\n+        \"\"\"\n+        # create_server() is only in python 3.8\n+        # https://docs.python.org/3/library/socket.html#socket.create_server\n+        #self.listen_socket = socket.create_server(address=bind, reuse_port=True)",
    "path": "test/functional/test_framework/basic_server.py",
    "position": null,
    "original_position": 27,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "25f9e113db979ef28b471664ae42c5f52daaba59",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n        # self.listen_socket = socket.create_server(address=bind, reuse_port=True)\r\n```",
    "created_at": "2021-08-11T09:30:24Z",
    "updated_at": "2021-08-11T09:32:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686661675",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686661675"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686661675"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686661675/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 27,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686661792",
    "pull_request_review_id": 727178072,
    "id": 686661792,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NjY2MTc5Mg==",
    "diff_hunk": "@@ -0,0 +1,93 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+A basic TCP server that responds to requests based on a given/custom criteria.\n+\"\"\"\n+\n+import socket\n+import threading\n+\n+\n+class BasicServer:\n+    # @param[in] bind Listen address and port tuple, for example (\"127.0.0.1\", 80)\n+    # @param[in] response_generator j\n+    def __init__(self, *, bind, response_generator):\n+        \"\"\"\n+        :param bind: Listen address-port tuple, for example (\"127.0.0.1\", 80)\n+\n+        :param response_generator: A callback function, supplied with the\n+        request. It returns a reply that is to be send to the client either as\n+        a string or as an array which is joined into a single string. If it\n+        returns None, then the connection is closed by the server.\n+        \"\"\"\n+        # create_server() is only in python 3.8\n+        # https://docs.python.org/3/library/socket.html#socket.create_server\n+        #self.listen_socket = socket.create_server(address=bind, reuse_port=True)\n+        self.listen_socket = socket.socket(socket.AF_INET)\n+        self.listen_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n+        self.listen_socket.bind(bind)\n+        self.listen_socket.listen()\n+        #",
    "path": "test/functional/test_framework/basic_server.py",
    "position": null,
    "original_position": 32,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "25f9e113db979ef28b471664ae42c5f52daaba59",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "?",
    "created_at": "2021-08-11T09:30:35Z",
    "updated_at": "2021-08-11T09:32:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686661792",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686661792"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686661792"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686661792/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 32,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686664860",
    "pull_request_review_id": 727265513,
    "id": 686664860,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NjY2NDg2MA==",
    "diff_hunk": "@@ -373,9 +373,18 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, possibly set the proxy for onion addresses.\n+        bool allow_outbound_onion{true};\n+        if (gArgs.IsArgSet(\"-onlynet\")) {\n+            allow_outbound_onion = false;\n+            for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\n+                if (ParseNetwork(net) == NET_ONION) {\n+                    allow_outbound_onion = true;\n+                    break;\n+                }\n+            }\n+        }\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && allow_outbound_onion) {",
    "path": "src/torcontrol.cpp",
    "position": null,
    "original_position": 18,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "4f4c7d8b117e8a9cfb2430d2fc9f420ef48b4f6d",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks!",
    "created_at": "2021-08-11T09:34:47Z",
    "updated_at": "2021-08-11T09:34:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686664860",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686664860"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686664860"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686664860/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 387,
    "side": "RIGHT",
    "in_reply_to_id": 684419652
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686668471",
    "pull_request_review_id": 727270408,
    "id": 686668471,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NjY2ODQ3MQ==",
    "diff_hunk": "@@ -0,0 +1,54 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control",
    "path": "test/functional/feature_onlynet.py",
    "position": null,
    "original_position": 11,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "25f9e113db979ef28b471664ae42c5f52daaba59",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit, either add a comma at the end of this line, or one-line it:\r\n```python\r\nfrom test_framework.basic_server import BasicServer, tor_control\r\n```",
    "created_at": "2021-08-11T09:39:49Z",
    "updated_at": "2021-08-11T09:39:50Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686668471",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686668471"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686668471"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686668471/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 11,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686798112",
    "pull_request_review_id": 727440935,
    "id": 686798112,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Njc5ODExMg==",
    "diff_hunk": "@@ -0,0 +1,54 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet",
    "path": "test/functional/feature_onlynet.py",
    "position": null,
    "original_position": 6,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "25f9e113db979ef28b471664ae42c5f52daaba59",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.",
    "created_at": "2021-08-11T12:49:27Z",
    "updated_at": "2021-08-11T12:49:27Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686798112",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686798112"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686798112"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686798112/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 6,
    "side": "RIGHT",
    "in_reply_to_id": 686598124
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686798692",
    "pull_request_review_id": 727441684,
    "id": 686798692,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Njc5ODY5Mg==",
    "diff_hunk": "@@ -0,0 +1,54 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n+\n+\n+class OnlynetTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.extra_args = [",
    "path": "test/functional/feature_onlynet.py",
    "position": 24,
    "original_position": 21,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "25f9e113db979ef28b471664ae42c5f52daaba59",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Added. Any idea why that failure is not on CI? I don't see it either locally.",
    "created_at": "2021-08-11T12:50:08Z",
    "updated_at": "2021-08-11T12:50:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686798692",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686798692"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686798692"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686798692/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 24,
    "original_line": 24,
    "side": "RIGHT",
    "in_reply_to_id": 686656841
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686799215",
    "pull_request_review_id": 727442397,
    "id": 686799215,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Njc5OTIxNQ==",
    "diff_hunk": "@@ -0,0 +1,54 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n+\n+\n+class OnlynetTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.extra_args = [\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1'],\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-onion=127.0.0.1:9050'],\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-proxy=127.0.0.1:9050'],\n+        ]\n+        self.num_nodes = len(self.extra_args)\n+        self.tor_control_server = BasicServer(bind=('127.0.0.1', 19051),\n+                                              response_generator=tor_control)\n+\n+\n+    def run_test(self):\n+        def networks_dict(d):\n+            r = {}\n+            for x in d['networks']:\n+                r[x['name']] = x\n+            return r\n+\n+        # Would fail without https://github.com/bitcoin/bitcoin/pull/22651\n+        n0 = networks_dict(self.nodes[0].getnetworkinfo())\n+        assert_equal(n0['onion']['reachable'], False)\n+\n+        # Passes with or without https://github.com/bitcoin/bitcoin/pull/22651,\n+        # just to ensure behavior does not change unintended.\n+        n1 = networks_dict(self.nodes[1].getnetworkinfo())\n+        assert_equal(n1['onion']['reachable'], True)\n+\n+        # Passes with or without https://github.com/bitcoin/bitcoin/pull/22651,\n+        # just to ensure behavior does not change unintended.\n+        n2 = networks_dict(self.nodes[2].getnetworkinfo())\n+        assert_equal(n2['onion']['reachable'], True)",
    "path": "test/functional/feature_onlynet.py",
    "position": null,
    "original_position": 50,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "25f9e113db979ef28b471664ae42c5f52daaba59",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Did something similar. I find `return {network[\"name\"]: network for network in info[\"networks\"]}` extremely hard to read.",
    "created_at": "2021-08-11T12:50:50Z",
    "updated_at": "2021-08-11T12:51:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686799215",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686799215"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686799215"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686799215/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 50,
    "side": "RIGHT",
    "in_reply_to_id": 686657721
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686799788",
    "pull_request_review_id": 727443155,
    "id": 686799788,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Njc5OTc4OA==",
    "diff_hunk": "@@ -0,0 +1,93 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+A basic TCP server that responds to requests based on a given/custom criteria.\n+\"\"\"\n+\n+import socket\n+import threading\n+\n+\n+class BasicServer:\n+    # @param[in] bind Listen address and port tuple, for example (\"127.0.0.1\", 80)\n+    # @param[in] response_generator j\n+    def __init__(self, *, bind, response_generator):\n+        \"\"\"\n+        :param bind: Listen address-port tuple, for example (\"127.0.0.1\", 80)\n+\n+        :param response_generator: A callback function, supplied with the\n+        request. It returns a reply that is to be send to the client either as\n+        a string or as an array which is joined into a single string. If it\n+        returns None, then the connection is closed by the server.\n+        \"\"\"\n+        # create_server() is only in python 3.8\n+        # https://docs.python.org/3/library/socket.html#socket.create_server\n+        #self.listen_socket = socket.create_server(address=bind, reuse_port=True)\n+        self.listen_socket = socket.socket(socket.AF_INET)\n+        self.listen_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n+        self.listen_socket.bind(bind)\n+        self.listen_socket.listen()\n+        #",
    "path": "test/functional/test_framework/basic_server.py",
    "position": null,
    "original_position": 32,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "25f9e113db979ef28b471664ae42c5f52daaba59",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I wanted to mark the end of the snippet that is equivalent to `create_server()`. Removed.",
    "created_at": "2021-08-11T12:51:33Z",
    "updated_at": "2021-08-11T12:51:33Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686799788",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686799788"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686799788"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686799788/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 32,
    "side": "RIGHT",
    "in_reply_to_id": 686661792
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686799953",
    "pull_request_review_id": 727443364,
    "id": 686799953,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Njc5OTk1Mw==",
    "diff_hunk": "@@ -0,0 +1,54 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control",
    "path": "test/functional/feature_onlynet.py",
    "position": null,
    "original_position": 11,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "25f9e113db979ef28b471664ae42c5f52daaba59",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Added `,`.",
    "created_at": "2021-08-11T12:51:44Z",
    "updated_at": "2021-08-11T12:51:50Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686799953",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686799953"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686799953"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686799953/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 11,
    "side": "RIGHT",
    "in_reply_to_id": 686668471
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686800249",
    "pull_request_review_id": 727443746,
    "id": 686800249,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NjgwMDI0OQ==",
    "diff_hunk": "@@ -0,0 +1,93 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+A basic TCP server that responds to requests based on a given/custom criteria.\n+\"\"\"\n+\n+import socket\n+import threading\n+\n+\n+class BasicServer:\n+    # @param[in] bind Listen address and port tuple, for example (\"127.0.0.1\", 80)\n+    # @param[in] response_generator j\n+    def __init__(self, *, bind, response_generator):\n+        \"\"\"\n+        :param bind: Listen address-port tuple, for example (\"127.0.0.1\", 80)\n+\n+        :param response_generator: A callback function, supplied with the\n+        request. It returns a reply that is to be send to the client either as\n+        a string or as an array which is joined into a single string. If it\n+        returns None, then the connection is closed by the server.\n+        \"\"\"\n+        # create_server() is only in python 3.8\n+        # https://docs.python.org/3/library/socket.html#socket.create_server\n+        #self.listen_socket = socket.create_server(address=bind, reuse_port=True)",
    "path": "test/functional/test_framework/basic_server.py",
    "position": null,
    "original_position": 27,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "25f9e113db979ef28b471664ae42c5f52daaba59",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.",
    "created_at": "2021-08-11T12:52:06Z",
    "updated_at": "2021-08-11T12:52:06Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686800249",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686800249"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686800249"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686800249/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 27,
    "side": "RIGHT",
    "in_reply_to_id": 686661675
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686865131",
    "pull_request_review_id": 727530382,
    "id": 686865131,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Njg2NTEzMQ==",
    "diff_hunk": "@@ -0,0 +1,54 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n+\n+\n+class OnlynetTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.extra_args = [\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1'],\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-onion=127.0.0.1:9050'],\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-proxy=127.0.0.1:9050'],\n+        ]\n+        self.num_nodes = len(self.extra_args)\n+        self.tor_control_server = BasicServer(bind=('127.0.0.1', 19051),\n+                                              response_generator=tor_control)\n+\n+\n+    def run_test(self):\n+        def networks_dict(d):\n+            r = {}\n+            for x in d['networks']:\n+                r[x['name']] = x\n+            return r\n+\n+        # Would fail without https://github.com/bitcoin/bitcoin/pull/22651\n+        n0 = networks_dict(self.nodes[0].getnetworkinfo())\n+        assert_equal(n0['onion']['reachable'], False)\n+\n+        # Passes with or without https://github.com/bitcoin/bitcoin/pull/22651,\n+        # just to ensure behavior does not change unintended.\n+        n1 = networks_dict(self.nodes[1].getnetworkinfo())\n+        assert_equal(n1['onion']['reachable'], True)\n+\n+        # Passes with or without https://github.com/bitcoin/bitcoin/pull/22651,\n+        # just to ensure behavior does not change unintended.\n+        n2 = networks_dict(self.nodes[2].getnetworkinfo())\n+        assert_equal(n2['onion']['reachable'], True)",
    "path": "test/functional/feature_onlynet.py",
    "position": null,
    "original_position": 50,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "25f9e113db979ef28b471664ae42c5f52daaba59",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Comprehensions seem idiomatic/pythonic and the most-used way to do it in this codebase too (though I agree that a shorter `n` or `net` for the one line would probably be better than `network`), but I like your new version too. Nice and simple.",
    "created_at": "2021-08-11T14:05:10Z",
    "updated_at": "2021-08-11T14:05:11Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686865131",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686865131"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686865131"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686865131/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 50,
    "side": "RIGHT",
    "in_reply_to_id": 686657721
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686871346",
    "pull_request_review_id": 727539020,
    "id": 686871346,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Njg3MTM0Ng==",
    "diff_hunk": "@@ -0,0 +1,54 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n+\n+\n+class OnlynetTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.extra_args = [",
    "path": "test/functional/feature_onlynet.py",
    "position": 24,
    "original_position": 21,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "25f9e113db979ef28b471664ae42c5f52daaba59",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Hm, after coming back here and rebuilding, the test now runs for me without it. Strange.  Sorry for the noise.",
    "created_at": "2021-08-11T14:11:57Z",
    "updated_at": "2021-08-11T14:11:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686871346",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686871346"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686871346"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686871346/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 24,
    "original_line": 24,
    "side": "RIGHT",
    "in_reply_to_id": 686656841
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686873427",
    "pull_request_review_id": 727541816,
    "id": 686873427,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Njg3MzQyNw==",
    "diff_hunk": "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet configuration option.\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n+\n+\n+class OnlynetTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.extra_args = [\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1'],\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-onion=127.0.0.1:9050'],\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-proxy=127.0.0.1:9050'],\n+        ]\n+        self.num_nodes = len(self.extra_args)\n+        self.tor_control_server = BasicServer(bind=('127.0.0.1', 19051),\n+                                              response_generator=tor_control)\n+        # see https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686656841\n+        self.setup_clean_chain = True\n+\n+    def onion_is_reachable(self, node):\n+        for net in self.nodes[node].getnetworkinfo()['networks']:\n+            if net['name'] == 'onion':\n+                return net['reachable']\n+        return False\n+\n+    def run_test(self):\n+        # Node 0 would fail the check without https://github.com/bitcoin/bitcoin/pull/22651.\n+        # Nodes 1 and 2 pass with or without https://github.com/bitcoin/bitcoin/pull/22651,\n+        # they are here just to ensure behavior does not change unintended.",
    "path": "test/functional/feature_onlynet.py",
    "position": null,
    "original_position": 41,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "16bf93e1361fa9a1503cadd96e5121d92937bfb5",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nits:\r\n\r\n- I think it's more robust to describe why than to refer to a GitHub PR or depend on GitHub in general\r\n\r\n- s/unintended/unintentionally/",
    "created_at": "2021-08-11T14:14:12Z",
    "updated_at": "2021-08-11T14:26:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686873427",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686873427"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686873427"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686873427/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 41,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686876527",
    "pull_request_review_id": 727541816,
    "id": 686876527,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Njg3NjUyNw==",
    "diff_hunk": "@@ -368,14 +368,26 @@ void TorController::add_onion_cb(TorControlConnection& _conn, const TorControlRe\n     }\n }\n \n+static bool AllowOutboundOnion()\n+{\n+    if (!gArgs.IsArgSet(\"-onlynet\")) {\n+        return true;\n+    }\n+    for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\n+        if (ParseNetwork(net) == NET_ONION) {\n+            return true;\n+        }\n+    }\n+    return false;\n+}\n+\n void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply& reply)\n {\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, possibly set the proxy for onion addresses.\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && AllowOutboundOnion()) {",
    "path": "src/torcontrol.cpp",
    "position": 32,
    "original_position": 26,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "16bf93e1361fa9a1503cadd96e5121d92937bfb5",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n        if (gArgs.GetArg(\"-onion\", \"\").empty() && AllowOutboundOnion()) {\r\n```",
    "created_at": "2021-08-11T14:17:38Z",
    "updated_at": "2021-08-11T14:25:53Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686876527",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686876527"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686876527"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686876527/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 389,
    "original_line": 389,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686883879",
    "pull_request_review_id": 727541816,
    "id": 686883879,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Njg4Mzg3OQ==",
    "diff_hunk": "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet configuration option.\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n+\n+\n+class OnlynetTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.extra_args = [\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1'],\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-onion=127.0.0.1:9050'],\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-proxy=127.0.0.1:9050'],\n+        ]",
    "path": "test/functional/feature_onlynet.py",
    "position": 28,
    "original_position": 25,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "16bf93e1361fa9a1503cadd96e5121d92937bfb5",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Would it make sense to test with multiple onlynet settings? (this is only a quick example, not a good one)\r\n\r\n```diff\r\ndiff --git a/test/functional/feature_onlynet.py b/test/functional/feature_onlynet.py\r\nindex 60e4caf33d..c43a541196 100755\r\n--- a/test/functional/feature_onlynet.py\r\n+++ b/test/functional/feature_onlynet.py\r\n@@ -22,6 +22,8 @@ class OnlynetTest(BitcoinTestFramework):\r\n             ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1'],\r\n             ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-onion=127.0.0.1:9050'],\r\n             ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-proxy=127.0.0.1:9050'],\r\n+            ['-onlynet=ipv4', '-onlynet=ipv6', '-torcontrol=127.0.0.1:19051', '-listenonion=1'],\r\n         ]\r\n         self.num_nodes = len(self.extra_args)\r\n\r\n@@ -39,7 +41,7 @@ class OnlynetTest(BitcoinTestFramework):\r\n-        for node, expected_reachable in [[0, False], [1, True], [2, True]]:\r\n+        for node, expected_reachable in [[0, False], [1, True], [2, True], [3, False]]:\r\n             self.log.info(f'Verifying node {node} which uses {self.extra_args[node]}')\r\n             assert_equal(self.onion_is_reachable(node), expected_reachable)\r\n```\r\n",
    "created_at": "2021-08-11T14:25:19Z",
    "updated_at": "2021-08-11T14:50:56Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686883879",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686883879"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686883879"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686883879/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 28,
    "original_line": 28,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687559139",
    "pull_request_review_id": 728397427,
    "id": 687559139,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NzU1OTEzOQ==",
    "diff_hunk": "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet configuration option.\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n+\n+\n+class OnlynetTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.extra_args = [\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1'],\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-onion=127.0.0.1:9050'],\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-proxy=127.0.0.1:9050'],\n+        ]",
    "path": "test/functional/feature_onlynet.py",
    "position": 28,
    "original_position": 25,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "16bf93e1361fa9a1503cadd96e5121d92937bfb5",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think it is fine as it is. The point is to have `onlynet=...` but not `onlynet=onion`.",
    "created_at": "2021-08-12T09:46:27Z",
    "updated_at": "2021-08-12T09:46:27Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r687559139",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687559139"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r687559139"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687559139/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 28,
    "original_line": 28,
    "side": "RIGHT",
    "in_reply_to_id": 686883879
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687562997",
    "pull_request_review_id": 728402289,
    "id": 687562997,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NzU2Mjk5Nw==",
    "diff_hunk": "@@ -368,14 +368,26 @@ void TorController::add_onion_cb(TorControlConnection& _conn, const TorControlRe\n     }\n }\n \n+static bool AllowOutboundOnion()\n+{\n+    if (!gArgs.IsArgSet(\"-onlynet\")) {\n+        return true;\n+    }\n+    for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\n+        if (ParseNetwork(net) == NET_ONION) {\n+            return true;\n+        }\n+    }\n+    return false;\n+}\n+\n void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply& reply)\n {\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, possibly set the proxy for onion addresses.\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && AllowOutboundOnion()) {",
    "path": "src/torcontrol.cpp",
    "position": 32,
    "original_position": 26,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "16bf93e1361fa9a1503cadd96e5121d92937bfb5",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You suggested this one earlier and I deliberately skipped it but did not explain why.\r\n\r\nHere we are testing whether the result of `GetArg()` equals to its second argument, so it is better to keep that obvious, e.g. `GetArg(..., X) == X`.",
    "created_at": "2021-08-12T09:51:24Z",
    "updated_at": "2021-08-12T09:51:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r687562997",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687562997"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r687562997"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687562997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 389,
    "original_line": 389,
    "side": "RIGHT",
    "in_reply_to_id": 686876527
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687563816",
    "pull_request_review_id": 728403318,
    "id": 687563816,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NzU2MzgxNg==",
    "diff_hunk": "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet configuration option.\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n+\n+\n+class OnlynetTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.extra_args = [\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1'],\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-onion=127.0.0.1:9050'],\n+            ['-onlynet=ipv4', '-torcontrol=127.0.0.1:19051', '-listenonion=1', '-proxy=127.0.0.1:9050'],\n+        ]\n+        self.num_nodes = len(self.extra_args)\n+        self.tor_control_server = BasicServer(bind=('127.0.0.1', 19051),\n+                                              response_generator=tor_control)\n+        # see https://github.com/bitcoin/bitcoin/pull/22651#discussion_r686656841\n+        self.setup_clean_chain = True\n+\n+    def onion_is_reachable(self, node):\n+        for net in self.nodes[node].getnetworkinfo()['networks']:\n+            if net['name'] == 'onion':\n+                return net['reachable']\n+        return False\n+\n+    def run_test(self):\n+        # Node 0 would fail the check without https://github.com/bitcoin/bitcoin/pull/22651.\n+        # Nodes 1 and 2 pass with or without https://github.com/bitcoin/bitcoin/pull/22651,\n+        # they are here just to ensure behavior does not change unintended.",
    "path": "test/functional/feature_onlynet.py",
    "position": null,
    "original_position": 41,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "16bf93e1361fa9a1503cadd96e5121d92937bfb5",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I agree, removed the github reference.\r\n\r\nI think \"uninternationally\" is even better, changed.",
    "created_at": "2021-08-12T09:52:34Z",
    "updated_at": "2021-08-12T09:52:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r687563816",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687563816"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r687563816"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687563816/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 41,
    "side": "RIGHT",
    "in_reply_to_id": 686873427
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687853500",
    "pull_request_review_id": 728782914,
    "id": 687853500,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Nzg1MzUwMA==",
    "diff_hunk": "@@ -0,0 +1,47 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet configuration option.\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n+\n+\n+class OnlynetTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.tor_control_server = BasicServer(bind=('127.0.0.1', 0),\n+                                              response_generator=tor_control)\n+        port = self.tor_control_server.listen_port\n+        self.extra_args = [\n+            ['-onlynet=ipv4', f'-torcontrol=127.0.0.1:{port}', '-listenonion=1'],\n+            ['-onlynet=ipv4', f'-torcontrol=127.0.0.1:{port}', '-listenonion=1', '-onion=127.0.0.1:9050'],\n+            ['-onlynet=ipv4', f'-torcontrol=127.0.0.1:{port}', '-listenonion=1', '-proxy=127.0.0.1:9050'],\n+        ]\n+        self.num_nodes = len(self.extra_args)\n+\n+    def onion_is_reachable(self, node):\n+        for net in self.nodes[node].getnetworkinfo()['networks']:\n+            if net['name'] == 'onion':\n+                return net['reachable']\n+        return False\n+\n+    def run_test(self):\n+        # Node 0 would fail the check without c591379eb03381145c85ee5760ce829be337a749.\n+        # Nodes 1 and 2 pass with or without that commit, they are here just to ensure\n+        # behavior does not change unintentionally.",
    "path": "test/functional/feature_onlynet.py",
    "position": 40,
    "original_position": 40,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "5959ece29e5b6b7ce0d8be60ae64a3312861f841",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "maybe use a docstring and describe the commit, feel free to ignore\r\n```diff\r\n-        # Node 0 would fail the check without c591379eb03381145c85ee5760ce829be337a749.\r\n-        # Nodes 1 and 2 pass with or without that commit, they are here just to ensure\r\n-        # behavior does not change unintentionally.\r\n+        \"\"\"\r\n+        - The test of node 0 would fail without commit c591379eb0,\r\n+          \"tor: respect non-onion -onlynet= for outgoing Tor connections.\"\r\n+\r\n+        - The tests of nodes 1 and 2 pass with or without that commit;\r\n+          they ensure that behavior does not change unintentionally.\r\n+        \"\"\"\r\n```\r\n",
    "created_at": "2021-08-12T15:38:53Z",
    "updated_at": "2021-08-12T15:44:42Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r687853500",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687853500"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r687853500"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687853500/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 40,
    "original_line": 40,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687854013",
    "pull_request_review_id": 728782914,
    "id": 687854013,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Nzg1NDAxMw==",
    "diff_hunk": "@@ -0,0 +1,47 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet configuration option.\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n+\n+\n+class OnlynetTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.tor_control_server = BasicServer(bind=('127.0.0.1', 0),\n+                                              response_generator=tor_control)\n+        port = self.tor_control_server.listen_port\n+        self.extra_args = [\n+            ['-onlynet=ipv4', f'-torcontrol=127.0.0.1:{port}', '-listenonion=1'],\n+            ['-onlynet=ipv4', f'-torcontrol=127.0.0.1:{port}', '-listenonion=1', '-onion=127.0.0.1:9050'],\n+            ['-onlynet=ipv4', f'-torcontrol=127.0.0.1:{port}', '-listenonion=1', '-proxy=127.0.0.1:9050'],\n+        ]\n+        self.num_nodes = len(self.extra_args)\n+\n+    def onion_is_reachable(self, node):\n+        for net in self.nodes[node].getnetworkinfo()['networks']:\n+            if net['name'] == 'onion':\n+                return net['reachable']\n+        return False\n+\n+    def run_test(self):\n+        # Node 0 would fail the check without c591379eb03381145c85ee5760ce829be337a749.\n+        # Nodes 1 and 2 pass with or without that commit, they are here just to ensure\n+        # behavior does not change unintentionally.\n+        for node, expected_reachable in [[0, False], [1, True], [2, True]]:\n+            self.log.info(f'Verifying node {node} which uses {self.extra_args[node]}')",
    "path": "test/functional/feature_onlynet.py",
    "position": null,
    "original_position": 42,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "5959ece29e5b6b7ce0d8be60ae64a3312861f841",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "output is fairly long, could shorten without loss of signal, feel free to ignore\r\n```suggestion\r\n            self.log.info(f'Test node {node} {self.extra_args[node]}')\r\n```",
    "created_at": "2021-08-12T15:39:28Z",
    "updated_at": "2021-08-12T15:52:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r687854013",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687854013"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r687854013"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687854013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 42,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687858037",
    "pull_request_review_id": 728782914,
    "id": 687858037,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Nzg1ODAzNw==",
    "diff_hunk": "@@ -0,0 +1,94 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+A basic TCP server that responds to requests based on a given/custom criteria.\n+\"\"\"\n+\n+import socket\n+import threading\n+\n+\n+class BasicServer:\n+    def __init__(self, *, bind, response_generator):\n+        \"\"\"\n+        :param bind: Listen address-port tuple, for example (\"127.0.0.1\", 80).\n+        If the port is 0 then a random available one will be chosen and it",
    "path": "test/functional/test_framework/basic_server.py",
    "position": 17,
    "original_position": 17,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "5959ece29e5b6b7ce0d8be60ae64a3312861f841",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "indeed, seeing a different random port on each run as described here",
    "created_at": "2021-08-12T15:44:10Z",
    "updated_at": "2021-08-12T15:45:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r687858037",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687858037"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r687858037"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687858037/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 17,
    "original_line": 17,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/689085583",
    "pull_request_review_id": 730184663,
    "id": 689085583,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4OTA4NTU4Mw==",
    "diff_hunk": "@@ -368,14 +368,26 @@ void TorController::add_onion_cb(TorControlConnection& _conn, const TorControlRe\n     }\n }\n \n+static bool AllowOutboundOnion()\n+{\n+    if (!gArgs.IsArgSet(\"-onlynet\")) {\n+        return true;\n+    }\n+    for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\n+        if (ParseNetwork(net) == NET_ONION) {\n+            return true;\n+        }\n+    }\n+    return false;\n+}\n+\n void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply& reply)\n {\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, possibly set the proxy for onion addresses.\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && AllowOutboundOnion()) {",
    "path": "src/torcontrol.cpp",
    "position": 32,
    "original_position": 26,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "16bf93e1361fa9a1503cadd96e5121d92937bfb5",
    "user": {
      "login": "Talkless",
      "id": 292191,
      "node_id": "MDQ6VXNlcjI5MjE5MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/292191?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Talkless",
      "html_url": "https://github.com/Talkless",
      "followers_url": "https://api.github.com/users/Talkless/followers",
      "following_url": "https://api.github.com/users/Talkless/following{/other_user}",
      "gists_url": "https://api.github.com/users/Talkless/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Talkless/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Talkless/subscriptions",
      "organizations_url": "https://api.github.com/users/Talkless/orgs",
      "repos_url": "https://api.github.com/users/Talkless/repos",
      "events_url": "https://api.github.com/users/Talkless/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Talkless/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Because `==` will generate/call string comparison code, instead of just checking string length using `empty()`. Better just use specialized member functions instead of some kind \"generic\" comparison.\r\n\r\nAnother example is using `clear()` vs `= \"\"`: https://www.youtube.com/watch?v=3X9qK7HWxjk",
    "created_at": "2021-08-15T12:55:22Z",
    "updated_at": "2021-08-15T12:55:23Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r689085583",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/689085583"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r689085583"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/689085583/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 389,
    "original_line": 389,
    "side": "RIGHT",
    "in_reply_to_id": 686876527
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/689088453",
    "pull_request_review_id": 730186627,
    "id": 689088453,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4OTA4ODQ1Mw==",
    "diff_hunk": "@@ -368,14 +368,26 @@ void TorController::add_onion_cb(TorControlConnection& _conn, const TorControlRe\n     }\n }\n \n+static bool AllowOutboundOnion()\n+{\n+    if (!gArgs.IsArgSet(\"-onlynet\")) {\n+        return true;\n+    }\n+    for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {",
    "path": "src/torcontrol.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "5959ece29e5b6b7ce0d8be60ae64a3312861f841",
    "user": {
      "login": "Talkless",
      "id": 292191,
      "node_id": "MDQ6VXNlcjI5MjE5MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/292191?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Talkless",
      "html_url": "https://github.com/Talkless",
      "followers_url": "https://api.github.com/users/Talkless/followers",
      "following_url": "https://api.github.com/users/Talkless/following{/other_user}",
      "gists_url": "https://api.github.com/users/Talkless/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Talkless/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Talkless/subscriptions",
      "organizations_url": "https://api.github.com/users/Talkless/orgs",
      "repos_url": "https://api.github.com/users/Talkless/repos",
      "events_url": "https://api.github.com/users/Talkless/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Talkless/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Please consider using standard algorithms instead of hand-rolled loop:\r\n```\r\n#include <algorithm>\r\n...\r\n\r\n    const auto only_nets{gArgs.GetArgs(\"-onlynet\")};\r\n\r\n    //TODO: C++20: use std::ranges::any_of() instead\r\n    return std::any_of(only_nets.cbegin(), only_nets.cend(), [](const auto &net) {\r\n        return ParseNetwork(net) == NET_ONION;\r\n    });\r\n```",
    "created_at": "2021-08-15T13:16:28Z",
    "updated_at": "2021-08-15T13:16:28Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r689088453",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/689088453"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r689088453"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/689088453/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 376,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/692117735",
    "pull_request_review_id": 733997882,
    "id": 692117735,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MjExNzczNQ==",
    "diff_hunk": "@@ -368,14 +368,26 @@ void TorController::add_onion_cb(TorControlConnection& _conn, const TorControlRe\n     }\n }\n \n+static bool AllowOutboundOnion()\n+{\n+    if (!gArgs.IsArgSet(\"-onlynet\")) {\n+        return true;\n+    }\n+    for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\n+        if (ParseNetwork(net) == NET_ONION) {\n+            return true;\n+        }\n+    }\n+    return false;\n+}\n+\n void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply& reply)\n {\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, possibly set the proxy for onion addresses.\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && AllowOutboundOnion()) {",
    "path": "src/torcontrol.cpp",
    "position": 32,
    "original_position": 26,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "16bf93e1361fa9a1503cadd96e5121d92937bfb5",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think readability trumps micro-optimization here, leaving it as is.",
    "created_at": "2021-08-19T13:36:55Z",
    "updated_at": "2021-08-19T13:36:55Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r692117735",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/692117735"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r692117735"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/692117735/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 389,
    "original_line": 389,
    "side": "RIGHT",
    "in_reply_to_id": 686876527
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/692118290",
    "pull_request_review_id": 733998640,
    "id": 692118290,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MjExODI5MA==",
    "diff_hunk": "@@ -0,0 +1,47 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet configuration option.\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n+\n+\n+class OnlynetTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.tor_control_server = BasicServer(bind=('127.0.0.1', 0),\n+                                              response_generator=tor_control)\n+        port = self.tor_control_server.listen_port\n+        self.extra_args = [\n+            ['-onlynet=ipv4', f'-torcontrol=127.0.0.1:{port}', '-listenonion=1'],\n+            ['-onlynet=ipv4', f'-torcontrol=127.0.0.1:{port}', '-listenonion=1', '-onion=127.0.0.1:9050'],\n+            ['-onlynet=ipv4', f'-torcontrol=127.0.0.1:{port}', '-listenonion=1', '-proxy=127.0.0.1:9050'],\n+        ]\n+        self.num_nodes = len(self.extra_args)\n+\n+    def onion_is_reachable(self, node):\n+        for net in self.nodes[node].getnetworkinfo()['networks']:\n+            if net['name'] == 'onion':\n+                return net['reachable']\n+        return False\n+\n+    def run_test(self):\n+        # Node 0 would fail the check without c591379eb03381145c85ee5760ce829be337a749.\n+        # Nodes 1 and 2 pass with or without that commit, they are here just to ensure\n+        # behavior does not change unintentionally.",
    "path": "test/functional/feature_onlynet.py",
    "position": 40,
    "original_position": 40,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "5959ece29e5b6b7ce0d8be60ae64a3312861f841",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Leaving it as is.",
    "created_at": "2021-08-19T13:37:33Z",
    "updated_at": "2021-08-19T13:37:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r692118290",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/692118290"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r692118290"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/692118290/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 40,
    "original_line": 40,
    "side": "RIGHT",
    "in_reply_to_id": 687853500
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/692119177",
    "pull_request_review_id": 733999825,
    "id": 692119177,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MjExOTE3Nw==",
    "diff_hunk": "@@ -0,0 +1,47 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test -onlynet configuration option.\n+\"\"\"\n+\n+from test_framework.basic_server import (\n+    BasicServer,\n+    tor_control,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n+\n+\n+class OnlynetTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.tor_control_server = BasicServer(bind=('127.0.0.1', 0),\n+                                              response_generator=tor_control)\n+        port = self.tor_control_server.listen_port\n+        self.extra_args = [\n+            ['-onlynet=ipv4', f'-torcontrol=127.0.0.1:{port}', '-listenonion=1'],\n+            ['-onlynet=ipv4', f'-torcontrol=127.0.0.1:{port}', '-listenonion=1', '-onion=127.0.0.1:9050'],\n+            ['-onlynet=ipv4', f'-torcontrol=127.0.0.1:{port}', '-listenonion=1', '-proxy=127.0.0.1:9050'],\n+        ]\n+        self.num_nodes = len(self.extra_args)\n+\n+    def onion_is_reachable(self, node):\n+        for net in self.nodes[node].getnetworkinfo()['networks']:\n+            if net['name'] == 'onion':\n+                return net['reachable']\n+        return False\n+\n+    def run_test(self):\n+        # Node 0 would fail the check without c591379eb03381145c85ee5760ce829be337a749.\n+        # Nodes 1 and 2 pass with or without that commit, they are here just to ensure\n+        # behavior does not change unintentionally.\n+        for node, expected_reachable in [[0, False], [1, True], [2, True]]:\n+            self.log.info(f'Verifying node {node} which uses {self.extra_args[node]}')",
    "path": "test/functional/feature_onlynet.py",
    "position": null,
    "original_position": 42,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "5959ece29e5b6b7ce0d8be60ae64a3312861f841",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.",
    "created_at": "2021-08-19T13:38:33Z",
    "updated_at": "2021-08-19T13:38:33Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r692119177",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/692119177"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r692119177"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/692119177/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 42,
    "side": "RIGHT",
    "in_reply_to_id": 687854013
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/692128599",
    "pull_request_review_id": 734012647,
    "id": 692128599,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MjEyODU5OQ==",
    "diff_hunk": "@@ -368,14 +368,26 @@ void TorController::add_onion_cb(TorControlConnection& _conn, const TorControlRe\n     }\n }\n \n+static bool AllowOutboundOnion()\n+{\n+    if (!gArgs.IsArgSet(\"-onlynet\")) {\n+        return true;\n+    }\n+    for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {",
    "path": "src/torcontrol.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "5959ece29e5b6b7ce0d8be60ae64a3312861f841",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.",
    "created_at": "2021-08-19T13:49:03Z",
    "updated_at": "2021-08-19T13:49:03Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r692128599",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/692128599"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r692128599"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/692128599/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 376,
    "side": "RIGHT",
    "in_reply_to_id": 689088453
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/696627152",
    "pull_request_review_id": 739471549,
    "id": 696627152,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NjYyNzE1Mg==",
    "diff_hunk": "@@ -368,14 +368,26 @@ void TorController::add_onion_cb(TorControlConnection& _conn, const TorControlRe\n     }\n }\n \n+static bool AllowOutboundOnion()\n+{\n+    if (!gArgs.IsArgSet(\"-onlynet\")) {\n+        return true;\n+    }\n+    for (const auto& net : gArgs.GetArgs(\"-onlynet\")) {\n+        if (ParseNetwork(net) == NET_ONION) {\n+            return true;\n+        }\n+    }\n+    return false;\n+}\n+\n void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply& reply)\n {\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, possibly set the proxy for onion addresses.\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && AllowOutboundOnion()) {",
    "path": "src/torcontrol.cpp",
    "position": 32,
    "original_position": 26,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "16bf93e1361fa9a1503cadd96e5121d92937bfb5",
    "user": {
      "login": "Talkless",
      "id": 292191,
      "node_id": "MDQ6VXNlcjI5MjE5MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/292191?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Talkless",
      "html_url": "https://github.com/Talkless",
      "followers_url": "https://api.github.com/users/Talkless/followers",
      "following_url": "https://api.github.com/users/Talkless/following{/other_user}",
      "gists_url": "https://api.github.com/users/Talkless/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Talkless/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Talkless/subscriptions",
      "organizations_url": "https://api.github.com/users/Talkless/orgs",
      "repos_url": "https://api.github.com/users/Talkless/repos",
      "events_url": "https://api.github.com/users/Talkless/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Talkless/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is not micro-optimization, but avoiding unnecessary possible premature pessimization, see: https://stackoverflow.com/questions/15875252/premature-optimization-and-premature-pessimization-related-to-c-coding-standar/32269630#32269630\r\n\r\nIt's not optimization as it's not something more complex, harder to write or to read, not something uncommon.",
    "created_at": "2021-08-26T13:25:43Z",
    "updated_at": "2021-08-26T13:25:43Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r696627152",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/696627152"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r696627152"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/696627152/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 389,
    "original_line": 389,
    "side": "RIGHT",
    "in_reply_to_id": 686876527
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/696707142",
    "pull_request_review_id": 739580117,
    "id": 696707142,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NjcwNzE0Mg==",
    "diff_hunk": "@@ -368,14 +369,24 @@ void TorController::add_onion_cb(TorControlConnection& _conn, const TorControlRe\n     }\n }\n \n+static bool AllowOutboundOnion()\n+{\n+    if (!gArgs.IsArgSet(\"-onlynet\")) {\n+        return true;\n+    }\n+    const auto& onlynets = gArgs.GetArgs(\"-onlynet\");",
    "path": "src/torcontrol.cpp",
    "position": null,
    "original_position": 17,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "a2ebcda19a25067cb8183f25f6ffd0a26065fcc5",
    "user": {
      "login": "Talkless",
      "id": 292191,
      "node_id": "MDQ6VXNlcjI5MjE5MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/292191?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Talkless",
      "html_url": "https://github.com/Talkless",
      "followers_url": "https://api.github.com/users/Talkless/followers",
      "following_url": "https://api.github.com/users/Talkless/following{/other_user}",
      "gists_url": "https://api.github.com/users/Talkless/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Talkless/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Talkless/subscriptions",
      "organizations_url": "https://api.github.com/users/Talkless/orgs",
      "repos_url": "https://api.github.com/users/Talkless/repos",
      "events_url": "https://api.github.com/users/Talkless/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Talkless/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`const auto& onlynets` should not be a reference (it was not in my suggestion). It does extend lifetime of temporary, so no undefined horrors here, but since `GetArgs` does not return `const&`, and returned object does not use polymorphism, `&` seems out of place here.",
    "created_at": "2021-08-26T14:50:08Z",
    "updated_at": "2021-08-26T14:50:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r696707142",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/696707142"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r696707142"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/696707142/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 377,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/698478079",
    "pull_request_review_id": 741634705,
    "id": 698478079,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5ODQ3ODA3OQ==",
    "diff_hunk": "@@ -368,14 +369,24 @@ void TorController::add_onion_cb(TorControlConnection& _conn, const TorControlRe\n     }\n }\n \n+static bool AllowOutboundOnion()\n+{\n+    if (!gArgs.IsArgSet(\"-onlynet\")) {\n+        return true;\n+    }\n+    const auto& onlynets = gArgs.GetArgs(\"-onlynet\");",
    "path": "src/torcontrol.cpp",
    "position": null,
    "original_position": 17,
    "commit_id": "baa6cb12ac5071bb68eb5ec375be73df4f4ae28f",
    "original_commit_id": "a2ebcda19a25067cb8183f25f6ffd0a26065fcc5",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Removed.",
    "created_at": "2021-08-30T13:15:37Z",
    "updated_at": "2021-08-30T13:15:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r698478079",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/698478079"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22651#discussion_r698478079"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22651"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/698478079/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 377,
    "side": "RIGHT",
    "in_reply_to_id": 696707142
  }
]