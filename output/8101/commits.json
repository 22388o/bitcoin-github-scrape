[
  {
    "sha": "5f7f82056648ae5b8d289b2c3e9565e7f0f2da46",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ZjdmODIwNTY2NDhhZTViOGQyODliMmMzZTk1NjVlN2YwZjJkYTQ2",
    "commit": {
      "author": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2016-05-26T15:00:08Z"
      },
      "committer": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2016-05-26T15:27:09Z"
      },
      "message": "Disable mining on nonrelease branches.",
      "tree": {
        "sha": "59e20f48f52c0376aff8de4f6ba536f9f2884052",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/59e20f48f52c0376aff8de4f6ba536f9f2884052"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5f7f82056648ae5b8d289b2c3e9565e7f0f2da46",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5f7f82056648ae5b8d289b2c3e9565e7f0f2da46",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5f7f82056648ae5b8d289b2c3e9565e7f0f2da46",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5f7f82056648ae5b8d289b2c3e9565e7f0f2da46/comments",
    "author": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c028c7b7557da2baff7af8840108e8be4db8e0c6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c028c7b7557da2baff7af8840108e8be4db8e0c6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c028c7b7557da2baff7af8840108e8be4db8e0c6"
      }
    ],
    "stats": {
      "total": 17,
      "additions": 17,
      "deletions": 0
    },
    "files": [
      {
        "sha": "db5c2b8977b7b25af057739c1c1cc4206d04e940",
        "filename": "src/chainparams.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5f7f82056648ae5b8d289b2c3e9565e7f0f2da46/src/chainparams.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5f7f82056648ae5b8d289b2c3e9565e7f0f2da46/src/chainparams.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/chainparams.cpp?ref=5f7f82056648ae5b8d289b2c3e9565e7f0f2da46",
        "patch": "@@ -129,6 +129,7 @@ class CMainParams : public CChainParams {\n         fRequireStandard = true;\n         fMineBlocksOnDemand = false;\n         fTestnetToBeDeprecatedFieldRPC = false;\n+        fDisableMiningOnNonreleaseBranches = true;\n \n         checkpointData = (CCheckpointData) {\n             boost::assign::map_list_of\n@@ -214,6 +215,7 @@ class CTestNetParams : public CChainParams {\n         fRequireStandard = false;\n         fMineBlocksOnDemand = false;\n         fTestnetToBeDeprecatedFieldRPC = true;\n+        fDisableMiningOnNonreleaseBranches = false;\n \n         checkpointData = (CCheckpointData) {\n             boost::assign::map_list_of\n@@ -274,6 +276,7 @@ class CRegTestParams : public CChainParams {\n         fRequireStandard = false;\n         fMineBlocksOnDemand = true;\n         fTestnetToBeDeprecatedFieldRPC = false;\n+        fDisableMiningOnNonreleaseBranches = false;\n \n         checkpointData = (CCheckpointData){\n             boost::assign::map_list_of"
      },
      {
        "sha": "44035f20fa29522fda8dc5bb5549387c45394430",
        "filename": "src/chainparams.h",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5f7f82056648ae5b8d289b2c3e9565e7f0f2da46/src/chainparams.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5f7f82056648ae5b8d289b2c3e9565e7f0f2da46/src/chainparams.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/chainparams.h?ref=5f7f82056648ae5b8d289b2c3e9565e7f0f2da46",
        "patch": "@@ -68,6 +68,8 @@ class CChainParams\n     bool MineBlocksOnDemand() const { return fMineBlocksOnDemand; }\n     /** In the future use NetworkIDString() for RPC fields */\n     bool TestnetToBeDeprecatedFieldRPC() const { return fTestnetToBeDeprecatedFieldRPC; }\n+    /** Disable mining on nonrelease branches by default */\n+    bool DisableMiningOnNonreleaseBranches() const { return fDisableMiningOnNonreleaseBranches; }\n     /** Return the BIP70 network string (main, test or regtest) */\n     std::string NetworkIDString() const { return strNetworkID; }\n     const std::vector<CDNSSeedData>& DNSSeeds() const { return vSeeds; }\n@@ -91,6 +93,7 @@ class CChainParams\n     bool fRequireStandard;\n     bool fMineBlocksOnDemand;\n     bool fTestnetToBeDeprecatedFieldRPC;\n+    bool fDisableMiningOnNonreleaseBranches;\n     CCheckpointData checkpointData;\n };\n "
      },
      {
        "sha": "5a6a7b6593d062ad7fc23a864ccd17b99aa9faa7",
        "filename": "src/rpc/mining.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5f7f82056648ae5b8d289b2c3e9565e7f0f2da46/src/rpc/mining.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5f7f82056648ae5b8d289b2c3e9565e7f0f2da46/src/rpc/mining.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/mining.cpp?ref=5f7f82056648ae5b8d289b2c3e9565e7f0f2da46",
        "patch": "@@ -160,6 +160,10 @@ UniValue generate(const UniValue& params, bool fHelp)\n             + HelpExampleCli(\"generate\", \"11\")\n         );\n \n+    const CChainParams& chainParams = Params();\n+    if (!CLIENT_VERSION_IS_RELEASE && chainParams.DisableMiningOnNonreleaseBranches())\n+        throw JSONRPCError(RPC_MINING_DISABLED, \"Mining disabled\");\n+\n     int nGenerate = params[0].get_int();\n     uint64_t nMaxTries = 1000000;\n     if (params.size() > 1) {\n@@ -365,6 +369,10 @@ UniValue getblocktemplate(const UniValue& params, bool fHelp)\n             + HelpExampleRpc(\"getblocktemplate\", \"\")\n          );\n \n+    const CChainParams& chainParams = Params();\n+    if (!CLIENT_VERSION_IS_RELEASE && chainParams.DisableMiningOnNonreleaseBranches())\n+        throw JSONRPCError(RPC_MINING_DISABLED, \"Mining disabled\");\n+\n     LOCK(cs_main);\n \n     std::string strMode = \"template\";"
      },
      {
        "sha": "b808e0ae402970f74c11032ecca242a204841af7",
        "filename": "src/rpc/protocol.h",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5f7f82056648ae5b8d289b2c3e9565e7f0f2da46/src/rpc/protocol.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5f7f82056648ae5b8d289b2c3e9565e7f0f2da46/src/rpc/protocol.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/protocol.h?ref=5f7f82056648ae5b8d289b2c3e9565e7f0f2da46",
        "patch": "@@ -74,6 +74,9 @@ enum RPCErrorCode\n     RPC_WALLET_WRONG_ENC_STATE      = -15, //! Command given in wrong wallet encryption state (encrypting an encrypted wallet etc.)\n     RPC_WALLET_ENCRYPTION_FAILED    = -16, //! Failed to encrypt the wallet\n     RPC_WALLET_ALREADY_UNLOCKED     = -17, //! Wallet is already unlocked\n+\n+    //! Mining errors\n+    RPC_MINING_DISABLED             = -31, //! Mining is disabled\n };\n \n std::string JSONRPCRequest(const std::string& strMethod, const UniValue& params, const UniValue& id);"
      }
    ]
  }
]