jonasschnelli,2015-09-18T15:02:00Z,"utACK (plans to test this soon).\nNot sure about the insides of `getblocktemplate`, but hows does the rpctimeout affect the long poll?\n",https://github.com/bitcoin/bitcoin/pull/6695#issuecomment-141476962,141476962,
laanwj,2015-09-18T15:13:01Z,"> Not sure about the insides of getblocktemplate, but hows does the rpctimeout affect the long poll?\n\nOn the server side it doesn't affect that - it doesn't spend time waiting for input from the client. \nOn the client side, the request will time out if the reply takes longer than `rpcclienttimeout`.\n",https://github.com/bitcoin/bitcoin/pull/6695#issuecomment-141479460,141479460,
morcos,2015-09-18T16:37:56Z,"Unfortunately I'm 0/2 on testing these.  I couldn't recreate the SIGPIPE issue, in master or here, so thats's a start.  But I still get what looks like a timeout from getblocktemplate_longpoll.py  and I still get errors spewed to stdout when I don't have an IPv6 address.\n\nEDIT: as per IRC: \n- SIGPIPE appears to be an OS X issue, which is why I couldn't recreate.\n- older versions of libevent do",https://github.com/bitcoin/bitcoin/pull/6695#issuecomment-141502831,141502831,
laanwj,2015-09-18T17:04:03Z,"From IRC:\n\n```\n<morcos> regarding the rpc timeouts..  before 6695, you could fix the problem by starting the bitcoind's in the python tests with -rpctimeout=1500 (or whatever)\n<morcos> doesn't that imply that somehow it was the timeout on the server end that was the problem?\n```\n\nLooks like the issue is not in bitcoin-cli but in the python http functionality that cannot cope with disconnect",https://github.com/bitcoin/bitcoin/pull/6695#issuecomment-141508329,141508329,
laanwj,2015-09-18T17:07:10Z,The `rpcbind.py` test hang in #6655 is caused by bitcoin-cli being unable to connect to IPv6 IPs. Not sure why. Also not sure whether this affects all libevent versions. But I can reproduce it with libevent 0x02001500 on Ubuntu 14.04 (which is relatively ancient).\n,https://github.com/bitcoin/bitcoin/pull/6695#issuecomment-141508931,141508931,
jonasschnelli,2015-09-18T18:38:55Z,"> SIGPIPE appears to be an OS X issue, which is why I couldn't recreate.\n\nI could reproduce it on debian as well. Use a bitcoin-cli command like `getblocktemplate` or `getrawmempool` and enter `ctrl-C` short after sending-off the command. Very hard to reproduce (requires a few tries).\nWith a script it would probably easy.\n\nThe SIGPIPE gets emitted when bitcoind starts to write to a closed soc",https://github.com/bitcoin/bitcoin/pull/6695#issuecomment-141531692,141531692,
morcos,2015-09-18T22:12:51Z,"@laanwj I know I said I didn't care, but I tracked down the silly warning messages.  We need to call event_set_log_callback.  I tried it and it works.\n\n<img width=""1025"" alt=""screen shot 2015-09-18 at 6 11 17 pm"" src=""https://cloud.githubusercontent.com/assets/4360349/9972254/cb8d5518-5e30-11e5-938e-25d582f564e9.png"">\n",https://github.com/bitcoin/bitcoin/pull/6695#issuecomment-141581490,141581490,
dcousens,2015-09-19T00:53:04Z,concept ACK\n,https://github.com/bitcoin/bitcoin/pull/6695#issuecomment-141604969,141604969,
laanwj,2015-09-19T03:15:38Z,"@morcos Ah, that'd allow redirecting the messages to our own log. That makes sense in addition to what is done here.\n\nEdit: done, the option is -debug=libevent now\n",https://github.com/bitcoin/bitcoin/pull/6695#issuecomment-141616244,141616244,
laanwj,2015-09-19T12:15:11Z,"The Python BadStatusLine on disconnect issue sounds like https://bugs.python.org/issue3566 ""httplib persistent connections violate MUST in RFC2616 sec 8.1.4.""\n\nThis was fixed in Python 3.5.\n\nI've pushed a commit that should work around it.\n",https://github.com/bitcoin/bitcoin/pull/6695#issuecomment-141659875,141659875,
morcos,2015-09-20T15:55:03Z,ACK (modulo missing newlines)\n,https://github.com/bitcoin/bitcoin/pull/6695#issuecomment-141798701,141798701,
laanwj,2015-09-21T11:40:46Z,"Fixed the newline issue (thanks @morcos), removed a spurious change in util.py\n",https://github.com/bitcoin/bitcoin/pull/6695#issuecomment-141949130,141949130,
