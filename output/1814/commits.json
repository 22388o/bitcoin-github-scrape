[
  {
    "sha": "ab91bf39b7c11e9c86bb2043c24f0f377f1cf514",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphYjkxYmYzOWI3YzExZTljODZiYjIwNDNjMjRmMGYzNzdmMWNmNTE0",
    "commit": {
      "author": {
        "name": "Gregory Maxwell",
        "email": "greg@xiph.org",
        "date": "2012-09-10T00:11:04Z"
      },
      "committer": {
        "name": "Gregory Maxwell",
        "email": "greg@xiph.org",
        "date": "2012-09-10T00:11:04Z"
      },
      "message": "Apply BIP30 checks to all blocks except the two historic violations.\n\nMatt pointed out some time ago that there existed a minor DOS\nattack where a node in its initial block download could be wedged\nby an overwrite attack in a fork created between checkpoints before\na time where BIP30 was enforced. Now that the BIP30 timestamp\nis irreversibly past the check can be more aggressive and apply to\nall blocks except the two historic violations.",
      "tree": {
        "sha": "66e52cd9845df7350e55bb2651b08f93e09f87d0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/66e52cd9845df7350e55bb2651b08f93e09f87d0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ab91bf39b7c11e9c86bb2043c24f0f377f1cf514",
      "comment_count": 2,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ab91bf39b7c11e9c86bb2043c24f0f377f1cf514",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ab91bf39b7c11e9c86bb2043c24f0f377f1cf514",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ab91bf39b7c11e9c86bb2043c24f0f377f1cf514/comments",
    "author": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0e08efc54a6be7f0228d0a3410b305772ac5a8fd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0e08efc54a6be7f0228d0a3410b305772ac5a8fd",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0e08efc54a6be7f0228d0a3410b305772ac5a8fd"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 6,
      "deletions": 3
    },
    "files": [
      {
        "sha": "9b4382543399123b39c164c3b3ea16936e288f64",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 3,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ab91bf39b7c11e9c86bb2043c24f0f377f1cf514/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ab91bf39b7c11e9c86bb2043c24f0f377f1cf514/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=ab91bf39b7c11e9c86bb2043c24f0f377f1cf514",
        "patch": "@@ -1360,9 +1360,12 @@ bool CBlock::ConnectBlock(CTxDB& txdb, CBlockIndex* pindex, bool fJustCheck)\n     // See BIP30 and http://r6.ca/blog/20120206T005236Z.html for more information.\n     // This logic is not necessary for memory pool transactions, as AcceptToMemoryPool\n     // already refuses previously-known transaction ids entirely.\n-    // This rule applies to all blocks whose timestamp is after March 15, 2012, 0:00 UTC.\n-    int64 nBIP30SwitchTime = 1331769600;\n-    bool fEnforceBIP30 = (pindex->nTime > nBIP30SwitchTime);\n+    // This rule was originally applied all blocks whose timestamp was after March 15, 2012, 0:00 UTC.\n+    // Now that the whole chain is irreversibly beyond that time it is applied to all blocks except the\n+    // two in the chain that violate it. This prevents exploiting the issue against nodes in their\n+    // initial block download.\n+    bool fEnforceBIP30 = !((pindex->nHeight==91842 && pindex->GetBlockHash() == uint256(\"0x00000000000a4d0a398161ffc163c503763b1f4360639393e0e4c8e300e0caec\")) ||\n+                           (pindex->nHeight==91880 && pindex->GetBlockHash() == uint256(\"0x00000000000743f190a18c5577a3c2d2a1f610ae9601ac046a38084ccb7cd721\")));\n \n     // BIP16 didn't become active until Apr 1 2012\n     int64 nBIP16SwitchTime = 1333238400;"
      }
    ]
  }
]