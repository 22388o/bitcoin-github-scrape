laanwj,2017-06-08T14:41:41Z,"Concept ACK - however some comments:\n\n- This should respect `ENABLE_WALLET`, for compiling without wallet support\n- It should respect runtime `-wallet=0`\n- Wallet events should not go through `CValidationInterface`, it is for validation events only.  To do this correctly, zmq should subscribe to wallet events through `CWallet` directly.",https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-307124685,307124685,
somdoron,2017-06-08T23:05:28Z,"@ryanofsky fixed the type, wrapped the docs and using `const uint256 &hashBlock`\n@laanwj using wallet directly (without going through CValidationInterface)  and respecting  `ENABLE_WALLET`. Respecting `-wallet=0` by checking if `pwalletMain` is not null.",https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-307251062,307251062,
somdoron,2017-06-10T20:39:46Z,@ryanofsky @laanwj rebased the pull request on top of @jnewbery pull request #10555 and now all tests are passing,https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-307588958,307588958,
sipa,2017-06-12T22:52:35Z,"Does ZMQ have any authentication? I believe originally nothing wallet-related was exposed through it, as there may at least by privacy issues from publishing this.",https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-307957621,307957621,
somdoron,2017-06-13T06:41:29Z,"zeromq does have authentication, but it is not being used within bitcoind.\nDo you think it is needed here? my only counter argument is that it should be exposed to internal network and trusted peers only.\n\nBut if you feel that it is needed I can add authentication for the wallet publishers.\n",https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-308022200,308022200,
laanwj,2017-06-13T07:17:07Z,"> Do you think it is needed here? my only counter argument is that it should be exposed to internal network and trusted peers only.\n\nWe could just add a warning (to the option help enabling this) that the API is unauthenticated, and thus wallet notifications should not be used when the zmq endpoints are accessible to other users - they can be restricted by other means, e.g. binding locally, bi",https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-308029001,308029001,
sipa,2017-06-13T08:16:16Z,I have no strong opinion on the need for authentication; I just wanted to bring up that I believed that was the reason for not having wallet specific notifications in ZMQ before.,https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-308042133,308042133,
MarcoFalke,2017-06-18T12:27:42Z,Needs rebase.,https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-309274760,309274760,
somdoron,2017-06-20T17:31:36Z,@MarcoFalke rebased,https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-309831165,309831165,
somdoron,2017-06-20T20:14:56Z,@MarcoFalke fixed and rebased,https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-309877974,309877974,
ryanofsky,2017-10-12T18:05:46Z,"@somdoron are you still working on this? IIUC, luke's improvements could be implemented later without breaking backwards compatibility, if they are what's holding this up.",https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-336219114,336219114,
somdoron,2017-10-17T08:12:25Z,"@ryanofsky yes, will rebase today and send a PR",https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-337153130,337153130,
somdoron,2017-10-22T05:38:31Z,@ryanofsky rebased and all tests passed. Doesn't yet include @luke-jr comments.,https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-338453161,338453161,
jonasschnelli,2017-10-23T01:26:59Z,"I'm still unsure about this, if wtxs (protected by http auth) should be something we broadcast via ZMQ.\nAlternative would be HTTP based long polling (#7949).\n\nAlso, how does this handle multiwallet? Should we somehow integrate the wallet identifier in the notifications?",https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-338525414,338525414,
ryanofsky,2018-01-09T20:20:48Z,"For some reason travis is failing with `contrib/devtools/lint-python.sh: 10: contrib/devtools/lint-python.sh: flake8: not found`. It's possible a rebase might fix this.\n",https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-356402547,356402547,
promag,2018-01-10T15:51:09Z,"> Alternative would be HTTP based long polling (#7949).\n\nI tend to agree with @jonasschnelli alternative.",https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-356643656,356643656,
breitsmiley,2018-05-04T21:35:12Z,What about this PR? Is it going to be added?,https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-386741332,386741332,
jnewbery,2018-05-04T21:44:57Z,"No update from PR author @somdoron since October 2017. Are you still working on this @somdoron ?\n\nIf not, I suggest we close this as 'Up for grabs'",https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-386743272,386743272,
somdoron,2018-05-05T06:16:22Z,"You can close.\n\nI actually used the code in production as part of payments solution.",https://github.com/bitcoin/bitcoin/pull/10554#issuecomment-386782993,386782993,
ryanofsky,2017-06-08T14:19:40Z,Probably s/TransactionAddedWallet/TransactionAddedToWallet/ for consistency,https://github.com/bitcoin/bitcoin/pull/10554#discussion_r120900829,120900829,src/validationinterface.h
ryanofsky,2017-06-08T14:20:36Z,"Throughout the PR, should use `const uint256&` instead of `uint256` arg type to avoid unnecessary copies.",https://github.com/bitcoin/bitcoin/pull/10554#discussion_r120901050,120901050,src/validationinterface.h
ryanofsky,2017-06-08T14:21:55Z,Maybe wrap these lines for consistency with rest of the file.,https://github.com/bitcoin/bitcoin/pull/10554#discussion_r120901415,120901415,doc/zmq.md
MarcoFalke,2017-06-20T17:52:58Z,"nit: missing braces `{` and `}` for the if block, also this need adjustment for multiwallet.",https://github.com/bitcoin/bitcoin/pull/10554#discussion_r123048670,123048670,src/zmq/zmqnotificationinterface.cpp
somdoron,2017-06-20T19:44:23Z,fixed both,https://github.com/bitcoin/bitcoin/pull/10554#discussion_r123075969,123075969,src/zmq/zmqnotificationinterface.cpp
ryanofsky,2017-06-21T16:17:45Z,"I think you should make this a static variable to make the zmq code simpler and less fragile and remove the dependency on ::vpwallets. Advantages of making this static:\n\n* It will let you get rid of the `ConnectToWalletSignals` method and all the ifdefed code around it and simply connect to the signal in `CZMQNotificationInterface::Initialize` consistent with you how currently disconnect in `C",https://github.com/bitcoin/bitcoin/pull/10554#discussion_r123296590,123296590,src/wallet/wallet.h
somdoron,2017-06-21T16:36:53Z,"thanks, will make the change",https://github.com/bitcoin/bitcoin/pull/10554#discussion_r123301453,123301453,src/wallet/wallet.h
ryanofsky,2017-06-22T15:42:45Z,You should be able to shorten this by getting rid of the assignment (it will just call the default constructor which is fine).,https://github.com/bitcoin/bitcoin/pull/10554#discussion_r123547129,123547129,src/wallet/wallet.cpp
somdoron,2017-06-22T16:41:52Z,fixed and rebased last commit. Do you want me to rebase everything into one commit?,https://github.com/bitcoin/bitcoin/pull/10554#discussion_r123562416,123562416,src/wallet/wallet.cpp
ryanofsky,2017-06-22T16:50:56Z,"> fixed and rebased last commit. Do you want me to rebase everything into one commit?\n\nNo preference, either way seems fine.",https://github.com/bitcoin/bitcoin/pull/10554#discussion_r123564631,123564631,src/wallet/wallet.cpp
luke-jr,2017-09-02T04:06:00Z,No documentation on how to determine *which* wallet this transaction involves (is it even possible?),https://github.com/bitcoin/bitcoin/pull/10554#discussion_r136688721,136688721,doc/zmq.md
luke-jr,2017-09-02T04:07:17Z,"IMO `blockHash` should be `nullptr` when not in a block.\n",https://github.com/bitcoin/bitcoin/pull/10554#discussion_r136688759,136688759,src/wallet/wallet.cpp
luke-jr,2017-09-02T04:07:30Z,Probably `CWalletTx` should be passed instead of `CTransactionRef`?,https://github.com/bitcoin/bitcoin/pull/10554#discussion_r136688763,136688763,src/wallet/wallet.cpp
somdoron,2017-09-03T06:04:20Z,It was actually submitted before the multi-wallet was merged. Wallet name (or identifier) can be part of the topic.,https://github.com/bitcoin/bitcoin/pull/10554#discussion_r136709011,136709011,doc/zmq.md
somdoron,2017-09-04T11:03:00Z,actually if CWalletTX is used the blockhash is not needed anymore. I will take a look.,https://github.com/bitcoin/bitcoin/pull/10554#discussion_r136797439,136797439,src/wallet/wallet.cpp
jonasschnelli,2017-10-23T01:22:48Z,~~memcpy?~~,https://github.com/bitcoin/bitcoin/pull/10554#discussion_r146152346,146152346,src/zmq/zmqpublishnotifier.cpp
jonasschnelli,2017-10-23T01:24:39Z,Nevermind. I see we do reverse the byte order here...,https://github.com/bitcoin/bitcoin/pull/10554#discussion_r146152432,146152432,src/zmq/zmqpublishnotifier.cpp
jnewbery,2017-10-23T13:57:42Z,"There only seem to be a couple of other relative includes in the codebase. Other files use:\n\n`#include ""wallet/wallet.h""`",https://github.com/bitcoin/bitcoin/pull/10554#discussion_r146272709,146272709,src/zmq/zmqnotificationinterface.cpp
jnewbery,2017-10-23T14:00:08Z,style nit: braces on same line please.,https://github.com/bitcoin/bitcoin/pull/10554#discussion_r146273485,146273485,src/zmq/zmqnotificationinterface.cpp
jnewbery,2017-10-23T14:00:33Z,"style nit:\n\n`} else {`",https://github.com/bitcoin/bitcoin/pull/10554#discussion_r146273621,146273621,src/zmq/zmqnotificationinterface.cpp
jnewbery,2017-10-23T14:04:25Z,nit: braces please.,https://github.com/bitcoin/bitcoin/pull/10554#discussion_r146274734,146274734,src/zmq/zmqpublishnotifier.cpp
jnewbery,2017-10-23T14:04:44Z,nit: braces please,https://github.com/bitcoin/bitcoin/pull/10554#discussion_r146274827,146274827,src/zmq/zmqpublishnotifier.cpp
jnewbery,2017-10-23T14:13:25Z,nit: function brace on newline please.,https://github.com/bitcoin/bitcoin/pull/10554#discussion_r146277477,146277477,src/zmq/zmqabstractnotifier.cpp
jnewbery,2017-10-23T14:35:40Z,nit: no spaces around the `=` for named arguments.,https://github.com/bitcoin/bitcoin/pull/10554#discussion_r146286112,146286112,test/functional/zmq_test.py
jnewbery,2017-10-23T14:52:35Z,"You've added this but not used it. If it's not being used, can you remove it from this PR?",https://github.com/bitcoin/bitcoin/pull/10554#discussion_r146292213,146292213,test/functional/test_framework/util.py
