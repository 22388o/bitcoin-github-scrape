[
  {
    "sha": "2a59a5745f7b305afc44055ce2261f96ceafc72b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyYTU5YTU3NDVmN2IzMDVhZmM0NDA1NWNlMjI2MWY5NmNlYWZjNzJi",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-08-14T18:28:08Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-08-14T18:28:08Z"
      },
      "message": "Replace boost sleep_for with C++11 equivalent",
      "tree": {
        "sha": "b8fb4e17fc597fca09bbfe8065add1a666a80fb8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b8fb4e17fc597fca09bbfe8065add1a666a80fb8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2a59a5745f7b305afc44055ce2261f96ceafc72b",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlmR6+cACgkQHrd2uwPH\nki2hxQ//dMj/jm3i9lguERHQUU7KkCv+6YAYx/JUySUCNcOo84/TRXJATpOf394M\nBMhB7m+QMb/nU8etYN49sZjjTDyXOsBWIiWgS4YeMRYsC+50ZRit5jopjsNl+Ze2\nbn3a9IsgvtTwoFOTy8KOL0SpTj31C4P5n9SWD7dA6TL+kj7zzbpRdYyeg/ahhf8/\nAh4QLR9kUy4QW3iDQ2NL7r98wIjyWAswOFYODsoE2TFHNrk/tbmDpcopDTK+zD5q\nOaC4zCjvnOq2feAgzqFXDLiJXThA+XvgFEG+PYG3ih98jnW1N+oHImwqe8e39sZH\nIVCGN8OJZki5DG8rmrHGT1shLpGPyNd1mqhzEL2C1V/zQRzGhlXOr2OMm0DASZQQ\n361wvYNyvdVDUjHZlBHCadCJLtr0k6lROSxOWe8kR5GctBdMS0f65KA67L2zXOQ8\n21ZoR4eOn5fuwiIDStL3cJMnos+98Bq60vzIzBsmUmqr0Tz0puSIQHOOJN3f6lCf\nPsjVlHKXpBV5GAOJwr7Z84CnOAuVzOzcdigD3/DbtzyEGC7QVU+zo205MEiUl1dN\nhtglXILIWB+uj6PDtb74NOx0HXf0CkyqT6HcClWM/3BxSqFjyZdewbIJ1xyLHHy9\nAORoMoOOZUNzP4YWN/gAhGcz457e+EWXTeDQzUuq34ID1MB/k1g=\n=67aK\n-----END PGP SIGNATURE-----",
        "payload": "tree b8fb4e17fc597fca09bbfe8065add1a666a80fb8\nparent 140de14a12228cf7af44f59f40a937c2910a0158\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1502735288 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1502735288 +0200\n\nReplace boost sleep_for with C++11 equivalent\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2a59a5745f7b305afc44055ce2261f96ceafc72b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2a59a5745f7b305afc44055ce2261f96ceafc72b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2a59a5745f7b305afc44055ce2261f96ceafc72b/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "140de14a12228cf7af44f59f40a937c2910a0158",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/140de14a12228cf7af44f59f40a937c2910a0158",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/140de14a12228cf7af44f59f40a937c2910a0158"
      }
    ],
    "stats": {
      "total": 81,
      "additions": 7,
      "deletions": 74
    },
    "files": [
      {
        "sha": "77b72b4c1ba11e9c3e8cfc7807bc7cd1b4be66df",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 0,
        "deletions": 51,
        "changes": 51,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2a59a5745f7b305afc44055ce2261f96ceafc72b/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2a59a5745f7b305afc44055ce2261f96ceafc72b/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=2a59a5745f7b305afc44055ce2261f96ceafc72b",
        "patch": "@@ -846,57 +846,6 @@ AC_LINK_IFELSE([AC_LANG_PROGRAM([[\n LIBS=\"$TEMP_LIBS\"\n CPPFLAGS=\"$TEMP_CPPFLAGS\"\n \n-dnl Boost >= 1.50 uses sleep_for rather than the now-deprecated sleep, however\n-dnl it was broken from 1.50 to 1.52 when backed by nanosleep. Use sleep_for if\n-dnl a working version is available, else fall back to sleep. sleep was removed\n-dnl after 1.56.\n-dnl If neither is available, abort.\n-TEMP_LIBS=\"$LIBS\"\n-LIBS=\"$BOOST_LIBS $LIBS\"\n-TEMP_CPPFLAGS=\"$CPPFLAGS\"\n-CPPFLAGS=\"$CPPFLAGS $BOOST_CPPFLAGS\"\n-AC_LINK_IFELSE([AC_LANG_PROGRAM([[\n-  #include <boost/thread/thread.hpp>\n-  #include <boost/version.hpp>\n-  ]],[[\n-  #if BOOST_VERSION >= 105000 && (!defined(BOOST_HAS_NANOSLEEP) || BOOST_VERSION >= 105200)\n-      boost::this_thread::sleep_for(boost::chrono::milliseconds(0));\n-  #else\n-   choke me\n-  #endif\n-  ]])],\n-  [boost_sleep=yes;\n-     AC_DEFINE(HAVE_WORKING_BOOST_SLEEP_FOR, 1, [Define this symbol if boost sleep_for works])],\n-  [boost_sleep=no])\n-LIBS=\"$TEMP_LIBS\"\n-CPPFLAGS=\"$TEMP_CPPFLAGS\"\n-\n-if test x$boost_sleep != xyes; then\n-TEMP_LIBS=\"$LIBS\"\n-LIBS=\"$BOOST_LIBS $LIBS\"\n-TEMP_CPPFLAGS=\"$CPPFLAGS\"\n-CPPFLAGS=\"$CPPFLAGS $BOOST_CPPFLAGS\"\n-AC_LINK_IFELSE([AC_LANG_PROGRAM([[\n-  #include <boost/version.hpp>\n-  #include <boost/thread.hpp>\n-  #include <boost/date_time/posix_time/posix_time_types.hpp>\n-  ]],[[\n-  #if BOOST_VERSION <= 105600\n-      boost::this_thread::sleep(boost::posix_time::milliseconds(0));\n-  #else\n-   choke me\n-  #endif\n-  ]])],\n-  [boost_sleep=yes; AC_DEFINE(HAVE_WORKING_BOOST_SLEEP, 1, [Define this symbol if boost sleep works])],\n-  [boost_sleep=no])\n-LIBS=\"$TEMP_LIBS\"\n-CPPFLAGS=\"$TEMP_CPPFLAGS\"\n-fi\n-\n-if test x$boost_sleep != xyes; then\n-  AC_MSG_ERROR(No working boost sleep implementation found.)\n-fi\n-\n fi\n \n if test x$use_pkgconfig = xyes; then"
      },
      {
        "sha": "cd59a312feb77fb7687f6a6e953a5e12fc2b4b69",
        "filename": "src/test/scheduler_tests.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 8,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2a59a5745f7b305afc44055ce2261f96ceafc72b/src/test/scheduler_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2a59a5745f7b305afc44055ce2261f96ceafc72b/src/test/scheduler_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/scheduler_tests.cpp?ref=2a59a5745f7b305afc44055ce2261f96ceafc72b",
        "patch": "@@ -11,6 +11,9 @@\n #include <boost/thread.hpp>\n #include <boost/test/unit_test.hpp>\n \n+#include <chrono>\n+#include <thread>\n+\n BOOST_AUTO_TEST_SUITE(scheduler_tests)\n \n static void microTask(CScheduler& s, boost::mutex& mutex, int& counter, int delta, boost::chrono::system_clock::time_point rescheduleTime)\n@@ -28,14 +31,7 @@ static void microTask(CScheduler& s, boost::mutex& mutex, int& counter, int delt\n \n static void MicroSleep(uint64_t n)\n {\n-#if defined(HAVE_WORKING_BOOST_SLEEP_FOR)\n-    boost::this_thread::sleep_for(boost::chrono::microseconds(n));\n-#elif defined(HAVE_WORKING_BOOST_SLEEP)\n-    boost::this_thread::sleep(boost::posix_time::microseconds(n));\n-#else\n-    //should never get here\n-    #error missing boost sleep implementation\n-#endif\n+    std::this_thread::sleep_for(std::chrono::microseconds(n));\n }\n \n BOOST_AUTO_TEST_CASE(manythreads)"
      },
      {
        "sha": "f9955607fc12d6444e93b7503bf1367203d6810f",
        "filename": "src/utiltime.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 15,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2a59a5745f7b305afc44055ce2261f96ceafc72b/src/utiltime.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2a59a5745f7b305afc44055ce2261f96ceafc72b/src/utiltime.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/utiltime.cpp?ref=2a59a5745f7b305afc44055ce2261f96ceafc72b",
        "patch": "@@ -10,9 +10,10 @@\n #include \"utiltime.h\"\n \n #include <atomic>\n+#include <chrono>\n+#include <thread>\n \n #include <boost/date_time/posix_time/posix_time.hpp>\n-#include <boost/thread.hpp>\n \n static std::atomic<int64_t> nMockTime(0); //!< For unit testing\n \n@@ -59,20 +60,7 @@ int64_t GetSystemTimeInSeconds()\n \n void MilliSleep(int64_t n)\n {\n-\n-/**\n- * Boost's sleep_for was uninterruptible when backed by nanosleep from 1.50\n- * until fixed in 1.52. Use the deprecated sleep method for the broken case.\n- * See: https://svn.boost.org/trac/boost/ticket/7238\n- */\n-#if defined(HAVE_WORKING_BOOST_SLEEP_FOR)\n-    boost::this_thread::sleep_for(boost::chrono::milliseconds(n));\n-#elif defined(HAVE_WORKING_BOOST_SLEEP)\n-    boost::this_thread::sleep(boost::posix_time::milliseconds(n));\n-#else\n-//should never get here\n-#error missing boost sleep implementation\n-#endif\n+    std::this_thread::sleep_for(std::chrono::milliseconds(n));\n }\n \n std::string DateTimeStrFormat(const char* pszFormat, int64_t nTime)"
      }
    ]
  }
]