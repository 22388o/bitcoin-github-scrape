[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/937711448",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23213#issuecomment-937711448",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23213",
    "id": 937711448,
    "node_id": "IC_kwDOABII58435FdY",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-07T11:40:57Z",
    "updated_at": "2021-10-07T11:40:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK\r\n\r\nVery happy to see the `KNOWN_VIOLATIONS` list in `test/lint/lint-locale-dependence.sh` shrink. Only a few violations left to tackle! :)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/937711448/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938015801",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23213#issuecomment-938015801",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23213",
    "id": 938015801,
    "node_id": "IC_kwDOABII58436Pw5",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-07T17:44:13Z",
    "updated_at": "2021-10-07T17:44:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#20744](https://github.com/bitcoin/bitcoin/pull/20744) (Use std::filesystem. Remove Boost Filesystem & System by fanquake)\n* [#17631](https://github.com/bitcoin/bitcoin/pull/17631) (Expose block filters over REST. by TheBlueMatt)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938015801/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940729329",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23213#issuecomment-940729329",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23213",
    "id": 940729329,
    "node_id": "IC_kwDOABII5844EmPx",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T07:11:35Z",
    "updated_at": "2021-10-12T07:11:35Z",
    "author_association": "MEMBER",
    "body": "> a couple ideas, feel free to ignore\r\n\r\nLeaving as is for now.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940729329/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940729939",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23213#issuecomment-940729939",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23213",
    "id": 940729939,
    "node_id": "IC_kwDOABII5844EmZT",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T07:12:34Z",
    "updated_at": "2021-10-12T07:12:34Z",
    "author_association": "MEMBER",
    "body": "Force pushed with a rebase. Should be easy to re-ACK with git range-diff (6 line diff).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940729939/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940768689",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23213#issuecomment-940768689",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23213",
    "id": 940768689,
    "node_id": "IC_kwDOABII5844Ev2x",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T08:08:51Z",
    "updated_at": "2021-10-12T08:08:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "cr ACK fa8d49289479b8eda7ba7530515c414d1cd566a3",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940768689/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/725484081",
    "pull_request_review_id": 775576361,
    "id": 725484081,
    "node_id": "PRRC_kwDOABII584rPgIx",
    "diff_hunk": "@@ -279,6 +279,28 @@ def run_test(self):\n         json_obj = self.test_rest_request(f\"/headers/5/{bb_hash}\")\n         assert_equal(len(json_obj), 5)  # now we should have 5 header objects\n \n+        # Test number parsing\n+        assert_equal(",
    "path": "test/functional/interface_rest.py",
    "position": null,
    "original_position": 5,
    "commit_id": "fa8d49289479b8eda7ba7530515c414d1cd566a3",
    "original_commit_id": "fabff34c6dc643a06c93acb76dc52b1366fae2e7",
    "user": {
      "login": "brunoerg",
      "id": 19480819,
      "node_id": "MDQ6VXNlcjE5NDgwODE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brunoerg",
      "html_url": "https://github.com/brunoerg",
      "followers_url": "https://api.github.com/users/brunoerg/followers",
      "following_url": "https://api.github.com/users/brunoerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/brunoerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
      "organizations_url": "https://api.github.com/users/brunoerg/orgs",
      "repos_url": "https://api.github.com/users/brunoerg/repos",
      "events_url": "https://api.github.com/users/brunoerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brunoerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Wouldn't it be better using a loop to avoid repetition? like:\r\n```\r\nitems = ['5a', '-5', '0', '2001', '99999999999999999999999999999999999']\r\n   for i in items:\r\n     assert_equal(\r\n        bytes(f'Header count out of range: {i}\\r\\n', 'utf8'),\r\n        self.test_rest_request(f\"/headers/{i}/{bb_hash}\", ret_type=RetType.BYTES, status=400),\r\n     )\r\n```",
    "created_at": "2021-10-09T12:51:55Z",
    "updated_at": "2021-10-09T12:51:55Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r725484081",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/725484081"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r725484081"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/725484081/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 283,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/725941755",
    "pull_request_review_id": 776001516,
    "id": 725941755,
    "node_id": "PRRC_kwDOABII584rRP37",
    "diff_hunk": "@@ -279,6 +279,28 @@ def run_test(self):\n         json_obj = self.test_rest_request(f\"/headers/5/{bb_hash}\")\n         assert_equal(len(json_obj), 5)  # now we should have 5 header objects\n \n+        # Test number parsing\n+        assert_equal(",
    "path": "test/functional/interface_rest.py",
    "position": null,
    "original_position": 5,
    "commit_id": "fa8d49289479b8eda7ba7530515c414d1cd566a3",
    "original_commit_id": "fabff34c6dc643a06c93acb76dc52b1366fae2e7",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks, done",
    "created_at": "2021-10-11T09:21:25Z",
    "updated_at": "2021-10-11T09:21:25Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r725941755",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/725941755"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r725941755"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/725941755/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 283,
    "side": "RIGHT",
    "in_reply_to_id": 725484081
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726474942",
    "pull_request_review_id": 776544987,
    "id": 726474942,
    "node_id": "PRRC_kwDOABII584rTSC-",
    "diff_hunk": "@@ -189,18 +189,19 @@ static bool rest_headers(const std::any& context,\n     if (path.size() != 2)\n         return RESTERR(req, HTTP_BAD_REQUEST, \"No header count specified. Use /rest/headers/<count>/<hash>.<ext>.\");\n \n-    long count = strtol(path[0].c_str(), nullptr, 10);\n-    if (count < 1 || count > 2000)\n+    const auto parsed_count{ToIntegral<size_t>(path[0])};\n+    if (!parsed_count || *parsed_count < 1 || *parsed_count > 2000) {",
    "path": "src/rest.cpp",
    "position": null,
    "original_position": 7,
    "commit_id": "fa8d49289479b8eda7ba7530515c414d1cd566a3",
    "original_commit_id": "fa21fd44e24bb9e4e19e3e8bc4f0de8df34d9535",
    "user": {
      "login": "shaavan",
      "id": 85434418,
      "node_id": "MDQ6VXNlcjg1NDM0NDE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/85434418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shaavan",
      "html_url": "https://github.com/shaavan",
      "followers_url": "https://api.github.com/users/shaavan/followers",
      "following_url": "https://api.github.com/users/shaavan/following{/other_user}",
      "gists_url": "https://api.github.com/users/shaavan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shaavan/subscriptions",
      "organizations_url": "https://api.github.com/users/shaavan/orgs",
      "repos_url": "https://api.github.com/users/shaavan/repos",
      "events_url": "https://api.github.com/users/shaavan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shaavan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "For a very similar reason as specified [here](https://github.com/bitcoin/bitcoin/pull/23227#discussion_r725608515) I would suggest making the following change.\r\n```suggestion\r\n    if (!parsed_count.has_value() || *parsed_count < 1 || *parsed_count > 2000) {\r\n```\r\n\r\n**Doubt:** In the PR, 23227, you used checked access for the variable num. But in this PR, you used unchecked access for the variable parsed_count, though they had a very similar use case. Is there any specific reason behind doing so? (Checked Unchecked access [reference](https://stackoverflow.com/a/56082718))",
    "created_at": "2021-10-11T18:00:59Z",
    "updated_at": "2021-10-11T18:04:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r726474942",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726474942"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r726474942"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726474942/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 193,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726821437",
    "pull_request_review_id": 776962281,
    "id": 726821437,
    "node_id": "PRRC_kwDOABII584rUmo9",
    "diff_hunk": "@@ -189,18 +189,19 @@ static bool rest_headers(const std::any& context,\n     if (path.size() != 2)\n         return RESTERR(req, HTTP_BAD_REQUEST, \"No header count specified. Use /rest/headers/<count>/<hash>.<ext>.\");\n \n-    long count = strtol(path[0].c_str(), nullptr, 10);\n-    if (count < 1 || count > 2000)\n+    const auto parsed_count{ToIntegral<size_t>(path[0])};\n+    if (!parsed_count || *parsed_count < 1 || *parsed_count > 2000) {",
    "path": "src/rest.cpp",
    "position": null,
    "original_position": 7,
    "commit_id": "fa8d49289479b8eda7ba7530515c414d1cd566a3",
    "original_commit_id": "fa21fd44e24bb9e4e19e3e8bc4f0de8df34d9535",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> Doubt: In the PR, 23227, you used checked access for the variable num. But in this PR, you used unchecked access for the variable parsed_count, though they had a very similar use case. Is there any specific reason behind doing so? (Checked Unchecked access reference)\r\n\r\nbitcoin-tx is allowed to throw exceptions, so there is no downside in using `.value()`, thus doing the check twice. `rest` is not allowed to do that, so we do the check only once, which is sufficient.",
    "created_at": "2021-10-12T07:07:32Z",
    "updated_at": "2021-10-12T07:07:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r726821437",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726821437"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r726821437"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726821437/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 193,
    "side": "RIGHT",
    "in_reply_to_id": 726474942
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726822864",
    "pull_request_review_id": 776964046,
    "id": 726822864,
    "node_id": "PRRC_kwDOABII584rUm_Q",
    "diff_hunk": "@@ -189,18 +189,19 @@ static bool rest_headers(const std::any& context,\n     if (path.size() != 2)\n         return RESTERR(req, HTTP_BAD_REQUEST, \"No header count specified. Use /rest/headers/<count>/<hash>.<ext>.\");\n \n-    long count = strtol(path[0].c_str(), nullptr, 10);\n-    if (count < 1 || count > 2000)\n+    const auto parsed_count{ToIntegral<size_t>(path[0])};\n+    if (!parsed_count || *parsed_count < 1 || *parsed_count > 2000) {",
    "path": "src/rest.cpp",
    "position": null,
    "original_position": 7,
    "commit_id": "fa8d49289479b8eda7ba7530515c414d1cd566a3",
    "original_commit_id": "fa21fd44e24bb9e4e19e3e8bc4f0de8df34d9535",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> has_value\r\n\r\nThanks, done.",
    "created_at": "2021-10-12T07:09:33Z",
    "updated_at": "2021-10-12T07:09:33Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r726822864",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726822864"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r726822864"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726822864/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 193,
    "side": "RIGHT",
    "in_reply_to_id": 726474942
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726868492",
    "pull_request_review_id": 777023713,
    "id": 726868492,
    "node_id": "PRRC_kwDOABII584rUyIM",
    "diff_hunk": "@@ -189,18 +189,19 @@ static bool rest_headers(const std::any& context,\n     if (path.size() != 2)\n         return RESTERR(req, HTTP_BAD_REQUEST, \"No header count specified. Use /rest/headers/<count>/<hash>.<ext>.\");\n \n-    long count = strtol(path[0].c_str(), nullptr, 10);\n-    if (count < 1 || count > 2000)\n+    const auto parsed_count{ToIntegral<size_t>(path[0])};\n+    if (!parsed_count.has_value() || *parsed_count < 1 || *parsed_count > 2000) {",
    "path": "src/rest.cpp",
    "position": 7,
    "original_position": 7,
    "commit_id": "fa8d49289479b8eda7ba7530515c414d1cd566a3",
    "original_commit_id": "fa8d49289479b8eda7ba7530515c414d1cd566a3",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit,\r\n```cpp\r\nif (!parsed_count.has_value()) {\r\n    return RESTERR(req, HTTP_BAD_REQUEST, \"Header count invalid: \" + SanitizeString(path[0]));\r\n}\r\n```\r\n",
    "created_at": "2021-10-12T08:10:37Z",
    "updated_at": "2021-10-12T08:12:30Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r726868492",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726868492"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r726868492"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726868492/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 193,
    "original_line": 193,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726910395",
    "pull_request_review_id": 777078661,
    "id": 726910395,
    "node_id": "PRRC_kwDOABII584rU8W7",
    "diff_hunk": "@@ -189,18 +189,19 @@ static bool rest_headers(const std::any& context,\n     if (path.size() != 2)\n         return RESTERR(req, HTTP_BAD_REQUEST, \"No header count specified. Use /rest/headers/<count>/<hash>.<ext>.\");\n \n-    long count = strtol(path[0].c_str(), nullptr, 10);\n-    if (count < 1 || count > 2000)\n+    const auto parsed_count{ToIntegral<size_t>(path[0])};\n+    if (!parsed_count.has_value() || *parsed_count < 1 || *parsed_count > 2000) {",
    "path": "src/rest.cpp",
    "position": 7,
    "original_position": 7,
    "commit_id": "fa8d49289479b8eda7ba7530515c414d1cd566a3",
    "original_commit_id": "fa8d49289479b8eda7ba7530515c414d1cd566a3",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This would also print \"invalid\" instead of \"out of range\" for `-1` and `99999999999999999999999999999999999`. I think the current code is fine. Leaving as is for now.",
    "created_at": "2021-10-12T08:58:11Z",
    "updated_at": "2021-10-12T08:58:11Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r726910395",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726910395"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r726910395"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726910395/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 193,
    "original_line": 193,
    "side": "RIGHT",
    "in_reply_to_id": 726868492
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/727084567",
    "pull_request_review_id": 777311729,
    "id": 727084567,
    "node_id": "PRRC_kwDOABII584rVm4X",
    "diff_hunk": "@@ -189,18 +189,19 @@ static bool rest_headers(const std::any& context,\n     if (path.size() != 2)\n         return RESTERR(req, HTTP_BAD_REQUEST, \"No header count specified. Use /rest/headers/<count>/<hash>.<ext>.\");\n \n-    long count = strtol(path[0].c_str(), nullptr, 10);\n-    if (count < 1 || count > 2000)\n+    const auto parsed_count{ToIntegral<size_t>(path[0])};\n+    if (!parsed_count || *parsed_count < 1 || *parsed_count > 2000) {",
    "path": "src/rest.cpp",
    "position": null,
    "original_position": 7,
    "commit_id": "fa8d49289479b8eda7ba7530515c414d1cd566a3",
    "original_commit_id": "fa21fd44e24bb9e4e19e3e8bc4f0de8df34d9535",
    "user": {
      "login": "shaavan",
      "id": 85434418,
      "node_id": "MDQ6VXNlcjg1NDM0NDE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/85434418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shaavan",
      "html_url": "https://github.com/shaavan",
      "followers_url": "https://api.github.com/users/shaavan/followers",
      "following_url": "https://api.github.com/users/shaavan/following{/other_user}",
      "gists_url": "https://api.github.com/users/shaavan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shaavan/subscriptions",
      "organizations_url": "https://api.github.com/users/shaavan/orgs",
      "repos_url": "https://api.github.com/users/shaavan/repos",
      "events_url": "https://api.github.com/users/shaavan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shaavan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> bitcoin-tx is allowed to throw exceptions, so there is no downside in using .value(), thus doing the check twice. rest is not allowed to do that, so we do the check only once, which is sufficient.\r\n\r\nThat makes sense. Thanks for clearing it out!",
    "created_at": "2021-10-12T12:24:19Z",
    "updated_at": "2021-10-12T12:24:19Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r727084567",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/727084567"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23213#discussion_r727084567"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23213"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/727084567/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 193,
    "side": "RIGHT",
    "in_reply_to_id": 726474942
  }
]