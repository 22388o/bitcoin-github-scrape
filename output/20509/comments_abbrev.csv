vasild,2020-11-26 15:03:16,"This has low impact because, while in theory some disk contents could cause us to deserialize inconsistently, we never create such disk contents. `CAddress` would serialize as either one of:\n* a version that contains `ADDRV2_FORMAT`, `nServices` in CompactSize, the address in addrv2 format; or\n* a version that does not contain `ADDRV2_FORMAT`, `nServices` in 8 bytes, the address in addrv1 form",https://github.com/bitcoin/bitcoin/pull/20509#issuecomment-734346637,734346637,
sipa,2020-11-27 01:45:09,"I'd very much have preferred this approach, and just deprecated the use of the CAddress serialized version numbers, but I fear that #20511 leaves us little choice to go the other way (and make everything use the stored version): I've opened #20516 to do so.",https://github.com/bitcoin/bitcoin/pull/20509#issuecomment-734530222,734530222,
DrahtBot,2020-11-27 02:30:18,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20516 (Well-defined CAddress disk serialization, and addrv2 anchors.dat by sipa)\n\nIf you consider this pull request imp",https://github.com/bitcoin/bitcoin/pull/20509#issuecomment-734557643,734557643,
luke-jr,2020-11-30 17:49:14,"This looks wrong? If the disk has a non-addrv2 format, we shouldn't try to deserialise it as such...",https://github.com/bitcoin/bitcoin/pull/20509#issuecomment-735940269,735940269,
vasild,2020-12-01 13:34:23,"@luke-jr well, the assumption is that the version is set properly in the stream by the caller (this is the case in the current `master`). There is this inconsistency in `CAddress` deserialization:\n\n```cpp\n    SERIALIZE_METHODS(CAddress, obj)\n    {\n...\n        int nVersion = s.GetVersion();\n        if (s.GetType() & SER_DISK) {\n            READWRITE(nVersion); // Saves the disk cont",https://github.com/bitcoin/bitcoin/pull/20509#issuecomment-736554445,736554445,
DrahtBot,2021-06-17 17:46:20,"<!--cf906140f33d8803c4a75a2196329ecb-->\nüêô This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a ""draft"".</sub>",https://github.com/bitcoin/bitcoin/pull/20509#issuecomment-863437503,863437503,
jonatack,2021-06-17 17:57:43,"Following the merge of #20516, maybe this PR can be closed IIUC.",https://github.com/bitcoin/bitcoin/pull/20509#issuecomment-863444473,863444473,
MarcoFalke,2021-06-21 09:57:57,@vasild Closing for now,https://github.com/bitcoin/bitcoin/pull/20509#issuecomment-864902141,864902141,
vasild,2021-06-21 15:00:31,"Yes, from [above](https://github.com/bitcoin/bitcoin/pull/20509#issuecomment-736554445):\n\n> If #20516 gets merged, then this PR would be obsolete and can be closed.\n\nThanks!",https://github.com/bitcoin/bitcoin/pull/20509#issuecomment-865104739,865104739,
