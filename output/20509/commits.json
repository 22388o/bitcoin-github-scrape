[
  {
    "sha": "a55a3384ee5e4ade154965cd5f3ef503817b4a78",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphNTVhMzM4NGVlNWU0YWRlMTU0OTY1Y2Q1ZjNlZjUwMzgxN2I0YTc4",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2020-11-26T14:43:27Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2020-11-26T14:43:27Z"
      },
      "message": "net: CAddress deser: use stream's version, not what's coming from disk\n\nDuring `CAddress` deserialization we use `nVersion` to decide whether to\nuse CompactSize format for `nServices`. However, that variable `nVersion`\nis first assigned `s.GetVersion()` and is later overwritten with\nwhatever is coming from disk by `READWRITE(nVersion)`.\n\nWe should use `s.GetVersion()` instead, which is also used by\n`READWRITEAS(CService, obj);`, called at the end of `CAddress`\ndeserialization.",
      "tree": {
        "sha": "17d56be3b9eae82ec8edfc64fdd46b36bee6d85e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/17d56be3b9eae82ec8edfc64fdd46b36bee6d85e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a55a3384ee5e4ade154965cd5f3ef503817b4a78",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAl+/wUcACgkQVN8G9ktV\ny7+aPR//V1Tm/wjfBHcm7Bd7b/DyWN/Zk5K+t0P+CascQL2515Knz7dzgUja54Qs\nAQf1NpQfQ2MA/EPL/KJ1el7EbzJ80Xgcf86anR15Fx1NmmnrA5OaCxymWYUvy1jn\nzTfmbOGb6e1z42Q49I3v6PGkCrhQxbPxyKvtj1uufYYNNJAIftid7P+6BXgTbG3q\nPUVUbJXVNSCsXogc94xQGyv1N3/53B+CHUSZzWkmYo7wQ6CW3zb7nqn9pqJedEmU\nQqmTjsjC5FdQnbHDTEQaqrbGDAnayuClLnf+tnxQMJcB0h81XkSsRChD8FSEQjzW\n3t+AF58El2WxbMG2uKj4r6R9fYIcOVh8V//rNbvNFBPhHU17ZC/ZE/KgfbCX8CNd\nFXhN1m8HAb2nBLXb0uHYdcsa6tF1cQMmYtlNXNX2isTjr0Put1Enw+RllJvt0PQQ\nXLFBZW/LrzXE6lT2Y5cC1fudyI27mQuXhPh2zFELTaKVo8eMDFGwzEvHdoOOfKWG\n+9V02LOLJHRbQJpBSCxBekBHb1PB4XkH3/EmL64qA343704ngE557I7z7+/9/ksa\nMmjNxqBa68VYAAioLs4q6+jWEIrYqBUlpkeygZXXQCrXIrhT3sFDxCTqEJ0ywFTh\n+wmZqqxK2rhJfTKmIWW1ASb4tjtWwwLwXnmpwPKoQD40SePf8SuY9ziPcU4KpMLJ\neowsMZJukIB7iGl5EBB7BPTma37Md4rO65/bE0p1+AzaZeGms5B8kwa0sNFw2E07\nRTIbThY4zs6fbVimrx7K4AaRtP9khiCg10Mkreefy4zSGQOhcb2tnoTxRVHKXg+u\nf52AYaEEkJJVby0kCWfXNSZoQhc3u3pmiylX8fex9Au/0ykTGvTUZzX8UnNtf5UR\nVcGerla2R7nJFAmRcnJvDY5bhgMsqLZKyW8JKoUJA6WiJtSHIOf0WE+IQk5C6/sj\nmQJn/xyINIjQhf/jXaGIZAQYeu8P86/fbRZMDjDRGyrtbXiNQwy8m8js90ZNtdwB\n7rs+QH6B3nBHc65QQW4dSVNe1Dzp41oyu0BFDYAknKuiMHbsU5TWWLjSiVio6PeV\nhxGe7ca27tWJBogWpjUgHMXO8BKNFnTRjiNgNG2jhVqQSPu7WTba9+ClEuQ+eQS4\n7QJOTP8rrAK7E7rWtW8yhQy4m03dL29VTxeAoN2m5HPHVxeb7px8aTDYGWcyF/9K\nrzJvOCRtc5SufLN53mERPOzcZs/LlQPaaEw22b+bZHNjpxOQarSnK0hwNmGvMglK\nLciLuO7yqSM/f0IOxVavv9VOvGz/ivGOYEgR7Ie/AQtXO3usH6qSdLCOXX5HPr1y\nJ4AbipN5n9MGEXUGFv+e5IRgfcVF+w==\n=KK3l\n-----END PGP SIGNATURE-----",
        "payload": "tree 17d56be3b9eae82ec8edfc64fdd46b36bee6d85e\nparent 50091592dd875a1c94030dbed74112b003732d68\nauthor Vasil Dimov <vd@FreeBSD.org> 1606401807 +0100\ncommitter Vasil Dimov <vd@FreeBSD.org> 1606401807 +0100\n\nnet: CAddress deser: use stream's version, not what's coming from disk\n\nDuring `CAddress` deserialization we use `nVersion` to decide whether to\nuse CompactSize format for `nServices`. However, that variable `nVersion`\nis first assigned `s.GetVersion()` and is later overwritten with\nwhatever is coming from disk by `READWRITE(nVersion)`.\n\nWe should use `s.GetVersion()` instead, which is also used by\n`READWRITEAS(CService, obj);`, called at the end of `CAddress`\ndeserialization.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a55a3384ee5e4ade154965cd5f3ef503817b4a78",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a55a3384ee5e4ade154965cd5f3ef503817b4a78",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a55a3384ee5e4ade154965cd5f3ef503817b4a78/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "50091592dd875a1c94030dbed74112b003732d68",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/50091592dd875a1c94030dbed74112b003732d68",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/50091592dd875a1c94030dbed74112b003732d68"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "e0786bce21404deb2cb92a86d13e863705817062",
        "filename": "src/protocol.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a55a3384ee5e4ade154965cd5f3ef503817b4a78/src/protocol.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a55a3384ee5e4ade154965cd5f3ef503817b4a78/src/protocol.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/protocol.h?ref=a55a3384ee5e4ade154965cd5f3ef503817b4a78",
        "patch": "@@ -383,7 +383,7 @@ class CAddress : public CService\n             // nTime.\n             READWRITE(obj.nTime);\n         }\n-        if (nVersion & ADDRV2_FORMAT) {\n+        if (s.GetVersion() & ADDRV2_FORMAT) {\n             uint64_t services_tmp;\n             SER_WRITE(obj, services_tmp = obj.nServices);\n             READWRITE(Using<CompactSizeFormatter<false>>(services_tmp));"
      }
    ]
  }
]