[
  {
    "sha": "d6cc6a1830bb7e03701488ca30c46457434dec6c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNmNjNmExODMwYmI3ZTAzNzAxNDg4Y2EzMGM0NjQ1NzQzNGRlYzZj",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao@uphold.com",
        "date": "2016-02-11T01:07:22Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao@uphold.com",
        "date": "2016-03-08T15:14:47Z"
      },
      "message": "Use CCoinControl selection in CWallet::FundTransaction",
      "tree": {
        "sha": "7d4dab4705ac661f0ba761483e98b0cbf62cf069",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7d4dab4705ac661f0ba761483e98b0cbf62cf069"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d6cc6a1830bb7e03701488ca30c46457434dec6c",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d6cc6a1830bb7e03701488ca30c46457434dec6c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d6cc6a1830bb7e03701488ca30c46457434dec6c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d6cc6a1830bb7e03701488ca30c46457434dec6c/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "87d65622996d6b6539dba973a4427e542cc291c7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/87d65622996d6b6539dba973a4427e542cc291c7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/87d65622996d6b6539dba973a4427e542cc291c7"
      }
    ],
    "stats": {
      "total": 20,
      "additions": 5,
      "deletions": 15
    },
    "files": [
      {
        "sha": "12fe9ce219c272a5d3c5b78339d52a83645eb424",
        "filename": "src/coincontrol.h",
        "status": "modified",
        "additions": 2,
        "deletions": 3,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6cc6a1830bb7e03701488ca30c46457434dec6c/src/coincontrol.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6cc6a1830bb7e03701488ca30c46457434dec6c/src/coincontrol.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/coincontrol.h?ref=d6cc6a1830bb7e03701488ca30c46457434dec6c",
        "patch": "@@ -38,10 +38,9 @@ class CCoinControl\n         return (setSelected.size() > 0);\n     }\n \n-    bool IsSelected(const uint256& hash, unsigned int n) const\n+    bool IsSelected(const COutPoint& output) const\n     {\n-        COutPoint outpt(hash, n);\n-        return (setSelected.count(outpt) > 0);\n+        return (setSelected.count(output) > 0);\n     }\n \n     void Select(const COutPoint& output)"
      },
      {
        "sha": "f909499952c7e3c6971f4b57b17ec5a1810bb580",
        "filename": "src/qt/coincontroldialog.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6cc6a1830bb7e03701488ca30c46457434dec6c/src/qt/coincontroldialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6cc6a1830bb7e03701488ca30c46457434dec6c/src/qt/coincontroldialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/coincontroldialog.cpp?ref=d6cc6a1830bb7e03701488ca30c46457434dec6c",
        "patch": "@@ -796,7 +796,7 @@ void CoinControlDialog::updateView()\n             }\n \n             // set checkbox\n-            if (coinControl->IsSelected(txhash, out.i))\n+            if (coinControl->IsSelected(COutPoint(txhash, out.i)))\n                 itemOutput->setCheckState(COLUMN_CHECKBOX, Qt::Checked);\n         }\n "
      },
      {
        "sha": "6c7173ede1ad4ea9b8b5058545e10641d1924454",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 11,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6cc6a1830bb7e03701488ca30c46457434dec6c/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6cc6a1830bb7e03701488ca30c46457434dec6c/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=d6cc6a1830bb7e03701488ca30c46457434dec6c",
        "patch": "@@ -1669,7 +1669,7 @@ void CWallet::AvailableCoins(vector<COutput>& vCoins, bool fOnlyConfirmed, const\n                 isminetype mine = IsMine(pcoin->vout[i]);\n                 if (!(IsSpent(wtxid, i)) && mine != ISMINE_NO &&\n                     !IsLockedCoin((*it).first, i) && (pcoin->vout[i].nValue > 0 || fIncludeZeroValue) &&\n-                    (!coinControl || !coinControl->HasSelected() || coinControl->fAllowOtherInputs || coinControl->IsSelected((*it).first, i)))\n+                    (!coinControl || !coinControl->HasSelected() || coinControl->fAllowOtherInputs || coinControl->IsSelected(COutPoint((*it).first, i))))\n                         vCoins.push_back(COutput(pcoin, i, nDepth,\n                                                  ((mine & ISMINE_SPENDABLE) != ISMINE_NO) ||\n                                                   (coinControl && coinControl->fAllowWatchOnly && (mine & ISMINE_WATCH_SOLVABLE) != ISMINE_NO)));\n@@ -1927,16 +1927,7 @@ bool CWallet::FundTransaction(CMutableTransaction& tx, CAmount &nFeeRet, int& nC\n     // Add new txins (keeping original txin scriptSig/order)\n     BOOST_FOREACH(const CTxIn& txin, wtx.vin)\n     {\n-        bool found = false;\n-        BOOST_FOREACH(const CTxIn& origTxIn, tx.vin)\n-        {\n-            if (txin.prevout.hash == origTxIn.prevout.hash && txin.prevout.n == origTxIn.prevout.n)\n-            {\n-                found = true;\n-                break;\n-            }\n-        }\n-        if (!found)\n+        if (!coinControl.IsSelected(txin.prevout))\n             tx.vin.push_back(txin);\n     }\n "
      }
    ]
  }
]