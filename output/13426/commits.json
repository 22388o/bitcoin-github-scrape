[
  {
    "sha": "cacd92112e76076f642931102318b6caeff69eb9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjYWNkOTIxMTJlNzYwNzZmNjQyOTMxMTAyMzE4YjZjYWVmZjY5ZWI5",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-06-09T19:17:17Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-25T11:22:02Z"
      },
      "message": "Add u8string and u8path function macros",
      "tree": {
        "sha": "4f4b54fc11f0f3ba8dcf0a3d30f1bf508604c28a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4f4b54fc11f0f3ba8dcf0a3d30f1bf508604c28a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cacd92112e76076f642931102318b6caeff69eb9",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cacd92112e76076f642931102318b6caeff69eb9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/cacd92112e76076f642931102318b6caeff69eb9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cacd92112e76076f642931102318b6caeff69eb9/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "94dd89e6fa37d4d81c9e6787f965bc522242300d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/94dd89e6fa37d4d81c9e6787f965bc522242300d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/94dd89e6fa37d4d81c9e6787f965bc522242300d"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 7,
      "deletions": 0
    },
    "files": [
      {
        "sha": "b2a1fcce5c1bcae6d5e70954bac16559ff73e2ee",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/cacd92112e76076f642931102318b6caeff69eb9/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/cacd92112e76076f642931102318b6caeff69eb9/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=cacd92112e76076f642931102318b6caeff69eb9",
        "patch": "@@ -84,6 +84,8 @@ const int64_t nStartupTime = GetTime();\n const char * const BITCOIN_CONF_FILENAME = \"bitcoin.conf\";\n const char * const BITCOIN_PID_FILENAME = \"bitcoind.pid\";\n \n+fs::detail::utf8_codecvt_facet g_utf8;\n+\n ArgsManager gArgs;\n \n CTranslationInterface translationInterface;"
      },
      {
        "sha": "66ad9c0514e4e6e13caec4a2c8d010e153e746d1",
        "filename": "src/util.h",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/cacd92112e76076f642931102318b6caeff69eb9/src/util.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/cacd92112e76076f642931102318b6caeff69eb9/src/util.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.h?ref=cacd92112e76076f642931102318b6caeff69eb9",
        "patch": "@@ -50,6 +50,11 @@ extern CTranslationInterface translationInterface;\n extern const char * const BITCOIN_CONF_FILENAME;\n extern const char * const BITCOIN_PID_FILENAME;\n \n+extern fs::detail::utf8_codecvt_facet g_utf8;\n+\n+#define u8string() string(g_utf8)\n+#define u8path(str) path(str, g_utf8)\n+\n /**\n  * Translation function: Call Translate signal on UI interface, which returns a boost::optional result.\n  * If no translation slot is registered, nothing is returned, and simply return the input."
      }
    ]
  },
  {
    "sha": "c7ced5b87a801927d6f93fb6d7fab7efce795a86",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjN2NlZDViODdhODAxOTI3ZDZmOTNmYjZkN2ZhYjdlZmNlNzk1YTg2",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-06-11T19:50:30Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-26T22:22:27Z"
      },
      "message": "Convert command line string to utf8",
      "tree": {
        "sha": "00c68a08cf11b2f388c97e0fa2a246ed6b0ed25f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/00c68a08cf11b2f388c97e0fa2a246ed6b0ed25f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c7ced5b87a801927d6f93fb6d7fab7efce795a86",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c7ced5b87a801927d6f93fb6d7fab7efce795a86",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c7ced5b87a801927d6f93fb6d7fab7efce795a86",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c7ced5b87a801927d6f93fb6d7fab7efce795a86/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "cacd92112e76076f642931102318b6caeff69eb9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cacd92112e76076f642931102318b6caeff69eb9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/cacd92112e76076f642931102318b6caeff69eb9"
      }
    ],
    "stats": {
      "total": 319,
      "additions": 253,
      "deletions": 66
    },
    "files": [
      {
        "sha": "ce40a97c31f17b7ca7e0ccc67583c1dde7b0be73",
        "filename": "src/bench/bench_bitcoin.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/bench/bench_bitcoin.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/bench/bench_bitcoin.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bench/bench_bitcoin.cpp?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -13,6 +13,10 @@\n \n #include <memory>\n \n+#ifdef WIN32\n+#include <shellapi.h>\n+#endif\n+\n static const int64_t DEFAULT_BENCH_EVALUATIONS = 5;\n static const char* DEFAULT_BENCH_FILTER = \".*\";\n static const char* DEFAULT_BENCH_SCALING = \"1.0\";\n@@ -48,9 +52,16 @@ static fs::path SetDataDir()\n \n int main(int argc, char** argv)\n {\n+#ifdef WIN32\n+    wchar_t ** wargv = CommandLineToArgvW(GetCommandLineW(), &argc);\n+#endif\n     SetupBenchArgs();\n     std::string error;\n+#ifndef WIN32\n     if (!gArgs.ParseParameters(argc, argv, error)) {\n+#else\n+    if (!gArgs.ParseParameters(argc, wargv, error)) {\n+#endif\n         fprintf(stderr, \"Error parsing command line arguments: %s\\n\", error.c_str());\n         return EXIT_FAILURE;\n     }"
      },
      {
        "sha": "8a41dc3f8d32954546a98aedbce803215419feef",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 31,
        "deletions": 0,
        "changes": 31,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -24,6 +24,10 @@\n \n #include <univalue.h>\n \n+#ifdef WIN32\n+#include <shellapi.h>\n+#endif\n+\n static const char DEFAULT_RPCCONNECT[] = \"127.0.0.1\";\n static const int DEFAULT_HTTP_CLIENT_TIMEOUT=900;\n static const bool DEFAULT_NAMED=false;\n@@ -92,7 +96,11 @@ class CConnectionFailed : public std::runtime_error\n // This function returns either one of EXIT_ codes when it's expected to stop the process or\n // CONTINUE_EXECUTION when it's expected to continue further.\n //\n+#ifndef WIN32\n static int AppInitRPC(int argc, char* argv[])\n+#else\n+static int AppInitRPC(int argc, wchar_t* argv[])\n+#endif\n {\n     //\n     // Parameters\n@@ -405,7 +413,11 @@ static UniValue CallRPC(BaseRequestHandler *rh, const std::string& strMethod, co\n     return reply;\n }\n \n+#ifndef WIN32\n static int CommandLineRPC(int argc, char *argv[])\n+#else\n+static int CommandLineRPC(int argc, wchar_t* argv[])\n+#endif\n {\n     std::string strPrint;\n     int nRet = 0;\n@@ -422,7 +434,15 @@ static int CommandLineRPC(int argc, char *argv[])\n             }\n             gArgs.ForceSetArg(\"-rpcpassword\", rpcPass);\n         }\n+#ifndef WIN32\n         std::vector<std::string> args = std::vector<std::string>(&argv[1], &argv[argc]);\n+#else\n+        std::vector<std::wstring> wargs = std::vector<std::wstring>(&argv[1], &argv[argc]);\n+        std::vector<std::string> args;\n+        for (std::wstring& warg : wargs) {\n+            args.push_back(WideToUtf8(warg));\n+        }\n+#endif\n         if (gArgs.GetBoolArg(\"-stdin\", false)) {\n             // Read one arg per line from stdin and append\n             std::string line;\n@@ -514,6 +534,9 @@ static int CommandLineRPC(int argc, char *argv[])\n \n int main(int argc, char* argv[])\n {\n+#ifdef WIN32\n+    wchar_t ** wargv = CommandLineToArgvW(GetCommandLineW(), &argc);\n+#endif\n     SetupEnvironment();\n     if (!SetupNetworking()) {\n         fprintf(stderr, \"Error: Initializing networking failed\\n\");\n@@ -522,7 +545,11 @@ int main(int argc, char* argv[])\n     event_set_log_callback(&libevent_log_cb);\n \n     try {\n+#ifndef WIN32\n         int ret = AppInitRPC(argc, argv);\n+#else\n+        int ret = AppInitRPC(argc, wargv);\n+#endif\n         if (ret != CONTINUE_EXECUTION)\n             return ret;\n     }\n@@ -536,7 +563,11 @@ int main(int argc, char* argv[])\n \n     int ret = EXIT_FAILURE;\n     try {\n+#ifndef WIN32\n         ret = CommandLineRPC(argc, argv);\n+#else\n+        ret = CommandLineRPC(argc, wargv);\n+#endif\n     }\n     catch (const std::exception& e) {\n         PrintExceptionContinue(&e, \"CommandLineRPC()\");"
      },
      {
        "sha": "75c3539c0b584a9b607875c4f3868b8af0a1f2eb",
        "filename": "src/bitcoin-tx.cpp",
        "status": "modified",
        "additions": 31,
        "deletions": 0,
        "changes": 31,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/bitcoin-tx.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/bitcoin-tx.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-tx.cpp?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -27,6 +27,10 @@\n \n #include <boost/algorithm/string.hpp>\n \n+#ifdef WIN32\n+#include <shellapi.h>\n+#endif\n+\n static bool fCreateBlank;\n static std::map<std::string,UniValue> registers;\n static const int CONTINUE_EXECUTION=-1;\n@@ -74,7 +78,11 @@ static void SetupBitcoinTxArgs()\n // This function returns either one of EXIT_ codes when it's expected to stop the process or\n // CONTINUE_EXECUTION when it's expected to continue further.\n //\n+#ifndef WIN32\n static int AppInitRawTx(int argc, char* argv[])\n+#else\n+static int AppInitRawTx(int argc, wchar_t* argv[])\n+#endif\n {\n     //\n     // Parameters\n@@ -768,7 +776,11 @@ static std::string readStdin()\n     return ret;\n }\n \n+#ifndef WIN32\n static int CommandLineRawTx(int argc, char* argv[])\n+#else\n+static int CommandLineRawTx(int argc, wchar_t* argv[])\n+#endif\n {\n     std::string strPrint;\n     int nRet = 0;\n@@ -789,7 +801,11 @@ static int CommandLineRawTx(int argc, char* argv[])\n                 throw std::runtime_error(\"too few parameters\");\n \n             // param: hex-encoded bitcoin transaction\n+#ifndef WIN32\n             std::string strHexTx(argv[1]);\n+#else\n+            std::string strHexTx(WideToUtf8(argv[1]));\n+#endif\n             if (strHexTx == \"-\")                 // \"-\" implies standard input\n                 strHexTx = readStdin();\n \n@@ -801,7 +817,11 @@ static int CommandLineRawTx(int argc, char* argv[])\n             startArg = 1;\n \n         for (int i = startArg; i < argc; i++) {\n+#ifndef WIN32\n             std::string arg = argv[i];\n+#else\n+            std::string arg = WideToUtf8(argv[i]);\n+#endif\n             std::string key, value;\n             size_t eqpos = arg.find('=');\n             if (eqpos == std::string::npos)\n@@ -837,10 +857,17 @@ static int CommandLineRawTx(int argc, char* argv[])\n \n int main(int argc, char* argv[])\n {\n+#ifdef WIN32\n+    wchar_t ** wargv = CommandLineToArgvW(GetCommandLineW(), &argc);\n+#endif\n     SetupEnvironment();\n \n     try {\n+#ifndef WIN32\n         int ret = AppInitRawTx(argc, argv);\n+#else\n+        int ret = AppInitRawTx(argc, wargv);\n+#endif\n         if (ret != CONTINUE_EXECUTION)\n             return ret;\n     }\n@@ -854,7 +881,11 @@ int main(int argc, char* argv[])\n \n     int ret = EXIT_FAILURE;\n     try {\n+#ifndef WIN32\n         ret = CommandLineRawTx(argc, argv);\n+#else\n+        ret = CommandLineRawTx(argc, wargv);\n+#endif\n     }\n     catch (const std::exception& e) {\n         PrintExceptionContinue(&e, \"CommandLineRawTx()\");"
      },
      {
        "sha": "6286326918f7af6b76484dd5fdb7bd9d1bab2b9e",
        "filename": "src/bitcoind.cpp",
        "status": "modified",
        "additions": 15,
        "deletions": 0,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/bitcoind.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/bitcoind.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoind.cpp?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -23,6 +23,10 @@\n \n #include <stdio.h>\n \n+#ifdef WIN32\n+#include <shellapi.h>\n+#endif\n+\n /* Introduction text for doxygen: */\n \n /*! \\mainpage Developer documentation\n@@ -54,7 +58,11 @@ static void WaitForShutdown()\n //\n // Start\n //\n+#ifndef WIN32\n static bool AppInit(int argc, char* argv[])\n+#else\n+static bool AppInit(int argc, wchar_t* argv[])\n+#endif\n {\n     bool fRet = false;\n \n@@ -185,10 +193,17 @@ static bool AppInit(int argc, char* argv[])\n \n int main(int argc, char* argv[])\n {\n+#ifdef WIN32\n+    wchar_t ** wargv = CommandLineToArgvW(GetCommandLineW(), &argc);\n+#endif\n     SetupEnvironment();\n \n     // Connect bitcoind signal handlers\n     noui_connect();\n \n+#ifndef WIN32\n     return (AppInit(argc, argv) ? EXIT_SUCCESS : EXIT_FAILURE);\n+#else\n+    return (AppInit(argc, wargv) ? EXIT_SUCCESS : EXIT_FAILURE);\n+#endif\n }"
      },
      {
        "sha": "707dfd53564c0a26d4ff77af6752d15ff4ed08f1",
        "filename": "src/interfaces/node.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/interfaces/node.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/interfaces/node.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/interfaces/node.cpp?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -49,7 +49,11 @@ namespace {\n \n class NodeImpl : public Node\n {\n+#ifndef WIN32\n     bool parseParameters(int argc, const char* const argv[], std::string& error) override\n+#else\n+    bool parseParameters(int argc, const wchar_t* const argv[], std::string& error) override\n+#endif\n     {\n         return gArgs.ParseParameters(argc, argv, error);\n     }"
      },
      {
        "sha": "c7487fcda2867a927e6b227cd50c5f896a7f8546",
        "filename": "src/interfaces/node.h",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/interfaces/node.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/interfaces/node.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/interfaces/node.h?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -38,7 +38,11 @@ class Node\n     virtual ~Node() {}\n \n     //! Set command line arguments.\n+#ifndef WIN32\n     virtual bool parseParameters(int argc, const char* const argv[], std::string& error) = 0;\n+#else\n+    virtual bool parseParameters(int argc, const wchar_t* const argv[], std::string& error) = 0;\n+#endif\n \n     //! Set a command line argument if it doesn't already have a value\n     virtual bool softSetArg(const std::string& arg, const std::string& value) = 0;"
      },
      {
        "sha": "351cdaf095f8c535ea5fbc77f76a342b932c8d7b",
        "filename": "src/qt/bitcoin.cpp",
        "status": "modified",
        "additions": 16,
        "deletions": 0,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/qt/bitcoin.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/qt/bitcoin.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoin.cpp?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -32,6 +32,7 @@\n #include <ui_interface.h>\n #include <uint256.h>\n #include <util.h>\n+#include <utilstrencodings.h>\n #include <warnings.h>\n \n #include <walletinitinterface.h>\n@@ -52,6 +53,10 @@\n #include <QTranslator>\n #include <QSslConfiguration>\n \n+#ifdef WIN32\n+#include <shellapi.h>\n+#endif\n+\n #if defined(QT_STATICPLUGIN)\n #include <QtPlugin>\n #if QT_VERSION < 0x050400\n@@ -555,6 +560,9 @@ static void SetupUIArgs()\n #ifndef BITCOIN_QT_TEST\n int main(int argc, char *argv[])\n {\n+#ifdef WIN32\n+    wchar_t ** wargv = CommandLineToArgvW(GetCommandLineW(), &argc);\n+#endif\n     SetupEnvironment();\n \n     std::unique_ptr<interfaces::Node> node = interfaces::MakeNode();\n@@ -599,7 +607,11 @@ int main(int argc, char *argv[])\n     node->setupServerArgs();\n     SetupUIArgs();\n     std::string error;\n+#ifndef WIN32\n     if (!node->parseParameters(argc, argv, error)) {\n+#else\n+    if (!node->parseParameters(argc, wargv, error)) {\n+#endif\n         QMessageBox::critical(0, QObject::tr(PACKAGE_NAME),\n             QObject::tr(\"Error parsing command line arguments: %1.\").arg(QString::fromStdString(error)));\n         return EXIT_FAILURE;\n@@ -663,7 +675,11 @@ int main(int argc, char *argv[])\n     }\n #ifdef ENABLE_WALLET\n     // Parse URIs on command line -- this can affect Params()\n+#ifndef WIN32\n     PaymentServer::ipcParseCommandLine(*node, argc, argv);\n+#else\n+    PaymentServer::ipcParseCommandLine(*node, argc, wargv);\n+#endif\n #endif\n \n     QScopedPointer<const NetworkStyle> networkStyle(NetworkStyle::instantiate(QString::fromStdString(Params().NetworkIDString())));"
      },
      {
        "sha": "93dff2f95dab4601e020e8c2119b4935b18c9299",
        "filename": "src/qt/paymentserver.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/qt/paymentserver.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/qt/paymentserver.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/paymentserver.cpp?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -190,11 +190,19 @@ void PaymentServer::LoadRootCAs(X509_STORE* _store)\n // Warning: ipcSendCommandLine() is called early in init,\n // so don't use \"Q_EMIT message()\", but \"QMessageBox::\"!\n //\n+#ifndef WIN32\n void PaymentServer::ipcParseCommandLine(interfaces::Node& node, int argc, char* argv[])\n+#else\n+void PaymentServer::ipcParseCommandLine(interfaces::Node& node, int argc, wchar_t* argv[])\n+#endif\n {\n     for (int i = 1; i < argc; i++)\n     {\n+#ifndef WIN32\n         QString arg(argv[i]);\n+#else\n+        QString arg = QString::fromStdWString(argv[i]);\n+#endif\n         if (arg.startsWith(\"-\"))\n             continue;\n "
      },
      {
        "sha": "e103ba3b11dd01614656201f240c49a3acfaf4f2",
        "filename": "src/qt/paymentserver.h",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/qt/paymentserver.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/qt/paymentserver.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/paymentserver.h?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -60,7 +60,11 @@ class PaymentServer : public QObject\n public:\n     // Parse URIs on command line\n     // Returns false on error\n+#ifndef WIN32\n     static void ipcParseCommandLine(interfaces::Node& node, int argc, char *argv[]);\n+#else\n+    static void ipcParseCommandLine(interfaces::Node& node, int argc, wchar_t* argv[]);\n+#endif\n \n     // Returns true if there were URIs on the command line\n     // which were successfully sent to an already-running"
      },
      {
        "sha": "fa72931e642b2c9257f8b3d229c220522ace6106",
        "filename": "src/qt/test/test_main.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/qt/test/test_main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/qt/test/test_main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/test/test_main.cpp?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -24,6 +24,10 @@\n \n #include <openssl/ssl.h>\n \n+#ifdef WIN32\n+#include <shellapi.h>\n+#endif\n+\n #if defined(QT_STATICPLUGIN)\n #include <QtPlugin>\n #if defined(QT_QPA_PLATFORM_MINIMAL)\n@@ -43,6 +47,9 @@ extern void noui_connect();\n // This is all you need to run all the tests\n int main(int argc, char *argv[])\n {\n+#ifdef WIN32\n+    wchar_t ** wargv = CommandLineToArgvW(GetCommandLineW(), &argc);\n+#endif\n     SetupEnvironment();\n     SetupNetworking();\n     SelectParams(CBaseChainParams::MAIN);\n@@ -65,7 +72,11 @@ int main(int argc, char *argv[])\n \n     // Don't remove this, it's needed to access\n     // QApplication:: and QCoreApplication:: in the tests\n+#ifndef WIN32\n     QApplication app(argc, argv);\n+#else\n+    QApplication app(argc, wargv);\n+#endif\n     app.setApplicationName(\"Bitcoin-Qt-test\");\n \n     SSL_library_init();"
      },
      {
        "sha": "b6ad078d22e03e42b071a1706a698a78012e7ecb",
        "filename": "src/test/getarg_tests.cpp",
        "status": "modified",
        "additions": 40,
        "deletions": 30,
        "changes": 70,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/test/getarg_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/test/getarg_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/getarg_tests.cpp?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -13,18 +13,28 @@\n \n BOOST_FIXTURE_TEST_SUITE(getarg_tests, BasicTestingSetup)\n \n+#ifndef WIN32\n+#define _T(TEXT) TEXT\n+typedef char _TCHAR;\n+typedef std::string _tstring;\n static void ResetArgs(const std::string& strArg)\n+#else\n+#define _T(TEXT) L##TEXT\n+typedef wchar_t _TCHAR;\n+typedef std::wstring _tstring;\n+static void ResetArgs(const std::wstring& strArg)\n+#endif\n {\n-    std::vector<std::string> vecArg;\n+    std::vector<_tstring> vecArg;\n     if (strArg.size())\n       boost::split(vecArg, strArg, boost::is_space(), boost::token_compress_on);\n \n     // Insert dummy executable name:\n-    vecArg.insert(vecArg.begin(), \"testbitcoin\");\n+    vecArg.insert(vecArg.begin(), _T(\"testbitcoin\"));\n \n     // Convert to char*:\n-    std::vector<const char*> vecChar;\n-    for (std::string& s : vecArg)\n+    std::vector<const _TCHAR*> vecChar;\n+    for (_tstring& s : vecArg)\n         vecChar.push_back(s.c_str());\n \n     std::string error;\n@@ -42,7 +52,7 @@ static void SetupArgs(const std::vector<std::string>& args)\n BOOST_AUTO_TEST_CASE(boolarg)\n {\n     SetupArgs({\"-foo\"});\n-    ResetArgs(\"-foo\");\n+    ResetArgs(_T(\"-foo\"));\n     BOOST_CHECK(gArgs.GetBoolArg(\"-foo\", false));\n     BOOST_CHECK(gArgs.GetBoolArg(\"-foo\", true));\n \n@@ -52,41 +62,41 @@ BOOST_AUTO_TEST_CASE(boolarg)\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-fooo\", false));\n     BOOST_CHECK(gArgs.GetBoolArg(\"-fooo\", true));\n \n-    ResetArgs(\"-foo=0\");\n+    ResetArgs(_T(\"-foo=0\"));\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", false));\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", true));\n \n-    ResetArgs(\"-foo=1\");\n+    ResetArgs(_T(\"-foo=1\"));\n     BOOST_CHECK(gArgs.GetBoolArg(\"-foo\", false));\n     BOOST_CHECK(gArgs.GetBoolArg(\"-foo\", true));\n \n     // New 0.6 feature: auto-map -nosomething to !-something:\n-    ResetArgs(\"-nofoo\");\n+    ResetArgs(_T(\"-nofoo\"));\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", false));\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", true));\n \n-    ResetArgs(\"-nofoo=1\");\n+    ResetArgs(_T(\"-nofoo=1\"));\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", false));\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", true));\n \n-    ResetArgs(\"-foo -nofoo\");  // -nofoo should win\n+    ResetArgs(_T(\"-foo -nofoo\")); // -nofoo should win\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", false));\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", true));\n \n-    ResetArgs(\"-foo=1 -nofoo=1\");  // -nofoo should win\n+    ResetArgs(_T(\"-foo=1 -nofoo=1\")); // -nofoo should win\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", false));\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", true));\n \n-    ResetArgs(\"-foo=0 -nofoo=0\");  // -nofoo=0 should win\n+    ResetArgs(_T(\"-foo=0 -nofoo=0\")); // -nofoo=0 should win\n     BOOST_CHECK(gArgs.GetBoolArg(\"-foo\", false));\n     BOOST_CHECK(gArgs.GetBoolArg(\"-foo\", true));\n \n     // New 0.6 feature: treat -- same as -:\n-    ResetArgs(\"--foo=1\");\n+    ResetArgs(_T(\"--foo=1\"));\n     BOOST_CHECK(gArgs.GetBoolArg(\"-foo\", false));\n     BOOST_CHECK(gArgs.GetBoolArg(\"-foo\", true));\n \n-    ResetArgs(\"--nofoo=1\");\n+    ResetArgs(_T(\"--nofoo=1\"));\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", false));\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", true));\n \n@@ -95,23 +105,23 @@ BOOST_AUTO_TEST_CASE(boolarg)\n BOOST_AUTO_TEST_CASE(stringarg)\n {\n     SetupArgs({\"-foo\", \"-bar\"});\n-    ResetArgs(\"\");\n+    ResetArgs(_T(\"\"));\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", \"\"), \"\");\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", \"eleven\"), \"eleven\");\n \n-    ResetArgs(\"-foo -bar\");\n+    ResetArgs(_T(\"-foo -bar\"));\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", \"\"), \"\");\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", \"eleven\"), \"\");\n \n-    ResetArgs(\"-foo=\");\n+    ResetArgs(_T(\"-foo=\"));\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", \"\"), \"\");\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", \"eleven\"), \"\");\n \n-    ResetArgs(\"-foo=11\");\n+    ResetArgs(_T(\"-foo=11\"));\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", \"\"), \"11\");\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", \"eleven\"), \"11\");\n \n-    ResetArgs(\"-foo=eleven\");\n+    ResetArgs(_T(\"-foo=eleven\"));\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", \"\"), \"eleven\");\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", \"eleven\"), \"eleven\");\n \n@@ -120,54 +130,54 @@ BOOST_AUTO_TEST_CASE(stringarg)\n BOOST_AUTO_TEST_CASE(intarg)\n {\n     SetupArgs({\"-foo\", \"-bar\"});\n-    ResetArgs(\"\");\n+    ResetArgs(_T(\"\"));\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", 11), 11);\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", 0), 0);\n \n-    ResetArgs(\"-foo -bar\");\n+    ResetArgs(_T(\"-foo -bar\"));\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", 11), 0);\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-bar\", 11), 0);\n \n-    ResetArgs(\"-foo=11 -bar=12\");\n+    ResetArgs(_T(\"-foo=11 -bar=12\"));\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", 0), 11);\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-bar\", 11), 12);\n \n-    ResetArgs(\"-foo=NaN -bar=NotANumber\");\n+    ResetArgs(_T(\"-foo=NaN -bar=NotANumber\"));\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", 1), 0);\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-bar\", 11), 0);\n }\n \n BOOST_AUTO_TEST_CASE(doubledash)\n {\n     SetupArgs({\"-foo\", \"-bar\"});\n-    ResetArgs(\"--foo\");\n+    ResetArgs(_T(\"--foo\"));\n     BOOST_CHECK_EQUAL(gArgs.GetBoolArg(\"-foo\", false), true);\n \n-    ResetArgs(\"--foo=verbose --bar=1\");\n+    ResetArgs(_T(\"--foo=verbose --bar=1\"));\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-foo\", \"\"), \"verbose\");\n     BOOST_CHECK_EQUAL(gArgs.GetArg(\"-bar\", 0), 1);\n }\n \n BOOST_AUTO_TEST_CASE(boolargno)\n {\n     SetupArgs({\"-foo\", \"-bar\"});\n-    ResetArgs(\"-nofoo\");\n+    ResetArgs(_T(\"-nofoo\"));\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", true));\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", false));\n \n-    ResetArgs(\"-nofoo=1\");\n+    ResetArgs(_T(\"-nofoo=1\"));\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", true));\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", false));\n \n-    ResetArgs(\"-nofoo=0\");\n+    ResetArgs(_T(\"-nofoo=0\"));\n     BOOST_CHECK(gArgs.GetBoolArg(\"-foo\", true));\n     BOOST_CHECK(gArgs.GetBoolArg(\"-foo\", false));\n \n-    ResetArgs(\"-foo --nofoo\"); // --nofoo should win\n+    ResetArgs(_T(\"-foo --nofoo\")); // --nofoo should win\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", true));\n     BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", false));\n \n-    ResetArgs(\"-nofoo -foo\"); // foo always wins:\n+    ResetArgs(_T(\"-nofoo -foo\")); // foo always wins:\n     BOOST_CHECK(gArgs.GetBoolArg(\"-foo\", true));\n     BOOST_CHECK(gArgs.GetBoolArg(\"-foo\", false));\n }"
      },
      {
        "sha": "918bb86b4dec48c9913d1f1a9a747b99fb2e6c38",
        "filename": "src/test/util_tests.cpp",
        "status": "modified",
        "additions": 39,
        "deletions": 31,
        "changes": 70,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/test/util_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/test/util_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/util_tests.cpp?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -21,6 +21,14 @@\n \n #include <boost/test/unit_test.hpp>\n \n+#ifndef WIN32\n+#define _T(TEXT) TEXT\n+typedef char _TCHAR;\n+#else\n+#define _T(TEXT) L##TEXT\n+typedef wchar_t _TCHAR;\n+#endif\n+\n BOOST_FIXTURE_TEST_SUITE(util_tests, BasicTestingSetup)\n \n BOOST_AUTO_TEST_CASE(util_criticalsection)\n@@ -206,17 +214,17 @@ BOOST_AUTO_TEST_CASE(util_ParseParameters)\n {\n     TestArgsManager testArgs;\n     const char* avail_args[] = {\"-a\", \"-b\", \"-ccc\", \"-d\"};\n-    const char *argv_test[] = {\"-ignored\", \"-a\", \"-b\", \"-ccc=argument\", \"-ccc=multiple\", \"f\", \"-d=e\"};\n+    const _TCHAR* argv_test[] = {_T(\"-ignored\"), _T(\"-a\"), _T(\"-b\"), _T(\"-ccc=argument\"), _T(\"-ccc=multiple\"), _T(\"f\"), _T(\"-d=e\")};\n \n     std::string error;\n     testArgs.SetupArgs(4, avail_args);\n-    testArgs.ParseParameters(0, (char**)argv_test, error);\n+    testArgs.ParseParameters(0, (_TCHAR**)argv_test, error);\n     BOOST_CHECK(testArgs.GetOverrideArgs().empty() && testArgs.GetConfigArgs().empty());\n \n-    testArgs.ParseParameters(1, (char**)argv_test, error);\n+    testArgs.ParseParameters(1, (_TCHAR**)argv_test, error);\n     BOOST_CHECK(testArgs.GetOverrideArgs().empty() && testArgs.GetConfigArgs().empty());\n \n-    testArgs.ParseParameters(7, (char**)argv_test, error);\n+    testArgs.ParseParameters(7, (_TCHAR**)argv_test, error);\n     // expectation: -ignored is ignored (program name argument),\n     // -a, -b and -ccc end up in map, -d ignored because it is after\n     // a non-option argument (non-GNU option parsing)\n@@ -238,11 +246,11 @@ BOOST_AUTO_TEST_CASE(util_GetBoolArg)\n {\n     TestArgsManager testArgs;\n     const char* avail_args[] = {\"-a\", \"-b\", \"-c\", \"-d\", \"-e\", \"-f\"};\n-    const char *argv_test[] = {\n-        \"ignored\", \"-a\", \"-nob\", \"-c=0\", \"-d=1\", \"-e=false\", \"-f=true\"};\n+    const _TCHAR* argv_test[] = {\n+        _T(\"ignored\"), _T(\"-a\"), _T(\"-nob\"), _T(\"-c=0\"), _T(\"-d=1\"), _T(\"-e=false\"), _T(\"-f=true\")};\n     std::string error;\n     testArgs.SetupArgs(6, avail_args);\n-    testArgs.ParseParameters(7, (char**)argv_test, error);\n+    testArgs.ParseParameters(7, (_TCHAR**)argv_test, error);\n \n     // Each letter should be set.\n     for (char opt : \"abcdef\")\n@@ -275,10 +283,10 @@ BOOST_AUTO_TEST_CASE(util_GetBoolArgEdgeCases)\n \n     // Params test\n     const char* avail_args[] = {\"-foo\", \"-bar\"};\n-    const char *argv_test[] = {\"ignored\", \"-nofoo\", \"-foo\", \"-nobar=0\"};\n+    const _TCHAR* argv_test[] = {_T(\"ignored\"), _T(\"-nofoo\"), _T(\"-foo\"), _T(\"-nobar=0\")};\n     testArgs.SetupArgs(2, avail_args);\n     std::string error;\n-    testArgs.ParseParameters(4, (char**)argv_test, error);\n+    testArgs.ParseParameters(4, (_TCHAR**)argv_test, error);\n \n     // This was passed twice, second one overrides the negative setting.\n     BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n@@ -290,7 +298,7 @@ BOOST_AUTO_TEST_CASE(util_GetBoolArgEdgeCases)\n \n     // Config test\n     const char *conf_test = \"nofoo=1\\nfoo=1\\nnobar=0\\n\";\n-    testArgs.ParseParameters(1, (char**)argv_test, error);\n+    testArgs.ParseParameters(1, (_TCHAR**)argv_test, error);\n     testArgs.ReadConfigString(conf_test);\n \n     // This was passed twice, second one overrides the negative setting,\n@@ -303,9 +311,9 @@ BOOST_AUTO_TEST_CASE(util_GetBoolArgEdgeCases)\n     BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n \n     // Combined test\n-    const char *combo_test_args[] = {\"ignored\", \"-nofoo\", \"-bar\"};\n+    const _TCHAR* combo_test_args[] = {_T(\"ignored\"), _T(\"-nofoo\"), _T(\"-bar\")};\n     const char *combo_test_conf = \"foo=1\\nnobar=1\\n\";\n-    testArgs.ParseParameters(3, (char**)combo_test_args, error);\n+    testArgs.ParseParameters(3, (_TCHAR**)combo_test_args, error);\n     testArgs.ReadConfigString(combo_test_conf);\n \n     // Command line overrides, but doesn't erase old setting\n@@ -547,72 +555,72 @@ BOOST_AUTO_TEST_CASE(util_GetChainName)\n     const char* avail_args[] = {\"-testnet\", \"-regtest\"};\n     test_args.SetupArgs(2, avail_args);\n \n-    const char* argv_testnet[] = {\"cmd\", \"-testnet\"};\n-    const char* argv_regtest[] = {\"cmd\", \"-regtest\"};\n-    const char* argv_test_no_reg[] = {\"cmd\", \"-testnet\", \"-noregtest\"};\n-    const char* argv_both[] = {\"cmd\", \"-testnet\", \"-regtest\"};\n+    const _TCHAR* argv_testnet[] = {_T(\"cmd\"), _T(\"-testnet\")};\n+    const _TCHAR* argv_regtest[] = {_T(\"cmd\"), _T(\"-regtest\")};\n+    const _TCHAR* argv_test_no_reg[] = {_T(\"cmd\"), _T(\"-testnet\"), _T(\"-noregtest\")};\n+    const _TCHAR* argv_both[] = {_T(\"cmd\"), _T(\"-testnet\"), _T(\"-regtest\")};\n \n     // equivalent to \"-testnet\"\n     // regtest in testnet section is ignored\n     const char* testnetconf = \"testnet=1\\nregtest=0\\n[test]\\nregtest=1\";\n     std::string error;\n \n-    test_args.ParseParameters(0, (char**)argv_testnet, error);\n+    test_args.ParseParameters(0, (_TCHAR**)argv_testnet, error);\n     BOOST_CHECK_EQUAL(test_args.GetChainName(), \"main\");\n \n-    test_args.ParseParameters(2, (char**)argv_testnet, error);\n+    test_args.ParseParameters(2, (_TCHAR**)argv_testnet, error);\n     BOOST_CHECK_EQUAL(test_args.GetChainName(), \"test\");\n \n-    test_args.ParseParameters(2, (char**)argv_regtest, error);\n+    test_args.ParseParameters(2, (_TCHAR**)argv_regtest, error);\n     BOOST_CHECK_EQUAL(test_args.GetChainName(), \"regtest\");\n \n-    test_args.ParseParameters(3, (char**)argv_test_no_reg, error);\n+    test_args.ParseParameters(3, (_TCHAR**)argv_test_no_reg, error);\n     BOOST_CHECK_EQUAL(test_args.GetChainName(), \"test\");\n \n-    test_args.ParseParameters(3, (char**)argv_both, error);\n+    test_args.ParseParameters(3, (_TCHAR**)argv_both, error);\n     BOOST_CHECK_THROW(test_args.GetChainName(), std::runtime_error);\n \n-    test_args.ParseParameters(0, (char**)argv_testnet, error);\n+    test_args.ParseParameters(0, (_TCHAR**)argv_testnet, error);\n     test_args.ReadConfigString(testnetconf);\n     BOOST_CHECK_EQUAL(test_args.GetChainName(), \"test\");\n \n-    test_args.ParseParameters(2, (char**)argv_testnet, error);\n+    test_args.ParseParameters(2, (_TCHAR**)argv_testnet, error);\n     test_args.ReadConfigString(testnetconf);\n     BOOST_CHECK_EQUAL(test_args.GetChainName(), \"test\");\n \n-    test_args.ParseParameters(2, (char**)argv_regtest, error);\n+    test_args.ParseParameters(2, (_TCHAR**)argv_regtest, error);\n     test_args.ReadConfigString(testnetconf);\n     BOOST_CHECK_THROW(test_args.GetChainName(), std::runtime_error);\n \n-    test_args.ParseParameters(3, (char**)argv_test_no_reg, error);\n+    test_args.ParseParameters(3, (_TCHAR**)argv_test_no_reg, error);\n     test_args.ReadConfigString(testnetconf);\n     BOOST_CHECK_EQUAL(test_args.GetChainName(), \"test\");\n \n-    test_args.ParseParameters(3, (char**)argv_both, error);\n+    test_args.ParseParameters(3, (_TCHAR**)argv_both, error);\n     test_args.ReadConfigString(testnetconf);\n     BOOST_CHECK_THROW(test_args.GetChainName(), std::runtime_error);\n \n     // check setting the network to test (and thus making\n     // [test] regtest=1 potentially relevant) doesn't break things\n     test_args.SelectConfigNetwork(\"test\");\n \n-    test_args.ParseParameters(0, (char**)argv_testnet, error);\n+    test_args.ParseParameters(0, (_TCHAR**)argv_testnet, error);\n     test_args.ReadConfigString(testnetconf);\n     BOOST_CHECK_EQUAL(test_args.GetChainName(), \"test\");\n \n-    test_args.ParseParameters(2, (char**)argv_testnet, error);\n+    test_args.ParseParameters(2, (_TCHAR**)argv_testnet, error);\n     test_args.ReadConfigString(testnetconf);\n     BOOST_CHECK_EQUAL(test_args.GetChainName(), \"test\");\n \n-    test_args.ParseParameters(2, (char**)argv_regtest, error);\n+    test_args.ParseParameters(2, (_TCHAR**)argv_regtest, error);\n     test_args.ReadConfigString(testnetconf);\n     BOOST_CHECK_THROW(test_args.GetChainName(), std::runtime_error);\n \n-    test_args.ParseParameters(2, (char**)argv_test_no_reg, error);\n+    test_args.ParseParameters(2, (_TCHAR**)argv_test_no_reg, error);\n     test_args.ReadConfigString(testnetconf);\n     BOOST_CHECK_EQUAL(test_args.GetChainName(), \"test\");\n \n-    test_args.ParseParameters(3, (char**)argv_both, error);\n+    test_args.ParseParameters(3, (_TCHAR**)argv_both, error);\n     test_args.ReadConfigString(testnetconf);\n     BOOST_CHECK_THROW(test_args.GetChainName(), std::runtime_error);\n }"
      },
      {
        "sha": "485081ddc00889ca0aa9d75b7f3ecbb7a8c3432d",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 1,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -412,14 +412,23 @@ void ArgsManager::SelectConfigNetwork(const std::string& network)\n {\n     m_network = network;\n }\n-\n+#ifndef WIN32\n bool ArgsManager::ParseParameters(int argc, const char* const argv[], std::string& error)\n+#else\n+bool ArgsManager::ParseParameters(int argc, const wchar_t* const argv[], std::string& error)\n+#endif\n {\n     LOCK(cs_args);\n     m_override_args.clear();\n \n     for (int i = 1; i < argc; i++) {\n+#ifndef WIN32\n         std::string key(argv[i]);\n+#else\n+        std::string key;\n+        std::wstring wkey(argv[i]);\n+        key = WideToUtf8(wkey);\n+#endif\n         std::string val;\n         size_t is_index = key.find('=');\n         if (is_index != std::string::npos) {"
      },
      {
        "sha": "0b286c9b01bd24c7f10e04e3a2113280428f4a45",
        "filename": "src/util.h",
        "status": "modified",
        "additions": 11,
        "deletions": 4,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/util.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/util.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.h?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -114,14 +114,17 @@ void runCommand(const std::string& strCommand);\n  */\n fs::path AbsPathForConfigVal(const fs::path& path, bool net_specific = true);\n \n+#ifndef WIN32\n inline bool IsSwitchChar(char c)\n {\n-#ifdef WIN32\n-    return c == '-' || c == '/';\n-#else\n     return c == '-';\n-#endif\n }\n+#else\n+inline bool IsSwitchChar(wchar_t c)\n+{\n+    return c == L'-' || c == L'/';\n+}\n+#endif\n \n enum class OptionsCategory {\n     OPTIONS,\n@@ -172,7 +175,11 @@ class ArgsManager\n      */\n     void SelectConfigNetwork(const std::string& network);\n \n+#ifndef WIN32\n     bool ParseParameters(int argc, const char* const argv[], std::string& error);\n+#else\n+    bool ParseParameters(int argc, const wchar_t* const argv[], std::string& error);\n+#endif\n     bool ReadConfigFiles(std::string& error, bool ignore_invalid_keys = false);\n \n     /**"
      },
      {
        "sha": "8acbc402f3bba3c06e3d2c257aa669cfb6b09505",
        "filename": "src/utilstrencodings.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/utilstrencodings.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/utilstrencodings.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/utilstrencodings.cpp?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -12,6 +12,10 @@\n #include <errno.h>\n #include <limits>\n \n+#ifdef WIN32\n+#include <stringapiset.h>\n+#endif\n+\n static const std::string CHARS_ALPHA_NUM = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n \n static const std::string SAFE_CHARS[] =\n@@ -544,3 +548,13 @@ bool ParseFixedPoint(const std::string &val, int decimals, int64_t *amount_out)\n     return true;\n }\n \n+#ifdef WIN32\n+std::string WideToUtf8(const std::wstring& wide_string)\n+{\n+    size_t size = WideCharToMultiByte(CP_UTF8, 0, &*wide_string.begin(), wide_string.size(), nullptr, 0, nullptr, nullptr);\n+    std::string utf8_string(size, 0);\n+    size = WideCharToMultiByte(CP_UTF8, 0, &*wide_string.begin(), wide_string.size(), &*utf8_string.begin(), utf8_string.size(), nullptr, nullptr);\n+    assert(size == utf8_string.size());\n+    return utf8_string;\n+}\n+#endif\n\\ No newline at end of file"
      },
      {
        "sha": "2f099f9b01b8ad415c50434d4afeb8a1c58b9b87",
        "filename": "src/utilstrencodings.h",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/utilstrencodings.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7ced5b87a801927d6f93fb6d7fab7efce795a86/src/utilstrencodings.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/utilstrencodings.h?ref=c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "patch": "@@ -183,4 +183,8 @@ bool ConvertBits(const O& outfn, I it, I end) {\n     return true;\n }\n \n+#ifdef WIN32\n+std::string WideToUtf8(const std::wstring& wide_string);\n+#endif\n+\n #endif // BITCOIN_UTILSTRENCODINGS_H"
      }
    ]
  },
  {
    "sha": "30618a83c8a64a848eead6baf96434941bf8e7ca",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozMDYxOGE4M2M4YTY0YTg0OGVlYWQ2YmFmOTY0MzQ5NDFiZjhlN2Nh",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-06-09T19:26:33Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-26T22:22:36Z"
      },
      "message": "Use u8string at proper place",
      "tree": {
        "sha": "7ae57eb290ada85024a2ae0840a006051e30e9bf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7ae57eb290ada85024a2ae0840a006051e30e9bf"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/30618a83c8a64a848eead6baf96434941bf8e7ca",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/30618a83c8a64a848eead6baf96434941bf8e7ca",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/30618a83c8a64a848eead6baf96434941bf8e7ca",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/30618a83c8a64a848eead6baf96434941bf8e7ca/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c7ced5b87a801927d6f93fb6d7fab7efce795a86",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c7ced5b87a801927d6f93fb6d7fab7efce795a86"
      }
    ],
    "stats": {
      "total": 116,
      "additions": 58,
      "deletions": 58
    },
    "files": [
      {
        "sha": "d3fadc4b427a408ed859b468e74e1c5ec94f1cf8",
        "filename": "src/addrdb.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30618a83c8a64a848eead6baf96434941bf8e7ca/src/addrdb.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30618a83c8a64a848eead6baf96434941bf8e7ca/src/addrdb.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/addrdb.cpp?ref=30618a83c8a64a848eead6baf96434941bf8e7ca",
        "patch": "@@ -45,12 +45,12 @@ bool SerializeFileDB(const std::string& prefix, const fs::path& path, const Data\n     FILE *file = fsbridge::fopen(pathTmp, \"wb\");\n     CAutoFile fileout(file, SER_DISK, CLIENT_VERSION);\n     if (fileout.IsNull())\n-        return error(\"%s: Failed to open file %s\", __func__, pathTmp.string());\n+        return error(\"%s: Failed to open file %s\", __func__, pathTmp.u8string());\n \n     // Serialize\n     if (!SerializeDB(fileout, data)) return false;\n     if (!FileCommit(fileout.Get()))\n-        return error(\"%s: Failed to flush file %s\", __func__, pathTmp.string());\n+        return error(\"%s: Failed to flush file %s\", __func__, pathTmp.u8string());\n     fileout.fclose();\n \n     // replace existing file, if any, with new file\n@@ -98,7 +98,7 @@ bool DeserializeFileDB(const fs::path& path, Data& data)\n     FILE *file = fsbridge::fopen(path, \"rb\");\n     CAutoFile filein(file, SER_DISK, CLIENT_VERSION);\n     if (filein.IsNull())\n-        return error(\"%s: Failed to open file %s\", __func__, path.string());\n+        return error(\"%s: Failed to open file %s\", __func__, path.u8string());\n \n     return DeserializeDB(filein, data);\n }"
      },
      {
        "sha": "e7c6f8b210bed93ff9580cbd698442df5765fdb1",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30618a83c8a64a848eead6baf96434941bf8e7ca/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30618a83c8a64a848eead6baf96434941bf8e7ca/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=30618a83c8a64a848eead6baf96434941bf8e7ca",
        "patch": "@@ -393,7 +393,7 @@ static UniValue CallRPC(BaseRequestHandler *rh, const std::string& strMethod, co\n         if (failedToGetAuthCookie) {\n             throw std::runtime_error(strprintf(\n                 \"Could not locate RPC credentials. No authentication cookie could be found, and RPC password is not set.  See -rpcpassword and -stdinrpcpass.  Configuration file: (%s)\",\n-                GetConfigFile(gArgs.GetArg(\"-conf\", BITCOIN_CONF_FILENAME)).string().c_str()));\n+                GetConfigFile(gArgs.GetArg(\"-conf\", BITCOIN_CONF_FILENAME)).u8string().c_str()));\n         } else {\n             throw std::runtime_error(\"Authorization failed: Incorrect rpcuser or rpcpassword\");\n         }"
      },
      {
        "sha": "c644970b90e20ae1f436963c3490cb5edca2c6d4",
        "filename": "src/dbwrapper.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30618a83c8a64a848eead6baf96434941bf8e7ca/src/dbwrapper.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30618a83c8a64a848eead6baf96434941bf8e7ca/src/dbwrapper.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/dbwrapper.cpp?ref=30618a83c8a64a848eead6baf96434941bf8e7ca",
        "patch": "@@ -129,21 +129,21 @@ CDBWrapper::CDBWrapper(const fs::path& path, size_t nCacheSize, bool fMemory, bo\n         options.env = penv;\n     } else {\n         if (fWipe) {\n-            LogPrintf(\"Wiping LevelDB in %s\\n\", path.string());\n+            LogPrintf(\"Wiping LevelDB in %s\\n\", path.u8string());\n             leveldb::Status result = leveldb::DestroyDB(path.string(), options);\n             dbwrapper_private::HandleError(result);\n         }\n         TryCreateDirectories(path);\n-        LogPrintf(\"Opening LevelDB in %s\\n\", path.string());\n+        LogPrintf(\"Opening LevelDB in %s\\n\", path.u8string());\n     }\n     leveldb::Status status = leveldb::DB::Open(options, path.string(), &pdb);\n     dbwrapper_private::HandleError(status);\n     LogPrintf(\"Opened LevelDB successfully\\n\");\n \n     if (gArgs.GetBoolArg(\"-forcecompactdb\", false)) {\n-        LogPrintf(\"Starting database compaction of %s\\n\", path.string());\n+        LogPrintf(\"Starting database compaction of %s\\n\", path.u8string());\n         pdb->CompactRange(nullptr, nullptr);\n-        LogPrintf(\"Finished database compaction of %s\\n\", path.string());\n+        LogPrintf(\"Finished database compaction of %s\\n\", path.u8string());\n     }\n \n     // The base-case obfuscation key, which is a noop.\n@@ -160,10 +160,10 @@ CDBWrapper::CDBWrapper(const fs::path& path, size_t nCacheSize, bool fMemory, bo\n         Write(OBFUSCATE_KEY_KEY, new_key);\n         obfuscate_key = new_key;\n \n-        LogPrintf(\"Wrote new obfuscate key for %s: %s\\n\", path.string(), HexStr(obfuscate_key));\n+        LogPrintf(\"Wrote new obfuscate key for %s: %s\\n\", path.u8string(), HexStr(obfuscate_key));\n     }\n \n-    LogPrintf(\"Using obfuscation key for %s: %s\\n\", path.string(), HexStr(obfuscate_key));\n+    LogPrintf(\"Using obfuscation key for %s: %s\\n\", path.u8string(), HexStr(obfuscate_key));\n }\n \n CDBWrapper::~CDBWrapper()"
      },
      {
        "sha": "6bd89a8a51ccc269ca8da15462b0aff07029718d",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 16,
        "deletions": 16,
        "changes": 32,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30618a83c8a64a848eead6baf96434941bf8e7ca/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30618a83c8a64a848eead6baf96434941bf8e7ca/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=30618a83c8a64a848eead6baf96434941bf8e7ca",
        "patch": "@@ -234,7 +234,7 @@ void Shutdown()\n         if (!est_fileout.IsNull())\n             ::feeEstimator.Write(est_fileout);\n         else\n-            LogPrintf(\"%s: Failed to write fee estimates to %s\\n\", __func__, est_path.string());\n+            LogPrintf(\"%s: Failed to write fee estimates to %s\\n\", __func__, est_path.u8string());\n         fFeeEstimatesInitialized = false;\n     }\n \n@@ -604,12 +604,12 @@ static void CleanupBlockRevFiles()\n     fs::path blocksdir = GetBlocksDir();\n     for (fs::directory_iterator it(blocksdir); it != fs::directory_iterator(); it++) {\n         if (fs::is_regular_file(*it) &&\n-            it->path().filename().string().length() == 12 &&\n-            it->path().filename().string().substr(8,4) == \".dat\")\n+            it->path().filename().u8string().length() == 12 &&\n+            it->path().filename().u8string().substr(8,4) == \".dat\")\n         {\n-            if (it->path().filename().string().substr(0,3) == \"blk\")\n-                mapBlockFiles[it->path().filename().string().substr(3,5)] = it->path();\n-            else if (it->path().filename().string().substr(0,3) == \"rev\")\n+            if (it->path().filename().u8string().substr(0,3) == \"blk\")\n+                mapBlockFiles[it->path().filename().u8string().substr(3,5)] = it->path();\n+            else if (it->path().filename().u8string().substr(0,3) == \"rev\")\n                 remove(it->path());\n         }\n     }\n@@ -668,18 +668,18 @@ static void ThreadImport(std::vector<fs::path> vImportFiles)\n             LoadExternalBlockFile(chainparams, file);\n             RenameOver(pathBootstrap, pathBootstrapOld);\n         } else {\n-            LogPrintf(\"Warning: Could not open bootstrap file %s\\n\", pathBootstrap.string());\n+            LogPrintf(\"Warning: Could not open bootstrap file %s\\n\", pathBootstrap.u8string());\n         }\n     }\n \n     // -loadblock=\n     for (const fs::path& path : vImportFiles) {\n         FILE *file = fsbridge::fopen(path, \"rb\");\n         if (file) {\n-            LogPrintf(\"Importing blocks file %s...\\n\", path.string());\n+            LogPrintf(\"Importing blocks file %s...\\n\", path.u8string());\n             LoadExternalBlockFile(chainparams, file);\n         } else {\n-            LogPrintf(\"Warning: Could not open blocks file %s\\n\", path.string());\n+            LogPrintf(\"Warning: Could not open blocks file %s\\n\", path.u8string());\n         }\n     }\n \n@@ -1180,10 +1180,10 @@ static bool LockDataDirectory(bool probeOnly)\n     // Make sure only a single Bitcoin process is using the data directory.\n     fs::path datadir = GetDataDir();\n     if (!DirIsWritable(datadir)) {\n-        return InitError(strprintf(_(\"Cannot write to data directory '%s'; check permissions.\"), datadir.string()));\n+        return InitError(strprintf(_(\"Cannot write to data directory '%s'; check permissions.\"), datadir.u8string()));\n     }\n     if (!LockDirectory(datadir, \".lock\", probeOnly)) {\n-        return InitError(strprintf(_(\"Cannot obtain a lock on data directory %s. %s is probably already running.\"), datadir.string(), _(PACKAGE_NAME)));\n+        return InitError(strprintf(_(\"Cannot obtain a lock on data directory %s. %s is probably already running.\"), datadir.u8string(), _(PACKAGE_NAME)));\n     }\n     return true;\n }\n@@ -1236,15 +1236,15 @@ bool AppInitMain()\n         }\n         if (!g_logger->OpenDebugLog()) {\n             return InitError(strprintf(\"Could not open debug log file %s\",\n-                                       g_logger->m_file_path.string()));\n+                                       g_logger->m_file_path.u8string()));\n         }\n     }\n \n     if (!g_logger->m_log_timestamps)\n         LogPrintf(\"Startup time: %s\\n\", FormatISO8601DateTime(GetTime()));\n-    LogPrintf(\"Default data directory %s\\n\", GetDefaultDataDir().string());\n-    LogPrintf(\"Using data directory %s\\n\", GetDataDir().string());\n-    LogPrintf(\"Using config file %s\\n\", GetConfigFile(gArgs.GetArg(\"-conf\", BITCOIN_CONF_FILENAME)).string());\n+    LogPrintf(\"Default data directory %s\\n\", GetDefaultDataDir().u8string());\n+    LogPrintf(\"Using data directory %s\\n\", GetDataDir().u8string());\n+    LogPrintf(\"Using config file %s\\n\", GetConfigFile(gArgs.GetArg(\"-conf\", BITCOIN_CONF_FILENAME)).u8string());\n     LogPrintf(\"Using at most %i automatic connections (%i file descriptors available)\\n\", nMaxConnections, nFD);\n \n     // Warn about relative -datadir path.\n@@ -1253,7 +1253,7 @@ bool AppInitMain()\n                   \"current working directory '%s'. This is fragile, because if bitcoin is started in the future \"\n                   \"from a different location, it will be unable to locate the current data files. There could \"\n                   \"also be data loss if bitcoin is started while in a temporary directory.\\n\",\n-            gArgs.GetArg(\"-datadir\", \"\"), fs::current_path().string());\n+            gArgs.GetArg(\"-datadir\", \"\"), fs::current_path().u8string());\n     }\n \n     InitSignatureCache();"
      },
      {
        "sha": "1d99816fe28de75b40aaeb0d4053acf88beab9da",
        "filename": "src/qt/intro.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30618a83c8a64a848eead6baf96434941bf8e7ca/src/qt/intro.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30618a83c8a64a848eead6baf96434941bf8e7ca/src/qt/intro.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/intro.cpp?ref=30618a83c8a64a848eead6baf96434941bf8e7ca",
        "patch": "@@ -235,7 +235,7 @@ bool Intro::pickDataDirectory(interfaces::Node& node)\n      * (to be consistent with bitcoind behavior)\n      */\n     if(dataDir != getDefaultDataDirectory()) {\n-        node.softSetArg(\"-datadir\", GUIUtil::qstringToBoostPath(dataDir).string()); // use OS locale for path setting\n+        node.softSetArg(\"-datadir\", GUIUtil::qstringToBoostPath(dataDir).u8string()); // use OS locale for path setting\n     }\n     return true;\n }"
      },
      {
        "sha": "70af49a8b7b32ded701f0a08b2cfc140d3a19cdc",
        "filename": "src/qt/test/test_main.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30618a83c8a64a848eead6baf96434941bf8e7ca/src/qt/test/test_main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30618a83c8a64a848eead6baf96434941bf8e7ca/src/qt/test/test_main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/test/test_main.cpp?ref=30618a83c8a64a848eead6baf96434941bf8e7ca",
        "patch": "@@ -57,7 +57,7 @@ int main(int argc, char *argv[])\n     ClearDatadirCache();\n     fs::path pathTemp = fs::temp_directory_path() / strprintf(\"test_bitcoin-qt_%lu_%i\", (unsigned long)GetTime(), (int)GetRand(100000));\n     fs::create_directories(pathTemp);\n-    gArgs.ForceSetArg(\"-datadir\", pathTemp.string());\n+    gArgs.ForceSetArg(\"-datadir\", pathTemp.u8string());\n \n     bool fInvalid = false;\n "
      },
      {
        "sha": "69da5d31b1743fb3e5bb2ef61dc23d0f39ed92e5",
        "filename": "src/rpc/protocol.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30618a83c8a64a848eead6baf96434941bf8e7ca/src/rpc/protocol.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30618a83c8a64a848eead6baf96434941bf8e7ca/src/rpc/protocol.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/protocol.cpp?ref=30618a83c8a64a848eead6baf96434941bf8e7ca",
        "patch": "@@ -89,18 +89,18 @@ bool GenerateAuthCookie(std::string *cookie_out)\n     fs::path filepath_tmp = GetAuthCookieFile(true);\n     file.open(filepath_tmp.string().c_str());\n     if (!file.is_open()) {\n-        LogPrintf(\"Unable to open cookie authentication file %s for writing\\n\", filepath_tmp.string());\n+        LogPrintf(\"Unable to open cookie authentication file %s for writing\\n\", filepath_tmp.u8string());\n         return false;\n     }\n     file << cookie;\n     file.close();\n \n     fs::path filepath = GetAuthCookieFile(false);\n     if (!RenameOver(filepath_tmp, filepath)) {\n-        LogPrintf(\"Unable to rename cookie authentication file %s to %s\\n\", filepath_tmp.string(), filepath.string());\n+        LogPrintf(\"Unable to rename cookie authentication file %s to %s\\n\", filepath_tmp.u8string(), filepath.u8string());\n         return false;\n     }\n-    LogPrintf(\"Generated RPC authentication cookie %s\\n\", filepath.string());\n+    LogPrintf(\"Generated RPC authentication cookie %s\\n\", filepath.u8string());\n \n     if (cookie_out)\n         *cookie_out = cookie;\n@@ -112,7 +112,7 @@ bool GetAuthCookie(std::string *cookie_out)\n     std::ifstream file;\n     std::string cookie;\n     fs::path filepath = GetAuthCookieFile();\n-    file.open(filepath.string().c_str());\n+    file.open(filepath.u8string().c_str());\n     if (!file.is_open())\n         return false;\n     std::getline(file, cookie);"
      },
      {
        "sha": "647bf6e214df18abb227e2d824b6b3bb9373a346",
        "filename": "src/test/test_bitcoin.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30618a83c8a64a848eead6baf96434941bf8e7ca/src/test/test_bitcoin.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30618a83c8a64a848eead6baf96434941bf8e7ca/src/test/test_bitcoin.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/test_bitcoin.cpp?ref=30618a83c8a64a848eead6baf96434941bf8e7ca",
        "patch": "@@ -70,7 +70,7 @@ fs::path BasicTestingSetup::SetDataDir(const std::string& name)\n {\n     fs::path ret = m_path_root / name;\n     fs::create_directories(ret);\n-    gArgs.ForceSetArg(\"-datadir\", ret.string());\n+    gArgs.ForceSetArg(\"-datadir\", ret.u8string());\n     return ret;\n }\n "
      },
      {
        "sha": "8ab4e825205aa56830c4cb7071a4f3e62beda075",
        "filename": "src/torcontrol.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30618a83c8a64a848eead6baf96434941bf8e7ca/src/torcontrol.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30618a83c8a64a848eead6baf96434941bf8e7ca/src/torcontrol.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/torcontrol.cpp?ref=30618a83c8a64a848eead6baf96434941bf8e7ca",
        "patch": "@@ -467,7 +467,7 @@ TorController::TorController(struct event_base* _base, const std::string& _targe\n     // Read service private key if cached\n     std::pair<bool,std::string> pkf = ReadBinaryFile(GetPrivateKeyFile());\n     if (pkf.first) {\n-        LogPrint(BCLog::TOR, \"tor: Reading cached private key from %s\\n\", GetPrivateKeyFile().string());\n+        LogPrint(BCLog::TOR, \"tor: Reading cached private key from %s\\n\", GetPrivateKeyFile().u8string());\n         private_key = pkf.second;\n     }\n }\n@@ -505,9 +505,9 @@ void TorController::add_onion_cb(TorControlConnection& _conn, const TorControlRe\n         service = LookupNumeric(std::string(service_id+\".onion\").c_str(), GetListenPort());\n         LogPrintf(\"tor: Got service ID %s, advertising service %s\\n\", service_id, service.ToString());\n         if (WriteBinaryFile(GetPrivateKeyFile(), private_key)) {\n-            LogPrint(BCLog::TOR, \"tor: Cached service private key to %s\\n\", GetPrivateKeyFile().string());\n+            LogPrint(BCLog::TOR, \"tor: Cached service private key to %s\\n\", GetPrivateKeyFile().u8string());\n         } else {\n-            LogPrintf(\"tor: Error writing service private key to %s\\n\", GetPrivateKeyFile().string());\n+            LogPrintf(\"tor: Error writing service private key to %s\\n\", GetPrivateKeyFile().u8string());\n         }\n         AddLocal(service, LOCAL_MANUAL);\n         // ... onion requested - keep connection open"
      },
      {
        "sha": "0f0067a9b1bd2c635e01dd84d674c489ba9e71ab",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30618a83c8a64a848eead6baf96434941bf8e7ca/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30618a83c8a64a848eead6baf96434941bf8e7ca/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=30618a83c8a64a848eead6baf96434941bf8e7ca",
        "patch": "@@ -153,7 +153,7 @@ bool LockDirectory(const fs::path& directory, const std::string lockfile_name, b\n     fs::path pathLockFile = directory / lockfile_name;\n \n     // If a lock for this directory already exists in the map, don't try to re-lock it\n-    if (dir_locks.count(pathLockFile.string())) {\n+    if (dir_locks.count(pathLockFile.u8string())) {\n         return true;\n     }\n \n@@ -168,10 +168,10 @@ bool LockDirectory(const fs::path& directory, const std::string lockfile_name, b\n         }\n         if (!probe_only) {\n             // Lock successful and we're not just probing, put it into the map\n-            dir_locks.emplace(pathLockFile.string(), std::move(lock));\n+            dir_locks.emplace(pathLockFile.u8string(), std::move(lock));\n         }\n     } catch (const boost::interprocess::interprocess_exception& e) {\n-        return error(\"Error while attempting to lock directory %s: %s\", directory.string(), e.what());\n+        return error(\"Error while attempting to lock directory %s: %s\", directory.u8string(), e.what());\n     }\n     return true;\n }\n@@ -990,7 +990,7 @@ bool RenameOver(fs::path src, fs::path dest)\n     return MoveFileExA(src.string().c_str(), dest.string().c_str(),\n                        MOVEFILE_REPLACE_EXISTING) != 0;\n #else\n-    int rc = std::rename(src.string().c_str(), dest.string().c_str());\n+    int rc = std::rename(src.u8string().c_str(), dest.u8string().c_str());\n     return (rc == 0);\n #endif /* WIN32 */\n }"
      },
      {
        "sha": "8b50eef581cacc3be76bdec718e2e9c187ae5211",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30618a83c8a64a848eead6baf96434941bf8e7ca/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30618a83c8a64a848eead6baf96434941bf8e7ca/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=30618a83c8a64a848eead6baf96434941bf8e7ca",
        "patch": "@@ -3790,12 +3790,12 @@ static FILE* OpenDiskFile(const CDiskBlockPos &pos, const char *prefix, bool fRe\n     if (!file && !fReadOnly)\n         file = fsbridge::fopen(path, \"wb+\");\n     if (!file) {\n-        LogPrintf(\"Unable to open file %s\\n\", path.string());\n+        LogPrintf(\"Unable to open file %s\\n\", path.u8string());\n         return nullptr;\n     }\n     if (pos.nPos) {\n         if (fseek(file, pos.nPos, SEEK_SET)) {\n-            LogPrintf(\"Unable to seek to position %u of %s\\n\", pos.nPos, path.string());\n+            LogPrintf(\"Unable to seek to position %u of %s\\n\", pos.nPos, path.u8string());\n             fclose(file);\n             return nullptr;\n         }"
      },
      {
        "sha": "0e049dec98775126d3d4e3f380764f24aa2050cf",
        "filename": "src/wallet/db.cpp",
        "status": "modified",
        "additions": 9,
        "deletions": 9,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30618a83c8a64a848eead6baf96434941bf8e7ca/src/wallet/db.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30618a83c8a64a848eead6baf96434941bf8e7ca/src/wallet/db.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/db.cpp?ref=30618a83c8a64a848eead6baf96434941bf8e7ca",
        "patch": "@@ -64,7 +64,7 @@ BerkeleyEnvironment* GetWalletEnv(const fs::path& wallet_path, std::string& data\n         // existing file, treat it as the path to a BDB data file in a parent\n         // directory that also contains BDB log files.\n         env_directory = wallet_path.parent_path();\n-        database_filename = wallet_path.filename().string();\n+        database_filename = wallet_path.filename().u8string();\n     } else {\n         // Normal case: Interpret wallet path as a directory path containing\n         // data and log files.\n@@ -76,7 +76,7 @@ BerkeleyEnvironment* GetWalletEnv(const fs::path& wallet_path, std::string& data\n     // emplace function if the key already exists. This is a little inefficient,\n     // but not a big concern since the map will be changed in the future to hold\n     // pointers instead of objects, anyway.\n-    return &g_dbenvs.emplace(std::piecewise_construct, std::forward_as_tuple(env_directory.string()), std::forward_as_tuple(env_directory)).first->second;\n+    return &g_dbenvs.emplace(std::piecewise_construct, std::forward_as_tuple(env_directory.u8string()), std::forward_as_tuple(env_directory)).first->second;\n }\n \n //\n@@ -114,7 +114,7 @@ void BerkeleyEnvironment::Reset()\n     fMockDb = false;\n }\n \n-BerkeleyEnvironment::BerkeleyEnvironment(const fs::path& dir_path) : strPath(dir_path.string())\n+BerkeleyEnvironment::BerkeleyEnvironment(const fs::path& dir_path) : strPath(dir_path.u8string())\n {\n     Reset();\n }\n@@ -141,7 +141,7 @@ bool BerkeleyEnvironment::Open(bool retry)\n     fs::path pathLogDir = pathIn / \"database\";\n     TryCreateDirectories(pathLogDir);\n     fs::path pathErrorFile = pathIn / \"db.log\";\n-    LogPrintf(\"BerkeleyEnvironment::Open: LogDir=%s ErrorFile=%s\\n\", pathLogDir.string(), pathErrorFile.string());\n+    LogPrintf(\"BerkeleyEnvironment::Open: LogDir=%s ErrorFile=%s\\n\", pathLogDir.u8string(), pathErrorFile.u8string());\n \n     unsigned int nEnvFlags = 0;\n     if (gArgs.GetBoolArg(\"-privdb\", DEFAULT_WALLET_PRIVDB))\n@@ -179,7 +179,7 @@ bool BerkeleyEnvironment::Open(bool retry)\n             fs::path pathDatabaseBak = pathIn / strprintf(\"database.%d.bak\", GetTime());\n             try {\n                 fs::rename(pathLogDir, pathDatabaseBak);\n-                LogPrintf(\"Moved old %s to %s. Retrying.\\n\", pathLogDir.string(), pathDatabaseBak.string());\n+                LogPrintf(\"Moved old %s to %s. Retrying.\\n\", pathLogDir.u8string(), pathDatabaseBak.u8string());\n             } catch (const fs::filesystem_error&) {\n                 // failure is ok (well, not really, but it's not worse than what we started with)\n             }\n@@ -328,7 +328,7 @@ bool BerkeleyBatch::VerifyEnvironment(const fs::path& file_path, std::string& er\n     // Wallet file must be a plain filename without a directory\n     if (walletFile != fs::basename(walletFile) + fs::extension(walletFile))\n     {\n-        errorStr = strprintf(_(\"Wallet %s resides outside wallet directory %s\"), walletFile, walletDir.string());\n+        errorStr = strprintf(_(\"Wallet %s resides outside wallet directory %s\"), walletFile, walletDir.u8string());\n         return false;\n     }\n \n@@ -775,15 +775,15 @@ bool BerkeleyDatabase::Backup(const std::string& strDest)\n \n                 try {\n                     if (fs::equivalent(pathSrc, pathDest)) {\n-                        LogPrintf(\"cannot backup to wallet source file %s\\n\", pathDest.string());\n+                        LogPrintf(\"cannot backup to wallet source file %s\\n\", pathDest.u8string());\n                         return false;\n                     }\n \n                     fs::copy_file(pathSrc, pathDest, fs::copy_option::overwrite_if_exists);\n-                    LogPrintf(\"copied %s to %s\\n\", strFile, pathDest.string());\n+                    LogPrintf(\"copied %s to %s\\n\", strFile, pathDest.u8string());\n                     return true;\n                 } catch (const fs::filesystem_error& e) {\n-                    LogPrintf(\"error copying %s to %s - %s\\n\", strFile, pathDest.string(), e.what());\n+                    LogPrintf(\"error copying %s to %s - %s\\n\", strFile, pathDest.u8string(), e.what());\n                     return false;\n                 }\n             }"
      },
      {
        "sha": "35c7ea3ab9e6ac8783f6e1e6ba682931f1cdbfdc",
        "filename": "src/wallet/init.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30618a83c8a64a848eead6baf96434941bf8e7ca/src/wallet/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30618a83c8a64a848eead6baf96434941bf8e7ca/src/wallet/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/init.cpp?ref=30618a83c8a64a848eead6baf96434941bf8e7ca",
        "patch": "@@ -180,15 +180,15 @@ bool WalletInit::Verify() const\n     if (gArgs.IsArgSet(\"-walletdir\")) {\n         fs::path wallet_dir = gArgs.GetArg(\"-walletdir\", \"\");\n         if (!fs::exists(wallet_dir)) {\n-            return InitError(strprintf(_(\"Specified -walletdir \\\"%s\\\" does not exist\"), wallet_dir.string()));\n+            return InitError(strprintf(_(\"Specified -walletdir \\\"%s\\\" does not exist\"), wallet_dir.u8string()));\n         } else if (!fs::is_directory(wallet_dir)) {\n-            return InitError(strprintf(_(\"Specified -walletdir \\\"%s\\\" is not a directory\"), wallet_dir.string()));\n+            return InitError(strprintf(_(\"Specified -walletdir \\\"%s\\\" is not a directory\"), wallet_dir.u8string()));\n         } else if (!wallet_dir.is_absolute()) {\n-            return InitError(strprintf(_(\"Specified -walletdir \\\"%s\\\" is a relative path\"), wallet_dir.string()));\n+            return InitError(strprintf(_(\"Specified -walletdir \\\"%s\\\" is a relative path\"), wallet_dir.u8string()));\n         }\n     }\n \n-    LogPrintf(\"Using wallet directory %s\\n\", GetWalletDir().string());\n+    LogPrintf(\"Using wallet directory %s\\n\", GetWalletDir().u8string());\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n "
      },
      {
        "sha": "60c8f5f510c5e2610fa20e462d085fbff80344fd",
        "filename": "src/wallet/rpcdump.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30618a83c8a64a848eead6baf96434941bf8e7ca/src/wallet/rpcdump.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30618a83c8a64a848eead6baf96434941bf8e7ca/src/wallet/rpcdump.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcdump.cpp?ref=30618a83c8a64a848eead6baf96434941bf8e7ca",
        "patch": "@@ -728,7 +728,7 @@ UniValue dumpwallet(const JSONRPCRequest& request)\n      * It may also avoid other security issues.\n      */\n     if (boost::filesystem::exists(filepath)) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n     }\n \n     std::ofstream file;\n@@ -814,7 +814,7 @@ UniValue dumpwallet(const JSONRPCRequest& request)\n     file.close();\n \n     UniValue reply(UniValue::VOBJ);\n-    reply.pushKV(\"filename\", filepath.string());\n+    reply.pushKV(\"filename\", filepath.u8string());\n \n     return reply;\n }"
      },
      {
        "sha": "6bb6929b5c0bcb4d589130c130fbc8500f6bae30",
        "filename": "src/wallet/test/wallet_tests.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30618a83c8a64a848eead6baf96434941bf8e7ca/src/wallet/test/wallet_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30618a83c8a64a848eead6baf96434941bf8e7ca/src/wallet/test/wallet_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/test/wallet_tests.cpp?ref=30618a83c8a64a848eead6baf96434941bf8e7ca",
        "patch": "@@ -130,7 +130,7 @@ BOOST_FIXTURE_TEST_CASE(importwallet_rescan, TestChain100Setup)\n \n     LOCK(cs_main);\n \n-    std::string backup_file = (SetDataDir(\"importwallet_rescan\") / \"wallet.backup\").string();\n+    std::string backup_file = (SetDataDir(\"importwallet_rescan\") / \"wallet.backup\").u8string();\n \n     // Import key into wallet and call dumpwallet to create backup file.\n     {"
      }
    ]
  },
  {
    "sha": "9f7078eca63cd84682c94a998518297a662aaba1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5ZjcwNzhlY2E2M2NkODQ2ODJjOTRhOTk4NTE4Mjk3YTY2MmFhYmEx",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-06-11T04:46:18Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-26T22:22:36Z"
      },
      "message": "Use u8path at proper place",
      "tree": {
        "sha": "6e49057b1e63889403c7cd35f8da53c18e422d1f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6e49057b1e63889403c7cd35f8da53c18e422d1f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9f7078eca63cd84682c94a998518297a662aaba1",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9f7078eca63cd84682c94a998518297a662aaba1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/9f7078eca63cd84682c94a998518297a662aaba1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9f7078eca63cd84682c94a998518297a662aaba1/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "30618a83c8a64a848eead6baf96434941bf8e7ca",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/30618a83c8a64a848eead6baf96434941bf8e7ca",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/30618a83c8a64a848eead6baf96434941bf8e7ca"
      }
    ],
    "stats": {
      "total": 92,
      "additions": 46,
      "deletions": 46
    },
    "files": [
      {
        "sha": "678555c765950aecfe2582e29e7c3102cbf71ceb",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9f7078eca63cd84682c94a998518297a662aaba1/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9f7078eca63cd84682c94a998518297a662aaba1/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=9f7078eca63cd84682c94a998518297a662aaba1",
        "patch": "@@ -825,7 +825,7 @@ static std::string ResolveErrMsg(const char * const optname, const std::string&\n void InitLogging()\n {\n     g_logger->m_print_to_file = !gArgs.IsArgNegated(\"-debuglogfile\");\n-    g_logger->m_file_path = AbsPathForConfigVal(gArgs.GetArg(\"-debuglogfile\", DEFAULT_DEBUGLOGFILE));\n+    g_logger->m_file_path = AbsPathForConfigVal(fs::u8path(gArgs.GetArg(\"-debuglogfile\", DEFAULT_DEBUGLOGFILE)));\n \n     // Add newlines to the logfile to distinguish this execution from the last\n     // one; called before console logging is set up, so this is only sent to\n@@ -1248,7 +1248,7 @@ bool AppInitMain()\n     LogPrintf(\"Using at most %i automatic connections (%i file descriptors available)\\n\", nMaxConnections, nFD);\n \n     // Warn about relative -datadir path.\n-    if (gArgs.IsArgSet(\"-datadir\") && !fs::path(gArgs.GetArg(\"-datadir\", \"\")).is_absolute()) {\n+    if (gArgs.IsArgSet(\"-datadir\") && !fs::u8path(gArgs.GetArg(\"-datadir\", \"\")).is_absolute()) {\n         LogPrintf(\"Warning: relative datadir option '%s' specified, which will be interpreted relative to the \" /* Continued */\n                   \"current working directory '%s'. This is fragile, because if bitcoin is started in the future \"\n                   \"from a different location, it will be unable to locate the current data files. There could \"\n@@ -1655,7 +1655,7 @@ bool AppInitMain()\n \n     std::vector<fs::path> vImportFiles;\n     for (const std::string& strFile : gArgs.GetArgs(\"-loadblock\")) {\n-        vImportFiles.push_back(strFile);\n+        vImportFiles.push_back(fs::u8path(strFile));\n     }\n \n     threadGroup.create_thread(boost::bind(&ThreadImport, vImportFiles));"
      },
      {
        "sha": "6e4b5e2c3ae2e216df503dabe17ca83e78b7af32",
        "filename": "src/qt/guiutil.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9f7078eca63cd84682c94a998518297a662aaba1/src/qt/guiutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9f7078eca63cd84682c94a998518297a662aaba1/src/qt/guiutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.cpp?ref=9f7078eca63cd84682c94a998518297a662aaba1",
        "patch": "@@ -613,9 +613,9 @@ bool SetStartOnSystemStartup(bool fAutoStart)\n fs::path static GetAutostartDir()\n {\n     char* pszConfigHome = getenv(\"XDG_CONFIG_HOME\");\n-    if (pszConfigHome) return fs::path(pszConfigHome) / \"autostart\";\n+    if (pszConfigHome) return fs::u8path(pszConfigHome) / \"autostart\";\n     char* pszHome = getenv(\"HOME\");\n-    if (pszHome) return fs::path(pszHome) / \".config\" / \"autostart\";\n+    if (pszHome) return fs::u8path(pszHome) / \".config\" / \"autostart\";\n     return fs::path();\n }\n "
      },
      {
        "sha": "07da9d02bb2465951fb45008cbc1385e88eb4454",
        "filename": "src/rpc/protocol.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9f7078eca63cd84682c94a998518297a662aaba1/src/rpc/protocol.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9f7078eca63cd84682c94a998518297a662aaba1/src/rpc/protocol.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/protocol.cpp?ref=9f7078eca63cd84682c94a998518297a662aaba1",
        "patch": "@@ -72,7 +72,7 @@ static fs::path GetAuthCookieFile(bool temp=false)\n     if (temp) {\n         arg += \".tmp\";\n     }\n-    return AbsPathForConfigVal(fs::path(arg));\n+    return AbsPathForConfigVal(fs::u8path(arg));\n }\n \n bool GenerateAuthCookie(std::string *cookie_out)"
      },
      {
        "sha": "a519a0e945e49de737e41d98656b535c2aa19f3e",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 8,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9f7078eca63cd84682c94a998518297a662aaba1/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9f7078eca63cd84682c94a998518297a662aaba1/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=9f7078eca63cd84682c94a998518297a662aaba1",
        "patch": "@@ -726,9 +726,9 @@ fs::path GetDefaultDataDir()\n     fs::path pathRet;\n     char* pszHome = getenv(\"HOME\");\n     if (pszHome == nullptr || strlen(pszHome) == 0)\n-        pathRet = fs::path(\"/\");\n+        pathRet = fs::u8path(\"/\");\n     else\n-        pathRet = fs::path(pszHome);\n+        pathRet = fs::u8path(pszHome);\n #ifdef MAC_OSX\n     // Mac\n     return pathRet / \"Library/Application Support/Bitcoin\";\n@@ -758,7 +758,7 @@ const fs::path &GetBlocksDir(bool fNetSpecific)\n         return path;\n \n     if (gArgs.IsArgSet(\"-blocksdir\")) {\n-        path = fs::system_complete(gArgs.GetArg(\"-blocksdir\", \"\"));\n+        path = fs::system_complete(fs::u8path(gArgs.GetArg(\"-blocksdir\", \"\")));\n         if (!fs::is_directory(path)) {\n             path = \"\";\n             return path;\n@@ -787,7 +787,7 @@ const fs::path &GetDataDir(bool fNetSpecific)\n         return path;\n \n     if (gArgs.IsArgSet(\"-datadir\")) {\n-        path = fs::system_complete(gArgs.GetArg(\"-datadir\", \"\"));\n+        path = fs::system_complete(fs::u8path(gArgs.GetArg(\"-datadir\", \"\")));\n         if (!fs::is_directory(path)) {\n             path = \"\";\n             return path;\n@@ -818,7 +818,7 @@ void ClearDatadirCache()\n \n fs::path GetConfigFile(const std::string& confPath)\n {\n-    return AbsPathForConfigVal(fs::path(confPath), false);\n+    return AbsPathForConfigVal(fs::u8path(confPath), false);\n }\n \n static std::string TrimString(const std::string& str, const std::string& pattern)\n@@ -970,7 +970,7 @@ std::string ArgsManager::GetChainName() const\n #ifndef WIN32\n fs::path GetPidFile()\n {\n-    return AbsPathForConfigVal(fs::path(gArgs.GetArg(\"-pid\", BITCOIN_PID_FILENAME)));\n+    return AbsPathForConfigVal(fs::u8path(gArgs.GetArg(\"-pid\", BITCOIN_PID_FILENAME)));\n }\n \n void CreatePidFile(const fs::path &path, pid_t pid)\n@@ -1133,11 +1133,11 @@ fs::path GetSpecialFolderPath(int nFolder, bool fCreate)\n \n     if(SHGetSpecialFolderPathA(nullptr, pszPath, nFolder, fCreate))\n     {\n-        return fs::path(pszPath);\n+        return fs::u8path(pszPath);\n     }\n \n     LogPrintf(\"SHGetSpecialFolderPathA() failed, could not obtain requested path.\\n\");\n-    return fs::path(\"\");\n+    return fs::u8path(\"\");\n }\n #endif\n "
      },
      {
        "sha": "ca018c43375d567511feae863a341b49823a0fa2",
        "filename": "src/wallet/db.cpp",
        "status": "modified",
        "additions": 21,
        "deletions": 21,
        "changes": 42,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9f7078eca63cd84682c94a998518297a662aaba1/src/wallet/db.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9f7078eca63cd84682c94a998518297a662aaba1/src/wallet/db.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/db.cpp?ref=9f7078eca63cd84682c94a998518297a662aaba1",
        "patch": "@@ -104,7 +104,7 @@ void BerkeleyEnvironment::Close()\n     if (ret != 0)\n         LogPrintf(\"BerkeleyEnvironment::Close: Error %d closing database environment: %s\\n\", ret, DbEnv::strerror(ret));\n     if (!fMockDb)\n-        DbEnv((u_int32_t)0).remove(strPath.c_str(), 0);\n+        DbEnv((u_int32_t)0).remove(fs::u8path(strPath).string().c_str(), 0);\n }\n \n void BerkeleyEnvironment::Reset()\n@@ -131,7 +131,7 @@ bool BerkeleyEnvironment::Open(bool retry)\n \n     boost::this_thread::interruption_point();\n \n-    fs::path pathIn = strPath;\n+    fs::path pathIn = fs::u8path(strPath);\n     TryCreateDirectories(pathIn);\n     if (!LockDirectory(pathIn, \".walletlock\")) {\n         LogPrintf(\"Cannot obtain a lock on wallet directory %s. Another instance of bitcoin may be using it.\\n\", strPath);\n@@ -157,7 +157,7 @@ bool BerkeleyEnvironment::Open(bool retry)\n     dbenv->set_flags(DB_AUTO_COMMIT, 1);\n     dbenv->set_flags(DB_TXN_WRITE_NOSYNC, 1);\n     dbenv->log_set_config(DB_LOG_AUTO_REMOVE, 1);\n-    int ret = dbenv->open(strPath.c_str(),\n+    int ret = dbenv->open(fs::u8path(strPath).string().c_str(),\n                          DB_CREATE |\n                              DB_INIT_LOCK |\n                              DB_INIT_LOG |\n@@ -236,14 +236,14 @@ BerkeleyEnvironment::VerifyResult BerkeleyEnvironment::Verify(const std::string&\n     assert(mapFileUseCount.count(strFile) == 0);\n \n     Db db(dbenv.get(), 0);\n-    int result = db.verify(strFile.c_str(), nullptr, nullptr, 0);\n+    int result = db.verify(fs::u8path(strFile).string().c_str(), nullptr, nullptr, 0);\n     if (result == 0)\n         return VerifyResult::VERIFY_OK;\n     else if (recoverFunc == nullptr)\n         return VerifyResult::RECOVER_FAIL;\n \n     // Try to recover:\n-    bool fRecovered = (*recoverFunc)(fs::path(strPath) / strFile, out_backup_filename);\n+    bool fRecovered = (*recoverFunc)(fs::u8path(strPath) / fs::u8path(strFile), out_backup_filename);\n     return (fRecovered ? VerifyResult::RECOVER_OK : VerifyResult::RECOVER_FAIL);\n }\n \n@@ -262,8 +262,8 @@ bool BerkeleyBatch::Recover(const fs::path& file_path, void *callbackDataIn, boo\n     int64_t now = GetTime();\n     newFilename = strprintf(\"%s.%d.bak\", filename, now);\n \n-    int result = env->dbenv->dbrename(nullptr, filename.c_str(), nullptr,\n-                                       newFilename.c_str(), DB_AUTO_COMMIT);\n+    int result = env->dbenv->dbrename(nullptr, fs::u8path(filename).string().c_str(), nullptr,\n+                                       fs::u8path(newFilename).string().c_str(), DB_AUTO_COMMIT);\n     if (result == 0)\n         LogPrintf(\"Renamed %s to %s\\n\", filename, newFilename);\n     else\n@@ -283,7 +283,7 @@ bool BerkeleyBatch::Recover(const fs::path& file_path, void *callbackDataIn, boo\n \n     std::unique_ptr<Db> pdbCopy = MakeUnique<Db>(env->dbenv.get(), 0);\n     int ret = pdbCopy->open(nullptr,               // Txn pointer\n-                            filename.c_str(),   // Filename\n+                            fs::u8path(filename).string().c_str(),   // Filename\n                             \"main\",             // Logical db name\n                             DB_BTREE,           // Database type\n                             DB_CREATE,          // Flags\n@@ -346,7 +346,7 @@ bool BerkeleyBatch::VerifyDatabaseFile(const fs::path& file_path, std::string& w\n     BerkeleyEnvironment* env = GetWalletEnv(file_path, walletFile);\n     fs::path walletDir = env->Directory();\n \n-    if (fs::exists(walletDir / walletFile))\n+    if (fs::exists(walletDir / fs::u8path(walletFile)))\n     {\n         std::string backup_filename;\n         BerkeleyEnvironment::VerifyResult r = env->Verify(walletFile, recoverFunc, backup_filename);\n@@ -385,7 +385,7 @@ bool BerkeleyEnvironment::Salvage(const std::string& strFile, bool fAggressive,\n     std::stringstream strDump;\n \n     Db db(dbenv.get(), 0);\n-    int result = db.verify(strFile.c_str(), nullptr, &strDump, flags);\n+    int result = db.verify(fs::u8path(strFile).string().c_str(), nullptr, &strDump, flags);\n     if (result == DB_VERIFY_BAD) {\n         LogPrintf(\"BerkeleyEnvironment::Salvage: Database salvage found errors, all data may not be recoverable.\\n\");\n         if (!fAggressive) {\n@@ -439,7 +439,7 @@ void BerkeleyEnvironment::CheckpointLSN(const std::string& strFile)\n     dbenv->txn_checkpoint(0, 0, 0);\n     if (fMockDb)\n         return;\n-    dbenv->lsn_reset(strFile.c_str(), 0);\n+    dbenv->lsn_reset(fs::u8path(strFile).string().c_str(), 0);\n }\n \n \n@@ -478,8 +478,8 @@ BerkeleyBatch::BerkeleyBatch(BerkeleyDatabase& database, const char* pszMode, bo\n             }\n \n             ret = pdb_temp->open(nullptr,                             // Txn pointer\n-                            fMockDb ? nullptr : strFilename.c_str(),  // Filename\n-                            fMockDb ? strFilename.c_str() : \"main\",   // Logical db name\n+                            fMockDb ? nullptr : fs::u8path(strFilename).string().c_str(),  // Filename\n+                            fMockDb ? fs::u8path(strFilename).string().c_str() : \"main\",   // Logical db name\n                             DB_BTREE,                                 // Database type\n                             nFlags,                                   // Flags\n                             0);\n@@ -596,7 +596,7 @@ bool BerkeleyBatch::Rewrite(BerkeleyDatabase& database, const char* pszSkip)\n                     std::unique_ptr<Db> pdbCopy = MakeUnique<Db>(env->dbenv.get(), 0);\n \n                     int ret = pdbCopy->open(nullptr,               // Txn pointer\n-                                            strFileRes.c_str(), // Filename\n+                                            fs::u8path(strFileRes).string().c_str(), // Filename\n                                             \"main\",             // Logical db name\n                                             DB_BTREE,           // Database type\n                                             DB_CREATE,          // Flags\n@@ -645,10 +645,10 @@ bool BerkeleyBatch::Rewrite(BerkeleyDatabase& database, const char* pszSkip)\n                 }\n                 if (fSuccess) {\n                     Db dbA(env->dbenv.get(), 0);\n-                    if (dbA.remove(strFile.c_str(), nullptr, 0))\n+                    if (dbA.remove(fs::u8path(strFile).string().c_str(), nullptr, 0))\n                         fSuccess = false;\n                     Db dbB(env->dbenv.get(), 0);\n-                    if (dbB.rename(strFileRes.c_str(), nullptr, strFile.c_str(), 0))\n+                    if (dbB.rename(fs::u8path(strFileRes).string().c_str(), nullptr, fs::u8path(strFile).string().c_str(), 0))\n                         fSuccess = false;\n                 }\n                 if (!fSuccess)\n@@ -682,7 +682,7 @@ void BerkeleyEnvironment::Flush(bool fShutdown)\n                 dbenv->txn_checkpoint(0, 0, 0);\n                 LogPrint(BCLog::DB, \"BerkeleyEnvironment::Flush: %s detach\\n\", strFile);\n                 if (!fMockDb)\n-                    dbenv->lsn_reset(strFile.c_str(), 0);\n+                    dbenv->lsn_reset(fs::u8path(strFile).string().c_str(), 0);\n                 LogPrint(BCLog::DB, \"BerkeleyEnvironment::Flush: %s closed\\n\", strFile);\n                 mapFileUseCount.erase(mi++);\n             } else\n@@ -695,7 +695,7 @@ void BerkeleyEnvironment::Flush(bool fShutdown)\n                 dbenv->log_archive(&listp, DB_ARCH_REMOVE);\n                 Close();\n                 if (!fMockDb) {\n-                    fs::remove_all(fs::path(strPath) / \"database\");\n+                    fs::remove_all(fs::u8path(strPath) / \"database\");\n                 }\n                 g_dbenvs.erase(strPath);\n             }\n@@ -768,10 +768,10 @@ bool BerkeleyDatabase::Backup(const std::string& strDest)\n                 env->mapFileUseCount.erase(strFile);\n \n                 // Copy wallet file\n-                fs::path pathSrc = GetWalletDir() / strFile;\n-                fs::path pathDest(strDest);\n+                fs::path pathSrc = GetWalletDir() / fs::u8path(strFile);\n+                fs::path pathDest = fs::u8path(strDest);\n                 if (fs::is_directory(pathDest))\n-                    pathDest /= strFile;\n+                    pathDest /= fs::u8path(strFile);\n \n                 try {\n                     if (fs::equivalent(pathSrc, pathDest)) {"
      },
      {
        "sha": "76e7a7dda57e8c11d4ed344f1d214e8c742c47ed",
        "filename": "src/wallet/init.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9f7078eca63cd84682c94a998518297a662aaba1/src/wallet/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9f7078eca63cd84682c94a998518297a662aaba1/src/wallet/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/init.cpp?ref=9f7078eca63cd84682c94a998518297a662aaba1",
        "patch": "@@ -178,7 +178,7 @@ bool WalletInit::Verify() const\n     }\n \n     if (gArgs.IsArgSet(\"-walletdir\")) {\n-        fs::path wallet_dir = gArgs.GetArg(\"-walletdir\", \"\");\n+        fs::path wallet_dir = fs::u8path(gArgs.GetArg(\"-walletdir\", \"\"));\n         if (!fs::exists(wallet_dir)) {\n             return InitError(strprintf(_(\"Specified -walletdir \\\"%s\\\" does not exist\"), wallet_dir.u8string()));\n         } else if (!fs::is_directory(wallet_dir)) {\n@@ -228,7 +228,7 @@ bool WalletInit::Open() const\n     }\n \n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n-        std::shared_ptr<CWallet> pwallet = CWallet::CreateWalletFromFile(walletFile, fs::absolute(walletFile, GetWalletDir()));\n+        std::shared_ptr<CWallet> pwallet = CWallet::CreateWalletFromFile(walletFile, fs::absolute(fs::u8path(walletFile), GetWalletDir()));\n         if (!pwallet) {\n             return false;\n         }"
      },
      {
        "sha": "c376f12c4797bae2467fe5eb8fe7b2e611e7d8d9",
        "filename": "src/wallet/rpcdump.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9f7078eca63cd84682c94a998518297a662aaba1/src/wallet/rpcdump.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9f7078eca63cd84682c94a998518297a662aaba1/src/wallet/rpcdump.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcdump.cpp?ref=9f7078eca63cd84682c94a998518297a662aaba1",
        "patch": "@@ -719,7 +719,7 @@ UniValue dumpwallet(const JSONRPCRequest& request)\n \n     EnsureWalletIsUnlocked(pwallet);\n \n-    boost::filesystem::path filepath = request.params[0].get_str();\n+    boost::filesystem::path filepath = fs::u8path(request.params[0].get_str());\n     filepath = boost::filesystem::absolute(filepath);\n \n     /* Prevent arbitrary files from being overwritten. There have been reports"
      },
      {
        "sha": "aa93022c3190e7cb37d005dcd47b1ae92946e40b",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9f7078eca63cd84682c94a998518297a662aaba1/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9f7078eca63cd84682c94a998518297a662aaba1/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=9f7078eca63cd84682c94a998518297a662aaba1",
        "patch": "@@ -3109,7 +3109,7 @@ static UniValue loadwallet(const JSONRPCRequest& request)\n     std::string wallet_file = request.params[0].get_str();\n     std::string error;\n \n-    fs::path wallet_path = fs::absolute(wallet_file, GetWalletDir());\n+    fs::path wallet_path = fs::absolute(fs::u8path(wallet_file), GetWalletDir());\n     if (fs::symlink_status(wallet_path).type() == fs::file_not_found) {\n         throw JSONRPCError(RPC_WALLET_NOT_FOUND, \"Wallet \" + wallet_file + \" not found.\");\n     } else if (fs::is_directory(wallet_path)) {\n@@ -3125,7 +3125,7 @@ static UniValue loadwallet(const JSONRPCRequest& request)\n         throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet file verification failed: \" + error);\n     }\n \n-    std::shared_ptr<CWallet> const wallet = CWallet::CreateWalletFromFile(wallet_file, fs::absolute(wallet_file, GetWalletDir()));\n+    std::shared_ptr<CWallet> const wallet = CWallet::CreateWalletFromFile(wallet_file, fs::absolute(fs::u8path(wallet_file), GetWalletDir()));\n     if (!wallet) {\n         throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet loading failed.\");\n     }\n@@ -3168,7 +3168,7 @@ static UniValue createwallet(const JSONRPCRequest& request)\n         disable_privatekeys = request.params[1].get_bool();\n     }\n \n-    fs::path wallet_path = fs::absolute(wallet_name, GetWalletDir());\n+    fs::path wallet_path = fs::absolute(fs::u8path(wallet_name), GetWalletDir());\n     if (fs::symlink_status(wallet_path).type() != fs::file_not_found) {\n         throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet \" + wallet_name + \" already exists.\");\n     }\n@@ -3178,7 +3178,7 @@ static UniValue createwallet(const JSONRPCRequest& request)\n         throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet file verification failed: \" + error);\n     }\n \n-    std::shared_ptr<CWallet> const wallet = CWallet::CreateWalletFromFile(wallet_name, fs::absolute(wallet_name, GetWalletDir()), (disable_privatekeys ? (uint64_t)WALLET_FLAG_DISABLE_PRIVATE_KEYS : 0));\n+    std::shared_ptr<CWallet> const wallet = CWallet::CreateWalletFromFile(wallet_name, fs::absolute(fs::u8path(wallet_name), GetWalletDir()), (disable_privatekeys ? (uint64_t)WALLET_FLAG_DISABLE_PRIVATE_KEYS : 0));\n     if (!wallet) {\n         throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet creation failed.\");\n     }"
      },
      {
        "sha": "729758ed80bec41ec59980728f98f25b719b3939",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9f7078eca63cd84682c94a998518297a662aaba1/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9f7078eca63cd84682c94a998518297a662aaba1/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=9f7078eca63cd84682c94a998518297a662aaba1",
        "patch": "@@ -3962,11 +3962,11 @@ bool CWallet::Verify(std::string wallet_file, bool salvage_wallet, std::string&\n     // 3. Path to a symlink to a directory.\n     // 4. For backwards compatibility, the name of a data file in -walletdir.\n     LOCK(cs_wallets);\n-    fs::path wallet_path = fs::absolute(wallet_file, GetWalletDir());\n+    fs::path wallet_path = fs::absolute(fs::u8path(wallet_file), GetWalletDir());\n     fs::file_type path_type = fs::symlink_status(wallet_path).type();\n     if (!(path_type == fs::file_not_found || path_type == fs::directory_file ||\n           (path_type == fs::symlink_file && fs::is_directory(wallet_path)) ||\n-          (path_type == fs::regular_file && fs::path(wallet_file).filename() == wallet_file))) {\n+          (path_type == fs::regular_file && fs::u8path(wallet_file).filename() == wallet_file))) {\n         error_string = strprintf(\n               \"Invalid -wallet path '%s'. -wallet path should point to a directory where wallet.dat and \"\n               \"database/log.?????????? files can be stored, a location where such a directory could be created, \"\n@@ -3977,7 +3977,7 @@ bool CWallet::Verify(std::string wallet_file, bool salvage_wallet, std::string&\n \n     // Make sure that the wallet path doesn't clash with an existing wallet path\n     for (auto wallet : GetWallets()) {\n-        if (fs::absolute(wallet->GetName(), GetWalletDir()) == wallet_path) {\n+        if (fs::absolute(fs::u8path(wallet->GetName()), GetWalletDir()) == wallet_path) {\n             error_string = strprintf(\"Error loading wallet %s. Duplicate -wallet filename specified.\", wallet_file);\n             return false;\n         }"
      },
      {
        "sha": "236499e084a2e53b443936e740b42bfbcdb599b2",
        "filename": "src/wallet/walletutil.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9f7078eca63cd84682c94a998518297a662aaba1/src/wallet/walletutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9f7078eca63cd84682c94a998518297a662aaba1/src/wallet/walletutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/walletutil.cpp?ref=9f7078eca63cd84682c94a998518297a662aaba1",
        "patch": "@@ -9,7 +9,7 @@ fs::path GetWalletDir()\n     fs::path path;\n \n     if (gArgs.IsArgSet(\"-walletdir\")) {\n-        path = gArgs.GetArg(\"-walletdir\", \"\");\n+        path = fs::u8path(gArgs.GetArg(\"-walletdir\", \"\"));\n         if (!fs::is_directory(path)) {\n             // If the path specified doesn't exist, we return the deliberately\n             // invalid empty string."
      }
    ]
  },
  {
    "sha": "ec774c5b97a38d8bf500a35ad8f7e755d90a76df",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplYzc3NGM1Yjk3YTM4ZDhiZjUwMGEzNWFkOGY3ZTc1NWQ5MGE3NmRm",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-06-11T05:24:53Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-26T22:22:36Z"
      },
      "message": "ui: Use u8string and u8path to convert between path and QString",
      "tree": {
        "sha": "88b35803ed614c4dade72f31673e4bca394ca09b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/88b35803ed614c4dade72f31673e4bca394ca09b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ec774c5b97a38d8bf500a35ad8f7e755d90a76df",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ec774c5b97a38d8bf500a35ad8f7e755d90a76df",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ec774c5b97a38d8bf500a35ad8f7e755d90a76df",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ec774c5b97a38d8bf500a35ad8f7e755d90a76df/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9f7078eca63cd84682c94a998518297a662aaba1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9f7078eca63cd84682c94a998518297a662aaba1",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9f7078eca63cd84682c94a998518297a662aaba1"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 2,
      "deletions": 4
    },
    "files": [
      {
        "sha": "b3efc95c005b29579ac2942dc503050c76ab4cb0",
        "filename": "src/qt/guiutil.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 4,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ec774c5b97a38d8bf500a35ad8f7e755d90a76df/src/qt/guiutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ec774c5b97a38d8bf500a35ad8f7e755d90a76df/src/qt/guiutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.cpp?ref=ec774c5b97a38d8bf500a35ad8f7e755d90a76df",
        "patch": "@@ -61,8 +61,6 @@\n #include <QFontDatabase>\n #endif\n \n-static fs::detail::utf8_codecvt_facet utf8;\n-\n namespace GUIUtil {\n \n QString dateTimeStr(const QDateTime &date)\n@@ -780,12 +778,12 @@ void setClipboard(const QString& str)\n \n fs::path qstringToBoostPath(const QString &path)\n {\n-    return fs::path(path.toStdString(), utf8);\n+    return fs::u8path(path.toStdString());\n }\n \n QString boostPathToQString(const fs::path &path)\n {\n-    return QString::fromStdString(path.string(utf8));\n+    return QString::fromStdString(path.u8string());\n }\n \n QString formatDurationStr(int secs)"
      }
    ]
  },
  {
    "sha": "023691127fe2b8bd5416c2edf45ac9b30e9ea1d1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMjM2OTExMjdmZTJiOGJkNTQxNmMyZWRmNDVhYzliMzBlOWVhMWQx",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-25T06:22:47Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-26T22:22:36Z"
      },
      "message": "Make bdb compiled in Unicode mode",
      "tree": {
        "sha": "55927f1fb518bf7aa645d14e123d014328760934",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/55927f1fb518bf7aa645d14e123d014328760934"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/023691127fe2b8bd5416c2edf45ac9b30e9ea1d1",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/023691127fe2b8bd5416c2edf45ac9b30e9ea1d1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/023691127fe2b8bd5416c2edf45ac9b30e9ea1d1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/023691127fe2b8bd5416c2edf45ac9b30e9ea1d1/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ec774c5b97a38d8bf500a35ad8f7e755d90a76df",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ec774c5b97a38d8bf500a35ad8f7e755d90a76df",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ec774c5b97a38d8bf500a35ad8f7e755d90a76df"
      }
    ],
    "stats": {
      "total": 1,
      "additions": 1,
      "deletions": 0
    },
    "files": [
      {
        "sha": "3cd2e28858ed802f5c46b6df03832add39fe657a",
        "filename": "depends/packages/bdb.mk",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/023691127fe2b8bd5416c2edf45ac9b30e9ea1d1/depends/packages/bdb.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/023691127fe2b8bd5416c2edf45ac9b30e9ea1d1/depends/packages/bdb.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/bdb.mk?ref=023691127fe2b8bd5416c2edf45ac9b30e9ea1d1",
        "patch": "@@ -10,6 +10,7 @@ $(package)_config_opts=--disable-shared --enable-cxx --disable-replication\n $(package)_config_opts_mingw32=--enable-mingw\n $(package)_config_opts_linux=--with-pic\n $(package)_cxxflags=-std=c++11\n+$(package)_cppflags_mingw32=-DUNICODE -D_UNICODE\n endef\n \n define $(package)_preprocess_cmds"
      }
    ]
  },
  {
    "sha": "4a222f67873c62078bf355fd76b3fc2f956d2099",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0YTIyMmY2Nzg3M2M2MjA3OGJmMzU1ZmQ3NmIzZmMyZjk1NmQyMDk5",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-25T06:32:16Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-26T22:22:36Z"
      },
      "message": "Pass utf-8 encoded string to bdb api",
      "tree": {
        "sha": "e78445ea3b91c8562faf5d3a71c36ad9053b47b4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e78445ea3b91c8562faf5d3a71c36ad9053b47b4"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4a222f67873c62078bf355fd76b3fc2f956d2099",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4a222f67873c62078bf355fd76b3fc2f956d2099",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/4a222f67873c62078bf355fd76b3fc2f956d2099",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4a222f67873c62078bf355fd76b3fc2f956d2099/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "023691127fe2b8bd5416c2edf45ac9b30e9ea1d1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/023691127fe2b8bd5416c2edf45ac9b30e9ea1d1",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/023691127fe2b8bd5416c2edf45ac9b30e9ea1d1"
      }
    ],
    "stats": {
      "total": 30,
      "additions": 15,
      "deletions": 15
    },
    "files": [
      {
        "sha": "a01cc4b1ba3ffa96526e5e4ff108da9c4eed68b1",
        "filename": "src/wallet/db.cpp",
        "status": "modified",
        "additions": 15,
        "deletions": 15,
        "changes": 30,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4a222f67873c62078bf355fd76b3fc2f956d2099/src/wallet/db.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4a222f67873c62078bf355fd76b3fc2f956d2099/src/wallet/db.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/db.cpp?ref=4a222f67873c62078bf355fd76b3fc2f956d2099",
        "patch": "@@ -104,7 +104,7 @@ void BerkeleyEnvironment::Close()\n     if (ret != 0)\n         LogPrintf(\"BerkeleyEnvironment::Close: Error %d closing database environment: %s\\n\", ret, DbEnv::strerror(ret));\n     if (!fMockDb)\n-        DbEnv((u_int32_t)0).remove(fs::u8path(strPath).string().c_str(), 0);\n+        DbEnv((u_int32_t)0).remove(fs::u8path(strPath).u8string().c_str(), 0);\n }\n \n void BerkeleyEnvironment::Reset()\n@@ -147,7 +147,7 @@ bool BerkeleyEnvironment::Open(bool retry)\n     if (gArgs.GetBoolArg(\"-privdb\", DEFAULT_WALLET_PRIVDB))\n         nEnvFlags |= DB_PRIVATE;\n \n-    dbenv->set_lg_dir(pathLogDir.string().c_str());\n+    dbenv->set_lg_dir(pathLogDir.u8string().c_str());\n     dbenv->set_cachesize(0, 0x100000, 1); // 1 MiB should be enough for just the wallet\n     dbenv->set_lg_bsize(0x10000);\n     dbenv->set_lg_max(1048576);\n@@ -157,7 +157,7 @@ bool BerkeleyEnvironment::Open(bool retry)\n     dbenv->set_flags(DB_AUTO_COMMIT, 1);\n     dbenv->set_flags(DB_TXN_WRITE_NOSYNC, 1);\n     dbenv->log_set_config(DB_LOG_AUTO_REMOVE, 1);\n-    int ret = dbenv->open(fs::u8path(strPath).string().c_str(),\n+    int ret = dbenv->open(fs::u8path(strPath).u8string().c_str(),\n                          DB_CREATE |\n                              DB_INIT_LOCK |\n                              DB_INIT_LOG |\n@@ -236,7 +236,7 @@ BerkeleyEnvironment::VerifyResult BerkeleyEnvironment::Verify(const std::string&\n     assert(mapFileUseCount.count(strFile) == 0);\n \n     Db db(dbenv.get(), 0);\n-    int result = db.verify(fs::u8path(strFile).string().c_str(), nullptr, nullptr, 0);\n+    int result = db.verify(fs::u8path(strFile).u8string().c_str(), nullptr, nullptr, 0);\n     if (result == 0)\n         return VerifyResult::VERIFY_OK;\n     else if (recoverFunc == nullptr)\n@@ -262,8 +262,8 @@ bool BerkeleyBatch::Recover(const fs::path& file_path, void *callbackDataIn, boo\n     int64_t now = GetTime();\n     newFilename = strprintf(\"%s.%d.bak\", filename, now);\n \n-    int result = env->dbenv->dbrename(nullptr, fs::u8path(filename).string().c_str(), nullptr,\n-                                       fs::u8path(newFilename).string().c_str(), DB_AUTO_COMMIT);\n+    int result = env->dbenv->dbrename(nullptr, fs::u8path(filename).u8string().c_str(), nullptr,\n+                                       fs::u8path(newFilename).u8string().c_str(), DB_AUTO_COMMIT);\n     if (result == 0)\n         LogPrintf(\"Renamed %s to %s\\n\", filename, newFilename);\n     else\n@@ -283,7 +283,7 @@ bool BerkeleyBatch::Recover(const fs::path& file_path, void *callbackDataIn, boo\n \n     std::unique_ptr<Db> pdbCopy = MakeUnique<Db>(env->dbenv.get(), 0);\n     int ret = pdbCopy->open(nullptr,               // Txn pointer\n-                            fs::u8path(filename).string().c_str(),   // Filename\n+                            fs::u8path(filename).u8string().c_str(),   // Filename\n                             \"main\",             // Logical db name\n                             DB_BTREE,           // Database type\n                             DB_CREATE,          // Flags\n@@ -385,7 +385,7 @@ bool BerkeleyEnvironment::Salvage(const std::string& strFile, bool fAggressive,\n     std::stringstream strDump;\n \n     Db db(dbenv.get(), 0);\n-    int result = db.verify(fs::u8path(strFile).string().c_str(), nullptr, &strDump, flags);\n+    int result = db.verify(fs::u8path(strFile).u8string().c_str(), nullptr, &strDump, flags);\n     if (result == DB_VERIFY_BAD) {\n         LogPrintf(\"BerkeleyEnvironment::Salvage: Database salvage found errors, all data may not be recoverable.\\n\");\n         if (!fAggressive) {\n@@ -439,7 +439,7 @@ void BerkeleyEnvironment::CheckpointLSN(const std::string& strFile)\n     dbenv->txn_checkpoint(0, 0, 0);\n     if (fMockDb)\n         return;\n-    dbenv->lsn_reset(fs::u8path(strFile).string().c_str(), 0);\n+    dbenv->lsn_reset(fs::u8path(strFile).u8string().c_str(), 0);\n }\n \n \n@@ -478,8 +478,8 @@ BerkeleyBatch::BerkeleyBatch(BerkeleyDatabase& database, const char* pszMode, bo\n             }\n \n             ret = pdb_temp->open(nullptr,                             // Txn pointer\n-                            fMockDb ? nullptr : fs::u8path(strFilename).string().c_str(),  // Filename\n-                            fMockDb ? fs::u8path(strFilename).string().c_str() : \"main\",   // Logical db name\n+                            fMockDb ? nullptr : fs::u8path(strFilename).u8string().c_str(),  // Filename\n+                            fMockDb ? fs::u8path(strFilename).u8string().c_str() : \"main\",   // Logical db name\n                             DB_BTREE,                                 // Database type\n                             nFlags,                                   // Flags\n                             0);\n@@ -596,7 +596,7 @@ bool BerkeleyBatch::Rewrite(BerkeleyDatabase& database, const char* pszSkip)\n                     std::unique_ptr<Db> pdbCopy = MakeUnique<Db>(env->dbenv.get(), 0);\n \n                     int ret = pdbCopy->open(nullptr,               // Txn pointer\n-                                            fs::u8path(strFileRes).string().c_str(), // Filename\n+                                            fs::u8path(strFileRes).u8string().c_str(), // Filename\n                                             \"main\",             // Logical db name\n                                             DB_BTREE,           // Database type\n                                             DB_CREATE,          // Flags\n@@ -645,10 +645,10 @@ bool BerkeleyBatch::Rewrite(BerkeleyDatabase& database, const char* pszSkip)\n                 }\n                 if (fSuccess) {\n                     Db dbA(env->dbenv.get(), 0);\n-                    if (dbA.remove(fs::u8path(strFile).string().c_str(), nullptr, 0))\n+                    if (dbA.remove(fs::u8path(strFile).u8string().c_str(), nullptr, 0))\n                         fSuccess = false;\n                     Db dbB(env->dbenv.get(), 0);\n-                    if (dbB.rename(fs::u8path(strFileRes).string().c_str(), nullptr, fs::u8path(strFile).string().c_str(), 0))\n+                    if (dbB.rename(fs::u8path(strFileRes).u8string().c_str(), nullptr, fs::u8path(strFile).u8string().c_str(), 0))\n                         fSuccess = false;\n                 }\n                 if (!fSuccess)\n@@ -682,7 +682,7 @@ void BerkeleyEnvironment::Flush(bool fShutdown)\n                 dbenv->txn_checkpoint(0, 0, 0);\n                 LogPrint(BCLog::DB, \"BerkeleyEnvironment::Flush: %s detach\\n\", strFile);\n                 if (!fMockDb)\n-                    dbenv->lsn_reset(fs::u8path(strFile).string().c_str(), 0);\n+                    dbenv->lsn_reset(fs::u8path(strFile).u8string().c_str(), 0);\n                 LogPrint(BCLog::DB, \"BerkeleyEnvironment::Flush: %s closed\\n\", strFile);\n                 mapFileUseCount.erase(mi++);\n             } else"
      }
    ]
  },
  {
    "sha": "c3e0340da8fd0c96e91a64cf5789faf488b124f6",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjM2UwMzQwZGE4ZmQwYzk2ZTkxYTY0Y2Y1Nzg5ZmFmNDg4YjEyNGY2",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-25T09:33:22Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-31T00:24:19Z"
      },
      "message": "Make FileLock support utf8 for Windows",
      "tree": {
        "sha": "e2b5c941757b33fe2a603ddc06953b9bcc8a3df3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e2b5c941757b33fe2a603ddc06953b9bcc8a3df3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c3e0340da8fd0c96e91a64cf5789faf488b124f6",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c3e0340da8fd0c96e91a64cf5789faf488b124f6",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c3e0340da8fd0c96e91a64cf5789faf488b124f6",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c3e0340da8fd0c96e91a64cf5789faf488b124f6/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4a222f67873c62078bf355fd76b3fc2f956d2099",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4a222f67873c62078bf355fd76b3fc2f956d2099",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4a222f67873c62078bf355fd76b3fc2f956d2099"
      }
    ],
    "stats": {
      "total": 58,
      "additions": 57,
      "deletions": 1
    },
    "files": [
      {
        "sha": "895d872192a5f1165bdfde0ef3f5b319e34b5c87",
        "filename": "src/test/util_tests.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c3e0340da8fd0c96e91a64cf5789faf488b124f6/src/test/util_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c3e0340da8fd0c96e91a64cf5789faf488b124f6/src/test/util_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/util_tests.cpp?ref=c3e0340da8fd0c96e91a64cf5789faf488b124f6",
        "patch": "@@ -1225,4 +1225,18 @@ BOOST_AUTO_TEST_CASE(test_DirIsWritable)\n     fs::remove(tmpdirname);\n }\n \n+#ifdef WIN32\n+BOOST_AUTO_TEST_CASE(test_WinFileLock)\n+{\n+    fs::path filename = SetDataDir(\"test_WinFileLock\");\n+    filename = filename / \".testlock\";\n+\n+    WinFileLock lock1(filename);\n+    BOOST_CHECK(lock1.try_lock());\n+\n+    WinFileLock lock2(filename);\n+    BOOST_CHECK(!lock2.try_lock());\n+}\n+#endif\n+\n BOOST_AUTO_TEST_SUITE_END()"
      },
      {
        "sha": "2493c9aefab8e19cafdd356926ce4024e9cc5338",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 32,
        "deletions": 1,
        "changes": 33,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c3e0340da8fd0c96e91a64cf5789faf488b124f6/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c3e0340da8fd0c96e91a64cf5789faf488b124f6/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=c3e0340da8fd0c96e91a64cf5789faf488b124f6",
        "patch": "@@ -138,12 +138,40 @@ class CInit\n }\n instance_of_cinit;\n \n+#ifdef WIN32\n+WinFileLock::WinFileLock(const fs::path& file)\n+{\n+    hLockFile = CreateFileW(file.wstring().c_str(), GENERIC_READ | GENERIC_WRITE, 0, nullptr, OPEN_ALWAYS, FILE_ATTRIBUTE_NORMAL, nullptr);\n+}\n+\n+WinFileLock::~WinFileLock()\n+{\n+    if (hLockFile != INVALID_HANDLE_VALUE) {\n+        UnlockFile(hLockFile, 0, 0, 0, 0);\n+        CloseHandle(hLockFile);\n+    }\n+}\n+\n+WinFileLock::try_lock()\n+{\n+    if (hLockFile == INVALID_HANDLE_VALUE) {\n+        return false;\n+    }\n+    _OVERLAPPED overlapped = {0};\n+    return LockFileEx(hLockFile, LOCKFILE_EXCLUSIVE_LOCK | LOCKFILE_FAIL_IMMEDIATELY, 0, 0, 0, &overlapped);\n+}\n+#endif\n+\n /** A map that contains all the currently held directory locks. After\n  * successful locking, these will be held here until the global destructor\n  * cleans them up and thus automatically unlocks them, or ReleaseDirectoryLocks\n  * is called.\n  */\n+#ifndef WIN32\n static std::map<std::string, std::unique_ptr<boost::interprocess::file_lock>> dir_locks;\n+#else\n+static std::map<std::string, std::unique_ptr<WinFileLock>> dir_locks;\n+#endif\n /** Mutex to protect dir_locks. */\n static std::mutex cs_dir_locks;\n \n@@ -160,9 +188,12 @@ bool LockDirectory(const fs::path& directory, const std::string lockfile_name, b\n     // Create empty lock file if it doesn't exist.\n     FILE* file = fsbridge::fopen(pathLockFile, \"a\");\n     if (file) fclose(file);\n-\n     try {\n+#ifndef WIN32\n         auto lock = MakeUnique<boost::interprocess::file_lock>(pathLockFile.string().c_str());\n+#else\n+        auto lock = MakeUnique<WinFileLock>(pathLockFile);\n+#endif\n         if (!lock->try_lock()) {\n             return false;\n         }"
      },
      {
        "sha": "f745d02d0b82e783b72ab122259d676c194ad29a",
        "filename": "src/util.h",
        "status": "modified",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c3e0340da8fd0c96e91a64cf5789faf488b124f6/src/util.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c3e0340da8fd0c96e91a64cf5789faf488b124f6/src/util.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.h?ref=c3e0340da8fd0c96e91a64cf5789faf488b124f6",
        "patch": "@@ -144,6 +144,17 @@ enum class OptionsCategory {\n     HIDDEN // Always the last option to avoid printing these in the help\n };\n \n+#ifdef WIN32\n+class WinFileLock {\n+public:\n+    WinFileLock(const fs::path& file);\n+    ~WinFileLock();\n+    try_lock();\n+private:\n+    HANDLE hLockFile;\n+};\n+#endif\n+\n class ArgsManager\n {\n protected:"
      }
    ]
  },
  {
    "sha": "2d867547435fd81c851017fc8684a937a7a530b7",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyZDg2NzU0NzQzNWZkODFjODUxMDE3ZmM4Njg0YTkzN2E3YTUzMGI3",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-26T13:39:13Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-31T00:24:24Z"
      },
      "message": "Use _wfopen and _wreopen on Windows",
      "tree": {
        "sha": "3a4aa990f7003f5df652d4133265bb927dfcf06d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3a4aa990f7003f5df652d4133265bb927dfcf06d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2d867547435fd81c851017fc8684a937a7a530b7",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2d867547435fd81c851017fc8684a937a7a530b7",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2d867547435fd81c851017fc8684a937a7a530b7",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2d867547435fd81c851017fc8684a937a7a530b7/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c3e0340da8fd0c96e91a64cf5789faf488b124f6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c3e0340da8fd0c96e91a64cf5789faf488b124f6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c3e0340da8fd0c96e91a64cf5789faf488b124f6"
      }
    ],
    "stats": {
      "total": 20,
      "additions": 19,
      "deletions": 1
    },
    "files": [
      {
        "sha": "fd2a212aae11c615bb5fe11794edbcfb09ddcb68",
        "filename": "src/fs.cpp",
        "status": "modified",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2d867547435fd81c851017fc8684a937a7a530b7/src/fs.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2d867547435fd81c851017fc8684a937a7a530b7/src/fs.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/fs.cpp?ref=2d867547435fd81c851017fc8684a937a7a530b7",
        "patch": "@@ -1,15 +1,24 @@\n #include <fs.h>\n+#include <utilstrencodings.h>\n \n namespace fsbridge {\n \n FILE *fopen(const fs::path& p, const char *mode)\n {\n+#ifndef WIN32\n     return ::fopen(p.string().c_str(), mode);\n+#else\n+    return ::_wfopen(p.wstring().c_str(), Utf8ToWide(mode).c_str());\n+#endif\n }\n \n FILE *freopen(const fs::path& p, const char *mode, FILE *stream)\n {\n+#ifndef WIN32\n     return ::freopen(p.string().c_str(), mode, stream);\n+#else\n+    return ::_wfreopen(p.wstring().c_str(), Utf8ToWide(mode).c_str(), stream);\n+#endif\n }\n \n } // fsbridge"
      },
      {
        "sha": "15802bea0c8defacec6a29a756890162ef53653a",
        "filename": "src/utilstrencodings.cpp",
        "status": "modified",
        "additions": 9,
        "deletions": 1,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2d867547435fd81c851017fc8684a937a7a530b7/src/utilstrencodings.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2d867547435fd81c851017fc8684a937a7a530b7/src/utilstrencodings.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/utilstrencodings.cpp?ref=2d867547435fd81c851017fc8684a937a7a530b7",
        "patch": "@@ -557,4 +557,12 @@ std::string WideToUtf8(const std::wstring& wide_string)\n     assert(size == utf8_string.size());\n     return utf8_string;\n }\n-#endif\n\\ No newline at end of file\n+std::wstring Utf8ToWide(const std::string& utf8_string)\n+{\n+    size_t size = MultiByteToWideChar(CP_UTF8, 0, &*utf8_string.begin(), utf8_string.size(), nullptr, 0);\n+    std::wstring wide_string(size, 0);\n+    size = MultiByteToWideChar(CP_UTF8, 0, &*utf8_string.begin(), utf8_string.size(), &*wide_string.begin(), wide_string.size());\n+    assert(size == wide_string.size());\n+    return wide_string;\n+}\n+#endif"
      },
      {
        "sha": "772db78a95762d13a7ad69d92e00352aac7e07b7",
        "filename": "src/utilstrencodings.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2d867547435fd81c851017fc8684a937a7a530b7/src/utilstrencodings.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2d867547435fd81c851017fc8684a937a7a530b7/src/utilstrencodings.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/utilstrencodings.h?ref=2d867547435fd81c851017fc8684a937a7a530b7",
        "patch": "@@ -185,6 +185,7 @@ bool ConvertBits(const O& outfn, I it, I end) {\n \n #ifdef WIN32\n std::string WideToUtf8(const std::wstring& wide_string);\n+std::wstring Utf8ToWide(const std::string& utf8_string);\n #endif\n \n #endif // BITCOIN_UTILSTRENCODINGS_H"
      }
    ]
  },
  {
    "sha": "087792e3c02da6d643e611041d554800aed01b0a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowODc3OTJlM2MwMmRhNmQ2NDNlNjExMDQxZDU1NDgwMGFlZDAxYjBh",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-27T16:29:33Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-31T00:24:24Z"
      },
      "message": "Make leveldb works with utf8",
      "tree": {
        "sha": "41dee5d3e8592bd7ec7aa144f2f4b51586bacb3c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/41dee5d3e8592bd7ec7aa144f2f4b51586bacb3c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/087792e3c02da6d643e611041d554800aed01b0a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/087792e3c02da6d643e611041d554800aed01b0a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/087792e3c02da6d643e611041d554800aed01b0a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/087792e3c02da6d643e611041d554800aed01b0a/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2d867547435fd81c851017fc8684a937a7a530b7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2d867547435fd81c851017fc8684a937a7a530b7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2d867547435fd81c851017fc8684a937a7a530b7"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 3,
      "deletions": 3
    },
    "files": [
      {
        "sha": "64e457b867743f2d1e30ebb8abaf9b1678d82f7e",
        "filename": "src/Makefile.leveldb.include",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/087792e3c02da6d643e611041d554800aed01b0a/src/Makefile.leveldb.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/087792e3c02da6d643e611041d554800aed01b0a/src/Makefile.leveldb.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.leveldb.include?ref=087792e3c02da6d643e611041d554800aed01b0a",
        "patch": "@@ -24,7 +24,7 @@ LEVELDB_CPPFLAGS_INT += -DLEVELDB_ATOMIC_PRESENT\n LEVELDB_CPPFLAGS_INT += -D__STDC_LIMIT_MACROS\n \n if TARGET_WINDOWS\n-LEVELDB_CPPFLAGS_INT += -DLEVELDB_PLATFORM_WINDOWS -DWINVER=0x0500 -D__USE_MINGW_ANSI_STDIO=1\n+LEVELDB_CPPFLAGS_INT += -DLEVELDB_PLATFORM_WINDOWS -DWINVER=0x0500 -D__USE_MINGW_ANSI_STDIO=1 -DUNICODE\n else\n LEVELDB_CPPFLAGS_INT += -DLEVELDB_PLATFORM_POSIX\n endif"
      },
      {
        "sha": "c9a9045f07d76ff8204b16c465080e8a998cb7f7",
        "filename": "src/dbwrapper.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/087792e3c02da6d643e611041d554800aed01b0a/src/dbwrapper.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/087792e3c02da6d643e611041d554800aed01b0a/src/dbwrapper.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/dbwrapper.cpp?ref=087792e3c02da6d643e611041d554800aed01b0a",
        "patch": "@@ -130,13 +130,13 @@ CDBWrapper::CDBWrapper(const fs::path& path, size_t nCacheSize, bool fMemory, bo\n     } else {\n         if (fWipe) {\n             LogPrintf(\"Wiping LevelDB in %s\\n\", path.u8string());\n-            leveldb::Status result = leveldb::DestroyDB(path.string(), options);\n+            leveldb::Status result = leveldb::DestroyDB(path.u8string(), options);\n             dbwrapper_private::HandleError(result);\n         }\n         TryCreateDirectories(path);\n         LogPrintf(\"Opening LevelDB in %s\\n\", path.u8string());\n     }\n-    leveldb::Status status = leveldb::DB::Open(options, path.string(), &pdb);\n+    leveldb::Status status = leveldb::DB::Open(options, path.u8string(), &pdb);\n     dbwrapper_private::HandleError(status);\n     LogPrintf(\"Opened LevelDB successfully\\n\");\n "
      }
    ]
  },
  {
    "sha": "4723aed698f08b233705221695ecc96bb5972c35",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0NzIzYWVkNjk4ZjA4YjIzMzcwNTIyMTY5NWVjYzk2YmI1OTcyYzM1",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-27T16:35:52Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-31T00:24:24Z"
      },
      "message": "Use Unicode version of MoveFileEx",
      "tree": {
        "sha": "04725cb70e5d628749f9b37840fe08d0b460c626",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/04725cb70e5d628749f9b37840fe08d0b460c626"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4723aed698f08b233705221695ecc96bb5972c35",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4723aed698f08b233705221695ecc96bb5972c35",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/4723aed698f08b233705221695ecc96bb5972c35",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4723aed698f08b233705221695ecc96bb5972c35/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "087792e3c02da6d643e611041d554800aed01b0a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/087792e3c02da6d643e611041d554800aed01b0a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/087792e3c02da6d643e611041d554800aed01b0a"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "fb0fae1da601f90b5d3ece99f7a210beb30beac2",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4723aed698f08b233705221695ecc96bb5972c35/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4723aed698f08b233705221695ecc96bb5972c35/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=4723aed698f08b233705221695ecc96bb5972c35",
        "patch": "@@ -1018,7 +1018,7 @@ void CreatePidFile(const fs::path &path, pid_t pid)\n bool RenameOver(fs::path src, fs::path dest)\n {\n #ifdef WIN32\n-    return MoveFileExA(src.string().c_str(), dest.string().c_str(),\n+    return MoveFileExW(src.wstring().c_str(), dest.wstring().c_str(),\n                        MOVEFILE_REPLACE_EXISTING) != 0;\n #else\n     int rc = std::rename(src.u8string().c_str(), dest.u8string().c_str());"
      }
    ]
  },
  {
    "sha": "014aa3e61a75d1567a707cb7fd999925331ac778",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMTRhYTNlNjFhNzVkMTU2N2E3MDdjYjdmZDk5OTkyNTMzMWFjNzc4",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-28T12:46:01Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-31T00:24:24Z"
      },
      "message": "Add fsbridge::i/ofstream class",
      "tree": {
        "sha": "0aa6de6e074793471b5f3a4d4e041e6383497d09",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0aa6de6e074793471b5f3a4d4e041e6383497d09"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/014aa3e61a75d1567a707cb7fd999925331ac778",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/014aa3e61a75d1567a707cb7fd999925331ac778",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/014aa3e61a75d1567a707cb7fd999925331ac778",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/014aa3e61a75d1567a707cb7fd999925331ac778/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4723aed698f08b233705221695ecc96bb5972c35",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4723aed698f08b233705221695ecc96bb5972c35",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4723aed698f08b233705221695ecc96bb5972c35"
      }
    ],
    "stats": {
      "total": 149,
      "additions": 149,
      "deletions": 0
    },
    "files": [
      {
        "sha": "7457e8076516dcea0b1ebccef16702127561accf",
        "filename": "src/fs.cpp",
        "status": "modified",
        "additions": 114,
        "deletions": 0,
        "changes": 114,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/014aa3e61a75d1567a707cb7fd999925331ac778/src/fs.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/014aa3e61a75d1567a707cb7fd999925331ac778/src/fs.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/fs.cpp?ref=014aa3e61a75d1567a707cb7fd999925331ac778",
        "patch": "@@ -21,4 +21,118 @@ FILE *freopen(const fs::path& p, const char *mode, FILE *stream)\n #endif\n }\n \n+#ifdef WIN32\n+static std::string openmodeToStr(std::ios_base::openmode mode)\n+{\n+    switch (mode & ~std::ios_base::ate) {\n+    case std::ios_base::out:\n+    case std::ios_base::out | std::ios_base::trunc:\n+        return \"w\";\n+    case std::ios_base::out | std::ios_base::app:\n+    case std::ios_base::app:\n+        return \"a\";\n+    case std::ios_base::in:\n+        return \"r\";\n+    case std::ios_base::in | std::ios_base::out:\n+        return \"r+\";\n+    case std::ios_base::in | std::ios_base::out | std::ios_base::trunc:\n+        return \"w+\";\n+    case std::ios_base::in | std::ios_base::out | std::ios_base::app:\n+    case std::ios_base::in | std::ios_base::app:\n+        return \"a+\";\n+    case std::ios_base::out | std::ios_base::binary:\n+    case std::ios_base::out | std::ios_base::trunc | std::ios_base::binary:\n+        return \"wb\";\n+    case std::ios_base::out | std::ios_base::app | std::ios_base::binary:\n+    case std::ios_base::app | std::ios_base::binary:\n+        return \"ab\";\n+    case std::ios_base::in | std::ios_base::binary:\n+        return \"rb\";\n+    case std::ios_base::in | std::ios_base::out | std::ios_base::binary:\n+        return \"r+b\";\n+    case std::ios_base::in | std::ios_base::out | std::ios_base::trunc | std::ios_base::binary:\n+        return \"w+b\";\n+    case std::ios_base::in | std::ios_base::out | std::ios_base::app | std::ios_base::binary:\n+    case std::ios_base::in | std::ios_base::app | std::ios_base::binary:\n+        return \"a+b\";\n+    default:\n+        return nullptr;\n+    }\n+}\n+\n+ifstream::ifstream(const fs::path& p, std::ios_base::openmode mode) : std::istream(nullptr)\n+{\n+    open(p, mode);\n+}\n+\n+ifstream::~ifstream()\n+{\n+    close();\n+}\n+\n+void ifstream::open(const fs::path& p, std::ios_base::openmode mode)\n+{\n+    close();\n+    std::string strmode = openmodeToStr(mode);\n+    file = fopen(p, strmode.c_str());\n+    if (file == nullptr) return;\n+    filebuf = std::move(__gnu_cxx::stdio_filebuf<char>(file, mode));\n+    rdbuf(&filebuf);\n+    if (mode & std::ios_base::ate) {\n+        seekg(0, std::ios_base::end);\n+    }\n+}\n+\n+void ifstream::close()\n+{\n+    if (file != nullptr) {\n+        filebuf.close();\n+        fclose(file);\n+    }\n+    file = nullptr;\n+}\n+\n+bool ifstream::is_open()\n+{\n+    return filebuf.is_open();\n+}\n+\n+ofstream::ofstream(const fs::path& p, std::ios_base::openmode mode) : std::ostream(nullptr)\n+{\n+    open(p, mode);\n+}\n+\n+ofstream::~ofstream()\n+{\n+    close();\n+}\n+\n+void ofstream::open(const fs::path& p, std::ios_base::openmode mode)\n+{\n+    close();\n+    std::string strmode = openmodeToStr(mode);\n+    file = fopen(p, strmode.c_str());\n+    if (file == nullptr) return;\n+    filebuf = std::move(__gnu_cxx::stdio_filebuf<char>(file, mode));\n+    rdbuf(&filebuf);\n+    if (mode & std::ios_base::ate) {\n+        seekp(0, std::ios_base::end);\n+    }\n+}\n+\n+void ofstream::close()\n+{\n+    if (file != nullptr) {\n+        filebuf.close();\n+        fclose(file);\n+    }\n+    file = nullptr;\n+}\n+\n+bool ofstream::is_open()\n+{\n+    return filebuf.is_open();\n+}\n+#endif\n+\n } // fsbridge"
      },
      {
        "sha": "ac72450ec94c7bb1d12d11ee6703870503dc5556",
        "filename": "src/fs.h",
        "status": "modified",
        "additions": 35,
        "deletions": 0,
        "changes": 35,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/014aa3e61a75d1567a707cb7fd999925331ac778/src/fs.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/014aa3e61a75d1567a707cb7fd999925331ac778/src/fs.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/fs.h?ref=014aa3e61a75d1567a707cb7fd999925331ac778",
        "patch": "@@ -12,13 +12,48 @@\n #include <boost/filesystem/fstream.hpp>\n #include <boost/filesystem/detail/utf8_codecvt_facet.hpp>\n \n+#ifdef WIN32\n+#include <ext/stdio_filebuf.h>\n+#endif\n+\n /** Filesystem operations and types */\n namespace fs = boost::filesystem;\n \n /** Bridge operations to C stdio */\n namespace fsbridge {\n     FILE *fopen(const fs::path& p, const char *mode);\n     FILE *freopen(const fs::path& p, const char *mode, FILE *stream);\n+#ifdef WIN32\n+    class ifstream : public std::istream\n+    {\n+    public:\n+        ifstream(const fs::path& p, std::ios_base::openmode mode = std::ios_base::in);\n+        ~ifstream();\n+        void open(const fs::path& p, std::ios_base::openmode mode = std::ios_base::in);\n+        void close();\n+        bool is_open();\n+\n+    private:\n+        __gnu_cxx::stdio_filebuf<char> filebuf;\n+        FILE* file = nullptr;\n+    };\n+    class ofstream : public std::ostream\n+    {\n+    public:\n+        ofstream(const fs::path& p, std::ios_base::openmode mode = std::ios_base::out);\n+        ~ofstream();\n+        void open(const fs::path& p, std::ios_base::openmode mode = std::ios_base::out);\n+        void close();\n+        bool is_open();\n+\n+    private:\n+        __gnu_cxx::stdio_filebuf<char> filebuf;\n+        FILE* file = nullptr;\n+    };\n+#else\n+    typedef fs::ifstream ifstream;\n+    typedef fs::ofstream ofstream;\n+#endif\n };\n \n #endif // BITCOIN_FS_H"
      }
    ]
  },
  {
    "sha": "2fa7d421d1fbd37550b0c80bc92e913d509ea7d3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyZmE3ZDQyMWQxZmJkMzc1NTBiMGM4MGJjOTJlOTEzZDUwOWVhN2Qz",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-28T12:56:11Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-31T00:24:24Z"
      },
      "message": "Change fs/std::i/ofstream to fsbridge::i/ofstream",
      "tree": {
        "sha": "0186ce03fee061293a26f3cbcbb96535155ee940",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0186ce03fee061293a26f3cbcbb96535155ee940"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2fa7d421d1fbd37550b0c80bc92e913d509ea7d3",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2fa7d421d1fbd37550b0c80bc92e913d509ea7d3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2fa7d421d1fbd37550b0c80bc92e913d509ea7d3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2fa7d421d1fbd37550b0c80bc92e913d509ea7d3/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "014aa3e61a75d1567a707cb7fd999925331ac778",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/014aa3e61a75d1567a707cb7fd999925331ac778",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/014aa3e61a75d1567a707cb7fd999925331ac778"
      }
    ],
    "stats": {
      "total": 24,
      "additions": 8,
      "deletions": 16
    },
    "files": [
      {
        "sha": "98771b4b59ad40bb256747c68cd36ebc15193369",
        "filename": "src/qt/guiutil.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2fa7d421d1fbd37550b0c80bc92e913d509ea7d3/src/qt/guiutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2fa7d421d1fbd37550b0c80bc92e913d509ea7d3/src/qt/guiutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.cpp?ref=2fa7d421d1fbd37550b0c80bc92e913d509ea7d3",
        "patch": "@@ -627,7 +627,7 @@ fs::path static GetAutostartFilePath()\n \n bool GetStartOnSystemStartup()\n {\n-    fs::ifstream optionFile(GetAutostartFilePath());\n+    fsbridge::ifstream optionFile(GetAutostartFilePath());\n     if (!optionFile.good())\n         return false;\n     // Scan through file for \"Hidden=true\":\n@@ -658,7 +658,7 @@ bool SetStartOnSystemStartup(bool fAutoStart)\n \n         fs::create_directories(GetAutostartDir());\n \n-        fs::ofstream optionFile(GetAutostartFilePath(), std::ios_base::out|std::ios_base::trunc);\n+        fsbridge::ofstream optionFile(GetAutostartFilePath(), std::ios_base::out|std::ios_base::trunc);\n         if (!optionFile.good())\n             return false;\n         std::string chain = gArgs.GetChainName();"
      },
      {
        "sha": "da46be7ab98fe4f81b0382d3cfb609006b022c90",
        "filename": "src/rpc/protocol.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 6,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2fa7d421d1fbd37550b0c80bc92e913d509ea7d3/src/rpc/protocol.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2fa7d421d1fbd37550b0c80bc92e913d509ea7d3/src/rpc/protocol.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/protocol.cpp?ref=2fa7d421d1fbd37550b0c80bc92e913d509ea7d3",
        "patch": "@@ -12,8 +12,6 @@\n #include <utiltime.h>\n #include <version.h>\n \n-#include <fstream>\n-\n /**\n  * JSON-RPC protocol.  Bitcoin speaks version 1.0 for maximum compatibility,\n  * but uses JSON-RPC 1.1/2.0 standards for parts of the 1.0 standard that were\n@@ -85,9 +83,8 @@ bool GenerateAuthCookie(std::string *cookie_out)\n     /** the umask determines what permissions are used to create this file -\n      * these are set to 077 in init.cpp unless overridden with -sysperms.\n      */\n-    std::ofstream file;\n     fs::path filepath_tmp = GetAuthCookieFile(true);\n-    file.open(filepath_tmp.string().c_str());\n+    fsbridge::ofstream file(filepath_tmp);\n     if (!file.is_open()) {\n         LogPrintf(\"Unable to open cookie authentication file %s for writing\\n\", filepath_tmp.u8string());\n         return false;\n@@ -109,10 +106,9 @@ bool GenerateAuthCookie(std::string *cookie_out)\n \n bool GetAuthCookie(std::string *cookie_out)\n {\n-    std::ifstream file;\n     std::string cookie;\n     fs::path filepath = GetAuthCookieFile();\n-    file.open(filepath.u8string().c_str());\n+    fsbridge::ifstream file(filepath);\n     if (!file.is_open())\n         return false;\n     std::getline(file, cookie);"
      },
      {
        "sha": "7fce1b3351615540625e066f33eba5f7360c048c",
        "filename": "src/test/script_tests.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2fa7d421d1fbd37550b0c80bc92e913d509ea7d3/src/test/script_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2fa7d421d1fbd37550b0c80bc92e913d509ea7d3/src/test/script_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/script_tests.cpp?ref=2fa7d421d1fbd37550b0c80bc92e913d509ea7d3",
        "patch": "@@ -19,7 +19,6 @@\n #include <script/bitcoinconsensus.h>\n #endif\n \n-#include <fstream>\n #include <stdint.h>\n #include <string>\n #include <vector>"
      },
      {
        "sha": "7b683f7af76cadde0928c5906a19841689ee1808",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2fa7d421d1fbd37550b0c80bc92e913d509ea7d3/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2fa7d421d1fbd37550b0c80bc92e913d509ea7d3/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=2fa7d421d1fbd37550b0c80bc92e913d509ea7d3",
        "patch": "@@ -917,7 +917,7 @@ bool ArgsManager::ReadConfigFiles(std::string& error, bool ignore_invalid_keys)\n     }\n \n     const std::string confPath = GetArg(\"-conf\", BITCOIN_CONF_FILENAME);\n-    fs::ifstream stream(GetConfigFile(confPath));\n+    fsbridge::ifstream stream(GetConfigFile(confPath));\n \n     // ok to not have a config file\n     if (stream.good()) {\n@@ -945,7 +945,7 @@ bool ArgsManager::ReadConfigFiles(std::string& error, bool ignore_invalid_keys)\n             }\n \n             for (const std::string& to_include : includeconf) {\n-                fs::ifstream include_config(GetConfigFile(to_include));\n+                fsbridge::ifstream include_config(GetConfigFile(to_include));\n                 if (include_config.good()) {\n                     if (!ReadConfigStream(include_config, error, ignore_invalid_keys)) {\n                         return false;"
      },
      {
        "sha": "b84d06acbc8a3eb2673c2c1163d95317f9814b26",
        "filename": "src/wallet/rpcdump.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 5,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2fa7d421d1fbd37550b0c80bc92e913d509ea7d3/src/wallet/rpcdump.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2fa7d421d1fbd37550b0c80bc92e913d509ea7d3/src/wallet/rpcdump.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcdump.cpp?ref=2fa7d421d1fbd37550b0c80bc92e913d509ea7d3",
        "patch": "@@ -17,7 +17,6 @@\n \n #include <wallet/rpcwallet.h>\n \n-#include <fstream>\n #include <stdint.h>\n \n #include <boost/algorithm/string.hpp>\n@@ -548,8 +547,7 @@ UniValue importwallet(const JSONRPCRequest& request)\n \n         EnsureWalletIsUnlocked(pwallet);\n \n-        std::ifstream file;\n-        file.open(request.params[0].get_str().c_str(), std::ios::in | std::ios::ate);\n+        fsbridge::ifstream file(fs::u8path(request.params[0].get_str()), std::ios::in | std::ios::ate);\n         if (!file.is_open()) {\n             throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open wallet dump file\");\n         }\n@@ -731,8 +729,7 @@ UniValue dumpwallet(const JSONRPCRequest& request)\n         throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n     }\n \n-    std::ofstream file;\n-    file.open(filepath.string().c_str());\n+    fsbridge::ofstream file(filepath);\n     if (!file.is_open())\n         throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open wallet dump file\");\n "
      }
    ]
  }
]