petertodd,2014-02-11T21:28:02Z,"Strong ACK. From the user's point of view the attack can make coins vanish; much better to just temporarily annoy people until a better fix is implemented.\n\nIf the getbalance change is simple, I'd say go for it too.\n",https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34809022,34809022,
sipa,2014-02-11T21:34:50Z,"Not couning unconfirmed change in getbalance will result in users complaining ""I had 15000 BTC in my wallet, I sent 0.001 to a friend, and now all of it is GONE!!!"".\n",https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34810058,34810058,
ghost,2014-02-11T21:39:04Z,It's worth documenting it somewhere though.\n,https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34810522,34810522,
BitcoinPullTester,2014-02-11T21:41:02Z,"Automatic sanity-testing: FAILED BUILD/TEST, see http://jenkins.bluematt.me/pull-tester/e7d1e1eb4e8b584adfdc44bac6f52938e134b8a4 for binaries and test log.\n\nThis could happen for one of several reasons:\n1. It chanages paths in makefile.linux-mingw or otherwise changes build scripts in a way that made them incompatible with the automated testing scripts (please tweak those patches in qa/pull-tes",https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34810758,34810758,
petertodd,2014-02-11T21:42:57Z,@sipa Excellent point.\n,https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34811234,34811234,
sipa,2014-02-11T21:46:33Z,"On the other hand, if you DO count unconfirmed change, I'm afraid balances may be off in the other direction (too high), if you get a mutated transactions in your wallet. I'm not sure about this though - balance is computed in multiple ways.\n",https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34811817,34811817,
laanwj,2014-02-11T21:50:00Z,"@sipa Agreed. I think if the wallet is fixed to remove/hide duplicated (due to malleability) unconfirmed transactions, the balance will be fixed too, and we don't need to do anything else.\n",https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34812183,34812183,
b6393ce9-d324-4fe1-996b-acf82dbc3d53,2014-02-12T05:54:52Z,"You should _never_ try to hide reality.\n\nYou're over-engineering. Just show the user _both_ the confirmed and unconfirmed balances, particularly when they differ (and particularly when unconfirmed change has been set to be treated as truly unconfirmed).\n\nFor starters, CWalletTx::IsConfirmed() needs to be updated to reflect reality; see this pull request: https://github.com/bitcoin/bitcoin/pull",https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34841366,34841366,
jspilman,2014-02-12T07:49:17Z,"@sipa if balances are too _high_ when counting unconfirmed change, then balance is being calculated wrong. Two conflicting unconfirmed transactions cannot both contribute to getbalance. If there are multiple conflicting futures, it can't sum all of them together, it has to choose one. But this is out of scope anyway. If there are merely mutated same-spend transactions in the mempool, the worst cas",https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34846281,34846281,
laanwj,2014-02-12T08:36:48Z,"This is causing a pull tester failure because default wallet behavior changed (""unconfirmed balance"").\n",https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34848695,34848695,
sipa,2014-02-12T13:39:14Z,@jspilman I'm very aware that something is wrong. Fixing it requires a lot more work though.\n,https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34869045,34869045,
laanwj,2014-02-14T06:00:46Z,"I don't want this as default.\n\n(Spending unconfirmed change gives a larger chance of never-confirming transactions, but it sure makes the wallet a lot more user friendly in the goodweather case. With dead transaction handling the duplicates are handled better and having this as default is not needed)\n",https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-35058721,35058721,
