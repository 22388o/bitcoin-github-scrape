[
  {
    "sha": "933ab8a720cb9b3341adec4109cffb6dc5b322a5",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5MzNhYjhhNzIwY2I5YjMzNDFhZGVjNDEwOWNmZmI2ZGM1YjMyMmE1",
    "commit": {
      "author": {
        "name": "William Casarin",
        "email": "jb55@jb55.com",
        "date": "2020-09-05T14:36:47Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@protonmail.com",
        "date": "2020-12-07T10:55:51Z"
      },
      "message": "build: detect sys/sdt.h for eBPF tracing",
      "tree": {
        "sha": "894dc1575f7011a205010d77d21f8697b3d5630d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/894dc1575f7011a205010d77d21f8697b3d5630d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/933ab8a720cb9b3341adec4109cffb6dc5b322a5",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/933ab8a720cb9b3341adec4109cffb6dc5b322a5",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/933ab8a720cb9b3341adec4109cffb6dc5b322a5",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/933ab8a720cb9b3341adec4109cffb6dc5b322a5/comments",
    "author": {
      "login": "jb55",
      "id": 45598,
      "node_id": "MDQ6VXNlcjQ1NTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jb55",
      "html_url": "https://github.com/jb55",
      "followers_url": "https://api.github.com/users/jb55/followers",
      "following_url": "https://api.github.com/users/jb55/following{/other_user}",
      "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
      "organizations_url": "https://api.github.com/users/jb55/orgs",
      "repos_url": "https://api.github.com/users/jb55/repos",
      "events_url": "https://api.github.com/users/jb55/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jb55/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f3e17686b37a70860bd4636f54c77da6fef59240",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f3e17686b37a70860bd4636f54c77da6fef59240",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f3e17686b37a70860bd4636f54c77da6fef59240"
      }
    ],
    "stats": {
      "total": 18,
      "additions": 18,
      "deletions": 0
    },
    "files": [
      {
        "sha": "f0ab410d72665da97835cfc349c871ea60ed8497",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 18,
        "deletions": 0,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/933ab8a720cb9b3341adec4109cffb6dc5b322a5/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/933ab8a720cb9b3341adec4109cffb6dc5b322a5/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=933ab8a720cb9b3341adec4109cffb6dc5b322a5",
        "patch": "@@ -129,6 +129,12 @@ AC_ARG_WITH([bdb],\n   [use_bdb=$withval],\n   [use_bdb=auto])\n \n+AC_ARG_ENABLE([ebpf],\n+  [AS_HELP_STRING([--enable-ebpf],\n+  [enable eBPF tracing (default is yes if sys/sdt.h is found)])],\n+  [use_ebpf=$enableval],\n+  [use_ebpf=yes])\n+\n AC_ARG_WITH([miniupnpc],\n   [AS_HELP_STRING([--with-miniupnpc],\n   [enable UPNP (default is yes if libminiupnpc is found)])],\n@@ -1256,6 +1262,16 @@ if test x$enable_wallet != xno; then\n     fi\n fi\n \n+if test x$use_ebpf != xno; then\n+  AC_CHECK_HEADER([sys/sdt.h], [have_sdt=yes], [have_sdt=no])\n+else\n+  have_sdt=no\n+fi\n+\n+if test x$have_sdt = xyes; then\n+  AC_DEFINE([ENABLE_TRACING], [1], [Define to 1 to enable eBPF user static defined tracepoints])\n+fi\n+\n dnl Check for libminiupnpc (optional)\n if test x$use_upnp != xno; then\n   AC_CHECK_HEADERS(\n@@ -1610,6 +1626,7 @@ AM_CONDITIONAL([TARGET_WINDOWS], [test x$TARGET_OS = xwindows])\n AM_CONDITIONAL([ENABLE_WALLET],[test x$enable_wallet = xyes])\n AM_CONDITIONAL([USE_SQLITE], [test \"x$use_sqlite\" = \"xyes\"])\n AM_CONDITIONAL([USE_BDB], [test \"x$use_bdb\" = \"xyes\"])\n+AM_CONDITIONAL([ENABLE_TRACING],[test x$have_sdt = xyes])\n AM_CONDITIONAL([ENABLE_TESTS],[test x$BUILD_TEST = xyes])\n AM_CONDITIONAL([ENABLE_FUZZ],[test x$enable_fuzz = xyes])\n AM_CONDITIONAL([ENABLE_QT],[test x$bitcoin_enable_qt = xyes])\n@@ -1768,6 +1785,7 @@ fi\n echo \"  with bench    = $use_bench\"\n echo \"  with upnp     = $use_upnp\"\n echo \"  use asm       = $use_asm\"\n+echo \"  ebpf tracing  = $have_sdt\"\n echo \"  sanitizers    = $use_sanitizers\"\n echo \"  debug enabled = $enable_debug\"\n echo \"  gprof enabled = $enable_gprof\""
      }
    ]
  },
  {
    "sha": "22eb7930a6ae021438aa0b8e750170534944f296",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyMmViNzkzMGE2YWUwMjE0MzhhYTBiOGU3NTAxNzA1MzQ5NDRmMjk2",
    "commit": {
      "author": {
        "name": "William Casarin",
        "email": "jb55@jb55.com",
        "date": "2020-05-20T20:35:27Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@protonmail.com",
        "date": "2020-12-07T10:55:51Z"
      },
      "message": "tracing: add tracing framework\n\nSigned-off-by: William Casarin <jb55@jb55.com>",
      "tree": {
        "sha": "6a7264c3fa49bb0b3a7ea6965b7a46b9f21b64aa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6a7264c3fa49bb0b3a7ea6965b7a46b9f21b64aa"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/22eb7930a6ae021438aa0b8e750170534944f296",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/22eb7930a6ae021438aa0b8e750170534944f296",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/22eb7930a6ae021438aa0b8e750170534944f296",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/22eb7930a6ae021438aa0b8e750170534944f296/comments",
    "author": {
      "login": "jb55",
      "id": 45598,
      "node_id": "MDQ6VXNlcjQ1NTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jb55",
      "html_url": "https://github.com/jb55",
      "followers_url": "https://api.github.com/users/jb55/followers",
      "following_url": "https://api.github.com/users/jb55/following{/other_user}",
      "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
      "organizations_url": "https://api.github.com/users/jb55/orgs",
      "repos_url": "https://api.github.com/users/jb55/repos",
      "events_url": "https://api.github.com/users/jb55/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jb55/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "933ab8a720cb9b3341adec4109cffb6dc5b322a5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/933ab8a720cb9b3341adec4109cffb6dc5b322a5",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/933ab8a720cb9b3341adec4109cffb6dc5b322a5"
      }
    ],
    "stats": {
      "total": 46,
      "additions": 46,
      "deletions": 0
    },
    "files": [
      {
        "sha": "2bc345cf0460f4e2618e27ea1dfe8cf627384bd7",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22eb7930a6ae021438aa0b8e750170534944f296/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22eb7930a6ae021438aa0b8e750170534944f296/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=22eb7930a6ae021438aa0b8e750170534944f296",
        "patch": "@@ -235,6 +235,7 @@ BITCOIN_CORE_H = \\\n   util/system.h \\\n   util/threadnames.h \\\n   util/time.h \\\n+  util/trace.h \\\n   util/translation.h \\\n   util/ui_change_type.h \\\n   util/url.h \\"
      },
      {
        "sha": "9c92cb10e7d7f1b9a67b177efce8fda034848871",
        "filename": "src/util/trace.h",
        "status": "added",
        "additions": 45,
        "deletions": 0,
        "changes": 45,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22eb7930a6ae021438aa0b8e750170534944f296/src/util/trace.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22eb7930a6ae021438aa0b8e750170534944f296/src/util/trace.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/trace.h?ref=22eb7930a6ae021438aa0b8e750170534944f296",
        "patch": "@@ -0,0 +1,45 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_TRACE_H\n+#define BITCOIN_UTIL_TRACE_H\n+\n+#ifdef ENABLE_TRACING\n+\n+#include <sys/sdt.h>\n+\n+#define TRACE(context, event) DTRACE_PROBE(context, event)\n+#define TRACE1(context, event, a) DTRACE_PROBE1(context, event, a)\n+#define TRACE2(context, event, a, b) DTRACE_PROBE2(context, event, a, b)\n+#define TRACE3(context, event, a, b, c) DTRACE_PROBE3(context, event, a, b, c)\n+#define TRACE4(context, event, a, b, c, d) DTRACE_PROBE4(context, event, a, b, c, d)\n+#define TRACE5(context, event, a, b, c, d, e) DTRACE_PROBE5(context, event, a, b, c, d, e)\n+#define TRACE6(context, event, a, b, c, d, e, f) DTRACE_PROBE6(context, event, a, b, c, d, e, f)\n+#define TRACE7(context, event, a, b, c, d, e, f, g) DTRACE_PROBE7(context, event, a, b, c, d, e, f, g)\n+#define TRACE8(context, event, a, b, c, d, e, f, g, h) DTRACE_PROBE8(context, event, a, b, c, d, e, f, g, h)\n+#define TRACE9(context, event, a, b, c, d, e, f, g, h, i) DTRACE_PROBE9(context, event, a, b, c, d, e, f, g, h, i)\n+#define TRACE10(context, event, a, b, c, d, e, f, g, h, i, j) DTRACE_PROBE10(context, event, a, b, c, d, e, f, g, h, i, j)\n+#define TRACE11(context, event, a, b, c, d, e, f, g, h, i, j, k) DTRACE_PROBE11(context, event, a, b, c, d, e, f, g, h, i, j, k)\n+#define TRACE12(context, event, a, b, c, d, e, f, g, h, i, j, k, l) DTRACE_PROBE12(context, event, a, b, c, d, e, f, g, h, i, j, k, l)\n+\n+#else\n+\n+#define TRACE(context, event)\n+#define TRACE1(context, event, a)\n+#define TRACE2(context, event, a, b)\n+#define TRACE3(context, event, a, b, c)\n+#define TRACE4(context, event, a, b, c, d)\n+#define TRACE5(context, event, a, b, c, d, e)\n+#define TRACE6(context, event, a, b, c, d, e, f)\n+#define TRACE7(context, event, a, b, c, d, e, f, g)\n+#define TRACE8(context, event, a, b, c, d, e, f, g, h)\n+#define TRACE9(context, event, a, b, c, d, e, f, g, h, i)\n+#define TRACE10(context, event, a, b, c, d, e, f, g, h, i, j)\n+#define TRACE11(context, event, a, b, c, d, e, f, g, h, i, j, k)\n+#define TRACE12(context, event, a, b, c, d, e, f, g, h, i, j, k, l)\n+\n+#endif\n+\n+\n+#endif /* BITCOIN_UTIL_TRACE_H */"
      }
    ]
  }
]