laanwj,2018-03-15T18:56:00Z,Concept ACK - haven't reviewed yet but this looks like a lot of changes for just an additional input shuffle step?,https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373486222,373486222,
instagibbs,2018-03-15T19:00:21Z,"Ok, I can make this smaller. ~~Just realized that the inner-use of the inputs doesn't actually require proper ordering for transaction size estimation, so it should just be a single shuffle before signing.~~\n\nA bit annoying due to inner-loop behavior, but I'll see what I can do.",https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373487510,373487510,
ryanofsky,2018-03-15T19:01:42Z,Related discussion: https://botbot.me/freenode/bitcoin-core-dev/msg/97851598/,https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373487917,373487917,
Sjors,2018-03-15T19:04:54Z,Maybe just use the same ordering as [BIP-69](https://github.com/bitcoin/bips/blob/master/bip-0069.mediawiki#Transaction_Inputs)?,https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373488813,373488813,
instagibbs,2018-03-15T19:16:56Z,"@Sjors I'd prefer to something slightly less bad now, and converge on a standard later. I have some quibbles with BIP69, which I think are out of scope for this thread.",https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373492289,373492289,
Sjors,2018-03-15T19:22:13Z,"TIL the Core wallet doesn't use BIP-69 (which is a separate discussion), so that does weaken the case for using it here. (and TIL coin selection function also determines the order, not just the set)\n\nSee also #12457",https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373493770,373493770,
instagibbs,2018-03-15T20:19:55Z,"Smaller changeset now, had to move the final input creation further output to avoid storing shuffle ordering.",https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373509731,373509731,
instagibbs,2018-03-16T18:09:20Z,"Turns out that we're ~this far away(in master) from having the input part compliant with BIP69:\n\n>struct bip69_compare {\n>    bool operator() (const uint256& lhs, const uint256& rhs) const\n>    {\n>        uint256 lhs_hash = rhs;\n>        uint256 rhs_hash = lhs;\n>        std::reverse(lhs_hash.begin(), lhs_hash.end());\n>        std::reverse(rhs_hash.begin(), rhs_hash.end());\n>     ",https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373798999,373798999,
luke-jr,2018-03-16T21:44:35Z,"BIP 69 contradicts SIGHASH_SINGLE usage, and its concerns seem unrealistic (if you use malicious closed source wallet software, you're already compromised regardless). Randomising seems fine.",https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373853389,373853389,
donaloconnor,2018-03-17T11:54:04Z,utACK https://github.com/bitcoin/bitcoin/pull/12699/commits/8712bbd6f0f643359b5e6dd090cf247bee3dd087,https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373914457,373914457,
instagibbs,2018-03-21T19:04:41Z,rebased onto https://github.com/bitcoin/bitcoin/pull/12742 to avoid code churn,https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-375060610,375060610,
sipa,2018-03-21T23:39:28Z,utACK 2fb9c1e6681370478e24a19172ed6d78d95d50d3,https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-375131022,375131022,
MarcoFalke,2018-03-22T17:31:00Z,"If you want to remove the erroneous diff from the GitHub web view:\n\n```sh\nEDITOR=true git commit --allow-empty -m empty && git push git@github.com:instagibbs/bitcoin.git shuffleinputs && git reset --hard 2fb9c1e && git push git@github.com:instagibbs/bitcoin.git shuffleinputs -f",https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-375392227,375392227,
MarcoFalke,2018-03-22T17:54:58Z,utACK 2fb9c1e6681370478e24a19172ed6d78d95d50d3,https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-375400720,375400720,
promag,2018-03-24T12:13:30Z,"utACK 2fb9c1e, looks good.\n\n> This slightly changed behavior of fundrawtransaction in that the newly-appended inputs will now be shuffled rather than in outpoint-order. \n\nAt least the test framework doesn't rely on the order.",https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-375881886,375881886,
sipa,2018-03-24T20:03:52Z,PR title seems outdated now (the shuffle happens after `SelectCoins` returns).,https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-375921008,375921008,
instagibbs,2018-03-26T13:42:53Z,updated title,https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-376170180,376170180,
jamesob,2018-03-26T14:55:48Z,utACK https://github.com/bitcoin/bitcoin/pull/12699/commits/2fb9c1e6681370478e24a19172ed6d78d95d50d3,https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-376195289,376195289,
