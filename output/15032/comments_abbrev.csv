DrahtBot,2018-12-24T12:49:08Z,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#14491](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14491.html) (Allow descriptor imports with importmulti b",https://github.com/bitcoin/bitcoin/pull/15032#issuecomment-449730379,449730379,
practicalswift,2018-12-27T11:37:51Z,As a precaution this PR should probably be marked `[wip]` until the security issue it introduces (see https://github.com/bitcoin/bitcoin/pull/15032#discussion_r243982248) has been corrected?,https://github.com/bitcoin/bitcoin/pull/15032#issuecomment-450135081,450135081,
meshcollider,2018-12-28T05:00:11Z,Fixed the bug mentioned above,https://github.com/bitcoin/bitcoin/pull/15032#issuecomment-450290374,450290374,
laanwj,2019-01-02T13:29:57Z,"utACK adee4eed8cf4a45f4095c653073c27509a931d2e\n\nAgree it would be nice to have a test for ""Invalid private key encoding at index…"" as there was a near-screwup there.",https://github.com/bitcoin/bitcoin/pull/15032#issuecomment-450863354,450863354,
achow101,2019-01-15T22:40:26Z,"utACK adee4eed8cf4a45f4095c653073c27509a931d2e\n\nNeeds rebase.",https://github.com/bitcoin/bitcoin/pull/15032#issuecomment-454579789,454579789,
Sjors,2019-01-16T16:14:55Z,"Travis linter fails, probably due to too modern Python syntax `test/functional/wallet_importmulti.py:395:23: F821 undefined name 'hex_str_to_bytes'` ",https://github.com/bitcoin/bitcoin/pull/15032#issuecomment-454838837,454838837,
MarcoFalke,2019-01-16T16:48:08Z,"Failure when running the test:\n\n```\n2019-01-16T16:31:55.887000Z TestFramework (ERROR): Unexpected exception caught during testing\nTraceback (most recent call last):\n  File ""/home/travis/build/bitcoin/bitcoin/build/bitcoin-i686-pc-linux-gnu/test/functional/test_framework/test_framework.py"", line 173, in main\n    self.run_test()\n  File ""/home/travis/build/bitcoin/bitcoin/build/bitcoin-",https://github.com/bitcoin/bitcoin/pull/15032#issuecomment-454851970,454851970,
meshcollider,2019-01-16T20:27:22Z,Ah that looks like its just the import statements being moved around in the importmulti test cleanup when I rebased this on master.,https://github.com/bitcoin/bitcoin/pull/15032#issuecomment-454927801,454927801,
laanwj,2019-01-31T13:18:18Z,What is the status of this? Github made sufficiently much of a mess out of the comments that I can't follow if all the remarks have been addressed or not!,https://github.com/bitcoin/bitcoin/pull/15032#issuecomment-459340613,459340613,
Sjors,2019-01-31T15:58:38Z,"utACK aee171b\n\n@ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/15032/commits/aee171b1c2f7201cb0780ce9049e322157506e6c#r244841074) could use more eyes (is this actually fixing a bug or not? if so, maybe rename that commit)\n\nThere's a Python formatting nit by @jnewbery that's still valid (though not worth holding back merging a PR that itself fixes nits).",https://github.com/bitcoin/bitcoin/pull/15032#issuecomment-459397963,459397963,
meshcollider,2019-02-05T06:52:47Z,Rebased after #15235,https://github.com/bitcoin/bitcoin/pull/15032#issuecomment-460532309,460532309,
DrahtBot,2019-02-07T22:04:50Z,<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase,https://github.com/bitcoin/bitcoin/pull/15032#issuecomment-461612452,461612452,
fanquake,2019-06-17T09:44:03Z,@meshcollider Will you have a chance to follow up here soon? Otherwise maybe we can label up for grabs and see if anyone else wants to pick it up.,https://github.com/bitcoin/bitcoin/pull/15032#issuecomment-502612928,502612928,
fanquake,2019-08-14T08:14:24Z,"This has idled for a while, needs a rebase and the last comments addressed. Closing with ""Up for grabs"".",https://github.com/bitcoin/bitcoin/pull/15032#issuecomment-521148509,521148509,
practicalswift,2018-12-26T11:12:51Z,This looks like very dangerous to me :-),https://github.com/bitcoin/bitcoin/pull/15032#discussion_r243982248,243982248,src/wallet/rpcdump.cpp
promag,2018-12-26T16:42:59Z,@practicalswift why?,https://github.com/bitcoin/bitcoin/pull/15032#discussion_r244020230,244020230,src/wallet/rpcdump.cpp
promag,2018-12-26T16:52:03Z,Could add noexcept specifier?,https://github.com/bitcoin/bitcoin/pull/15032#discussion_r244021294,244021294,src/wallet/rpcdump.cpp
sipa,2018-12-27T12:44:20Z,"@promag You're talking a pointer to a char array and adding an integer to it. If i is larger than the number of characters in the string, this results in reading in a buffer overflow.",https://github.com/bitcoin/bitcoin/pull/15032#discussion_r244145959,244145959,src/wallet/rpcdump.cpp
meshcollider,2018-12-28T04:07:56Z,"Oops, thinking too pythonically. Fixed thanks :)",https://github.com/bitcoin/bitcoin/pull/15032#discussion_r244259767,244259767,src/wallet/rpcdump.cpp
MarcoFalke,2018-12-28T11:31:11Z,Could add (or extend) a test for this?,https://github.com/bitcoin/bitcoin/pull/15032#discussion_r244305120,244305120,src/wallet/rpcdump.cpp
promag,2019-01-02T11:08:29Z,God 🤦‍♂️ ,https://github.com/bitcoin/bitcoin/pull/15032#discussion_r244710433,244710433,src/wallet/rpcdump.cpp
ryanofsky,2019-01-02T20:06:32Z,"Could make this method private and move next to AddWatchOnly:\n\nhttps://github.com/bitcoin/bitcoin/blob/fb52d0684e0f03bca5d7ddcf3fc5b0657859ac2c/src/wallet/wallet.h#L692-L701",https://github.com/bitcoin/bitcoin/pull/15032#discussion_r244839766,244839766,src/wallet/wallet.h
ryanofsky,2019-01-02T20:11:50Z,"I think this is actually a bugfix, because previously `mapKeyMetadata` got updated too late, after `CWallet::AddKeyPubKeyWithDB` and `CWallet::AddCryptedKey` already used the previous value:\n\nhttps://github.com/bitcoin/bitcoin/blob/fb52d0684e0f03bca5d7ddcf3fc5b0657859ac2c/src/wallet/wallet.cpp#L242\nhttps://github.com/bitcoin/bitcoin/blob/fb52d0684e0f03bca5d7ddcf3fc5b0657859ac2c/src/wallet/wa",https://github.com/bitcoin/bitcoin/pull/15032#discussion_r244841074,244841074,src/wallet/rpcdump.cpp
ryanofsky,2019-01-02T20:25:20Z,"I think this line no longer does anything and can be dropped. If `nTime` is less than `nTimeBegin`, then the `UpdateTimeFirstKey` call inside `AddKeyPubKey` will have already updated the minimum time.",https://github.com/bitcoin/bitcoin/pull/15032#discussion_r244844275,244844275,src/wallet/rpcdump.cpp
benthecarman,2019-01-06T08:08:53Z,Nit: there was an extra space added to the beginning of this line,https://github.com/bitcoin/bitcoin/pull/15032#discussion_r245498817,245498817,test/functional/wallet_importmulti.py
meshcollider,2019-01-06T17:52:39Z,"Indeed, that was deliberate :)",https://github.com/bitcoin/bitcoin/pull/15032#discussion_r245516537,245516537,test/functional/wallet_importmulti.py
jnewbery,2019-01-14T19:43:39Z,"nit (this isn't introduced here, but since this PR is for nit-clearing...): this line is very long. Consider:\n\n- building a warnings variable above and passing it to this function\n- adding constants for the common error strings to avoid repetition\n- using `.format()` string formating instead of string concatenation.",https://github.com/bitcoin/bitcoin/pull/15032#discussion_r247631281,247631281,test/functional/wallet_importmulti.py
jnewbery,2019-01-31T16:13:48Z,"`nTimeBegin` is also used below in the `RescanWallet()` call, so I think it needs to be set to the min value here.",https://github.com/bitcoin/bitcoin/pull/15032#discussion_r252733341,252733341,src/wallet/rpcdump.cpp
ryanofsky,2019-02-04T20:00:01Z,"re: https://github.com/bitcoin/bitcoin/pull/15032#discussion_r244844275\n\n> nTimeBegin is also used below in the RescanWallet() call, so I think it needs to be set to the min value here.\n\nYou're right. Not sure how I missed the RescanWallet call.",https://github.com/bitcoin/bitcoin/pull/15032#discussion_r253622917,253622917,src/wallet/rpcdump.cpp
jnewbery,2019-02-05T16:26:27Z,"I think the update to `nTimeBegin` here:\n\nhttps://github.com/bitcoin/bitcoin/pull/15032/files#diff-522490d83dce5375d423b23886e4125eR659\n\nis better. We don't want to update `nTimeBegin` if the `AddKeyPubKey()` fails.\n\nI also think you can remove the update to the key metadata here:\n\nhttps://github.com/bitcoin/bitcoin/pull/15032/files#diff-522490d83dce5375d423b23886e4125eR656\n\nsi",https://github.com/bitcoin/bitcoin/pull/15032#discussion_r253940056,253940056,src/wallet/rpcdump.cpp
