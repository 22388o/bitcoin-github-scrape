jgarzik,2014-08-28T15:20:41Z,ut ACK\n\nCode movement reviewed.\n,https://github.com/bitcoin/bitcoin/pull/4778#issuecomment-53735715,53735715,
jgarzik,2014-08-28T15:21:29Z,@laanwj -1?\n,https://github.com/bitcoin/bitcoin/pull/4778#issuecomment-53735846,53735846,
laanwj,2014-08-28T15:43:40Z,"It now checks whether the block is in the main chain and returns confirmations=-1 if not, as before. Maybe 0 was a better value to return in that case (that changed when the wallet started handling conflicted transactions), that's open for discussion.\n",https://github.com/bitcoin/bitcoin/pull/4778#issuecomment-53739540,53739540,
tholenst,2014-08-29T15:10:36Z,"ACK except for sipa's comment. I verified that the code movement is purely movement, and tested rpcblockchain.\n",https://github.com/bitcoin/bitcoin/pull/4778#issuecomment-53888793,53888793,
jgarzik,2014-08-29T15:13:03Z,Indeed.  Contains() is slightly more efficient.\n,https://github.com/bitcoin/bitcoin/pull/4778#issuecomment-53889129,53889129,
laanwj,2014-08-29T15:27:27Z,"Changed to @sipa's suggestion, changed documentation for getblock to mention that -1 confirmations is returned for blocks not on the main chain.\n",https://github.com/bitcoin/bitcoin/pull/4778#issuecomment-53891042,53891042,
BitcoinPullTester,2014-08-29T15:40:18Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4778_0101483f46396a7f1d19a9d29a1da15639ce4233/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-te",https://github.com/bitcoin/bitcoin/pull/4778#issuecomment-53892752,53892752,
sipa,2014-08-29T16:11:37Z,Untested ACK. Verified move-only.\n,https://github.com/bitcoin/bitcoin/pull/4778#issuecomment-53896787,53896787,
sipa,2014-08-28T20:43:55Z,If chainActive.Contains(blockindex) ?\n,https://github.com/bitcoin/bitcoin/pull/4778#discussion_r16866572,16866572,src/rpcblockchain.cpp
tholenst,2014-08-29T14:19:07Z,"This implies that the current highest block has 1 confirmation and that this RPC call never returns ""confirmations: 0"". Obviously this cannot be changed (it was previously like this), but maybe one could take this chance and document this behaviour in line 245?\n",https://github.com/bitcoin/bitcoin/pull/4778#discussion_r16899724,16899724,src/rpcblockchain.cpp
jgarzik,2014-08-29T14:26:42Z,"By definition no block can have zero confirmations... not sure what you're asking?  Just to document the ""confirmations"" field behavior?\n",https://github.com/bitcoin/bitcoin/pull/4778#discussion_r16900138,16900138,src/rpcblockchain.cpp
tholenst,2014-08-29T14:34:49Z,"Yeah, to document was what I meant.\n\nBut you are right -- since the transactions within the block have 1 confirmation, it's only natural that the block also has 1 confirmation. So probably it doens not need more documentation.\n",https://github.com/bitcoin/bitcoin/pull/4778#discussion_r16900565,16900565,src/rpcblockchain.cpp
laanwj,2014-08-29T15:14:45Z,"That's what I meant above. It returns `-1` for blocks that are not on the main chain. This used to be `0` before the wallet conflict changes in 0.9. It looks like this inadvertently changed, with no one realizing that the CMerkleTx was used here.\n",https://github.com/bitcoin/bitcoin/pull/4778#discussion_r16903015,16903015,src/rpcblockchain.cpp
