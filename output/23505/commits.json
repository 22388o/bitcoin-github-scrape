[
  {
    "sha": "faef3cbe0adafa99cb2562620368ba766485e130",
    "node_id": "C_kwDOABII59oAKGZhZWYzY2JlMGFkYWZhOTljYjI1NjI2MjAzNjhiYTc2NjQ4NWUxMzA",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-11-13T10:42:09Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-11-30T15:48:53Z"
      },
      "message": "refactor: Use assert(false) to document unreachable deployment code\n\nIt is impossible to hit those lines of code unless there is hardware or\nsoftware corruption. Thus, make sure to abort the node in case they are\nhit to avoid further corruption.\n\nSee also the previous discussions:\n\n* https://github.com/bitcoin/bitcoin/pull/19438/files#r661202215\n* https://github.com/bitcoin/bitcoin/pull/19438/files#r662494456\n\nAlso, remove whitespace for better readability and grep-ability. (Can be\nreviewed with --word-diff-regex=. option)",
      "tree": {
        "sha": "9f4e5c3b66405c886efd55ab84f4b73efcf22703",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9f4e5c3b66405c886efd55ab84f4b73efcf22703"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faef3cbe0adafa99cb2562620368ba766485e130",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUh39gv+NhuaPhiipLXTyTgYE3TfWg8eCxbfSDwLiyHhKdi6MMmOA+a45aDAsef+\nC6WLUbc8vogfUnc1rNjCzrHlz/x1j779QFD4P9bGWZkpT/18zTClgaMbjK3MC9Xn\nG4UwSoQf5In9SL8I7Dbd4A/GRo728dlGGU9ms+J6G3T3EdBLKscyZGEuP+mmRouj\nB3Yeb5hmchp0nd4jlgVdnOYGempsKcrFRcRa1sHgdd1BIWUyXgXa1uWPsh8xdWHO\nqF1J6x6qPSZrCvZP7C7wwcj8iSggxMREptYNY4vwBAQeimozukl28HhFzkQrUFqO\nD4wbYPE4IFB1Alg2n2FAX6raP/tWrbPhtR9Ob3FX+sC5tsijhVdYsbFC+UYsIrtH\nx1oTi2WnPb5wyCysmMrAFTf6+/5uXFGCXhYD77YD1MkO+R+rksCggJPhkN+PG7uO\nLvgb4fsv543yWA5G4VzjX+rZ3d+n4EhquGmryeTGCKBkOcO/zaTovH0L76ZBp2fq\nTKrF9e4t\n=Augd\n-----END PGP SIGNATURE-----",
        "payload": "tree 9f4e5c3b66405c886efd55ab84f4b73efcf22703\nparent ffdf8ee43e2440ab59b85846ab98854b17e49e49\nauthor MarcoFalke <falke.marco@gmail.com> 1636800129 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1638287333 +0100\n\nrefactor: Use assert(false) to document unreachable deployment code\n\nIt is impossible to hit those lines of code unless there is hardware or\nsoftware corruption. Thus, make sure to abort the node in case they are\nhit to avoid further corruption.\n\nSee also the previous discussions:\n\n* https://github.com/bitcoin/bitcoin/pull/19438/files#r661202215\n* https://github.com/bitcoin/bitcoin/pull/19438/files#r662494456\n\nAlso, remove whitespace for better readability and grep-ability. (Can be\nreviewed with --word-diff-regex=. option)\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faef3cbe0adafa99cb2562620368ba766485e130",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/faef3cbe0adafa99cb2562620368ba766485e130",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faef3cbe0adafa99cb2562620368ba766485e130/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ffdf8ee43e2440ab59b85846ab98854b17e49e49",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ffdf8ee43e2440ab59b85846ab98854b17e49e49",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ffdf8ee43e2440ab59b85846ab98854b17e49e49"
      }
    ],
    "stats": {
      "total": 36,
      "additions": 14,
      "deletions": 22
    },
    "files": [
      {
        "sha": "e3f8601da065316070c81b945c87b431b082c4b6",
        "filename": "src/consensus/params.h",
        "status": "modified",
        "additions": 8,
        "deletions": 11,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/faef3cbe0adafa99cb2562620368ba766485e130/src/consensus/params.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/faef3cbe0adafa99cb2562620368ba766485e130/src/consensus/params.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/params.h?ref=faef3cbe0adafa99cb2562620368ba766485e130",
        "patch": "@@ -7,6 +7,8 @@\n #define BITCOIN_CONSENSUS_PARAMS_H\n \n #include <uint256.h>\n+\n+#include <cassert>\n #include <limits>\n \n namespace Consensus {\n@@ -118,18 +120,13 @@ struct Params {\n     int DeploymentHeight(BuriedDeployment dep) const\n     {\n         switch (dep) {\n-        case DEPLOYMENT_HEIGHTINCB:\n-            return BIP34Height;\n-        case DEPLOYMENT_CLTV:\n-            return BIP65Height;\n-        case DEPLOYMENT_DERSIG:\n-            return BIP66Height;\n-        case DEPLOYMENT_CSV:\n-            return CSVHeight;\n-        case DEPLOYMENT_SEGWIT:\n-            return SegwitHeight;\n+        case DEPLOYMENT_HEIGHTINCB: return BIP34Height;\n+        case DEPLOYMENT_CLTV: return BIP65Height;\n+        case DEPLOYMENT_DERSIG: return BIP66Height;\n+        case DEPLOYMENT_CSV: return CSVHeight;\n+        case DEPLOYMENT_SEGWIT: return SegwitHeight;\n         } // no default case, so the compiler can warn about missing cases\n-        return std::numeric_limits<int>::max();\n+        assert(false);\n     }\n };\n "
      },
      {
        "sha": "81c3c4f3df4f170afd91ccc6649c531f8ef8a32c",
        "filename": "src/deploymentinfo.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 11,
        "changes": 17,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/faef3cbe0adafa99cb2562620368ba766485e130/src/deploymentinfo.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/faef3cbe0adafa99cb2562620368ba766485e130/src/deploymentinfo.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/deploymentinfo.cpp?ref=faef3cbe0adafa99cb2562620368ba766485e130",
        "patch": "@@ -21,16 +21,11 @@ std::string DeploymentName(Consensus::BuriedDeployment dep)\n {\n     assert(ValidDeployment(dep));\n     switch (dep) {\n-    case Consensus::DEPLOYMENT_HEIGHTINCB:\n-        return \"bip34\";\n-    case Consensus::DEPLOYMENT_CLTV:\n-        return \"bip65\";\n-    case Consensus::DEPLOYMENT_DERSIG:\n-        return \"bip66\";\n-    case Consensus::DEPLOYMENT_CSV:\n-        return \"csv\";\n-    case Consensus::DEPLOYMENT_SEGWIT:\n-        return \"segwit\";\n+    case Consensus::DEPLOYMENT_HEIGHTINCB: return \"bip34\";\n+    case Consensus::DEPLOYMENT_CLTV: return \"bip65\";\n+    case Consensus::DEPLOYMENT_DERSIG: return \"bip66\";\n+    case Consensus::DEPLOYMENT_CSV: return \"csv\";\n+    case Consensus::DEPLOYMENT_SEGWIT: return \"segwit\";\n     } // no default case, so the compiler can warn about missing cases\n-    return \"\";\n+    assert(false);\n }"
      }
    ]
  },
  {
    "sha": "fa7354010811c81780530d3bd5032ff6b9473153",
    "node_id": "C_kwDOABII59oAKGZhNzM1NDAxMDgxMWM4MTc4MDUzMGQzYmQ1MDMyZmY2Yjk0NzMxNTM",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-11-13T10:53:17Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-11-30T16:05:39Z"
      },
      "message": "Bury taproot deployment",
      "tree": {
        "sha": "25fe9244ffdae664ce6bbff8a7a881491aa15c47",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/25fe9244ffdae664ce6bbff8a7a881491aa15c47"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa7354010811c81780530d3bd5032ff6b9473153",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUiEswv/duK+eOmrCCQtwIynL91ewg7IWUWP9KrCWiVW2n9EdCMNPm1NSrTU6S6/\n45vIcudIZo4EeuFzOZTyvilpZg/tzTa9cSCXupgzaw5d4o0Ko9oUQLlbaw2c092u\nFYb/F/kZc6rVM0Mn+wFBu/i2AJYSxjSAjqezvgtNPXXbw5oIcB0co+dZKuRnzMA5\nS3AyoUf04QoIAO9KUhGaQvzHaVOHqpNBZ2vUZOQD92sPQM9JFvXTNpusD4XVqP1g\nyjJDN1zXxf1c0EZmIp+taqSzPSkeszFIccYvfbN5tPhdu5TStR7RmnOVDnPDIq0y\nIIV7CruQ03T7AQkknxdtO5BqKj6jeMR03XUtcdFVMSBM3D7fzuRPvP99RUG1P6N3\no64EIzzoDr8l10zF0strlJMlUGyzaOkf+1J8uWoCQhT8YkuI2U7Jx1ospNYKEY+H\n753Uza3l4Q6aQffDTWSpmPSOLm3EK1Z7WaOl1wuqm9SKhRB7gyjmQt7keGXNZKTh\n440kRG1d\n=3gUU\n-----END PGP SIGNATURE-----",
        "payload": "tree 25fe9244ffdae664ce6bbff8a7a881491aa15c47\nparent faef3cbe0adafa99cb2562620368ba766485e130\nauthor MarcoFalke <falke.marco@gmail.com> 1636800797 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1638288339 +0100\n\nBury taproot deployment\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa7354010811c81780530d3bd5032ff6b9473153",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa7354010811c81780530d3bd5032ff6b9473153",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa7354010811c81780530d3bd5032ff6b9473153/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "faef3cbe0adafa99cb2562620368ba766485e130",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faef3cbe0adafa99cb2562620368ba766485e130",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/faef3cbe0adafa99cb2562620368ba766485e130"
      }
    ],
    "stats": {
      "total": 63,
      "additions": 20,
      "deletions": 43
    },
    "files": [
      {
        "sha": "6193f3beebd7f2d0bb437e0923faa928e43029e6",
        "filename": "src/chainparams.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 23,
        "changes": 29,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa7354010811c81780530d3bd5032ff6b9473153/src/chainparams.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa7354010811c81780530d3bd5032ff6b9473153/src/chainparams.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/chainparams.cpp?ref=fa7354010811c81780530d3bd5032ff6b9473153",
        "patch": "@@ -72,6 +72,7 @@ class CMainParams : public CChainParams {\n         consensus.BIP66Height = 363725; // 00000000000000000379eaa19dce8c9b722d46ae6a57c2f1a988119488b50931\n         consensus.CSVHeight = 419328; // 000000000000000004a1b34462cb8aeebd5799177f7a29cf28f2d1961716b5b5\n         consensus.SegwitHeight = 481824; // 0000000000000000001c8018d9cb3b742ef25114f27563e3fc4a1902167f9893\n+        consensus.TaprootHeight = 709632; // 0000000000000000000687bca986194dc2c1f949318629b44bb54ec0a94d8244\n         consensus.MinBIP9WarningHeight = 483840; // segwit activation height + miner confirmation window\n         consensus.powLimit = uint256S(\"00000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\n         consensus.nPowTargetTimespan = 14 * 24 * 60 * 60; // two weeks\n@@ -85,12 +86,6 @@ class CMainParams : public CChainParams {\n         consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].nTimeout = Consensus::BIP9Deployment::NO_TIMEOUT;\n         consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].min_activation_height = 0; // No activation delay\n \n-        // Deployment of Taproot (BIPs 340-342)\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].bit = 2;\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].nStartTime = 1619222400; // April 24th, 2021\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].nTimeout = 1628640000; // August 11th, 2021\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].min_activation_height = 709632; // Approximately November 12th, 2021\n-\n         consensus.nMinimumChainWork = uint256S(\"0x00000000000000000000000000000000000000001fa4663bbbe19f82de910280\");\n         consensus.defaultAssumeValid = uint256S(\"0x00000000000000000008a89e854d57e5667df88f1cdef6fde2fbca1de5b639ad\"); // 691719\n \n@@ -191,6 +186,7 @@ class CTestNetParams : public CChainParams {\n         consensus.BIP66Height = 330776; // 000000002104c8c45e99a8853285a3b592602a3ccde2b832481da85e9e4ba182\n         consensus.CSVHeight = 770112; // 00000000025e930139bac5c6c31a403776da130831ab85be56578f3fa75369bb\n         consensus.SegwitHeight = 834624; // 00000000002b980fcd729daaa248fd9316a5200e9b367f4ff2c42453e84201ca\n+        consensus.TaprootHeight = 2011968; // 000000000000eb906ab072652b86b05a1afeb95df53ed5c5a63aa3574e1f1b33\n         consensus.MinBIP9WarningHeight = 836640; // segwit activation height + miner confirmation window\n         consensus.powLimit = uint256S(\"00000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\n         consensus.nPowTargetTimespan = 14 * 24 * 60 * 60; // two weeks\n@@ -204,12 +200,6 @@ class CTestNetParams : public CChainParams {\n         consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].nTimeout = Consensus::BIP9Deployment::NO_TIMEOUT;\n         consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].min_activation_height = 0; // No activation delay\n \n-        // Deployment of Taproot (BIPs 340-342)\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].bit = 2;\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].nStartTime = 1619222400; // April 24th, 2021\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].nTimeout = 1628640000; // August 11th, 2021\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].min_activation_height = 0; // No activation delay\n-\n         consensus.nMinimumChainWork = uint256S(\"0x0000000000000000000000000000000000000000000005180c3bd8290da33a1a\");\n         consensus.defaultAssumeValid = uint256S(\"0x0000000000004ae2f3896ca8ecd41c460a35bf6184e145d91558cece1c688a76\"); // 2010000\n \n@@ -330,6 +320,7 @@ class SigNetParams : public CChainParams {\n         consensus.BIP66Height = 1;\n         consensus.CSVHeight = 1;\n         consensus.SegwitHeight = 1;\n+        consensus.TaprootHeight = 1;\n         consensus.nPowTargetTimespan = 14 * 24 * 60 * 60; // two weeks\n         consensus.nPowTargetSpacing = 10 * 60;\n         consensus.fPowAllowMinDifficultyBlocks = false;\n@@ -343,12 +334,6 @@ class SigNetParams : public CChainParams {\n         consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].nTimeout = Consensus::BIP9Deployment::NO_TIMEOUT;\n         consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].min_activation_height = 0; // No activation delay\n \n-        // Activation of Taproot (BIPs 340-342)\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].bit = 2;\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].nStartTime = Consensus::BIP9Deployment::ALWAYS_ACTIVE;\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].nTimeout = Consensus::BIP9Deployment::NO_TIMEOUT;\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].min_activation_height = 0; // No activation delay\n-\n         // message start is defined as the first 4 bytes of the sha256d of the block script\n         CHashWriter h(SER_DISK, 0);\n         h << consensus.signet_challenge;\n@@ -398,6 +383,7 @@ class CRegTestParams : public CChainParams {\n         consensus.BIP66Height = 1;  // Always active unless overridden\n         consensus.CSVHeight = 1;    // Always active unless overridden\n         consensus.SegwitHeight = 1; // Always active unless overridden\n+        consensus.TaprootHeight = 1; // Always active unless overridden\n         consensus.MinBIP9WarningHeight = 0;\n         consensus.powLimit = uint256S(\"7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\n         consensus.nPowTargetTimespan = 14 * 24 * 60 * 60; // two weeks\n@@ -412,11 +398,6 @@ class CRegTestParams : public CChainParams {\n         consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].nTimeout = Consensus::BIP9Deployment::NO_TIMEOUT;\n         consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].min_activation_height = 0; // No activation delay\n \n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].bit = 2;\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].nStartTime = Consensus::BIP9Deployment::ALWAYS_ACTIVE;\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].nTimeout = Consensus::BIP9Deployment::NO_TIMEOUT;\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TAPROOT].min_activation_height = 0; // No activation delay\n-\n         consensus.nMinimumChainWork = uint256{};\n         consensus.defaultAssumeValid = uint256{};\n \n@@ -512,6 +493,8 @@ static void MaybeUpdateHeights(const ArgsManager& args, Consensus::Params& conse\n             consensus.BIP65Height = int{height};\n         } else if (name == \"csv\") {\n             consensus.CSVHeight = int{height};\n+        } else if (name == \"taproot\") {\n+            consensus.TaprootHeight = int{height};\n         } else {\n             throw std::runtime_error(strprintf(\"Invalid name (%s) for -testactivationheight=name@height.\", arg));\n         }"
      },
      {
        "sha": "dc5fb6239ef886d33a895aa188235bc9c192acc3",
        "filename": "src/consensus/params.h",
        "status": "modified",
        "additions": 5,
        "deletions": 2,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa7354010811c81780530d3bd5032ff6b9473153/src/consensus/params.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa7354010811c81780530d3bd5032ff6b9473153/src/consensus/params.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/params.h?ref=fa7354010811c81780530d3bd5032ff6b9473153",
        "patch": "@@ -24,12 +24,12 @@ enum BuriedDeployment : int16_t {\n     DEPLOYMENT_DERSIG,\n     DEPLOYMENT_CSV,\n     DEPLOYMENT_SEGWIT,\n+    DEPLOYMENT_TAPROOT,\n };\n-constexpr bool ValidDeployment(BuriedDeployment dep) { return dep <= DEPLOYMENT_SEGWIT; }\n+constexpr bool ValidDeployment(BuriedDeployment dep) { return dep <= DEPLOYMENT_TAPROOT; }\n \n enum DeploymentPos : uint16_t {\n     DEPLOYMENT_TESTDUMMY,\n-    DEPLOYMENT_TAPROOT, // Deployment of Schnorr/Taproot (BIPs 340-342)\n     // NOTE: Also add new deployments to VersionBitsDeploymentInfo in deploymentinfo.cpp\n     MAX_VERSION_BITS_DEPLOYMENTS\n };\n@@ -87,6 +87,8 @@ struct Params {\n      * Note that segwit v0 script rules are enforced on all blocks except the\n      * BIP 16 exception blocks. */\n     int SegwitHeight;\n+    /** Block height at which Schnorr/Taproot (BIPs 340-342) becomes active. */\n+    int TaprootHeight;\n     /** Don't warn about unknown BIP 9 activations below this height.\n      * This prevents us from warning about the CSV and segwit activations. */\n     int MinBIP9WarningHeight;\n@@ -125,6 +127,7 @@ struct Params {\n         case DEPLOYMENT_DERSIG: return BIP66Height;\n         case DEPLOYMENT_CSV: return CSVHeight;\n         case DEPLOYMENT_SEGWIT: return SegwitHeight;\n+        case DEPLOYMENT_TAPROOT: return TaprootHeight;\n         } // no default case, so the compiler can warn about missing cases\n         assert(false);\n     }"
      },
      {
        "sha": "7eb8000cf1d54b1f2c5b7b14430a7e949d13158d",
        "filename": "src/deploymentinfo.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 4,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa7354010811c81780530d3bd5032ff6b9473153/src/deploymentinfo.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa7354010811c81780530d3bd5032ff6b9473153/src/deploymentinfo.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/deploymentinfo.cpp?ref=fa7354010811c81780530d3bd5032ff6b9473153",
        "patch": "@@ -11,10 +11,6 @@ const struct VBDeploymentInfo VersionBitsDeploymentInfo[Consensus::MAX_VERSION_B\n         /*.name =*/ \"testdummy\",\n         /*.gbt_force =*/ true,\n     },\n-    {\n-        /*.name =*/ \"taproot\",\n-        /*.gbt_force =*/ true,\n-    },\n };\n \n std::string DeploymentName(Consensus::BuriedDeployment dep)\n@@ -26,6 +22,7 @@ std::string DeploymentName(Consensus::BuriedDeployment dep)\n     case Consensus::DEPLOYMENT_DERSIG: return \"bip66\";\n     case Consensus::DEPLOYMENT_CSV: return \"csv\";\n     case Consensus::DEPLOYMENT_SEGWIT: return \"segwit\";\n+    case Consensus::DEPLOYMENT_TAPROOT: return \"taproot\";\n     } // no default case, so the compiler can warn about missing cases\n     assert(false);\n }"
      },
      {
        "sha": "d172732f5d4662be6dbf263e1ca659ab84adae2c",
        "filename": "test/functional/feature_taproot.py",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa7354010811c81780530d3bd5032ff6b9473153/test/functional/feature_taproot.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa7354010811c81780530d3bd5032ff6b9473153/test/functional/feature_taproot.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_taproot.py?ref=fa7354010811c81780530d3bd5032ff6b9473153",
        "patch": "@@ -1260,7 +1260,7 @@ def set_test_params(self):\n         if self.options.previous_release:\n             self.wallet_names = [None, self.default_wallet_name]\n         else:\n-            self.extra_args[0].append(\"-vbparams=taproot:1:1\")\n+            self.extra_args[0].append(\"-testactivationheight=taproot@999999\")\n \n     def setup_nodes(self):\n         self.add_nodes(self.num_nodes, self.extra_args, versions=["
      },
      {
        "sha": "8edb803a4a90a36bdbab131b8974ca54041cf796",
        "filename": "test/functional/rpc_blockchain.py",
        "status": "modified",
        "additions": 2,
        "deletions": 12,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa7354010811c81780530d3bd5032ff6b9473153/test/functional/rpc_blockchain.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa7354010811c81780530d3bd5032ff6b9473153/test/functional/rpc_blockchain.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/rpc_blockchain.py?ref=fa7354010811c81780530d3bd5032ff6b9473153",
        "patch": "@@ -148,6 +148,7 @@ def _test_getblockchaininfo(self):\n             '-testactivationheight=cltv@4',\n             '-testactivationheight=csv@5',\n             '-testactivationheight=segwit@6',\n+            '-testactivationheight=taproot@7',\n         ])\n \n         res = self.nodes[0].getblockchaininfo()\n@@ -167,6 +168,7 @@ def _test_getblockchaininfo(self):\n             'bip65': {'type': 'buried', 'active': True, 'height': 4},\n             'csv': {'type': 'buried', 'active': True, 'height': 5},\n             'segwit': {'type': 'buried', 'active': True, 'height': 6},\n+            'taproot': {'type': 'buried', 'active': True, 'height': 7},\n             'testdummy': {\n                 'type': 'bip9',\n                 'bip9': {\n@@ -186,18 +188,6 @@ def _test_getblockchaininfo(self):\n                 },\n                 'active': False\n             },\n-            'taproot': {\n-                'type': 'bip9',\n-                'bip9': {\n-                    'status': 'active',\n-                    'start_time': -1,\n-                    'timeout': 9223372036854775807,\n-                    'since': 0,\n-                    'min_activation_height': 0,\n-                },\n-                'height': 0,\n-                'active': True\n-            }\n         })\n \n     def _test_getchaintxstats(self):"
      },
      {
        "sha": "0eccc95301944fd80a87ec7b9f23f7cc321106cb",
        "filename": "test/functional/wallet_taproot.py",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa7354010811c81780530d3bd5032ff6b9473153/test/functional/wallet_taproot.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa7354010811c81780530d3bd5032ff6b9473153/test/functional/wallet_taproot.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/wallet_taproot.py?ref=fa7354010811c81780530d3bd5032ff6b9473153",
        "patch": "@@ -180,7 +180,11 @@ class WalletTaprootTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 3\n         self.setup_clean_chain = True\n-        self.extra_args = [['-keypool=100'], ['-keypool=100'], [\"-vbparams=taproot:1:1\"]]\n+        self.extra_args = [\n+            ['-keypool=100'],\n+            ['-keypool=100'],\n+            [\"-testactivationheight=taproot@999999\"],\n+        ]\n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):"
      }
    ]
  }
]