[
  {
    "sha": "f82a7831a4027d44d427bcf3aea87f341fb668c4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmODJhNzgzMWE0MDI3ZDQ0ZDQyN2JjZjNhZWE4N2YzNDFmYjY2OGM0",
    "commit": {
      "author": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2015-10-07T13:26:49Z"
      },
      "committer": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2016-01-04T04:43:14Z"
      },
      "message": "Created a SoftForks unit containing only IsSuperMajority() function.",
      "tree": {
        "sha": "0dabb2deb5c667151e40a0e65af93f6beacfd894",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0dabb2deb5c667151e40a0e65af93f6beacfd894"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f82a7831a4027d44d427bcf3aea87f341fb668c4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f82a7831a4027d44d427bcf3aea87f341fb668c4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f82a7831a4027d44d427bcf3aea87f341fb668c4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f82a7831a4027d44d427bcf3aea87f341fb668c4/comments",
    "author": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "be9a9a3d2253ceccf123572b97a890c489a5a9be",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/be9a9a3d2253ceccf123572b97a890c489a5a9be",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/be9a9a3d2253ceccf123572b97a890c489a5a9be"
      }
    ],
    "stats": {
      "total": 50,
      "additions": 50,
      "deletions": 0
    },
    "files": [
      {
        "sha": "0a0fc2359790e5b009176f65a39507dd68c43470",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f82a7831a4027d44d427bcf3aea87f341fb668c4/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f82a7831a4027d44d427bcf3aea87f341fb668c4/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=f82a7831a4027d44d427bcf3aea87f341fb668c4",
        "patch": "@@ -102,6 +102,7 @@ BITCOIN_CORE_H = \\\n   consensus/consensus.h \\\n   consensus/merkle.h \\\n   consensus/params.h \\\n+  consensus/softforks.h \\\n   consensus/validation.h \\\n   core_io.h \\\n   core_memusage.h \\\n@@ -188,6 +189,7 @@ libbitcoin_server_a_SOURCES = \\\n   bloom.cpp \\\n   chain.cpp \\\n   checkpoints.cpp \\\n+  consensus/softforks.cpp \\\n   httprpc.cpp \\\n   httpserver.cpp \\\n   init.cpp \\"
      },
      {
        "sha": "42ca875555ea3f8e34f17dfd654ba1cbe8dc6c31",
        "filename": "src/consensus/softforks.cpp",
        "status": "added",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f82a7831a4027d44d427bcf3aea87f341fb668c4/src/consensus/softforks.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f82a7831a4027d44d427bcf3aea87f341fb668c4/src/consensus/softforks.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/softforks.cpp?ref=f82a7831a4027d44d427bcf3aea87f341fb668c4",
        "patch": "@@ -0,0 +1,25 @@\n+// Copyright (c) 2009-2015 Eric Lombrozo, The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"chain.h\"\n+#include \"consensus/params.h\"\n+#include \"softforks.h\"\n+\n+using namespace Consensus::SoftForks;\n+\n+/**\n+ * Returns true if there are nRequired or more blocks of minVersion or above\n+ * in the last Consensus::Params::nMajorityWindow blocks, starting at pstart and going backwards.\n+ */\n+bool Consensus::SoftForks::IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams)\n+{\n+    unsigned int nFound = 0;\n+    for (int i = 0; i < consensusParams.nMajorityWindow && nFound < nRequired && pstart != NULL; i++)\n+    {\n+        if (pstart->nVersion >= minVersion)\n+            ++nFound;\n+        pstart = pstart->pprev;\n+    }\n+    return (nFound >= nRequired);\n+}"
      },
      {
        "sha": "1316c73c66ab1dbb2f0efd25a73c33de5a36eaf8",
        "filename": "src/consensus/softforks.h",
        "status": "added",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f82a7831a4027d44d427bcf3aea87f341fb668c4/src/consensus/softforks.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f82a7831a4027d44d427bcf3aea87f341fb668c4/src/consensus/softforks.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/softforks.h?ref=f82a7831a4027d44d427bcf3aea87f341fb668c4",
        "patch": "@@ -0,0 +1,23 @@\n+// Copyright (c) 2009-2015 Eric Lombrozo, The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_SOFTFORKS_H\n+#define BITCOIN_SOFTFORKS_H\n+\n+class CBlockIndex;\n+namespace Consensus {\n+\n+struct Params;\n+namespace SoftForks {\n+\n+/**\n+ * Returns true if there are nRequired or more blocks of minVersion or above\n+ * in the last Consensus::Params::nMajorityWindow blocks, starting at pstart and going backwards.\n+ */\n+bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams);\n+\n+}\n+}\n+\n+#endif // BITCOIN_SOFTFORKS_H"
      }
    ]
  },
  {
    "sha": "cad891bca4b41c93c8a1032a8497b31a48765fc6",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjYWQ4OTFiY2E0YjQxYzkzYzhhMTAzMmE4NDk3YjMxYTQ4NzY1ZmM2",
    "commit": {
      "author": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2015-10-07T13:32:20Z"
      },
      "committer": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2016-01-04T04:45:03Z"
      },
      "message": "Calling IsSuperMajority() inside SoftForks unit in main.cpp",
      "tree": {
        "sha": "dfad7c725edc5b66993f16b0bbbe364f80165dfc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dfad7c725edc5b66993f16b0bbbe364f80165dfc"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cad891bca4b41c93c8a1032a8497b31a48765fc6",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cad891bca4b41c93c8a1032a8497b31a48765fc6",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/cad891bca4b41c93c8a1032a8497b31a48765fc6",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cad891bca4b41c93c8a1032a8497b31a48765fc6/comments",
    "author": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f82a7831a4027d44d427bcf3aea87f341fb668c4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f82a7831a4027d44d427bcf3aea87f341fb668c4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f82a7831a4027d44d427bcf3aea87f341fb668c4"
      }
    ],
    "stats": {
      "total": 15,
      "additions": 8,
      "deletions": 7
    },
    "files": [
      {
        "sha": "9925c04afe5a2c76c22743338ab8918a3684507b",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 7,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/cad891bca4b41c93c8a1032a8497b31a48765fc6/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/cad891bca4b41c93c8a1032a8497b31a48765fc6/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=cad891bca4b41c93c8a1032a8497b31a48765fc6",
        "patch": "@@ -13,6 +13,7 @@\n #include \"checkqueue.h\"\n #include \"consensus/consensus.h\"\n #include \"consensus/merkle.h\"\n+#include \"consensus/softforks.h\"\n #include \"consensus/validation.h\"\n #include \"hash.h\"\n #include \"init.h\"\n@@ -2031,13 +2032,13 @@ bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockIndex* pin\n \n     // Start enforcing the DERSIG (BIP66) rules, for block.nVersion=3 blocks,\n     // when 75% of the network has upgraded:\n-    if (block.nVersion >= 3 && IsSuperMajority(3, pindex->pprev, chainparams.GetConsensus().nMajorityEnforceBlockUpgrade, chainparams.GetConsensus())) {\n+    if (block.nVersion >= 3 && Consensus::SoftForks::IsSuperMajority(3, pindex->pprev, chainparams.GetConsensus().nMajorityEnforceBlockUpgrade, chainparams.GetConsensus())) {\n         flags |= SCRIPT_VERIFY_DERSIG;\n     }\n \n     // Start enforcing CHECKLOCKTIMEVERIFY, (BIP65) for block.nVersion=4\n     // blocks, when 75% of the network has upgraded:\n-    if (block.nVersion >= 4 && IsSuperMajority(4, pindex->pprev, chainparams.GetConsensus().nMajorityEnforceBlockUpgrade, chainparams.GetConsensus())) {\n+    if (block.nVersion >= 4 && Consensus::SoftForks::IsSuperMajority(4, pindex->pprev, chainparams.GetConsensus().nMajorityEnforceBlockUpgrade, chainparams.GetConsensus())) {\n         flags |= SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY;\n     }\n \n@@ -3014,17 +3015,17 @@ bool ContextualCheckBlockHeader(const CBlockHeader& block, CValidationState& sta\n                              REJECT_INVALID, \"time-too-old\");\n \n     // Reject block.nVersion=1 blocks when 95% (75% on testnet) of the network has upgraded:\n-    if (block.nVersion < 2 && IsSuperMajority(2, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n+    if (block.nVersion < 2 && Consensus::SoftForks::IsSuperMajority(2, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n         return state.Invalid(error(\"%s: rejected nVersion=1 block\", __func__),\n                              REJECT_OBSOLETE, \"bad-version\");\n \n     // Reject block.nVersion=2 blocks when 95% (75% on testnet) of the network has upgraded:\n-    if (block.nVersion < 3 && IsSuperMajority(3, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n-        return state.Invalid(error(\"%s: rejected nVersion=2 block\", __func__),\n+    if (block.nVersion < 3 && Consensus::SoftForks::IsSuperMajority(3, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n+        return state.Invalid(error(\"%s : rejected nVersion=2 block\", __func__),\n                              REJECT_OBSOLETE, \"bad-version\");\n \n     // Reject block.nVersion=3 blocks when 95% (75% on testnet) of the network has upgraded:\n-    if (block.nVersion < 4 && IsSuperMajority(4, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n+    if (block.nVersion < 4 && Consensus::SoftForks::IsSuperMajority(4, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n         return state.Invalid(error(\"%s : rejected nVersion=3 block\", __func__),\n                              REJECT_OBSOLETE, \"bad-version\");\n \n@@ -3049,7 +3050,7 @@ bool ContextualCheckBlock(const CBlock& block, CValidationState& state, CBlockIn\n \n     // Enforce block.nVersion=2 rule that the coinbase starts with serialized block height\n     // if 750 of the last 1,000 blocks are version 2 or greater (51/100 if testnet):\n-    if (block.nVersion >= 2 && IsSuperMajority(2, pindexPrev, consensusParams.nMajorityEnforceBlockUpgrade, consensusParams))\n+    if (block.nVersion >= 2 && Consensus::SoftForks::IsSuperMajority(2, pindexPrev, consensusParams.nMajorityEnforceBlockUpgrade, consensusParams))\n     {\n         CScript expect = CScript() << nHeight;\n         if (block.vtx[0].vin[0].scriptSig.size() < expect.size() ||"
      }
    ]
  },
  {
    "sha": "2347ba52a81ec3015978640fa65fbc698121b291",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyMzQ3YmE1MmE4MWVjMzAxNTk3ODY0MGZhNjVmYmM2OTgxMjFiMjkx",
    "commit": {
      "author": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2015-10-07T13:42:00Z"
      },
      "committer": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2016-01-04T04:45:56Z"
      },
      "message": "Removed IsSuperMajority() from main.cpp",
      "tree": {
        "sha": "919ac5719ba78b5c085c77abb1b43644e867ac1c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/919ac5719ba78b5c085c77abb1b43644e867ac1c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2347ba52a81ec3015978640fa65fbc698121b291",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2347ba52a81ec3015978640fa65fbc698121b291",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2347ba52a81ec3015978640fa65fbc698121b291",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2347ba52a81ec3015978640fa65fbc698121b291/comments",
    "author": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "cad891bca4b41c93c8a1032a8497b31a48765fc6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cad891bca4b41c93c8a1032a8497b31a48765fc6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/cad891bca4b41c93c8a1032a8497b31a48765fc6"
      }
    ],
    "stats": {
      "total": 17,
      "additions": 0,
      "deletions": 17
    },
    "files": [
      {
        "sha": "e08ecd3fcd57a365ce520ba75dc6f83cad1fbe9a",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 17,
        "changes": 17,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2347ba52a81ec3015978640fa65fbc698121b291/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2347ba52a81ec3015978640fa65fbc698121b291/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=2347ba52a81ec3015978640fa65fbc698121b291",
        "patch": "@@ -89,11 +89,6 @@ map<uint256, COrphanTx> mapOrphanTransactions GUARDED_BY(cs_main);;\n map<uint256, set<uint256> > mapOrphanTransactionsByPrev GUARDED_BY(cs_main);;\n void EraseOrphansFor(NodeId peer) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n \n-/**\n- * Returns true if there are nRequired or more blocks of minVersion or above\n- * in the last Consensus::Params::nMajorityWindow blocks, starting at pstart and going backwards.\n- */\n-static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams);\n static void CheckBlockIndex(const Consensus::Params& consensusParams);\n \n /** Constant stuff for coinbase transactions we create: */\n@@ -3173,18 +3168,6 @@ static bool AcceptBlock(const CBlock& block, CValidationState& state, const CCha\n     return true;\n }\n \n-static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams)\n-{\n-    unsigned int nFound = 0;\n-    for (int i = 0; i < consensusParams.nMajorityWindow && nFound < nRequired && pstart != NULL; i++)\n-    {\n-        if (pstart->nVersion >= minVersion)\n-            ++nFound;\n-        pstart = pstart->pprev;\n-    }\n-    return (nFound >= nRequired);\n-}\n-\n \n bool ProcessNewBlock(CValidationState& state, const CChainParams& chainparams, const CNode* pfrom, const CBlock* pblock, bool fForceProcessing, CDiskBlockPos* dbp)\n {"
      }
    ]
  },
  {
    "sha": "b9aa4f7bb5a734056d1bb51b8f68a6f0e16acdb4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiOWFhNGY3YmI1YTczNDA1NmQxYmI1MWI4ZjY4YTZmMGUxNmFjZGI0",
    "commit": {
      "author": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2015-10-07T14:01:01Z"
      },
      "committer": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2016-01-04T06:29:39Z"
      },
      "message": "Added soft fork rules for existing BIPs and SoftForks::CheckBlockVersion() and SoftForks::IsActive() functions to the softforks unit.",
      "tree": {
        "sha": "9028bae570ede53d804eb0dddc8fdba203b2ba0d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9028bae570ede53d804eb0dddc8fdba203b2ba0d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b9aa4f7bb5a734056d1bb51b8f68a6f0e16acdb4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b9aa4f7bb5a734056d1bb51b8f68a6f0e16acdb4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b9aa4f7bb5a734056d1bb51b8f68a6f0e16acdb4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b9aa4f7bb5a734056d1bb51b8f68a6f0e16acdb4/comments",
    "author": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2347ba52a81ec3015978640fa65fbc698121b291",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2347ba52a81ec3015978640fa65fbc698121b291",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2347ba52a81ec3015978640fa65fbc698121b291"
      }
    ],
    "stats": {
      "total": 91,
      "additions": 91,
      "deletions": 0
    },
    "files": [
      {
        "sha": "80f80417d1e88857c26f0e66dc0529b48f883204",
        "filename": "src/consensus/softforks.cpp",
        "status": "modified",
        "additions": 79,
        "deletions": 0,
        "changes": 79,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b9aa4f7bb5a734056d1bb51b8f68a6f0e16acdb4/src/consensus/softforks.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b9aa4f7bb5a734056d1bb51b8f68a6f0e16acdb4/src/consensus/softforks.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/softforks.cpp?ref=b9aa4f7bb5a734056d1bb51b8f68a6f0e16acdb4",
        "patch": "@@ -23,3 +23,82 @@ bool Consensus::SoftForks::IsSuperMajority(int minVersion, const CBlockIndex* ps\n     }\n     return (nFound >= nRequired);\n }\n+\n+bool Consensus::SoftForks::CheckBlockVersion(const CBlockIndex& blockIndex, const Consensus::Params& consensusParams, CBlockIndex* pindexPrev)\n+{\n+    if (!pindexPrev)\n+        pindexPrev = blockIndex.pprev;\n+\n+    // Reject blockIndex.nVersion=1 blocks when 95% (75% on testnet) of the network has upgraded:\n+    if (blockIndex.nVersion < 2 && IsSuperMajority(2, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n+        return false;\n+\n+    // Reject blockIndex.nVersion=2 blocks when 95% (75% on testnet) of the network has upgraded:\n+    if (blockIndex.nVersion < 3 && IsSuperMajority(3, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n+        return false;\n+\n+    // Reject blockIndex.nVersion=3 blocks when 95% (75% on testnet) of the network has upgraded:\n+    if (blockIndex.nVersion < 4 && IsSuperMajority(4, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n+        return false;\n+\n+    return true;\n+}\n+\n+bool Consensus::SoftForks::IsActive(Rule rule, const CBlockIndex& blockIndex, const Consensus::Params& consensusParams, CBlockIndex* pindexPrev)\n+{\n+    if (!pindexPrev)\n+        pindexPrev = blockIndex.pprev;\n+\n+    switch (rule)\n+    {\n+    case BIP16:\n+        // BIP16 didn't become active until Apr 1 2012\n+        return blockIndex.GetBlockTime() >= 1333238400;\n+\n+    case BIP30:\n+        {\n+            // Do not allow blocks that contain transactions which 'overwrite' older transactions,\n+            // unless those are already completely spent.\n+            // If such overwrites are allowed, coinbases and transactions depending upon those\n+            // can be duplicated to remove the ability to spend the first instance -- even after\n+            // being sent to another address.\n+            // See BIP30 and http://r6.ca/blog/20120206T005236Z.html for more information.\n+            // This logic is not necessary for memory pool transactions, as AcceptToMemoryPool\n+            // already refuses previously-known transaction ids entirely.\n+            // This rule was originally applied to all blocks with a timestamp after March 15, 2012, 0:00 UTC.\n+            // Now that the whole chain is irreversibly beyond that time it is applied to all blocks except the\n+            // two in the chain that violate it. This prevents exploiting the issue against nodes during their\n+            // initial block download.\n+            bool fEnforceBIP30 = (!blockIndex.phashBlock) || // Enforce on CreateNewBlock invocations which don't have a hash.\n+                                !((blockIndex.nHeight==91842 && blockIndex.GetBlockHash() == uint256S(\"0x00000000000a4d0a398161ffc163c503763b1f4360639393e0e4c8e300e0caec\")) ||\n+                                 (blockIndex.nHeight==91880 && blockIndex.GetBlockHash() == uint256S(\"0x00000000000743f190a18c5577a3c2d2a1f610ae9601ac046a38084ccb7cd721\")));\n+\n+            // Once BIP34 activated it was not possible to create new duplicate coinbases and thus other than starting\n+            // with the 2 existing duplicate coinbase pairs, not possible to create overwriting txs.  But by the\n+            // time BIP34 activated, in each of the existing pairs the duplicate coinbase had overwritten the first\n+            // before the first had been spent.  Since those coinbases are sufficiently buried its no longer possible to create further\n+            // duplicate transactions descending from the known pairs either.\n+            // If we're on the known chain at height greater than where BIP34 activated, we can save the db accesses needed for the BIP30 check.\n+            CBlockIndex *pindexBIP34height = pindexPrev->GetAncestor(consensusParams.BIP34Height);\n+            //Only continue to enforce if we're below BIP34 activation height or the block hash at that height doesn't correspond.\n+            return fEnforceBIP30 && (!pindexBIP34height || !(pindexBIP34height->GetBlockHash() == consensusParams.BIP34Hash));\n+        }\n+\n+    case BIP34:\n+        // Enforce block.nVersion=2 rule that the coinbase starts with serialized block height\n+        // if 750 of the last 1,000 blocks are version 2 or greater (51/100 if testnet):\n+        return blockIndex.nVersion >= 2 && IsSuperMajority(2, pindexPrev, consensusParams.nMajorityEnforceBlockUpgrade, consensusParams);\n+        \n+    case BIP65:\n+        // Start enforcing CHECKLOCKTIMEVERIFY, (BIP65) for blockIndex.nVersion=4, when 75% of the network has upgraded:\n+        return blockIndex.nVersion >= 4 && IsSuperMajority(4, pindexPrev, consensusParams.nMajorityEnforceBlockUpgrade, consensusParams);\n+\n+    case BIP66:\n+        // Start enforcing the DERSIG (BIP66) rules, for block.nVersion=3 blocks, when 75% of the network has upgraded:\n+        return blockIndex.nVersion >= 3 && IsSuperMajority(3, pindexPrev, consensusParams.nMajorityEnforceBlockUpgrade, consensusParams);\n+        //return (blockIndex.nVersion >= 3) && (blockIndex.nHeight >= 358806 && blockIndex.GetAncestor(358806)->GetBlockHash() == uint256S(\"00000000000000000fb122c91c210b3060fff913e483711f25bfb35d1d63537b\"));\n+\n+    default:\n+        return false;\n+    }\n+}"
      },
      {
        "sha": "d5d59a978ea0c3ceae2582d14848a9488efb8c95",
        "filename": "src/consensus/softforks.h",
        "status": "modified",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b9aa4f7bb5a734056d1bb51b8f68a6f0e16acdb4/src/consensus/softforks.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b9aa4f7bb5a734056d1bb51b8f68a6f0e16acdb4/src/consensus/softforks.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/softforks.h?ref=b9aa4f7bb5a734056d1bb51b8f68a6f0e16acdb4",
        "patch": "@@ -17,6 +17,18 @@ namespace SoftForks {\n  */\n bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams);\n \n+enum Rule\n+{\n+    BIP16,\n+    BIP30,\n+    BIP34,\n+    BIP65,\n+    BIP66,\n+};\n+\n+bool CheckBlockVersion(const CBlockIndex& blockIndex, const Consensus::Params& consensusParams, CBlockIndex* pindexPrev = NULL);\n+bool IsActive(Rule rule, const CBlockIndex& blockIndex, const Consensus::Params& consensusParams, CBlockIndex* pindexPrev = NULL);\n+\n }\n }\n "
      }
    ]
  },
  {
    "sha": "0b2a516fcefcc4b2140cf199dd4e354d5aa600d3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowYjJhNTE2ZmNlZmNjNGIyMTQwY2YxOTlkZDRlMzU0ZDVhYTYwMGQz",
    "commit": {
      "author": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2015-10-07T14:06:51Z"
      },
      "committer": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2016-01-04T06:29:42Z"
      },
      "message": "Calling SoftForks::IsActive() in main.cpp instead of calling SoftForks::IsSuperMajority directly.",
      "tree": {
        "sha": "64bc38416c623d920e7e703d8b333d41916211b8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/64bc38416c623d920e7e703d8b333d41916211b8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0b2a516fcefcc4b2140cf199dd4e354d5aa600d3",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0b2a516fcefcc4b2140cf199dd4e354d5aa600d3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0b2a516fcefcc4b2140cf199dd4e354d5aa600d3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0b2a516fcefcc4b2140cf199dd4e354d5aa600d3/comments",
    "author": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b9aa4f7bb5a734056d1bb51b8f68a6f0e16acdb4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b9aa4f7bb5a734056d1bb51b8f68a6f0e16acdb4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b9aa4f7bb5a734056d1bb51b8f68a6f0e16acdb4"
      }
    ],
    "stats": {
      "total": 44,
      "additions": 7,
      "deletions": 37
    },
    "files": [
      {
        "sha": "d49a3fa6a8c85860f73a782220f5a929bceb2c3e",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 37,
        "changes": 44,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0b2a516fcefcc4b2140cf199dd4e354d5aa600d3/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0b2a516fcefcc4b2140cf199dd4e354d5aa600d3/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=0b2a516fcefcc4b2140cf199dd4e354d5aa600d3",
        "patch": "@@ -1984,31 +1984,8 @@ bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockIndex* pin\n     int64_t nTime1 = GetTimeMicros(); nTimeCheck += nTime1 - nTimeStart;\n     LogPrint(\"bench\", \"    - Sanity checks: %.2fms [%.2fs]\\n\", 0.001 * (nTime1 - nTimeStart), nTimeCheck * 0.000001);\n \n-    // Do not allow blocks that contain transactions which 'overwrite' older transactions,\n-    // unless those are already completely spent.\n-    // If such overwrites are allowed, coinbases and transactions depending upon those\n-    // can be duplicated to remove the ability to spend the first instance -- even after\n-    // being sent to another address.\n-    // See BIP30 and http://r6.ca/blog/20120206T005236Z.html for more information.\n-    // This logic is not necessary for memory pool transactions, as AcceptToMemoryPool\n-    // already refuses previously-known transaction ids entirely.\n-    // This rule was originally applied to all blocks with a timestamp after March 15, 2012, 0:00 UTC.\n-    // Now that the whole chain is irreversibly beyond that time it is applied to all blocks except the\n-    // two in the chain that violate it. This prevents exploiting the issue against nodes during their\n-    // initial block download.\n-    bool fEnforceBIP30 = (!pindex->phashBlock) || // Enforce on CreateNewBlock invocations which don't have a hash.\n-                          !((pindex->nHeight==91842 && pindex->GetBlockHash() == uint256S(\"0x00000000000a4d0a398161ffc163c503763b1f4360639393e0e4c8e300e0caec\")) ||\n-                           (pindex->nHeight==91880 && pindex->GetBlockHash() == uint256S(\"0x00000000000743f190a18c5577a3c2d2a1f610ae9601ac046a38084ccb7cd721\")));\n-\n-    // Once BIP34 activated it was not possible to create new duplicate coinbases and thus other than starting\n-    // with the 2 existing duplicate coinbase pairs, not possible to create overwriting txs.  But by the\n-    // time BIP34 activated, in each of the existing pairs the duplicate coinbase had overwritten the first\n-    // before the first had been spent.  Since those coinbases are sufficiently buried its no longer possible to create further\n-    // duplicate transactions descending from the known pairs either.\n-    // If we're on the known chain at height greater than where BIP34 activated, we can save the db accesses needed for the BIP30 check.\n-    CBlockIndex *pindexBIP34height = pindex->pprev->GetAncestor(chainparams.GetConsensus().BIP34Height);\n-    //Only continue to enforce if we're below BIP34 activation height or the block hash at that height doesn't correspond.\n-    fEnforceBIP30 = fEnforceBIP30 && (!pindexBIP34height || !(pindexBIP34height->GetBlockHash() == chainparams.GetConsensus().BIP34Hash));\n+    // For soft fork details, look in consensus/softforks.cpp\n+    bool fEnforceBIP30 = Consensus::SoftForks::IsActive(Consensus::SoftForks::BIP30, *pindex, chainparams.GetConsensus());\n \n     if (fEnforceBIP30) {\n         BOOST_FOREACH(const CTransaction& tx, block.vtx) {\n@@ -2019,21 +1996,15 @@ bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockIndex* pin\n         }\n     }\n \n-    // BIP16 didn't become active until Apr 1 2012\n-    int64_t nBIP16SwitchTime = 1333238400;\n-    bool fStrictPayToScriptHash = (pindex->GetBlockTime() >= nBIP16SwitchTime);\n+    bool fStrictPayToScriptHash = Consensus::SoftForks::IsActive(Consensus::SoftForks::BIP16, *pindex, chainparams.GetConsensus());\n \n     unsigned int flags = fStrictPayToScriptHash ? SCRIPT_VERIFY_P2SH : SCRIPT_VERIFY_NONE;\n \n-    // Start enforcing the DERSIG (BIP66) rules, for block.nVersion=3 blocks,\n-    // when 75% of the network has upgraded:\n-    if (block.nVersion >= 3 && Consensus::SoftForks::IsSuperMajority(3, pindex->pprev, chainparams.GetConsensus().nMajorityEnforceBlockUpgrade, chainparams.GetConsensus())) {\n+    if (Consensus::SoftForks::IsActive(Consensus::SoftForks::BIP66, *pindex, chainparams.GetConsensus())) {\n         flags |= SCRIPT_VERIFY_DERSIG;\n     }\n \n-    // Start enforcing CHECKLOCKTIMEVERIFY, (BIP65) for block.nVersion=4\n-    // blocks, when 75% of the network has upgraded:\n-    if (block.nVersion >= 4 && Consensus::SoftForks::IsSuperMajority(4, pindex->pprev, chainparams.GetConsensus().nMajorityEnforceBlockUpgrade, chainparams.GetConsensus())) {\n+    if (Consensus::SoftForks::IsActive(Consensus::SoftForks::BIP65, *pindex, chainparams.GetConsensus())) {\n         flags |= SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY;\n     }\n \n@@ -3043,9 +3014,8 @@ bool ContextualCheckBlock(const CBlock& block, CValidationState& state, CBlockIn\n         }\n     }\n \n-    // Enforce block.nVersion=2 rule that the coinbase starts with serialized block height\n-    // if 750 of the last 1,000 blocks are version 2 or greater (51/100 if testnet):\n-    if (block.nVersion >= 2 && Consensus::SoftForks::IsSuperMajority(2, pindexPrev, consensusParams.nMajorityEnforceBlockUpgrade, consensusParams))\n+    // For details look in softforks.cpp.\n+    if (Consensus::SoftForks::IsActive(Consensus::SoftForks::BIP34, block, consensusParams, pindexPrev))\n     {\n         CScript expect = CScript() << nHeight;\n         if (block.vtx[0].vin[0].scriptSig.size() < expect.size() ||"
      }
    ]
  },
  {
    "sha": "08591fe8c854b50bbfcb007a629eed2587996e46",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowODU5MWZlOGM4NTRiNTBiYmZjYjAwN2E2MjllZWQyNTg3OTk2ZTQ2",
    "commit": {
      "author": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2015-10-07T14:13:05Z"
      },
      "committer": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2016-01-04T06:29:43Z"
      },
      "message": "Call SoftForks::CheckBlockVersion() instead of calling SoftForks::IsSuperMajority() directly in main.cpp",
      "tree": {
        "sha": "6d55a49d1354480b1857878b0f73de1eacbfac64",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6d55a49d1354480b1857878b0f73de1eacbfac64"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/08591fe8c854b50bbfcb007a629eed2587996e46",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/08591fe8c854b50bbfcb007a629eed2587996e46",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/08591fe8c854b50bbfcb007a629eed2587996e46",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/08591fe8c854b50bbfcb007a629eed2587996e46/comments",
    "author": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0b2a516fcefcc4b2140cf199dd4e354d5aa600d3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0b2a516fcefcc4b2140cf199dd4e354d5aa600d3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0b2a516fcefcc4b2140cf199dd4e354d5aa600d3"
      }
    ],
    "stats": {
      "total": 17,
      "additions": 4,
      "deletions": 13
    },
    "files": [
      {
        "sha": "b6a4ed4d715390fc0d7bbbe7e8da680fad86cdac",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 13,
        "changes": 17,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/08591fe8c854b50bbfcb007a629eed2587996e46/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/08591fe8c854b50bbfcb007a629eed2587996e46/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=08591fe8c854b50bbfcb007a629eed2587996e46",
        "patch": "@@ -2980,19 +2980,10 @@ bool ContextualCheckBlockHeader(const CBlockHeader& block, CValidationState& sta\n         return state.Invalid(error(\"%s: block's timestamp is too early\", __func__),\n                              REJECT_INVALID, \"time-too-old\");\n \n-    // Reject block.nVersion=1 blocks when 95% (75% on testnet) of the network has upgraded:\n-    if (block.nVersion < 2 && Consensus::SoftForks::IsSuperMajority(2, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n-        return state.Invalid(error(\"%s: rejected nVersion=1 block\", __func__),\n-                             REJECT_OBSOLETE, \"bad-version\");\n-\n-    // Reject block.nVersion=2 blocks when 95% (75% on testnet) of the network has upgraded:\n-    if (block.nVersion < 3 && Consensus::SoftForks::IsSuperMajority(3, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n-        return state.Invalid(error(\"%s : rejected nVersion=2 block\", __func__),\n-                             REJECT_OBSOLETE, \"bad-version\");\n-\n-    // Reject block.nVersion=3 blocks when 95% (75% on testnet) of the network has upgraded:\n-    if (block.nVersion < 4 && Consensus::SoftForks::IsSuperMajority(4, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n-        return state.Invalid(error(\"%s : rejected nVersion=3 block\", __func__),\n+    // The following replaces explicit calls to SoftForks::IsSuperMajority()\n+    // For details look in consensus/softforks.cpp\n+    if (!Consensus::SoftForks::CheckBlockVersion(block, consensusParams, pindexPrev))\n+        return state.Invalid(error(\"%s: rejected nVersion=%d block\", __func__, block.nVersion),\n                              REJECT_OBSOLETE, \"bad-version\");\n \n     return true;"
      }
    ]
  },
  {
    "sha": "2b8466d201b22ccff592fa05ebbd604270a3c772",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyYjg0NjZkMjAxYjIyY2NmZjU5MmZhMDVlYmJkNjA0MjcwYTNjNzcy",
    "commit": {
      "author": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2015-10-07T19:27:43Z"
      },
      "committer": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2016-01-04T06:29:43Z"
      },
      "message": "Made IsSuperMajority() a static function of softforks.cpp and removed it from the unit interface.",
      "tree": {
        "sha": "3e90d0e1401866ea4b956bca871a3e9e01a36e13",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3e90d0e1401866ea4b956bca871a3e9e01a36e13"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2b8466d201b22ccff592fa05ebbd604270a3c772",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2b8466d201b22ccff592fa05ebbd604270a3c772",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2b8466d201b22ccff592fa05ebbd604270a3c772",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2b8466d201b22ccff592fa05ebbd604270a3c772/comments",
    "author": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "08591fe8c854b50bbfcb007a629eed2587996e46",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/08591fe8c854b50bbfcb007a629eed2587996e46",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/08591fe8c854b50bbfcb007a629eed2587996e46"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 1,
      "deletions": 7
    },
    "files": [
      {
        "sha": "14d128bf71a1077c958ae36e18098d620151a9a2",
        "filename": "src/consensus/softforks.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2b8466d201b22ccff592fa05ebbd604270a3c772/src/consensus/softforks.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2b8466d201b22ccff592fa05ebbd604270a3c772/src/consensus/softforks.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/softforks.cpp?ref=2b8466d201b22ccff592fa05ebbd604270a3c772",
        "patch": "@@ -12,7 +12,7 @@ using namespace Consensus::SoftForks;\n  * Returns true if there are nRequired or more blocks of minVersion or above\n  * in the last Consensus::Params::nMajorityWindow blocks, starting at pstart and going backwards.\n  */\n-bool Consensus::SoftForks::IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams)\n+static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams)\n {\n     unsigned int nFound = 0;\n     for (int i = 0; i < consensusParams.nMajorityWindow && nFound < nRequired && pstart != NULL; i++)"
      },
      {
        "sha": "444daa2b2b7cf8ca201f1e87d4a84c104d39827f",
        "filename": "src/consensus/softforks.h",
        "status": "modified",
        "additions": 0,
        "deletions": 6,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2b8466d201b22ccff592fa05ebbd604270a3c772/src/consensus/softforks.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2b8466d201b22ccff592fa05ebbd604270a3c772/src/consensus/softforks.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/softforks.h?ref=2b8466d201b22ccff592fa05ebbd604270a3c772",
        "patch": "@@ -11,12 +11,6 @@ namespace Consensus {\n struct Params;\n namespace SoftForks {\n \n-/**\n- * Returns true if there are nRequired or more blocks of minVersion or above\n- * in the last Consensus::Params::nMajorityWindow blocks, starting at pstart and going backwards.\n- */\n-bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams);\n-\n enum Rule\n {\n     BIP16,"
      }
    ]
  }
]