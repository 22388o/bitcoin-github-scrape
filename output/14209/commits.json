[
  {
    "sha": "fae3fbd61a89c7a35bc0eda91b1df61371dc0936",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWUzZmJkNjFhODljN2EzNWJjMGVkYTkxYjFkZjYxMzcxZGMwOTM2",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2018-09-12T15:21:01Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2018-09-12T15:28:01Z"
      },
      "message": "logging: Replace LogPrint macros with regular functions",
      "tree": {
        "sha": "744f9f900921b30c0bcc146adff259b6ea778a69",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/744f9f900921b30c0bcc146adff259b6ea778a69"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fae3fbd61a89c7a35bc0eda91b1df61371dc0936",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGcBAABCgAGBQJbmTCBAAoJEM4rdWl+aaVIK8cL/3UZS1pxquFrp+6m0jjnJlVB\nszEVERGlQRgFRg3QqJ25VUJpPzC9d8pTLTWjEsPZyOPn4t45UC9PiwnFOFU3MGhO\n7Vk/f8hw/kNIcSJyKoGDJ3ACQNPTDdK/EP0sNFQd25VcPKCNrpyCATYGeFgvTLGf\n8lw6LEw96+FtlxyGHhJCDA1x3vpWSgobSXcUteTxrpRt08F+ViWmzi6KxsjopZIE\nF/PlYNW4qBhtzypZ513dRHaR7jw/gA960jMcSaxlAku9o2cvmxkbLJIWyf4tuqYZ\ngAXqqRY4tQtPj1vwVUtl7G8mlqeIHWiEbQbJ5wxWTa6U2lMbteqb/emBekz8JUjF\n03bIGqPwR17tEPeUdjkuxmczsKvzEKbXhZ7fUeccbjx855gnzXYdUlVC7x6ZiVXW\ne6/mVBEcZEAvd6py7j4ea/c0RQ1wQI1kPnHzSSkYrcuzb0/HzTsCi/NLgo6ZagsM\nr103G0uaKmTLsReTwqQikKP3oo0wOcQ70LnYS/iWiA==\n=01rm\n-----END PGP SIGNATURE-----",
        "payload": "tree 744f9f900921b30c0bcc146adff259b6ea778a69\nparent 4103cc31690e5be21854a9628f57c54b880ee195\nauthor MarcoFalke <falke.marco@gmail.com> 1536765661 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1536766081 -0400\n\nlogging: Replace LogPrint macros with regular functions\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fae3fbd61a89c7a35bc0eda91b1df61371dc0936",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fae3fbd61a89c7a35bc0eda91b1df61371dc0936",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fae3fbd61a89c7a35bc0eda91b1df61371dc0936/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4103cc31690e5be21854a9628f57c54b880ee195",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4103cc31690e5be21854a9628f57c54b880ee195",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4103cc31690e5be21854a9628f57c54b880ee195"
      }
    ],
    "stats": {
      "total": 56,
      "additions": 23,
      "deletions": 33
    },
    "files": [
      {
        "sha": "0c8e7f52910b2a01621b004982315b2543655306",
        "filename": "src/logging.h",
        "status": "modified",
        "additions": 22,
        "deletions": 33,
        "changes": 55,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fae3fbd61a89c7a35bc0eda91b1df61371dc0936/src/logging.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fae3fbd61a89c7a35bc0eda91b1df61371dc0936/src/logging.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/logging.h?ref=fae3fbd61a89c7a35bc0eda91b1df61371dc0936",
        "patch": "@@ -125,42 +125,31 @@ std::vector<CLogCategoryActive> ListActiveLogCategories();\n /** Return true if str parses as a log category and set the flag */\n bool GetLogCategory(BCLog::LogFlags& flag, const std::string& str);\n \n-/** Get format string from VA_ARGS for error reporting */\n-template<typename... Args> std::string FormatStringFromLogArgs(const char *fmt, const Args&... args) { return fmt; }\n-\n-static inline void MarkUsed() {}\n-template<typename T, typename... Args> static inline void MarkUsed(const T& t, const Args&... args)\n-{\n-    (void)t;\n-    MarkUsed(args...);\n-}\n-\n // Be conservative when using LogPrintf/error or other things which\n // unconditionally log to debug.log! It should not be the case that an inbound\n // peer can fill up a user's disk with debug.log entries.\n \n-#ifdef USE_COVERAGE\n-#define LogPrintf(...) do { MarkUsed(__VA_ARGS__); } while(0)\n-#define LogPrint(category, ...) do { MarkUsed(__VA_ARGS__); } while(0)\n-#else\n-#define LogPrintf(...) do { \\\n-    if (g_logger->Enabled()) { \\\n-        std::string _log_msg_; /* Unlikely name to avoid shadowing variables */ \\\n-        try { \\\n-            _log_msg_ = tfm::format(__VA_ARGS__); \\\n-        } catch (tinyformat::format_error &fmterr) { \\\n-            /* Original format string will have newline so don't add one here */ \\\n-            _log_msg_ = \"Error \\\"\" + std::string(fmterr.what()) + \"\\\" while formatting log message: \" + FormatStringFromLogArgs(__VA_ARGS__); \\\n-        } \\\n-        g_logger->LogPrintStr(_log_msg_); \\\n-    } \\\n-} while(0)\n-\n-#define LogPrint(category, ...) do { \\\n-    if (LogAcceptCategory((category))) { \\\n-        LogPrintf(__VA_ARGS__); \\\n-    } \\\n-} while(0)\n-#endif\n+template <typename... Args>\n+static inline void LogPrintf(const char* fmt, const Args&... args)\n+{\n+    if (g_logger->Enabled()) {\n+        std::string log_msg;\n+        try {\n+            log_msg = tfm::format(fmt, args...);\n+        } catch (tinyformat::format_error& fmterr) {\n+            /* Original format string will have newline so don't add one here */\n+            log_msg = \"Error \\\"\" + std::string(fmterr.what()) + \"\\\" while formatting log message: \" + fmt;\n+        }\n+        g_logger->LogPrintStr(log_msg);\n+    }\n+}\n+\n+template <typename... Args>\n+static inline void LogPrint(const BCLog::LogFlags& category, const Args&... args)\n+{\n+    if (LogAcceptCategory((category))) {\n+        LogPrintf(args...);\n+    }\n+}\n \n #endif // BITCOIN_LOGGING_H"
      },
      {
        "sha": "2fb35fd8cacaa7962fc353e0fc0cd3fec04089aa",
        "filename": "test/lint/lint-format-strings.py",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fae3fbd61a89c7a35bc0eda91b1df61371dc0936/test/lint/lint-format-strings.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fae3fbd61a89c7a35bc0eda91b1df61371dc0936/test/lint/lint-format-strings.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/lint/lint-format-strings.py?ref=fae3fbd61a89c7a35bc0eda91b1df61371dc0936",
        "patch": "@@ -20,6 +20,7 @@\n     (\"src/util.cpp\", \"strprintf(COPYRIGHT_HOLDERS, COPYRIGHT_HOLDERS_SUBSTITUTION)\"),\n     (\"src/wallet/wallet.h\",  \"WalletLogPrintf(std::string fmt, Params... parameters)\"),\n     (\"src/wallet/wallet.h\", \"LogPrintf((\\\"%s \\\" + fmt).c_str(), GetDisplayName(), parameters...)\"),\n+    (\"src/logging.h\", \"LogPrintf(const char* fmt, const Args&... args)\"),\n ]\n \n "
      }
    ]
  }
]