[
  {
    "sha": "8d2f847ed913f15677ae978a412015ac844ffceb",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4ZDJmODQ3ZWQ5MTNmMTU2NzdhZTk3OGE0MTIwMTVhYzg0NGZmY2Vi",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-09-06T18:59:58Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-09-06T21:43:51Z"
      },
      "message": "sync: inline lock contention logging macro to fix time duration\n\nCo-authored-by: Martin Ankerl <martin.ankerl@gmail.com>",
      "tree": {
        "sha": "a773d0e75b49b4b5b301182b49a66f3aafee483f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a773d0e75b49b4b5b301182b49a66f3aafee483f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8d2f847ed913f15677ae978a412015ac844ffceb",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmE2i5cACgkQT1chs9Dj\nkh0S6Q//bxkaNoB2yZPWE7WylLnTgSHKkuhnpRD/YwBdnp2oFIliTT/mMz2HVj5x\n0+QYf4RTkFriDWd8bzYnWkz6MBbXsMkwPV/iMpgy+jZkVPSZwRyzK7c6ZF2ztakU\narNYVxLT6wid51+mGMr7zp6ml8pAjO0+Xgma+7WZ3VTThH3CEOTPPzf4Br6KLWfc\nzsrsK4T+uFOURm1Rs3ekeMYDKuvaSjr9vhMrpjGLZOCLsrq7Bh3sPxv3FUQJCKzI\nP5hCl8egUj/FcY2TSTVSl9899uKWXHzfVztpxL5Vh3twy2yiuxchGAZAg73KCgw6\nt/QhSrFql9l8EMmXRBij74mdxWo8Vy1CdqPsYjUbjihOMmVGIQ0wtcIkwKD/gWor\nu5d0xtuPZZPBs1CYlsltIh3lWL5wFQocfySpJqhKhda0VW1rYFOnIVFKg7V7XyhR\nRWYn2JNqgVF38mYj27QHiMjnVjw5ue2ZzxKUqnvgm9l+d0VmDmtuohYwT33t0b9P\n9+goIjPunKM89BuejHmKx1tqHasuzx7/y4Yn38QAUqRgefwErk6PY8NKfygsv/Sc\nRAZS2zWkGw7gDOQ/p0Yc61KgeHG7xdCxjysJkInuRFmpZRmS9pVPC5wAlSAhhZBT\nBlokTv47T+TvsFj5ANok4m3Qd18KP6NhEky+oZHmDDE+5Uerjvo=\n=sCul\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIFMdTgkAHvxGGQa/cSpV6ZaA0CVNKCS2AZCCrU3ZtB/oCP/wEAhxT0beIR5w\nuM3UlkYCfk0I8QRhNouY8Aile+Pm9fTThQCD3+MNLvkMji4taHR0cHM6Ly9hbGlj\nZS5idGMuY2FsZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn//AQVDPEyrJbEN3tW0kV\nX+CJAAjxBGE2i5nwCOHi4KDMYTTlAIPf4w0u+QyOLCtodHRwczovL2JvYi5idGMu\nY2FsZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn//AQfxHPFwfdBNUItg/8s/S9TAjx\nBGE2i5jwCAYvyYF7Q9JNAIPf4w0u+QyOIyJodHRwczovL2J0Yy5jYWxlbmRhci5j\nYXRhbGxheHkuY29t8BDGO69nYg+Tc4QFQ1EyamB0CPEEYTaLmfAILarg4r21lw8A\ng9/jDS75DI4pKGh0dHBzOi8vZmlubmV5LmNhbGVuZGFyLmV0ZXJuaXR5d2FsbC5j\nb20=\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree a773d0e75b49b4b5b301182b49a66f3aafee483f\nparent 6718fbe90a0d9384c4d954b65f1fd4e69838d10c\nauthor Jon Atack <jon@atack.com> 1630954798 +0200\ncommitter Jon Atack <jon@atack.com> 1630964631 +0200\n\nsync: inline lock contention logging macro to fix time duration\n\nCo-authored-by: Martin Ankerl <martin.ankerl@gmail.com>\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8d2f847ed913f15677ae978a412015ac844ffceb",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8d2f847ed913f15677ae978a412015ac844ffceb",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8d2f847ed913f15677ae978a412015ac844ffceb/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6718fbe90a0d9384c4d954b65f1fd4e69838d10c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6718fbe90a0d9384c4d954b65f1fd4e69838d10c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6718fbe90a0d9384c4d954b65f1fd4e69838d10c"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 3,
      "deletions": 10
    },
    "files": [
      {
        "sha": "98e6d3d65d888e4f868c56153b47eebd2d280623",
        "filename": "src/sync.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 6,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8d2f847ed913f15677ae978a412015ac844ffceb/src/sync.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8d2f847ed913f15677ae978a412015ac844ffceb/src/sync.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/sync.cpp?ref=8d2f847ed913f15677ae978a412015ac844ffceb",
        "patch": "@@ -9,7 +9,6 @@\n #include <sync.h>\n \n #include <logging.h>\n-#include <logging/timer.h>\n #include <tinyformat.h>\n #include <util/strencodings.h>\n #include <util/threadnames.h>\n@@ -24,11 +23,6 @@\n #include <utility>\n #include <vector>\n \n-void LockContention(const char* pszName, const char* pszFile, int nLine)\n-{\n-    LOG_TIME_MICROS_WITH_CATEGORY(strprintf(\"%s, %s:%d\", pszName, pszFile, nLine), BCLog::LOCK);\n-}\n-\n #ifdef DEBUG_LOCKORDER\n //\n // Early deadlock detection."
      },
      {
        "sha": "6ba63d5e4ded9b1ca6f059a18433f4f15bb3bf15",
        "filename": "src/sync.h",
        "status": "modified",
        "additions": 3,
        "deletions": 4,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8d2f847ed913f15677ae978a412015ac844ffceb/src/sync.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8d2f847ed913f15677ae978a412015ac844ffceb/src/sync.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/sync.h?ref=8d2f847ed913f15677ae978a412015ac844ffceb",
        "patch": "@@ -6,6 +6,8 @@\n #ifndef BITCOIN_SYNC_H\n #define BITCOIN_SYNC_H\n \n+#include <logging.h>\n+#include <logging/timer.h>\n #include <threadsafety.h>\n #include <util/macros.h>\n \n@@ -126,9 +128,6 @@ using RecursiveMutex = AnnotatedMixin<std::recursive_mutex>;\n /** Wrapped mutex: supports waiting but not recursive locking */\n typedef AnnotatedMixin<std::mutex> Mutex;\n \n-/** Prints a lock contention to the log */\n-void LockContention(const char* pszName, const char* pszFile, int nLine);\n-\n /** Wrapper around std::unique_lock style lock for Mutex. */\n template <typename Mutex, typename Base = typename Mutex::UniqueLock>\n class SCOPED_LOCKABLE UniqueLock : public Base\n@@ -138,7 +137,7 @@ class SCOPED_LOCKABLE UniqueLock : public Base\n     {\n         EnterCritical(pszName, pszFile, nLine, Base::mutex());\n         if (Base::try_lock()) return;\n-        LockContention(pszName, pszFile, nLine); // log the contention\n+        LOG_TIME_MICROS_WITH_CATEGORY(strprintf(\"lock contention %s, %s:%d\", pszName, pszFile, nLine), BCLog::LOCK);\n         Base::lock();\n     }\n "
      }
    ]
  },
  {
    "sha": "498b323425d960274c40472a6a847afc1982201d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0OThiMzIzNDI1ZDk2MDI3NGM0MDQ3MmE2YTg0N2FmYzE5ODIyMDFk",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-09-06T19:01:57Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-09-06T22:37:39Z"
      },
      "message": "log, timer: improve BCLog::LogMsg()\n\n- make timer code more homogeneous\n- replace division with multiplication\n- log if the time type is unexpected",
      "tree": {
        "sha": "da299b7dd1a8d58f8ad248f72e3d2a45db18c3f5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/da299b7dd1a8d58f8ad248f72e3d2a45db18c3f5"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/498b323425d960274c40472a6a847afc1982201d",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmE2mFEACgkQT1chs9Dj\nkh3SQw/+OjHf+LEdyr3cAdt47JjAs9WvC0nSbxhxvjySCAk/2iAOWccBF78Hb2OE\n8vx0iurqilbxD6T+aUVZR9xk58jC82FqmeT3eJc13d4jIq8EbkX1OnadzYkilXtW\nxj5i27IcRNG3bqze048+bDKzlB+C6ZExHz+SLFuCQkwuPegegmkjKqWb9qRD3DF5\n9TdGfFb3Uoz/5VV5KCKdA5ZPnrLT41zTtML7/RKMLRf7EDBfDyFGBBKcLxqSR+Ep\nqGyt7/RDF0qVTJ7LVuL01jU/tdTCSkbCJ4LQxUTtcv7PCldWgh+F+CQppGmFa2xL\nRmJ/F5uvDO4IhTbXGWTMDeMfrpkPJ/0xElWDM6/0WhSW+d6/qSDGJVDezbrpM38/\nOf1LLw34bHx2DBN38ltnYcVYPnzmZPXkT45SAFlHuFqRAknzjGQEma6weASdTM4x\nD3j1GLr1KyUFVSYRY17+EcGEgcK42nBM9IGBO27qTYugUpVcK3puBX9adz4qzXMi\netBxYfWCG4/dVRKlZ5Q61eV0IfjzOZORe16sjP6+LTfHS5tUogIRda8ARUB3hMO7\nsM/YPvdwTHG06A833CBdTX8Kg+rnlStuzvaoFmPinyflNFtqibeVtlbt2ziUAgay\nmzTyFziLWB60LxsiWZMbZrRSWmtmdw1cPeSbcjRk+Sjv8X2CIS0=\n=syRR\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIBWEpJDtOxQI3K8sMiP3ERU5tJfdwHGkqSM8Rp8iK1FrCP/wEAtdfEHIYCCj\nZYW/jZ+ukxQI8QRhNphT8AiEHqf195qbdwCD3+MNLvkMjikoaHR0cHM6Ly9maW5u\nZXkuY2FsZW5kYXIuZXRlcm5pdHl3YWxsLmNvbf/wEDjvddb02RFmQtjYKCB+Up0I\n8QRhNphS8Aj176zvNWKi2wCD3+MNLvkMjiwraHR0cHM6Ly9ib2IuYnRjLmNhbGVu\nZGFyLm9wZW50aW1lc3RhbXBzLm9yZ//wED3y8c88c+9Vh70k9dI3WXsI8QRhNphS\n8AiDqKp7DyI/FgCD3+MNLvkMjiMiaHR0cHM6Ly9idGMuY2FsZW5kYXIuY2F0YWxs\nYXh5LmNvbfAQgpUV4FhafN0TJBHELQsbXwjwINV+TzJtDKBkjj30KcW3SICLwzgb\nVRROCjUstAA+t+VyCPAg4wugSAiXKmT8ZOFLmAEPcgjj/ndVx11cf2BTUAYiY+8I\n8QRhNphS8AjILx3JU3WmrgCD3+MNLvkMji4taHR0cHM6Ly9hbGljZS5idGMuY2Fs\nZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree da299b7dd1a8d58f8ad248f72e3d2a45db18c3f5\nparent 8d2f847ed913f15677ae978a412015ac844ffceb\nauthor Jon Atack <jon@atack.com> 1630954917 +0200\ncommitter Jon Atack <jon@atack.com> 1630967859 +0200\n\nlog, timer: improve BCLog::LogMsg()\n\n- make timer code more homogeneous\n- replace division with multiplication\n- log if the time type is unexpected\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/498b323425d960274c40472a6a847afc1982201d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/498b323425d960274c40472a6a847afc1982201d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/498b323425d960274c40472a6a847afc1982201d/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8d2f847ed913f15677ae978a412015ac844ffceb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8d2f847ed913f15677ae978a412015ac844ffceb",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8d2f847ed913f15677ae978a412015ac844ffceb"
      }
    ],
    "stats": {
      "total": 31,
      "additions": 14,
      "deletions": 17
    },
    "files": [
      {
        "sha": "6d584084cadacba029b3870f237645615fe3c98f",
        "filename": "src/logging/timer.h",
        "status": "modified",
        "additions": 5,
        "deletions": 13,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/498b323425d960274c40472a6a847afc1982201d/src/logging/timer.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/498b323425d960274c40472a6a847afc1982201d/src/logging/timer.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/logging/timer.h?ref=498b323425d960274c40472a6a847afc1982201d",
        "patch": "@@ -60,21 +60,13 @@ class Timer\n \n         if (std::is_same<TimeType, std::chrono::microseconds>::value) {\n             return strprintf(\"%s: %s (%i\u03bcs)\", m_prefix, msg, end_time.count());\n-        }\n-\n-        std::string units;\n-        float divisor = 1;\n-\n-        if (std::is_same<TimeType, std::chrono::milliseconds>::value) {\n-            units = \"ms\";\n-            divisor = 1000.;\n+        } else if (std::is_same<TimeType, std::chrono::milliseconds>::value) {\n+            return strprintf(\"%s: %s (%.2fms)\", m_prefix, msg, end_time.count() * 0.001);\n         } else if (std::is_same<TimeType, std::chrono::seconds>::value) {\n-            units = \"s\";\n-            divisor = 1000. * 1000.;\n+            return strprintf(\"%s: %s (%.2fs)\", m_prefix, msg, end_time.count() * 0.000001);\n+        } else {\n+            return \"Error: unexpected time type\";\n         }\n-\n-        const float time_ms = end_time.count() / divisor;\n-        return strprintf(\"%s: %s (%.2f%s)\", m_prefix, msg, time_ms, units);\n     }\n \n private:"
      },
      {
        "sha": "0e384f72e2ac89515bc4836ee280fc900243c997",
        "filename": "src/test/logging_tests.cpp",
        "status": "modified",
        "additions": 9,
        "deletions": 4,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/498b323425d960274c40472a6a847afc1982201d/src/test/logging_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/498b323425d960274c40472a6a847afc1982201d/src/test/logging_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/logging_tests.cpp?ref=498b323425d960274c40472a6a847afc1982201d",
        "patch": "@@ -15,19 +15,24 @@ BOOST_FIXTURE_TEST_SUITE(logging_tests, BasicTestingSetup)\n BOOST_AUTO_TEST_CASE(logging_timer)\n {\n     SetMockTime(1);\n-    auto sec_timer = BCLog::Timer<std::chrono::seconds>(\"tests\", \"end_msg\");\n+    auto micro_timer = BCLog::Timer<std::chrono::microseconds>(\"tests\", \"end_msg\");\n     SetMockTime(2);\n-    BOOST_CHECK_EQUAL(sec_timer.LogMsg(\"test secs\"), \"tests: test secs (1.00s)\");\n+    BOOST_CHECK_EQUAL(micro_timer.LogMsg(\"test micros\"), \"tests: test micros (1000000\u03bcs)\");\n \n     SetMockTime(1);\n     auto ms_timer = BCLog::Timer<std::chrono::milliseconds>(\"tests\", \"end_msg\");\n     SetMockTime(2);\n     BOOST_CHECK_EQUAL(ms_timer.LogMsg(\"test ms\"), \"tests: test ms (1000.00ms)\");\n \n     SetMockTime(1);\n-    auto micro_timer = BCLog::Timer<std::chrono::microseconds>(\"tests\", \"end_msg\");\n+    auto sec_timer = BCLog::Timer<std::chrono::seconds>(\"tests\", \"end_msg\");\n     SetMockTime(2);\n-    BOOST_CHECK_EQUAL(micro_timer.LogMsg(\"test micros\"), \"tests: test micros (1000000\u03bcs)\");\n+    BOOST_CHECK_EQUAL(sec_timer.LogMsg(\"test secs\"), \"tests: test secs (1.00s)\");\n+\n+    SetMockTime(1);\n+    auto minute_timer = BCLog::Timer<std::chrono::minutes>(\"tests\", \"end_msg\");\n+    SetMockTime(2);\n+    BOOST_CHECK_EQUAL(minute_timer.LogMsg(\"test minutes\"), \"Error: unexpected time type\");\n }\n \n BOOST_AUTO_TEST_SUITE_END()"
      }
    ]
  },
  {
    "sha": "bddae7e7ff7bb5931ed807acaef7336f2ee98476",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiZGRhZTdlN2ZmN2JiNTkzMWVkODA3YWNhZWY3MzM2ZjJlZTk4NDc2",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-05-31T13:59:24Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-09-07T17:19:02Z"
      },
      "message": "Add util/types.h with ALWAYS_FALSE template",
      "tree": {
        "sha": "c26d08835e8b6bba8faf10d14b6d81e53f4413a7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c26d08835e8b6bba8faf10d14b6d81e53f4413a7"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bddae7e7ff7bb5931ed807acaef7336f2ee98476",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmE3nx4ACgkQT1chs9Dj\nkh1hIA/+MNGC9l9AVzhg6sS2Mtfas+sDgWlDCkJehBbUlvxEFS8hrLMxZPLADkn5\nXt1HZI0s2xfcbP8FySRWtt0bJKf9W0+FRxt/KjRY8eHbZp9lMwLFIZFyFkLPKKS5\nixeIECvQmgEOIQpIMNOi4K3cr+QNaLhv26yU3tibRUICzbGpp3GlTSixpx+GRemL\n3TUM1B7r5xqWKOExI8MXrMzpOj69wOmDnDiUW8ecdXe0TD08Q+BBcx5hIU5sOgnC\nR/dOtKxsmaaTWpngydFs9BjAMh87Clhn37ixClCgzYsaPwyUs5F+Lfyz/0DK4DvF\nymaEhS3lrc6S2d1Ta7kzdg3Jsj8Fq4DfGGYfsG9muBdCnQ2pVoaxbTkTc2y5eEXC\ni5dIV5oJA0unOKL1c5krAqHT+8Jz+mGg19ndSIxOv28c/np2L+v/VOwT4s7IT7JZ\nDYWGRguI7i8D5/w3VGzNy6vZWh3xt35fxqfv2ExgWs6y4u7KPflxUxrGtoUGyn1Q\nteczB9Lelf6r5eH5tbaSeawf91S6d/Fz99Omv75rOQFMEasvEAme7Qc0bJc06Y4s\nQU/o8zqi0uFvBV0FwO629iqXrdA0PrrNYpKpWqHWrL2ojpNq3IgcbYf4Om24Ig4W\nojRsWffWP6Fe9SraawKYEl0pHYzkWOCdpz1iWgKANZXH3LZVw2s=\n=Jgub\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIEIY/VTiszYEG6gpkGLpAJ4GPtxBZixDHprkIFJcnXy6CP/wEB9G14DH/35L\nRSj53RfwLWQI8QRhN58h8AgNlnrmtRa7tQCD3+MNLvkMjiwraHR0cHM6Ly9ib2Iu\nYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9yZ//wEGo1hRdjIiFSlbRtPcd4\n/L0I8QRhN58h8AiwDXri9ZDS2wCD3+MNLvkMji4taHR0cHM6Ly9hbGljZS5idGMu\nY2FsZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn//AQ1qSpWebQaui98N+2kdygCgjw\nIFv1r9M5v6CgJm/uDcbcQvrCcKdQlm43WkQEOVSrJ9YhCPAg1+DAbgFGOzNte61d\nkliuPsOj73dBJ0RxkXCBORaY/ZEI8QRhN58i8Ah2VEcFlQygWwCD3+MNLvkMjiko\naHR0cHM6Ly9maW5uZXkuY2FsZW5kYXIuZXRlcm5pdHl3YWxsLmNvbfAQ7auCJ2E7\na4juAiAGb3ib1wjxBGE3nyHwCK3hXCL5oOpzAIPf4w0u+QyOIyJodHRwczovL2J0\nYy5jYWxlbmRhci5jYXRhbGxheHkuY29t\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree c26d08835e8b6bba8faf10d14b6d81e53f4413a7\nparent 498b323425d960274c40472a6a847afc1982201d\nauthor MarcoFalke <falke.marco@gmail.com> 1622469564 +0200\ncommitter Jon Atack <jon@atack.com> 1631035142 +0200\n\nAdd util/types.h with ALWAYS_FALSE template\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bddae7e7ff7bb5931ed807acaef7336f2ee98476",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/bddae7e7ff7bb5931ed807acaef7336f2ee98476",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bddae7e7ff7bb5931ed807acaef7336f2ee98476/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "498b323425d960274c40472a6a847afc1982201d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/498b323425d960274c40472a6a847afc1982201d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/498b323425d960274c40472a6a847afc1982201d"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 12,
      "deletions": 0
    },
    "files": [
      {
        "sha": "eea98c7f2210ca659cea2de15f36cae60b0d8152",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/bddae7e7ff7bb5931ed807acaef7336f2ee98476/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/bddae7e7ff7bb5931ed807acaef7336f2ee98476/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=bddae7e7ff7bb5931ed807acaef7336f2ee98476",
        "patch": "@@ -268,6 +268,7 @@ BITCOIN_CORE_H = \\\n   util/tokenpipe.h \\\n   util/trace.h \\\n   util/translation.h \\\n+  util/types.h \\\n   util/ui_change_type.h \\\n   util/url.h \\\n   util/vector.h \\"
      },
      {
        "sha": "0047b00026b48443e4897c25440ac5354503cead",
        "filename": "src/util/types.h",
        "status": "added",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/bddae7e7ff7bb5931ed807acaef7336f2ee98476/src/util/types.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/bddae7e7ff7bb5931ed807acaef7336f2ee98476/src/util/types.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/types.h?ref=bddae7e7ff7bb5931ed807acaef7336f2ee98476",
        "patch": "@@ -0,0 +1,11 @@\n+// Copyright (c) 2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_TYPES_H\n+#define BITCOIN_UTIL_TYPES_H\n+\n+template <class>\n+inline constexpr bool ALWAYS_FALSE{false};\n+\n+#endif // BITCOIN_UTIL_TYPES_H"
      }
    ]
  },
  {
    "sha": "f530202353a4f8bb444966559aa15681ab3cebc6",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmNTMwMjAyMzUzYTRmOGJiNDQ0OTY2NTU5YWExNTY4MWFiM2NlYmM2",
    "commit": {
      "author": {
        "name": "Martin Ankerl",
        "email": "martin.ankerl@gmail.com",
        "date": "2021-09-07T16:16:09Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-09-07T17:19:31Z"
      },
      "message": "Make unexpected time type in BCLog::LogMsg() a compile-time error",
      "tree": {
        "sha": "28d30a3f11b852475a1bef220b8a0c24caffd35a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/28d30a3f11b852475a1bef220b8a0c24caffd35a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f530202353a4f8bb444966559aa15681ab3cebc6",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmE3nyMACgkQT1chs9Dj\nkh1diA//SIFcsiwJWXThyJgukeX14+DewNhExll6Zt6aEMzWISkJ5HyAosbLYJop\nW2TfE7jbZvFLbhPcUxEtecp92H9MoxK5V1R4O8pQagLI3JH+/Pc3SIVPe8LKYGi4\nRGNzw6ZqYpWrbNkQqgNpB+34aOQzGBspm/qsUIpjNmOir4VjXOn7POp1DQYGtGgZ\n75yx4t+95L2gmvuuttri+Q87TUlKh5H7IqlGjhAaouKVG2nE6bMOcZ3nHujRntVB\niVjBwGpxAZHa9Xeoxcf9g2+beM+TRy5n0E3Ygpgb/tK95t1fUmppKYOlfUGDLeoB\npq8I6YArXDjD+bd0zcaHcl7/IRc5oqZmofgCKx08xVV05N0hZQWL2CDYIpGhPsdO\no5Uhpblpr4M5Ap1O5rXJxkMB7CHnyeIr6qOioopK1K64auQA8RxM6KY2oKKFJ/ok\ncQCouaZRFsQP1BjQwWapLZCdIP2H5BUPu/Fxatb/70ZnZV1u80qoUAzh2XD9ZgPP\nGYNHpbWBKQ0yXhB2TK8RmHDj4ssIsv14ARMZtXYAMLIfR7PNXnt2Ot8xRpUDxhE3\ncuG3M9P3kyg20ATfOsp0ZEJTfTyR/rKwJJq+eU+WmEDWmQ31iVvPD3t1CI/l6LKI\nloLi0/tsZCPffekzrfXaQIN72N8+G1ySH8i1dDFtdyWH/i222sg=\n=24Fm\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIG7V7bBkiLNbya2eSC4aoLXXgS7/dKcVeQpD+3Igw+M8CP/wEAt9eKVQUioG\n/4GoKnnbV84I8SDADm7Zf5Mh2zYlJrQNl1QdU6N8OHHO92XlfG/RGuMNQAjxBGE3\nnyjwCPWPOclHROkpAIPf4w0u+QyOKShodHRwczovL2Zpbm5leS5jYWxlbmRhci5l\ndGVybml0eXdhbGwuY29t//AQHtIYPurPT26cPuXff//d6AjxIMBdonIIk6RcbygO\nUArPYXx2yusIiBTei6JywWT+JaFpCPEEYTefJ/AI8pZ3WHvcD3gAg9/jDS75DI4u\nLWh0dHBzOi8vYWxpY2UuYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9yZ//w\nEGdAgUi09LStET4srvCbbRsI8QRhN58n8Ag3EuZpskNN8gCD3+MNLvkMjiMiaHR0\ncHM6Ly9idGMuY2FsZW5kYXIuY2F0YWxsYXh5LmNvbfAQ1p9BlU8Be3flbtsb4jC1\nmQjwIPRVoxNHKi5aVJyNNQVWAu6mW32b3Y5hz9VCrZa1UXVuCPEEYTefKPAIK5Qb\nwpZWEgkAg9/jDS75DI4sK2h0dHBzOi8vYm9iLmJ0Yy5jYWxlbmRhci5vcGVudGlt\nZXN0YW1wcy5vcmc=\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree 28d30a3f11b852475a1bef220b8a0c24caffd35a\nparent bddae7e7ff7bb5931ed807acaef7336f2ee98476\nauthor Martin Ankerl <martin.ankerl@gmail.com> 1631031369 +0200\ncommitter Jon Atack <jon@atack.com> 1631035171 +0200\n\nMake unexpected time type in BCLog::LogMsg() a compile-time error\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f530202353a4f8bb444966559aa15681ab3cebc6",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f530202353a4f8bb444966559aa15681ab3cebc6",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f530202353a4f8bb444966559aa15681ab3cebc6/comments",
    "author": {
      "login": "martinus",
      "id": 14386,
      "node_id": "MDQ6VXNlcjE0Mzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martinus",
      "html_url": "https://github.com/martinus",
      "followers_url": "https://api.github.com/users/martinus/followers",
      "following_url": "https://api.github.com/users/martinus/following{/other_user}",
      "gists_url": "https://api.github.com/users/martinus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/martinus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
      "organizations_url": "https://api.github.com/users/martinus/orgs",
      "repos_url": "https://api.github.com/users/martinus/repos",
      "events_url": "https://api.github.com/users/martinus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/martinus/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "bddae7e7ff7bb5931ed807acaef7336f2ee98476",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bddae7e7ff7bb5931ed807acaef7336f2ee98476",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/bddae7e7ff7bb5931ed807acaef7336f2ee98476"
      }
    ],
    "stats": {
      "total": 15,
      "additions": 5,
      "deletions": 10
    },
    "files": [
      {
        "sha": "79627b1fe31a2308317fb2bb366fa0845923bef6",
        "filename": "src/logging/timer.h",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f530202353a4f8bb444966559aa15681ab3cebc6/src/logging/timer.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f530202353a4f8bb444966559aa15681ab3cebc6/src/logging/timer.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/logging/timer.h?ref=f530202353a4f8bb444966559aa15681ab3cebc6",
        "patch": "@@ -9,6 +9,7 @@\n #include <logging.h>\n #include <util/macros.h>\n #include <util/time.h>\n+#include <util/types.h>\n \n #include <chrono>\n #include <string>\n@@ -58,14 +59,14 @@ class Timer\n             return strprintf(\"%s: %s\", m_prefix, msg);\n         }\n \n-        if (std::is_same<TimeType, std::chrono::microseconds>::value) {\n+        if constexpr (std::is_same<TimeType, std::chrono::microseconds>::value) {\n             return strprintf(\"%s: %s (%i\u03bcs)\", m_prefix, msg, end_time.count());\n-        } else if (std::is_same<TimeType, std::chrono::milliseconds>::value) {\n+        } else if constexpr (std::is_same<TimeType, std::chrono::milliseconds>::value) {\n             return strprintf(\"%s: %s (%.2fms)\", m_prefix, msg, end_time.count() * 0.001);\n-        } else if (std::is_same<TimeType, std::chrono::seconds>::value) {\n+        } else if constexpr (std::is_same<TimeType, std::chrono::seconds>::value) {\n             return strprintf(\"%s: %s (%.2fs)\", m_prefix, msg, end_time.count() * 0.000001);\n         } else {\n-            return \"Error: unexpected time type\";\n+            static_assert(ALWAYS_FALSE<TimeType>, \"Error: unexpected time type\");\n         }\n     }\n \n@@ -81,7 +82,6 @@ class Timer\n     //! Forwarded on to LogPrint if specified - has the effect of only\n     //! outputting the timing log when a particular debug= category is specified.\n     const BCLog::LogFlags m_log_category{};\n-\n };\n \n } // namespace BCLog"
      },
      {
        "sha": "84ddbc50c668b52673c97e5109c6f6664cac9367",
        "filename": "src/test/logging_tests.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 5,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f530202353a4f8bb444966559aa15681ab3cebc6/src/test/logging_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f530202353a4f8bb444966559aa15681ab3cebc6/src/test/logging_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/logging_tests.cpp?ref=f530202353a4f8bb444966559aa15681ab3cebc6",
        "patch": "@@ -28,11 +28,6 @@ BOOST_AUTO_TEST_CASE(logging_timer)\n     auto sec_timer = BCLog::Timer<std::chrono::seconds>(\"tests\", \"end_msg\");\n     SetMockTime(2);\n     BOOST_CHECK_EQUAL(sec_timer.LogMsg(\"test secs\"), \"tests: test secs (1.00s)\");\n-\n-    SetMockTime(1);\n-    auto minute_timer = BCLog::Timer<std::chrono::minutes>(\"tests\", \"end_msg\");\n-    SetMockTime(2);\n-    BOOST_CHECK_EQUAL(minute_timer.LogMsg(\"test minutes\"), \"Error: unexpected time type\");\n }\n \n BOOST_AUTO_TEST_SUITE_END()"
      }
    ]
  }
]