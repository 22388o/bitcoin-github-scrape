[
  {
    "sha": "243b80d29235b07f8a26fb51e2af3a949c8fc1fd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyNDNiODBkMjkyMzViMDdmOGEyNmZiNTFlMmFmM2E5NDljOGZjMWZk",
    "commit": {
      "author": {
        "name": "Adam Weiss",
        "email": "adam@signal11.com",
        "date": "2015-08-12T23:32:20Z"
      },
      "committer": {
        "name": "Adam Weiss",
        "email": "adam@signal11.com",
        "date": "2015-08-12T23:40:09Z"
      },
      "message": "Handle leveldb::DestroyDB() errors on wipe failure\n\nAdd error checking to CLevelDBWrapper for errors from\nleveldb::DestroyDB().  Without it, if unlink() or DeleteFileW() fail to\ndelete files, they will fail silent.  If they fail to delete any files,\nCLevelDBWrapper will silently open and read the existing database.\n\nTypically any permissions issues would be caught by leveldb as it churns\nthrough many files as part of its compaction process, but it is\nconceivable that this could cause problems on Windows with anti-virus\nand indexing software.",
      "tree": {
        "sha": "b30c148ee1cd12a1b724704f3222afbd5a143d4b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b30c148ee1cd12a1b724704f3222afbd5a143d4b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/243b80d29235b07f8a26fb51e2af3a949c8fc1fd",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/243b80d29235b07f8a26fb51e2af3a949c8fc1fd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/243b80d29235b07f8a26fb51e2af3a949c8fc1fd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/243b80d29235b07f8a26fb51e2af3a949c8fc1fd/comments",
    "author": {
      "login": "ajweiss",
      "id": 430315,
      "node_id": "MDQ6VXNlcjQzMDMxNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/430315?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajweiss",
      "html_url": "https://github.com/ajweiss",
      "followers_url": "https://api.github.com/users/ajweiss/followers",
      "following_url": "https://api.github.com/users/ajweiss/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajweiss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajweiss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajweiss/subscriptions",
      "organizations_url": "https://api.github.com/users/ajweiss/orgs",
      "repos_url": "https://api.github.com/users/ajweiss/repos",
      "events_url": "https://api.github.com/users/ajweiss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajweiss/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ajweiss",
      "id": 430315,
      "node_id": "MDQ6VXNlcjQzMDMxNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/430315?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajweiss",
      "html_url": "https://github.com/ajweiss",
      "followers_url": "https://api.github.com/users/ajweiss/followers",
      "following_url": "https://api.github.com/users/ajweiss/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajweiss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajweiss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajweiss/subscriptions",
      "organizations_url": "https://api.github.com/users/ajweiss/orgs",
      "repos_url": "https://api.github.com/users/ajweiss/repos",
      "events_url": "https://api.github.com/users/ajweiss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajweiss/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "87f37e259d6deb52ee464edde7aece687eea97a5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/87f37e259d6deb52ee464edde7aece687eea97a5",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/87f37e259d6deb52ee464edde7aece687eea97a5"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 2,
      "deletions": 1
    },
    "files": [
      {
        "sha": "26cacf95ae91909642f2babf208d8fc468d5d11b",
        "filename": "src/leveldbwrapper.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/243b80d29235b07f8a26fb51e2af3a949c8fc1fd/src/leveldbwrapper.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/243b80d29235b07f8a26fb51e2af3a949c8fc1fd/src/leveldbwrapper.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/leveldbwrapper.cpp?ref=243b80d29235b07f8a26fb51e2af3a949c8fc1fd",
        "patch": "@@ -58,7 +58,8 @@ CLevelDBWrapper::CLevelDBWrapper(const boost::filesystem::path& path, size_t nCa\n     } else {\n         if (fWipe) {\n             LogPrintf(\"Wiping LevelDB in %s\\n\", path.string());\n-            leveldb::DestroyDB(path.string(), options);\n+            leveldb::Status result = leveldb::DestroyDB(path.string(), options);\n+            HandleError(result);\n         }\n         TryCreateDirectory(path);\n         LogPrintf(\"Opening LevelDB in %s\\n\", path.string());"
      }
    ]
  }
]