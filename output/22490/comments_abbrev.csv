DrahtBot,2021-07-18 23:53:48,<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.,https://github.com/bitcoin/bitcoin/pull/22490#issuecomment-882136148,882136148,
jnewbery,2021-07-19 12:26:19,Concept ACK,https://github.com/bitcoin/bitcoin/pull/22490#issuecomment-882506347,882506347,
MarcoFalke,2021-07-19 16:31:44,"Any reason to not disable this globally?\n\nSee also fa730e91576",https://github.com/bitcoin/bitcoin/pull/22490#issuecomment-882689363,882689363,
mzumsande,2021-07-19 17:25:05,"> Any reason to not disable this globally?\n\nTo expand on the last sentence of the OP (I tried disabling this globally by adding `f.write(""connect=0\n"") `to `write_config` in `util.py`):\n-  With `ThreadOpenConnections` disabled completely in the functional tests, possible future problems with it would not be noticed there\n- Covering any logic from `ThreadOpenConnections` in functional tests",https://github.com/bitcoin/bitcoin/pull/22490#issuecomment-882725455,882725455,
MarcoFalke,2021-07-19 17:36:11,"> With ThreadOpenConnections disabled completely in the functional tests, possible future problems with it would not be noticed there\n\nThere could be one (unit or function) test to call it?\n\n> Covering any logic from ThreadOpenConnections in functional tests would not be possible. Tricks like neutralizing a global -connect=0 with a local -noconnect=0 in a single test do not seem to restore",https://github.com/bitcoin/bitcoin/pull/22490#issuecomment-882732244,882732244,
mzumsande,2021-07-20 10:11:31,"Thanks, good idea! I'll try this, might be a couple of days until I'll get to it, will change to draft until then. ",https://github.com/bitcoin/bitcoin/pull/22490#issuecomment-883272808,883272808,
amitiuttarwar,2021-07-20 18:55:44,concept ACK ,https://github.com/bitcoin/bitcoin/pull/22490#issuecomment-883619895,883619895,
practicalswift,2021-07-24 20:14:37,"Super Strong Concept ACK\n\nThe act of running the test suite should never cause any communication with the outside world, and certainly not cause TCP connections to random computers on the Internet :)",https://github.com/bitcoin/bitcoin/pull/22490#issuecomment-886106247,886106247,
mzumsande,2021-07-26 17:22:26,"As suggested by @MarcoFalke, I now reversed the logic to disable automatic connections by default and add exceptions only when required (`feature_config_args.py` and `feature_anchors.py`). I changed OP and title to reflect this.",https://github.com/bitcoin/bitcoin/pull/22490#issuecomment-886887079,886887079,
tryphe,2021-07-30 10:05:02,"Concept ACK, light code review ACK 8ca51af1ece371b6f1bdb88b96f16020cc787d13",https://github.com/bitcoin/bitcoin/pull/22490#issuecomment-889786229,889786229,
amitiuttarwar,2021-07-30 17:20:47,"@mzumsande- did you consider the approach of adding `-connect=0` as a command line arg in the TestNode initializer ([aka around here](https://github.com/bitcoin/bitcoin/blob/da1c0c64fd094880712d1c4167ad9eb3bb6ffcc6/test/functional/test_framework/test_node.py#L97))?\n\nI'm thinking something like\n```\n        if not any(""-connect"" in s for s in self.extra_args):\n            self.args.append(",https://github.com/bitcoin/bitcoin/pull/22490#issuecomment-890039860,890039860,
amitiuttarwar,2021-07-30 17:42:37,"hm, I think my suggestion ☝️ does not work for the tests that hit normal automatic connections logic in `ThreadOpenConnections`. The DNS seeding can be enabled using `-dnsseed`, but if we pass `-connect=anything`, `ThreadOpenConnections` skips using addrman. darn.  \n\nso setting as a command line arg instead of in the conf file is still an option, but we'd need an additional field regardless. s",https://github.com/bitcoin/bitcoin/pull/22490#issuecomment-890051538,890051538,
mzumsande,2021-08-22 14:05:26,"Sorry for not answering sooner - I had shortly thought about this option before creating this PR, but thought it would fit in better in `util.py` where similar networking parameters such as `dnsseed` are set. I didn't think about the log issue.\n\n> hm, I think my suggestion point_up does not work for the tests that hit normal automatic connections logic in ThreadOpenConnections.\n\nI agree, i",https://github.com/bitcoin/bitcoin/pull/22490#issuecomment-903274451,903274451,
amitiuttarwar,2021-08-22 19:36:00,"@mzumsande -\n\n> So with the upside of having the networking command-line args in one place, and the downside of having two log items, I don't have a strong preference here.\n\nAgreed, let's leave it as is. Thanks! ",https://github.com/bitcoin/bitcoin/pull/22490#issuecomment-903319622,903319622,
