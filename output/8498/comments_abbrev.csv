jtimon,2016-09-01T16:47:45Z,"Needed rebase. Besides, the previous version contained a bug.\n",https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-244140141,244140141,
jtimon,2016-12-03T06:26:39Z,"Needed rebase after renaming main.o, see #9260 (although needed, the rebase was clean in this case)",https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-264620779,264620779,
jtimon,2017-04-18T20:51:11Z,"Added a commit that may make @dcousens happier or not, thanks for making me remember.\n\nEDIT: I would be also be happy to take the function out of the consensus namespace ""for free"" here. That was a mistake on my part.",https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-294978323,294978323,
jtimon,2017-05-19T04:36:47Z,"Needed rebase, hopefully fixed all nits.",https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-302606393,302606393,
ryanofsky,2017-05-23T19:24:12Z,"Tests for this PR seem to be failing currently, maybe due to the SpendHeight change?\n\nOnly changes since my previous review were rebasing post-#8329 and the nFees and nSpendHeight changes commented on above.",https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-303505331,303505331,
jtimon,2017-05-30T18:11:10Z,"Yes, the problem was in that change but not on stop using GetSpendHeight, just added +1 to the height by mistake. Updated.\n",https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-304961989,304961989,
jtimon,2017-06-02T01:06:50Z,"Needed rebase after #10195, it also needs more review now (AcceptToMemoryPoolWorker may return different DoS pnctuation [100 instead of 0] now, happy to fix if that's a problem).",https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-305661391,305661391,
ryanofsky,2017-06-08T21:20:46Z,Some discussion of this in IRC https://botbot.me/freenode/bitcoin-core-dev/msg/87002756/,https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-307230847,307230847,
jtimon,2017-06-25T02:19:18Z,"Hopefully fixed @sdaftuar 's nits.\nAlso add a third commit to properly indent CheckTxInputs and other minor style fixes like braces for one line ifs while at it.\n",https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-310877612,310877612,
jtimon,2017-06-27T06:05:41Z,"Added a couple of commits to be squashed. I wouldn't personally squash the latter but it seems @sdaftuar and @sipa would like it more this way and I don't care. Before squashing I will also move the indentation commit to the first thing.\n\nEDIT: already squashed one, updated OP.",https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-311261974,311261974,
jtimon,2017-07-04T16:05:43Z,"Squashed the non-accumulator commit.\nHopefully fixed all @TheBlueMatt 's nits, good catch.\nAlso s/nTxFee/tx_fees/ to comply with the new style.\n",https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-312911862,312911862,
jtimon,2017-07-13T00:29:45Z,Fixed latest nit.,https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-314935270,314935270,
jtimon,2017-08-24T21:19:38Z,"Hopefully fixed @jimpo 's nit. Didn't squashed yet just in case, but it seems pretty obviously correct in removing a redundancy that cannot be tested and thus is not being tested.",https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-324760765,324760765,
danra,2017-09-04T18:29:35Z,"@jtimon The ""More motivation"" link https://github.com/bitcoin/bitcoin/blob/master/src/main.cpp#L1493 is broken",https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-327012549,327012549,
jtimon,2017-09-05T23:47:29Z,"Fixed @promag 's nits (except one to avoid further disruption, in this case only for style).\nFixed @danra 's nit by crossing the broken list in the OP (too lazy to look after some concept and ut acks, sorry. I believe there's enough motivation without the broken link, which I don't remember what was about right now).\n\n",https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-327334229,327334229,
jtimon,2017-09-07T00:48:16Z,"Fixed @promag 's last round of nits, thanks again.",https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-327650854,327650854,
jtimon,2017-09-20T21:28:07Z,Fixed 1 commit by @danra ,https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-330986316,330986316,
danra,2017-09-21T20:56:57Z,utACK,https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-331279617,331279617,
TheBlueMatt,2017-10-03T23:41:47Z,re-utACK 4e955c58e13cfe089208f6b23b195d395ad99baa,https://github.com/bitcoin/bitcoin/pull/8498#issuecomment-334010307,334010307,
dcousens,2016-08-11T04:48:27Z,nit: weird spacing here?\n,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r74368316,74368316,src/main.cpp
jtimon,2016-08-11T18:55:25Z,"Oh, that's how the editor indented by default. That's actually what we have in some other places, but having a glance searching for strprintf in main.cpp I see we're not being consistent with indentation of function calls broken into several lines\n\nExample from the opening parenthesis position:\nhttps://github.com/bitcoin/bitcoin/blob/master/src/main.cpp#L1354\nExample 4 spaces from the beginnin",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r74481846,74481846,src/main.cpp
sipa,2017-04-09T15:07:38Z,"I think you can change the `view.HaveInputs(tx)` below into a `Consensus::CheckTxInputs` call, doing some of the checks slightly earlier.",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r110544416,110544416,src/validation.cpp
dcousens,2017-04-09T23:12:57Z,"Rather than forcing a bogus `nFees` (or unused) everywhere,  just wrap this function with an overload containing an unused `nFees` stack variable.\n\nSimpler.  Less diff.\n\nAlso means anyone reviewing at some later date won't get confused as to whether `nFees` is _actually_ used or not.",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r110555687,110555687,src/validation.cpp
jtimon,2017-04-18T19:43:22Z,"Perhaps the ~~new~~ comment could be clearer, but the ```view.HaveInputs(tx)``` check below sets ```state.DoS(0, ...)``` instead of ```state.DoS(100, ...)``` like ```Consensus::CheckTxInputs```  would do.\nFeel more than free to rephrase it in a way that would have been more clear to you.",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r112045794,112045794,src/validation.cpp
jtimon,2017-04-18T20:00:35Z,The only place where this makes sense is in txmempool.cpp. There you can do a much nicer wrapper there. The diff won't be smaller in total but there will be more lines in red (which people tend to like). I considered this before and I rembember @sipa said it would be fine to just remove the check in txmempool.cpp but I can't find the comment and he changed his mind about it. I will rewrite this fo,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r112049225,112049225,src/validation.cpp
ryanofsky,2017-05-08T20:03:16Z,"In commit ""Optimization: Minimize the number of times it is checked""\n\nWould be good to declare nFees below close to where it is actually used.",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r115339497,115339497,src/validation.cpp
ryanofsky,2017-05-08T21:08:40Z,"In commit ""Optimization: Minimize the number of times it is checked""\n\nCan you add a comment explaining this line? Why do transactions in a block with vtx.size() of >= 2 have a different spend height than transactions in a block with vtx.size() == 1? Is nSpendHeight even used in a block with vtx.size() == 1?",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r115353716,115353716,src/validation.cpp
jtimon,2017-05-18T19:04:21Z,"If the block only has the coinbase tx before GetSpendHeight(view)  would have not been called at all and starting doing so seems unnecessarily costly, see https://github.com/bitcoin/bitcoin/blob/master/src/validation.cpp#L1306\nI was actually hoping that someone suggested to just remove this local variable directly and just use nHeight directly for the coinbase maturity check, assuming that is sa",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r117328308,117328308,src/validation.cpp
ryanofsky,2017-06-14T18:54:58Z,"In commit ""Optimization: Minimize the number of times""\n\nIf I understand correctly, it would be more correct to pass `SpendHeight(view)` instead of `pindex->nHeight` as the nSpendHeight argument, but in this case it doesn't matter because the value is only used for coinbase transactions, and this isn't a coinbase transaction? Or maybe there are other reasons why `pindex->nHeight` is ok to pass?",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r122035311,122035311,src/validation.cpp
jtimon,2017-06-17T18:50:51Z,"I don't think it would be more correct (but I'm glad to be corrected) and performance would sufffer.\nI think pindex->nHeight because that's actually what we want to validate here. In acceptToMemPool and CTxMemPool::check you don't know the height. Here, nSpendHeight should always be lower or equal to pindex->nHeight.\n\nI'm happy to add a comment but not sure what it should be. Peharps the com",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r122574593,122574593,src/validation.cpp
ryanofsky,2017-06-21T18:14:10Z,"> I'm happy to add a comment but not sure what it should be.\n\nComment could just say why it is better to pass pindex->nHeight as nSpendHeight here instead of GetSpendHeight(view). If the two values are always equal, or have some other relation, comment could just say what that relationship is. If this is too in the weeds, definitely feel free to skip this. I'm just suggesting what I think woul",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r123325914,123325914,src/validation.cpp
jtimon,2017-06-22T01:54:53Z,"Part of the optimization here is not calling GetSpendHeight for every tx in the block, and your suggestion would eliminate that part of the optimization.\nFor the comment, what about ""We know the height, so we don't need to GetSpendHeight""?\nit if more people agree.\nI'm really not sure that comment would add that much value, but I don't mind adding ",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r123405843,123405843,src/validation.cpp
sdaftuar,2017-06-23T13:14:00Z,"I think it's somewhat confusing that `CheckTxInputs()` will be doing calculations on accumulated fee values, and not just the particular transaction passed in.\n\nCan we just have `CheckTxInputs` return the fee of the transaction passed in, and then the caller can decide what additional checks should happen?  It would make more sense to me that the `MoneyRange()` check on total block fees happen",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r123744310,123744310,src/consensus/tx_verify.h
sdaftuar,2017-06-23T13:16:25Z,style nit: braces for one-line `if`,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r123744780,123744780,src/validation.cpp
sdaftuar,2017-06-23T15:26:16Z,style nit: braces for one-line if,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r123775376,123775376,src/consensus/tx_verify.cpp
sdaftuar,2017-06-23T15:34:20Z,"I agree with @jtimon that it makes more sense for ConnectBlock to pass in pindex->nHeight, rather than get the spend height from the view, even though those are the same.  We could add an assert that the view's best block has the same hash as pindex->pprev if that makes the code clearer -- but we have bigger problems than just coinbase maturity if the view is out of sync with our chain!",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r123777207,123777207,src/validation.cpp
sdaftuar,2017-06-23T15:34:40Z,style nit: curly braces for one-line if,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r123777278,123777278,src/validation.cpp
jtimon,2017-06-25T00:23:05Z,"If the fee is returned, then we can't also return a bool, and we would need to duplicate the check in ConnectBlock, AcceptToMemeoryPool and CTxMemPool::check. And at that point the additional complexity wouldn't be worth it IMO.\n\nWe could also pass a fees input/output parameter that doesn't accumulate (although you can already enjoy that functionality by simply passing 0 to the variable). In t",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r123887895,123887895,src/consensus/tx_verify.h
TheBlueMatt,2017-06-26T17:26:51Z,nit: extra space at EOL here.,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r124069710,124069710,src/consensus/tx_verify.h
sipa,2017-06-27T01:39:41Z,"@jtimon You can 'return' the fee in a tuple, or as a pass-by-reference value. So for example `CheckTxInputs` would have `CAmount& return_fee` field, and `return_fee` would just be *assigned* that transaction's fee. The caller can then do the `accumulated_fee += return_fee` logic. This involves no duplication, and still makes `CheckTxInputs` purely operate on data for a single transaction.",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r124160827,124160827,src/consensus/tx_verify.h
jtimon,2017-06-27T04:56:57Z,"If the concern is that the addition with other fees is not done within the function, as documented the caller can set the in/out argument to zero before calling. I could also always return only the value for the single transaction without accumulating anything (although I don't see the gain, it's just more code), at that point the argument would be out only, not in/out.\n\nFrom there, to return ",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r124178299,124178299,src/consensus/tx_verify.h
sipa,2017-06-27T05:00:37Z,"I was just clarifying that @sdaftuar's suggestion does not imply duplication of logic. I personally think that it's a bit cleaner to do the summing of fees outside of the validation of a single function, but it's an unimportant nit for sure.",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r124178585,124178585,src/consensus/tx_verify.h
jtimon,2017-06-27T05:17:06Z,"Oh, sorry, the duplication comment was a mistake. Before I was checking the moneyRange for the accumulated fees and not just for the single tx fees, and I thought that check would need to be duplicated outside, but that was a change in functionality that I shouldn't be doing (and btw was missed in review).\nPedantically adding that check would be a softfork, but it should be impossible that the M",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r124179812,124179812,src/consensus/tx_verify.h
TheBlueMatt,2017-06-27T16:51:21Z,"Need to change var name here, too.",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r124332429,124332429,src/consensus/tx_verify.h
TheBlueMatt,2017-06-27T17:44:14Z,"While you're at it, can you please re-add the MoneyRange checks here that Gavin removed years ago (and maybe update the PR title to indicate that you're fixing Gavin's near-bug while also decreasing the number of CCoinsView map lookups).",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r124346132,124346132,src/validation.cpp
TheBlueMatt,2017-06-27T18:53:37Z,"Specifically, commit 8d7849b6db5f54dc32fe4f8c6c7283068473cd21 broke the check at https://github.com/bitcoin/bitcoin/commit/8d7849b6db#diff-7ec3c68a81efff79b6ca22ac1f1eabbaR1110 and made it useless, which very narrowly didn't cause a major consensus failure and re-introduction of the original bitcoin-printing overflow bug.",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r124364449,124364449,src/validation.cpp
TheBlueMatt,2017-07-11T19:25:52Z,"Why not use the normal formatting here of return state.DoS(100, error(), ...)?",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r126784667,126784667,src/validation.cpp
jtimon,2017-07-13T00:23:10Z,"No reason, will change",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r127103970,127103970,src/validation.cpp
jimpo,2017-08-17T19:33:18Z,Isn't this redundant given the check on line 239?,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r133807917,133807917,src/consensus/tx_verify.cpp
jtimon,2017-08-18T07:42:20Z,"Yes, I think so, unless I'm missing something about some weird overflow. Besides it is also included in MoneyRange, so actually both checks are redundant, but at some point IIRC someone asked to not unify in  bad-txns-fee-outofrange. But I think we can choose to ditch either bad-txns-in-belowout or bad-txns-fee-negative. I don't have a strong preference.",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r133897830,133897830,src/consensus/tx_verify.cpp
promag,2017-09-01T23:16:28Z,` * @params[out] tx_fees  Set to the transaction fee if successful`.,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r136680000,136680000,src/consensus/tx_verify.h
promag,2017-09-01T23:24:06Z,Why was/is plural?,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r136680606,136680606,src/consensus/tx_verify.cpp
promag,2017-09-01T23:24:42Z,Use snake_case on new code.,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r136680632,136680632,src/txmempool.cpp
promag,2017-09-01T23:31:44Z,`tx_fees` or just `fees`?,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r136681168,136681168,src/validation.cpp
jtimon,2017-09-05T22:48:18Z,"no good reason, let's make it singular",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r137134137,137134137,src/consensus/tx_verify.cpp
jtimon,2017-09-05T22:54:54Z,That would be more extra disruption only for style. We can do that at any time. Including potentially more rebase work fixing conflicts with other things touching AcceptToMemoryPoolWorker. Can we leave that for later? Note we're not creating a new variable but just moving its declaration here.,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r137135132,137135132,src/validation.cpp
promag,2017-09-06T01:26:32Z,`++i`.,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r137153110,137153110,src/consensus/tx_verify.cpp
promag,2017-09-06T01:30:45Z,Why? Update only if successfully?,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r137153520,137153520,src/consensus/tx_verify.cpp
promag,2017-09-06T01:31:48Z,Update before `return true;`.,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r137153615,137153615,src/consensus/tx_verify.cpp
promag,2017-09-06T01:32:14Z,"```cpp\nif (!MoneyRange(nValueIn - value_out)) {\n```",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r137153659,137153659,src/consensus/tx_verify.cpp
jtimon,2017-09-06T16:28:45Z,And if not set to to 0? I think this was discussed already...,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r137320049,137320049,src/consensus/tx_verify.cpp
jtimon,2017-09-06T16:31:27Z,"Mhmm, right, that's what we're saying in the doxygen docs now...ok, I guess.",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r137320780,137320780,src/consensus/tx_verify.cpp
danra,2017-09-14T11:15:17Z,Suggest using const auto& to iterate over tx.vin. (This is already the case in other functions in this file),https://github.com/bitcoin/bitcoin/pull/8498#discussion_r138863585,138863585,src/consensus/tx_verify.cpp
danra,2017-09-14T11:18:38Z,"The current code has an explicit comment about not triggering the DoS code on purpose, did you remove it (and invoke the DoS code) intentionally?",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r138864183,138864183,src/consensus/tx_verify.cpp
danra,2017-09-14T11:22:19Z,Local includes should come before system includes,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r138864880,138864880,src/consensus/tx_verify.h
jtimon,2017-09-14T12:32:17Z,"The comment was moved to the separated HaveInputs call in AcceptToMemoryPoolWorker.\nPerhaps lost in rebase, I'll look at it.\nPerhaps it's fine since we now have: https://github.com/bitcoin/bitcoin/pull/8498/commits/c93ceb2dbde1c2474ee04946fb4594b668613dbe#diff-24efdb00bfbe56b140fb006b562cc70bR514",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r138878958,138878958,src/consensus/tx_verify.cpp
jtimon,2017-09-14T12:33:30Z,"This line wasn't touched besides indentation until @promag asked s/i++/++i/\nNot sure it's worth it to make that change here, to be honest...",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r138879230,138879230,src/consensus/tx_verify.cpp
danra,2017-09-14T14:36:17Z,"It's not just the comment, as you can see in the diff previously the code used `state.Invalid` (and stated it does so on purpose), and now both the comment is gone and the code uses `state.DoS`\n\nI don't know to say on my own whether that change is valid, but it definitely requires explanation due to the fact that previously there was a specific comment suggesting using `state.DoS` there is bad",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r138912377,138912377,src/consensus/tx_verify.cpp
TheBlueMatt,2017-09-14T21:22:45Z,Please dont add needless auto& unless you have to. If you're saving 5 chars of typing it just makes things less readable.,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r139014770,139014770,src/consensus/tx_verify.cpp
TheBlueMatt,2017-09-14T21:26:21Z,"It should be OK, the DoS from ConnectBlock is important, but the DoS shouldn't be trigger'able in ATMP - we should have already returned false int he pfMissingInputs branch further up.",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r139015520,139015520,src/consensus/tx_verify.cpp
danra,2017-09-14T21:46:09Z,"@TheBlueMatt I disagree, and AFAIK so do most of the C++ gurus. The (character) typing isn't the issue here, rather code flexibility. See https://softwareengineering.stackexchange.com/questions/180216/does-auto-make-c-code-harder-to-understand for an example of a discussion on the topic.",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r139019344,139019344,src/consensus/tx_verify.cpp
TheBlueMatt,2017-09-15T18:57:38Z,"auto, here, AFAIU, is going to be slightly more likely to force you to change the line if you change AccessCoin's return type (at least because its a const-ref type, so conversion should only be an inheritance thing). In consensus code, making sure you're forced to change all the places something is used if you change a type strikes me as a very, very good idea. If you want to take Herb's stance o",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r139225809,139225809,src/consensus/tx_verify.cpp
danra,2017-09-15T21:10:55Z,"Consensus code seems hard enough to change as it is without adding extra hurdles.\n\n> In consensus code, making sure you're forced to change all the places something is used if\n> you change a type strikes me as a very, very good idea.\n\nBy that logic, instead of\n`const COutPoint &prevout = tx.vin[i].prevout;`\n\nit would be better to write\n```\nconst CTxIn& txin = tx.vin[i];\nconst",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r139251146,139251146,src/consensus/tx_verify.cpp
jtimon,2017-09-20T21:17:48Z,Let's please leave this for another PR,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r140095511,140095511,src/consensus/tx_verify.cpp
danra,2017-09-21T20:38:42Z,"@TheBlueMatt \n> It should be OK, the DoS from ConnectBlock is important\n\nWhich DoS? The one previously returned from `CheckTxInputs` in case of missing inputs? If so, IIUC it wouldn't trigger after this change, there would just be an error returned, since it replaced the previous DoS in `ConnectBlock` https://github.com/bitcoin/bitcoin/commit/c93ceb2dbde1c2474ee04946fb4594b668613dbe#diff-24e",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r140352837,140352837,src/consensus/tx_verify.cpp
danra,2017-09-21T20:39:41Z,@jtimon IMHO it would fit nicely in the minor changes commit,https://github.com/bitcoin/bitcoin/pull/8498#discussion_r140353044,140353044,src/consensus/tx_verify.cpp
danra,2017-09-21T20:40:08Z,"OK, deleting this comment.",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r140353143,140353143,src/consensus/tx_verify.cpp
TheBlueMatt,2017-09-21T20:53:05Z,"DoS values persist through the state object (and should only be set once through the entire call tree). Thus, when ConnectBlock calls CheckTxInputs, which sets DoS, ConnectBlock *should* return only error() and not call DoS again, but the DoS points will still be returned through the state object.",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r140356187,140356187,src/consensus/tx_verify.cpp
danra,2017-09-21T20:55:17Z,"@TheBlueMatt Ah, I see. Thanks!",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r140356672,140356672,src/consensus/tx_verify.cpp
TheBlueMatt,2017-09-21T20:55:19Z,"Please dont delete comments. Just because a PR author decided against taking a suggestion doesnt mean review content should be deleted. Others may wish to agree with the suggestion or otherwise just view the history of what was discussed. Unless a comment is updated immediately afterwards, generally I'd prefer they not be edited.",https://github.com/bitcoin/bitcoin/pull/8498#discussion_r140356686,140356686,src/consensus/tx_verify.cpp
