[
  {
    "sha": "3e8b4dd220b2ddf8ae7f10808d529e4b09058180",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozZThiNGRkMjIwYjJkZGY4YWU3ZjEwODA4ZDUyOWU0YjA5MDU4MTgw",
    "commit": {
      "author": {
        "name": "Kristaps Kaupe",
        "email": "kristaps@blogiem.lv",
        "date": "2021-08-26T16:50:57Z"
      },
      "committer": {
        "name": "Kristaps Kaupe",
        "email": "kristaps@blogiem.lv",
        "date": "2021-08-28T18:22:36Z"
      },
      "message": "Add universal options argument to listtransactions",
      "tree": {
        "sha": "3fe159fb3310050314f8b2bdb5f9a489c1d1fe81",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3fe159fb3310050314f8b2bdb5f9a489c1d1fe81"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3e8b4dd220b2ddf8ae7f10808d529e4b09058180",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEcKHUfdRPWd+LIiRDM+Ry/ocMfl0FAmEqfu0ACgkQM+Ry/ocM\nfl08AxAAmv2KOECk51alyjFXBKX2dMrPx1H+P3Olaway1I1Ra7GltMJlt+xWN9wa\nEvsTfR1H8YZpNNmOqGrISs2TZ0+MyukAz93w/Lu3AoIvXuK9DEDAqqRHfGZZK70h\n8b3VvZcbduzXXje/Qp/w3TEA4mtNWpciuZZhuF+6fVlPy2kZtHpOT1Anhte+/xWu\nmBSGEgqr1xiN8PyTyXptAYi/PT32qzw4/t/FcZ9IoBa2LQUdchexFsKVK09cP4Jy\nKm9JI6QdSql+OxfF57To0RxfmuoI7zQkI9hDSkfbGSSPfZBO3oA0lSwES/q3MFLO\ncmhM69hwilzxmSnPMcxGPKYhCSQEcb+nqdjmCIMtDT/1S4A9/vnA5YmtxdWHzv5C\n/PBK/lnh3ShdVEHx4WYYl8LRTBxBeB8br6Twh+183XEK0vpmvLWL+6nWo+Phau+A\nrJp1IIlYOlDCE0v7SYBWFweCfByrl0d85jgds3LgRc7RpLXJomzxC7plBgNz24fY\nynQ4GkJFo8ixbBBVPZSXi4PyJ9sHu1/vSvpYD+CAX5qczjxr3EjCnkEMOc6urpNE\n/TBPdE5U8b1bY9EXm8AV8MVoQwU9BazYbUqWYJgl7tsK1pN9dH2dtGZmtrEUjYO4\n+J2GDVsgULb88Sgn6zFwSOKv/JiLihmF7fDQ6yRyCRnQEluB06Y=\n=yMl4\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwID4Cx0kOlPZZFWE87gonRV9ZmcRgbKGIihjabw542R+aCP/wECb14TdihtMK\n498odzZ5oHgI8QRhKn7y8AgnsG4a5lr1ZwCD3+MNLvkMjiMiaHR0cHM6Ly9idGMu\nY2FsZW5kYXIuY2F0YWxsYXh5LmNvbf/wECuKxFH17CPKRqSqRdVO7K0I8CD76Ln5\njj9oBj27xd9tQ1Cut+Mh1bazNuDqkeNY0fcwfQjxBGEqfvLwCFfa3KkP8l70AIPf\n4w0u+QyOLi1odHRwczovL2FsaWNlLmJ0Yy5jYWxlbmRhci5vcGVudGltZXN0YW1w\ncy5vcmf/8BA2FVKyjErli2Jstn5Gg+QACPEEYSp+8vAIdyDg4bzFoLoAg9/jDS75\nDI4sK2h0dHBzOi8vYm9iLmJ0Yy5jYWxlbmRhci5vcGVudGltZXN0YW1wcy5vcmfw\nEPdC5xNhfaM6cnw4pR3HOrYI8CCkLCEHvhS1kjT9BKpilSVnMBAVGw817c78XxL3\nbRR/uAjxBGEqfvPwCA0jEwlLHC1SAIPf4w0u+QyOKShodHRwczovL2Zpbm5leS5j\nYWxlbmRhci5ldGVybml0eXdhbGwuY29t\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree 3fe159fb3310050314f8b2bdb5f9a489c1d1fe81\nparent 774a4f517cf63df345e6a4852cc0b135b0a9ab76\nauthor Kristaps Kaupe <kristaps@blogiem.lv> 1629996657 +0300\ncommitter Kristaps Kaupe <kristaps@blogiem.lv> 1630174956 +0300\n\nAdd universal options argument to listtransactions\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3e8b4dd220b2ddf8ae7f10808d529e4b09058180",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3e8b4dd220b2ddf8ae7f10808d529e4b09058180",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3e8b4dd220b2ddf8ae7f10808d529e4b09058180/comments",
    "author": {
      "login": "kristapsk",
      "id": 4500994,
      "node_id": "MDQ6VXNlcjQ1MDA5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4500994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kristapsk",
      "html_url": "https://github.com/kristapsk",
      "followers_url": "https://api.github.com/users/kristapsk/followers",
      "following_url": "https://api.github.com/users/kristapsk/following{/other_user}",
      "gists_url": "https://api.github.com/users/kristapsk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kristapsk/subscriptions",
      "organizations_url": "https://api.github.com/users/kristapsk/orgs",
      "repos_url": "https://api.github.com/users/kristapsk/repos",
      "events_url": "https://api.github.com/users/kristapsk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kristapsk/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kristapsk",
      "id": 4500994,
      "node_id": "MDQ6VXNlcjQ1MDA5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4500994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kristapsk",
      "html_url": "https://github.com/kristapsk",
      "followers_url": "https://api.github.com/users/kristapsk/followers",
      "following_url": "https://api.github.com/users/kristapsk/following{/other_user}",
      "gists_url": "https://api.github.com/users/kristapsk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kristapsk/subscriptions",
      "organizations_url": "https://api.github.com/users/kristapsk/orgs",
      "repos_url": "https://api.github.com/users/kristapsk/repos",
      "events_url": "https://api.github.com/users/kristapsk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kristapsk/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "774a4f517cf63df345e6a4852cc0b135b0a9ab76",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/774a4f517cf63df345e6a4852cc0b135b0a9ab76",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/774a4f517cf63df345e6a4852cc0b135b0a9ab76"
      }
    ],
    "stats": {
      "total": 28,
      "additions": 24,
      "deletions": 4
    },
    "files": [
      {
        "sha": "eea17a05fbae567349533b10ccab13fa35e47a10",
        "filename": "src/rpc/client.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3e8b4dd220b2ddf8ae7f10808d529e4b09058180/src/rpc/client.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3e8b4dd220b2ddf8ae7f10808d529e4b09058180/src/rpc/client.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/client.cpp?ref=3e8b4dd220b2ddf8ae7f10808d529e4b09058180",
        "patch": "@@ -63,6 +63,7 @@ static const CRPCConvertParam vRPCConvertParams[] =\n     { \"waitfornewblock\", 0, \"timeout\" },\n     { \"listtransactions\", 1, \"count\" },\n     { \"listtransactions\", 2, \"skip\" },\n+    { \"listtransactions\", 2, \"options\" },\n     { \"listtransactions\", 3, \"include_watchonly\" },\n     { \"walletpassphrase\", 1, \"timeout\" },\n     { \"getblocktemplate\", 0, \"template_request\" },"
      },
      {
        "sha": "07476d2b58332dd5e73404d470cdb7e185e1eee0",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 23,
        "deletions": 4,
        "changes": 27,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3e8b4dd220b2ddf8ae7f10808d529e4b09058180/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3e8b4dd220b2ddf8ae7f10808d529e4b09058180/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=3e8b4dd220b2ddf8ae7f10808d529e4b09058180",
        "patch": "@@ -1412,7 +1412,11 @@ static RPCHelpMan listtransactions()\n                     {\"label|dummy\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"If set, should be a valid label name to return only incoming transactions\\n\"\n                           \"with the specified label, or \\\"*\\\" to disable filtering and return all transactions.\"},\n                     {\"count\", RPCArg::Type::NUM, RPCArg::Default{10}, \"The number of transactions to return\"},\n-                    {\"skip\", RPCArg::Type::NUM, RPCArg::Default{0}, \"The number of transactions to skip\"},\n+                    {\"options|skip\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED_NAMED_ARG, \"for backward compatibility: passing in a number instead of an object will result in {\\\"skip\\\":nnn}\",\n+                        {\n+                            {\"skip\", RPCArg::Type::NUM, RPCArg::Default{0}, \"The number of transactions to skip.\"},\n+                        },\n+                        \"options\"},\n                     {\"include_watchonly\", RPCArg::Type::BOOL, RPCArg::DefaultHint{\"true for watch-only wallets, otherwise false\"}, \"Include transactions to watch-only addresses (see 'importaddress')\"},\n                 },\n                 RPCResult{\n@@ -1446,9 +1450,9 @@ static RPCHelpMan listtransactions()\n             \"\\nList the most recent 10 transactions in the systems\\n\"\n             + HelpExampleCli(\"listtransactions\", \"\") +\n             \"\\nList transactions 100 to 120\\n\"\n-            + HelpExampleCli(\"listtransactions\", \"\\\"*\\\" 20 100\") +\n+            + HelpExampleCli(\"listtransactions\", \"\\\"*\\\" 20 '{\\\"skip\\\":100}'\") +\n             \"\\nAs a JSON-RPC call\\n\"\n-            + HelpExampleRpc(\"listtransactions\", \"\\\"*\\\", 20, 100\")\n+            + HelpExampleRpc(\"listtransactions\", \"\\\"*\\\", 20, '{\\\"skip\\\":100}'\")\n                 },\n         [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n {\n@@ -1469,9 +1473,24 @@ static RPCHelpMan listtransactions()\n     int nCount = 10;\n     if (!request.params[1].isNull())\n         nCount = request.params[1].get_int();\n+\n     int nFrom = 0;\n-    if (!request.params[2].isNull())\n+    const UniValue& options = request.params[2];\n+    if (options.type() == UniValue::VNUM) {\n+        // backward compatibility int only fallback\n         nFrom = request.params[2].get_int();\n+    }\n+    else if (!options.isNull()) {\n+        RPCTypeCheckArgument(options, UniValue::VOBJ);\n+        RPCTypeCheckObj(options,\n+            {\n+                {\"skip\", UniValueType(UniValue::VNUM)},\n+            }, /* allow missing/null keys */ true, /* disallow unknown keys */ true);\n+        if (options.exists(\"skip\")) {\n+            nFrom = options[\"skip\"].get_int();\n+        }\n+    }\n+\n     isminefilter filter = ISMINE_SPENDABLE;\n \n     if (ParseIncludeWatchonly(request.params[3], *pwallet)) {"
      }
    ]
  }
]