dgenr8,2014-07-22T07:13:14Z,Prior development work subsumed in this request: #3883 #4450 #4484\nGuidance and contributions so far from the following: @gavinandresen @mikehearn @petertodd @SergioDemianLerner @laanwj @sipa @jgarzik @gmaxwell @drak @Diapolo\n,https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-49705678,49705678,
petertodd,2014-07-22T20:45:31Z,"UI needs to have a more restrictive idea of what is a double-spend. Make it only trigger the UI display of a double-spend if the double-spend doesn't pay you at least as much as the previous tx.\n\nRight now this warning will be set off by accident in many cases, for instance wallets like GreenAddress.it where dual-factor controls expire after some time period, allowing the txouts to be spent with",https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-49798175,49798175,
jgarzik,2014-07-22T20:57:46Z,"Also there are valid double spend cases employed in contract protocols.  For example, payment channels rely on only-A-or-B-is-valid protocol property to guarantee that the payment channel refund transaction OR the payment channel payment transaction is valid, but not both.\n",https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-49799833,49799833,
dgenr8,2014-07-22T23:42:14Z,"@jgarzik Are there double-spend cases where an alert would be undesirable?\n\nFor a payment channel, merchant would get an alert for the known attack where merchant claims payment close to the refund unlock time, then customer broadcasts the refund transaction as a double-spend as soon as it unlocks.\n",https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-49816133,49816133,
dgenr8,2014-07-23T01:13:02Z,"@petertodd That is a bit of a minefield.  Consider these 3 transactions \n\n```\n In       Paysme\ntx1-1\n coin1      1\n\ntx1-2\n coin2      1\n\ntx2\n coin1      1\n coin2\n```\n\ntx2 double-spends both tx1-1 and tx1-2.  It pays as much as either one alone, but is not innocuous because it can stop both of them from confirming.  What the UI currently does is highlight both tx1-1 and tx1-2 (confli",https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-49822001,49822001,
luke-jr,2014-07-23T01:16:34Z,@dgenr8 I don't think anyone said implementing this correctly would be easy ;)\n,https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-49822207,49822207,
dgenr8,2014-07-23T02:50:41Z,@luke-jr It wasn't ;P  The example can be made arbitrarily complex by making overlapping groups of conflicts.  The wording is careful -- another transaction was seen spending the money you think you're getting [unsaid -- there may be a third that you haven't seen].  Best to wait for confirmation.\n,https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-49827373,49827373,
petertodd,2014-07-23T03:41:30Z,@dgenr8 You've also forgotten the case there tx2 spends tx1 and tx1 is double-spent. You're code doesn't right now warn users if they're only paid by tx2. Probably better to remove the UI stuff in this patch for now; make it a separate patch.\n,https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-49829720,49829720,
luke-jr,2014-07-23T03:53:38Z,"@dgenr8 Warning users about perfectly reasonable behaviour is not appropriate. And you should always wait for confirmation if you need confirmation, period.\n",https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-49830281,49830281,
dgenr8,2014-07-23T22:32:33Z,"@petertodd Thank you.  Proper alerts for a double-spend of an unconfirmed parent will require adding the branch of unconfirmed parents to the wallet at the time the child is first added.\n\nI'd like to get feedback on whether anyone sees a problem with this.  These parents would be persistent like all wallet txes, and would not be displayed unless they are IsMine/IsFromMe themselves.  They were al",https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-49945425,49945425,
dgenr8,2014-08-23T01:22:32Z,"Lately, miners are pretty consistently [not mining respends](http://respends.thinlink.com/) if they occur quickly, apparently up to a day or so after the first spend.\n\nThat is nice, but the network still buries respends.  Accepting 0-conf payments is still susceptible to the following attack, even if all miners are nice:\n\nWhen ready to ""pay,"" attacker first transmits a bunch of transactions tx",https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-53138831,53138831,
BitcoinPullTester,2014-09-20T21:09:34Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4570_d17d9ccf44625207415e6450171579ce8351c99d/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-te",https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-56280462,56280462,
jonasschnelli,2015-03-11T12:56:13Z,needs rebase.\n,https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-78257473,78257473,
luke-jr,2015-03-13T16:50:28Z,"Some serious problems with this still: respend checking is performed after IsStandard , so a fraudster need only craft his transactions carefully to defeat this entirely; if the order of this is inverted, you then create a situation where it encourages people who want to send real non-IsStandard transactions to do so as a double spend. I think the only way to resolve this is to remove IsStandard f",https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-79124379,79124379,
dgenr8,2015-03-16T16:09:55Z,"@luke-jr First to catch up, the ""wait for confirmation"" part of the alert dialog message was removed.  You're right, it's best to stick to the facts.\n\nYou are also correct that this change does not secure unconfirmed spends, and as currently written,  does not help in the construction of a system that does.\n\nWhat this change claims to do, and does, is to stop delaying the moment when intereste",https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-81765652,81765652,
dgenr8,2015-07-13T00:48:03Z,Rebased.  There is a question of where to put the equivalent-tx-check function.  At the moment there are identical versions in CTransaction and CWalletTx.  See #6365.\n,https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-120776955,120776955,
jgarzik,2015-07-23T17:58:52Z,"Observations on this pull request:\n- Zero ACKs after a year\n- Discussion on mailing list, here and IRC indicates concerns remain\n\nGoing to close.  That is perhaps mildly controversial given the current core/xt code fork debates, but it seems within bounds of reasonable project management.\n\nWe can re-open if ACKs suddenly appear or concerns are alleviated, etc.  The overall motivation is simp",https://github.com/bitcoin/bitcoin/pull/4570#issuecomment-124184707,124184707,
