[
  {
    "sha": "ed7ac4dea7149f3fe431e981ab95c1da133566b2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplZDdhYzRkZWE3MTQ5ZjNmZTQzMWU5ODFhYjk1YzFkYTEzMzU2NmIy",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2015-06-19T14:07:25Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2015-06-19T19:45:34Z"
      },
      "message": "[Qt] simplify code for third party TX urls handling\n\n- prefer a foreach over a for loop and use a function from GUIUtil, to use\n  code we already have",
      "tree": {
        "sha": "7cd9d4efaee19c86f5323249257309217dc41d7f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7cd9d4efaee19c86f5323249257309217dc41d7f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ed7ac4dea7149f3fe431e981ab95c1da133566b2",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ed7ac4dea7149f3fe431e981ab95c1da133566b2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ed7ac4dea7149f3fe431e981ab95c1da133566b2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ed7ac4dea7149f3fe431e981ab95c1da133566b2/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "247b91449ad7d041c6af5d2abf5660ab00be0fb4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/247b91449ad7d041c6af5d2abf5660ab00be0fb4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/247b91449ad7d041c6af5d2abf5660ab00be0fb4"
      }
    ],
    "stats": {
      "total": 39,
      "additions": 17,
      "deletions": 22
    },
    "files": [
      {
        "sha": "0efa2bd9752e13cf3b6d17ce965feb8ac084795a",
        "filename": "src/qt/transactionview.cpp",
        "status": "modified",
        "additions": 17,
        "deletions": 22,
        "changes": 39,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ed7ac4dea7149f3fe431e981ab95c1da133566b2/src/qt/transactionview.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ed7ac4dea7149f3fe431e981ab95c1da133566b2/src/qt/transactionview.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionview.cpp?ref=ed7ac4dea7149f3fe431e981ab95c1da133566b2",
        "patch": "@@ -176,8 +176,7 @@ TransactionView::TransactionView(QWidget *parent) :\n void TransactionView::setModel(WalletModel *model)\n {\n     this->model = model;\n-    if(model)\n-    {\n+    if (model && model->getOptionsModel()) {\n         transactionProxyModel = new TransactionFilterProxy(this);\n         transactionProxyModel->setSourceModel(model->getTransactionTableModel());\n         transactionProxyModel->setDynamicSortFilter(true);\n@@ -203,22 +202,20 @@ void TransactionView::setModel(WalletModel *model)\n \n         columnResizingFixer = new GUIUtil::TableViewLastColumnResizingFixer(transactionView, AMOUNT_MINIMUM_COLUMN_WIDTH, MINIMUM_COLUMN_WIDTH);\n \n-        if (model->getOptionsModel())\n-        {\n-            // Add third party transaction URLs to context menu\n-            QStringList listUrls = model->getOptionsModel()->getThirdPartyTxUrls().split(\"|\", QString::SkipEmptyParts);\n-            for (int i = 0; i < listUrls.size(); ++i)\n-            {\n-                QString host = QUrl(listUrls[i].trimmed(), QUrl::StrictMode).host();\n-                if (!host.isEmpty())\n-                {\n-                    QAction *thirdPartyTxUrlAction = new QAction(host, this); // use host as menu item label\n-                    if (i == 0)\n-                        contextMenu->addSeparator();\n-                    contextMenu->addAction(thirdPartyTxUrlAction);\n-                    connect(thirdPartyTxUrlAction, SIGNAL(triggered()), mapperThirdPartyTxUrls, SLOT(map()));\n-                    mapperThirdPartyTxUrls->setMapping(thirdPartyTxUrlAction, listUrls[i].trimmed());\n+        // Add third party transaction URLs to context menu\n+        bool fFirst = true;\n+        foreach (const QString& strUrl, model->getOptionsModel()->getThirdPartyTxUrls().split(\"|\", QString::SkipEmptyParts)) {\n+            QString strUrlTrimmed = strUrl.trimmed();\n+            QString host = QUrl(strUrlTrimmed, QUrl::StrictMode).host();\n+            if (!host.isEmpty()) {\n+                QAction *thirdPartyTxUrlAction = new QAction(host, this); // use host as menu item label\n+                if (fFirst) {\n+                    contextMenu->addSeparator();\n+                    fFirst = false;\n                 }\n+                contextMenu->addAction(thirdPartyTxUrlAction);\n+                connect(thirdPartyTxUrlAction, SIGNAL(triggered()), mapperThirdPartyTxUrls, SLOT(map()));\n+                mapperThirdPartyTxUrls->setMapping(thirdPartyTxUrlAction, strUrlTrimmed);\n             }\n         }\n \n@@ -439,11 +436,9 @@ void TransactionView::showDetails()\n \n void TransactionView::openThirdPartyTxUrl(QString url)\n {\n-    if(!transactionView || !transactionView->selectionModel())\n-        return;\n-    QModelIndexList selection = transactionView->selectionModel()->selectedRows(0);\n-    if(!selection.isEmpty())\n-         QDesktopServices::openUrl(QUrl::fromUserInput(url.replace(\"%s\", selection.at(0).data(TransactionTableModel::TxHashRole).toString())));\n+    QString strTxHash = GUIUtil::getEntryData(transactionView, 0, TransactionTableModel::TxHashRole);\n+    if (!strTxHash.isEmpty())\n+        QDesktopServices::openUrl(QUrl::fromUserInput(url.replace(\"%s\", strTxHash)));\n }\n \n QWidget *TransactionView::createDateRangeWidget()"
      }
    ]
  }
]