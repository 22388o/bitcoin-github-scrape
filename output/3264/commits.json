[
  {
    "sha": "415b30e602502842caf640b220c148929f67b697",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0MTViMzBlNjAyNTAyODQyY2FmNjQwYjIyMGMxNDg5MjlmNjdiNjk3",
    "commit": {
      "author": {
        "name": "Guillermo C\u00e9spedes Tab\u00e1rez",
        "email": "dev.dertin@gmail.com",
        "date": "2013-11-15T12:03:21Z"
      },
      "committer": {
        "name": "Guillermo C\u00e9spedes Tab\u00e1rez",
        "email": "dev.dertin@gmail.com",
        "date": "2013-11-15T12:03:21Z"
      },
      "message": "Update ax_pthread.m4\n\nUpgraded to serial 21.",
      "tree": {
        "sha": "8151dbc7bd598f3af744dd7acab7b42c3d9a1372",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8151dbc7bd598f3af744dd7acab7b42c3d9a1372"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/415b30e602502842caf640b220c148929f67b697",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/415b30e602502842caf640b220c148929f67b697",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/415b30e602502842caf640b220c148929f67b697",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/415b30e602502842caf640b220c148929f67b697/comments",
    "author": {
      "login": "dertin",
      "id": 1295883,
      "node_id": "MDQ6VXNlcjEyOTU4ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1295883?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dertin",
      "html_url": "https://github.com/dertin",
      "followers_url": "https://api.github.com/users/dertin/followers",
      "following_url": "https://api.github.com/users/dertin/following{/other_user}",
      "gists_url": "https://api.github.com/users/dertin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dertin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dertin/subscriptions",
      "organizations_url": "https://api.github.com/users/dertin/orgs",
      "repos_url": "https://api.github.com/users/dertin/repos",
      "events_url": "https://api.github.com/users/dertin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dertin/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dertin",
      "id": 1295883,
      "node_id": "MDQ6VXNlcjEyOTU4ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1295883?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dertin",
      "html_url": "https://github.com/dertin",
      "followers_url": "https://api.github.com/users/dertin/followers",
      "following_url": "https://api.github.com/users/dertin/following{/other_user}",
      "gists_url": "https://api.github.com/users/dertin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dertin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dertin/subscriptions",
      "organizations_url": "https://api.github.com/users/dertin/orgs",
      "repos_url": "https://api.github.com/users/dertin/repos",
      "events_url": "https://api.github.com/users/dertin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dertin/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4fc241235c41fbf7f2592dfee11db5b7b71c17ad",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4fc241235c41fbf7f2592dfee11db5b7b71c17ad",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4fc241235c41fbf7f2592dfee11db5b7b71c17ad"
      }
    ],
    "stats": {
      "total": 49,
      "additions": 32,
      "deletions": 17
    },
    "files": [
      {
        "sha": "d383ad5c6d6a5061370800bb1dc89b7a334c0638",
        "filename": "src/m4/ax_pthread.m4",
        "status": "modified",
        "additions": 32,
        "deletions": 17,
        "changes": 49,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/415b30e602502842caf640b220c148929f67b697/src/m4/ax_pthread.m4",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/415b30e602502842caf640b220c148929f67b697/src/m4/ax_pthread.m4",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/m4/ax_pthread.m4?ref=415b30e602502842caf640b220c148929f67b697",
        "patch": "@@ -82,7 +82,7 @@\n #   modified version of the Autoconf Macro, you may extend this special\n #   exception to the GPL to apply to your modified version as well.\n \n-#serial 20\n+#serial 21\n \n AU_ALIAS([ACX_PTHREAD], [AX_PTHREAD])\n AC_DEFUN([AX_PTHREAD], [\n@@ -103,8 +103,8 @@ if test x\"$PTHREAD_LIBS$PTHREAD_CFLAGS\" != x; then\n         save_LIBS=\"$LIBS\"\n         LIBS=\"$PTHREAD_LIBS $LIBS\"\n         AC_MSG_CHECKING([for pthread_join in LIBS=$PTHREAD_LIBS with CFLAGS=$PTHREAD_CFLAGS])\n-        AC_TRY_LINK_FUNC(pthread_join, ax_pthread_ok=yes)\n-        AC_MSG_RESULT($ax_pthread_ok)\n+        AC_TRY_LINK_FUNC([pthread_join], [ax_pthread_ok=yes])\n+        AC_MSG_RESULT([$ax_pthread_ok])\n         if test x\"$ax_pthread_ok\" = xno; then\n                 PTHREAD_LIBS=\"\"\n                 PTHREAD_CFLAGS=\"\"\n@@ -164,6 +164,20 @@ case ${host_os} in\n         ;;\n esac\n \n+# Clang doesn't consider unrecognized options an error unless we specify\n+# -Werror. We throw in some extra Clang-specific options to ensure that\n+# this doesn't happen for GCC, which also accepts -Werror.\n+\n+AC_MSG_CHECKING([if compiler needs -Werror to reject unknown flags])\n+save_CFLAGS=\"$CFLAGS\"\n+ax_pthread_extra_flags=\"-Werror\"\n+CFLAGS=\"$CFLAGS $ax_pthread_extra_flags -Wunknown-warning-option -Wsizeof-array-argument\"\n+AC_COMPILE_IFELSE([AC_LANG_PROGRAM([int foo(void);],[foo()])],\n+                  [AC_MSG_RESULT([yes])],\n+                  [ax_pthread_extra_flags=\n+                   AC_MSG_RESULT([no])])\n+CFLAGS=\"$save_CFLAGS\"\n+\n if test x\"$ax_pthread_ok\" = xno; then\n for flag in $ax_pthread_flags; do\n \n@@ -178,7 +192,7 @@ for flag in $ax_pthread_flags; do\n                 ;;\n \n                 pthread-config)\n-                AC_CHECK_PROG(ax_pthread_config, pthread-config, yes, no)\n+                AC_CHECK_PROG([ax_pthread_config], [pthread-config], [yes], [no])\n                 if test x\"$ax_pthread_config\" = xno; then continue; fi\n                 PTHREAD_CFLAGS=\"`pthread-config --cflags`\"\n                 PTHREAD_LIBS=\"`pthread-config --ldflags` `pthread-config --libs`\"\n@@ -193,7 +207,7 @@ for flag in $ax_pthread_flags; do\n         save_LIBS=\"$LIBS\"\n         save_CFLAGS=\"$CFLAGS\"\n         LIBS=\"$PTHREAD_LIBS $LIBS\"\n-        CFLAGS=\"$CFLAGS $PTHREAD_CFLAGS\"\n+        CFLAGS=\"$CFLAGS $PTHREAD_CFLAGS $ax_pthread_extra_flags\"\n \n         # Check for various functions.  We must include pthread.h,\n         # since some functions may be macros.  (On the Sequent, we\n@@ -219,7 +233,7 @@ for flag in $ax_pthread_flags; do\n         LIBS=\"$save_LIBS\"\n         CFLAGS=\"$save_CFLAGS\"\n \n-        AC_MSG_RESULT($ax_pthread_ok)\n+        AC_MSG_RESULT([$ax_pthread_ok])\n         if test \"x$ax_pthread_ok\" = xyes; then\n                 break;\n         fi\n@@ -245,9 +259,9 @@ if test \"x$ax_pthread_ok\" = xyes; then\n                 [attr_name=$attr; break],\n                 [])\n         done\n-        AC_MSG_RESULT($attr_name)\n+        AC_MSG_RESULT([$attr_name])\n         if test \"$attr_name\" != PTHREAD_CREATE_JOINABLE; then\n-            AC_DEFINE_UNQUOTED(PTHREAD_CREATE_JOINABLE, $attr_name,\n+            AC_DEFINE_UNQUOTED([PTHREAD_CREATE_JOINABLE], [$attr_name],\n                                [Define to necessary symbol if this constant\n                                 uses a non-standard name on your system.])\n         fi\n@@ -261,24 +275,25 @@ if test \"x$ax_pthread_ok\" = xyes; then\n             if test \"$GCC\" = \"yes\"; then\n                 flag=\"-D_REENTRANT\"\n             else\n+                # TODO: What about Clang on Solaris?\n                 flag=\"-mt -D_REENTRANT\"\n             fi\n             ;;\n         esac\n-        AC_MSG_RESULT(${flag})\n+        AC_MSG_RESULT([$flag])\n         if test \"x$flag\" != xno; then\n             PTHREAD_CFLAGS=\"$flag $PTHREAD_CFLAGS\"\n         fi\n \n         AC_CACHE_CHECK([for PTHREAD_PRIO_INHERIT],\n-            ax_cv_PTHREAD_PRIO_INHERIT, [\n-                AC_LINK_IFELSE([\n-                    AC_LANG_PROGRAM([[#include <pthread.h>]], [[int i = PTHREAD_PRIO_INHERIT;]])],\n+            [ax_cv_PTHREAD_PRIO_INHERIT], [\n+                AC_LINK_IFELSE([AC_LANG_PROGRAM([[#include <pthread.h>]],\n+                                                [[int i = PTHREAD_PRIO_INHERIT;]])],\n                     [ax_cv_PTHREAD_PRIO_INHERIT=yes],\n                     [ax_cv_PTHREAD_PRIO_INHERIT=no])\n             ])\n         AS_IF([test \"x$ax_cv_PTHREAD_PRIO_INHERIT\" = \"xyes\"],\n-            AC_DEFINE([HAVE_PTHREAD_PRIO_INHERIT], 1, [Have PTHREAD_PRIO_INHERIT.]))\n+            [AC_DEFINE([HAVE_PTHREAD_PRIO_INHERIT], [1], [Have PTHREAD_PRIO_INHERIT.])])\n \n         LIBS=\"$save_LIBS\"\n         CFLAGS=\"$save_CFLAGS\"\n@@ -301,13 +316,13 @@ fi\n \n test -n \"$PTHREAD_CC\" || PTHREAD_CC=\"$CC\"\n \n-AC_SUBST(PTHREAD_LIBS)\n-AC_SUBST(PTHREAD_CFLAGS)\n-AC_SUBST(PTHREAD_CC)\n+AC_SUBST([PTHREAD_LIBS])\n+AC_SUBST([PTHREAD_CFLAGS])\n+AC_SUBST([PTHREAD_CC])\n \n # Finally, execute ACTION-IF-FOUND/ACTION-IF-NOT-FOUND:\n if test x\"$ax_pthread_ok\" = xyes; then\n-        ifelse([$1],,AC_DEFINE(HAVE_PTHREAD,1,[Define if you have POSIX threads libraries and header files.]),[$1])\n+        ifelse([$1],,[AC_DEFINE([HAVE_PTHREAD],[1],[Define if you have POSIX threads libraries and header files.])],[$1])\n         :\n else\n         ax_pthread_ok=no"
      }
    ]
  }
]