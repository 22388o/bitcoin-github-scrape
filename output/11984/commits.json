[
  {
    "sha": "6915f93cc9edc56ecc6de20b72fb1eee35c0d164",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2OTE1ZjkzY2M5ZWRjNTZlY2M2ZGUyMGI3MmZiMWVlZTM1YzBkMTY0",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2017-12-22T08:44:32Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2017-12-22T09:08:53Z"
      },
      "message": "doc: Update OpenBSD build instructions for 6.2\n\nThere is no more need to install a compiler. This simplifies\ninstructions a lot.",
      "tree": {
        "sha": "c0c0b2b973b802fd23afb801cc00e38876cd9c07",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c0c0b2b973b802fd23afb801cc00e38876cd9c07"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6915f93cc9edc56ecc6de20b72fb1eee35c0d164",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6915f93cc9edc56ecc6de20b72fb1eee35c0d164",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6915f93cc9edc56ecc6de20b72fb1eee35c0d164",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6915f93cc9edc56ecc6de20b72fb1eee35c0d164/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "180a25596a29a553164266b882290fde6185cc0d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/180a25596a29a553164266b882290fde6185cc0d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/180a25596a29a553164266b882290fde6185cc0d"
      }
    ],
    "stats": {
      "total": 72,
      "additions": 33,
      "deletions": 39
    },
    "files": [
      {
        "sha": "0817821221d3a5079a9c39d4cbe3b402e27781b5",
        "filename": "doc/build-openbsd.md",
        "status": "modified",
        "additions": 33,
        "deletions": 39,
        "changes": 72,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6915f93cc9edc56ecc6de20b72fb1eee35c0d164/doc/build-openbsd.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6915f93cc9edc56ecc6de20b72fb1eee35c0d164/doc/build-openbsd.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/build-openbsd.md?ref=6915f93cc9edc56ecc6de20b72fb1eee35c0d164",
        "patch": "@@ -23,47 +23,31 @@ git clone https://github.com/bitcoin/bitcoin.git\n \n See [dependencies.md](dependencies.md) for a complete overview.\n \n-GCC\n--------\n-\n-The default C++ compiler that comes with OpenBSD 6.2 is g++ 4.2.1. This version is old (from 2007), and is not able to compile the current version of Bitcoin Core because it has no C++11 support. We'll install a newer version of GCC:\n-\n-```bash\n- pkg_add g++\n- ```\n-\n- This compiler will not overwrite the system compiler, it will be installed as `egcc` and `eg++` in `/usr/local/bin`.\n+**Important**: From OpenBSD 6.2 onwards a C++11-supporting clang compiler is\n+part of the base image, and while building it is necessary to make sure that this\n+compiler is used and not ancient g++ 4.2.1. This is done by appending\n+`CC=cc CXX=c++` to configuration commands. Mixing different compilers\n+within the same executable will result in linker errors.\n \n ### Building BerkeleyDB\n \n-BerkeleyDB is only necessary for the wallet functionality. To skip this, pass `--disable-wallet` to `./configure`.\n+BerkeleyDB is only necessary for the wallet functionality. To skip this, pass\n+`--disable-wallet` to `./configure` and skip to the next section.\n \n It is recommended to use Berkeley DB 4.8. You cannot use the BerkeleyDB library\n from ports, for the same reason as boost above (g++/libstd++ incompatibility).\n If you have to build it yourself, you can use [the installation script included\n-in contrib/](contrib/install_db4.sh) like so\n+in contrib/](/contrib/install_db4.sh) like so\n \n ```shell\n-./contrib/install_db4.sh `pwd` CC=egcc CXX=eg++ CPP=ecpp\n+./contrib/install_db4.sh `pwd` CC=cc CXX=c++\n ```\n \n-from the root of the repository.\n-\n-### Resource limits\n-\n-The standard ulimit restrictions in OpenBSD are very strict:\n-\n-    data(kbytes)         1572864\n+from the root of the repository. Then set `BDB_PREFIX` for the next section:\n \n-This, unfortunately, may no longer be enough to compile some `.cpp` files in the project,\n-at least with GCC 4.9.4 (see issue [#6658](https://github.com/bitcoin/bitcoin/issues/6658)).\n-If your user is in the `staff` group the limit can be raised with:\n-\n-    ulimit -d 3000000\n-\n-The change will only affect the current shell and processes spawned by it. To\n-make the change system-wide, change `datasize-cur` and `datasize-max` in\n-`/etc/login.conf`, and reboot.\n+```shell\n+export BDB_PREFIX=\"$PWD/db4\"\n+```\n \n ### Building Bitcoin Core\n \n@@ -79,13 +63,13 @@ Make sure `BDB_PREFIX` is set to the appropriate path from the above steps.\n \n To configure with wallet:\n ```bash\n-./configure --with-gui=no CC=egcc CXX=eg++ CPP=ecpp \\\n+./configure --with-gui=no CC=cc CXX=c++ \\\n     BDB_LIBS=\"-L${BDB_PREFIX}/lib -ldb_cxx-4.8\" BDB_CFLAGS=\"-I${BDB_PREFIX}/include\"\n ```\n \n To configure without wallet:\n ```bash\n-./configure --disable-wallet --with-gui=no CC=egcc CXX=eg++ CPP=ecpp\n+./configure --disable-wallet --with-gui=no CC=cc CXX=c++\n ```\n \n Build and run the tests:\n@@ -94,13 +78,23 @@ gmake # use -jX here for parallelism\n gmake check\n ```\n \n-Clang\n-------------------------------\n+Resource limits\n+-------------------\n \n-```bash\n-pkg_add llvm\n+If the build runs into out-of-memory errors, the instructions in this section\n+might help.\n+\n+The standard ulimit restrictions in OpenBSD are very strict:\n+\n+    data(kbytes)         1572864\n+\n+This, unfortunately, in some cases not enough to compile some `.cpp` files in the project,\n+(see issue [#6658](https://github.com/bitcoin/bitcoin/issues/6658)).\n+If your user is in the `staff` group the limit can be raised with:\n+\n+    ulimit -d 3000000\n+\n+The change will only affect the current shell and processes spawned by it. To\n+make the change system-wide, change `datasize-cur` and `datasize-max` in\n+`/etc/login.conf`, and reboot.\n \n-./configure --disable-wallet --with-gui=no CC=clang CXX=clang++\n-gmake # use -jX here for parallelism\n-gmake check\n-```"
      }
    ]
  }
]