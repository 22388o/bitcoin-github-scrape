jonasschnelli,2017-11-16T06:23:14Z,"Concept ACK.\nIdeally this would also work on OSX.\nSee points above and maybe – if you can – apply this patch in case of macOS: https://github.com/narkoleptik/os-x-berkeleydb-patch/blob/master/atomic.patch\n\nIf not interested to support this on OSX (can also be done later...), please mention in the new script that this is linux/bsd only.",https://github.com/bitcoin/bitcoin/pull/11702#issuecomment-344827884,344827884,
jamesob,2017-11-16T07:17:08Z,"Thanks for the good feedback, @jonasschnelli. I've incorporated your inline comments and am now testing use on OS X. Will report back when I finish testing.",https://github.com/bitcoin/bitcoin/pull/11702#issuecomment-344836593,344836593,
jamesob,2017-11-16T07:39:04Z,I've completed testing on Ubuntu 17.04 and macOS 10.12.1. I've also added reference to the script in `doc/build-osx.md`.,https://github.com/bitcoin/bitcoin/pull/11702#issuecomment-344840502,344840502,
laanwj,2017-11-16T07:57:33Z,Very nice! Concept ACK. I'll test on OpenBSD.,https://github.com/bitcoin/bitcoin/pull/11702#issuecomment-344843752,344843752,
laanwj,2017-11-16T09:11:34Z,"Small patch for openbsd:\n```patch\n--- install_db4.sh      Thu Nov 16 10:10:50 2017\n+++ install_db4.sh.new  Thu Nov 16 09:56:10 2017\n@@ -31,6 +31,8 @@\n   #\n   if check_exists sha256sum; then\n     echo ""${1}  ${2}"" | sha256sum -c\n+  elif check_exists sha256; then\n+    echo ""${1}  ${2}"" | sha256 -c\n   else\n     echo ""${1}  ${2}"" | shasum -a 256 -c\n   fi\n```\nWith this, it w",https://github.com/bitcoin/bitcoin/pull/11702#issuecomment-344860756,344860756,
jamesob,2017-11-16T18:30:58Z,"Great, thanks for the patch & testing @laanwj. I'll apply that and incorporate your other feedback as soon as I get a few minutes.",https://github.com/bitcoin/bitcoin/pull/11702#issuecomment-345015083,345015083,
jonasschnelli,2017-11-16T19:05:36Z,"Nice! Works on macOS.\n\nTested ACK (OSX) d573d7c6783b658283c60689524cc3c3e2a407a8.",https://github.com/bitcoin/bitcoin/pull/11702#issuecomment-345029530,345029530,
jamesob,2017-11-16T19:51:54Z,Incorporated @laanwj's patch and feedback (wasn't sure how to best do attribution for the patch -- happy to rebase it differently). Tested on Ubuntu 16.04 (with and without existing bdb download).,https://github.com/bitcoin/bitcoin/pull/11702#issuecomment-345042792,345042792,
laanwj,2017-11-17T11:04:28Z,"> wasn't sure how to best do attribution for the patch\n\nit's ok - mentioning in the commit message is ok for those two lines, no need to keep it as separate commit :)\n\nRe-tested ACK https://github.com/bitcoin/bitcoin/pull/11702/commits/6e4cdd67b1f2b3927a525ebba843c27ef3c63e1c",https://github.com/bitcoin/bitcoin/pull/11702#issuecomment-345214343,345214343,
jonasschnelli,2017-11-16T06:19:54Z,seems not to work with relative path,https://github.com/bitcoin/bitcoin/pull/11702#discussion_r151328832,151328832,contrib/install_db4.sh
jonasschnelli,2017-11-16T06:20:55Z,would be great if we could have a `curl --insecure` fallback if wget is not present. IMO `curl` should be the default nowadays.,https://github.com/bitcoin/bitcoin/pull/11702#discussion_r151328962,151328962,contrib/install_db4.sh
jonasschnelli,2017-11-16T06:21:18Z,`sha256sum` should have a fallback to `shasum -a 256`,https://github.com/bitcoin/bitcoin/pull/11702#discussion_r151329003,151329003,contrib/install_db4.sh
laanwj,2017-11-16T08:16:29Z,"Might add a comment that this skipping cert check is acceptable because we check the SHA256 hash later, or even roll the sha256_check into the download function so that it is impossible to accidentally skip it.",https://github.com/bitcoin/bitcoin/pull/11702#discussion_r151343700,151343700,contrib/install_db4.sh
laanwj,2017-11-16T08:19:26Z,Should be part of the tarball / `make dist` (`DIST_CONTRIB` in Makefile.am),https://github.com/bitcoin/bitcoin/pull/11702#discussion_r151344190,151344190,contrib/install_db4.sh
jamesob,2017-11-16T08:23:04Z,"Good idea, will do.",https://github.com/bitcoin/bitcoin/pull/11702#discussion_r151344809,151344809,contrib/install_db4.sh
jamesob,2017-11-16T08:36:15Z,"Done, thanks!",https://github.com/bitcoin/bitcoin/pull/11702#discussion_r151347381,151347381,contrib/install_db4.sh
laanwj,2017-11-16T08:53:52Z,We shouldn't download the file if it already exists.,https://github.com/bitcoin/bitcoin/pull/11702#discussion_r151350914,151350914,contrib/install_db4.sh
laanwj,2017-11-16T09:14:22Z,I personally wouldn't remove the tar.gz here. I like to keep it around in case I want/need to re-build (e.g. new gcc version).,https://github.com/bitcoin/bitcoin/pull/11702#discussion_r151355852,151355852,contrib/install_db4.sh
