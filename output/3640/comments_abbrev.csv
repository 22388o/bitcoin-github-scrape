sipa,2014-02-09T17:07:39Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/3640#issuecomment-34579201,34579201,
BitcoinPullTester,2014-05-10T09:37:36Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/b523a1a9a2cfe7da964859d05cffedf2f030e74d for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/3640#issuecomment-42737345,42737345,
laanwj,2014-06-10T08:47:21Z,Closing this as I don't like this solution anymore.\n,https://github.com/bitcoin/bitcoin/pull/3640#issuecomment-45588534,45588534,
sipa,2014-02-09T15:35:18Z,"So, if we can't create the requested datadir, we use """" (the current dir) ?\n",https://github.com/bitcoin/bitcoin/pull/3640#discussion_r9569149,9569149,src/util.cpp
laanwj,2014-02-09T16:57:01Z,"Well """" is simply an invalid error return value. We already return it if the `-datadir` is specified and doesn't exist.\nAt the beginning of bitcoind and -qt we check GetDataDir(False) for an invalid value and show an error if that is the case.\n\nEdit: okay so indeed bitcoin-cli still needs to check this before calling ReadConfigFile() otherwise it may read it from the current directory\n",https://github.com/bitcoin/bitcoin/pull/3640#discussion_r9569484,9569484,src/util.cpp
ajweiss,2014-06-04T18:10:54Z,"Wouldn't it make sense to attempt to read the config file before validating the data directory since the data directory can be specified in the config file?  Consider the case where bitcoind is running as a daemon user with no homedir, and it is started with a -conf=.../bitcoin.conf where bitcoin.conf specifies the datadir.  It will fail here when it is unable to create/validate ~/.bitcoin.    \n",https://github.com/bitcoin/bitcoin/pull/3640#discussion_r13401367,13401367,src/bitcoind.cpp
laanwj,2014-06-04T18:48:14Z,"Yes, my fix is wrong here. It shouldn't assume that the configuration file is in the data directory. I'm not confident that my changes preserve the current behavior in all edge cases, which is also why I haven't merged this yet. It's getting too complex. It may be better to document the behavior that we want, create test cases, and redesign the datadir handling according to that.\n",https://github.com/bitcoin/bitcoin/pull/3640#discussion_r13403407,13403407,src/bitcoind.cpp
ajweiss,2014-06-04T19:59:09Z,"Ok, I propose the following behavior:\n\nFor setting precedence, the following order is used (highest first):\n\n1) Command line arguments\n2) Configuration file settings\n3) Defaults\n\nDefaults (for config and datadir) are defined as:\n\ndatadir: ~/.bitcoin (or OS dependent equivalent)\nconfig: datadir/bitcoin.conf\n\nThe wiki mentions that specifying datadir in the config file is unsupported, s",https://github.com/bitcoin/bitcoin/pull/3640#discussion_r13406999,13406999,src/bitcoind.cpp
laanwj,2014-06-04T20:15:22Z,"@ajweiss Sounds good to me, that has always been the precedence order for settings, but it's surprisingly hard to get right for the datadir. Don't forget that in the case of the GUI there's a  `2.5) Datadir from QSettings`\n\nAnd for `-conf` the precedence order is different and depends on `-datadir` being specified on the command line:\n1) Command line argument `-conf`\n2) bitcoin.conf in `-datad",https://github.com/bitcoin/bitcoin/pull/3640#discussion_r13407878,13407878,src/bitcoind.cpp
