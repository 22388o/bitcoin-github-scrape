practicalswift,2017-10-17T14:42:50Z,@promag This change is already in https://github.com/bitcoin/bitcoin/pull/11226/commits/4c8604e6607114fd06b9be210a25b208e9d64821 which is part of #11226 :-),https://github.com/bitcoin/bitcoin/pull/11515#issuecomment-337254650,337254650,
promag,2017-10-18T09:49:29Z,"@practicalswift removed `GUARDED_BY`, but I'm keeping the `AssertLockHeld`.",https://github.com/bitcoin/bitcoin/pull/11515#issuecomment-337530315,337530315,
TheBlueMatt,2017-11-06T18:57:13Z,Fails travis as DoS_Tests calls State() without cs_main.,https://github.com/bitcoin/bitcoin/pull/11515#issuecomment-342249240,342249240,
MarcoFalke,2017-11-07T17:56:25Z,@promag ping,https://github.com/bitcoin/bitcoin/pull/11515#issuecomment-342567292,342567292,
practicalswift,2017-11-07T18:03:54Z,Locking added to tests in #11623 :-),https://github.com/bitcoin/bitcoin/pull/11515#issuecomment-342569615,342569615,
MarcoFalke,2017-11-10T17:39:54Z,utACK afd5cd588a994ad067862652beaebe78a8d35381,https://github.com/bitcoin/bitcoin/pull/11515#issuecomment-343538461,343538461,
TheBlueMatt,2017-11-10T17:44:52Z,"I dont know if we want to be adding new AssertLockHelds, actually. We should be adding GUARDED_BY annotations as we go, and I think just doing that here may be nice (cause merging them all in one huge #11226 probably isn't gonna happen), but AssertLockHelds dont add much of anything if we're already checking it at compile/travis-time.",https://github.com/bitcoin/bitcoin/pull/11515#issuecomment-343539606,343539606,
laanwj,2017-12-12T09:01:45Z,@promag Can you add the annotation please?,https://github.com/bitcoin/bitcoin/pull/11515#issuecomment-350987773,350987773,
promag,2017-12-12T12:13:17Z,Rebased and updated.,https://github.com/bitcoin/bitcoin/pull/11515#issuecomment-351034211,351034211,
practicalswift,2017-12-12T15:38:05Z,"utACK 8f2616cf99d1e0b573f647cd45ee87fba1c969e9\n\nYay for annotations!",https://github.com/bitcoin/bitcoin/pull/11515#issuecomment-351088565,351088565,
promag,2017-12-12T16:47:00Z,"Adding the annotations breaks the build, which #11226 already takes care of. Rebasing on top of that results only in the assert, which is what was initially.\n\n@laanwj wdyt?",https://github.com/bitcoin/bitcoin/pull/11515#issuecomment-351111162,351111162,
TheBlueMatt,2017-12-12T19:00:58Z,"@promag the annotations are required to be applied recursively. Any function that calls State() must either LOCK(cs_main) prior to the call, or be marked with EXCLUSIVE_LOCKS_REQUIRED(cs_main) itself (and then its callers must LOCK(cs_main)). That's the magic of the new annotations - you get notified by travis for (the simple cases of) missing locks!",https://github.com/bitcoin/bitcoin/pull/11515#issuecomment-351155243,351155243,
