laanwj,2020-05-26 10:58:54,"Concept ACK.\n\nYou might want to add some validationfor the option value: at the least whether it's `<addr>:port`, to prevent passing weird values to Tor's control port with unclear outcomes.\n\nEdit: this is also the first step towards making #8973 possible.\nEdit.2: apparently that uses the `unix:/tmp/path/to/tor/socket` syntax. We'd also want to support that at some point, though right no",https://github.com/bitcoin/bitcoin/pull/19043#issuecomment-633955433,633955433,
luke-jr,2020-06-03 03:56:53,I'm confused how torcontrol is talking to Tor on another host?,https://github.com/bitcoin/bitcoin/pull/19043#issuecomment-637937425,637937425,
jonatack,2020-07-17 13:26:06,"Concept ACK.\n\nSome validation and testing would be nice here. \n\n@MDrollette, are you still active on this?",https://github.com/bitcoin/bitcoin/pull/19043#issuecomment-660106211,660106211,
MDrollette,2020-07-17 18:52:22,"@laanwj \n> You might want to add some validationfor the option value: at the least whether it's `<addr>:port`, to prevent passing weird values to Tor's control port with unclear outcomes.\n\nI've added what I believe to be some sanitation/validation. I am happy to do something differently if anyone can point to a better example. My apologies, I'm not a C developer, so this is very much an intr",https://github.com/bitcoin/bitcoin/pull/19043#issuecomment-660282449,660282449,
DrahtBot,2020-07-17 22:25:27,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19998 (net: Add CNode::ConnectedThroughNetwork member function by hebasto)\n* #19991 (net: Use alternative port for incom",https://github.com/bitcoin/bitcoin/pull/19043#issuecomment-660362786,660362786,
vasild,2020-09-23 11:50:18,"In #19991 we are considering adding the possibility to bind to a dedicated addr:port for incoming tor connections, mainly to be able to distinguish them from incoming clearnet ones. If we do that, then we can automatically pass that addr:port to the `ADD_ONION` command avoiding the need for the `-tortarget` option suggested in this PR.\n\n@MDrollette, do you think that would be sufficient? I can",https://github.com/bitcoin/bitcoin/pull/19043#issuecomment-697312529,697312529,
MDrollette,2020-09-23 20:10:23,"> @MDrollette, do you think that would be sufficient?\n\nThat seems like an appropriate default, if nothing else. I think it's still common in the docker case to simply specify listening on `0.0.0.0` since the IP is randomly assigned when the container is created. In this case I would run the bitcoin container with `-tortarget=bitcoind:1234` so that the container IP is resolved at runtime.\n\n",https://github.com/bitcoin/bitcoin/pull/19043#issuecomment-697945962,697945962,
vasild,2020-09-29 14:14:55,"What is ""bitcoind"" in `-tortarget=bitcoind:1234`? Does it resolve to a different IP address from inside the container and from outside?",https://github.com/bitcoin/bitcoin/pull/19043#issuecomment-700734271,700734271,
DrahtBot,2020-10-02 13:41:17,"<!--cf906140f33d8803c4a75a2196329ecb-->\nüêô This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a ""draft"".</sub>",https://github.com/bitcoin/bitcoin/pull/19043#issuecomment-702740744,702740744,
vasild,2020-10-02 14:35:56,I think this is superseded now by #19991 which got merged.,https://github.com/bitcoin/bitcoin/pull/19043#issuecomment-702770498,702770498,
MDrollette,2020-10-02 15:27:30,Closing this PR since #19991 addresses this issue and also has further discussion ,https://github.com/bitcoin/bitcoin/pull/19043#issuecomment-702799466,702799466,
darosior,2020-07-30 12:43:03,Looks like the port is missing in the default value ?,https://github.com/bitcoin/bitcoin/pull/19043#discussion_r462967925,462967925,src/torcontrol.cpp
MDrollette,2020-07-30 16:30:23,"If no port is specified, either on the passed in value or in this case as the default, then `GetListenPort()` is used below on L537",https://github.com/bitcoin/bitcoin/pull/19043#discussion_r463122744,463122744,src/torcontrol.cpp
vasild,2020-09-23 11:13:48,"Shouldn't this also be changed, a few lines above:\n\n```cpp\n        // Now that we know Tor is running setup the proxy for onion addresses\n        // if -onion isn't set to something else.\n        if (gArgs.GetArg(""-onion"", """") == """") {\n            CService resolved(LookupNumeric(""127.0.0.1"", 9050));\n            proxyType addrOnion = proxyType(resolved, true);\n            SetProxy(N",https://github.com/bitcoin/bitcoin/pull/19043#discussion_r493463698,493463698,src/torcontrol.cpp
vasild,2020-09-23 11:16:36,"Because `port` is optional, maybe change to `-tortarget=<ip[:port]>`? Or `-tortarget=<ip>[:<port>]` to be in line with the existent `-torcontrol=<ip>:<port>`.",https://github.com/bitcoin/bitcoin/pull/19043#discussion_r493466018,493466018,src/init.cpp
