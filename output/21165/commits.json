[
  {
    "sha": "015637dd445e0158dc763d0d8c55f471d0bc4305",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMTU2MzdkZDQ0NWUwMTU4ZGM3NjNkMGQ4YzU1ZjQ3MWQwYmM0MzA1",
    "commit": {
      "author": {
        "name": "Dhruv Mehta",
        "email": "856960+dhruv@users.noreply.github.com",
        "date": "2021-02-12T17:23:03Z"
      },
      "committer": {
        "name": "Dhruv Mehta",
        "email": "856960+dhruv@users.noreply.github.com",
        "date": "2021-02-12T17:23:03Z"
      },
      "message": "[refactor] Correct log message in net.cpp",
      "tree": {
        "sha": "077fed62f132c3839f6444c47eecb259f9d867dc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/077fed62f132c3839f6444c47eecb259f9d867dc"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/015637dd445e0158dc763d0d8c55f471d0bc4305",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/015637dd445e0158dc763d0d8c55f471d0bc4305",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/015637dd445e0158dc763d0d8c55f471d0bc4305",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/015637dd445e0158dc763d0d8c55f471d0bc4305/comments",
    "author": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e9c037ba64dd5b073fccf059ef75db1c97abd0bd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e9c037ba64dd5b073fccf059ef75db1c97abd0bd",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e9c037ba64dd5b073fccf059ef75db1c97abd0bd"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "c2e7ca0301dd15c1dc60f5d961cf3355da7cc00c",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/015637dd445e0158dc763d0d8c55f471d0bc4305/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/015637dd445e0158dc763d0d8c55f471d0bc4305/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=015637dd445e0158dc763d0d8c55f471d0bc4305",
        "patch": "@@ -1813,7 +1813,7 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n                 LOCK2(m_addr_fetches_mutex, cs_vAddedNodes);\n                 if (m_addr_fetches.empty() && vAddedNodes.empty()) {\n                     add_fixed_seeds_now = true;\n-                    LogPrintf(\"Adding fixed seeds as -dnsseed=0, -addnode is not provided and and all -seednode(s) attempted\\n\");\n+                    LogPrintf(\"Adding fixed seeds as -dnsseed=0, -addnode is not provided and all -seednode(s) attempted\\n\");\n                 }\n             }\n "
      },
      {
        "sha": "9e22203028708655a5050985b700f179803ce195",
        "filename": "test/functional/feature_config_args.py",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/015637dd445e0158dc763d0d8c55f471d0bc4305/test/functional/feature_config_args.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/015637dd445e0158dc763d0d8c55f471d0bc4305/test/functional/feature_config_args.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_config_args.py?ref=015637dd445e0158dc763d0d8c55f471d0bc4305",
        "patch": "@@ -172,7 +172,7 @@ def test_seed_peers(self):\n         with self.nodes[0].assert_debug_log(expected_msgs=[\n                 \"Loaded 0 addresses from peers.dat\",\n                 \"DNS seeding disabled\",\n-                \"Adding fixed seeds as -dnsseed=0, -addnode is not provided and and all -seednode(s) attempted\\n\"]):\n+                \"Adding fixed seeds as -dnsseed=0, -addnode is not provided and all -seednode(s) attempted\\n\"]):\n             self.start_node(0, extra_args=['-dnsseed=0'])\n         assert time.time() - start < 60\n         self.stop_node(0)"
      }
    ]
  },
  {
    "sha": "d4187e46194e7b31f5ace48b08ff64416b967ec4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNDE4N2U0NjE5NGU3YjMxZjVhY2U0OGIwOGZmNjQ0MTZiOTY3ZWM0",
    "commit": {
      "author": {
        "name": "Dhruv Mehta",
        "email": "856960+dhruv@users.noreply.github.com",
        "date": "2021-02-12T17:35:18Z"
      },
      "committer": {
        "name": "Dhruv Mehta",
        "email": "856960+dhruv@users.noreply.github.com",
        "date": "2021-02-12T17:35:18Z"
      },
      "message": "[test] Use mocktime in test_seed_peers()\n\nTest case now takes < 5 seconds instead of > 2 minutes",
      "tree": {
        "sha": "c8d1af766ffaff3f6c8a36a167d5015b0722ebf0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c8d1af766ffaff3f6c8a36a167d5015b0722ebf0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d4187e46194e7b31f5ace48b08ff64416b967ec4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d4187e46194e7b31f5ace48b08ff64416b967ec4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d4187e46194e7b31f5ace48b08ff64416b967ec4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d4187e46194e7b31f5ace48b08ff64416b967ec4/comments",
    "author": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "015637dd445e0158dc763d0d8c55f471d0bc4305",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/015637dd445e0158dc763d0d8c55f471d0bc4305",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/015637dd445e0158dc763d0d8c55f471d0bc4305"
      }
    ],
    "stats": {
      "total": 25,
      "additions": 13,
      "deletions": 12
    },
    "files": [
      {
        "sha": "573760a8cb2cc09449a0e5cbe381520354f9f00e",
        "filename": "test/functional/feature_config_args.py",
        "status": "modified",
        "additions": 13,
        "deletions": 12,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d4187e46194e7b31f5ace48b08ff64416b967ec4/test/functional/feature_config_args.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d4187e46194e7b31f5ace48b08ff64416b967ec4/test/functional/feature_config_args.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_config_args.py?ref=d4187e46194e7b31f5ace48b08ff64416b967ec4",
        "patch": "@@ -149,20 +149,21 @@ def test_networkactive(self):\n         self.stop_node(0)\n \n     def test_seed_peers(self):\n-        self.log.info('Test seed peers, this will take about 2 minutes')\n+        self.log.info('Test seed peers')\n         default_data_dir = self.nodes[0].datadir\n \n         # No peers.dat exists and -dnsseed=1\n         # We expect the node will use DNS Seeds, but Regtest mode has 0 DNS seeds\n         # So after 60 seconds, the node should fallback to fixed seeds (this is a slow test)\n         assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n-        start = time.time()\n+        start = int(time.time())\n         with self.nodes[0].assert_debug_log(expected_msgs=[\n                 \"Loaded 0 addresses from peers.dat\",\n-                \"0 addresses found from DNS seeds\",\n-                \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"], timeout=80):\n-            self.start_node(0, extra_args=['-dnsseed=1'])\n-        assert time.time() - start >= 60\n+                \"0 addresses found from DNS seeds\"]):\n+            self.start_node(0, extra_args=['-dnsseed=1 -mocktime={}'.format(start)])\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"]):\n+            self.nodes[0].setmocktime(start + 65)\n         self.stop_node(0)\n \n         # No peers.dat exists and -dnsseed=0\n@@ -192,14 +193,14 @@ def test_seed_peers(self):\n         # No peers.dat exists and -dnsseed=0, but a -addnode is provided\n         # We expect the node will allow 60 seconds prior to using fixed seeds\n         assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n-        start = time.time()\n+        start = int(time.time())\n         with self.nodes[0].assert_debug_log(expected_msgs=[\n                 \"Loaded 0 addresses from peers.dat\",\n-                \"DNS seeding disabled\",\n-                \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"],\n-                timeout=80):\n-            self.start_node(0, extra_args=['-dnsseed=0', '-addnode=fakenodeaddr'])\n-        assert time.time() - start >= 60\n+                \"DNS seeding disabled\"]):\n+            self.start_node(0, extra_args=['-dnsseed=0', '-addnode=fakenodeaddr -mocktime={}'.format(start)])\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"]):\n+            self.nodes[0].setmocktime(start + 65)\n         self.stop_node(0)\n \n "
      }
    ]
  }
]