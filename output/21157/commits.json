[
  {
    "sha": "a51c1b795544238f534c7273c9382357e44b05a6",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphNTFjMWI3OTU1NDQyMzhmNTM0YzcyNzNjOTM4MjM1N2U0NGIwNWE2",
    "commit": {
      "author": {
        "name": "unknown",
        "email": "prayank23@outlook.com",
        "date": "2021-02-11T21:38:32Z"
      },
      "committer": {
        "name": "Prayank",
        "email": "prayank23@outlook.com",
        "date": "2021-06-02T23:11:20Z"
      },
      "message": "Improve Tor docs\n\n+ Highlight DNS requests part\n+ Add 1 example in the end\n+ Add 4 Privacy recommendations\n+ Mention about `onlynet=i2p`",
      "tree": {
        "sha": "beb796a7b1348dedfd988d29a036ba11f2f7e261",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/beb796a7b1348dedfd988d29a036ba11f2f7e261"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a51c1b795544238f534c7273c9382357e44b05a6",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a51c1b795544238f534c7273c9382357e44b05a6",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a51c1b795544238f534c7273c9382357e44b05a6",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a51c1b795544238f534c7273c9382357e44b05a6/comments",
    "author": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "937dfa8398736b3138e3e667679c4878566f2866",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/937dfa8398736b3138e3e667679c4878566f2866",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/937dfa8398736b3138e3e667679c4878566f2866"
      }
    ],
    "stats": {
      "total": 114,
      "additions": 108,
      "deletions": 6
    },
    "files": [
      {
        "sha": "8aa10cae059dd66907f3cef042efae7b8f1d64d2",
        "filename": "doc/tor.md",
        "status": "modified",
        "additions": 108,
        "deletions": 6,
        "changes": 114,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a51c1b795544238f534c7273c9382357e44b05a6/doc/tor.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a51c1b795544238f534c7273c9382357e44b05a6/doc/tor.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/tor.md?ref=a51c1b795544238f534c7273c9382357e44b05a6",
        "patch": "@@ -20,18 +20,19 @@ information in the debug log about your Tor configuration.\n \n The first step is running Bitcoin Core behind a Tor proxy. This will already anonymize all\n outgoing connections, but more is possible.\n-\n+<pre>\n     -proxy=ip:port  Set the proxy server. If SOCKS5 is selected (default), this proxy\n                     server will be used to try to reach .onion addresses as well.\n                     You need to use -noonion or -onion=0 to explicitly disable\n                     outbound access to onion services.\n \n+                    <b>Note:</b> <i>Only the -proxy option sets the proxy for DNS requests;\n+                    with -onion they will not route over Tor, so use -proxy if you\n+                    have privacy concerns.</i>\n+\n     -onion=ip:port  Set the proxy server to use for Tor onion services. You do not\n                     need to set this if it's the same as -proxy. You can use -onion=0\n                     to explicitly disable access to onion services.\n-                    Note: Only the -proxy option sets the proxy for DNS requests;\n-                    with -onion they will not route over Tor, so use -proxy if you\n-                    have privacy concerns.\n \n     -listen         When using -proxy, listening is disabled by default. If you want\n                     to manually configure an onion service (see section 3), you'll\n@@ -50,7 +51,7 @@ outgoing connections, but more is possible.\n                     connections will be enabled when you use -proxy or -onion. Use\n                     -noonion or -onion=0 if you want to be sure there are no outbound\n                     onion connections over the default proxy or your defined -proxy.\n-\n+</pre>\n In a typical situation, this suffices to run behind a Tor proxy:\n \n     ./bitcoind -proxy=127.0.0.1:9050\n@@ -146,7 +147,6 @@ password` (refer to the [Tor Dev\n Manual](https://2019.www.torproject.org/docs/tor-manual.html.en) for more\n details).\n \n-\n ## 3. Manually create a Bitcoin Core onion service\n \n You can also manually configure your node to be reachable from the Tor network.\n@@ -211,3 +211,105 @@ for normal IPv4/IPv6 communication, use:\n   Otherwise it is trivial to link them, which may reduce privacy. Onion\n   services created automatically (as in section 2) always have only one port\n   open.\n+\n+- In some regions of the world the Tor network is monitored or blocked.\n+  If you are in an environment that does not permit direct Tor connections or the use\n+  of Tor bridges, then considering the trade-offs, it may not be safe to use Tor.\n+\n+- For maximum privacy, it is preferable to disable accepting incoming connections.\n+\n+- Users can download packages with [torsocks](https://gitlab.torproject.org/legacy/trac/-/wikis/doc/torsocks) for better security and privacy.\n+\n+- Trade-offs involved in using `onlynet=onion`:\n+\n+  The `onlynet=onion` configuration option can potentially ensure the node attempts to only\n+  connect over Tor. It is more private when you combine it with no reachable IPv4/IPv6 address,\n+  in particular if you want to broadcast transactions without them being correlatable with your IP.\n+\n+  **Sybil Attacks**\n+\n+  On the other hand, if you only make random Tor connections, you're much more vulnerable to Sybil attacks.\n+  As Tor addresses may be created at no cost, an attacker can potentially flood the network with many Tor\n+  nodes and receive all of the outbound Tor connections an `onlynet=tor` node makes.\n+\n+  This is significantly less a concern with IPv4/IPv6 (especially with asmap) due to the cost of obtaining IPs in many\n+  networks. It's also alleviated if you make `-addnode` connections to trusted peers (even if they're onion addresses).\n+\n+  If all of your connections are controlled by a Sybil attacker, they can easily prevent you from seeing confirmed transactions\n+  and, with more difficulty, even trick your node into falsely reporting a transaction as confirmed on the blockchain with most\n+  cumulative \u201cchainwork\u201d.\n+\n+  **Network Partitioning**\n+\n+  If too many nodes use `onlynet=onion`, it could become difficult for onion nodes to communicate with clearnet nodes,\n+  preventing the Tor network from seeing recent transactions and blocks. It is essential that some nodes access both\n+  clearnet and Tor, or use `onlynet=i2p` with `onlynet=onion`.\n+\n+## Setup Guide: Debian/Ubuntu\n+\n+Assuming you already have an installation of Bitcoin Core:\n+\n+**1. Install Tor:**\n+\n+To install Tor, run:\n+\n+```\n+sudo apt install tor\n+```\n+\n+**2. Edit Tor configuration file:**\n+\n+Open the `torrc` file with your text editor. This example uses nano:\n+\n+```\n+sudo nano /etc/tor/torrc\n+```\n+Ensure that `torrc` has these settings, and save:\n+\n+```\n+ControlPort 9051\n+CookieAuthentication 1\n+CookieAuthFileGroupReadable 1\n+```\n+\n+**3. Add user to Tor group (\"satoshi\" in this example):**\n+\n+```\n+sudo usermod -a -G debian-tor satoshi\n+```\n+\n+**4. Restart System**\n+\n+```\n+sudo reboot\n+```\n+\n+**5. Edit Bitcoin configuration file**\n+\n+Open the `bitcoin.conf` [file](https://en.bitcoin.it/wiki/Running_Bitcoin#Bitcoin.conf_Configuration_File) with your text editor.\n+Edit the file so that it contains these settings:\n+\n+```\n+listen=1\n+proxy=127.0.0.1:9050\n+torcontrol=127.0.0.1:9051\n+debug=tor\n+```\n+\n+**6. Confirmation**\n+\n+You should be all set up to run a node through the Tor Network.\n+You can confirm that everything is set up correctly by running\n+`getnetworkinfo` or `-netinfo` and checking that the local\n+addresses they return include the onion service.\n+\n+```\n+$ bitcoin-cli getnetworkinfo\n+\"localaddresses\": [\n+  {\n+    \"address\": \"omy7kj7zwvfg5luayideh73uqb2latkoyyy5h65y4atv3fymnlxlzwqd.onion\",\n+    \"port\": 8333,\n+    \"score\": 4\n+  }\n+]\n+```"
      }
    ]
  }
]