[
  {
    "sha": "444fcfca907d46cfeb52001599966cce25bdf54e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0NDRmY2ZjYTkwN2Q0NmNmZWI1MjAwMTU5OTk2NmNjZTI1YmRmNTRl",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-10T18:54:06Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-08T16:40:01Z"
      },
      "message": "guix: Make guix honor MAX_JOBS setting",
      "tree": {
        "sha": "5b92c72b157a4c8729074bcf76f6780872f2aa11",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5b92c72b157a4c8729074bcf76f6780872f2aa11"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/444fcfca907d46cfeb52001599966cce25bdf54e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/444fcfca907d46cfeb52001599966cce25bdf54e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/444fcfca907d46cfeb52001599966cce25bdf54e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/444fcfca907d46cfeb52001599966cce25bdf54e/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9158d6f34153dc937e109d0e7486e956a26f20aa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9158d6f34153dc937e109d0e7486e956a26f20aa",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9158d6f34153dc937e109d0e7486e956a26f20aa"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 2,
      "deletions": 0
    },
    "files": [
      {
        "sha": "e075b42423d5a4f02bde725b7b4cfa821b40541c",
        "filename": "contrib/guix/guix-build.sh",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/444fcfca907d46cfeb52001599966cce25bdf54e/contrib/guix/guix-build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/444fcfca907d46cfeb52001599966cce25bdf54e/contrib/guix/guix-build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build.sh?ref=444fcfca907d46cfeb52001599966cce25bdf54e",
        "patch": "@@ -18,6 +18,7 @@ SOURCE_DATE_EPOCH=\"${SOURCE_DATE_EPOCH:-$(git log --format=%at -1)}\"\n time-machine() {\n     guix time-machine --url=https://github.com/dongcarl/guix.git \\\n                       --commit=b066c25026f21fb57677aa34692a5034338e7ee3 \\\n+                      --max-jobs=\"$MAX_JOBS\" \\\n                       -- \"$@\"\n }\n \n@@ -108,6 +109,7 @@ for host in ${HOSTS=x86_64-linux-gnu arm-linux-gnueabihf aarch64-linux-gnu riscv\n                                  --expose=\"$(git rev-parse --git-common-dir)\" \\\n                                  ${SOURCES_PATH:+--share=\"$SOURCES_PATH\"} \\\n                                  ${ADDITIONAL_GUIX_ENVIRONMENT_FLAGS} \\\n+                                 --max-jobs=\"$MAX_JOBS\" \\\n                                  -- env HOST=\"$host\" \\\n                                         MAX_JOBS=\"$MAX_JOBS\" \\\n                                         SOURCE_DATE_EPOCH=\"${SOURCE_DATE_EPOCH:?unable to determine value}\" \\"
      }
    ]
  },
  {
    "sha": "0f31e24703e25698d2d41fb54e30ec75a4a80943",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowZjMxZTI0NzAzZTI1Njk4ZDJkNDFmYjU0ZTMwZWM3NWE0YTgwOTQz",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-10T18:59:11Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-08T16:40:01Z"
      },
      "message": "guix: Add SUBSTITUTE_URLS option",
      "tree": {
        "sha": "ee37ceaef6eed26e838893b7982f85e4a4f6d7a4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ee37ceaef6eed26e838893b7982f85e4a4f6d7a4"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0f31e24703e25698d2d41fb54e30ec75a4a80943",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0f31e24703e25698d2d41fb54e30ec75a4a80943",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0f31e24703e25698d2d41fb54e30ec75a4a80943",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0f31e24703e25698d2d41fb54e30ec75a4a80943/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "444fcfca907d46cfeb52001599966cce25bdf54e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/444fcfca907d46cfeb52001599966cce25bdf54e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/444fcfca907d46cfeb52001599966cce25bdf54e"
      }
    ],
    "stats": {
      "total": 22,
      "additions": 21,
      "deletions": 1
    },
    "files": [
      {
        "sha": "cf1429f6cf6e919b3db8a27c2ff58e5daae0f31a",
        "filename": "contrib/guix/README.md",
        "status": "modified",
        "additions": 8,
        "deletions": 1,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0f31e24703e25698d2d41fb54e30ec75a4a80943/contrib/guix/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0f31e24703e25698d2d41fb54e30ec75a4a80943/contrib/guix/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/README.md?ref=0f31e24703e25698d2d41fb54e30ec75a4a80943",
        "patch": "@@ -147,6 +147,13 @@ find output/ -type f -print0 | sort -z | xargs -r0 sha256sum\n   string) is interpreted the same way as not setting `V` at all, and that `V=0`\n   has the same effect as `V=1`.\n \n+* _**SUBSTITUTE_URLS**_\n+\n+  A whitespace-delimited list of URLs from which to download pre-built packages.\n+  A URL is only used if its signing key is authorized (refer to the [substitute\n+  servers section](#speeding-up-builds-with-substitute-servers) for more\n+  details).\n+\n * _**ADDITIONAL_GUIX_ENVIRONMENT_FLAGS**_\n \n   Additional flags to be passed to `guix environment`. For a fully-bootstrapped\n@@ -196,7 +203,7 @@ To use dongcarl's substitute server for Bitcoin Core builds after having\n [authorized his signing key](#authorize-the-signing-keys):\n \n ```\n-export ADDITIONAL_GUIX_ENVIRONMENT_FLAGS='--substitute-urls=\"https://guix.carldong.io https://ci.guix.gnu.org\"'\n+export SUBSTITUTE_URLS='https://guix.carldong.io https://ci.guix.gnu.org'\n ```\n \n ## FAQ"
      },
      {
        "sha": "91fa273175b52a0f176e81e77493fe243aeb75af",
        "filename": "contrib/guix/guix-build.sh",
        "status": "modified",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0f31e24703e25698d2d41fb54e30ec75a4a80943/contrib/guix/guix-build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0f31e24703e25698d2d41fb54e30ec75a4a80943/contrib/guix/guix-build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build.sh?ref=0f31e24703e25698d2d41fb54e30ec75a4a80943",
        "patch": "@@ -16,9 +16,11 @@ SOURCE_DATE_EPOCH=\"${SOURCE_DATE_EPOCH:-$(git log --format=%at -1)}\"\n # Execute \"$@\" in a pinned, possibly older version of Guix, for reproducibility\n # across time.\n time-machine() {\n+    # shellcheck disable=SC2086\n     guix time-machine --url=https://github.com/dongcarl/guix.git \\\n                       --commit=b066c25026f21fb57677aa34692a5034338e7ee3 \\\n                       --max-jobs=\"$MAX_JOBS\" \\\n+                      ${SUBSTITUTE_URLS:+--substitute-urls=\"$SUBSTITUTE_URLS\"} \\\n                       -- \"$@\"\n }\n \n@@ -100,6 +102,16 @@ for host in ${HOSTS=x86_64-linux-gnu arm-linux-gnueabihf aarch64-linux-gnu riscv\n         #     make the downloaded depends sources available to it. The sources\n         #     should have been downloaded prior to this invocation.\n         #\n+        #  ${SUBSTITUTE_URLS:+--substitute-urls=\"$SUBSTITUTE_URLS\"}\n+        #\n+        #                     fetch substitute from SUBSTITUTE_URLS if they are\n+        #                     authorized\n+        #\n+        #    Depending on the user's security model, it may be desirable to use\n+        #    substitutes (pre-built packages) from servers that the user trusts.\n+        #    Please read the README.md in the same directory as this file for\n+        #    more information.\n+        #\n         # shellcheck disable=SC2086\n         time-machine environment --manifest=\"${PWD}/contrib/guix/manifest.scm\" \\\n                                  --container \\\n@@ -110,6 +122,7 @@ for host in ${HOSTS=x86_64-linux-gnu arm-linux-gnueabihf aarch64-linux-gnu riscv\n                                  ${SOURCES_PATH:+--share=\"$SOURCES_PATH\"} \\\n                                  ${ADDITIONAL_GUIX_ENVIRONMENT_FLAGS} \\\n                                  --max-jobs=\"$MAX_JOBS\" \\\n+                                 ${SUBSTITUTE_URLS:+--substitute-urls=\"$SUBSTITUTE_URLS\"} \\\n                                  -- env HOST=\"$host\" \\\n                                         MAX_JOBS=\"$MAX_JOBS\" \\\n                                         SOURCE_DATE_EPOCH=\"${SOURCE_DATE_EPOCH:?unable to determine value}\" \\"
      }
    ]
  },
  {
    "sha": "93b6a8544a03d13733ca2ef769f76df587ad86c8",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5M2I2YTg1NDRhMDNkMTM3MzNjYTJlZjc2OWY3NmRmNTg3YWQ4NmM4",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-10T19:02:19Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-08T16:40:01Z"
      },
      "message": "guix: Add ADDITIONAL_GUIX_{COMMON,TIMEMACHINE}_FLAGS options",
      "tree": {
        "sha": "4b884b3b2a7c690f3d3d50d6649cbccd3ea7345b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4b884b3b2a7c690f3d3d50d6649cbccd3ea7345b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/93b6a8544a03d13733ca2ef769f76df587ad86c8",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/93b6a8544a03d13733ca2ef769f76df587ad86c8",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/93b6a8544a03d13733ca2ef769f76df587ad86c8",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/93b6a8544a03d13733ca2ef769f76df587ad86c8/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0f31e24703e25698d2d41fb54e30ec75a4a80943",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0f31e24703e25698d2d41fb54e30ec75a4a80943",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0f31e24703e25698d2d41fb54e30ec75a4a80943"
      }
    ],
    "stats": {
      "total": 50,
      "additions": 42,
      "deletions": 8
    },
    "files": [
      {
        "sha": "4e633729fe69732a73c51cbd0f9776092d48d6c2",
        "filename": "contrib/guix/README.md",
        "status": "modified",
        "additions": 16,
        "deletions": 7,
        "changes": 23,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/93b6a8544a03d13733ca2ef769f76df587ad86c8/contrib/guix/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/93b6a8544a03d13733ca2ef769f76df587ad86c8/contrib/guix/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/README.md?ref=93b6a8544a03d13733ca2ef769f76df587ad86c8",
        "patch": "@@ -47,18 +47,18 @@ servers](#speeding-up-builds-with-substitute-servers) to speed up your build if\n that fits your security model (say, if you're just testing that this works).\n This is skippable if you're using the [Dockerfile][fanquake/guix-docker].\n \n-If you prefer not to use any substitutes, make sure to set\n-`ADDITIONAL_GUIX_ENVIRONMENT_FLAGS` like the following snippet. The first build\n-will take a while, but the resulting packages will be cached for future builds.\n+If you prefer not to use any substitutes, make sure to supply `--no-substitutes`\n+like in the following snippet. The first build will take a while, but the\n+resulting packages will be cached for future builds.\n \n ```sh\n-export ADDITIONAL_GUIX_ENVIRONMENT_FLAGS='--no-substitutes'\n+export ADDITIONAL_GUIX_COMMON_FLAGS='--no-substitutes'\n ```\n \n Likewise, to perform a bootstrapped build (takes even longer):\n \n ```sh\n-export ADDITIONAL_GUIX_ENVIRONMENT_FLAGS='--bootstrap --no-substitutes'\n+export ADDITIONAL_GUIX_COMMON_FLAGS='--no-substitutes' ADDITIONAL_GUIX_ENVIRONMENT_FLAGS='--bootstrap'\n ```\n \n ### Using a version of Guix with `guix time-machine` capabilities\n@@ -154,13 +154,22 @@ find output/ -type f -print0 | sort -z | xargs -r0 sha256sum\n   servers section](#speeding-up-builds-with-substitute-servers) for more\n   details).\n \n-* _**ADDITIONAL_GUIX_ENVIRONMENT_FLAGS**_\n+* _**ADDITIONAL_GUIX_COMMON_FLAGS**_\n \n-  Additional flags to be passed to `guix environment`. For a fully-bootstrapped\n+  Additional flags to be passed to all `guix` commands. For a fully-bootstrapped\n   build, set this to `--bootstrap --no-substitutes` (refer to the [security\n   model section](#choosing-your-security-model) for more details). Note that a\n   fully-bootstrapped build will take quite a long time on the first run.\n \n+* _**ADDITIONAL_GUIX_TIMEMACHINE_FLAGS**_\n+\n+  Additional flags to be passed to `guix time-machine`.\n+\n+* _**ADDITIONAL_GUIX_ENVIRONMENT_FLAGS**_\n+\n+  Additional flags to be passed to the invocation of `guix environment` inside\n+  `guix time-machine`.\n+\n ## Tips and Tricks\n \n ### Speeding up builds with substitute servers"
      },
      {
        "sha": "e268a8b9966dd95844b99d3f6c290098183449e1",
        "filename": "contrib/guix/guix-build.sh",
        "status": "modified",
        "additions": 26,
        "deletions": 1,
        "changes": 27,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/93b6a8544a03d13733ca2ef769f76df587ad86c8/contrib/guix/guix-build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/93b6a8544a03d13733ca2ef769f76df587ad86c8/contrib/guix/guix-build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build.sh?ref=93b6a8544a03d13733ca2ef769f76df587ad86c8",
        "patch": "@@ -2,6 +2,30 @@\n export LC_ALL=C\n set -e -o pipefail\n \n+# GUIX_BUILD_OPTIONS is an environment variable recognized by guix commands that\n+# can perform builds. This seems like what we want instead of\n+# ADDITIONAL_GUIX_COMMON_FLAGS, but the value of GUIX_BUILD_OPTIONS is actually\n+# _appended_ to normal command-line options. Meaning that they will take\n+# precedence over the command-specific ADDITIONAL_GUIX_<CMD>_FLAGS.\n+#\n+# This seems like a poor user experience. Thus we check for GUIX_BUILD_OPTIONS's\n+# existence here and direct users of this script to use our (more flexible)\n+# custom environment variables.\n+if [ -n \"$GUIX_BUILD_OPTIONS\" ]; then\n+cat << EOF\n+Error: Environment variable GUIX_BUILD_OPTIONS is not empty:\n+  '$GUIX_BUILD_OPTIONS'\n+\n+Unfortunately this script is incompatible with GUIX_BUILD_OPTIONS, please unset\n+GUIX_BUILD_OPTIONS and use ADDITIONAL_GUIX_COMMON_FLAGS to set build options\n+across guix commands or ADDITIONAL_GUIX_<CMD>_FLAGS to set build options for a\n+specific guix command.\n+\n+See contrib/guix/README.md for more details.\n+EOF\n+exit 1\n+fi\n+\n # Determine the maximum number of jobs to run simultaneously (overridable by\n # environment)\n MAX_JOBS=\"${MAX_JOBS:-$(nproc)}\"\n@@ -21,6 +45,7 @@ time-machine() {\n                       --commit=b066c25026f21fb57677aa34692a5034338e7ee3 \\\n                       --max-jobs=\"$MAX_JOBS\" \\\n                       ${SUBSTITUTE_URLS:+--substitute-urls=\"$SUBSTITUTE_URLS\"} \\\n+                      ${ADDITIONAL_GUIX_COMMON_FLAGS} ${ADDITIONAL_GUIX_TIMEMACHINE_FLAGS} \\\n                       -- \"$@\"\n }\n \n@@ -120,9 +145,9 @@ for host in ${HOSTS=x86_64-linux-gnu arm-linux-gnueabihf aarch64-linux-gnu riscv\n                                  --share=\"$PWD\"=/bitcoin \\\n                                  --expose=\"$(git rev-parse --git-common-dir)\" \\\n                                  ${SOURCES_PATH:+--share=\"$SOURCES_PATH\"} \\\n-                                 ${ADDITIONAL_GUIX_ENVIRONMENT_FLAGS} \\\n                                  --max-jobs=\"$MAX_JOBS\" \\\n                                  ${SUBSTITUTE_URLS:+--substitute-urls=\"$SUBSTITUTE_URLS\"} \\\n+                                 ${ADDITIONAL_GUIX_COMMON_FLAGS} ${ADDITIONAL_GUIX_ENVIRONMENT_FLAGS} \\\n                                  -- env HOST=\"$host\" \\\n                                         MAX_JOBS=\"$MAX_JOBS\" \\\n                                         SOURCE_DATE_EPOCH=\"${SOURCE_DATE_EPOCH:?unable to determine value}\" \\"
      }
    ]
  },
  {
    "sha": "cfa7ceb21b14d1fa24c2541bf242a0ed539b9e1b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjZmE3Y2ViMjFiMTRkMWZhMjRjMjU0MWJmMjQyYTBlZDUzOWI5ZTFi",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-10T19:03:10Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-08T16:40:01Z"
      },
      "message": "guix: Remove README development environment section",
      "tree": {
        "sha": "94aa869b1defb387c8e5ec3d4d81dc9df8d49b52",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/94aa869b1defb387c8e5ec3d4d81dc9df8d49b52"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cfa7ceb21b14d1fa24c2541bf242a0ed539b9e1b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cfa7ceb21b14d1fa24c2541bf242a0ed539b9e1b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/cfa7ceb21b14d1fa24c2541bf242a0ed539b9e1b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cfa7ceb21b14d1fa24c2541bf242a0ed539b9e1b/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "93b6a8544a03d13733ca2ef769f76df587ad86c8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/93b6a8544a03d13733ca2ef769f76df587ad86c8",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/93b6a8544a03d13733ca2ef769f76df587ad86c8"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 0,
      "deletions": 11
    },
    "files": [
      {
        "sha": "d9e566838a3e93921c99595bafe906d81b7c88fd",
        "filename": "contrib/guix/README.md",
        "status": "modified",
        "additions": 0,
        "deletions": 11,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/cfa7ceb21b14d1fa24c2541bf242a0ed539b9e1b/contrib/guix/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/cfa7ceb21b14d1fa24c2541bf242a0ed539b9e1b/contrib/guix/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/README.md?ref=cfa7ceb21b14d1fa24c2541bf242a0ed539b9e1b",
        "patch": "@@ -82,17 +82,6 @@ export PATH=\"${HOME}/.config/guix/current/bin${PATH:+:}$PATH\"\n \n ## Usage\n \n-### As a Development Environment\n-\n-For a Bitcoin Core depends development environment, simply invoke\n-\n-```sh\n-guix environment --manifest=contrib/guix/manifest.scm\n-```\n-\n-And you'll land back in your shell with all the build dependencies required for\n-a `depends` build injected into your environment.\n-\n ### As a Tool for Deterministic Builds\n \n From the top of a clean Bitcoin Core repository:"
      }
    ]
  },
  {
    "sha": "402e3a5b1ed9de7057ce9955ea792ad1c2b9f2b5",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0MDJlM2E1YjFlZDlkZTcwNTdjZTk5NTVlYTc5MmFkMWMyYjlmMmI1",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-10T19:04:19Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-08T16:40:01Z"
      },
      "message": "guix: Update HOSTS README entry for new architectures",
      "tree": {
        "sha": "d5afcadc46ba17a0cd50452f1791b0b20f2dffa5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d5afcadc46ba17a0cd50452f1791b0b20f2dffa5"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/402e3a5b1ed9de7057ce9955ea792ad1c2b9f2b5",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/402e3a5b1ed9de7057ce9955ea792ad1c2b9f2b5",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/402e3a5b1ed9de7057ce9955ea792ad1c2b9f2b5",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/402e3a5b1ed9de7057ce9955ea792ad1c2b9f2b5/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "cfa7ceb21b14d1fa24c2541bf242a0ed539b9e1b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cfa7ceb21b14d1fa24c2541bf242a0ed539b9e1b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/cfa7ceb21b14d1fa24c2541bf242a0ed539b9e1b"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 2,
      "deletions": 4
    },
    "files": [
      {
        "sha": "514c8d3e76d5ae2fb29d32522093a2fa0009ee02",
        "filename": "contrib/guix/README.md",
        "status": "modified",
        "additions": 2,
        "deletions": 4,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/402e3a5b1ed9de7057ce9955ea792ad1c2b9f2b5/contrib/guix/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/402e3a5b1ed9de7057ce9955ea792ad1c2b9f2b5/contrib/guix/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/README.md?ref=402e3a5b1ed9de7057ce9955ea792ad1c2b9f2b5",
        "patch": "@@ -102,10 +102,8 @@ find output/ -type f -print0 | sort -z | xargs -r0 sha256sum\n * _**HOSTS**_\n \n   Override the space-separated list of platform triples for which to perform a\n-  bootstrappable build. _(defaults to \"x86\\_64-linux-gnu\n-  arm-linux-gnueabihf aarch64-linux-gnu riscv64-linux-gnu\")_\n-\n-  > Windows and OS X platform triplet support are WIP.\n+  bootstrappable build. _(defaults to \"x86\\_64-linux-gnu arm-linux-gnueabihf\n+  aarch64-linux-gnu riscv64-linux-gnu x86_64-w64-mingw32\")_\n \n * _**SOURCES_PATH**_\n "
      }
    ]
  },
  {
    "sha": "34f0fda2d31d2ada632ca1165b82aebdfd342efe",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozNGYwZmRhMmQzMWQyYWRhNjMyY2ExMTY1YjgyYWViZGZkMzQyZWZl",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-10T19:06:26Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-08T16:40:01Z"
      },
      "message": "guix: Small updates to README wording",
      "tree": {
        "sha": "41bf88860ef4a9ec8b6f6af80102253ddda48e0f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/41bf88860ef4a9ec8b6f6af80102253ddda48e0f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/34f0fda2d31d2ada632ca1165b82aebdfd342efe",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/34f0fda2d31d2ada632ca1165b82aebdfd342efe",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/34f0fda2d31d2ada632ca1165b82aebdfd342efe",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/34f0fda2d31d2ada632ca1165b82aebdfd342efe/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "402e3a5b1ed9de7057ce9955ea792ad1c2b9f2b5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/402e3a5b1ed9de7057ce9955ea792ad1c2b9f2b5",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/402e3a5b1ed9de7057ce9955ea792ad1c2b9f2b5"
      }
    ],
    "stats": {
      "total": 27,
      "additions": 15,
      "deletions": 12
    },
    "files": [
      {
        "sha": "dbe1ea837b993c8735dd01a125815e6addc0816e",
        "filename": "contrib/guix/README.md",
        "status": "modified",
        "additions": 15,
        "deletions": 12,
        "changes": 27,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/34f0fda2d31d2ada632ca1165b82aebdfd342efe/contrib/guix/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/34f0fda2d31d2ada632ca1165b82aebdfd342efe/contrib/guix/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/README.md?ref=34f0fda2d31d2ada632ca1165b82aebdfd342efe",
        "patch": "@@ -40,12 +40,14 @@ Otherwise, follow the [Guix installation guide][guix/bin-install].\n \n Guix allows us to achieve better binary security by using our CPU time to build\n everything from scratch. However, it doesn't sacrifice user choice in pursuit of\n-this: users can decide whether or not to bootstrap and to use substitutes.\n+this: users can decide whether or not to bootstrap and to use substitutes\n+(pre-built packages).\n \n After installation, you may want to consider [adding substitute\n-servers](#speeding-up-builds-with-substitute-servers) to speed up your build if\n-that fits your security model (say, if you're just testing that this works).\n-This is skippable if you're using the [Dockerfile][fanquake/guix-docker].\n+servers](#speeding-up-builds-with-substitute-servers) from which to download\n+pre-built packages to speed up your build if that fits your security model (say,\n+if you're just testing that this works). Substitute servers are set up by\n+default if you're using the [Dockerfile][fanquake/guix-docker].\n \n If you prefer not to use any substitutes, make sure to supply `--no-substitutes`\n like in the following snippet. The first build will take a while, but the\n@@ -164,14 +166,15 @@ find output/ -type f -print0 | sort -z | xargs -r0 sha256sum\n _This whole section is automatically done in the convenience\n [Dockerfiles][fanquake/guix-docker]_\n \n-For those who are used to life in the fast _(and trustful)_ lane, you can use\n-[substitute servers][guix/substitutes] to enable binary downloads of packages.\n+For those who are used to life in the fast _(and trustful)_ lane, you can\n+specify [substitute servers][guix/substitutes] from which to download pre-built\n+packages.\n \n > For those who only want to use substitutes from the official Guix build farm\n > and have authorized the build farm's signing key during Guix's installation,\n > you don't need to do anything.\n \n-#### Authorize the signing keys\n+#### Step 1: Authorize the signing keys\n \n For the official Guix build farm at https://ci.guix.gnu.org, run as root:\n \n@@ -185,7 +188,7 @@ For dongcarl's substitute server at https://guix.carldong.io, run as root:\n wget -qO- 'https://guix.carldong.io/signing-key.pub' | guix archive --authorize\n ```\n \n-#### Use the substitute servers\n+#### Step 2: Specify the substitute servers\n \n The official Guix build farm at https://ci.guix.gnu.org is automatically used\n unless the `--no-substitutes` flag is supplied.\n@@ -215,9 +218,9 @@ As mentioned at the bottom of [this manual page][guix/bin-install]:\n \n ### When will Guix be packaged in debian?\n \n-Vagrant Cascadian has been making good progress on this\n-[here][debian/guix-package]. We have all the pieces needed to put up an APT\n-repository and will likely put one up soon.\n+Thanks to Vagrant Cascadian's diligent work, Guix is now [in debian\n+experimental][debian/guix-experimental]! Hopefully it will make its way into a\n+release soon.\n \n [b17e]: http://bootstrappable.org/\n [r12e/source-date-epoch]: https://reproducible-builds.org/docs/source-date-epoch/\n@@ -229,5 +232,5 @@ repository and will likely put one up soon.\n [guix/substitute-server-auth]: https://www.gnu.org/software/guix/manual/en/html_node/Substitute-Server-Authorization.html\n [guix/time-machine]: https://guix.gnu.org/manual/en/html_node/Invoking-guix-time_002dmachine.html\n \n-[debian/guix-package]: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=850644\n+[debian/guix-experimental]: https://packages.debian.org/experimental/guix\n [fanquake/guix-docker]: https://github.com/fanquake/core-review/tree/master/guix"
      }
    ]
  },
  {
    "sha": "036dc740da3239cdcc13e0f299ab95b456f7118b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMzZkYzc0MGRhMzIzOWNkY2MxM2UwZjI5OWFiOTViNDU2ZjcxMThi",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-10T19:15:46Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-08T16:40:01Z"
      },
      "message": "docs: Point to contrib/guix/README.md in doc/guix.md",
      "tree": {
        "sha": "62452e195f5f28f2fd58e5e23afa0a692d9f701d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/62452e195f5f28f2fd58e5e23afa0a692d9f701d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/036dc740da3239cdcc13e0f299ab95b456f7118b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/036dc740da3239cdcc13e0f299ab95b456f7118b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/036dc740da3239cdcc13e0f299ab95b456f7118b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/036dc740da3239cdcc13e0f299ab95b456f7118b/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "34f0fda2d31d2ada632ca1165b82aebdfd342efe",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/34f0fda2d31d2ada632ca1165b82aebdfd342efe",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/34f0fda2d31d2ada632ca1165b82aebdfd342efe"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 3,
      "deletions": 0
    },
    "files": [
      {
        "sha": "fa9c74f4860f5374c8c707de48c17afa1a56a9b7",
        "filename": "doc/guix.md",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/036dc740da3239cdcc13e0f299ab95b456f7118b/doc/guix.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/036dc740da3239cdcc13e0f299ab95b456f7118b/doc/guix.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/guix.md?ref=036dc740da3239cdcc13e0f299ab95b456f7118b",
        "patch": "@@ -0,0 +1,3 @@\n+# Bootstrappable Bitcoin Core Builds\n+\n+See [contrib/guix/README.md](../contrib/guix/README.md)"
      }
    ]
  },
  {
    "sha": "38b7b2ed72b1f0f57bd9800c7fbb7b7c98a20ed0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozOGI3YjJlZDcyYjFmMGY1N2JkOTgwMGM3ZmJiN2I3Yzk4YTIwZWQw",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-11-17T22:06:14Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-08T16:40:01Z"
      },
      "message": "genbuild: Specify rev-parse length",
      "tree": {
        "sha": "0818f8bd5985054b8222d4d9773e7ddba11dbb97",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0818f8bd5985054b8222d4d9773e7ddba11dbb97"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/38b7b2ed72b1f0f57bd9800c7fbb7b7c98a20ed0",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/38b7b2ed72b1f0f57bd9800c7fbb7b7c98a20ed0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/38b7b2ed72b1f0f57bd9800c7fbb7b7c98a20ed0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/38b7b2ed72b1f0f57bd9800c7fbb7b7c98a20ed0/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "036dc740da3239cdcc13e0f299ab95b456f7118b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/036dc740da3239cdcc13e0f299ab95b456f7118b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/036dc740da3239cdcc13e0f299ab95b456f7118b"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "fe89ae1fdefcfa4195d3e20f65eeeef4f0f051a3",
        "filename": "share/genbuild.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/38b7b2ed72b1f0f57bd9800c7fbb7b7c98a20ed0/share/genbuild.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/38b7b2ed72b1f0f57bd9800c7fbb7b7c98a20ed0/share/genbuild.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/share/genbuild.sh?ref=38b7b2ed72b1f0f57bd9800c7fbb7b7c98a20ed0",
        "patch": "@@ -31,7 +31,7 @@ if [ \"${BITCOIN_GENBUILD_NO_GIT}\" != \"1\" ] && [ -e \"$(command -v git)\" ] && [ \"$\n     fi\n \n     # otherwise generate suffix from git, i.e. string like \"59887e8-dirty\"\n-    GIT_COMMIT=$(git rev-parse --short HEAD)\n+    GIT_COMMIT=$(git rev-parse --short=12 HEAD)\n     git diff-index --quiet HEAD -- || GIT_COMMIT=\"$GIT_COMMIT-dirty\"\n fi\n "
      }
    ]
  },
  {
    "sha": "57f95331464f097261c63fd1b6040536c58a03fa",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1N2Y5NTMzMTQ2NGYwOTcyNjFjNjNmZDFiNjA0MDUzNmM1OGEwM2Zh",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-21T18:53:46Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-08T16:40:01Z"
      },
      "message": "guix: Add section headings to guix-build.sh",
      "tree": {
        "sha": "788373384526f98c4749f89a0970e8231db6c079",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/788373384526f98c4749f89a0970e8231db6c079"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/57f95331464f097261c63fd1b6040536c58a03fa",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/57f95331464f097261c63fd1b6040536c58a03fa",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/57f95331464f097261c63fd1b6040536c58a03fa",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/57f95331464f097261c63fd1b6040536c58a03fa/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "38b7b2ed72b1f0f57bd9800c7fbb7b7c98a20ed0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/38b7b2ed72b1f0f57bd9800c7fbb7b7c98a20ed0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/38b7b2ed72b1f0f57bd9800c7fbb7b7c98a20ed0"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 12,
      "deletions": 0
    },
    "files": [
      {
        "sha": "b956be65791e76991d70ae9dbfc644bd2e804561",
        "filename": "contrib/guix/guix-build.sh",
        "status": "modified",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/57f95331464f097261c63fd1b6040536c58a03fa/contrib/guix/guix-build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/57f95331464f097261c63fd1b6040536c58a03fa/contrib/guix/guix-build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build.sh?ref=57f95331464f097261c63fd1b6040536c58a03fa",
        "patch": "@@ -2,6 +2,10 @@\n export LC_ALL=C\n set -e -o pipefail\n \n+###################\n+## Sanity Checks ##\n+###################\n+\n # GUIX_BUILD_OPTIONS is an environment variable recognized by guix commands that\n # can perform builds. This seems like what we want instead of\n # ADDITIONAL_GUIX_COMMON_FLAGS, but the value of GUIX_BUILD_OPTIONS is actually\n@@ -26,6 +30,10 @@ EOF\n exit 1\n fi\n \n+#########\n+# Setup #\n+#########\n+\n # Determine the maximum number of jobs to run simultaneously (overridable by\n # environment)\n MAX_JOBS=\"${MAX_JOBS:-$(nproc)}\"\n@@ -49,6 +57,10 @@ time-machine() {\n                       -- \"$@\"\n }\n \n+#########\n+# Build #\n+#########\n+\n # Function to be called when building for host ${1} and the user interrupts the\n # build\n int_trap() {"
      }
    ]
  },
  {
    "sha": "d27ff8b86aa66acec63b5713912bd4ad9470e66f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkMjdmZjhiODZhYTY2YWNlYzYzYjU3MTM5MTJiZDRhZDk0NzBlNjZm",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-21T19:02:00Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-08T16:40:01Z"
      },
      "message": "guix: Add more sanity checks to guix-build.sh",
      "tree": {
        "sha": "4b1f973a3aaa6b5444bf8b87e3161dcdb637ddad",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4b1f973a3aaa6b5444bf8b87e3161dcdb637ddad"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d27ff8b86aa66acec63b5713912bd4ad9470e66f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d27ff8b86aa66acec63b5713912bd4ad9470e66f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d27ff8b86aa66acec63b5713912bd4ad9470e66f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d27ff8b86aa66acec63b5713912bd4ad9470e66f/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "57f95331464f097261c63fd1b6040536c58a03fa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/57f95331464f097261c63fd1b6040536c58a03fa",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/57f95331464f097261c63fd1b6040536c58a03fa"
      }
    ],
    "stats": {
      "total": 34,
      "additions": 34,
      "deletions": 0
    },
    "files": [
      {
        "sha": "9ce0c7e18c227c7bc5a6cea2d198c895aab7aa71",
        "filename": "contrib/guix/guix-build.sh",
        "status": "modified",
        "additions": 34,
        "deletions": 0,
        "changes": 34,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d27ff8b86aa66acec63b5713912bd4ad9470e66f/contrib/guix/guix-build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d27ff8b86aa66acec63b5713912bd4ad9470e66f/contrib/guix/guix-build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build.sh?ref=d27ff8b86aa66acec63b5713912bd4ad9470e66f",
        "patch": "@@ -6,6 +6,20 @@ set -e -o pipefail\n ## Sanity Checks ##\n ###################\n \n+################\n+# Check 1: Make sure that we can invoke required tools\n+################\n+for cmd in git make guix cat mkdir; do\n+    if ! command -v \"$cmd\" > /dev/null 2>&1; then\n+        echo \"ERR: This script requires that '$cmd' is installed and available in your \\$PATH\"\n+        exit 1\n+    fi\n+done\n+\n+################\n+# Check 2: Make sure GUIX_BUILD_OPTIONS is empty\n+################\n+#\n # GUIX_BUILD_OPTIONS is an environment variable recognized by guix commands that\n # can perform builds. This seems like what we want instead of\n # ADDITIONAL_GUIX_COMMON_FLAGS, but the value of GUIX_BUILD_OPTIONS is actually\n@@ -30,6 +44,26 @@ EOF\n exit 1\n fi\n \n+################\n+# Check 3: Make sure that we're not in a dirty worktree\n+################\n+if ! git diff-index --quiet HEAD -- && [ -z \"$FORCE_DIRTY_WORKTREE\" ]; then\n+cat << EOF\n+ERR: The current git worktree is dirty, which may lead to broken builds.\n+\n+     Aborting...\n+\n+Hint: To make your git worktree clean, You may want to:\n+      1. Commit your changes,\n+      2. Stash your changes, or\n+      3. Set the 'FORCE_DIRTY_WORKTREE' environment variable if you insist on\n+         using a dirty worktree\n+EOF\n+exit 1\n+else\n+    GIT_COMMIT=$(git rev-parse --short=12 HEAD)\n+fi\n+\n #########\n # Setup #\n #########"
      }
    ]
  },
  {
    "sha": "0b7cd07bb56baa112ffa596fb23a905871031a36",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowYjdjZDA3YmI1NmJhYTExMmZmYTU5NmZiMjNhOTA1ODcxMDMxYTM2",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-21T20:26:23Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-08T16:40:01Z"
      },
      "message": "guix: Move OUTDIR determination+creation to guix-build.sh",
      "tree": {
        "sha": "26931ccf239718353dcb17cdc8ab11ad05469e19",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/26931ccf239718353dcb17cdc8ab11ad05469e19"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0b7cd07bb56baa112ffa596fb23a905871031a36",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0b7cd07bb56baa112ffa596fb23a905871031a36",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0b7cd07bb56baa112ffa596fb23a905871031a36",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0b7cd07bb56baa112ffa596fb23a905871031a36/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d27ff8b86aa66acec63b5713912bd4ad9470e66f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d27ff8b86aa66acec63b5713912bd4ad9470e66f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d27ff8b86aa66acec63b5713912bd4ad9470e66f"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 6,
      "deletions": 4
    },
    "files": [
      {
        "sha": "64c1e35e035a437999f4ff62ad0046a9f27f71a9",
        "filename": "contrib/guix/guix-build.sh",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0b7cd07bb56baa112ffa596fb23a905871031a36/contrib/guix/guix-build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0b7cd07bb56baa112ffa596fb23a905871031a36/contrib/guix/guix-build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build.sh?ref=0b7cd07bb56baa112ffa596fb23a905871031a36",
        "patch": "@@ -91,6 +91,10 @@ time-machine() {\n                       -- \"$@\"\n }\n \n+# Make sure an output directory exists for our builds\n+OUTDIR=\"${OUTDIR:-${PWD}/output}\"\n+[ -e \"$OUTDIR\" ] || mkdir -p \"$OUTDIR\"\n+\n #########\n # Build #\n #########\n@@ -189,6 +193,7 @@ for host in ${HOSTS=x86_64-linux-gnu arm-linux-gnueabihf aarch64-linux-gnu riscv\n                                  --pure \\\n                                  --no-cwd \\\n                                  --share=\"$PWD\"=/bitcoin \\\n+                                 --share=\"$OUTDIR\"=/outdir \\\n                                  --expose=\"$(git rev-parse --git-common-dir)\" \\\n                                  ${SOURCES_PATH:+--share=\"$SOURCES_PATH\"} \\\n                                  --max-jobs=\"$MAX_JOBS\" \\\n@@ -199,6 +204,7 @@ for host in ${HOSTS=x86_64-linux-gnu arm-linux-gnueabihf aarch64-linux-gnu riscv\n                                         SOURCE_DATE_EPOCH=\"${SOURCE_DATE_EPOCH:?unable to determine value}\" \\\n                                         ${V:+V=1} \\\n                                         ${SOURCES_PATH:+SOURCES_PATH=\"$SOURCES_PATH\"} \\\n+                                        OUTDIR=/outdir \\\n                                       bash -c \"cd /bitcoin && bash contrib/guix/libexec/build.sh\"\n     )\n "
      },
      {
        "sha": "50440c939d89b377f42e7a53e687cb9fac887f04",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 0,
        "deletions": 4,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0b7cd07bb56baa112ffa596fb23a905871031a36/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0b7cd07bb56baa112ffa596fb23a905871031a36/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=0b7cd07bb56baa112ffa596fb23a905871031a36",
        "patch": "@@ -23,10 +23,6 @@ echo \"At most ${MAX_JOBS:?not set} jobs will run at once...\"\n # $HOSTs after successfully building.\n BASEPREFIX=\"${PWD}/depends\"\n \n-# Setup an output directory for our build\n-OUTDIR=\"${OUTDIR:-${PWD}/output}\"\n-[ -e \"$OUTDIR\" ] || mkdir -p \"$OUTDIR\"\n-\n # Setup the directory where our Bitcoin Core build for HOST will occur\n DISTSRC=\"${DISTSRC:-${PWD}/distsrc-${HOST}}\"\n if [ -e \"$DISTSRC\" ]; then"
      }
    ]
  },
  {
    "sha": "2f9d1fdde66f4713351905ec73487e5288d20f8f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyZjlkMWZkZGU2NmY0NzEzMzUxOTA1ZWM3MzQ4N2U1Mjg4ZDIwZjhm",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-21T20:27:52Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-08T16:40:01Z"
      },
      "message": "guix: Move DISTSRC determination to guix-build.sh",
      "tree": {
        "sha": "04b8d124105703154455465c0190254ac2b50425",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/04b8d124105703154455465c0190254ac2b50425"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2f9d1fdde66f4713351905ec73487e5288d20f8f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2f9d1fdde66f4713351905ec73487e5288d20f8f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2f9d1fdde66f4713351905ec73487e5288d20f8f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2f9d1fdde66f4713351905ec73487e5288d20f8f/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0b7cd07bb56baa112ffa596fb23a905871031a36",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0b7cd07bb56baa112ffa596fb23a905871031a36",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0b7cd07bb56baa112ffa596fb23a905871031a36"
      }
    ],
    "stats": {
      "total": 62,
      "additions": 50,
      "deletions": 12
    },
    "files": [
      {
        "sha": "7f73a916a93cdbfe441e66e4fb4d0c7149d305c9",
        "filename": "contrib/guix/guix-build.sh",
        "status": "modified",
        "additions": 49,
        "deletions": 3,
        "changes": 52,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2f9d1fdde66f4713351905ec73487e5288d20f8f/contrib/guix/guix-build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2f9d1fdde66f4713351905ec73487e5288d20f8f/contrib/guix/guix-build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build.sh?ref=2f9d1fdde66f4713351905ec73487e5288d20f8f",
        "patch": "@@ -64,6 +64,50 @@ else\n     GIT_COMMIT=$(git rev-parse --short=12 HEAD)\n fi\n \n+################\n+# Check 4: Make sure that build directories do no exist\n+################\n+\n+# Default to building for all supported HOSTs (overridable by environment)\n+export HOSTS=\"${HOSTS:-x86_64-linux-gnu arm-linux-gnueabihf aarch64-linux-gnu riscv64-linux-gnu\n+                       x86_64-w64-mingw32}\"\n+\n+DISTSRC_BASE=\"${DISTSRC_BASE:-${PWD}}\"\n+\n+# Usage: distsrc_for_host HOST\n+#\n+#   HOST: The current platform triple we're building for\n+#\n+distsrc_for_host() {\n+    echo \"${DISTSRC_BASE}/distsrc-${GIT_COMMIT}-${1}\"\n+}\n+\n+# Accumulate a list of build directories that already exist...\n+hosts_distsrc_exists=\"\"\n+for host in $HOSTS; do\n+    if [ -e \"$(distsrc_for_host \"$host\")\" ]; then\n+        hosts_distsrc_exists+=\" ${host}\"\n+    fi\n+done\n+\n+if [ -n \"$hosts_distsrc_exists\" ]; then\n+# ...so that we can print them out nicely in an error message\n+cat << EOF\n+ERR: Build directories for this commit already exist for the following platform\n+     triples you're attempting to build, probably because of previous builds.\n+     Please remove, or otherwise deal with them prior to starting another build.\n+\n+     Aborting...\n+\n+EOF\n+for host in $hosts_distsrc_exists; do\n+    echo \"     ${host} '$(distsrc_for_host \"$host\")'\"\n+done\n+exit 1\n+else\n+    mkdir -p \"$DISTSRC_BASE\"\n+fi\n+\n #########\n # Setup #\n #########\n@@ -116,9 +160,9 @@ and untracked files and directories will be wiped, allowing you to start anew.\n EOF\n }\n \n-# Deterministically build Bitcoin Core for HOSTs (overridable by environment)\n+# Deterministically build Bitcoin Core\n # shellcheck disable=SC2153\n-for host in ${HOSTS=x86_64-linux-gnu arm-linux-gnueabihf aarch64-linux-gnu riscv64-linux-gnu x86_64-w64-mingw32}; do\n+for host in $HOSTS; do\n \n     # Display proper warning when the user interrupts the build\n     trap 'int_trap ${host}' INT\n@@ -187,12 +231,13 @@ for host in ${HOSTS=x86_64-linux-gnu arm-linux-gnueabihf aarch64-linux-gnu riscv\n         #    Please read the README.md in the same directory as this file for\n         #    more information.\n         #\n-        # shellcheck disable=SC2086\n+        # shellcheck disable=SC2086,SC2031\n         time-machine environment --manifest=\"${PWD}/contrib/guix/manifest.scm\" \\\n                                  --container \\\n                                  --pure \\\n                                  --no-cwd \\\n                                  --share=\"$PWD\"=/bitcoin \\\n+                                 --share=\"$DISTSRC_BASE\"=/distsrc-base \\\n                                  --share=\"$OUTDIR\"=/outdir \\\n                                  --expose=\"$(git rev-parse --git-common-dir)\" \\\n                                  ${SOURCES_PATH:+--share=\"$SOURCES_PATH\"} \\\n@@ -204,6 +249,7 @@ for host in ${HOSTS=x86_64-linux-gnu arm-linux-gnueabihf aarch64-linux-gnu riscv\n                                         SOURCE_DATE_EPOCH=\"${SOURCE_DATE_EPOCH:?unable to determine value}\" \\\n                                         ${V:+V=1} \\\n                                         ${SOURCES_PATH:+SOURCES_PATH=\"$SOURCES_PATH\"} \\\n+                                        DISTSRC=\"$(DISTSRC_BASE=/distsrc-base && distsrc_for_host \"$HOST\")\" \\\n                                         OUTDIR=/outdir \\\n                                       bash -c \"cd /bitcoin && bash contrib/guix/libexec/build.sh\"\n     )"
      },
      {
        "sha": "d16ea2c20c1488a1f59d16e0956b430fb78651e2",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 9,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2f9d1fdde66f4713351905ec73487e5288d20f8f/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2f9d1fdde66f4713351905ec73487e5288d20f8f/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=2f9d1fdde66f4713351905ec73487e5288d20f8f",
        "patch": "@@ -23,15 +23,6 @@ echo \"At most ${MAX_JOBS:?not set} jobs will run at once...\"\n # $HOSTs after successfully building.\n BASEPREFIX=\"${PWD}/depends\"\n \n-# Setup the directory where our Bitcoin Core build for HOST will occur\n-DISTSRC=\"${DISTSRC:-${PWD}/distsrc-${HOST}}\"\n-if [ -e \"$DISTSRC\" ]; then\n-    echo \"DISTSRC directory '${DISTSRC}' exists, probably because of previous builds... Aborting...\"\n-    exit 1\n-else\n-    mkdir -p \"$DISTSRC\"\n-fi\n-\n # Given a package name and an output name, return the path of that output in our\n # current guix environment\n store_path() {\n@@ -185,6 +176,7 @@ esac\n \n # Make $HOST-specific native binaries from depends available in $PATH\n export PATH=\"${BASEPREFIX}/${HOST}/native/bin:${PATH}\"\n+mkdir -p \"$DISTSRC\"\n (\n     cd \"$DISTSRC\"\n "
      }
    ]
  },
  {
    "sha": "570e43fe72e13e0a82e25f7145704f62b2c2cc52",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1NzBlNDNmZTcyZTEzZTBhODJlMjVmNzE0NTcwNGY2MmIyYzJjYzUy",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-21T20:43:27Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-08T16:40:02Z"
      },
      "message": "guix: Print build params inside/outside of container",
      "tree": {
        "sha": "e5fc1b3365457561affa6f748c5da0a2bf40e90b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e5fc1b3365457561affa6f748c5da0a2bf40e90b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/570e43fe72e13e0a82e25f7145704f62b2c2cc52",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/570e43fe72e13e0a82e25f7145704f62b2c2cc52",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/570e43fe72e13e0a82e25f7145704f62b2c2cc52",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/570e43fe72e13e0a82e25f7145704f62b2c2cc52/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2f9d1fdde66f4713351905ec73487e5288d20f8f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2f9d1fdde66f4713351905ec73487e5288d20f8f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2f9d1fdde66f4713351905ec73487e5288d20f8f"
      }
    ],
    "stats": {
      "total": 25,
      "additions": 22,
      "deletions": 3
    },
    "files": [
      {
        "sha": "54cc5793f6eebf06b99b66b5056710840e9f53d7",
        "filename": "contrib/guix/guix-build.sh",
        "status": "modified",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/570e43fe72e13e0a82e25f7145704f62b2c2cc52/contrib/guix/guix-build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/570e43fe72e13e0a82e25f7145704f62b2c2cc52/contrib/guix/guix-build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build.sh?ref=570e43fe72e13e0a82e25f7145704f62b2c2cc52",
        "patch": "@@ -172,6 +172,19 @@ for host in $HOSTS; do\n         # for the particular $HOST we're building for\n         export HOST=\"$host\"\n \n+        # shellcheck disable=SC2030\n+cat << EOF\n+INFO: Building commit ${GIT_COMMIT:?not set} for platform triple ${HOST:?not set}:\n+      ...using reference timestamp: ${SOURCE_DATE_EPOCH:?not set}\n+      ...running at most ${MAX_JOBS:?not set} jobs\n+      ...from worktree directory: '${PWD}'\n+          ...bind-mounted in container to: '/bitcoin'\n+      ...in build directory: '$(distsrc_for_host \"$HOST\")'\n+          ...bind-mounted in container to: '$(DISTSRC_BASE=/distsrc-base && distsrc_for_host \"$HOST\")'\n+      ...outputting in: '${OUTDIR:?not set}'\n+          ...bind-mounted in container to: '/outdir'\n+EOF\n+\n         # Run the build script 'contrib/guix/libexec/build.sh' in the build\n         # container specified by 'contrib/guix/manifest.scm'.\n         #"
      },
      {
        "sha": "b00c42ce012a80c3042ea915a4354371081ddee9",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 9,
        "deletions": 3,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/570e43fe72e13e0a82e25f7145704f62b2c2cc52/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/570e43fe72e13e0a82e25f7145704f62b2c2cc52/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=570e43fe72e13e0a82e25f7145704f62b2c2cc52",
        "patch": "@@ -11,9 +11,15 @@ if [ -n \"$V\" ]; then\n     export VERBOSE=\"$V\"\n fi\n \n-# Check that environment variables assumed to be set by the environment are set\n-echo \"Building for platform triple ${HOST:?not set} with reference timestamp ${SOURCE_DATE_EPOCH:?not set}...\"\n-echo \"At most ${MAX_JOBS:?not set} jobs will run at once...\"\n+# Check that required environment variables are set\n+cat << EOF\n+Required environment variables as seen inside the container:\n+    HOST: ${HOST:?not set}\n+    SOURCE_DATE_EPOCH: ${SOURCE_DATE_EPOCH:?not set}\n+    MAX_JOBS: ${MAX_JOBS:?not set}\n+    DISTSRC: ${DISTSRC:?not set}\n+    OUTDIR: ${OUTDIR:?not set}\n+EOF\n \n #####################\n # Environment Setup #"
      }
    ]
  }
]