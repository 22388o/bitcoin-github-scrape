[
  {
    "sha": "b33af48210c117a734fc3e1bebeb1c2057645775",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiMzNhZjQ4MjEwYzExN2E3MzRmYzNlMWJlYmViMWMyMDU3NjQ1Nzc1",
    "commit": {
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-19T19:12:14Z"
      },
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-11-18T16:55:43Z"
      },
      "message": "Include wallet/bdb.h where it is actually being used",
      "tree": {
        "sha": "3e88d222805a0db50e2c826cae9e324fa8ca6deb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3e88d222805a0db50e2c826cae9e324fa8ca6deb"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b33af48210c117a734fc3e1bebeb1c2057645775",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b33af48210c117a734fc3e1bebeb1c2057645775",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b33af48210c117a734fc3e1bebeb1c2057645775",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b33af48210c117a734fc3e1bebeb1c2057645775/comments",
    "author": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "50e019a97a5b49caee867ec7d630fca908caed9d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/50e019a97a5b49caee867ec7d630fca908caed9d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/50e019a97a5b49caee867ec7d630fca908caed9d"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 7,
      "deletions": 1
    },
    "files": [
      {
        "sha": "9887ae668b3c4ddf52a1b57084589a92f04f40ee",
        "filename": "src/qt/rpcconsole.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b33af48210c117a734fc3e1bebeb1c2057645775/src/qt/rpcconsole.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b33af48210c117a734fc3e1bebeb1c2057645775/src/qt/rpcconsole.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/rpcconsole.cpp?ref=b33af48210c117a734fc3e1bebeb1c2057645775",
        "patch": "@@ -25,6 +25,7 @@\n #include <univalue.h>\n \n #ifdef ENABLE_WALLET\n+#include <wallet/bdb.h>\n #include <wallet/db.h>\n #include <wallet/wallet.h>\n #endif"
      },
      {
        "sha": "c2fb893c51d3b7f73ebdfee9bdb06bcc06b46c62",
        "filename": "src/wallet/init.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b33af48210c117a734fc3e1bebeb1c2057645775/src/wallet/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b33af48210c117a734fc3e1bebeb1c2057645775/src/wallet/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/init.cpp?ref=b33af48210c117a734fc3e1bebeb1c2057645775",
        "patch": "@@ -15,6 +15,7 @@\n #include <util/moneystr.h>\n #include <util/system.h>\n #include <util/translation.h>\n+#include <wallet/bdb.h>\n #include <wallet/coincontrol.h>\n #include <wallet/wallet.h>\n #include <walletinitinterface.h>"
      },
      {
        "sha": "c083f0fb3183a87a06e462af01ba4f8b277240d0",
        "filename": "src/wallet/salvage.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b33af48210c117a734fc3e1bebeb1c2057645775/src/wallet/salvage.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b33af48210c117a734fc3e1bebeb1c2057645775/src/wallet/salvage.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/salvage.cpp?ref=b33af48210c117a734fc3e1bebeb1c2057645775",
        "patch": "@@ -6,6 +6,7 @@\n #include <fs.h>\n #include <streams.h>\n #include <util/translation.h>\n+#include <wallet/bdb.h>\n #include <wallet/salvage.h>\n #include <wallet/wallet.h>\n #include <wallet/walletdb.h>"
      },
      {
        "sha": "7ed20e43947281bd484d4d8a4317f4d4a72ccea8",
        "filename": "src/wallet/scriptpubkeyman.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b33af48210c117a734fc3e1bebeb1c2057645775/src/wallet/scriptpubkeyman.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b33af48210c117a734fc3e1bebeb1c2057645775/src/wallet/scriptpubkeyman.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/scriptpubkeyman.cpp?ref=b33af48210c117a734fc3e1bebeb1c2057645775",
        "patch": "@@ -3,12 +3,15 @@\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n #include <key_io.h>\n+#include <logging.h>\n #include <outputtype.h>\n #include <script/descriptor.h>\n #include <script/sign.h>\n #include <util/bip32.h>\n #include <util/strencodings.h>\n #include <util/string.h>\n+#include <util/system.h>\n+#include <util/time.h>\n #include <util/translation.h>\n #include <wallet/scriptpubkeyman.h>\n "
      },
      {
        "sha": "43791acfcfc14b52a5e2d7f750b186137d5b2931",
        "filename": "src/wallet/scriptpubkeyman.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b33af48210c117a734fc3e1bebeb1c2057645775/src/wallet/scriptpubkeyman.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b33af48210c117a734fc3e1bebeb1c2057645775/src/wallet/scriptpubkeyman.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/scriptpubkeyman.h?ref=b33af48210c117a734fc3e1bebeb1c2057645775",
        "patch": "@@ -11,6 +11,7 @@\n #include <script/standard.h>\n #include <util/error.h>\n #include <util/message.h>\n+#include <util/time.h>\n #include <wallet/crypter.h>\n #include <wallet/ismine.h>\n #include <wallet/walletdb.h>"
      },
      {
        "sha": "e7b2d7d780c72803c6f0b8810251735d939ad519",
        "filename": "src/wallet/walletdb.h",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b33af48210c117a734fc3e1bebeb1c2057645775/src/wallet/walletdb.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b33af48210c117a734fc3e1bebeb1c2057645775/src/wallet/walletdb.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/walletdb.h?ref=b33af48210c117a734fc3e1bebeb1c2057645775",
        "patch": "@@ -8,7 +8,6 @@\n \n #include <amount.h>\n #include <script/sign.h>\n-#include <wallet/bdb.h>\n #include <wallet/db.h>\n #include <wallet/walletutil.h>\n #include <key.h>"
      }
    ]
  },
  {
    "sha": "a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphNThiNzE5Y2Y3NWUyZDk3MjA1ZWMyNjBiY2ZmMGQ0NzgwZmU0ZmI4",
    "commit": {
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-19T19:34:21Z"
      },
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-11-18T16:56:08Z"
      },
      "message": "Do not compile BDB things when USE_BDB is defined",
      "tree": {
        "sha": "59b1f757afd587e30aa4e094131c81db300929d9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/59b1f757afd587e30aa4e094131c81db300929d9"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/comments",
    "author": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b33af48210c117a734fc3e1bebeb1c2057645775",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b33af48210c117a734fc3e1bebeb1c2057645775",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b33af48210c117a734fc3e1bebeb1c2057645775"
      }
    ],
    "stats": {
      "total": 70,
      "additions": 63,
      "deletions": 7
    },
    "files": [
      {
        "sha": "2e6101a52e9381f3c3a398e75ec477c9099ff2ae",
        "filename": "build_msvc/bitcoin_config.h",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/build_msvc/bitcoin_config.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/build_msvc/bitcoin_config.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build_msvc/bitcoin_config.h?ref=a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
        "patch": "@@ -38,6 +38,12 @@\n /* Define to 1 to enable wallet functions */\n #define ENABLE_WALLET 1\n \n+/* Define to 1 to enable BDB wallet */\n+#define USE_BDB 1\n+\n+/* Define to 1 to enable SQLite wallet */\n+#define USE_SQLITE 1\n+\n /* Define to 1 to enable ZMQ functions */\n #define ENABLE_ZMQ 1\n "
      },
      {
        "sha": "613d5c71991597b58ef6b44d490d9ddd61d8bd47",
        "filename": "build_msvc/libbitcoin_wallet/libbitcoin_wallet.vcxproj.in",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/build_msvc/libbitcoin_wallet/libbitcoin_wallet.vcxproj.in",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/build_msvc/libbitcoin_wallet/libbitcoin_wallet.vcxproj.in",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build_msvc/libbitcoin_wallet/libbitcoin_wallet.vcxproj.in?ref=a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
        "patch": "@@ -8,6 +8,9 @@\n     <ConfigurationType>StaticLibrary</ConfigurationType>\n   </PropertyGroup>\n   <ItemGroup>\n+    <ClCompile Include=\"..\\..\\src\\wallet\\bdb.cpp\" />\n+    <ClCompile Include=\"..\\..\\src\\wallet\\salvage.cpp\" />\n+    <ClCompile Include=\"..\\..\\src\\wallet\\sqlite.cpp\" />\n @SOURCE_FILES@\n   </ItemGroup>\n   <Import Project=\"$(VCTargetsPath)\\Microsoft.Cpp.props\" />"
      },
      {
        "sha": "0ec793509164ad7837017ac15e4ed251c244aa42",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
        "patch": "@@ -1602,6 +1602,7 @@ AM_CONDITIONAL([TARGET_LINUX], [test x$TARGET_OS = xlinux])\n AM_CONDITIONAL([TARGET_WINDOWS], [test x$TARGET_OS = xwindows])\n AM_CONDITIONAL([ENABLE_WALLET],[test x$enable_wallet = xyes])\n AM_CONDITIONAL([USE_SQLITE], [test \"x$use_sqlite\" = \"xyes\"])\n+AM_CONDITIONAL([USE_BDB], [true])\n AM_CONDITIONAL([ENABLE_TESTS],[test x$BUILD_TEST = xyes])\n AM_CONDITIONAL([ENABLE_FUZZ],[test x$enable_fuzz = xyes])\n AM_CONDITIONAL([ENABLE_QT],[test x$bitcoin_enable_qt = xyes])"
      },
      {
        "sha": "0409faee1e1bd6831698cb3ec9e108d46ca9288a",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
        "patch": "@@ -360,7 +360,6 @@ libbitcoin_wallet_a_CPPFLAGS = $(AM_CPPFLAGS) $(BITCOIN_INCLUDES) $(SQLITE_CFLAG\n libbitcoin_wallet_a_CXXFLAGS = $(AM_CXXFLAGS) $(PIE_FLAGS)\n libbitcoin_wallet_a_SOURCES = \\\n   interfaces/wallet.cpp \\\n-  wallet/bdb.cpp \\\n   wallet/coincontrol.cpp \\\n   wallet/context.cpp \\\n   wallet/crypter.cpp \\\n@@ -370,7 +369,6 @@ libbitcoin_wallet_a_SOURCES = \\\n   wallet/load.cpp \\\n   wallet/rpcdump.cpp \\\n   wallet/rpcwallet.cpp \\\n-  wallet/salvage.cpp \\\n   wallet/scriptpubkeyman.cpp \\\n   wallet/wallet.cpp \\\n   wallet/walletdb.cpp \\\n@@ -381,6 +379,9 @@ libbitcoin_wallet_a_SOURCES = \\\n if USE_SQLITE\n libbitcoin_wallet_a_SOURCES += wallet/sqlite.cpp\n endif\n+if USE_BDB\n+libbitcoin_wallet_a_SOURCES += wallet/bdb.cpp wallet/salvage.cpp\n+endif\n \n libbitcoin_wallet_tool_a_CPPFLAGS = $(AM_CPPFLAGS) $(BITCOIN_INCLUDES)\n libbitcoin_wallet_tool_a_CXXFLAGS = $(AM_CXXFLAGS) $(PIE_FLAGS)"
      },
      {
        "sha": "9fc7533e0defa9f24647db025b9660d0cd42ab2b",
        "filename": "src/Makefile.test.include",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/src/Makefile.test.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/src/Makefile.test.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.test.include?ref=a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
        "patch": "@@ -292,7 +292,6 @@ BITCOIN_TESTS =\\\n \n if ENABLE_WALLET\n BITCOIN_TESTS += \\\n-  wallet/test/db_tests.cpp \\\n   wallet/test/psbt_wallet_tests.cpp \\\n   wallet/test/wallet_tests.cpp \\\n   wallet/test/wallet_crypto_tests.cpp \\\n@@ -301,6 +300,10 @@ BITCOIN_TESTS += \\\n   wallet/test/ismine_tests.cpp \\\n   wallet/test/scriptpubkeyman_tests.cpp\n \n+if USE_BDB\n+BITCOIN_TESTS += wallet/test/db_tests.cpp\n+endif\n+\n BITCOIN_TEST_SUITE += \\\n   wallet/test/wallet_test_fixture.cpp \\\n   wallet/test/wallet_test_fixture.h \\"
      },
      {
        "sha": "88dfbd69ffc1cfe8c4fc1a1357ca121168de2d41",
        "filename": "src/qt/rpcconsole.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/src/qt/rpcconsole.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/src/qt/rpcconsole.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/rpcconsole.cpp?ref=a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
        "patch": "@@ -25,7 +25,9 @@\n #include <univalue.h>\n \n #ifdef ENABLE_WALLET\n+#ifdef USE_BDB\n #include <wallet/bdb.h>\n+#endif\n #include <wallet/db.h>\n #include <wallet/wallet.h>\n #endif"
      },
      {
        "sha": "085dde1026fb342088200c914c5f57d81d91c9ad",
        "filename": "src/wallet/init.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/src/wallet/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/src/wallet/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/init.cpp?ref=a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
        "patch": "@@ -15,7 +15,9 @@\n #include <util/moneystr.h>\n #include <util/system.h>\n #include <util/translation.h>\n+#ifdef USE_BDB\n #include <wallet/bdb.h>\n+#endif\n #include <wallet/coincontrol.h>\n #include <wallet/wallet.h>\n #include <walletinitinterface.h>\n@@ -69,9 +71,14 @@ void WalletInit::AddWalletOptions(ArgsManager& argsman) const\n #endif\n     argsman.AddArg(\"-walletrbf\", strprintf(\"Send transactions with full-RBF opt-in enabled (RPC only, default: %u)\", DEFAULT_WALLET_RBF), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);\n \n+#ifdef USE_BDB\n     argsman.AddArg(\"-dblogsize=<n>\", strprintf(\"Flush wallet database activity from memory to disk log every <n> megabytes (default: %u)\", DEFAULT_WALLET_DBLOGSIZE), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::WALLET_DEBUG_TEST);\n     argsman.AddArg(\"-flushwallet\", strprintf(\"Run a thread to flush wallet periodically (default: %u)\", DEFAULT_FLUSHWALLET), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::WALLET_DEBUG_TEST);\n     argsman.AddArg(\"-privdb\", strprintf(\"Sets the DB_PRIVATE flag in the wallet db environment (default: %u)\", DEFAULT_WALLET_PRIVDB), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::WALLET_DEBUG_TEST);\n+#else\n+    argsman.AddHiddenArgs({\"-dblogsize\", \"-flushwallet\", \"-privdb\"});\n+#endif\n+\n     argsman.AddArg(\"-walletrejectlongchains\", strprintf(\"Wallet will not create transactions that violate mempool chain limits (default: %u)\", DEFAULT_WALLET_REJECT_LONG_CHAINS), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::WALLET_DEBUG_TEST);\n \n     argsman.AddHiddenArgs({\"-zapwallettxes\"});"
      },
      {
        "sha": "1543e8fb815d1834ed2247bc39a746029b9c601a",
        "filename": "src/wallet/walletdb.cpp",
        "status": "modified",
        "additions": 28,
        "deletions": 4,
        "changes": 32,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/src/wallet/walletdb.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/src/wallet/walletdb.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/walletdb.cpp?ref=a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
        "patch": "@@ -14,7 +14,9 @@\n #include <util/system.h>\n #include <util/time.h>\n #include <util/translation.h>\n+#ifdef USE_BDB\n #include <wallet/bdb.h>\n+#endif\n #ifdef USE_SQLITE\n #include <wallet/sqlite.h>\n #endif\n@@ -1011,9 +1013,11 @@ std::unique_ptr<WalletDatabase> MakeDatabase(const fs::path& path, const Databas\n \n     Optional<DatabaseFormat> format;\n     if (exists) {\n+#ifdef USE_BDB\n         if (ExistsBerkeleyDatabase(path)) {\n             format = DatabaseFormat::BERKELEY;\n         }\n+#endif\n #ifdef USE_SQLITE\n         if (ExistsSQLiteDatabase(path)) {\n             if (format) {\n@@ -1052,15 +1056,31 @@ std::unique_ptr<WalletDatabase> MakeDatabase(const fs::path& path, const Databas\n     // Format is not set when a db doesn't already exist, so use the format specified by the options if it is set.\n     if (!format && options.require_format) format = options.require_format;\n \n+    // If the format is not specified or detected, choose the default format based on what is available. We prefer BDB over SQLite for now.\n+    if (!format) {\n #ifdef USE_SQLITE\n-    if (format && format == DatabaseFormat::SQLITE) {\n-        return MakeSQLiteDatabase(path, options, status, error);\n+        format = DatabaseFormat::SQLITE;\n+#endif\n+#ifdef USE_BDB\n+        format = DatabaseFormat::BERKELEY;\n+#endif\n     }\n-#else\n-    assert(format != DatabaseFormat::SQLITE);\n+\n+    if (format == DatabaseFormat::SQLITE) {\n+#ifdef USE_SQLITE\n+        return MakeSQLiteDatabase(path, options, status, error);\n #endif\n+        error = Untranslated(strprintf(\"Failed to open database path '%s'. Build does not support SQLite database format.\", path.string()));\n+        status = DatabaseStatus::FAILED_BAD_FORMAT;\n+        return nullptr;\n+    }\n \n+#ifdef USE_BDB\n     return MakeBerkeleyDatabase(path, options, status, error);\n+#endif\n+    error = Untranslated(strprintf(\"Failed to open database path '%s'. Build does not support Berkeley DB database format.\", path.string()));\n+    status = DatabaseStatus::FAILED_BAD_FORMAT;\n+    return nullptr;\n }\n \n /** Return object for accessing dummy database with no read/write capabilities. */\n@@ -1072,5 +1092,9 @@ std::unique_ptr<WalletDatabase> CreateDummyWalletDatabase()\n /** Return object for accessing temporary in-memory database. */\n std::unique_ptr<WalletDatabase> CreateMockWalletDatabase()\n {\n+#ifdef USE_BDB\n     return MakeUnique<BerkeleyDatabase>(std::make_shared<BerkeleyEnvironment>(), \"\");\n+#elif USE_SQLITE\n+    return MakeUnique<SQLiteDatabase>(\"\", \"\", true);\n+#endif\n }"
      },
      {
        "sha": "dad1232e1008c9cdbca9a92a0a408b86b40692a9",
        "filename": "src/wallet/wallettool.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/src/wallet/wallettool.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/src/wallet/wallettool.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallettool.cpp?ref=a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
        "patch": "@@ -122,6 +122,7 @@ bool ExecuteWalletToolFunc(const std::string& command, const std::string& name)\n             WalletShowInfo(wallet_instance.get());\n             wallet_instance->Close();\n         } else if (command == \"salvage\") {\n+#ifdef USE_BDB\n             bilingual_str error;\n             std::vector<bilingual_str> warnings;\n             bool ret = RecoverDatabaseFile(path, error, warnings);\n@@ -134,6 +135,10 @@ bool ExecuteWalletToolFunc(const std::string& command, const std::string& name)\n                 }\n             }\n             return ret;\n+#else\n+            tfm::format(std::cerr, \"Salvage command is not available as BDB support is not compiled\");\n+            return false;\n+#endif\n         }\n     } else {\n         tfm::format(std::cerr, \"Invalid command: %s\\n\", command);"
      },
      {
        "sha": "d3f76ec66ca4a81618f1852edac488e417152acc",
        "filename": "src/wallet/walletutil.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/src/wallet/walletutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58b719cf75e2d97205ec260bcff0d4780fe4fb8/src/wallet/walletutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/walletutil.cpp?ref=a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
        "patch": "@@ -7,7 +7,11 @@\n #include <logging.h>\n #include <util/system.h>\n \n+#ifdef USE_BDB\n bool ExistsBerkeleyDatabase(const fs::path& path);\n+#else\n+#   define ExistsBerkeleyDatabase(path)  (false)\n+#endif\n #ifdef USE_SQLITE\n bool ExistsSQLiteDatabase(const fs::path& path);\n #else"
      }
    ]
  },
  {
    "sha": "6ebc41bf9cb0184554923e84e1935195d356f2b3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ZWJjNDFiZjljYjAxODQ1NTQ5MjNlODRlMTkzNTE5NWQzNTZmMmIz",
    "commit": {
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-19T19:12:39Z"
      },
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-11-18T16:56:12Z"
      },
      "message": "Enforce salvage is only for BDB wallets",
      "tree": {
        "sha": "c50c2cebedd271890a4769e99fe1c308a8c7b1b1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c50c2cebedd271890a4769e99fe1c308a8c7b1b1"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6ebc41bf9cb0184554923e84e1935195d356f2b3",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6ebc41bf9cb0184554923e84e1935195d356f2b3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6ebc41bf9cb0184554923e84e1935195d356f2b3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6ebc41bf9cb0184554923e84e1935195d356f2b3/comments",
    "author": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a58b719cf75e2d97205ec260bcff0d4780fe4fb8",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a58b719cf75e2d97205ec260bcff0d4780fe4fb8"
      }
    ],
    "stats": {
      "total": 1,
      "additions": 1,
      "deletions": 0
    },
    "files": [
      {
        "sha": "da5ca7858f2b7c0a3f5fc7a2625fe896b46df639",
        "filename": "src/wallet/salvage.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6ebc41bf9cb0184554923e84e1935195d356f2b3/src/wallet/salvage.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6ebc41bf9cb0184554923e84e1935195d356f2b3/src/wallet/salvage.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/salvage.cpp?ref=6ebc41bf9cb0184554923e84e1935195d356f2b3",
        "patch": "@@ -28,6 +28,7 @@ bool RecoverDatabaseFile(const fs::path& file_path, bilingual_str& error, std::v\n     DatabaseStatus status;\n     options.require_existing = true;\n     options.verify = false;\n+    options.require_format = DatabaseFormat::BERKELEY;\n     std::unique_ptr<WalletDatabase> database = MakeDatabase(file_path, options, status, error);\n     if (!database) return false;\n "
      }
    ]
  },
  {
    "sha": "71e40b33bd1e72ccf5d82e1d3f8b481f8e965492",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3MWU0MGIzM2JkMWU3MmNjZjVkODJlMWQzZjhiNDgxZjhlOTY1NDky",
    "commit": {
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-19T21:34:20Z"
      },
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-11-18T16:56:12Z"
      },
      "message": "RPC: Require descriptors=True for createwallet when BDB is not compiled",
      "tree": {
        "sha": "1c70bf215aa9d809a5e7a6332592629afdd50872",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1c70bf215aa9d809a5e7a6332592629afdd50872"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/71e40b33bd1e72ccf5d82e1d3f8b481f8e965492",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/71e40b33bd1e72ccf5d82e1d3f8b481f8e965492",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/71e40b33bd1e72ccf5d82e1d3f8b481f8e965492",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/71e40b33bd1e72ccf5d82e1d3f8b481f8e965492/comments",
    "author": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6ebc41bf9cb0184554923e84e1935195d356f2b3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6ebc41bf9cb0184554923e84e1935195d356f2b3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6ebc41bf9cb0184554923e84e1935195d356f2b3"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 6,
      "deletions": 0
    },
    "files": [
      {
        "sha": "ace2975e2ab2e43633dda6beb514bf8b68f33987",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/71e40b33bd1e72ccf5d82e1d3f8b481f8e965492/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/71e40b33bd1e72ccf5d82e1d3f8b481f8e965492/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=71e40b33bd1e72ccf5d82e1d3f8b481f8e965492",
        "patch": "@@ -2764,6 +2764,12 @@ static RPCHelpMan createwallet()\n         warnings.emplace_back(Untranslated(\"Wallet is an experimental descriptor wallet\"));\n     }\n \n+#ifndef USE_BDB\n+    if (!(flags & WALLET_FLAG_DESCRIPTORS)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Compiled without bdb support (required for legacy wallets)\");\n+    }\n+#endif\n+\n     DatabaseOptions options;\n     DatabaseStatus status;\n     options.require_create = true;"
      }
    ]
  },
  {
    "sha": "ee47f11f7399ec3a4330ea1f2fc388c7e32959d6",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplZTQ3ZjExZjczOTllYzNhNDMzMGVhMWYyZmMzODhjN2UzMjk1OWQ2",
    "commit": {
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-19T21:38:41Z"
      },
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-11-18T16:56:12Z"
      },
      "message": "GUI: Force descriptor wallets when BDB is not compiled",
      "tree": {
        "sha": "30597a5c2a080ab8838aed9acc8be5e53a0d98df",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/30597a5c2a080ab8838aed9acc8be5e53a0d98df"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ee47f11f7399ec3a4330ea1f2fc388c7e32959d6",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ee47f11f7399ec3a4330ea1f2fc388c7e32959d6",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ee47f11f7399ec3a4330ea1f2fc388c7e32959d6",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ee47f11f7399ec3a4330ea1f2fc388c7e32959d6/comments",
    "author": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "71e40b33bd1e72ccf5d82e1d3f8b481f8e965492",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/71e40b33bd1e72ccf5d82e1d3f8b481f8e965492",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/71e40b33bd1e72ccf5d82e1d3f8b481f8e965492"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 6,
      "deletions": 3
    },
    "files": [
      {
        "sha": "3945159c26ffed8e0da6d3d2d55f163de736492f",
        "filename": "src/qt/createwalletdialog.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 3,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ee47f11f7399ec3a4330ea1f2fc388c7e32959d6/src/qt/createwalletdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ee47f11f7399ec3a4330ea1f2fc388c7e32959d6/src/qt/createwalletdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/createwalletdialog.cpp?ref=ee47f11f7399ec3a4330ea1f2fc388c7e32959d6",
        "patch": "@@ -51,12 +51,15 @@ CreateWalletDialog::CreateWalletDialog(QWidget* parent) :\n         }\n     });\n \n-    #ifndef USE_SQLITE\n+#ifndef USE_SQLITE\n         ui->descriptor_checkbox->setToolTip(tr(\"Compiled without sqlite support (required for descriptor wallets)\"));\n         ui->descriptor_checkbox->setEnabled(false);\n         ui->descriptor_checkbox->setChecked(false);\n-    #endif\n-\n+#endif\n+#ifndef USE_BDB\n+        ui->descriptor_checkbox->setEnabled(false);\n+        ui->descriptor_checkbox->setChecked(true);\n+#endif\n }\n \n CreateWalletDialog::~CreateWalletDialog()"
      }
    ]
  },
  {
    "sha": "99309ab3e96a290359b84f9b657c5115aa3470dd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5OTMwOWFiM2U5NmEyOTAzNTliODRmOWI2NTdjNTExNWFhMzQ3MGRk",
    "commit": {
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-19T18:17:58Z"
      },
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-11-18T16:56:12Z"
      },
      "message": "Allow disabling BDB in configure with --without-bdb",
      "tree": {
        "sha": "b846ed9614e7bd309e4e2095730f51b6e6d57eab",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b846ed9614e7bd309e4e2095730f51b6e6d57eab"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/99309ab3e96a290359b84f9b657c5115aa3470dd",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/99309ab3e96a290359b84f9b657c5115aa3470dd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/99309ab3e96a290359b84f9b657c5115aa3470dd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/99309ab3e96a290359b84f9b657c5115aa3470dd/comments",
    "author": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ee47f11f7399ec3a4330ea1f2fc388c7e32959d6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ee47f11f7399ec3a4330ea1f2fc388c7e32959d6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ee47f11f7399ec3a4330ea1f2fc388c7e32959d6"
      }
    ],
    "stats": {
      "total": 54,
      "additions": 43,
      "deletions": 11
    },
    "files": [
      {
        "sha": "5fc5b493d36a0d74a2dcfab0bdc2fe2d157f698b",
        "filename": "build-aux/m4/bitcoin_find_bdb48.m4",
        "status": "modified",
        "additions": 18,
        "deletions": 7,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/99309ab3e96a290359b84f9b657c5115aa3470dd/build-aux/m4/bitcoin_find_bdb48.m4",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/99309ab3e96a290359b84f9b657c5115aa3470dd/build-aux/m4/bitcoin_find_bdb48.m4",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build-aux/m4/bitcoin_find_bdb48.m4?ref=99309ab3e96a290359b84f9b657c5115aa3470dd",
        "patch": "@@ -6,7 +6,9 @@ AC_DEFUN([BITCOIN_FIND_BDB48],[\n   AC_ARG_VAR(BDB_CFLAGS, [C compiler flags for BerkeleyDB, bypasses autodetection])\n   AC_ARG_VAR(BDB_LIBS, [Linker flags for BerkeleyDB, bypasses autodetection])\n \n-  if test \"x$BDB_CFLAGS\" = \"x\"; then\n+  if test \"x$use_bdb\" = \"xno\"; then\n+    use_bdb=no\n+  elif test \"x$BDB_CFLAGS\" = \"x\"; then\n     AC_MSG_CHECKING([for Berkeley DB C++ headers])\n     BDB_CPPFLAGS=\n     bdbpath=X\n@@ -44,25 +46,30 @@ AC_DEFUN([BITCOIN_FIND_BDB48],[\n       ],[])\n     done\n     if test \"x$bdbpath\" = \"xX\"; then\n+      use_bdb=no\n       AC_MSG_RESULT([no])\n-      AC_MSG_ERROR([libdb_cxx headers missing, ]AC_PACKAGE_NAME[ requires this library for wallet functionality (--disable-wallet to disable wallet functionality)])\n+      AC_MSG_ERROR([libdb_cxx headers missing, ]AC_PACKAGE_NAME[ requires this library for BDB wallet support (--without-bdb to disable BDB wallet support)])\n     elif test \"x$bdb48path\" = \"xX\"; then\n       BITCOIN_SUBDIR_TO_INCLUDE(BDB_CPPFLAGS,[${bdbpath}],db_cxx)\n       AC_ARG_WITH([incompatible-bdb],[AS_HELP_STRING([--with-incompatible-bdb], [allow using a bdb version other than 4.8])],[\n-        AC_MSG_WARN([Found Berkeley DB other than 4.8; wallets opened by this build will not be portable!])\n+        AC_MSG_WARN([Found Berkeley DB other than 4.8; BDB wallets opened by this build will not be portable!])\n       ],[\n-        AC_MSG_ERROR([Found Berkeley DB other than 4.8, required for portable wallets (--with-incompatible-bdb to ignore or --disable-wallet to disable wallet functionality)])\n+        AC_MSG_ERROR([Found Berkeley DB other than 4.8, required for portable BDB wallets (--with-incompatible-bdb to ignore or --without-bdb to disable BDB wallet support)])\n       ])\n+      use_bdb=yes\n     else\n       BITCOIN_SUBDIR_TO_INCLUDE(BDB_CPPFLAGS,[${bdb48path}],db_cxx)\n       bdbpath=\"${bdb48path}\"\n+      use_bdb=yes\n     fi\n   else\n     BDB_CPPFLAGS=${BDB_CFLAGS}\n   fi\n   AC_SUBST(BDB_CPPFLAGS)\n \n-  if test \"x$BDB_LIBS\" = \"x\"; then\n+  if test \"x$use_bdb\" = \"xno\"; then\n+    use_bdb=no\n+  elif test \"x$BDB_LIBS\" = \"x\"; then\n     # TODO: Ideally this could find the library version and make sure it matches the headers being used\n     for searchlib in db_cxx-4.8 db_cxx db4_cxx; do\n       AC_CHECK_LIB([$searchlib],[main],[\n@@ -71,8 +78,12 @@ AC_DEFUN([BITCOIN_FIND_BDB48],[\n       ])\n     done\n     if test \"x$BDB_LIBS\" = \"x\"; then\n-        AC_MSG_ERROR([libdb_cxx missing, ]AC_PACKAGE_NAME[ requires this library for wallet functionality (--disable-wallet to disable wallet functionality)])\n+        AC_MSG_ERROR([libdb_cxx missing, ]AC_PACKAGE_NAME[ requires this library for BDB wallet support (--without-bdb to disable BDB wallet support)])\n     fi\n   fi\n-  AC_SUBST(BDB_LIBS)\n+  if test \"x$use_bdb\" != \"xno\"; then\n+    AC_SUBST(BDB_LIBS)\n+    AC_DEFINE([USE_BDB], [1], [Define if BDB support should be compiled in])\n+    use_bdb=yes\n+  fi\n ])"
      },
      {
        "sha": "48dfafaee0c8fee2dfae9d9cc44206d972a22b10",
        "filename": "build_msvc/bitcoind/bitcoind.vcxproj",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/99309ab3e96a290359b84f9b657c5115aa3470dd/build_msvc/bitcoind/bitcoind.vcxproj",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/99309ab3e96a290359b84f9b657c5115aa3470dd/build_msvc/bitcoind/bitcoind.vcxproj",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build_msvc/bitcoind/bitcoind.vcxproj?ref=99309ab3e96a290359b84f9b657c5115aa3470dd",
        "patch": "@@ -62,6 +62,10 @@\n                    Replace=\"@EXEEXT@\" By=\".exe\"></ReplaceInFile>\n     <ReplaceInFile FilePath=\"$(ConfigIniOut)\"\n                   Replace=\"@ENABLE_WALLET_TRUE@\" By=\"\"></ReplaceInFile>\n+    <ReplaceInFile FilePath=\"$(ConfigIniOut)\"\n+                  Replace=\"@USE_BDB_TRUE@\" By=\"\"></ReplaceInFile>\n+    <ReplaceInFile FilePath=\"$(ConfigIniOut)\"\n+                  Replace=\"@USE_SQLITE_TRUE@\" By=\"\"></ReplaceInFile>\n     <ReplaceInFile FilePath=\"$(ConfigIniOut)\"\n                   Replace=\"@BUILD_BITCOIN_CLI_TRUE@\" By=\"\"></ReplaceInFile>\n     <ReplaceInFile FilePath=\"$(ConfigIniOut)\""
      },
      {
        "sha": "60a3b9f2c8fe4a802409258e77b5943d76b34f18",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 19,
        "deletions": 2,
        "changes": 21,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/99309ab3e96a290359b84f9b657c5115aa3470dd/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/99309ab3e96a290359b84f9b657c5115aa3470dd/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=99309ab3e96a290359b84f9b657c5115aa3470dd",
        "patch": "@@ -126,14 +126,20 @@ AC_ARG_ENABLE([wallet],\n   [AS_HELP_STRING([--disable-wallet],\n   [disable wallet (enabled by default)])],\n   [enable_wallet=$enableval],\n-  [enable_wallet=yes])\n+  [enable_wallet=auto])\n \n AC_ARG_WITH([sqlite],\n   [AS_HELP_STRING([--with-sqlite=yes|no|auto],\n   [enable sqlite wallet support (default: auto, i.e., enabled if wallet is enabled and sqlite is found)])],\n   [use_sqlite=$withval],\n   [use_sqlite=auto])\n \n+AC_ARG_WITH([bdb],\n+  [AS_HELP_STRING([--without-bdb],\n+  [disable bdb wallet support (default is enabled if wallet is enabled)])],\n+  [use_bdb=$withval],\n+  [use_bdb=auto])\n+\n AC_ARG_WITH([miniupnpc],\n   [AS_HELP_STRING([--with-miniupnpc],\n   [enable UPNP (default is yes if libminiupnpc is found)])],\n@@ -1248,6 +1254,14 @@ if test x$enable_wallet != xno; then\n       fi\n     fi\n     AC_MSG_RESULT([$use_sqlite])\n+\n+    dnl Disable wallet if both --without-bdb and --without-sqlite\n+    if test \"x$use_bdb$use_sqlite\" = \"xnono\"; then\n+        if test \"x$enable_wallet\" = \"xyes\"; then\n+            AC_MSG_ERROR([wallet functionality requested but no BDB or SQLite support available.])\n+        fi\n+        enable_wallet=no\n+    fi\n fi\n \n dnl Check for libminiupnpc (optional)\n@@ -1503,6 +1517,7 @@ AC_MSG_CHECKING([if wallet should be enabled])\n if test x$enable_wallet != xno; then\n   AC_MSG_RESULT(yes)\n   AC_DEFINE_UNQUOTED([ENABLE_WALLET],[1],[Define to 1 to enable wallet functions])\n+  enable_wallet=yes\n \n else\n   AC_MSG_RESULT(no)\n@@ -1602,7 +1617,7 @@ AM_CONDITIONAL([TARGET_LINUX], [test x$TARGET_OS = xlinux])\n AM_CONDITIONAL([TARGET_WINDOWS], [test x$TARGET_OS = xwindows])\n AM_CONDITIONAL([ENABLE_WALLET],[test x$enable_wallet = xyes])\n AM_CONDITIONAL([USE_SQLITE], [test \"x$use_sqlite\" = \"xyes\"])\n-AM_CONDITIONAL([USE_BDB], [true])\n+AM_CONDITIONAL([USE_BDB], [test \"x$use_bdb\" = \"xyes\"])\n AM_CONDITIONAL([ENABLE_TESTS],[test x$BUILD_TEST = xyes])\n AM_CONDITIONAL([ENABLE_FUZZ],[test x$enable_fuzz = xyes])\n AM_CONDITIONAL([ENABLE_QT],[test x$bitcoin_enable_qt = xyes])\n@@ -1669,6 +1684,7 @@ AC_SUBST(SHANI_CXXFLAGS)\n AC_SUBST(ARM_CRC_CXXFLAGS)\n AC_SUBST(LIBTOOL_APP_LDFLAGS)\n AC_SUBST(USE_SQLITE)\n+AC_SUBST(USE_BDB)\n AC_SUBST(USE_UPNP)\n AC_SUBST(USE_QRCODE)\n AC_SUBST(BOOST_LIBS)\n@@ -1746,6 +1762,7 @@ echo \"  multiprocess  = $build_multiprocess\"\n echo \"  with wallet   = $enable_wallet\"\n if test \"x$enable_wallet\" != \"xno\"; then\n     echo \"    with sqlite = $use_sqlite\"\n+    echo \"    with bdb    = $use_bdb\"\n fi\n echo \"  with gui / qt = $bitcoin_enable_qt\"\n if test x$bitcoin_enable_qt != xno; then"
      },
      {
        "sha": "cfe3328b4545aaaadd037582a143d1fd1eef9c15",
        "filename": "doc/build-unix.md",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/99309ab3e96a290359b84f9b657c5115aa3470dd/doc/build-unix.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/99309ab3e96a290359b84f9b657c5115aa3470dd/doc/build-unix.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/build-unix.md?ref=99309ab3e96a290359b84f9b657c5115aa3470dd",
        "patch": "@@ -41,7 +41,7 @@ Optional dependencies:\n  Library     | Purpose          | Description\n  ------------|------------------|----------------------\n  miniupnpc   | UPnP Support     | Firewall-jumping support\n- libdb4.8    | Berkeley DB      | Wallet storage (only needed when wallet enabled)\n+ libdb4.8    | Berkeley DB      | Optional, wallet storage (only needed when wallet enabled)\n  qt          | GUI              | GUI toolkit (only needed when GUI enabled)\n  libqrencode | QR codes in GUI  | Optional for generating QR codes (only needed when GUI enabled)\n  univalue    | Utility          | JSON parsing and encoding (bundled version will be used unless --with-system-univalue passed to configure)"
      },
      {
        "sha": "faefcf758e0d5cbc0714d4ebd94e5009ebf589db",
        "filename": "doc/dependencies.md",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/99309ab3e96a290359b84f9b657c5115aa3470dd/doc/dependencies.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/99309ab3e96a290359b84f9b657c5115aa3470dd/doc/dependencies.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/dependencies.md?ref=99309ab3e96a290359b84f9b657c5115aa3470dd",
        "patch": "@@ -33,7 +33,7 @@ Some dependencies are not needed in all configurations. The following are some f\n \n #### Options passed to `./configure`\n * MiniUPnPc is not needed with  `--with-miniupnpc=no`.\n-* Berkeley DB is not needed with `--disable-wallet`.\n+* Berkeley DB is not needed with `--disable-wallet` or `--without-bdb`.\n * SQLite is not needed with `--disable-wallet` or `--without-sqlite`.\n * Qt is not needed with `--without-gui`.\n * If the qrencode dependency is absent, QR support won't be added. To force an error when that happens, pass `--with-qrencode`."
      }
    ]
  },
  {
    "sha": "d52f502b1ea1cafa7d58c5517f01dba26ecb7269",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNTJmNTAyYjFlYTFjYWZhN2Q1OGM1NTE3ZjAxZGJhMjZlY2I3MjY5",
    "commit": {
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-26T19:10:16Z"
      },
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-11-18T16:56:12Z"
      },
      "message": "Fix mock SQLiteDatabases",
      "tree": {
        "sha": "c1dc01b07c4eb5a2e7b425c8155cdadb06031abf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c1dc01b07c4eb5a2e7b425c8155cdadb06031abf"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d52f502b1ea1cafa7d58c5517f01dba26ecb7269",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d52f502b1ea1cafa7d58c5517f01dba26ecb7269",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d52f502b1ea1cafa7d58c5517f01dba26ecb7269",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d52f502b1ea1cafa7d58c5517f01dba26ecb7269/comments",
    "author": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "99309ab3e96a290359b84f9b657c5115aa3470dd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/99309ab3e96a290359b84f9b657c5115aa3470dd",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/99309ab3e96a290359b84f9b657c5115aa3470dd"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 3,
      "deletions": 1
    },
    "files": [
      {
        "sha": "d278d96476da5ca29f83de9ebc4c33440a7544de",
        "filename": "src/wallet/sqlite.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d52f502b1ea1cafa7d58c5517f01dba26ecb7269/src/wallet/sqlite.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d52f502b1ea1cafa7d58c5517f01dba26ecb7269/src/wallet/sqlite.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/sqlite.cpp?ref=d52f502b1ea1cafa7d58c5517f01dba26ecb7269",
        "patch": "@@ -206,7 +206,9 @@ void SQLiteDatabase::Open()\n     }\n \n     if (m_db == nullptr) {\n-        TryCreateDirectories(m_dir_path);\n+        if (!m_mock) {\n+            TryCreateDirectories(m_dir_path);\n+        }\n         int ret = sqlite3_open_v2(m_file_path.c_str(), &m_db, flags, nullptr);\n         if (ret != SQLITE_OK) {\n             throw std::runtime_error(strprintf(\"SQLiteDatabase: Failed to open database: %s\\n\", sqlite3_errstr(ret)));"
      }
    ]
  }
]