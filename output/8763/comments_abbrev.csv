CryptAxe,2016-09-20T05:48:21Z,#2751\n,https://github.com/bitcoin/bitcoin/pull/8763#issuecomment-248207693,248207693,
jonasschnelli,2016-09-20T07:01:11Z,I think a `sweep` command is desirable.\n\nJust thinking: how would it be if we would have something like `createrawsweeptransaction <pubkey> <outputaddress>` as a first step.\nThe people can use `signrawtransaction` together with the privatekey.\nWe could still support a `sweepkey` RPC call that would use `createrawsweeptransaction || signrawtransaction || sendrawtransaction`.\n\nSplitting it up ,https://github.com/bitcoin/bitcoin/pull/8763#issuecomment-248219746,248219746,
CryptAxe,2016-09-21T04:02:11Z,"Thanks everyone, I will take all of your input and come back with something improved when I have the time. Does everyone agree with @jonasschnelli 's suggestion to separate the creation of the sweep transaction from the signing / broadcast? It seems like a good idea to me.  \n",https://github.com/bitcoin/bitcoin/pull/8763#issuecomment-248505705,248505705,
gmaxwell,2016-09-21T19:05:53Z,"As an aside, any new functionality which requires a rescan really must take a block range (allowing for a range that is open on the upper side.. e.g. a starting height) as an (optional) argument.\n\n[hmm. so this could be done without a rescan by only evaluating the utxo set...]\n",https://github.com/bitcoin/bitcoin/pull/8763#issuecomment-248711076,248711076,
luke-jr,2016-09-20T06:29:47Z,But the wallet won't have tracked UTXOs for this private key...\n,https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79543223,79543223,src/wallet/rpcdump.cpp
luke-jr,2016-09-20T06:30:20Z,"It's the full UTXO set you need to look through, not merely the wallet's coins.\n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79543266,79543266,src/wallet/rpcdump.cpp
luke-jr,2016-09-20T06:34:10Z,3x the fee why? Probably should make this configurable...\n,https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79543628,79543628,src/wallet/rpcdump.cpp
luke-jr,2016-09-20T06:34:58Z,This should probably be shared with the wallet code doing the same...\n,https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79543694,79543694,src/wallet/rpcdump.cpp
luke-jr,2016-09-20T06:36:30Z,"This should probably get moved into a non-RPC-specific location, and RPC-specific errors moved out.\n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79543831,79543831,src/wallet/rpcdump.cpp
luke-jr,2016-09-20T06:37:24Z,Too late to error here - it's already been fed into AcceptToMemoryPool.\n,https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79543909,79543909,src/wallet/rpcdump.cpp
luke-jr,2016-09-20T06:37:57Z,"Suggest ""sweepprivkey"" to match ""dumpprivkey"" and ""importprivkey""\n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79543977,79543977,src/wallet/rpcdump.cpp
luke-jr,2016-09-20T06:38:17Z,bitcoinaddress isn't a JSON type. Just string.\n,https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79544011,79544011,src/wallet/rpcdump.cpp
luke-jr,2016-09-20T06:38:55Z,Why? Shouldn't this work without unlocking the wallet?\n,https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79544067,79544067,src/wallet/rpcdump.cpp
luke-jr,2016-09-20T06:39:22Z,"Furthermore, so long as you're insisting on an address here, it makes no sense to include this as a wallet RPC...\n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79544110,79544110,src/wallet/rpcdump.cpp
luke-jr,2016-09-20T06:40:19Z,"Importing an untrusted key is never secure, so it doesn't make sense to import+sweep...\n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79544186,79544186,src/wallet/rpcdump.cpp
rebroad,2016-09-20T07:07:51Z,"It'll need to be unlocked at some point won't it? (in order to move the bitcoins from the swept address), although ideally there ought to be a way to do this without needing to unlock manually - i.e. store the private key for the swept address but require the private key of the wallet it is being swept to to access them.\n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79547155,79547155,src/wallet/rpcdump.cpp
luke-jr,2016-09-20T07:29:52Z,"No. The swept _key_ (not address; addresses don't control bitcoins) is not part of the wallet, and the wallet doesn't need to be unlocked to receive. Furthermore, so long as the user is proving the sweep-to address, the wallet isn't even being _used_.\n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79549986,79549986,src/wallet/rpcdump.cpp
MarcoFalke,2016-09-20T08:24:48Z,Nit: Don't use `BOOST_*`\n,https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79558562,79558562,src/wallet/rpcdump.cpp
MarcoFalke,2016-09-20T08:26:11Z,"Agree. Also, the new rpc should take a dictionary as input and not positional args to make this easier.\n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79558765,79558765,src/wallet/rpcdump.cpp
CryptAxe,2016-09-21T04:02:43Z,Agreed \n,https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79757460,79757460,src/wallet/rpcdump.cpp
CryptAxe,2016-09-21T04:03:59Z,"This is intended for a private key that is already in the wallet, with outputs.\n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79757543,79757543,src/wallet/rpcdump.cpp
CryptAxe,2016-09-21T04:06:16Z,"This is for after importing a private key. \n\nI see BOOST_FOREACH particularly used in many places throughout the bitcoin source code, I will remove it but could you educate me as to me why I shouldn't use it?\n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79757691,79757691,src/wallet/rpcdump.cpp
CryptAxe,2016-09-21T04:09:31Z,"In testing I ended up with a sweep transaction where the fee estimation was not enough, and the tx was rejected from the memory pool. This is a bad solution though, I'm more than open to suggestions. \n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79757939,79757939,src/wallet/rpcdump.cpp
CryptAxe,2016-09-21T04:12:03Z,Are you talking about setting nLockTime? I didn't see that... Will look \n,https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79758105,79758105,src/wallet/rpcdump.cpp
CryptAxe,2016-09-21T04:14:17Z,"If I perform this check and throw the error before AcceptToMemoryPool, would that be okay?\n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79758255,79758255,src/wallet/rpcdump.cpp
CryptAxe,2016-09-21T04:17:09Z,"I was making this with the intention that the private key is actually in the wallet, or being imported, in which case it will be in the wallet before the sweep. \n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79758396,79758396,src/wallet/rpcdump.cpp
CryptAxe,2016-09-21T04:17:46Z,Well that was the main issue pointed out in #2751 or I am just very confused. \n,https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79758437,79758437,src/wallet/rpcdump.cpp
MarcoFalke,2016-09-21T07:34:07Z,"We are moving towards using the cpp11 for loop, no need to go back in new code and use a framework.\n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79774417,79774417,src/wallet/rpcdump.cpp
MarcoFalke,2016-09-21T07:36:51Z,E.g. `fundrawtransaction` takes options to set the fee rate.\n,https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79774803,79774803,src/wallet/rpcdump.cpp
rebroad,2016-09-21T07:55:32Z,"@CryptAxe I think @luke-jr means that the risk is having funds to the imported key. Is this what you mean, @luke-jr ?  I'm not sure how this would happen, but as part of making a key autoswept, I would hope this pull would make it less easy to select for receipt of funds as part of this.\n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79777484,79777484,src/wallet/rpcdump.cpp
luke-jr,2016-09-21T08:02:03Z,"Why would you sweep it, if it's in the wallet (and thereby trusted to be exclusively yours)?\n",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79778487,79778487,src/wallet/rpcdump.cpp
luke-jr,2016-09-21T08:02:52Z,n/a if create and broadcast are split up.\n,https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79778603,79778603,src/wallet/rpcdump.cpp
luke-jr,2016-09-21T08:06:36Z,"The first ""use case"" in #2751 I assume is poorly phrased. You never want to import such a key. What makes sense, and what @jgarzik probably meant, is that _instead_ of importing the key, you sweep it, and keep a copy of the private key in an as-of-yet-non-existent part of the wallet to be continually swept in case someone sends funds to it in the future.\n\nThe second use case is not likely to occ",https://github.com/bitcoin/bitcoin/pull/8763#discussion_r79779172,79779172,src/wallet/rpcdump.cpp
