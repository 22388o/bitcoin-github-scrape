[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370567811",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#issuecomment-370567811",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12604",
    "id": 370567811,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDU2NzgxMQ==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-05T21:13:43Z",
    "updated_at": "2018-03-05T21:13:43Z",
    "author_association": "MEMBER",
    "body": "utACK after squash.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370567811/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370568989",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#issuecomment-370568989",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12604",
    "id": 370568989,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDU2ODk4OQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-05T21:17:48Z",
    "updated_at": "2018-03-05T21:17:48Z",
    "author_association": "MEMBER",
    "body": "utACK ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370568989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370667823",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#issuecomment-370667823",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12604",
    "id": 370667823,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDY2NzgyMw==",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-06T05:27:24Z",
    "updated_at": "2018-03-06T05:27:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Updated with 741f0177c53ae536801a67c8ec194d6be3505d2d to fix const correctness.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370667823/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370670631",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#issuecomment-370670631",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12604",
    "id": 370670631,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDY3MDYzMQ==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-06T05:44:51Z",
    "updated_at": "2018-03-06T05:44:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "Nice!\r\nutACK 741f0177c53ae536801a67c8ec194d6be3505d2d",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370670631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370675374",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#issuecomment-370675374",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12604",
    "id": 370675374,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDY3NTM3NA==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-06T06:13:28Z",
    "updated_at": "2018-03-06T06:13:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "utACK 741f0177c53ae536801a67c8ec194d6be3505d2d",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370675374/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172317130",
    "pull_request_review_id": 101313878,
    "id": 172317130,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMxNzEzMA==",
    "diff_hunk": "@@ -155,11 +156,25 @@ CDBWrapper::~CDBWrapper()\n \n bool CDBWrapper::WriteBatch(CDBBatch& batch, bool fSync)\n {\n+    double mem_before = DynamicMemoryUsage() / 1024 / 1024;",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "d7bb5050995e9c1d0642d18994167580cd0a69bb",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "We might want to skip this call (and the one after) if BCLog::LEVELDB is disabled, with the string parsing and floating point arithmetic it seems a lot of overhead for a log message that will be ignored anyway.",
    "created_at": "2018-03-05T20:23:58Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172317130",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172317130"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172317130"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172317130/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 159,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172318417",
    "pull_request_review_id": 101315454,
    "id": 172318417,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMxODQxNw==",
    "diff_hunk": "@@ -155,11 +156,25 @@ CDBWrapper::~CDBWrapper()\n \n bool CDBWrapper::WriteBatch(CDBBatch& batch, bool fSync)\n {\n+    double mem_before = DynamicMemoryUsage() / 1024 / 1024;",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "d7bb5050995e9c1d0642d18994167580cd0a69bb",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good observation, fixed.",
    "created_at": "2018-03-05T20:28:58Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172318417",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172318417"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172318417"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172318417/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 159,
    "side": "RIGHT",
    "in_reply_to_id": 172317130
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172318882",
    "pull_request_review_id": 101316037,
    "id": 172318882,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMxODg4Mg==",
    "diff_hunk": "@@ -155,11 +156,25 @@ CDBWrapper::~CDBWrapper()\n \n bool CDBWrapper::WriteBatch(CDBBatch& batch, bool fSync)\n {\n+    double mem_before = DynamicMemoryUsage() / 1024 / 1024;\n     leveldb::Status status = pdb->Write(fSync ? syncoptions : writeoptions, &batch.batch);\n     dbwrapper_private::HandleError(status);\n+    double mem_after = DynamicMemoryUsage() / 1024 / 1024;\n+    LogPrint(BCLog::LEVELDB, \"WriteBatch memory usage: db=%s, before=%.1fMiB, after=%.1fMiB\\n\",\n+             m_name, mem_before, mem_after);\n     return true;\n }\n \n+size_t CDBWrapper::DynamicMemoryUsage() {\n+    std::string memory;\n+    if (pdb->GetProperty(\"leveldb.approximate-memory-usage\", &memory)) {\n+        return strtoul(memory.c_str(), nullptr, 10);",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 24,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "d7bb5050995e9c1d0642d18994167580cd0a69bb",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Use http://en.cppreference.com/w/cpp/string/basic_string/stoul instead.",
    "created_at": "2018-03-05T20:30:57Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172318882",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172318882"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172318882"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172318882/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 171,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172319158",
    "pull_request_review_id": 101316037,
    "id": 172319158,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMxOTE1OA==",
    "diff_hunk": "@@ -284,6 +287,9 @@ class CDBWrapper\n \n     bool WriteBatch(CDBBatch& batch, bool fSync = false);\n \n+    // Get an estimate of LevelDB memory usage (in bytes).\n+    size_t DynamicMemoryUsage();",
    "path": "src/dbwrapper.h",
    "position": null,
    "original_position": 15,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Could be `const`?",
    "created_at": "2018-03-05T20:32:05Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172319158",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172319158"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172319158"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172319158/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 291,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172319216",
    "pull_request_review_id": 101316037,
    "id": 172319216,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMxOTIxNg==",
    "diff_hunk": "@@ -89,6 +89,7 @@ static leveldb::Options GetOptions(size_t nCacheSize)\n }\n \n CDBWrapper::CDBWrapper(const fs::path& path, size_t nCacheSize, bool fMemory, bool fWipe, bool obfuscate)\n+    :m_name(fs::basename(path))",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit, space after `:`.",
    "created_at": "2018-03-05T20:32:19Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172319216",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172319216"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172319216"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172319216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 92,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172319558",
    "pull_request_review_id": 101316037,
    "id": 172319558,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMxOTU1OA==",
    "diff_hunk": "@@ -155,11 +156,28 @@ CDBWrapper::~CDBWrapper()\n \n bool CDBWrapper::WriteBatch(CDBBatch& batch, bool fSync)\n {\n+    const bool log_memory = LogAcceptCategory(BCLog::LEVELDB);\n+    double mem_before;",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit, initialize `= 0`.",
    "created_at": "2018-03-05T20:33:38Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172319558",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172319558"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172319558"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172319558/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 160,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172319697",
    "pull_request_review_id": 101316037,
    "id": 172319697,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMxOTY5Nw==",
    "diff_hunk": "@@ -155,11 +156,28 @@ CDBWrapper::~CDBWrapper()\n \n bool CDBWrapper::WriteBatch(CDBBatch& batch, bool fSync)\n {\n+    const bool log_memory = LogAcceptCategory(BCLog::LEVELDB);\n+    double mem_before;\n+    if (log_memory)",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 14,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit, same line.",
    "created_at": "2018-03-05T20:34:14Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172319697",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172319697"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172319697"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172319697/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 161,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172319860",
    "pull_request_review_id": 101316037,
    "id": 172319860,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMxOTg2MA==",
    "diff_hunk": "@@ -155,11 +156,28 @@ CDBWrapper::~CDBWrapper()\n \n bool CDBWrapper::WriteBatch(CDBBatch& batch, bool fSync)\n {\n+    const bool log_memory = LogAcceptCategory(BCLog::LEVELDB);\n+    double mem_before;\n+    if (log_memory)\n+        mem_before = DynamicMemoryUsage() / 1024 / 1024;\n     leveldb::Status status = pdb->Write(fSync ? syncoptions : writeoptions, &batch.batch);\n     dbwrapper_private::HandleError(status);\n+    if (log_memory)",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 18,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit\r\n```cpp\r\nif (log_memory) {\r\n    double mem_after = ...;\r\n    LogPrint(BCLog::LEVELDB, ...);\r\n}",
    "created_at": "2018-03-05T20:34:55Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172319860",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172319860"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172319860"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172319860/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 165,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172320929",
    "pull_request_review_id": 101316037,
    "id": 172320929,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMyMDkyOQ==",
    "diff_hunk": "@@ -155,11 +156,28 @@ CDBWrapper::~CDBWrapper()\n \n bool CDBWrapper::WriteBatch(CDBBatch& batch, bool fSync)\n {\n+    const bool log_memory = LogAcceptCategory(BCLog::LEVELDB);\n+    double mem_before;\n+    if (log_memory)\n+        mem_before = DynamicMemoryUsage() / 1024 / 1024;\n     leveldb::Status status = pdb->Write(fSync ? syncoptions : writeoptions, &batch.batch);\n     dbwrapper_private::HandleError(status);\n+    if (log_memory)\n+        LogPrint(BCLog::LEVELDB, \"WriteBatch memory usage: db=%s, before=%.1fMiB, after=%.1fMiB\\n\",\n+                 m_name, mem_before, DynamicMemoryUsage() / 1024 / 1024);\n     return true;\n }\n \n+size_t CDBWrapper::DynamicMemoryUsage() {\n+    std::string memory;\n+    if (pdb->GetProperty(\"leveldb.approximate-memory-usage\", &memory)) {",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 26,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Suggestion:\r\n```cpp\r\nif (!pdb->GetProperty(...)) {\r\n    LogPrint(BCLog::LEVELDB, \"Failed to get approximate-memory-usage property\\n\");\r\n    return 0;\r\n}\r\n\r\nreturn stoul(memory);\r\n```",
    "created_at": "2018-03-05T20:39:12Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172320929",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172320929"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172320929"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172320929/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 173,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172321892",
    "pull_request_review_id": 101316037,
    "id": 172321892,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMyMTg5Mg==",
    "diff_hunk": "@@ -89,6 +89,7 @@ static leveldb::Options GetOptions(size_t nCacheSize)\n }\n \n CDBWrapper::CDBWrapper(const fs::path& path, size_t nCacheSize, bool fMemory, bool fWipe, bool obfuscate)\n+    :m_name(fs::basename(path))",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "BTW, could use `path` in the debug instead?\r\n - relevant considering #11687\r\n - CDBWrapper constructor also logs path. ",
    "created_at": "2018-03-05T20:43:11Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172321892",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172321892"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172321892"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172321892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 92,
    "side": "RIGHT",
    "in_reply_to_id": 172319216
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172325031",
    "pull_request_review_id": 101323485,
    "id": 172325031,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMyNTAzMQ==",
    "diff_hunk": "@@ -155,11 +156,28 @@ CDBWrapper::~CDBWrapper()\n \n bool CDBWrapper::WriteBatch(CDBBatch& batch, bool fSync)\n {\n+    const bool log_memory = LogAcceptCategory(BCLog::LEVELDB);\n+    double mem_before;\n+    if (log_memory)",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 14,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit: braces whenever the then branch is not on the same line.",
    "created_at": "2018-03-05T20:55:04Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172325031",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172325031"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172325031"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172325031/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 161,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172325286",
    "pull_request_review_id": 101323808,
    "id": 172325286,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMyNTI4Ng==",
    "diff_hunk": "@@ -284,6 +287,9 @@ class CDBWrapper\n \n     bool WriteBatch(CDBBatch& batch, bool fSync = false);\n \n+    // Get an estimate of LevelDB memory usage (in bytes).\n+    size_t DynamicMemoryUsage();",
    "path": "src/dbwrapper.h",
    "position": null,
    "original_position": 15,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Maybe it's not possible, since [`GetProperty` is not const](https://github.com/google/leveldb/blob/41172a24016bc29fc795ed504737392587f54e3d/include/leveldb/db.h#L121)",
    "created_at": "2018-03-05T20:55:54Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172325286",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172325286"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172325286"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172325286/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 291,
    "side": "RIGHT",
    "in_reply_to_id": 172319158
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172326050",
    "pull_request_review_id": 101324743,
    "id": 172326050,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMyNjA1MA==",
    "diff_hunk": "@@ -155,11 +156,25 @@ CDBWrapper::~CDBWrapper()\n \n bool CDBWrapper::WriteBatch(CDBBatch& batch, bool fSync)\n {\n+    double mem_before = DynamicMemoryUsage() / 1024 / 1024;\n     leveldb::Status status = pdb->Write(fSync ? syncoptions : writeoptions, &batch.batch);\n     dbwrapper_private::HandleError(status);\n+    double mem_after = DynamicMemoryUsage() / 1024 / 1024;\n+    LogPrint(BCLog::LEVELDB, \"WriteBatch memory usage: db=%s, before=%.1fMiB, after=%.1fMiB\\n\",\n+             m_name, mem_before, mem_after);\n     return true;\n }\n \n+size_t CDBWrapper::DynamicMemoryUsage() {\n+    std::string memory;\n+    if (pdb->GetProperty(\"leveldb.approximate-memory-usage\", &memory)) {\n+        return strtoul(memory.c_str(), nullptr, 10);",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 24,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "d7bb5050995e9c1d0642d18994167580cd0a69bb",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "done",
    "created_at": "2018-03-05T20:58:49Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172326050",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172326050"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172326050"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172326050/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 171,
    "side": "RIGHT",
    "in_reply_to_id": 172318882
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172326328",
    "pull_request_review_id": 101325024,
    "id": 172326328,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMyNjMyOA==",
    "diff_hunk": "@@ -284,6 +287,9 @@ class CDBWrapper\n \n     bool WriteBatch(CDBBatch& batch, bool fSync = false);\n \n+    // Get an estimate of LevelDB memory usage (in bytes).\n+    size_t DynamicMemoryUsage();",
    "path": "src/dbwrapper.h",
    "position": null,
    "original_position": 15,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Right, unless you want to give into the temptation of const cast.",
    "created_at": "2018-03-05T20:59:46Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172326328",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172326328"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172326328"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172326328/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 291,
    "side": "RIGHT",
    "in_reply_to_id": 172319158
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172326745",
    "pull_request_review_id": 101325487,
    "id": 172326745,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMyNjc0NQ==",
    "diff_hunk": "@@ -155,11 +156,28 @@ CDBWrapper::~CDBWrapper()\n \n bool CDBWrapper::WriteBatch(CDBBatch& batch, bool fSync)\n {\n+    const bool log_memory = LogAcceptCategory(BCLog::LEVELDB);\n+    double mem_before;\n+    if (log_memory)",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 14,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "done",
    "created_at": "2018-03-05T21:01:14Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172326745",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172326745"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172326745"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172326745/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 161,
    "side": "RIGHT",
    "in_reply_to_id": 172325031
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172326945",
    "pull_request_review_id": 101325691,
    "id": 172326945,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMyNjk0NQ==",
    "diff_hunk": "@@ -155,11 +156,28 @@ CDBWrapper::~CDBWrapper()\n \n bool CDBWrapper::WriteBatch(CDBBatch& batch, bool fSync)\n {\n+    const bool log_memory = LogAcceptCategory(BCLog::LEVELDB);\n+    double mem_before;\n+    if (log_memory)\n+        mem_before = DynamicMemoryUsage() / 1024 / 1024;\n     leveldb::Status status = pdb->Write(fSync ? syncoptions : writeoptions, &batch.batch);\n     dbwrapper_private::HandleError(status);\n+    if (log_memory)\n+        LogPrint(BCLog::LEVELDB, \"WriteBatch memory usage: db=%s, before=%.1fMiB, after=%.1fMiB\\n\",\n+                 m_name, mem_before, DynamicMemoryUsage() / 1024 / 1024);\n     return true;\n }\n \n+size_t CDBWrapper::DynamicMemoryUsage() {\n+    std::string memory;\n+    if (pdb->GetProperty(\"leveldb.approximate-memory-usage\", &memory)) {",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 26,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "done",
    "created_at": "2018-03-05T21:01:54Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172326945",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172326945"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172326945"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172326945/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 173,
    "side": "RIGHT",
    "in_reply_to_id": 172320929
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172327094",
    "pull_request_review_id": 101325868,
    "id": 172327094,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMyNzA5NA==",
    "diff_hunk": "@@ -155,11 +156,28 @@ CDBWrapper::~CDBWrapper()\n \n bool CDBWrapper::WriteBatch(CDBBatch& batch, bool fSync)\n {\n+    const bool log_memory = LogAcceptCategory(BCLog::LEVELDB);\n+    double mem_before;\n+    if (log_memory)\n+        mem_before = DynamicMemoryUsage() / 1024 / 1024;\n     leveldb::Status status = pdb->Write(fSync ? syncoptions : writeoptions, &batch.batch);\n     dbwrapper_private::HandleError(status);\n+    if (log_memory)",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 18,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "done",
    "created_at": "2018-03-05T21:02:29Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172327094",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172327094"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172327094"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172327094/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 165,
    "side": "RIGHT",
    "in_reply_to_id": 172319860
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172327169",
    "pull_request_review_id": 101325964,
    "id": 172327169,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMyNzE2OQ==",
    "diff_hunk": "@@ -155,11 +156,28 @@ CDBWrapper::~CDBWrapper()\n \n bool CDBWrapper::WriteBatch(CDBBatch& batch, bool fSync)\n {\n+    const bool log_memory = LogAcceptCategory(BCLog::LEVELDB);\n+    double mem_before;\n+    if (log_memory)",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 14,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I added braces, which I think is what you mean here?",
    "created_at": "2018-03-05T21:02:48Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172327169",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172327169"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172327169"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172327169/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 161,
    "side": "RIGHT",
    "in_reply_to_id": 172319697
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172327292",
    "pull_request_review_id": 101326095,
    "id": 172327292,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMyNzI5Mg==",
    "diff_hunk": "@@ -155,11 +156,28 @@ CDBWrapper::~CDBWrapper()\n \n bool CDBWrapper::WriteBatch(CDBBatch& batch, bool fSync)\n {\n+    const bool log_memory = LogAcceptCategory(BCLog::LEVELDB);\n+    double mem_before;",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "done (although I think it's fine to keep unused variables uninitialized)",
    "created_at": "2018-03-05T21:03:11Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172327292",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172327292"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172327292"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172327292/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 160,
    "side": "RIGHT",
    "in_reply_to_id": 172319558
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172328151",
    "pull_request_review_id": 101327095,
    "id": 172328151,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMyODE1MQ==",
    "diff_hunk": "@@ -89,6 +89,7 @@ static leveldb::Options GetOptions(size_t nCacheSize)\n }\n \n CDBWrapper::CDBWrapper(const fs::path& path, size_t nCacheSize, bool fMemory, bool fWipe, bool obfuscate)\n+    :m_name(fs::basename(path))",
    "path": "src/dbwrapper.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Added space. I kind of like the short path in the logs because it makes the lines more readable, what if I did the following:\r\n * Add new name parameter to constructor\r\n * Chainstate/blocks databases will pass in \"chainstate\" \"blocks\" etc. to explicitly name the object\r\n * If an explicit name is omitted the path will be logged, and this pattern could be used in #11687 since wallet files are not global like the other databases.\r\n\r\n",
    "created_at": "2018-03-05T21:06:16Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172328151",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172328151"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172328151"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172328151/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 92,
    "side": "RIGHT",
    "in_reply_to_id": 172319216
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172329557",
    "pull_request_review_id": 101328759,
    "id": 172329557,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjMyOTU1Nw==",
    "diff_hunk": "@@ -284,6 +287,9 @@ class CDBWrapper\n \n     bool WriteBatch(CDBBatch& batch, bool fSync = false);\n \n+    // Get an estimate of LevelDB memory usage (in bytes).\n+    size_t DynamicMemoryUsage();",
    "path": "src/dbwrapper.h",
    "position": null,
    "original_position": 15,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nah, IMO it's fine as it is.",
    "created_at": "2018-03-05T21:11:44Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172329557",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172329557"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172329557"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172329557/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 291,
    "side": "RIGHT",
    "in_reply_to_id": 172319158
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172349527",
    "pull_request_review_id": 101351973,
    "id": 172349527,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjM0OTUyNw==",
    "diff_hunk": "@@ -284,6 +287,9 @@ class CDBWrapper\n \n     bool WriteBatch(CDBBatch& batch, bool fSync = false);\n \n+    // Get an estimate of LevelDB memory usage (in bytes).\n+    size_t DynamicMemoryUsage();",
    "path": "src/dbwrapper.h",
    "position": null,
    "original_position": 15,
    "commit_id": "741f0177c53ae536801a67c8ec194d6be3505d2d",
    "original_commit_id": "e7fa704cbaa5de2ca9bfffe560ff6c6fdf751ac0",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> Maybe it's not possible, since GetProperty is not const\r\n\r\nFWIW, it is possible to declare this const, because GetProperty is called on a pointer to a non-const object. Adding const here only makes the pointer address const, not the object located at that address.",
    "created_at": "2018-03-05T22:22:59Z",
    "updated_at": "2018-03-06T05:26:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172349527",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172349527"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12604#discussion_r172349527"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172349527/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 291,
    "side": "RIGHT",
    "in_reply_to_id": 172319158
  }
]