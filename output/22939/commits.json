[
  {
    "sha": "faee767991e3e9485d1a73b8d94483586da05149",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWVlNzY3OTkxZTNlOTQ4NWQxYTczYjhkOTQ0ODM1ODZkYTA1MTQ5",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-08-18T06:50:32Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-10T10:46:33Z"
      },
      "message": "move-only: Move CAddrMan::Check to cpp file\n\nThis speeds up compilation of the whole program because the included\nheader file is smaller.\n\nCan be reviewed with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space",
      "tree": {
        "sha": "6c4084e727727e6a852439823e0560f20eaab761",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6c4084e727727e6a852439823e0560f20eaab761"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faee767991e3e9485d1a73b8d94483586da05149",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgEbwwAymzTTXbZd2FTctUyGQQInWkJL/gbTrSM3EAh1Z7b9Hn3+CT/O8UR3cyu\nz4tCSEgQUnuNOd6oLNL02yhScwXC4nEzhmkXmrkSeTjxMEmrobLKDNV1/Ae2BDlj\nSTZEQvDDn5ao5uA+xgeIdJBnmhtW1AxkHofNGf/ek2xQAtqfbovOPha2FoGJ75cH\n/Mx9H+j8O6HmdPURWayn2J4ezC+i9C8Djd29n154iWpe35VERa9UsrfPeJuEa27T\nfZqcdxdRNCa9VYqaAHHydkjdNF1w9mTe11Kqt9pln/CBvnVCJunKHMcwI3uGVVpO\nugMhwFPpp9f1Rc2hVa4XPKDMECffsg+8IfHt67vaSbTJ8QC6LOZ6LcvVicSt2hmO\nvDRCeAlIo9SMez4G/QIyLb6RkAX8iuOBZV8quXFB+A+JW1R66HEX+EDwnopB6zWt\nUVauM5fUoHoWmVyWKkXuo9FjrFL6Uyc0GOoqXqXawqQy5n9NVUsktXF6p6G4pY11\nAj5cAe10\n=2EKu\n-----END PGP SIGNATURE-----",
        "payload": "tree 6c4084e727727e6a852439823e0560f20eaab761\nparent 053a5fc7d912d597cd6dc7376b479420d1eae1c0\nauthor MarcoFalke <falke.marco@gmail.com> 1629269432 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1631270793 +0200\n\nmove-only: Move CAddrMan::Check to cpp file\n\nThis speeds up compilation of the whole program because the included\nheader file is smaller.\n\nCan be reviewed with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faee767991e3e9485d1a73b8d94483586da05149",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/faee767991e3e9485d1a73b8d94483586da05149",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faee767991e3e9485d1a73b8d94483586da05149/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "053a5fc7d912d597cd6dc7376b479420d1eae1c0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/053a5fc7d912d597cd6dc7376b479420d1eae1c0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/053a5fc7d912d597cd6dc7376b479420d1eae1c0"
      }
    ],
    "stats": {
      "total": 22,
      "additions": 12,
      "deletions": 10
    },
    "files": [
      {
        "sha": "e3763f5aa68f81ea15f7319dfd0a33d131f6a4e8",
        "filename": "src/addrman.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/faee767991e3e9485d1a73b8d94483586da05149/src/addrman.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/faee767991e3e9485d1a73b8d94483586da05149/src/addrman.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/addrman.cpp?ref=faee767991e3e9485d1a73b8d94483586da05149",
        "patch": "@@ -751,6 +751,17 @@ CAddrInfo CAddrMan::Select_(bool newOnly) const\n     }\n }\n \n+void CAddrMan::Check() const\n+{\n+    AssertLockHeld(cs);\n+\n+    const int err = Check_();\n+    if (err) {\n+        LogPrintf(\"ADDRMAN CONSISTENCY CHECK FAILED!!! err=%i\\n\", err);\n+        assert(false);\n+    }\n+}\n+\n int CAddrMan::Check_() const\n {\n     AssertLockHeld(cs);"
      },
      {
        "sha": "ca291d60ab325e4216aa1cdaa8f5b4e4bc74e6e5",
        "filename": "src/addrman.h",
        "status": "modified",
        "additions": 1,
        "deletions": 10,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/faee767991e3e9485d1a73b8d94483586da05149/src/addrman.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/faee767991e3e9485d1a73b8d94483586da05149/src/addrman.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/addrman.h?ref=faee767991e3e9485d1a73b8d94483586da05149",
        "patch": "@@ -392,16 +392,7 @@ class CAddrMan\n     CAddrInfo SelectTriedCollision_() EXCLUSIVE_LOCKS_REQUIRED(cs);\n \n     //! Consistency check\n-    void Check() const EXCLUSIVE_LOCKS_REQUIRED(cs)\n-    {\n-        AssertLockHeld(cs);\n-\n-        const int err = Check_();\n-        if (err) {\n-            LogPrintf(\"ADDRMAN CONSISTENCY CHECK FAILED!!! err=%i\\n\", err);\n-            assert(false);\n-        }\n-    }\n+    void Check() const EXCLUSIVE_LOCKS_REQUIRED(cs);\n \n     //! Perform consistency check. Returns an error code or zero.\n     int Check_() const EXCLUSIVE_LOCKS_REQUIRED(cs);"
      }
    ]
  },
  {
    "sha": "fa038ce9fa483a822c795af5ea6200705dcdb53e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTAzOGNlOWZhNDgzYTgyMmM3OTVhZjVlYTYyMDA3MDVkY2RiNTNl",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-08-18T07:06:30Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-10T10:47:11Z"
      },
      "message": "Refactor: Turn the internal addrman check helper into a forced check",
      "tree": {
        "sha": "5ed18a63c303c4e81e8372d4cb2df34678b196ab",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5ed18a63c303c4e81e8372d4cb2df34678b196ab"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa038ce9fa483a822c795af5ea6200705dcdb53e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUjr0Av/fwnUxI9pGhHHZHXn6AnEnMoSNW1ehcy5h+ur9FVPnFcyd9SkMMI2XKEs\nY40s/qi/iElDaEfvVrS/7/REqFw7O3E7H9C0CeHD/Qs5ej6VrQ8Nw2uj/wJwaAl3\n+tAAGIJDJgnnjzWYfubna99/0JLGZAqNBdG71aOeR7n/QAbEJyX8tJj+qfRD9Qy6\nbsAmJGvDrC08c6j7p34Vw9fM5zBdYoZnCImxkIBD8ZpIyDCWkJ4fnfeAr6mxvDez\naZTO+Vdk+4taqDttfO9hdxGjJFY3ca82C67zUqCZZEF8JMqLFcAmcQq9eHHXaTCF\ng9OUnmG1iFpf+D9FCvu9QZooqXz1YoPp+pnaX2BpfDnDf8Gdz1lIEdM5ajf6e33E\nwopkAGgBbJOxG6lrulkPK24v1pe3R1nwb72l7tlLWFjrE84v+YtjNWpdlL7156KK\n2RQrssomLqnHsgt5oxwEwUFpb5vS1hMKab3pkE8Fpk8PqBzeXq33XeLEc/OZb1CH\n/l3vX5av\n=+Ayr\n-----END PGP SIGNATURE-----",
        "payload": "tree 5ed18a63c303c4e81e8372d4cb2df34678b196ab\nparent faee767991e3e9485d1a73b8d94483586da05149\nauthor MarcoFalke <falke.marco@gmail.com> 1629270390 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1631270831 +0200\n\nRefactor: Turn the internal addrman check helper into a forced check\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa038ce9fa483a822c795af5ea6200705dcdb53e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa038ce9fa483a822c795af5ea6200705dcdb53e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa038ce9fa483a822c795af5ea6200705dcdb53e/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "faee767991e3e9485d1a73b8d94483586da05149",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faee767991e3e9485d1a73b8d94483586da05149",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/faee767991e3e9485d1a73b8d94483586da05149"
      }
    ],
    "stats": {
      "total": 18,
      "additions": 9,
      "deletions": 9
    },
    "files": [
      {
        "sha": "bfae46423c9c5406f24ca3f53bcb9e79b8250395",
        "filename": "src/addrman.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa038ce9fa483a822c795af5ea6200705dcdb53e/src/addrman.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa038ce9fa483a822c795af5ea6200705dcdb53e/src/addrman.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/addrman.cpp?ref=fa038ce9fa483a822c795af5ea6200705dcdb53e",
        "patch": "@@ -755,21 +755,21 @@ void CAddrMan::Check() const\n {\n     AssertLockHeld(cs);\n \n-    const int err = Check_();\n+    // Run consistency checks 1 in m_consistency_check_ratio times if enabled\n+    if (m_consistency_check_ratio == 0) return;\n+    if (insecure_rand.randrange(m_consistency_check_ratio) >= 1) return;\n+\n+    const int err{ForceCheckAddrman()};\n     if (err) {\n         LogPrintf(\"ADDRMAN CONSISTENCY CHECK FAILED!!! err=%i\\n\", err);\n         assert(false);\n     }\n }\n \n-int CAddrMan::Check_() const\n+int CAddrMan::ForceCheckAddrman() const\n {\n     AssertLockHeld(cs);\n \n-    // Run consistency checks 1 in m_consistency_check_ratio times if enabled\n-    if (m_consistency_check_ratio == 0) return 0;\n-    if (insecure_rand.randrange(m_consistency_check_ratio) >= 1) return 0;\n-\n     LogPrint(BCLog::ADDRMAN, \"Addrman checks started: new %i, tried %i, total %u\\n\", nNew, nTried, vRandom.size());\n \n     std::unordered_set<int> setTried;"
      },
      {
        "sha": "031aa988fcf0ec1e8098ad74bba0d6a9d3c5dff7",
        "filename": "src/addrman.h",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa038ce9fa483a822c795af5ea6200705dcdb53e/src/addrman.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa038ce9fa483a822c795af5ea6200705dcdb53e/src/addrman.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/addrman.h?ref=fa038ce9fa483a822c795af5ea6200705dcdb53e",
        "patch": "@@ -391,11 +391,11 @@ class CAddrMan\n     //! Return a random to-be-evicted tried table address.\n     CAddrInfo SelectTriedCollision_() EXCLUSIVE_LOCKS_REQUIRED(cs);\n \n-    //! Consistency check\n+    //! Consistency check, taking into account m_consistency_check_ratio.\n     void Check() const EXCLUSIVE_LOCKS_REQUIRED(cs);\n \n-    //! Perform consistency check. Returns an error code or zero.\n-    int Check_() const EXCLUSIVE_LOCKS_REQUIRED(cs);\n+    //! Perform consistency check, regardless of m_consistency_check_ratio. Returns an error code or zero.\n+    int ForceCheckAddrman() const EXCLUSIVE_LOCKS_REQUIRED(cs);\n \n     /**\n      * Return all or many randomly selected addresses, optionally by network."
      }
    ]
  },
  {
    "sha": "fa6e161a35d22d806591712f82179b08ffbf51d8",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTZlMTYxYTM1ZDIyZDgwNjU5MTcxMmY4MjE3OWIwOGZmYmY1MWQ4",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-10T13:26:39Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-10T13:35:52Z"
      },
      "message": "fuzz: Reset addrman when consistency check fails",
      "tree": {
        "sha": "a27614770ac97c22340d4a215a3bf2c9abb24fb5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a27614770ac97c22340d4a215a3bf2c9abb24fb5"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa6e161a35d22d806591712f82179b08ffbf51d8",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUg7fwv/ZnIX9vLSDnbLw5bCeHMGQO034fEn/B+kvpuKefhGN9Nt1B8Ve3HCeJYP\nGDU7GfnO+Gml6dVVFQiVnDtMXquuN/J9xMUnmJzbTOB8A0MG2FBFCh16fCYvEsZX\nPTgTXYFnEbR1j55QVM6buNR6/tEjcZu75DzQe9eSxUtiSQAy1EKnJydvK1wxxMvw\nA9u6jj7xVseJFK8nOVdFMPKj/sae1uRiDPQYRE1U9PWdKup6JTk0TGesLXJLAwt4\nUM9EtCs5sxuRV6wr5ajDSp+eptUajuPnS5EGuOyFoY1LBDjGaKH3ChIAuNftITFN\nvAGu7jnbc0ar+Q8sdtE1A5INV6ey+TmdjjQ9tzZTnOigTnRAgwaB20Qu7XTgvaCV\n1uq8iKRNJ1Zhat0ibaYFXGijgrNh8v5kGkWLa/UdaLiW92O9AjSB95KrH+hmbA2F\n+z1squ4EVKdKkIYrsJyClb+WX/6hO3jNemkciV5snYsLL3i2Risqs1V69d99J7+S\nwoKAyfPH\n=GzQL\n-----END PGP SIGNATURE-----",
        "payload": "tree a27614770ac97c22340d4a215a3bf2c9abb24fb5\nparent fa038ce9fa483a822c795af5ea6200705dcdb53e\nauthor MarcoFalke <falke.marco@gmail.com> 1631280399 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1631280952 +0200\n\nfuzz: Reset addrman when consistency check fails\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa6e161a35d22d806591712f82179b08ffbf51d8",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa6e161a35d22d806591712f82179b08ffbf51d8",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa6e161a35d22d806591712f82179b08ffbf51d8/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa038ce9fa483a822c795af5ea6200705dcdb53e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa038ce9fa483a822c795af5ea6200705dcdb53e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa038ce9fa483a822c795af5ea6200705dcdb53e"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 6,
      "deletions": 2
    },
    "files": [
      {
        "sha": "5d978c9acb7176840300302ec8d9527d58ab9595",
        "filename": "src/test/fuzz/addrman.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa6e161a35d22d806591712f82179b08ffbf51d8/src/test/fuzz/addrman.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa6e161a35d22d806591712f82179b08ffbf51d8/src/test/fuzz/addrman.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/fuzz/addrman.cpp?ref=fa6e161a35d22d806591712f82179b08ffbf51d8",
        "patch": "@@ -35,6 +35,9 @@ class CAddrManDeterministic : public CAddrMan\n         WITH_LOCK(cs, insecure_rand = FastRandomContext{ConsumeUInt256(fuzzed_data_provider)});\n     }\n \n+    using CAddrMan::ForceCheckAddrman;\n+    using CAddrMan::cs;\n+\n     /**\n      * Generate a random address. Always returns a valid address.\n      */\n@@ -238,6 +241,9 @@ FUZZ_TARGET_INIT(addrman, initialize_addrman)\n         ds.SetVersion(ser_version);\n         try {\n             ds >> *addr_man_ptr;\n+            if (0 != WITH_LOCK(addr_man_ptr->cs, return addr_man_ptr->ForceCheckAddrman())) {\n+                throw std::ios_base::failure{\"Reset addrman after consistency check failed\"};\n+            }\n         } catch (const std::ios_base::failure&) {\n             addr_man_ptr = std::make_unique<CAddrManDeterministic>(asmap, fuzzed_data_provider);\n         }"
      },
      {
        "sha": "b52e105a33ef083521d6853716ee4220595fe959",
        "filename": "test/sanitizer_suppressions/ubsan",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa6e161a35d22d806591712f82179b08ffbf51d8/test/sanitizer_suppressions/ubsan",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa6e161a35d22d806591712f82179b08ffbf51d8/test/sanitizer_suppressions/ubsan",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/sanitizer_suppressions/ubsan?ref=fa6e161a35d22d806591712f82179b08ffbf51d8",
        "patch": "@@ -5,8 +5,6 @@\n # names can be used.\n # See https://github.com/google/sanitizers/issues/1364\n signed-integer-overflow:txmempool.cpp\n-# nLastSuccess read from peers.dat might cause an overflow in IsTerrible\n-signed-integer-overflow:addrman.cpp\n # https://github.com/bitcoin/bitcoin/pull/21798#issuecomment-829180719\n signed-integer-overflow:policy/feerate.cpp\n "
      }
    ]
  },
  {
    "sha": "faf9bd337460ecc9ecd31126bab85fff12616728",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWY5YmQzMzc0NjBlY2M5ZWNkMzExMjZiYWI4NWZmZjEyNjE2NzI4",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-11T07:07:45Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-11T07:08:00Z"
      },
      "message": "fuzz: Check addrman after addrman fuzz target",
      "tree": {
        "sha": "fe204ba76706aa3f341f7634b46a6fc6b3be72e5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fe204ba76706aa3f341f7634b46a6fc6b3be72e5"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faf9bd337460ecc9ecd31126bab85fff12616728",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgCrAv9GfAWdha6zYMDk/eSBRKr/sGN3BSrQ4+sPM3Qr/GwUCHmYxPvcBQzXZYm\nXwgUN701mudc3YnKJPe/eQSol0u2w/sKOTuvaccElwEOBtoDagi3fP4RlXe0ZzGW\nFsxsUypkGs2d7Zv1WxGld2AVVLhNJzB9h3z6qnb2S1SnqS4t9sxeLgSh6/BKjeHg\nHS3ugDiIGt2fVrDMx4ZO2d0yZzcfjCNKxfYL30zoSdhQJF5vk6u286fPsoKcAh+U\nVNj8Y5PD+iggp1QmwF8/IDeze3fUslgzoDtwT2P5NGGQEYDmu5t2vQkv0ruW4v/m\nwIqljiGpQ3ZGhSL6cWEiRh2YKhSA2S/lAd34YxmfQ5VESiLiVhhWf4f7Zl0fC2zj\nKqLBb8XrwEYU8iJ74XQ56SlvroGGCKU/03j160SxvCgsILZjZ1PUloOYVjc9mLnj\nnq8x4G2Fjzn3/J5aL8r/DkxdLZqzt/VMrliExH3VYg9mevD3yQZmtjSjLjjsflSm\npVv5SC7u\n=5tKb\n-----END PGP SIGNATURE-----",
        "payload": "tree fe204ba76706aa3f341f7634b46a6fc6b3be72e5\nparent fa6e161a35d22d806591712f82179b08ffbf51d8\nauthor MarcoFalke <falke.marco@gmail.com> 1631344065 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1631344080 +0200\n\nfuzz: Check addrman after addrman fuzz target\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faf9bd337460ecc9ecd31126bab85fff12616728",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/faf9bd337460ecc9ecd31126bab85fff12616728",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faf9bd337460ecc9ecd31126bab85fff12616728/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa6e161a35d22d806591712f82179b08ffbf51d8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa6e161a35d22d806591712f82179b08ffbf51d8",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa6e161a35d22d806591712f82179b08ffbf51d8"
      }
    ],
    "stats": {
      "total": 1,
      "additions": 1,
      "deletions": 0
    },
    "files": [
      {
        "sha": "ddcb11287f6e591ab6329d3a6bd473b491effe8c",
        "filename": "src/test/fuzz/addrman.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/faf9bd337460ecc9ecd31126bab85fff12616728/src/test/fuzz/addrman.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/faf9bd337460ecc9ecd31126bab85fff12616728/src/test/fuzz/addrman.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/fuzz/addrman.cpp?ref=faf9bd337460ecc9ecd31126bab85fff12616728",
        "patch": "@@ -306,6 +306,7 @@ FUZZ_TARGET_INIT(addrman, initialize_addrman)\n     (void)const_addr_man.size();\n     CDataStream data_stream(SER_NETWORK, PROTOCOL_VERSION);\n     data_stream << const_addr_man;\n+    assert(0 == WITH_LOCK(addr_man_ptr->cs, return addr_man_ptr->ForceCheckAddrman()));\n }\n \n // Check that serialize followed by unserialize produces the same addrman."
      }
    ]
  }
]