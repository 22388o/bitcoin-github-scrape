[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701448360",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20047#issuecomment-701448360",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20047",
    "id": 701448360,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTQ0ODM2MA==",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-30T15:01:41Z",
    "updated_at": "2020-09-30T15:04:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "Note that the test methods `last_block_equals()` and `last_header_equals()` are still needed for checking that the concerned message _didn't_ arrive within a certain time window:\r\nhttps://github.com/bitcoin/bitcoin/blob/72affcb16cad45bd9e08ca163b2147fd01b84b70/test/functional/p2p_fingerprint.py#L123-L131\r\nUnfortunately I couldn't figure out how to use the `wait_for_{block,header}` functions for that -- using something like\r\n\r\n```\r\nassert_raises(AssertionError, lambda: node0.wait_for_block(stale_hash, timeout=3))\r\n```\r\nworks, but still prints out the assertion error, clogging up the log:\r\n```\r\n2020-09-30T15:00:20.316000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_hh8usu8u\r\n2020-09-30T15:00:27.134000Z TestFramework.utils (ERROR): wait_until() failed. Predicate: ''''\r\n        def test_function():\r\n            if check_connected:\r\n                assert self.is_connected\r\n            return test_function_in()\r\n'''\r\n2020-09-30T15:00:30.150000Z TestFramework.utils (ERROR): wait_until() failed. Predicate: ''''\r\n        def test_function():\r\n            if check_connected:\r\n                assert self.is_connected\r\n            return test_function_in()\r\n'''\r\n2020-09-30T15:00:30.252000Z TestFramework (INFO): Stopping nodes\r\n2020-09-30T15:00:30.354000Z TestFramework (INFO): Cleaning up /tmp/bitcoin_func_test_hh8usu8u on exit\r\n2020-09-30T15:00:30.355000Z TestFramework (INFO): Tests successful\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701448360/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703234004",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20047#issuecomment-703234004",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20047",
    "id": 703234004,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzIzNDAwNA==",
    "user": {
      "login": "guggero",
      "id": 1008879,
      "node_id": "MDQ6VXNlcjEwMDg4Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008879?u=2c337f92b7dbc69b8aaff7885926f2bc1865db0d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/guggero",
      "html_url": "https://github.com/guggero",
      "followers_url": "https://api.github.com/users/guggero/followers",
      "following_url": "https://api.github.com/users/guggero/following{/other_user}",
      "gists_url": "https://api.github.com/users/guggero/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/guggero/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/guggero/subscriptions",
      "organizations_url": "https://api.github.com/users/guggero/orgs",
      "repos_url": "https://api.github.com/users/guggero/repos",
      "events_url": "https://api.github.com/users/guggero/events{/privacy}",
      "received_events_url": "https://api.github.com/users/guggero/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-04T10:20:33Z",
    "updated_at": "2020-10-04T10:20:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK 136d96b7.\r\n\r\nMaybe we should inline the two methods `last_block_equals` and `last_header_equals` because they are only used with a negation currently.\r\nThat means the test would still pass if for some reason `node.last_message.get(\"block\")` is falsey. What should be tested in the `assert not self.last_block_equals()` is that the last message's block was available but the hash didn't match.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703234004/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703249363",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20047#issuecomment-703249363",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20047",
    "id": 703249363,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzI0OTM2Mw==",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-04T12:36:27Z",
    "updated_at": "2020-10-04T12:36:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "@guggero: Thanks a lot for reviewing and your inputs, good points!\r\nI think that actually we can get rid of the functions `last_{block,header}_equals` completely (i.e. not even needing to inline them), as a check ensuring that _no_ blocks or header message actually arrives after requesting very old blocks/headers should be sufficient. That is, removing \"blocks\"/\"headers\" from the last_message dictionary before the request, and after the waiting time, checking that it hasn't been added in-between. That should do it in my opinion.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703249363/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703253348",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20047#issuecomment-703253348",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20047",
    "id": 703253348,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzI1MzM0OA==",
    "user": {
      "login": "guggero",
      "id": 1008879,
      "node_id": "MDQ6VXNlcjEwMDg4Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008879?u=2c337f92b7dbc69b8aaff7885926f2bc1865db0d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/guggero",
      "html_url": "https://github.com/guggero",
      "followers_url": "https://api.github.com/users/guggero/followers",
      "following_url": "https://api.github.com/users/guggero/following{/other_user}",
      "gists_url": "https://api.github.com/users/guggero/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/guggero/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/guggero/subscriptions",
      "organizations_url": "https://api.github.com/users/guggero/orgs",
      "repos_url": "https://api.github.com/users/guggero/repos",
      "events_url": "https://api.github.com/users/guggero/events{/privacy}",
      "received_events_url": "https://api.github.com/users/guggero/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-04T13:09:37Z",
    "updated_at": "2020-10-04T13:09:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "tACK 521b833a.\r\n\r\nNice change with this additional commit, I agree that this makes the test even more precise while removing more code than it adds.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703253348/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/704270106",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20047#issuecomment-704270106",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20047",
    "id": 704270106,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDI3MDEwNg==",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-06T13:30:15Z",
    "updated_at": "2020-10-06T13:30:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "Force-pushed with the suggestions from MarcoFalke (https://github.com/bitcoin/bitcoin/pull/20047#discussion_r499482654, https://github.com/bitcoin/bitcoin/pull/20047#discussion_r499482805).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/704270106/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/730456828",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20047#issuecomment-730456828",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20047",
    "id": 730456828,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMDQ1NjgyOA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-19T15:37:50Z",
    "updated_at": "2020-11-19T15:37:50Z",
    "author_association": "MEMBER",
    "body": "pm ACK 6b56c1f4d0d5857d9d61a81dc96db1b603c368b5\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/730456828/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499482654",
    "pull_request_review_id": 501900996,
    "id": 499482654,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ4MjY1NA==",
    "diff_hunk": "@@ -121,14 +108,18 @@ def run_test(self):\n         node0.sync_with_ping()\n \n         # Request for very old stale block should now fail\n+        with p2p_lock:\n+            node0.last_message.pop(\"block\", None)",
    "path": "test/functional/p2p_fingerprint.py",
    "position": 55,
    "original_position": 48,
    "commit_id": "6b56c1f4d0d5857d9d61a81dc96db1b603c368b5",
    "original_commit_id": "521b833a3261eb6eb97d0881350df20a90a12b22",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think this can replace the section \"# Send getdata & getheaders to refresh last received getheader message\", no?",
    "created_at": "2020-10-05T10:00:52Z",
    "updated_at": "2020-10-21T13:32:01Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20047#discussion_r499482654",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20047",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499482654"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20047#discussion_r499482654"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20047"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499482654/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 107,
    "original_line": 107,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499482805",
    "pull_request_review_id": 501900996,
    "id": 499482805,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ4MjgwNQ==",
    "diff_hunk": "@@ -121,14 +108,18 @@ def run_test(self):\n         node0.sync_with_ping()\n \n         # Request for very old stale block should now fail\n+        with p2p_lock:\n+            node0.last_message.pop(\"block\", None)\n         self.send_block_request(stale_hash, node0)\n         time.sleep(3)",
    "path": "test/functional/p2p_fingerprint.py",
    "position": null,
    "original_position": 50,
    "commit_id": "6b56c1f4d0d5857d9d61a81dc96db1b603c368b5",
    "original_commit_id": "521b833a3261eb6eb97d0881350df20a90a12b22",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "unrelated: why not sync_with_ping?",
    "created_at": "2020-10-05T10:01:07Z",
    "updated_at": "2020-10-21T13:32:01Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20047#discussion_r499482805",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20047",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499482805"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20047#discussion_r499482805"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20047"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499482805/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 114,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500276177",
    "pull_request_review_id": 502959639,
    "id": 500276177,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI3NjE3Nw==",
    "diff_hunk": "@@ -121,14 +108,18 @@ def run_test(self):\n         node0.sync_with_ping()\n \n         # Request for very old stale block should now fail\n+        with p2p_lock:\n+            node0.last_message.pop(\"block\", None)",
    "path": "test/functional/p2p_fingerprint.py",
    "position": 55,
    "original_position": 48,
    "commit_id": "6b56c1f4d0d5857d9d61a81dc96db1b603c368b5",
    "original_commit_id": "521b833a3261eb6eb97d0881350df20a90a12b22",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Indeed, done. The \"node0.sync_with_ping()\" is still needed though to ensure that the newly generated block in the previous section \"Longest chain is extended so stale is much older than chain tip\" has been already received and doesn't interfere with the request for the old stale block test.",
    "created_at": "2020-10-06T13:29:02Z",
    "updated_at": "2020-10-21T13:32:01Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20047#discussion_r500276177",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20047",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500276177"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20047#discussion_r500276177"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20047"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500276177/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 107,
    "original_line": 107,
    "side": "RIGHT",
    "in_reply_to_id": 499482654
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500276260",
    "pull_request_review_id": 502959818,
    "id": 500276260,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI3NjI2MA==",
    "diff_hunk": "@@ -121,14 +108,18 @@ def run_test(self):\n         node0.sync_with_ping()\n \n         # Request for very old stale block should now fail\n+        with p2p_lock:\n+            node0.last_message.pop(\"block\", None)\n         self.send_block_request(stale_hash, node0)\n         time.sleep(3)",
    "path": "test/functional/p2p_fingerprint.py",
    "position": null,
    "original_position": 50,
    "commit_id": "6b56c1f4d0d5857d9d61a81dc96db1b603c368b5",
    "original_commit_id": "521b833a3261eb6eb97d0881350df20a90a12b22",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good idea, done. It's always nice to get rid of time.sleep(...) constructs that are not really needed.",
    "created_at": "2020-10-06T13:29:10Z",
    "updated_at": "2020-10-21T13:32:01Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20047#discussion_r500276260",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20047",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500276260"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20047#discussion_r500276260"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20047"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500276260/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 114,
    "side": "RIGHT",
    "in_reply_to_id": 499482805
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509244801",
    "pull_request_review_id": 513632478,
    "id": 509244801,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTI0NDgwMQ==",
    "diff_hunk": "@@ -109,24 +98,23 @@ def run_test(self):\n \n         # Longest chain is extended so stale is much older than chain tip\n         self.nodes[0].setmocktime(0)\n-        tip = self.nodes[0].generatetoaddress(1, self.nodes[0].get_deterministic_priv_key().address)[0]\n+        self.nodes[0].generatetoaddress(1, self.nodes[0].get_deterministic_priv_key().address)[0]",
    "path": "test/functional/p2p_fingerprint.py",
    "position": null,
    "original_position": 32,
    "commit_id": "6b56c1f4d0d5857d9d61a81dc96db1b603c368b5",
    "original_commit_id": "8e4fd958e890b571a5e870f24d73b8b43c8915b8",
    "user": {
      "login": "guggero",
      "id": 1008879,
      "node_id": "MDQ6VXNlcjEwMDg4Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008879?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/guggero",
      "html_url": "https://github.com/guggero",
      "followers_url": "https://api.github.com/users/guggero/followers",
      "following_url": "https://api.github.com/users/guggero/following{/other_user}",
      "gists_url": "https://api.github.com/users/guggero/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/guggero/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/guggero/subscriptions",
      "organizations_url": "https://api.github.com/users/guggero/orgs",
      "repos_url": "https://api.github.com/users/guggero/repos",
      "events_url": "https://api.github.com/users/guggero/events{/privacy}",
      "received_events_url": "https://api.github.com/users/guggero/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The array index selection at the end of the line (`[0]`) isn't needed anymore if return value isn't stored in a variable.",
    "created_at": "2020-10-21T12:42:45Z",
    "updated_at": "2020-10-21T13:32:01Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20047#discussion_r509244801",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20047",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509244801"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20047#discussion_r509244801"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20047"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509244801/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 101,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509286770",
    "pull_request_review_id": 513685739,
    "id": 509286770,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTI4Njc3MA==",
    "diff_hunk": "@@ -109,24 +98,23 @@ def run_test(self):\n \n         # Longest chain is extended so stale is much older than chain tip\n         self.nodes[0].setmocktime(0)\n-        tip = self.nodes[0].generatetoaddress(1, self.nodes[0].get_deterministic_priv_key().address)[0]\n+        self.nodes[0].generatetoaddress(1, self.nodes[0].get_deterministic_priv_key().address)[0]",
    "path": "test/functional/p2p_fingerprint.py",
    "position": null,
    "original_position": 32,
    "commit_id": "6b56c1f4d0d5857d9d61a81dc96db1b603c368b5",
    "original_commit_id": "8e4fd958e890b571a5e870f24d73b8b43c8915b8",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good find, thanks! Fixed.",
    "created_at": "2020-10-21T13:33:30Z",
    "updated_at": "2020-10-21T13:33:30Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20047#discussion_r509286770",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20047",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509286770"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20047#discussion_r509286770"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20047"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509286770/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 101,
    "side": "RIGHT",
    "in_reply_to_id": 509244801
  }
]