EthanHeilman,2021-06-07 17:34:35,I'm putting this PR into draft until I get a chance to write more unittests and fix the linter issue.,https://github.com/bitcoin/bitcoin/pull/22158#issuecomment-856127623,856127623,
sipa,2021-06-05 02:38:51,Won't this fail on systems without rdrand?,https://github.com/bitcoin/bitcoin/pull/22158#discussion_r645929210,645929210,src/test/hwrand_tests.cpp
EthanHeilman,2021-06-05 02:52:55,"Yep on older x86 CPUs that don't support rdseed/rdrand, good catch!  Let me add a check for `g_rdrand_supported` and `g_rdseed_supported`",https://github.com/bitcoin/bitcoin/pull/22158#discussion_r645930501,645930501,src/test/hwrand_tests.cpp
laanwj,2021-06-07 13:34:16,Do we really care about x86 32 bit here? We don't build binaries for it anymore. I'm also not sure if there are actually existing x86 32-bit CPUs that support these instructions.,https://github.com/bitcoin/bitcoin/pull/22158#discussion_r646592460,646592460,src/random.cpp
laanwj,2021-06-07 13:37:13,This doesn't seem like a good TODO to leave :smile: ,https://github.com/bitcoin/bitcoin/pull/22158#discussion_r646594913,646594913,src/random.cpp
EthanHeilman,2021-06-07 17:17:42,"OMG! I must be going blind from staring at code too long. How did I forget to delete that comment?\nAs penance, let me write some unittests specifically targeting `GetRdSeed` and `GetRdRand`.",https://github.com/bitcoin/bitcoin/pull/22158#discussion_r646793108,646793108,src/random.cpp
EthanHeilman,2021-06-07 17:23:47,I have 32-bit x86 support only because bitcoin currently supports 32-bit x86 rd instructions and I am just extending what already exists to the MSVC compiler. If it is decided that bitcoin-core will no longer target 32-bit x86 than it seems reasonable to remove.,https://github.com/bitcoin/bitcoin/pull/22158#discussion_r646796939,646796939,src/random.cpp
EthanHeilman,2021-06-07 17:31:21,I can put together a PR which removes 32-bit rdrand and rdseed support if that is something you think would be mergeable.,https://github.com/bitcoin/bitcoin/pull/22158#discussion_r646802221,646802221,src/random.cpp
