[
  {
    "sha": "4c8212802c5900158d03c749667dc6adef48a618",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0YzgyMTI4MDJjNTkwMDE1OGQwM2M3NDk2NjdkYzZhZGVmNDhhNjE4",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2014-01-28T10:22:42Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2014-01-28T10:27:11Z"
      },
      "message": "add header, which includes default values for certain parameters\n\n- most of these are used in core and GUI, so it made sense to bring this\n  together, as it removes the need to keep 2 places in sync\n- also adds a new check to now set a -dbcache greater than what is\n  allowed for x86 and x64 platforms",
      "tree": {
        "sha": "4ebf6776b1f659d1c4dd54c587d7571b3baddd6f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4ebf6776b1f659d1c4dd54c587d7571b3baddd6f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4c8212802c5900158d03c749667dc6adef48a618",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4c8212802c5900158d03c749667dc6adef48a618",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/4c8212802c5900158d03c749667dc6adef48a618",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4c8212802c5900158d03c749667dc6adef48a618/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "f9355f1f2bfb1263f5e739fb7eb149a4ba926d36",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f9355f1f2bfb1263f5e739fb7eb149a4ba926d36",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f9355f1f2bfb1263f5e739fb7eb149a4ba926d36"
      }
    ],
    "stats": {
      "total": 65,
      "additions": 48,
      "deletions": 17
    },
    "files": [
      {
        "sha": "7a830e04a24f4a510de52562ee9e95d2145adc9f",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c8212802c5900158d03c749667dc6adef48a618/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c8212802c5900158d03c749667dc6adef48a618/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=4c8212802c5900158d03c749667dc6adef48a618",
        "patch": "@@ -40,6 +40,7 @@ BITCOIN_CORE_H = \\\n   core.h \\\n   crypter.h \\\n   db.h \\\n+  defaultvalues.h \\\n   hash.h \\\n   init.h \\\n   key.h \\"
      },
      {
        "sha": "7526e8b4b464768f907158f515edbafe07a5a711",
        "filename": "src/defaultvalues.h",
        "status": "added",
        "additions": 30,
        "deletions": 0,
        "changes": 30,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c8212802c5900158d03c749667dc6adef48a618/src/defaultvalues.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c8212802c5900158d03c749667dc6adef48a618/src/defaultvalues.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/defaultvalues.h?ref=4c8212802c5900158d03c749667dc6adef48a618",
        "patch": "@@ -0,0 +1,30 @@\n+// Copyright (c) 2009-2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef DEFAULTVALUES_H\n+#define DEFAULTVALUES_H\n+\n+#include <stdint.h>\n+\n+// This file covers our default values for command-line arguments that are used by core and GUI\n+\n+// -dbcache\n+static const int nDefaultDbCache = 25;\n+// max. -dbcache\n+static const int nMaxDbCache = sizeof(void*) > 4 ? 4096 : 1024;\n+\n+// -par\n+static const int nDefaultPar = 0;\n+\n+// -paytxfee\n+static const int64_t nDefaultTransactionFee = 0;\n+\n+// -upnp\n+#ifdef USE_UPNP\n+static const bool fDefaultUpnp = true;\n+#else\n+static const bool fDefaultUpnp = false;\n+#endif\n+\n+#endif // DEFAULTVALUES_H"
      },
      {
        "sha": "0c1d37ccca227414e9c45419a9a379e9a58eb1c0",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 3,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c8212802c5900158d03c749667dc6adef48a618/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c8212802c5900158d03c749667dc6adef48a618/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=4c8212802c5900158d03c749667dc6adef48a618",
        "patch": "@@ -11,6 +11,7 @@\n \n #include \"addrman.h\"\n #include \"checkpoints.h\"\n+#include \"defaultvalues.h\"\n #include \"main.h\"\n #include \"miner.h\"\n #include \"net.h\"\n@@ -196,7 +197,7 @@ std::string HelpMessage(HelpMessageMode hmm)\n     strUsage += \"  -testnet               \" + _(\"Use the test network\") + \"\\n\";\n     strUsage += \"  -pid=<file>            \" + _(\"Specify pid file (default: bitcoind.pid)\") + \"\\n\";\n     strUsage += \"  -gen                   \" + _(\"Generate coins (default: 0)\") + \"\\n\";\n-    strUsage += \"  -dbcache=<n>           \" + _(\"Set database cache size in megabytes (default: 25)\") + \"\\n\";\n+    strUsage += \"  -dbcache=<n>           \" + strprintf(_(\"Set database cache size in megabytes (default: %d)\"), nDefaultDbCache) + \"\\n\";\n     strUsage += \"  -timeout=<n>           \" + _(\"Specify connection timeout in milliseconds (default: 5000)\") + \"\\n\";\n     strUsage += \"  -proxy=<ip:port>       \" + _(\"Connect through SOCKS proxy\") + \"\\n\";\n     strUsage += \"  -socks=<n>             \" + _(\"Select SOCKS version for -proxy (4 or 5, default: 5)\") + \"\\n\";\n@@ -472,7 +473,7 @@ bool AppInit2(boost::thread_group& threadGroup)\n     Checkpoints::fEnabled = GetBoolArg(\"-checkpoints\", true);\n \n     // -par=0 means autodetect, but nScriptCheckThreads==0 means no concurrency\n-    nScriptCheckThreads = GetArg(\"-par\", 0);\n+    nScriptCheckThreads = GetArg(\"-par\", nDefaultPar);\n     if (nScriptCheckThreads <= 0)\n         nScriptCheckThreads += boost::thread::hardware_concurrency();\n     if (nScriptCheckThreads <= 1)\n@@ -755,9 +756,11 @@ bool AppInit2(boost::thread_group& threadGroup)\n     }\n \n     // cache size calculations\n-    size_t nTotalCache = GetArg(\"-dbcache\", 25) << 20;\n+    size_t nTotalCache = GetArg(\"-dbcache\", nDefaultDbCache) << 20;\n     if (nTotalCache < (1 << 22))\n         nTotalCache = (1 << 22); // total cache cannot be less than 4 MiB\n+    else if (nTotalCache > (nMaxDbCache << 20))\n+        nTotalCache = nMaxDbCache << 20; // total cache cannot be greater than 1024 MiB (x86) or 4096 MiB (x64)\n     size_t nBlockTreeDBCache = nTotalCache / 8;\n     if (nBlockTreeDBCache > (1 << 21) && !GetBoolArg(\"-txindex\", false))\n         nBlockTreeDBCache = (1 << 21); // block tree db cache shouldn't be larger than 2 MiB"
      },
      {
        "sha": "193ffca48b1d28d3efba3bef66a72eadc20097b7",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 3,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c8212802c5900158d03c749667dc6adef48a618/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c8212802c5900158d03c749667dc6adef48a618/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=4c8212802c5900158d03c749667dc6adef48a618",
        "patch": "@@ -12,6 +12,7 @@\n #include \"addrman.h\"\n #include \"chainparams.h\"\n #include \"core.h\"\n+#include \"defaultvalues.h\"\n #include \"ui_interface.h\"\n \n #ifdef WIN32\n@@ -1755,10 +1756,8 @@ void StartNode(boost::thread_group& threadGroup)\n     else\n         threadGroup.create_thread(boost::bind(&TraceThread<void (*)()>, \"dnsseed\", &ThreadDNSAddressSeed));\n \n-#ifdef USE_UPNP\n     // Map ports with UPnP\n-    MapPort(GetBoolArg(\"-upnp\", USE_UPNP));\n-#endif\n+    MapPort(GetBoolArg(\"-upnp\", fDefaultUpnp));\n \n     // Send and receive from sockets, accept connections\n     threadGroup.create_thread(boost::bind(&TraceThread<void (*)()>, \"net\", &ThreadSocketHandler));"
      },
      {
        "sha": "e20d8d500405db07d4e3d002457d6c66cdb96d17",
        "filename": "src/qt/optionsdialog.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c8212802c5900158d03c749667dc6adef48a618/src/qt/optionsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c8212802c5900158d03c749667dc6adef48a618/src/qt/optionsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsdialog.cpp?ref=4c8212802c5900158d03c749667dc6adef48a618",
        "patch": "@@ -14,6 +14,7 @@\n #include \"monitoreddatamapper.h\"\n #include \"optionsmodel.h\"\n \n+#include \"defaultvalues.h\"\n #include \"netbase.h\"\n \n #include <QDir>\n@@ -33,7 +34,7 @@ OptionsDialog::OptionsDialog(QWidget *parent) :\n     GUIUtil::restoreWindowGeometry(\"nOptionsDialogWindow\", this->size(), this);\n \n     /* Main elements init */\n-    ui->databaseCache->setMaximum(sizeof(void*) > 4 ? 4096 : 1024);\n+    ui->databaseCache->setMaximum(nMaxDbCache);\n \n     /* Network elements init */\n #ifndef USE_UPNP"
      },
      {
        "sha": "9439880f55da94b6d04a76e20151200cc94fc774",
        "filename": "src/qt/optionsmodel.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 8,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c8212802c5900158d03c749667dc6adef48a618/src/qt/optionsmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c8212802c5900158d03c749667dc6adef48a618/src/qt/optionsmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsmodel.cpp?ref=4c8212802c5900158d03c749667dc6adef48a618",
        "patch": "@@ -9,6 +9,7 @@\n #include \"optionsmodel.h\"\n \n #include \"bitcoinunits.h\"\n+#include \"defaultvalues.h\"\n #include \"guiutil.h\"\n \n #include \"init.h\"\n@@ -72,26 +73,22 @@ void OptionsModel::Init()\n     // Main\n #ifdef ENABLE_WALLET\n     if (!settings.contains(\"nTransactionFee\"))\n-        settings.setValue(\"nTransactionFee\", 0);\n+        settings.setValue(\"nTransactionFee\", nDefaultTransactionFee);\n #endif\n \n     if (!settings.contains(\"nDatabaseCache\"))\n-        settings.setValue(\"nDatabaseCache\", 25);\n+        settings.setValue(\"nDatabaseCache\", nDefaultDbCache);\n     if (!SoftSetArg(\"-dbcache\", settings.value(\"nDatabaseCache\").toString().toStdString()))\n         strOverriddenByCommandLine += \"-dbcache \";\n \n     if (!settings.contains(\"nThreadsScriptVerif\"))\n-        settings.setValue(\"nThreadsScriptVerif\", 0);\n+        settings.setValue(\"nThreadsScriptVerif\", nDefaultPar);\n     if (!SoftSetArg(\"-par\", settings.value(\"nThreadsScriptVerif\").toString().toStdString()))\n         strOverriddenByCommandLine += \"-par \";\n \n     // Network\n     if (!settings.contains(\"fUseUPnP\"))\n-#ifdef USE_UPNP\n-        settings.setValue(\"fUseUPnP\", true);\n-#else\n-        settings.setValue(\"fUseUPnP\", false);\n-#endif\t\n+        settings.setValue(\"fUseUPnP\", fDefaultUpnp);\n     if (!SoftSetBoolArg(\"-upnp\", settings.value(\"fUseUPnP\").toBool()))\n         strOverriddenByCommandLine += \"-upnp \";\n "
      },
      {
        "sha": "df384bcd9897762ee6e1e62be730fcd83bdfb0fd",
        "filename": "src/wallet.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c8212802c5900158d03c749667dc6adef48a618/src/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c8212802c5900158d03c749667dc6adef48a618/src/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet.cpp?ref=4c8212802c5900158d03c749667dc6adef48a618",
        "patch": "@@ -7,6 +7,7 @@\n \n #include \"base58.h\"\n #include \"coincontrol.h\"\n+#include \"defaultvalues.h\"\n #include \"net.h\"\n \n #include <inttypes.h>\n@@ -17,7 +18,7 @@\n using namespace std;\n \n // Settings\n-int64_t nTransactionFee = 0;\n+int64_t nTransactionFee = nDefaultTransactionFee;\n \n //////////////////////////////////////////////////////////////////////////////\n //\n@@ -1534,7 +1535,6 @@ bool CWallet::SetAddressBook(const CTxDestination& address, const string& strNam\n \n bool CWallet::DelAddressBook(const CTxDestination& address)\n {\n-\n     AssertLockHeld(cs_wallet); // mapAddressBook\n \n     if(fFileBacked)"
      }
    ]
  }
]