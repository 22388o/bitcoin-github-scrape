DrahtBot,2021-04-26 22:50:03,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19817 (build: macOS toolchain bump by fanquake)\n\nIf you consider this pull request important, please also help to revie",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-827190804,827190804,
hebasto,2021-04-27 10:56:21,"@RandyMcMillan \n> Tested on macOS 10.14.6 (18G103)\n\nDid you test a static build?",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-827513427,827513427,
hebasto,2021-04-27 11:47:10,"Updated 15d41b3b0120d9093036dc3d1740df228be25cc7 -> d7c83cb067992f38d0b6f6d3a7896f971718e24b ([pr21782.01](https://github.com/hebasto/bitcoin/commits/pr21782.01) -> [pr21782.02](https://github.com/hebasto/bitcoin/commits/pr21782.02), [diff](https://github.com/hebasto/bitcoin/compare/pr21782.01..pr21782.02)):\n\n- fixed compatibility with macOS Mojave",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-827543893,827543893,
RandyMcMillan,2021-04-27 12:04:57,"For clarity:\n\n`\nbrew install mingw-w64\n`\nwas required to build depends on Mojave\n\n![Screen Shot 2021-04-27 at 8 01 27 AM](https://user-images.githubusercontent.com/152159/116237938-ccb9e080-a72e-11eb-8de2-ad117ee5bd87.png)\n![Screen Shot 2021-04-27 at 8 02 08 AM](https://user-images.githubusercontent.com/152159/116238041-e65b2800-a72e-11eb-8818-e929ac7fc5bd.png)\n",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-827553611,827553611,
hebasto,2021-04-27 12:09:45,"@RandyMcMillan \n> For clarity:\n> \n> `brew install mingw-w64`\n> was required to build depends on Mojave\n\nSorry, I don't understand this.\n\n`mingw-w64` is required only when cross-compiling for Windows target.\n\nThis pr deals with macOS target only.\n\nUPDATE:\nTo make a static build with depends on Mojave 10.14.6:\n```\n$ make -C depends\n$ ./autogen.sh\n$ CONFIG_SITE=$PWD/",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-827556208,827556208,
RandyMcMillan,2021-04-27 15:41:42,"Almost got thru it.\n\n```\nDarwin â‚¿ 18.7.0 Darwin Kernel Version 18.7.0: Tue Aug 20 16:57:14 PDT 2019; root:xnu-4903.271.2~2/RELEASE_X86_64 x86_64\n```\n\n![Screen Shot 2021-04-27 at 11 43 01 AM](https://user-images.githubusercontent.com/152159/116271212-c424d280-a74d-11eb-9039-b3d81228ff85.png)\n\n\ncommit \nd7c83cb067992f38d0b6f6d3a7896f971718e24b\n\nUsed commands:\n```\n$ make -C",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-827708956,827708956,
hebasto,2021-04-27 16:49:11,"@RandyMcMillan \nCould `make clean && make` help?",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-827756059,827756059,
RandyMcMillan,2021-04-27 21:06:03,"Error:\n\n![Screen Shot 2021-04-27 at 4 38 09 PM](https://user-images.githubusercontent.com/152159/116311397-35c64600-a779-11eb-864d-b30fc173dff0.png)\n\nDisabled Tests:\n\n```\nCONFIG_SITE=$PWD/depends/x86_64-apple-darwin18.7.0/share/config.site ./configure --disable-tests\nmake\n```\n![Screen Shot 2021-04-27 at 4 55 15 PM](https://user-images.githubusercontent.com/152159/116311594-69a1",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-827930557,827930557,
jarolrod,2021-04-27 21:12:53,"@RandyMcMillan I'm not sure what's wrong there, but, d7c83cb builds just fine for me on macOS 10.14",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-827934566,827934566,
hebasto,2021-04-27 21:19:44,"@RandyMcMillan \n\nTo figure out problems with this PR, could you confirm a successful build the _master_ branch with depends on macOS 10.14?",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-827938331,827938331,
fanquake,2021-04-28 03:43:32,"How is [this comment](https://github.com/bitcoin/bitcoin/pull/21782#pullrequestreview-645282708):\n> macOS 10.14 SDK doesn't seem to have -platform_version available. When trying to perform a native depends build on macOS 10.14 I get the following error\n\nsolved with the current change? If the linker doesn't support `-platform_version`, then building with a depends prefix would still be broken",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-828119382,828119382,
jarolrod,2021-04-28 03:58:21,"@fanquake on my macOS 10.14.6 partition:\n\n```\nld -v\n\n@(#)PROGRAM:ld  PROJECT:ld64-450.3\nBUILD 18:16:53 Apr  5 2019\nconfigured to support archs: armv6 armv7 armv7s arm64 arm64e arm64_32 i386 x86_64 x86_64h armv6m armv7k armv7m armv7em\nLTO support using: LLVM version 10.0.1, (clang-1001.0.46.4) (static support for 22, runtime is 22)\nTAPI support using: Apple TAPI version 10.0.1 (ta",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-828124573,828124573,
fanquake,2021-04-28 04:57:29,"Right, because `ld` actually throws an error, `AX_CHECK_LINK_FLAG` wont append the flags. I had been thinking it was just warning, and because the call wasn't using `$LDFLAG_WERROR` they would end up appended and then we'd fail to link.\n\nRegardless, as-is, this change is a bit of an undocumented hack. It need explanation either in depends, or in configure.\n\nJust to clarify, as I understand",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-828143557,828143557,
jarolrod,2021-04-28 05:50:51,"@fanquake hopefully this can clarify a bit, going by my ""state of dark mode"" testing https://github.com/bitcoin-core/gui/pull/275#pullrequestreview-639461197\n\nFrom the linked review, we can see that this `sdk field` issue, seemingly, manifests itself only on native depends builds and with the bumped toolchain cross-compile (did not test bumped toolchain native depends build). \n\n**Linux Cro",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-828163967,828163967,
DrahtBot,2021-04-28 06:51:31,<!--a722867cd34abeea1fadc8d60700f111-->\n### Gitian builds\n\n| File | commit f8f55522c4697b77b1f739a2ed0c483396d62154<br>(master) | commit ef4c52d980021ee89e4e45e781657ca49b8cc736<br>(master and this pull) |\n|--|--|--|\n| bitcoin-core-linux-22-res.yml | [`d273ec877cddaf98...`](https://drahtbot.space/gitian/bitcoin/bitcoin/f8f55522c4697b77b1f739a2ed0c483396d62154/bitcoin-core-linux-22-res.yml) | ,https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-828194776,828194776,
fanquake,2021-04-28 09:31:16,"> From the linked review, we can see that this sdk field issue, seemingly, manifests itself only on native depends builds and with the bumped toolchain cross-compile (did not test bumped toolchain native depends build).\n\nThe SDK field has also been present in the `LC_VERSION_MIN_MACOSX` command; `LC_BUILD_VERSION` is actually fairly new. I'm not convinced this approach is the way to solve our ",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-828306555,828306555,
hebasto,2021-04-28 15:23:00,Closing in favor of #21793 which is more correct solution for #21771.,https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-828545952,828545952,
hebasto,2021-04-28 15:25:10,"@fanquake \n> The SDK field has also been present in the `LC_VERSION_MIN_MACOSX` command; `LC_BUILD_VERSION` is actually fairly new.\n\nI cannot see `LC_VERSION_MIN_MACOSX` in the `otool` output on macOS.",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-828547712,828547712,
fanquake,2021-04-29 01:16:15,"> I cannot see LC_VERSION_MIN_MACOSX in the otool output on macOS.\n\nIt's going to depend on which toolchain you've used. The most recently released binaries have `LC_VERSION_MIN_MACOSX` not `LC_BUILD_VERSION`.",https://github.com/bitcoin/bitcoin/pull/21782#issuecomment-828881207,828881207,
