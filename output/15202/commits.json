[
  {
    "sha": "f30960adc02877267cb6efeb378962ed96628741",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmMzA5NjBhZGMwMjg3NzI2N2NiNmVmZWIzNzg5NjJlZDk2NjI4NzQx",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-01-18T01:05:25Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2020-05-31T23:54:00Z"
      },
      "message": "gui: Add closeAllWallets to WalletController",
      "tree": {
        "sha": "bc8e05c32091efe5f44bd8710829557d54d53415",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bc8e05c32091efe5f44bd8710829557d54d53415"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f30960adc02877267cb6efeb378962ed96628741",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f30960adc02877267cb6efeb378962ed96628741",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f30960adc02877267cb6efeb378962ed96628741",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f30960adc02877267cb6efeb378962ed96628741/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a65b55fa45d41761c3e67ac5107d284d6edc2525",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a65b55fa45d41761c3e67ac5107d284d6edc2525",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a65b55fa45d41761c3e67ac5107d284d6edc2525"
      }
    ],
    "stats": {
      "total": 18,
      "additions": 18,
      "deletions": 0
    },
    "files": [
      {
        "sha": "f1438e3439d8ade4f533d53ab264e856f64215e2",
        "filename": "src/qt/walletcontroller.cpp",
        "status": "modified",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f30960adc02877267cb6efeb378962ed96628741/src/qt/walletcontroller.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f30960adc02877267cb6efeb378962ed96628741/src/qt/walletcontroller.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletcontroller.cpp?ref=f30960adc02877267cb6efeb378962ed96628741",
        "patch": "@@ -92,6 +92,23 @@ void WalletController::closeWallet(WalletModel* wallet_model, QWidget* parent)\n     removeAndDeleteWallet(wallet_model);\n }\n \n+void WalletController::closeAllWallets(QWidget* parent)\n+{\n+    QMessageBox::StandardButton button = QMessageBox::question(parent, tr(\"Close all wallets\"),\n+        tr(\"Are you sure you wish to close all wallets?\"),\n+        QMessageBox::Yes|QMessageBox::Cancel,\n+        QMessageBox::Yes);\n+    if (button != QMessageBox::Yes) return;\n+\n+    QMutexLocker locker(&m_mutex);\n+    for (WalletModel* wallet_model : m_wallets) {\n+        wallet_model->wallet().remove();\n+        Q_EMIT walletRemoved(wallet_model);\n+        delete wallet_model;\n+    }\n+    m_wallets.clear();\n+}\n+\n WalletModel* WalletController::getOrCreateWallet(std::unique_ptr<interfaces::Wallet> wallet)\n {\n     QMutexLocker locker(&m_mutex);"
      },
      {
        "sha": "f7e366878db2cb9a0762fe25f1b49ae48fc5fbb1",
        "filename": "src/qt/walletcontroller.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f30960adc02877267cb6efeb378962ed96628741/src/qt/walletcontroller.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f30960adc02877267cb6efeb378962ed96628741/src/qt/walletcontroller.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletcontroller.h?ref=f30960adc02877267cb6efeb378962ed96628741",
        "patch": "@@ -62,6 +62,7 @@ class WalletController : public QObject\n     std::map<std::string, bool> listWalletDir() const;\n \n     void closeWallet(WalletModel* wallet_model, QWidget* parent = nullptr);\n+    void closeAllWallets(QWidget* parent = nullptr);\n \n Q_SIGNALS:\n     void walletAdded(WalletModel* wallet_model);"
      }
    ]
  },
  {
    "sha": "c4b574899abfa27f83c6948593838ed418c78f9c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjNGI1NzQ4OTlhYmZhMjdmODNjNjk0ODU5MzgzOGVkNDE4Yzc4Zjlj",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-01-18T01:05:45Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2020-05-31T23:58:09Z"
      },
      "message": "gui: Add Close All Wallets action",
      "tree": {
        "sha": "928b2a2f02bebd60281419e4d76c47e9eb384b13",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/928b2a2f02bebd60281419e4d76c47e9eb384b13"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c4b574899abfa27f83c6948593838ed418c78f9c",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c4b574899abfa27f83c6948593838ed418c78f9c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c4b574899abfa27f83c6948593838ed418c78f9c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c4b574899abfa27f83c6948593838ed418c78f9c/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f30960adc02877267cb6efeb378962ed96628741",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f30960adc02877267cb6efeb378962ed96628741",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f30960adc02877267cb6efeb378962ed96628741"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 9,
      "deletions": 1
    },
    "files": [
      {
        "sha": "195d80d47c2caf947955a93c12c52a83081defe6",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 1,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c4b574899abfa27f83c6948593838ed418c78f9c/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c4b574899abfa27f83c6948593838ed418c78f9c/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=c4b574899abfa27f83c6948593838ed418c78f9c",
        "patch": "@@ -350,6 +350,9 @@ void BitcoinGUI::createActions()\n     m_create_wallet_action->setEnabled(false);\n     m_create_wallet_action->setStatusTip(tr(\"Create a new wallet\"));\n \n+    m_close_all_wallets_action = new QAction(tr(\"Close All Wallets...\"), this);\n+    m_close_all_wallets_action->setStatusTip(tr(\"Close all wallets\"));\n+\n     showHelpMessageAction = new QAction(tr(\"&Command-line options\"), this);\n     showHelpMessageAction->setMenuRole(QAction::NoRole);\n     showHelpMessageAction->setStatusTip(tr(\"Show the %1 help message to get a list with possible Bitcoin command-line options\").arg(PACKAGE_NAME));\n@@ -421,7 +424,9 @@ void BitcoinGUI::createActions()\n             connect(activity, &CreateWalletActivity::finished, activity, &QObject::deleteLater);\n             activity->create();\n         });\n-\n+        connect(m_close_all_wallets_action, &QAction::triggered, [this] {\n+            m_wallet_controller->closeAllWallets(this);\n+        });\n         connect(m_mask_values_action, &QAction::toggled, this, &BitcoinGUI::setPrivacy);\n     }\n #endif // ENABLE_WALLET\n@@ -447,6 +452,7 @@ void BitcoinGUI::createMenuBar()\n         file->addAction(m_create_wallet_action);\n         file->addAction(m_open_wallet_action);\n         file->addAction(m_close_wallet_action);\n+        file->addAction(m_close_all_wallets_action);\n         file->addSeparator();\n         file->addAction(openAction);\n         file->addAction(backupWalletAction);\n@@ -727,6 +733,7 @@ void BitcoinGUI::setWalletActionsEnabled(bool enabled)\n     usedReceivingAddressesAction->setEnabled(enabled);\n     openAction->setEnabled(enabled);\n     m_close_wallet_action->setEnabled(enabled);\n+    m_close_all_wallets_action->setEnabled(enabled);\n }\n \n void BitcoinGUI::createTrayIcon()"
      },
      {
        "sha": "b009e279b656b892fc8723fb02d8517c452d59a8",
        "filename": "src/qt/bitcoingui.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c4b574899abfa27f83c6948593838ed418c78f9c/src/qt/bitcoingui.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c4b574899abfa27f83c6948593838ed418c78f9c/src/qt/bitcoingui.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.h?ref=c4b574899abfa27f83c6948593838ed418c78f9c",
        "patch": "@@ -155,6 +155,7 @@ class BitcoinGUI : public QMainWindow\n     QAction* m_open_wallet_action{nullptr};\n     QMenu* m_open_wallet_menu{nullptr};\n     QAction* m_close_wallet_action{nullptr};\n+    QAction* m_close_all_wallets_action{nullptr};\n     QAction* m_wallet_selector_label_action = nullptr;\n     QAction* m_wallet_selector_action = nullptr;\n     QAction* m_mask_values_action{nullptr};"
      }
    ]
  }
]