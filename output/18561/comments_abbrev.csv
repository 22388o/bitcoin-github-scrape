promag,2020-04-09 11:45:36,"I think connection reset indicates that the server is not properly closing the connection - I suspect the header `Connection: close` doesn't reach the client (?) - so this might be some race/corner-case with libevent where the socket is closed too soon?\n\nThis doesn't invalidate this change since the retry attempts is limited.",https://github.com/bitcoin/bitcoin/pull/18561#issuecomment-611484540,611484540,
MarcoFalke,2020-04-09 12:18:55,">  I suspect the header Connection: close doesn't reach the client (?)\n\nWhy not? Wouldn't it throw the same exception if it reached the client?",https://github.com/bitcoin/bitcoin/pull/18561#issuecomment-611497029,611497029,
promag,2020-04-09 12:25:19,"No, if the header reached the client then it would gracefully close, ECONNRESET means the server closed unexpectedly.",https://github.com/bitcoin/bitcoin/pull/18561#issuecomment-611499524,611499524,
MarcoFalke,2020-04-09 12:49:50,"It has to throw some kind of exception if the connection is closed without returning a result (json or jsonexception), no?",https://github.com/bitcoin/bitcoin/pull/18561#issuecomment-611509713,611509713,
promag,2020-04-09 13:08:27,"Yes, but why (or in what case) would it close without returning a result? I mean, once the server accepts the connection, it should send the reply.",https://github.com/bitcoin/bitcoin/pull/18561#issuecomment-611518004,611518004,
MarcoFalke,2020-04-09 13:12:48,"> Yes, but why (or in what case) would it close without returning a result? I mean, once the server accepts the connection, it should send the reply.\n\nRight. This should probably be fixed in libevent or Bitcoin Core. The patch in this pull is to get the tests work around this issue in the meantime.",https://github.com/bitcoin/bitcoin/pull/18561#issuecomment-611520377,611520377,
promag,2020-04-09 13:14:47,"> The patch in this pull is to get the tests work around this issue in the meantime.\n\nYeah I agree with this. I can't reproduce but looking at travis error this looks enough.\n\nACK for that reason.",https://github.com/bitcoin/bitcoin/pull/18561#issuecomment-611521338,611521338,
MarcoFalke,2020-04-09 13:18:21,"It happens only in valgrind, so a race seems most likely",https://github.com/bitcoin/bitcoin/pull/18561#issuecomment-611523058,611523058,
