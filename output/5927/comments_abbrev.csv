jonasschnelli,2015-03-19T19:57:31Z,"I'm getting EXC_BAD_ACCESS during `setgenerate` -> `ConnectBlock()`.\n\nMaybe `CBlockIndex* CBlockIndex::GetAncestor(int height)` was called with a CBlockIndex with a `pskip` NULL Poiner?\n\n```\n* thread #2: tid = 0x586dd, 0x00000001000518fe bitcoind`CBlockIndex::GetAncestor(this=0x000000010597cf38, height=0) + 190 at chain.cpp:89, stop reason = EXC_BAD_ACCESS (code=1, address=0x10)\n    frame #0",https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-83739103,83739103,
sipa,2015-03-19T20:19:42Z,Thanks for doing the debugging job I should have done :)\n,https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-83749691,83749691,
morcos,2015-03-19T22:15:05Z,Hmm..  So this requires #5875 to be safe I think.  Was that the intention?\n,https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-83782200,83782200,
sipa,2015-03-21T14:22:15Z,"@morcos Well there are still measures in place to prevent us from accepting a long header-branch still, and we won't accept blocks for which we don't accept the header. Though the PR as-is indeed loosens some things, that are countered by #5875.\n",https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-84354192,84354192,
morcos,2015-03-21T18:29:14Z,"Ok, I think my concern is that before this change, when a node starts up, once it gets through enough IBD, it's impossible to DOS it by just feeding it low difficulty full blocks, because those blocks would either have to be a fork before a checkpoint, or they wouldn't connect back to a valid chain.   After this change, I think it's possible to push through a long low-difficulty fork before the no",https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-84414418,84414418,
sipa,2015-03-23T11:50:12Z,"@morcos You're right, but just receiving headers up to the checkpoints suffices to prevent branches, which should be within seconds in normal circumstances (for now). Headers synchronization is however not very robust (it's easy to have a peer that just don't respond to headers request to delay the synchronization significantly), so I agree that it's better to combine this with #5875.\n",https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-84963352,84963352,
sipa,2015-03-23T13:43:04Z,@jonasschnelli Bug fixed.\n,https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-85000322,85000322,
sipa,2015-05-10T21:28:14Z,"Rebased, and will rebase on #5975 if that gets merged first.\n",https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-100703854,100703854,
sipa,2015-05-13T20:43:18Z,"@gavinandresen Bug fixed, I hope.\n",https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-101809431,101809431,
laanwj,2015-05-21T14:57:40Z,"Tested ACK (code reviewed, synced up to block 320700 with #5875 and #5927)\n",https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-104308936,104308936,
jtimon,2015-05-21T23:52:41Z,ut ACK\n,https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-104452662,104452662,
sdaftuar,2015-05-22T13:50:06Z,"I'm concerned about the impact a malicious peer could have on a node starting up from scratch; in particular I think a malicious peer could partition a new node running this code from honest peers.\n\nIn 0.10 and master, when a node starts up, it picks one peer to download the headers chain from.  After the headers chain's best block time is within 24 hours of now, the node will start to download ",https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-104665085,104665085,
luke-jr,2015-06-02T02:01:43Z,utACK\n,https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-107772401,107772401,
laanwj,2015-06-10T08:32:36Z,Going ahead to merge this (into master only). I agree @sdaftuar 's  issue should be addressed before the 0.12 release. \n,https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-110651327,110651327,
sdaftuar,2015-10-29T16:10:56Z,"@sipa @laanwj I just remembered this pull, and I think the concern I [raised earlier](https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-104665085) is still a potential issue for 0.12.  Any thoughts on the best way to mitigate?\n\nOne idea I had would be to not leave IBD (and therefore not announce new blocks or respond to a getheaders message) until your main chain builds off the last chec",https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-152229444,152229444,
