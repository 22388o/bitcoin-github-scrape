[
  {
    "sha": "b3caa9b7fa7695e60fc4002229b77f43db8ded67",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiM2NhYTliN2ZhNzY5NWU2MGZjNDAwMjIyOWI3N2Y0M2RiOGRlZDY3",
    "commit": {
      "author": {
        "name": "Patick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2015-11-24T09:47:32Z"
      },
      "committer": {
        "name": "Patick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2015-11-24T09:50:53Z"
      },
      "message": "Move bloom filter filtering logic outside of command \"switch\" (giant if/else).\n\nMoving this logic outside of the \"switch\" makes it far simpler to\nenable the forced disconnect by a parameter.",
      "tree": {
        "sha": "efec3088297baf50382a891a91f6a184bc677f39",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/efec3088297baf50382a891a91f6a184bc677f39"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b3caa9b7fa7695e60fc4002229b77f43db8ded67",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b3caa9b7fa7695e60fc4002229b77f43db8ded67",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b3caa9b7fa7695e60fc4002229b77f43db8ded67",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b3caa9b7fa7695e60fc4002229b77f43db8ded67/comments",
    "author": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0b0fc179ab8795463e0a0f07e989ec6f592a1f90",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0b0fc179ab8795463e0a0f07e989ec6f592a1f90",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0b0fc179ab8795463e0a0f07e989ec6f592a1f90"
      }
    ],
    "stats": {
      "total": 30,
      "additions": 15,
      "deletions": 15
    },
    "files": [
      {
        "sha": "fd5637a8cda683b091c8e4750c8158c1551aaf3e",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 15,
        "deletions": 15,
        "changes": 30,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b3caa9b7fa7695e60fc4002229b77f43db8ded67/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b3caa9b7fa7695e60fc4002229b77f43db8ded67/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=b3caa9b7fa7695e60fc4002229b77f43db8ded67",
        "patch": "@@ -3989,6 +3989,21 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n     }\n \n \n+    if (!(nLocalServices & NODE_BLOOM) &&\n+              (strCommand == \"filterload\" ||\n+               strCommand == \"filteradd\" ||\n+               strCommand == \"filterclear\"))\n+    {\n+        if (pfrom->nVersion >= NO_BLOOM_VERSION) {\n+            Misbehaving(pfrom->GetId(), 100);\n+            return false;\n+        }\n+        //TODO: Enable this after reasonable network upgrade\n+        //else {\n+        //    pfrom->fDisconnect = true;\n+        //    return false;\n+        //}\n+    }\n \n \n     if (strCommand == \"version\")\n@@ -4750,21 +4765,6 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n     }\n \n \n-    else if (!(nLocalServices & NODE_BLOOM) &&\n-              (strCommand == \"filterload\" ||\n-               strCommand == \"filteradd\" ||\n-               strCommand == \"filterclear\") &&\n-              //TODO: Remove this line after reasonable network upgrade\n-              pfrom->nVersion >= NO_BLOOM_VERSION)\n-    {\n-        if (pfrom->nVersion >= NO_BLOOM_VERSION)\n-            Misbehaving(pfrom->GetId(), 100);\n-        //TODO: Enable this after reasonable network upgrade\n-        //else\n-        //    pfrom->fDisconnect = true;\n-    }\n-\n-\n     else if (strCommand == \"filterload\")\n     {\n         CBloomFilter filter;"
      }
    ]
  },
  {
    "sha": "0f4dc53fd6a19a763922b4c3888ce6542c594e01",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowZjRkYzUzZmQ2YTE5YTc2MzkyMmI0YzM4ODhjZTY1NDJjNTk0ZTAx",
    "commit": {
      "author": {
        "name": "Patick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2015-11-24T09:51:53Z"
      },
      "committer": {
        "name": "Patick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2015-11-24T10:08:00Z"
      },
      "message": "Add enforcenodebloom option.\n\nPreviously peers which implement a protocol version less than NO_BLOOM_VERSION\nwould not be disconnected for sending a filter command, regardless of the\npeerbloomfilter option.\n\nMany node operators do not wish to provide expensive bloom filtering for SPV\nclients, previously they had to cherry pick the commit which enabled the\ndisconnect logic.\n\nThe default should remain false until a sufficient percent of SPV clients\nhave updated.",
      "tree": {
        "sha": "24400d2ed11d9b0e932ed3e2483eee77be53c7f5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/24400d2ed11d9b0e932ed3e2483eee77be53c7f5"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0f4dc53fd6a19a763922b4c3888ce6542c594e01",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0f4dc53fd6a19a763922b4c3888ce6542c594e01",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0f4dc53fd6a19a763922b4c3888ce6542c594e01",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0f4dc53fd6a19a763922b4c3888ce6542c594e01/comments",
    "author": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b3caa9b7fa7695e60fc4002229b77f43db8ded67",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b3caa9b7fa7695e60fc4002229b77f43db8ded67",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b3caa9b7fa7695e60fc4002229b77f43db8ded67"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 3,
      "deletions": 5
    },
    "files": [
      {
        "sha": "b0b58141a20d5389e0b0cf378ab454ed404ec914",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 5,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0f4dc53fd6a19a763922b4c3888ce6542c594e01/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0f4dc53fd6a19a763922b4c3888ce6542c594e01/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=0f4dc53fd6a19a763922b4c3888ce6542c594e01",
        "patch": "@@ -3997,12 +3997,10 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n         if (pfrom->nVersion >= NO_BLOOM_VERSION) {\n             Misbehaving(pfrom->GetId(), 100);\n             return false;\n+        } else if (GetBoolArg(\"-enforcenodebloom\", false)) {\n+            pfrom->fDisconnect = true;\n+            return false;\n         }\n-        //TODO: Enable this after reasonable network upgrade\n-        //else {\n-        //    pfrom->fDisconnect = true;\n-        //    return false;\n-        //}\n     }\n \n "
      }
    ]
  },
  {
    "sha": "9cf668844eebee18ea08a8c6e63758871ef4ea86",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5Y2Y2Njg4NDRlZWJlZTE4ZWEwOGE4YzZlNjM3NTg4NzFlZjRlYTg2",
    "commit": {
      "author": {
        "name": "Patick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2015-11-24T09:57:08Z"
      },
      "committer": {
        "name": "Patick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2015-11-24T10:08:00Z"
      },
      "message": "Document both the peerbloomfilters and enforcenodebloom options.",
      "tree": {
        "sha": "f29166529c3af5f9d40c427d721e28518f95c96d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f29166529c3af5f9d40c427d721e28518f95c96d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9cf668844eebee18ea08a8c6e63758871ef4ea86",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9cf668844eebee18ea08a8c6e63758871ef4ea86",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/9cf668844eebee18ea08a8c6e63758871ef4ea86",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9cf668844eebee18ea08a8c6e63758871ef4ea86/comments",
    "author": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0f4dc53fd6a19a763922b4c3888ce6542c594e01",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0f4dc53fd6a19a763922b4c3888ce6542c594e01",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0f4dc53fd6a19a763922b4c3888ce6542c594e01"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 3,
      "deletions": 0
    },
    "files": [
      {
        "sha": "5d5c685533190c4b15d4b714597bacc9e6ff0389",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9cf668844eebee18ea08a8c6e63758871ef4ea86/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9cf668844eebee18ea08a8c6e63758871ef4ea86/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=9cf668844eebee18ea08a8c6e63758871ef4ea86",
        "patch": "@@ -362,6 +362,9 @@ std::string HelpMessage(HelpMessageMode mode)\n     strUsage += HelpMessageOpt(\"-onion=<ip:port>\", strprintf(_(\"Use separate SOCKS5 proxy to reach peers via Tor hidden services (default: %s)\"), \"-proxy\"));\n     strUsage += HelpMessageOpt(\"-onlynet=<net>\", _(\"Only connect to nodes in network <net> (ipv4, ipv6 or onion)\"));\n     strUsage += HelpMessageOpt(\"-permitbaremultisig\", strprintf(_(\"Relay non-P2SH multisig (default: %u)\"), 1));\n+    strUsage += HelpMessageOpt(\"-peerbloomfilters\", strprintf(_(\"Support filtering of blocks and transaction with bloom filters (default: %u)\"), 1));\n+    if (showDebug)\n+        strUsage += HelpMessageOpt(\"-enforcenodebloom\", strprintf(\"Enforce minimum protocol version to limit use of bloom filters (default: %u)\", 0));\n     strUsage += HelpMessageOpt(\"-port=<port>\", strprintf(_(\"Listen for connections on <port> (default: %u or testnet: %u)\"), 8333, 18333));\n     strUsage += HelpMessageOpt(\"-proxy=<ip:port>\", _(\"Connect through SOCKS5 proxy\"));\n     strUsage += HelpMessageOpt(\"-proxyrandomize\", strprintf(_(\"Randomize credentials for every proxy connection. This enables Tor stream isolation (default: %u)\"), 1));"
      }
    ]
  }
]