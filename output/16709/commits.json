[
  {
    "sha": "009f0344eff1eb0eeabc8e278e16532fb5e32e56",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMDlmMDM0NGVmZjFlYjBlZWFiYzhlMjc4ZTE2NTMyZmI1ZTMyZTU2",
    "commit": {
      "author": {
        "name": "Peter Bushnell",
        "email": "bushsolo@gmail.com",
        "date": "2019-08-24T14:11:26Z"
      },
      "committer": {
        "name": "Peter Bushnell",
        "email": "bushsolo@gmail.com",
        "date": "2019-08-24T14:11:26Z"
      },
      "message": "Replace boost::mutex/condition_variable with std equivalents",
      "tree": {
        "sha": "19142d5de7f526d0ab87039dae76ae629a1c3913",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/19142d5de7f526d0ab87039dae76ae629a1c3913"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/009f0344eff1eb0eeabc8e278e16532fb5e32e56",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/009f0344eff1eb0eeabc8e278e16532fb5e32e56",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/009f0344eff1eb0eeabc8e278e16532fb5e32e56",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/009f0344eff1eb0eeabc8e278e16532fb5e32e56/comments",
    "author": {
      "login": "Bushstar",
      "id": 5293433,
      "node_id": "MDQ6VXNlcjUyOTM0MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5293433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Bushstar",
      "html_url": "https://github.com/Bushstar",
      "followers_url": "https://api.github.com/users/Bushstar/followers",
      "following_url": "https://api.github.com/users/Bushstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/Bushstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Bushstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Bushstar/subscriptions",
      "organizations_url": "https://api.github.com/users/Bushstar/orgs",
      "repos_url": "https://api.github.com/users/Bushstar/repos",
      "events_url": "https://api.github.com/users/Bushstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Bushstar/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Bushstar",
      "id": 5293433,
      "node_id": "MDQ6VXNlcjUyOTM0MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5293433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Bushstar",
      "html_url": "https://github.com/Bushstar",
      "followers_url": "https://api.github.com/users/Bushstar/followers",
      "following_url": "https://api.github.com/users/Bushstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/Bushstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Bushstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Bushstar/subscriptions",
      "organizations_url": "https://api.github.com/users/Bushstar/orgs",
      "repos_url": "https://api.github.com/users/Bushstar/repos",
      "events_url": "https://api.github.com/users/Bushstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Bushstar/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "3ca514ddb77253042877d1a72dfd3021c3de2812",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3ca514ddb77253042877d1a72dfd3021c3de2812",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/3ca514ddb77253042877d1a72dfd3021c3de2812"
      }
    ],
    "stats": {
      "total": 19,
      "additions": 8,
      "deletions": 11
    },
    "files": [
      {
        "sha": "4740d74553e7c2d8498f66db5cfa830fcc6c9d7f",
        "filename": "src/checkqueue.h",
        "status": "modified",
        "additions": 8,
        "deletions": 10,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/009f0344eff1eb0eeabc8e278e16532fb5e32e56/src/checkqueue.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/009f0344eff1eb0eeabc8e278e16532fb5e32e56/src/checkqueue.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/checkqueue.h?ref=009f0344eff1eb0eeabc8e278e16532fb5e32e56",
        "patch": "@@ -8,11 +8,9 @@\n #include <sync.h>\n \n #include <algorithm>\n+#include <mutex>\n #include <vector>\n \n-#include <boost/thread/condition_variable.hpp>\n-#include <boost/thread/mutex.hpp>\n-\n template <typename T>\n class CCheckQueueControl;\n \n@@ -31,13 +29,13 @@ class CCheckQueue\n {\n private:\n     //! Mutex to protect the inner state\n-    boost::mutex mutex;\n+    std::mutex mutex;\n \n     //! Worker threads block on this when out of work\n-    boost::condition_variable condWorker;\n+    std::condition_variable condWorker;\n \n     //! Master thread blocks on this when out of work\n-    boost::condition_variable condMaster;\n+    std::condition_variable condMaster;\n \n     //! The queue of elements to be processed.\n     //! As the order of booleans doesn't matter, it is used as a LIFO (stack)\n@@ -65,14 +63,14 @@ class CCheckQueue\n     /** Internal function that does bulk of the verification work. */\n     bool Loop(bool fMaster = false)\n     {\n-        boost::condition_variable& cond = fMaster ? condMaster : condWorker;\n+        std::condition_variable& cond = fMaster ? condMaster : condWorker;\n         std::vector<T> vChecks;\n         vChecks.reserve(nBatchSize);\n         unsigned int nNow = 0;\n         bool fOk = true;\n         do {\n             {\n-                boost::unique_lock<boost::mutex> lock(mutex);\n+                std::unique_lock<std::mutex> lock(mutex);\n                 // first do the clean-up of the previous loop run (allowing us to do it in the same critsect)\n                 if (nNow) {\n                     fAllOk &= fOk;\n@@ -125,7 +123,7 @@ class CCheckQueue\n \n public:\n     //! Mutex to ensure only one concurrent CCheckQueueControl\n-    boost::mutex ControlMutex;\n+    std::mutex ControlMutex;\n \n     //! Create a new check queue\n     explicit CCheckQueue(unsigned int nBatchSizeIn) : nIdle(0), nTotal(0), fAllOk(true), nTodo(0), nBatchSize(nBatchSizeIn) {}\n@@ -145,7 +143,7 @@ class CCheckQueue\n     //! Add a batch of checks to the queue\n     void Add(std::vector<T>& vChecks)\n     {\n-        boost::unique_lock<boost::mutex> lock(mutex);\n+        std::unique_lock<std::mutex> lock(mutex);\n         for (T& check : vChecks) {\n             queue.push_back(T());\n             check.swap(queue.back());"
      },
      {
        "sha": "de776ebe7bdce40a6b90a2f277eb482925da6f7f",
        "filename": "test/lint/lint-includes.sh",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/009f0344eff1eb0eeabc8e278e16532fb5e32e56/test/lint/lint-includes.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/009f0344eff1eb0eeabc8e278e16532fb5e32e56/test/lint/lint-includes.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/lint/lint-includes.sh?ref=009f0344eff1eb0eeabc8e278e16532fb5e32e56",
        "patch": "@@ -67,7 +67,6 @@ EXPECTED_BOOST_INCLUDES=(\n     boost/test/unit_test.hpp\n     boost/thread.hpp\n     boost/thread/condition_variable.hpp\n-    boost/thread/mutex.hpp\n     boost/thread/thread.hpp\n     boost/variant.hpp\n     boost/variant/apply_visitor.hpp"
      }
    ]
  }
]