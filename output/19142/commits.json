[
  {
    "sha": "fa1d5800d9c5e33942b76f6667839a818723dee9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTFkNTgwMGQ5YzVlMzM5NDJiNzZmNjY2NzgzOWE4MTg3MjNkZWU5",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-02T17:33:52Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-03T10:06:56Z"
      },
      "message": "validation: Remove unused boost interruption_point\n\nActivateBestChain (ABC) is only called in the \"msghand\" or one of the\nRPC threads, neither of which is a boost::thread. However, ABC is also\ncalled in ThreadImport (which currently happens to be a boost::thread).\nIn all cases, the interruption_point is redundant with the breakpoint in\nABC that triggers when ShutdownRequested()\n\nVerifyDB is only called in the main thread (\"init\") or one of the RPC\nthreads, neither of which is a boost::thread.",
      "tree": {
        "sha": "21a0382177d01284a8e4e8ffdbb81db2a92728e1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/21a0382177d01284a8e4e8ffdbb81db2a92728e1"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa1d5800d9c5e33942b76f6667839a818723dee9",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUiNFAwAyIvA5jC3NlK5EijDqCjL6EfoI+WbRV/mvyKUpJz0y2LU7aPnTFcK3MmL\nD9SUvfF+6Kip/X0F8LfXGuFEb8Hd8e0OLma8IGnw08xtyfwSNBmUAk9IfIiD1kAi\nsnHF2hcUqJkkO0v9lLZztPzTyV5hBa5YpiUVsd5gJg4DQh4EVyPRJavUAc5CvFFG\nUQVJWlIkNAUy8PQaECGk+2C6XIR7XWhXunsUvCNculmEZWIoxmOlG7D4EQ9t1ab0\nHnHEqiN9js4l49VivVl4KH7SIjsMYz7IGb+KRFAD+x/wFy6QnGzy4LSFSjdtNgvN\nxxPAr8dcVVolOwaGgQbmW6q9CWgVbX+EkYkVU69sJOo/QgFKu+gDsPHjEiUR8vkz\nBEaDn9NrVXxULEqbkheA+hhopSDGAZST/BjXO5MnlR4sB51guqzNQ+6qe4FIttDB\nmW3NE1x7lCM626zP8DKobReXuGsfNi2iHKwrif3DhQWVBUU16SOMJ133FPubfaJH\nI6F4jMZk\n=d/gx\n-----END PGP SIGNATURE-----",
        "payload": "tree 21a0382177d01284a8e4e8ffdbb81db2a92728e1\nparent 3657aee2d25ce1ffefc6817af3eead7120b1d755\nauthor MarcoFalke <falke.marco@gmail.com> 1591119232 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1591178816 -0400\n\nvalidation: Remove unused boost interruption_point\n\nActivateBestChain (ABC) is only called in the \"msghand\" or one of the\nRPC threads, neither of which is a boost::thread. However, ABC is also\ncalled in ThreadImport (which currently happens to be a boost::thread).\nIn all cases, the interruption_point is redundant with the breakpoint in\nABC that triggers when ShutdownRequested()\n\nVerifyDB is only called in the main thread (\"init\") or one of the RPC\nthreads, neither of which is a boost::thread.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa1d5800d9c5e33942b76f6667839a818723dee9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa1d5800d9c5e33942b76f6667839a818723dee9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa1d5800d9c5e33942b76f6667839a818723dee9/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "3657aee2d25ce1ffefc6817af3eead7120b1d755",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3657aee2d25ce1ffefc6817af3eead7120b1d755",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/3657aee2d25ce1ffefc6817af3eead7120b1d755"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 1,
      "deletions": 7
    },
    "files": [
      {
        "sha": "dc3fe1cdf0537d4801b2b46b4e55062b3feb1e48",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 7,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa1d5800d9c5e33942b76f6667839a818723dee9/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa1d5800d9c5e33942b76f6667839a818723dee9/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=fa1d5800d9c5e33942b76f6667839a818723dee9",
        "patch": "@@ -50,7 +50,6 @@\n #include <string>\n \n #include <boost/algorithm/string/replace.hpp>\n-#include <boost/thread.hpp>\n \n #if defined(NDEBUG)\n # error \"Bitcoin cannot be compiled without assertions.\"\n@@ -2859,8 +2858,6 @@ bool CChainState::ActivateBestChain(BlockValidationState &state, const CChainPar\n     CBlockIndex *pindexNewTip = nullptr;\n     int nStopAtHeight = gArgs.GetArg(\"-stopatheight\", DEFAULT_STOPATHEIGHT);\n     do {\n-        boost::this_thread::interruption_point();\n-\n         // Block until the validation queue drains. This should largely\n         // never happen in normal operation, however may happen during\n         // reindex, causing memory blowup if we run too far ahead.\n@@ -2929,8 +2926,7 @@ bool CChainState::ActivateBestChain(BlockValidationState &state, const CChainPar\n         // never shutdown before connecting the genesis block during LoadChainTip(). Previously this\n         // caused an assert() failure during shutdown in such cases as the UTXO DB flushing checks\n         // that the best block hash is non-null.\n-        if (ShutdownRequested())\n-            break;\n+        if (ShutdownRequested()) break;\n     } while (pindexNewTip != pindexMostWork);\n     CheckBlockIndex(chainparams.GetConsensus());\n \n@@ -4272,7 +4268,6 @@ bool CVerifyDB::VerifyDB(const CChainParams& chainparams, CCoinsView *coinsview,\n     int reportDone = 0;\n     LogPrintf(\"[0%%]...\"); /* Continued */\n     for (pindex = ::ChainActive().Tip(); pindex && pindex->pprev; pindex = pindex->pprev) {\n-        boost::this_thread::interruption_point();\n         const int percentageDone = std::max(1, std::min(99, (int)(((double)(::ChainActive().Height() - pindex->nHeight)) / (double)nCheckDepth * (nCheckLevel >= 4 ? 50 : 100))));\n         if (reportDone < percentageDone/10) {\n             // report every 10% step\n@@ -4330,7 +4325,6 @@ bool CVerifyDB::VerifyDB(const CChainParams& chainparams, CCoinsView *coinsview,\n     // check level 4: try reconnecting blocks\n     if (nCheckLevel >= 4) {\n         while (pindex != ::ChainActive().Tip()) {\n-            boost::this_thread::interruption_point();\n             const int percentageDone = std::max(1, std::min(99, 100 - (int)(((double)(::ChainActive().Height() - pindex->nHeight)) / (double)nCheckDepth * 50)));\n             if (reportDone < percentageDone/10) {\n                 // report every 10% step"
      }
    ]
  },
  {
    "sha": "fa3b4f9b8e54ec07aeb2e5e2333da3e784f7be12",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTNiNGY5YjhlNTRlYzA3YWViMmU1ZTIzMzNkYTNlNzg0ZjdiZTEy",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-02T17:45:19Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-03T10:06:58Z"
      },
      "message": "validation: Make VerifyDB level 4 interruptible",
      "tree": {
        "sha": "fac8c59b273e83bdf43714b56510b8e1d1acc1c3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fac8c59b273e83bdf43714b56510b8e1d1acc1c3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa3b4f9b8e54ec07aeb2e5e2333da3e784f7be12",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgRCQwAxusksaZnmjN3etW4y+JkToCvjNLt1uM+Q2WjXJusWhF8HFSXPgtJQ4aV\nVAY3JeWGE5IYQ6MtiQxEoe45MpCbs8oKsrDOi/h87ux6mippsk9mq6p7NjlocXyS\nS9u+1y5BvUrcyHup2cDY0oNEzonHAWcuXCKyOpb9tkxJACdPtkLzvOz1dS0y3loH\nceAqbUjTMF4To0N3zJzaeQ0V5Exm5sAUbOm31Ls1/3uSlM+Gd6vA/8oMjIoNtsJT\naak/TLkOMnci+YZpB6+K06Lfrzq0FeO0lyKqiW8udjFmfnYtc7dIJPlEAUSeyQjr\nA3mNJ8WXO2ApJpFYYoUzL9TmzZBF7TFh4EtbpjQrw2XVJRlJ2p3CUebhVSU8c0iA\nikbf+RaqmDH6nKzIa0an3ZP26uHf0sznKpyQU4dRRJdMTemaUJrNLf30iaU5MDMQ\nQwUDfpR+M/60mlWSwvXDOqRaJQCKxYYzFp3AeYgvXL/7ynaDzrAGCcTX9AXI/+qv\nXyTLIOmo\n=K3Js\n-----END PGP SIGNATURE-----",
        "payload": "tree fac8c59b273e83bdf43714b56510b8e1d1acc1c3\nparent fa1d5800d9c5e33942b76f6667839a818723dee9\nauthor MarcoFalke <falke.marco@gmail.com> 1591119919 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1591178818 -0400\n\nvalidation: Make VerifyDB level 4 interruptible\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa3b4f9b8e54ec07aeb2e5e2333da3e784f7be12",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa3b4f9b8e54ec07aeb2e5e2333da3e784f7be12",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa3b4f9b8e54ec07aeb2e5e2333da3e784f7be12/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa1d5800d9c5e33942b76f6667839a818723dee9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa1d5800d9c5e33942b76f6667839a818723dee9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa1d5800d9c5e33942b76f6667839a818723dee9"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "1ce440dc0469c9555d34d42fa081a7a3c8ad6ea4",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa3b4f9b8e54ec07aeb2e5e2333da3e784f7be12/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa3b4f9b8e54ec07aeb2e5e2333da3e784f7be12/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=fa3b4f9b8e54ec07aeb2e5e2333da3e784f7be12",
        "patch": "@@ -4313,8 +4313,7 @@ bool CVerifyDB::VerifyDB(const CChainParams& chainparams, CCoinsView *coinsview,\n                 nGoodTransactions += block.vtx.size();\n             }\n         }\n-        if (ShutdownRequested())\n-            return true;\n+        if (ShutdownRequested()) return true;\n     }\n     if (pindexFailure)\n         return error(\"VerifyDB(): *** coin database inconsistencies found (last %i blocks, %i good transactions before that)\\n\", ::ChainActive().Height() - pindexFailure->nHeight + 1, nGoodTransactions);\n@@ -4338,6 +4337,7 @@ bool CVerifyDB::VerifyDB(const CChainParams& chainparams, CCoinsView *coinsview,\n                 return error(\"VerifyDB(): *** ReadBlockFromDisk failed at %d, hash=%s\", pindex->nHeight, pindex->GetBlockHash().ToString());\n             if (!::ChainstateActive().ConnectBlock(block, state, pindex, coins, chainparams))\n                 return error(\"VerifyDB(): *** found unconnectable block at %d, hash=%s (%s)\", pindex->nHeight, pindex->GetBlockHash().ToString(), state.ToString());\n+            if (ShutdownRequested()) return true;\n         }\n     }\n "
      }
    ]
  }
]