[
  {
    "sha": "c201d73df3602dac75573a0ec3fe4c86bbc02585",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjMjAxZDczZGYzNjAyZGFjNzU1NzNhMGVjM2ZlNGM4NmJiYzAyNTg1",
    "commit": {
      "author": {
        "name": "gzhao408",
        "email": "gzhao408@berkeley.edu",
        "date": "2020-10-08T21:10:43Z"
      },
      "committer": {
        "name": "gzhao408",
        "email": "gzhao408@berkeley.edu",
        "date": "2020-10-08T21:11:16Z"
      },
      "message": "style and nits for fee-checking in BroadcastTransaction",
      "tree": {
        "sha": "e6e3f5eda3835706b6ab4f9adf6406328a0055ea",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e6e3f5eda3835706b6ab4f9adf6406328a0055ea"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c201d73df3602dac75573a0ec3fe4c86bbc02585",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c201d73df3602dac75573a0ec3fe4c86bbc02585",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c201d73df3602dac75573a0ec3fe4c86bbc02585",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c201d73df3602dac75573a0ec3fe4c86bbc02585/comments",
    "author": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b337bd7bc0873ace317ad8e1ebbd3842da3f81d5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b337bd7bc0873ace317ad8e1ebbd3842da3f81d5",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b337bd7bc0873ace317ad8e1ebbd3842da3f81d5"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 4,
      "deletions": 3
    },
    "files": [
      {
        "sha": "97d5aad8e492adf5a2efbfdc0c973f82708a1ea9",
        "filename": "src/node/transaction.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c201d73df3602dac75573a0ec3fe4c86bbc02585/src/node/transaction.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c201d73df3602dac75573a0ec3fe4c86bbc02585/src/node/transaction.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/node/transaction.cpp?ref=c201d73df3602dac75573a0ec3fe4c86bbc02585",
        "patch": "@@ -13,7 +13,8 @@\n \n #include <future>\n \n-static TransactionError HandleATMPError(const TxValidationState& state, std::string& err_string_out) {\n+static TransactionError HandleATMPError(const TxValidationState& state, std::string& err_string_out)\n+{\n     err_string_out = state.ToString();\n     if (state.IsInvalid()) {\n         if (state.GetResult() == TxValidationResult::TX_MISSING_INPUTS) {\n@@ -50,10 +51,10 @@ TransactionError BroadcastTransaction(NodeContext& node, const CTransactionRef t\n     if (!node.mempool->exists(hashTx)) {\n         // Transaction is not already in the mempool.\n         TxValidationState state;\n-        CAmount fee{0};\n-        if (max_tx_fee) {\n+        if (max_tx_fee > 0) {\n             // First, call ATMP with test_accept and check the fee. If ATMP\n             // fails here, return error immediately.\n+            CAmount fee{0};\n             if (!AcceptToMemoryPool(*node.mempool, state, tx,\n                 nullptr /* plTxnReplaced */, false /* bypass_limits */, /* test_accept */ true, &fee)) {\n                 return HandleATMPError(state, err_string);"
      }
    ]
  },
  {
    "sha": "88197b0769770913941a3361bff3a1c67a86f7d2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4ODE5N2IwNzY5NzcwOTEzOTQxYTMzNjFiZmYzYTFjNjdhODZmN2Qy",
    "commit": {
      "author": {
        "name": "gzhao408",
        "email": "gzhao408@berkeley.edu",
        "date": "2020-10-08T21:03:24Z"
      },
      "committer": {
        "name": "gzhao408",
        "email": "gzhao408@berkeley.edu",
        "date": "2020-10-09T15:58:47Z"
      },
      "message": "[doc] release notes for max fee checking",
      "tree": {
        "sha": "b6327dce31815174c5e92476cd1a6307fdf47e71",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b6327dce31815174c5e92476cd1a6307fdf47e71"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/88197b0769770913941a3361bff3a1c67a86f7d2",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/88197b0769770913941a3361bff3a1c67a86f7d2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/88197b0769770913941a3361bff3a1c67a86f7d2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/88197b0769770913941a3361bff3a1c67a86f7d2/comments",
    "author": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c201d73df3602dac75573a0ec3fe4c86bbc02585",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c201d73df3602dac75573a0ec3fe4c86bbc02585",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c201d73df3602dac75573a0ec3fe4c86bbc02585"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 12,
      "deletions": 2
    },
    "files": [
      {
        "sha": "24fcc23c01009db41acc7e07c89e279decca530f",
        "filename": "doc/release-notes.md",
        "status": "modified",
        "additions": 12,
        "deletions": 2,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/88197b0769770913941a3361bff3a1c67a86f7d2/doc/release-notes.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/88197b0769770913941a3361bff3a1c67a86f7d2/doc/release-notes.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes.md?ref=88197b0769770913941a3361bff3a1c67a86f7d2",
        "patch": "@@ -102,8 +102,8 @@ will trigger BIP 125 (replace-by-fee) opt-in. (#11413)\n   option `-deprecatedrpc=banscore` is used. The `banscore` field will be fully\n   removed in the next major release. (#19469)\n \n-- The `testmempoolaccept` RPC returns `vsize` and a `fee` object with the `base` fee\n-  if the transaction passes validation. (#19940)\n+- The `testmempoolaccept` RPC returns `vsize` and a `fees` object with the `base` fee\n+  if the transaction would pass validation. (#19940)\n \n - The `getpeerinfo` RPC now returns a `connection_type` field. This indicates\n   the type of connection established with the peer. It will return one of six\n@@ -347,6 +347,16 @@ RPC\n   - Fee estimation failed\n   - Transaction has too long of a mempool chain\n \n+- The `sendrawtransaction` error code for exceeding `maxfeerate` has been changed from\n+  `-26` to `-25`. The error string has been changed from \"absurdly-high-fee\" to\n+  \"Fee exceeds maximum configured by user (e.g. -maxtxfee, maxfeerate).\" The\n+  `testmempoolaccept` RPC returns `max-fee-exceeded` rather than `absurdly-high-fee`\n+  as the `reject-reason`. (#19339)\n+\n+- To make wallet and rawtransaction RPCs more consistent, the error message for\n+  exceeding maximum feerate has been changed to \"Fee exceeds maximum configured by user\n+  (e.g. -maxtxfee, maxfeerate).\" (#19339)\n+\n Tests\n -----\n "
      }
    ]
  }
]