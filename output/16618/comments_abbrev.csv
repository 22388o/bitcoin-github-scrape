GChuf,2019-08-15 10:34:54,Is this safe to do? What are the implications of connecting to a peer that would otherwise be banned?,https://github.com/bitcoin/bitcoin/pull/16618#issuecomment-521596921,521596921,
Sjors,2019-08-15 10:52:47,"@gapeman afaik that was the behavior before #16248 (which was not supposed to change existing behavior).\n\n@NicolasDorier would be nice to have a test for this.",https://github.com/bitcoin/bitcoin/pull/16618#issuecomment-521601527,521601527,
NicolasDorier,2019-08-15 13:12:07,"@gapeman if your config specifically say that you don't want to ban a peer, then it should not be banned.\n\nAs @Sjors says, I just want to keep current behavior working as before.\n\nI can take a look to see if I can make a test for that.",https://github.com/bitcoin/bitcoin/pull/16618#issuecomment-521635542,521635542,
NicolasDorier,2019-08-15 13:28:24,I refactored it to properly scope some variables. Writing a test so such regression can't happen.,https://github.com/bitcoin/bitcoin/pull/16618#issuecomment-521640563,521640563,
NicolasDorier,2019-08-15 14:02:55,"Fixed the bug, and added an anti regression test for `setban`",https://github.com/bitcoin/bitcoin/pull/16618#issuecomment-521652289,521652289,
naumenkogs,2019-08-15 14:08:17,utACK a0d2e2b,https://github.com/bitcoin/bitcoin/pull/16618#issuecomment-521654132,521654132,
NicolasDorier,2019-08-16 04:19:08,"As @promag suggested, I instead just inlined the permission checked, it is actually more readable.\n\nI also check in the logs that we really prevent connection because of the ban. I also added a test to `setban x remove`.",https://github.com/bitcoin/bitcoin/pull/16618#issuecomment-521878304,521878304,
NicolasDorier,2019-08-16 04:23:19,"@Sjors `rpc_setban` is the right name, I really want to test setban, so I added it in the whitelist of authorized term.",https://github.com/bitcoin/bitcoin/pull/16618#issuecomment-521878935,521878935,
Sjors,2019-08-16 08:22:20,Agree inline is more clear. utACK d117f45,https://github.com/bitcoin/bitcoin/pull/16618#issuecomment-521929475,521929475,
MarcoFalke,2019-08-16 14:09:09,"ACK d117f4541d4717e83c9396273e92960723622030\n\n<details><summary>Show signature and timestamp</summary>\n\nSignature:\n\n```\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nACK d117f4541d4717e83c9396273e92960723622030\n-----BEGIN PGP SIGNATURE-----\n\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUin2gv9GZKDSUbn62676zj0G6Igb8tzgC2M1Sf2KyEuIR+heCoVYGlyp3rXDb",https://github.com/bitcoin/bitcoin/pull/16618#issuecomment-522022047,522022047,
MarcoFalke,2019-08-15 14:14:26,"test/functional/rpc_setban.py:7:1: F401 'test_framework.test_node.ErrorMatch' imported but unused\n\ntest/functional/rpc_setban.py:39:78: F821 undefined name 'p'\n\ntest/functional/rpc_setban.py:41:75: F821 undefined name 'p'",https://github.com/bitcoin/bitcoin/pull/16618#discussion_r314326784,314326784,test/functional/rpc_setban.py
Sjors,2019-08-15 14:23:19,"Maybe pass node in directly and split into `assert_has_permission(self, node, permission)` and `assert_has_no_permission(self, node, permission)` ",https://github.com/bitcoin/bitcoin/pull/16618#discussion_r314330783,314330783,test/functional/rpc_setban.py
NicolasDorier,2019-08-15 15:18:07,"what about `assert_equal(True, self.hasPermision(...))` ?\n\nThat said, I don't think it should pass the nodes to this method. It is confusing (there is two nodes: the node that is permissioned, and the node on which we want to check permissions).",https://github.com/bitcoin/bitcoin/pull/16618#discussion_r314359274,314359274,test/functional/rpc_setban.py
Sjors,2019-08-15 16:19:54,"`assert(self.hasPermision(...))` is even simpler.\n\nYou could pass both nodes. Or you could document at the top of the test file which hardcoded nodes do what.",https://github.com/bitcoin/bitcoin/pull/16618#discussion_r314388627,314388627,test/functional/rpc_setban.py
promag,2019-08-16 00:02:39,Sorry but I think you could just inline this - it's longer as it is with the `contains` arg.,https://github.com/bitcoin/bitcoin/pull/16618#discussion_r314543190,314543190,test/functional/rpc_setban.py
