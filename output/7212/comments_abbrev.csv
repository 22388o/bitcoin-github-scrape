paveljanik,2015-12-14T19:33:26Z,Can you please reduce the number of changes in the commit? It is a bit unreadable now because of the amount of unnecessary changes.\n,https://github.com/bitcoin/bitcoin/pull/7212#issuecomment-164536123,164536123,
EthanHeilman,2015-12-14T23:12:33Z,"@paveljanik Almost none of these changes are unnecessary, they significantly increase the readability, accuracy and the coverage of these tests (as explained in prior comments). The fact that it appears the changes should not have an impact when in fact that do, is evidence against leaving the tests _as is_.\n\n**Update:** Since the last push deleted both of our comments, I am rewritten my explana",https://github.com/bitcoin/bitcoin/pull/7212#issuecomment-164590184,164590184,
EthanHeilman,2015-12-15T22:23:51Z,"I have rewritten my commit to so that CNetAddr no longer takes a port number. \n\nI have keep my changes where I break the port out when using the CService constructor. That is:\n\nCService(""250.2.2.2:8333"") changed to CService(""250.2.2.2"", 8333)\n\n@paveljanik is correct that these changes are unnecessary, however given that the fix for the CNetAddr issue involves overhauling the tests anyways le",https://github.com/bitcoin/bitcoin/pull/7212#issuecomment-164916350,164916350,
EthanHeilman,2015-12-16T19:23:22Z,Can someone label/tag this as 'test'?\n,https://github.com/bitcoin/bitcoin/pull/7212#issuecomment-165219331,165219331,
laanwj,2016-01-05T12:51:55Z,Concept ACK\n,https://github.com/bitcoin/bitcoin/pull/7212#issuecomment-168990744,168990744,
EthanHeilman,2016-01-27T17:13:20Z,"Added a test for GetAddr. \n\n@laanwj  Are there any changes I need to make to get this accepted with the next ~30 days? I have some bug fixes which I'm writing right now which I'm pushing in early March/Late Feb. The fixes build on these tests, but I'd like to do them in a separate pull request since its pretty different from this pull request. \n",https://github.com/bitcoin/bitcoin/pull/7212#issuecomment-175751366,175751366,
laanwj,2016-01-28T10:51:06Z,"utACK ~~now that the tests verifying the flaky behavior of CNetAddr with a port number or otherwise invalid addresses have been removed.~~\n\n~~This issue still needs to be fixed - at the side of CNetAddr parsing - but this makes this ready for merge IMO.~~\n\nEdit: oops, had been confusing your issues, that is #7291\n",https://github.com/bitcoin/bitcoin/pull/7212#issuecomment-176121883,176121883,
MarcoFalke,2016-01-28T18:40:33Z,Post merge utACK\n,https://github.com/bitcoin/bitcoin/pull/7212#issuecomment-176331220,176331220,
instagibbs,2015-12-14T16:05:12Z,Needs a short description\n,https://github.com/bitcoin/bitcoin/pull/7212#discussion_r47515730,47515730,src/addrman.h
EthanHeilman,2015-12-14T18:24:37Z,Good call! I have added a comment to RandomInt.\n,https://github.com/bitcoin/bitcoin/pull/7212#discussion_r47535585,47535585,src/addrman.h
MarcoFalke,2015-12-15T08:49:35Z,"If this is interpreted IPv6 by http://man7.org/linux/man-pages/man3/inet_pton.3.html , is there any code in production that needs update as well?\n",https://github.com/bitcoin/bitcoin/pull/7212#discussion_r47610147,47610147,src/test/addrman_tests.cpp
EthanHeilman,2015-12-15T16:05:20Z,"I did a quick look and didn't find anything other than this:\n\nhttps://github.com/bitcoin/bitcoin/blob/master/src/netbase.cpp#L622\n\nbut it wouldn't surprise me if there was more. I planned on performing a more complete search, especially of the network deserialization, code after I finished these unittests. I'll probably start that tonight.\n\nI'm also considering a mitigation strategy of putti",https://github.com/bitcoin/bitcoin/pull/7212#discussion_r47656513,47656513,src/test/addrman_tests.cpp
MarcoFalke,2015-12-15T16:07:39Z,"> Before anyone spends anymore time on this let me write up a test which confirms the behavior and we can continue the discussion on that pull request.\n\nAgree, thanks for looking into this.\n",https://github.com/bitcoin/bitcoin/pull/7212#discussion_r47656859,47656859,src/test/addrman_tests.cpp
EthanHeilman,2015-12-15T17:35:54Z,"The following tests all resolve to true:\n\n```\nBOOST_CHECK(CNetAddr(""250.2.2.2:8333"").IsIPv6());\nBOOST_CHECK(CNetAddr(""250.2.2.2"", 8333).IsIPv4());\nBOOST_CHECK(CService(""250.2.2.2:8333"").IsIPv4());\nBOOST_CHECK(CAddress(CService(""250.2.2.2:8333"")).IsIPv4());\n```\n\nThis confusion arises because CNetAddr does not actually take a port number. I have a branch here that shows this behavior. \n\nh",https://github.com/bitcoin/bitcoin/pull/7212#discussion_r47669872,47669872,src/test/addrman_tests.cpp
instagibbs,2015-12-18T18:31:38Z,"You probably already explained this, but what's the reasoning behind these number changes? Would be nice to have it on record.\n",https://github.com/bitcoin/bitcoin/pull/7212#discussion_r48054380,48054380,src/test/addrman_tests.cpp
EthanHeilman,2015-12-18T19:33:40Z,"The test is testing if collisions are handled property, thus we need a collision to occur. However the round at which a collision occurs is dependent on the input values. One of the input values is a CNetAddr, so fixing the issue with CNetAddr changed the round in which a collision occurs from the 18th round rather than the 4th round. \n",https://github.com/bitcoin/bitcoin/pull/7212#discussion_r48060871,48060871,src/test/addrman_tests.cpp
