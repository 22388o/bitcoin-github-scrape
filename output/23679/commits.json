[
  {
    "sha": "d5e855c49437ae42659dd4a736d3819e02d15d8e",
    "node_id": "C_kwDOABII59oAKGQ1ZTg1NWM0OTQzN2FlNDI2NTlkZDRhNzM2ZDM4MTllMDJkMTVkOGU",
    "commit": {
      "author": {
        "name": "amadeuszpawlik",
        "email": "apawlik@protonmail.com",
        "date": "2021-12-05T20:28:17Z"
      },
      "committer": {
        "name": "amadeuszpawlik",
        "email": "apawlik@protonmail.com",
        "date": "2021-12-05T20:41:10Z"
      },
      "message": "Add helper functions for uint16 in UniValue\n\nAdds helper functions for secure acquisition of uint16-values from JSON rpc, e.g. when\nreading `port`-values.",
      "tree": {
        "sha": "94f1a67b13b3dec95f7894c17dc67f024589709b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/94f1a67b13b3dec95f7894c17dc67f024589709b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5e855c49437ae42659dd4a736d3819e02d15d8e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d5e855c49437ae42659dd4a736d3819e02d15d8e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d5e855c49437ae42659dd4a736d3819e02d15d8e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d5e855c49437ae42659dd4a736d3819e02d15d8e/comments",
    "author": {
      "login": "amadeuszpawlik",
      "id": 35263201,
      "node_id": "MDQ6VXNlcjM1MjYzMjAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35263201?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amadeuszpawlik",
      "html_url": "https://github.com/amadeuszpawlik",
      "followers_url": "https://api.github.com/users/amadeuszpawlik/followers",
      "following_url": "https://api.github.com/users/amadeuszpawlik/following{/other_user}",
      "gists_url": "https://api.github.com/users/amadeuszpawlik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amadeuszpawlik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amadeuszpawlik/subscriptions",
      "organizations_url": "https://api.github.com/users/amadeuszpawlik/orgs",
      "repos_url": "https://api.github.com/users/amadeuszpawlik/repos",
      "events_url": "https://api.github.com/users/amadeuszpawlik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amadeuszpawlik/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "amadeuszpawlik",
      "id": 35263201,
      "node_id": "MDQ6VXNlcjM1MjYzMjAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35263201?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amadeuszpawlik",
      "html_url": "https://github.com/amadeuszpawlik",
      "followers_url": "https://api.github.com/users/amadeuszpawlik/followers",
      "following_url": "https://api.github.com/users/amadeuszpawlik/following{/other_user}",
      "gists_url": "https://api.github.com/users/amadeuszpawlik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amadeuszpawlik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amadeuszpawlik/subscriptions",
      "organizations_url": "https://api.github.com/users/amadeuszpawlik/orgs",
      "repos_url": "https://api.github.com/users/amadeuszpawlik/repos",
      "events_url": "https://api.github.com/users/amadeuszpawlik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amadeuszpawlik/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ea989deecc8d4d02bb401c0ac7cd7a0543e3454c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ea989deecc8d4d02bb401c0ac7cd7a0543e3454c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ea989deecc8d4d02bb401c0ac7cd7a0543e3454c"
      }
    ],
    "stats": {
      "total": 26,
      "additions": 26,
      "deletions": 0
    },
    "files": [
      {
        "sha": "66981dd21192b878ca05019f2574da765dfc8f75",
        "filename": "src/univalue/include/univalue.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d5e855c49437ae42659dd4a736d3819e02d15d8e/src/univalue/include/univalue.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d5e855c49437ae42659dd4a736d3819e02d15d8e/src/univalue/include/univalue.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/univalue/include/univalue.h?ref=d5e855c49437ae42659dd4a736d3819e02d15d8e",
        "patch": "@@ -171,6 +171,7 @@ class UniValue {\n     bool get_bool() const;\n     const std::string& get_str() const;\n     int get_int() const;\n+    uint16_t get_uint16() const;\n     int64_t get_int64() const;\n     double get_real() const;\n     const UniValue& get_obj() const;"
      },
      {
        "sha": "e9685a57a67b51fd5f92397ccbd95af56120ca3c",
        "filename": "src/univalue/lib/univalue_get.cpp",
        "status": "modified",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d5e855c49437ae42659dd4a736d3819e02d15d8e/src/univalue/lib/univalue_get.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d5e855c49437ae42659dd4a736d3819e02d15d8e/src/univalue/lib/univalue_get.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/univalue/lib/univalue_get.cpp?ref=d5e855c49437ae42659dd4a736d3819e02d15d8e",
        "patch": "@@ -72,6 +72,21 @@ bool ParseDouble(const std::string& str, double *out)\n     if(out) *out = result;\n     return text.eof() && !text.fail();\n }\n+\n+bool ParseUInt16(const std::string& str, uint16_t *out)\n+{\n+    if (!ParsePrechecks(str) || (str.find('-') != std::string::npos))\n+        return false;\n+    char *endp = nullptr;\n+    errno = 0; // strtoul will not set errno if valid\n+    unsigned long int n = strtoul(str.c_str(), &endp, 10);\n+    if(out) *out = (uint16_t)n;\n+    // Note that strtoul returns a *unsigned long int*, so even if it doesn't report an over/underflow\n+    // we still have to check that the returned value is within the range of an *uint16_t*.\n+    return endp && *endp == 0 && !errno &&\n+        n >= std::numeric_limits<uint16_t>::min() &&\n+        n <= std::numeric_limits<uint16_t>::max();\n+}\n }\n \n const std::vector<std::string>& UniValue::getKeys() const\n@@ -112,6 +127,16 @@ int UniValue::get_int() const\n     return retval;\n }\n \n+uint16_t UniValue::get_uint16() const\n+{\n+    if (typ != VNUM)\n+        throw std::runtime_error(\"JSON value is not an integer as expected\");\n+    uint16_t retval;\n+    if (!ParseUInt16(getValStr(), &retval))\n+        throw std::runtime_error(\"JSON integer out of range\");\n+    return retval;\n+}\n+\n int64_t UniValue::get_int64() const\n {\n     if (typ != VNUM)"
      }
    ]
  },
  {
    "sha": "0f72ddfbe561f697cad8384066cda8cf5e88ec96",
    "node_id": "C_kwDOABII59oAKDBmNzJkZGZiZTU2MWY2OTdjYWQ4Mzg0MDY2Y2RhOGNmNWU4OGVjOTY",
    "commit": {
      "author": {
        "name": "amadeuszpawlik",
        "email": "apawlik@protonmail.com",
        "date": "2021-12-05T20:38:12Z"
      },
      "committer": {
        "name": "amadeuszpawlik",
        "email": "apawlik@protonmail.com",
        "date": "2021-12-05T20:41:49Z"
      },
      "message": "Validate `port`-value in `addpeeraddress` RPC call",
      "tree": {
        "sha": "54523f7a0ee17ba2b909fb2208dba7dc07a260bd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/54523f7a0ee17ba2b909fb2208dba7dc07a260bd"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0f72ddfbe561f697cad8384066cda8cf5e88ec96",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0f72ddfbe561f697cad8384066cda8cf5e88ec96",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0f72ddfbe561f697cad8384066cda8cf5e88ec96",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0f72ddfbe561f697cad8384066cda8cf5e88ec96/comments",
    "author": {
      "login": "amadeuszpawlik",
      "id": 35263201,
      "node_id": "MDQ6VXNlcjM1MjYzMjAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35263201?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amadeuszpawlik",
      "html_url": "https://github.com/amadeuszpawlik",
      "followers_url": "https://api.github.com/users/amadeuszpawlik/followers",
      "following_url": "https://api.github.com/users/amadeuszpawlik/following{/other_user}",
      "gists_url": "https://api.github.com/users/amadeuszpawlik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amadeuszpawlik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amadeuszpawlik/subscriptions",
      "organizations_url": "https://api.github.com/users/amadeuszpawlik/orgs",
      "repos_url": "https://api.github.com/users/amadeuszpawlik/repos",
      "events_url": "https://api.github.com/users/amadeuszpawlik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amadeuszpawlik/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "amadeuszpawlik",
      "id": 35263201,
      "node_id": "MDQ6VXNlcjM1MjYzMjAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35263201?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amadeuszpawlik",
      "html_url": "https://github.com/amadeuszpawlik",
      "followers_url": "https://api.github.com/users/amadeuszpawlik/followers",
      "following_url": "https://api.github.com/users/amadeuszpawlik/following{/other_user}",
      "gists_url": "https://api.github.com/users/amadeuszpawlik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amadeuszpawlik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amadeuszpawlik/subscriptions",
      "organizations_url": "https://api.github.com/users/amadeuszpawlik/orgs",
      "repos_url": "https://api.github.com/users/amadeuszpawlik/repos",
      "events_url": "https://api.github.com/users/amadeuszpawlik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amadeuszpawlik/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d5e855c49437ae42659dd4a736d3819e02d15d8e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d5e855c49437ae42659dd4a736d3819e02d15d8e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d5e855c49437ae42659dd4a736d3819e02d15d8e"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "58d5eaea226f21acc95addfd414ab35c2282aa11",
        "filename": "src/rpc/net.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0f72ddfbe561f697cad8384066cda8cf5e88ec96/src/rpc/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0f72ddfbe561f697cad8384066cda8cf5e88ec96/src/rpc/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/net.cpp?ref=0f72ddfbe561f697cad8384066cda8cf5e88ec96",
        "patch": "@@ -943,7 +943,7 @@ static RPCHelpMan addpeeraddress()\n     }\n \n     const std::string& addr_string{request.params[0].get_str()};\n-    const uint16_t port{static_cast<uint16_t>(request.params[1].get_int())};\n+    const uint16_t& port{request.params[1].get_uint16()};\n     const bool tried{request.params[2].isTrue()};\n \n     UniValue obj(UniValue::VOBJ);"
      }
    ]
  }
]