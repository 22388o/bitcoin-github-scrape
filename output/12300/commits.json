[
  {
    "sha": "3822afeecd62c5f28047140629f357db49ed6829",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozODIyYWZlZWNkNjJjNWYyODA0NzE0MDYyOWYzNTdkYjQ5ZWQ2ODI5",
    "commit": {
      "author": {
        "name": "Jeff Rade",
        "email": "jeffrade@gmail.com",
        "date": "2018-01-25T04:36:12Z"
      },
      "committer": {
        "name": "Jeff Rade",
        "email": "jeffrade@gmail.com",
        "date": "2018-02-07T01:31:06Z"
      },
      "message": "Adding --enable-mainnet configuration option.\n\nBy default, is disbled and must set -mainnet option on startup. This is a\nsafeguard against dev/local builds from running on mainnet chain by default.\n\n(cherry picked from commit 3e86a97c4d41b30babb25f0c0ca48f14ae095e34)",
      "tree": {
        "sha": "cd22d4889d7238b392155d36531cb62af61b57e5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cd22d4889d7238b392155d36531cb62af61b57e5"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3822afeecd62c5f28047140629f357db49ed6829",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3822afeecd62c5f28047140629f357db49ed6829",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3822afeecd62c5f28047140629f357db49ed6829",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3822afeecd62c5f28047140629f357db49ed6829/comments",
    "author": {
      "login": "jeffrade",
      "id": 1307806,
      "node_id": "MDQ6VXNlcjEzMDc4MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1307806?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jeffrade",
      "html_url": "https://github.com/jeffrade",
      "followers_url": "https://api.github.com/users/jeffrade/followers",
      "following_url": "https://api.github.com/users/jeffrade/following{/other_user}",
      "gists_url": "https://api.github.com/users/jeffrade/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jeffrade/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jeffrade/subscriptions",
      "organizations_url": "https://api.github.com/users/jeffrade/orgs",
      "repos_url": "https://api.github.com/users/jeffrade/repos",
      "events_url": "https://api.github.com/users/jeffrade/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jeffrade/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jeffrade",
      "id": 1307806,
      "node_id": "MDQ6VXNlcjEzMDc4MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1307806?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jeffrade",
      "html_url": "https://github.com/jeffrade",
      "followers_url": "https://api.github.com/users/jeffrade/followers",
      "following_url": "https://api.github.com/users/jeffrade/following{/other_user}",
      "gists_url": "https://api.github.com/users/jeffrade/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jeffrade/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jeffrade/subscriptions",
      "organizations_url": "https://api.github.com/users/jeffrade/orgs",
      "repos_url": "https://api.github.com/users/jeffrade/repos",
      "events_url": "https://api.github.com/users/jeffrade/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jeffrade/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2a30e67d20f76bbcd9a7d445f616f005316e0a1a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2a30e67d20f76bbcd9a7d445f616f005316e0a1a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2a30e67d20f76bbcd9a7d445f616f005316e0a1a"
      }
    ],
    "stats": {
      "total": 44,
      "additions": 37,
      "deletions": 7
    },
    "files": [
      {
        "sha": "02d0f67179f007cb3ee90d5171ad5a92b0fd7390",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 18,
        "deletions": 0,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3822afeecd62c5f28047140629f357db49ed6829/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3822afeecd62c5f28047140629f357db49ed6829/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=3822afeecd62c5f28047140629f357db49ed6829",
        "patch": "@@ -96,6 +96,13 @@ AC_PATH_TOOL(OBJCOPY, objcopy)\n \n AC_ARG_VAR(PYTHONPATH, Augments the default search path for python module files)\n \n+# Use mainnet chain by default\n+AC_ARG_ENABLE([mainnet],\n+  [AS_HELP_STRING([--enable-mainnet],\n+  [if mainnet is enabled, binary will use mainnet chain by default (default is no, chain must be explicitly specified)])],\n+  [use_mainnet=$enableval],\n+  [use_mainnet=no])\n+\n # Enable wallet\n AC_ARG_ENABLE([wallet],\n   [AS_HELP_STRING([--disable-wallet],\n@@ -1064,6 +1071,15 @@ AC_MSG_CHECKING([whether to build bitcoind])\n AM_CONDITIONAL([BUILD_BITCOIND], [test x$build_bitcoind = xyes])\n AC_MSG_RESULT($build_bitcoind)\n \n+dnl enable mainnet\n+AC_MSG_CHECKING([if mainnet should be used by default])\n+if test x$use_mainnet = xyes; then\n+  AC_MSG_RESULT(yes)\n+  AC_DEFINE_UNQUOTED([ENABLE_MAINNET],[1],[Define to 1 to use mainnet chain by default])\n+else\n+  AC_MSG_RESULT(no)\n+fi\n+\n AC_MSG_CHECKING([whether to build utils (bitcoin-cli bitcoin-tx)])\n AM_CONDITIONAL([BUILD_BITCOIN_UTILS], [test x$build_bitcoin_utils = xyes])\n AC_MSG_RESULT($build_bitcoin_utils)\n@@ -1199,6 +1215,7 @@ fi\n AM_CONDITIONAL([TARGET_DARWIN], [test x$TARGET_OS = xdarwin])\n AM_CONDITIONAL([BUILD_DARWIN], [test x$BUILD_OS = xdarwin])\n AM_CONDITIONAL([TARGET_WINDOWS], [test x$TARGET_OS = xwindows])\n+AM_CONDITIONAL([ENABLE_MAINNET],[test x$use_mainnet = xyes])\n AM_CONDITIONAL([ENABLE_WALLET],[test x$enable_wallet = xyes])\n AM_CONDITIONAL([ENABLE_TESTS],[test x$BUILD_TEST = xyes])\n AM_CONDITIONAL([ENABLE_QT],[test x$bitcoin_enable_qt = xyes])\n@@ -1318,6 +1335,7 @@ esac\n \n echo\n echo \"Options used to compile and link:\"\n+echo \"  use mainnet   = $use_mainnet\"\n echo \"  with wallet   = $enable_wallet\"\n echo \"  with gui / qt = $bitcoin_enable_qt\"\n if test x$bitcoin_enable_qt != xno; then"
      },
      {
        "sha": "911138a4d135f03c169a2a15900a00528f273604",
        "filename": "contrib/gitian-descriptors/gitian-linux.yml",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3822afeecd62c5f28047140629f357db49ed6829/contrib/gitian-descriptors/gitian-linux.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3822afeecd62c5f28047140629f357db49ed6829/contrib/gitian-descriptors/gitian-linux.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-linux.yml?ref=3822afeecd62c5f28047140629f357db49ed6829",
        "patch": "@@ -35,7 +35,7 @@ script: |\n \n   WRAP_DIR=$HOME/wrapped\n   HOSTS=\"i686-pc-linux-gnu x86_64-linux-gnu arm-linux-gnueabihf aarch64-linux-gnu\"\n-  CONFIGFLAGS=\"--enable-glibc-back-compat --enable-reduce-exports --disable-bench --disable-gui-tests\"\n+  CONFIGFLAGS=\"--enable-glibc-back-compat --enable-reduce-exports --disable-bench --disable-gui-tests --enable-mainnet\"\n   FAKETIME_HOST_PROGS=\"\"\n   FAKETIME_PROGS=\"date ar ranlib nm\"\n   HOST_CFLAGS=\"-O2 -g\""
      },
      {
        "sha": "ec9136687e54cef8ebfae7d2c6ca9ea12011f016",
        "filename": "contrib/gitian-descriptors/gitian-osx.yml",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3822afeecd62c5f28047140629f357db49ed6829/contrib/gitian-descriptors/gitian-osx.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3822afeecd62c5f28047140629f357db49ed6829/contrib/gitian-descriptors/gitian-osx.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-osx.yml?ref=3822afeecd62c5f28047140629f357db49ed6829",
        "patch": "@@ -35,7 +35,7 @@ files:\n script: |\n   WRAP_DIR=$HOME/wrapped\n   HOSTS=\"x86_64-apple-darwin11\"\n-  CONFIGFLAGS=\"--enable-reduce-exports --disable-bench --disable-gui-tests GENISOIMAGE=$WRAP_DIR/genisoimage\"\n+  CONFIGFLAGS=\"--enable-reduce-exports --disable-bench --disable-gui-tests --enable-mainnet GENISOIMAGE=$WRAP_DIR/genisoimage\"\n   FAKETIME_HOST_PROGS=\"\"\n   FAKETIME_PROGS=\"ar ranlib date dmg genisoimage\"\n "
      },
      {
        "sha": "b6a757ec4976e28984e41954bd21f295ca5ef10d",
        "filename": "contrib/gitian-descriptors/gitian-win.yml",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3822afeecd62c5f28047140629f357db49ed6829/contrib/gitian-descriptors/gitian-win.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3822afeecd62c5f28047140629f357db49ed6829/contrib/gitian-descriptors/gitian-win.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-win.yml?ref=3822afeecd62c5f28047140629f357db49ed6829",
        "patch": "@@ -28,7 +28,7 @@ files: []\n script: |\n   WRAP_DIR=$HOME/wrapped\n   HOSTS=\"i686-w64-mingw32 x86_64-w64-mingw32\"\n-  CONFIGFLAGS=\"--enable-reduce-exports --disable-bench --disable-gui-tests\"\n+  CONFIGFLAGS=\"--enable-reduce-exports --disable-bench --disable-gui-tests --enable-mainnet\"\n   FAKETIME_HOST_PROGS=\"g++ ar ranlib nm windres strip objcopy\"\n   FAKETIME_PROGS=\"date makensis zip\"\n   HOST_CFLAGS=\"-O2 -g\""
      },
      {
        "sha": "1609ed7f7f752a68c73f4360428b385ef9b985e3",
        "filename": "src/chainparamsbase.cpp",
        "status": "modified",
        "additions": 9,
        "deletions": 4,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3822afeecd62c5f28047140629f357db49ed6829/src/chainparamsbase.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3822afeecd62c5f28047140629f357db49ed6829/src/chainparamsbase.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/chainparamsbase.cpp?ref=3822afeecd62c5f28047140629f357db49ed6829",
        "patch": "@@ -22,6 +22,7 @@ void AppendParamsHelpMessages(std::string& strUsage, bool debugHelp)\n                                    \"This is intended for regression testing tools and app development.\");\n     }\n     strUsage += HelpMessageOpt(\"-testnet\", _(\"Use the test chain\"));\n+    strUsage += HelpMessageOpt(\"-mainnet\", _(\"Use the main chain\"));\n }\n \n /**\n@@ -91,12 +92,16 @@ std::string ChainNameFromCommandLine()\n {\n     bool fRegTest = gArgs.GetBoolArg(\"-regtest\", false);\n     bool fTestNet = gArgs.GetBoolArg(\"-testnet\", false);\n+    bool fMainNet = gArgs.GetBoolArg(\"-mainnet\", false);\n \n-    if (fTestNet && fRegTest)\n-        throw std::runtime_error(\"Invalid combination of -regtest and -testnet.\");\n-    if (fRegTest)\n+    if (fTestNet + fRegTest + fMainNet >= 2) {\n+        throw std::runtime_error(\"Invalid combination of -regtest, -testnet and/or -mainnet. You must select only one.\");\n+    }\n+    if (fRegTest) {\n         return CBaseChainParams::REGTEST;\n-    if (fTestNet)\n+    }\n+    if (fTestNet) {\n         return CBaseChainParams::TESTNET;\n+    }\n     return CBaseChainParams::MAIN;\n }"
      },
      {
        "sha": "92a43a32dabcb8bf26dd3d2f690b38e66a84587b",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3822afeecd62c5f28047140629f357db49ed6829/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3822afeecd62c5f28047140629f357db49ed6829/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=3822afeecd62c5f28047140629f357db49ed6829",
        "patch": "@@ -902,6 +902,13 @@ bool AppInitParameterInteraction()\n \n     // also see: InitParameterInteraction()\n \n+    // Only if configured with --enable-mainnet will allow blind run on mainnet. Otherwise, will have to specify the chain you want.\n+#ifndef ENABLE_MAINNET\n+    std::string chain = ChainNameFromCommandLine();\n+    if (chain == CBaseChainParams::MAIN && !gArgs.GetBoolArg(\"-mainnet\", false))\n+        return InitError(\"You did not configure with --enable-mainnet, therefore must set -regtest, -testnet or -mainnet option.\");\n+#endif\n+\n     // if using block pruning, then disallow txindex\n     if (gArgs.GetArg(\"-prune\", 0)) {\n         if (gArgs.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX))"
      }
    ]
  }
]