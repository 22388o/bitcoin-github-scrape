[
  {
    "sha": "7e994517f31b78206017a0adb07dab81c5709795",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3ZTk5NDUxN2YzMWI3ODIwNjAxN2EwYWRiMDdkYWI4MWM1NzA5Nzk1",
    "commit": {
      "author": {
        "name": "sinetek",
        "email": "pitwuu@gmail.com",
        "date": "2021-01-13T01:43:29Z"
      },
      "committer": {
        "name": "sinetek",
        "email": "pitwuu@gmail.com",
        "date": "2021-01-13T01:43:29Z"
      },
      "message": "switch over to std::shared_mutex.",
      "tree": {
        "sha": "65d7f862ec77c89b05d93e40990c77b744a0e87e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/65d7f862ec77c89b05d93e40990c77b744a0e87e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7e994517f31b78206017a0adb07dab81c5709795",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7e994517f31b78206017a0adb07dab81c5709795",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7e994517f31b78206017a0adb07dab81c5709795",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7e994517f31b78206017a0adb07dab81c5709795/comments",
    "author": {
      "login": "sinetek",
      "id": 5908875,
      "node_id": "MDQ6VXNlcjU5MDg4NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5908875?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sinetek",
      "html_url": "https://github.com/sinetek",
      "followers_url": "https://api.github.com/users/sinetek/followers",
      "following_url": "https://api.github.com/users/sinetek/following{/other_user}",
      "gists_url": "https://api.github.com/users/sinetek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sinetek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sinetek/subscriptions",
      "organizations_url": "https://api.github.com/users/sinetek/orgs",
      "repos_url": "https://api.github.com/users/sinetek/repos",
      "events_url": "https://api.github.com/users/sinetek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sinetek/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sinetek",
      "id": 5908875,
      "node_id": "MDQ6VXNlcjU5MDg4NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5908875?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sinetek",
      "html_url": "https://github.com/sinetek",
      "followers_url": "https://api.github.com/users/sinetek/followers",
      "following_url": "https://api.github.com/users/sinetek/following{/other_user}",
      "gists_url": "https://api.github.com/users/sinetek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sinetek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sinetek/subscriptions",
      "organizations_url": "https://api.github.com/users/sinetek/orgs",
      "repos_url": "https://api.github.com/users/sinetek/repos",
      "events_url": "https://api.github.com/users/sinetek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sinetek/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7b975639ef93b50537a3ec6326b54d7218afc8da",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7b975639ef93b50537a3ec6326b54d7218afc8da",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7b975639ef93b50537a3ec6326b54d7218afc8da"
      }
    ],
    "stats": {
      "total": 20,
      "additions": 11,
      "deletions": 9
    },
    "files": [
      {
        "sha": "745a582bcd9c1f55a61e8df035eca9f47d8ae257",
        "filename": "src/script/sigcache.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 4,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7e994517f31b78206017a0adb07dab81c5709795/src/script/sigcache.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7e994517f31b78206017a0adb07dab81c5709795/src/script/sigcache.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/script/sigcache.cpp?ref=7e994517f31b78206017a0adb07dab81c5709795",
        "patch": "@@ -11,7 +11,8 @@\n #include <util/system.h>\n \n #include <cuckoocache.h>\n-#include <boost/thread/shared_mutex.hpp>\n+\n+#include <shared_mutex>\n \n namespace {\n /**\n@@ -27,7 +28,7 @@ class CSignatureCache\n     CSHA256 m_salted_hasher_schnorr;\n     typedef CuckooCache::cache<uint256, SignatureCacheHasher> map_type;\n     map_type setValid;\n-    boost::shared_mutex cs_sigcache;\n+    std::shared_mutex cs_sigcache;\n \n public:\n     CSignatureCache()\n@@ -62,13 +63,13 @@ class CSignatureCache\n     bool\n     Get(const uint256& entry, const bool erase)\n     {\n-        boost::shared_lock<boost::shared_mutex> lock(cs_sigcache);\n+        boost::shared_lock<std::shared_mutex> lock(cs_sigcache);\n         return setValid.contains(entry, erase);\n     }\n \n     void Set(const uint256& entry)\n     {\n-        boost::unique_lock<boost::shared_mutex> lock(cs_sigcache);\n+        boost::unique_lock<std::shared_mutex> lock(cs_sigcache);\n         setValid.insert(entry);\n     }\n     uint32_t setup_bytes(size_t n)"
      },
      {
        "sha": "8c6d86886e960dcea79b09e41cdca5a375170500",
        "filename": "src/test/cuckoocache_tests.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 4,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7e994517f31b78206017a0adb07dab81c5709795/src/test/cuckoocache_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7e994517f31b78206017a0adb07dab81c5709795/src/test/cuckoocache_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/cuckoocache_tests.cpp?ref=7e994517f31b78206017a0adb07dab81c5709795",
        "patch": "@@ -1,11 +1,13 @@\n // Copyright (c) 2012-2020 The Bitcoin Core developers\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n #include <boost/test/unit_test.hpp>\n #include <cuckoocache.h>\n #include <deque>\n #include <random.h>\n #include <script/sigcache.h>\n+#include <shared_mutex>\n #include <test/util/setup_common.h>\n #include <thread>\n \n@@ -199,11 +201,11 @@ static void test_cache_erase_parallel(size_t megabytes)\n      * \"future proofed\".\n      */\n     std::vector<uint256> hashes_insert_copy = hashes;\n-    boost::shared_mutex mtx;\n+    std::shared_mutex mtx;\n \n     {\n         /** Grab lock to make sure we release inserts */\n-        boost::unique_lock<boost::shared_mutex> l(mtx);\n+        boost::unique_lock<std::shared_mutex> l(mtx);\n         /** Insert the first half */\n         for (uint32_t i = 0; i < (n_insert / 2); ++i)\n             set.insert(hashes_insert_copy[i]);\n@@ -217,7 +219,7 @@ static void test_cache_erase_parallel(size_t megabytes)\n         /** Each thread is emplaced with x copy-by-value\n         */\n         threads.emplace_back([&, x] {\n-            boost::shared_lock<boost::shared_mutex> l(mtx);\n+            boost::shared_lock<std::shared_mutex> l(mtx);\n             size_t ntodo = (n_insert/4)/3;\n             size_t start = ntodo*x;\n             size_t end = ntodo*(x+1);\n@@ -232,7 +234,7 @@ static void test_cache_erase_parallel(size_t megabytes)\n     for (std::thread& t : threads)\n         t.join();\n     /** Grab lock to make sure we observe erases */\n-    boost::unique_lock<boost::shared_mutex> l(mtx);\n+    boost::unique_lock<std::shared_mutex> l(mtx);\n     /** Insert the second half */\n     for (uint32_t i = (n_insert / 2); i < n_insert; ++i)\n         set.insert(hashes_insert_copy[i]);"
      },
      {
        "sha": "316756e709635f533e736e42500170a523573d2d",
        "filename": "test/lint/lint-includes.sh",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7e994517f31b78206017a0adb07dab81c5709795/test/lint/lint-includes.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7e994517f31b78206017a0adb07dab81c5709795/test/lint/lint-includes.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/lint/lint-includes.sh?ref=7e994517f31b78206017a0adb07dab81c5709795",
        "patch": "@@ -69,7 +69,6 @@ EXPECTED_BOOST_INCLUDES=(\n     boost/test/unit_test.hpp\n     boost/thread/condition_variable.hpp\n     boost/thread/mutex.hpp\n-    boost/thread/shared_mutex.hpp\n     boost/thread/thread.hpp\n )\n "
      }
    ]
  }
]