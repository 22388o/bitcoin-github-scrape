[
  {
    "sha": "3bc922d79c43113ad9face78b2c6208e38c72d47",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozYmM5MjJkNzljNDMxMTNhZDlmYWNlNzhiMmM2MjA4ZTM4YzcyZDQ3",
    "commit": {
      "author": {
        "name": "Miguel Herranz",
        "email": "miguel@ipglider.org",
        "date": "2018-04-17T18:17:13Z"
      },
      "committer": {
        "name": "Miguel Herranz",
        "email": "miguel@ipglider.org",
        "date": "2018-11-16T23:55:28Z"
      },
      "message": "rpc: Rename size to vsize in mempool related calls",
      "tree": {
        "sha": "a2e5fbadf7487d6a7ebd6f881a699af927060eed",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a2e5fbadf7487d6a7ebd6f881a699af927060eed"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3bc922d79c43113ad9face78b2c6208e38c72d47",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3bc922d79c43113ad9face78b2c6208e38c72d47",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3bc922d79c43113ad9face78b2c6208e38c72d47",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3bc922d79c43113ad9face78b2c6208e38c72d47/comments",
    "author": {
      "login": "IPGlider",
      "id": 54533,
      "node_id": "MDQ6VXNlcjU0NTMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/54533?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/IPGlider",
      "html_url": "https://github.com/IPGlider",
      "followers_url": "https://api.github.com/users/IPGlider/followers",
      "following_url": "https://api.github.com/users/IPGlider/following{/other_user}",
      "gists_url": "https://api.github.com/users/IPGlider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/IPGlider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/IPGlider/subscriptions",
      "organizations_url": "https://api.github.com/users/IPGlider/orgs",
      "repos_url": "https://api.github.com/users/IPGlider/repos",
      "events_url": "https://api.github.com/users/IPGlider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/IPGlider/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "IPGlider",
      "id": 54533,
      "node_id": "MDQ6VXNlcjU0NTMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/54533?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/IPGlider",
      "html_url": "https://github.com/IPGlider",
      "followers_url": "https://api.github.com/users/IPGlider/followers",
      "following_url": "https://api.github.com/users/IPGlider/following{/other_user}",
      "gists_url": "https://api.github.com/users/IPGlider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/IPGlider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/IPGlider/subscriptions",
      "organizations_url": "https://api.github.com/users/IPGlider/orgs",
      "repos_url": "https://api.github.com/users/IPGlider/repos",
      "events_url": "https://api.github.com/users/IPGlider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/IPGlider/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "35739976c1d9ad250ece573980c57e7e7976ae23",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/35739976c1d9ad250ece573980c57e7e7976ae23",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/35739976c1d9ad250ece573980c57e7e7976ae23"
      }
    ],
    "stats": {
      "total": 27,
      "additions": 18,
      "deletions": 9
    },
    "files": [
      {
        "sha": "3846ca52a2ba930e27f7ccb36d092e350e4fa016",
        "filename": "doc/release-notes.md",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3bc922d79c43113ad9face78b2c6208e38c72d47/doc/release-notes.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3bc922d79c43113ad9face78b2c6208e38c72d47/doc/release-notes.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes.md?ref=3bc922d79c43113ad9face78b2c6208e38c72d47",
        "patch": "@@ -198,6 +198,12 @@ RPC\n - A new `submitheader` RPC allows submitting block headers independently\n   from their block.  This is likely only useful for testing.\n \n+- In getmempoolancestors, getmempooldescendants, getmempoolentry and\n+  getrawmempool RPCs, to be consistent with the returned value and other\n+  RPCs such as getrawtransaction, vsize has been added and size is now\n+  deprecated. size will only be returned if bitcoind is started with\n+  -deprecatedrpc=size.\n+\n Configuration\n -------------\n "
      },
      {
        "sha": "47db9435da30f96717e0484866f4edcae1e405d4",
        "filename": "src/rpc/blockchain.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 2,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3bc922d79c43113ad9face78b2c6208e38c72d47/src/rpc/blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3bc922d79c43113ad9face78b2c6208e38c72d47/src/rpc/blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.cpp?ref=3bc922d79c43113ad9face78b2c6208e38c72d47",
        "patch": "@@ -359,7 +359,9 @@ static UniValue getdifficulty(const JSONRPCRequest& request)\n \n static std::string EntryDescriptionString()\n {\n-    return \"    \\\"size\\\" : n,             (numeric) virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\\n\"\n+    return \"    \\\"vsize\\\" : n,            (numeric) virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\\n\"\n+           \"    \\\"size\\\" : n,             (numeric) (DEPRECATED) same as vsize. Only returned if bitcoind is started with -deprecatedrpc=size\\n\"\n+           \"                              size will be completely removed in v0.19.\\n\"\n            \"    \\\"fee\\\" : n,              (numeric) transaction fee in \" + CURRENCY_UNIT + \" (DEPRECATED)\\n\"\n            \"    \\\"modifiedfee\\\" : n,      (numeric) transaction fee with fee deltas used for mining priority (DEPRECATED)\\n\"\n            \"    \\\"time\\\" : n,             (numeric) local time transaction entered pool in seconds since 1 Jan 1970 GMT\\n\"\n@@ -397,7 +399,8 @@ static void entryToJSON(UniValue &info, const CTxMemPoolEntry &e) EXCLUSIVE_LOCK\n     fees.pushKV(\"descendant\", ValueFromAmount(e.GetModFeesWithDescendants()));\n     info.pushKV(\"fees\", fees);\n \n-    info.pushKV(\"size\", (int)e.GetTxSize());\n+    info.pushKV(\"vsize\", (int)e.GetTxSize());\n+    if (IsDeprecatedRPCEnabled(\"size\")) info.pushKV(\"size\", (int)e.GetTxSize());\n     info.pushKV(\"fee\", ValueFromAmount(e.GetFee()));\n     info.pushKV(\"modifiedfee\", ValueFromAmount(e.GetModifiedFee()));\n     info.pushKV(\"time\", e.GetTime());"
      },
      {
        "sha": "b0ea427c2d9e9ab5d26491ba208415d2d3ad298a",
        "filename": "test/functional/mempool_packages.py",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3bc922d79c43113ad9face78b2c6208e38c72d47/test/functional/mempool_packages.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3bc922d79c43113ad9face78b2c6208e38c72d47/test/functional/mempool_packages.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/mempool_packages.py?ref=3bc922d79c43113ad9face78b2c6208e38c72d47",
        "patch": "@@ -58,9 +58,9 @@ def run_test(self):\n         assert_equal(len(mempool), MAX_ANCESTORS)\n         descendant_count = 1\n         descendant_fees = 0\n-        descendant_size = 0\n+        descendant_vsize = 0\n \n-        ancestor_size = sum([mempool[tx]['size'] for tx in mempool])\n+        ancestor_vsize = sum([mempool[tx]['vsize'] for tx in mempool])\n         ancestor_count = MAX_ANCESTORS\n         ancestor_fees = sum([mempool[tx]['fee'] for tx in mempool])\n \n@@ -79,15 +79,15 @@ def run_test(self):\n             assert_equal(mempool[x]['fees']['modified'], mempool[x]['modifiedfee'])\n             assert_equal(mempool[x]['descendantfees'], descendant_fees * COIN)\n             assert_equal(mempool[x]['fees']['descendant'], descendant_fees)\n-            descendant_size += mempool[x]['size']\n-            assert_equal(mempool[x]['descendantsize'], descendant_size)\n+            descendant_vsize += mempool[x]['vsize']\n+            assert_equal(mempool[x]['descendantsize'], descendant_vsize)\n             descendant_count += 1\n \n             # Check that ancestor calculations are correct\n             assert_equal(mempool[x]['ancestorcount'], ancestor_count)\n             assert_equal(mempool[x]['ancestorfees'], ancestor_fees * COIN)\n-            assert_equal(mempool[x]['ancestorsize'], ancestor_size)\n-            ancestor_size -= mempool[x]['size']\n+            assert_equal(mempool[x]['ancestorsize'], ancestor_vsize)\n+            ancestor_vsize -= mempool[x]['vsize']\n             ancestor_fees -= mempool[x]['fee']\n             ancestor_count -= 1\n "
      },
      {
        "sha": "e95271c3ca23fcf1777e0f141c1637a148610740",
        "filename": "test/functional/mining_prioritisetransaction.py",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3bc922d79c43113ad9face78b2c6208e38c72d47/test/functional/mining_prioritisetransaction.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3bc922d79c43113ad9face78b2c6208e38c72d47/test/functional/mining_prioritisetransaction.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/mining_prioritisetransaction.py?ref=3bc922d79c43113ad9face78b2c6208e38c72d47",
        "patch": "@@ -64,7 +64,7 @@ def run_test(self):\n         for i in range(3):\n             for j in txids[i]:\n                 assert(j in mempool)\n-                sizes[i] += mempool[j]['size']\n+                sizes[i] += mempool[j]['vsize']\n             assert(sizes[i] > MAX_BLOCK_BASE_SIZE) # Fail => raise utxo_count\n \n         # add a fee delta to something in the cheapest bucket and make sure it gets mined"
      }
    ]
  }
]