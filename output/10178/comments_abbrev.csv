jnewbery,2017-04-11T15:09:54Z,"utACK 541ceeb0ef416a87dbd3d07f370950826eca87b9, modulo @ryanofsky's style/comment nits.",https://github.com/bitcoin/bitcoin/pull/10178#issuecomment-293294492,293294492,
jnewbery,2017-04-11T16:49:41Z,utACK eeb2181b3dea071dde0d2aeb2e6a92cb53ee71c6,https://github.com/bitcoin/bitcoin/pull/10178#issuecomment-293325333,293325333,
ryanofsky,2017-04-11T19:21:21Z,"utACK eeb2181b3dea071dde0d2aeb2e6a92cb53ee71c6. Would still suggest making some edits to the description to make it clear what exact corner case was broken before and now fixed:\n\n>UpdatedTransaction was previously ~~~used by~~~ ***called to cause*** the GUI to display\ncoinbase transactions ~~~only after they have~~~ ***after having*** a block built on top of\nthem. This worked fine ~~~for~~",https://github.com/bitcoin/bitcoin/pull/10178#issuecomment-293373006,293373006,
sdaftuar,2017-04-13T15:15:19Z,re-utACK 9fececb,https://github.com/bitcoin/bitcoin/pull/10178#issuecomment-293925249,293925249,
laanwj,2017-04-17T07:35:51Z,"I think it would be good to get rid of the GUI logic that only displays generated transactions at confirmations=2. It is a left-over from the times that it was still realistic to mine locally in the GUI, and needlessly complicates this.\n\nutACK 9fececb otherwise",https://github.com/bitcoin/bitcoin/pull/10178#issuecomment-294424833,294424833,
sipa,2017-04-17T11:22:04Z,"utACK 9fececb2cbabc52cc375b84bf840fac018cc8121\n\n> I think it would be good to get rid of the GUI logic that only displays generated transactions at confirmations=2. It is a left-over from the times that it was still realistic to mine locally in the GUI, and needlessly complicates this.\n\nThat can be done as a follow-up PR?\n",https://github.com/bitcoin/bitcoin/pull/10178#issuecomment-294460259,294460259,
TheBlueMatt,2017-04-17T12:24:53Z,"Indeed, I didn't want to get into a discussion on changing the GUI to simplify internals, so left that to a separate PR. I'd say this is still pretty simple, but I'm happy to take a look at removing the display quirk if you prefer.\n\nOn April 17, 2017 3:35:56 AM EDT, ""Wladimir J. van der Laan"" <notifications@github.com> wrote:\n>I think it would be good to get rid of the GUI logic that only displ",https://github.com/bitcoin/bitcoin/pull/10178#issuecomment-294474819,294474819,
laanwj,2017-04-17T12:45:23Z,"> Indeed, I didn't want to get into a discussion on changing the GUI to simplify internals\n\nNot just to simplify internals, but it's a (virtually) untested code path. Also the core side shouldn't have to be doing this kind of acrobatics specifically to preserve a GUI quirk. If this is worth keeping it should be handled at the side of the GUI.\n\n> That can be done as a follow-up PR?\n\nOf ",https://github.com/bitcoin/bitcoin/pull/10178#issuecomment-294479217,294479217,
dcousens,2017-04-10T23:03:14Z,why is this in an extra block?,https://github.com/bitcoin/bitcoin/pull/10178#discussion_r110782830,110782830,src/wallet/wallet.cpp
TheBlueMatt,2017-04-10T23:08:07Z,"TBH I have no idea...probably copied and had a lock block, anyway, removed.",https://github.com/bitcoin/bitcoin/pull/10178#discussion_r110783429,110783429,src/wallet/wallet.cpp
ryanofsky,2017-04-11T13:48:57Z,"I found this code and comment, as well as the comment in the commit description really confusing (I think there are some words missing between ""except because"" in the commit description?). I don't get why it's important to call NotifyTransactionChanged on the coinbase transaction of the previous block when a new block is added.\n\nI would also suggest structuring the code as:\n\n```\nif (hash",https://github.com/bitcoin/bitcoin/pull/10178#discussion_r110906249,110906249,src/wallet/wallet.cpp
ryanofsky,2017-04-11T14:02:47Z,"Copy and paste error? There is no ""this transaction"" at this point.",https://github.com/bitcoin/bitcoin/pull/10178#discussion_r110910123,110910123,src/wallet/wallet.cpp
TheBlueMatt,2017-04-11T14:30:14Z,"Indeed, updated comment.",https://github.com/bitcoin/bitcoin/pull/10178#discussion_r110917487,110917487,src/wallet/wallet.cpp
TheBlueMatt,2017-04-11T14:32:14Z,"I expanded a bit on the comment. The commit message is correct, if its hard to read, any suggestions for improvements?\n\nI removed the outer-level if statement, as it is now useless, indeed.",https://github.com/bitcoin/bitcoin/pull/10178#discussion_r110918042,110918042,src/wallet/wallet.cpp
ryanofsky,2017-04-11T14:42:06Z,"Thanks, this is much better. I still have no idea why the GUI cares specifically about the second confirmation of the coinbase transaction in the previous block. Why not other transactions in the previous block? If you could add another sentence here suggesting a reason, that might be helpful.",https://github.com/bitcoin/bitcoin/pull/10178#discussion_r110920843,110920843,src/wallet/wallet.cpp
ryanofsky,2017-04-11T14:56:03Z,"> The commit message is correct, if its hard to read, any suggestions for improvements?\n\nI still don't understand the commit message so I can't say how to improve it. But here is how it parses to me:\n\n> Note that this does a full mapWallet loop after the first block\n> which is connected after restart.\n\nFine so far.\n\n> This is due to a previous bug where a coinbase transaction fro",https://github.com/bitcoin/bitcoin/pull/10178#discussion_r110924730,110924730,src/wallet/wallet.cpp
TheBlueMatt,2017-04-11T14:58:39Z,"Updated the comment, the GUI simply doesnt display such transactions until they are buried.",https://github.com/bitcoin/bitcoin/pull/10178#discussion_r110925498,110925498,src/wallet/wallet.cpp
jnewbery,2017-04-11T15:09:09Z,"I agree with @ryanofsky's suggested code change. That structure seems clearer to me.\n\nI think the commit message can be shortened and the reference to the previous bug removed. Something like:\n\n```\nThis does a full mapWallet loop after the first block is connected\nafter restart. This is so NotifyTransactionChanged() is called for\nthe coinbase transaction of the previous best block if",https://github.com/bitcoin/bitcoin/pull/10178#discussion_r110928559,110928559,src/wallet/wallet.cpp
TheBlueMatt,2017-04-11T15:35:11Z,"OK, I completely rewrote the commit message, better now?",https://github.com/bitcoin/bitcoin/pull/10178#discussion_r110936104,110936104,src/wallet/wallet.cpp
sdaftuar,2017-04-13T14:13:17Z,style nit: curly braces for the one-line `if`,https://github.com/bitcoin/bitcoin/pull/10178#discussion_r111399306,111399306,src/wallet/wallet.cpp
TheBlueMatt,2017-04-13T14:36:32Z,Fixed.,https://github.com/bitcoin/bitcoin/pull/10178#discussion_r111404698,111404698,src/wallet/wallet.cpp
