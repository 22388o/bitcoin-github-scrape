luke-jr,2017-10-12T21:30:29Z,"Hmm, a fixed icon that is disabled/enabled doesn't extend well to a tri-state when Tor is added. But that can be deferred until adding Tor I guess.",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-336277734,336277734,
promag,2017-10-13T08:51:08Z,@luke-jr We can have an icon for each state no?,https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-336391506,336391506,
meshcollider,2017-10-13T09:16:01Z,"I'm unsure, but does this also need a mention in `contrib/debian/copyright`?",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-336397726,336397726,
mess110,2017-10-13T16:14:57Z,"@promag @MeshCollider Thanks for the reviews. If you think the remaining nits are very important, I can change them.",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-336498475,336498475,
jonasschnelli,2017-10-13T22:37:23Z,"Concept ACK.\nWould prefer if we could use an icon from http://s-ings.com/typicons/.",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-336583476,336583476,
wodry,2017-10-14T02:54:54Z,"First seeing the icon I was confused, meaning was not intuitive for me.\nThe icon in the screenshot is so small, I hardly could imagine what the downgoing line is.\nIcon looked more like a star.\nBut looking at the bigger icon on https://openclipart.org/detail/190624/load-balancer I could finally see that the icon visualizes  ""technically"" correct.\nSince You said that You did several searches",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-336604923,336604923,
mess110,2017-10-14T17:53:59Z,"@wodry guess I wasn't 100% clear. I attempted to construct a proxy icon from 3 copies of https://github.com/bitcoin/bitcoin/blob/master/src/qt/res/icons/debugwindow.png but it was too much to fit in the space and the icon ended up looking too different from the others. So I chose the icon you see because it fits and is public domain\n\n@jonasschnelli I checked the link you provided. Indeed it wo",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-336652134,336652134,
jonasschnelli,2017-10-15T04:17:36Z,"Tested a bit:\n* The icon seems hard to grasp what it is (already mentioned).\n* IMO the icon should only be visible when proxy is enabled (not faded out, completely invisible)\n* Clicking on the icon should open settings and showing the network/proxy tab",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-336685303,336685303,
mess110,2017-10-17T18:10:32Z,"![image](https://user-images.githubusercontent.com/226170/31680585-72706098-b37d-11e7-88ad-028c4c723f42.png)\n\nThe new icon is made from 3 device-desktop and 1 rotated chevron from http://s-ings.com/typicons/\n\nAfter talking with @jonasschnelli, I will do the clickable icon in a different PR.",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-337319065,337319065,
rebroad,2017-10-17T18:40:48Z,"I think it only makes sense to have this as an icon if the proxy is enableable/disableable from the GUI - otherwise, why? Why not have icons for various things, e.g. bloom filters enabled too then?",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-337328324,337328324,
mess110,2017-10-25T16:39:23Z,"@promag yea, I agree, the icon needs improving. Will come up with something better",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-339392517,339392517,
Sjors,2017-11-09T11:49:36Z,"The icons at the bottom are already quite confusing. Some allow the user to take action (e.g. BTC), another does not allow action and never chances (HD). The network icon allows the user to take action, but unlike the BTC icon doesn't first show a dropdown menu, but instead disables your network without warning. \n\n<img width=""93"" alt=""schermafbeelding 2017-11-09 om 12 42 07"" src=""https://user-",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-343131766,343131766,
luke-jr,2017-11-10T14:58:00Z,"I wonder if a small ""P"" (and later ""T"" for Tor) in the connection icon would do the trick...",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-343494986,343494986,
mess110,2017-11-11T10:50:15Z,"I updated the proposal to use an icon form http://s-ings.com/typicons/ as @jonasschnelli suggested (decided to try this instead of creating an svg with P in it - curious about feedback). The set also contains a `t` icon for future Tor PR.\n\n@Sjors yea, the icons can be a bit confusing. This is why in the first version of this PR, I created proxy enabled/disabled similar to how the network icon ",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-343656302,343656302,
luke-jr,2017-11-11T17:02:01Z,"This indicates proxy for me, even though I don't use a proxy (but I have Tor enabled with `-onion`).",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-343678622,343678622,
luke-jr,2017-11-11T17:19:11Z,"> I wonder if a small ""P"" (and later ""T"" for Tor) in the connection icon would do the trick...\n\nImplemented this. It's too small. :(",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-343679735,343679735,
laanwj,2017-11-13T12:06:35Z,"> I think the security benefit of seeing the proxy icon is worth it though.\n\nI tend to agree. Let's be pragmatic about ACKing this when the functionality works, aesthetics can always be improved later.",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-343899814,343899814,
jonasschnelli,2017-11-29T23:37:43Z,"The current P icon is probably the ""Pintrest"" logo. Feels wrong. But agree, lets try to separate functionality and aesthetics.\n@mess110: maybe rebase, make a pure ""P"" icon (just a default font). This PR should not go under in icon discussions.",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-348033446,348033446,
mess110,2017-11-30T00:38:39Z,"@jonasschnelli agree and thanks. I rebased and added a proxy icon (as a simple P)\n\nShould have some time over the weekend to do the ""T"" for Tor",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-348044428,348044428,
jonasschnelli,2017-11-30T00:59:18Z,"The ""T"" (tor) indicator may be more complicated. A false indication can be fatal... and unsure how to reliable detect if we are connecting via TOR ",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-348048063,348048063,
luke-jr,2017-11-30T01:16:31Z,"> This indicates proxy for me, even though I don't use a proxy (but I have Tor enabled with -onion).\n\nReminder this bug persists (but in theory can be easiest solved by having the Tor icon).",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-348051314,348051314,
mess110,2017-11-30T01:30:00Z,"The way I was thinking of detecting if Tor is enabled is if the n variable from https://github.com/bitcoin/bitcoin/pull/11491/files#diff-2c51f64a3430117d2f6c7cb55355be66R343 is equal to https://github.com/bitcoin/bitcoin/blob/master/src/netaddress.h#L24 (in this case 3).\n\nWould that be enough?\n\nIf not, for this PR I can just check that all n are set which does not happen for -onion (thx @l",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-348053613,348053613,
lmlsna,2017-12-07T04:44:11Z,"A possible kludgey check if tor is actually up and running is to just send a dummy HTTP request directly to the tor socks proxy port. If tor is running, it will politely respond with a HTTP/1.0 501 Tor is not an HTTP Proxy, if it isn't, it won't.\n\nThis misses the possibility that the tor client is running but unable to connect, however that would result in a broken connection (as opposed to an",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-349861547,349861547,
mess110,2017-12-18T21:07:45Z,"NET_MAX is 5. I checked to see what I get from `GetProxy` for different options:\n\n|  | 0 | 1 | 2 | 3 | 4 |\n| ------------- | ------------- | ------------- | ------------- | ------------- | ------------- |\n| with no options  | false  | false  | false  | false  | false  |\n| with -proxy | false | true | true | true | false |\n| with gui default proxy | false | true | true | true | false |",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-352557768,352557768,
luke-jr,2018-01-03T10:06:08Z,"Note that the network ids aren't just arbitrary numbers - they have meanings (defined in netaddress.h).\n\nAnyhow, ""gui separate proxy"" is a Tor-specific option. So we shouldn't show ""proxy"" for that either.\n\n""Proxy"" icon should probably only be shown if NET_IPV4 *and* NET_IPV6 have a GetProxy result.\n\nThe Tor icon might be more complicated. Ideally, clicking on it would show a popup wit",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-354975417,354975417,
mess110,2018-01-15T20:51:24Z,"Rebased and made sure the proxy icon is shown if NET_IPV4 *and* NET_IPV6 have a result.\n\nFor the tooltip, I am showing ToStringIPPort for NET_IPV4. I couldn't get an ipv6 to work with the -proxy argument. Also, ToStringIPPort for NET_IPV6 returns an ipv4 format.",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-357786384,357786384,
mess110,2018-02-08T01:17:44Z,@luke-jr @promag @MeshCollider @jonasschnelli @wodry @rebroad @Sjors @laanwj @lmlsna can you please review this patch? Hope it doesn't get too buried. Thank you.,https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-363969794,363969794,
laanwj,2018-05-15T12:10:02Z,"Tested ACK 35d50aa833cea53f9c6195987256351f4b1c710a\n\nI don't think it's a good idea to use a ""P"" icon because the word for ""Proxy"" is going to be different between languages. It should be replaced with a symbol. But that can be changed later, it should not hold up the merge.\n\n",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-389143868,389143868,
mess110,2018-05-15T20:23:07Z,"Thanks for the reviews.\n\nI inlined the string creation and using `m_node.getProxy`",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-389300859,389300859,
jonasschnelli,2018-05-16T08:07:23Z,"Tested ACK 73cd5b25b901e17d24bd2ebeb7fe334f6092d3d8\nhttps://bitcoin.jonasschnelli.ch/build/611",https://github.com/bitcoin/bitcoin/pull/11491#issuecomment-389432551,389432551,
promag,2017-10-12T22:26:51Z,Sort.,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144425785,144425785,src/Makefile.qt.include
promag,2017-10-12T22:29:42Z,"Unused, remove?",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144426207,144426207,src/qt/bitcoingui.cpp
promag,2017-10-12T22:38:45Z,Already visible? Remove.,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144427664,144427664,src/qt/bitcoingui.cpp
promag,2017-10-12T22:41:23Z,Why the cosmetic in the tooltips?,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144428075,144428075,src/qt/bitcoingui.cpp
promag,2017-10-13T08:40:20Z,Nit: If enabled tooltip = `Proxy: %1` else `Proxy disabled`.,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144495765,144495765,src/qt/bitcoingui.cpp
promag,2017-10-13T08:41:41Z,`proxy_enabled`.,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144496000,144496000,src/qt/bitcoingui.cpp
promag,2017-10-13T08:42:28Z,`for (int n = 0; n < NET_MAX; ++n) {`,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144496149,144496149,src/qt/bitcoingui.cpp
promag,2017-10-13T08:42:46Z,Space after `if`. `continue` in this line.,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144496209,144496209,src/qt/bitcoingui.cpp
promag,2017-10-13T08:43:31Z,Space after `if`.,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144496360,144496360,src/qt/bitcoingui.cpp
promag,2017-10-13T08:44:46Z,"Space after `,`.\n\nNit, split in 2 lines? Or something like:\n\n```\nif (proxy_enabled) {\n   ...\n} else {\n   ...\n}\n```",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144496613,144496613,src/qt/bitcoingui.cpp
promag,2017-10-13T08:49:45Z,The `#include` above too.,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144497640,144497640,src/qt/bitcoingui.cpp
mess110,2017-10-13T16:11:08Z,"Removed space, prefer it like this for now.",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144596230,144596230,src/qt/bitcoingui.cpp
mess110,2017-10-13T16:11:46Z,I think the bold helps readability. Can remove if needed.,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144596344,144596344,src/qt/bitcoingui.cpp
promag,2017-10-13T16:25:14Z,"Nit, sort. :trollface:",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144599300,144599300,src/qt/bitcoin.qrc
promag,2017-10-13T18:14:36Z,"`GetProxy` returns `IsValid` so something like this should work:\n```cpp\nfor (int n = 0; !proxy_enabled && n < NET_MAX; ++n) {\n    proxy_enabled = GetProxy((Network) n, proxy);\n}\n```",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144623394,144623394,src/qt/bitcoingui.cpp
promag,2017-10-13T18:16:11Z,"Missing indentation. No need to be a slot, just a private member.",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144623767,144623767,src/qt/bitcoingui.h
mess110,2017-10-13T20:31:39Z,"Nice, I didn't notice GetProxy checks for valid.",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144650687,144650687,src/qt/bitcoingui.cpp
jonasschnelli,2017-10-13T22:36:45Z,"Instead of directly accessing core features, can you wrap that via clientmodel?\nThere are serval tries to detach the GUI from the rest and those little things will cause a lot of work.",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r144670340,144670340,src/qt/bitcoingui.cpp
promag,2017-10-17T21:49:02Z,Remove.,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r145266297,145266297,src/qt/bitcoingui.h
promag,2017-10-17T21:53:33Z,"Suggestion to remove `UniValue` dependency:\n```cpp\nbool ClientModel::GetProxyInfo(std::string& ip_port) const\n{\n    for (int n = 0; n < NET_MAX; ++n) {\n        proxyType proxy;\n        if (GetProxy((Network) n, proxy)) {\n            ip_port = proxy.proxy.ToStringIPPort();\n            return true;\n        }\n    }\n    return false;\n}\n```\nHaven't tested.",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r145267207,145267207,src/qt/clientmodel.cpp
wodry,2017-10-18T05:13:58Z,"I can not see how the new icon relates to proxy. Instead of showing ""something with computer and cable"", maybe simply show a ""P"" ?",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r145317772,145317772,src/qt/clientmodel.cpp
promag,2017-10-25T15:18:12Z,Remove as it is already enabled?,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r146891706,146891706,src/qt/bitcoingui.cpp
promag,2017-10-25T15:18:56Z,If idea is to show/hide then the pixmap can be set when the label is created.,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r146891900,146891900,src/qt/bitcoingui.cpp
promag,2017-10-25T15:20:15Z,"Nit, some may prefer `std::pair<bool, std::string> ClientModel::getProxyInfo() const;`, both work for me.",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r146892284,146892284,src/qt/clientmodel.cpp
mess110,2017-10-25T16:36:08Z,"In the future, I plan to support a Tor icon, so I prefer to do this here",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r146915410,146915410,src/qt/bitcoingui.cpp
mess110,2017-10-25T16:37:30Z,Gonna go with what is currently implemented,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r146915804,146915804,src/qt/clientmodel.cpp
promag,2017-10-25T23:39:49Z,Even in that case it can't change in runtime right?,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r147015420,147015420,src/qt/bitcoingui.cpp
Sjors,2018-02-08T13:27:08Z,Nit: why does git think something changed here?,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r166932009,166932009,contrib/debian/copyright
Sjors,2018-02-08T13:37:02Z,"Although toggling proxy requires a restart, I prefer it if the UI doesn't assume that (to prevent a regression later). Not a show-stopper perse, but this code could confuse people.\n\nSuggestion: add an `if` statement that checks if the icon has already been drawn. If so, call `show()`.",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r166934501,166934501,src/qt/bitcoingui.cpp
mess110,2018-04-26T21:01:17Z,I moved one element so it is alphabetical,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r184529648,184529648,contrib/debian/copyright
ryanofsky,2018-05-15T18:43:02Z,Could call `m_node.getProxy()` here and drop `netbase.h` include above. This would be a little more future-proof with #10102.,https://github.com/bitcoin/bitcoin/pull/11491#discussion_r188395200,188395200,src/qt/clientmodel.cpp
promag,2018-05-15T19:24:03Z,"nit, unrelated change. If you happen to push again consider removing this change.",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r188407403,188407403,contrib/debian/copyright
promag,2018-05-15T19:25:24Z,"nit, could be initialized in the declaration as per developer notes.",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r188407802,188407802,src/qt/bitcoingui.cpp
promag,2018-05-15T19:28:56Z,"nit, IMO the label pixmap could be initialized when the label is created above.",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r188408757,188408757,src/qt/bitcoingui.cpp
promag,2018-05-15T19:29:05Z,"nit, could inline this below.",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r188408795,188408795,src/qt/bitcoingui.cpp
mess110,2018-05-15T20:12:16Z,"`netbase.h` is still needed for proxyType, but I can change to `m_node.getProxy`",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r188420882,188420882,src/qt/clientmodel.cpp
mess110,2018-05-15T20:19:51Z,"This is consistent with `labelWalletHDStatusIcon`, so I will prefer the approach taken",https://github.com/bitcoin/bitcoin/pull/11491#discussion_r188422963,188422963,src/qt/bitcoingui.cpp
