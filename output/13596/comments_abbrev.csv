fanquake,2018-07-05T00:17:29Z,"@mruddy ZeroMQ 4.2.3 is currently used in the depends system, but that doesn't necessarily mean it's the minimum version required to build Core. We don't currently have a minimum required version stated in the docs, but I assume the use of these functions should introduce one.\n\nHaving a quick look at the [zmq api docs](http://api.zeromq.org/), it looks like they are both available from 3.2.x o",https://github.com/bitcoin/bitcoin/pull/13596#issuecomment-402575089,402575089,
mruddy,2018-07-05T03:11:40Z,"@fanquake Good point. Yep, they've been around for a while (since 2012 - 2013).\n\nI found a mention in https://github.com/zeromq/libzmq/blob/master/NEWS in section `3.2.0 (RC1), released on 2012/06/05`.\n\nI also found that the commits for `zmq_ctx_term` https://github.com/zeromq/libzmq/commit/edd43e1ca45b86b649cbcbdada801b04d2895001 and `zmq_ctx_new` https://github.com/zeromq/libzmq/commit/6",https://github.com/bitcoin/bitcoin/pull/13596#issuecomment-402594959,402594959,
fanquake,2018-07-05T23:05:13Z,"In that case, please update [dependencies.md](https://github.com/bitcoin/bitcoin/blob/master/doc/dependencies.md) with what would be the new minimum required version.\n\nI'd also suggest combining these changes into #13578, so that the zmq bump, testing, and any minimum version requirement discussion can happen together.",https://github.com/bitcoin/bitcoin/pull/13596#issuecomment-402877149,402877149,
mruddy,2018-07-06T03:20:08Z,"@fanquake Sure, I'll combine this with #13578. I did more digging. We already require 4.x or later in the configure script. That aligns with Debian and Ubuntu packages for still supported releases (see https://packages.ubuntu.com/search?keywords=libzmq3-dev and https://packages.debian.org/search?keywords=libzmq3-dev). The nice thing is that the ZMQ project has repos for common distros that would m",https://github.com/bitcoin/bitcoin/pull/13596#issuecomment-402914023,402914023,
promag,2018-07-04T23:37:51Z,Can be called before context creation?,https://github.com/bitcoin/bitcoin/pull/13596#discussion_r200210429,200210429,src/zmq/zmqnotificationinterface.cpp
mruddy,2018-07-05T02:58:50Z,"Yes, in practice, it seems that it can be. The reason why I still put it after context creation is because of this quote in the API docs at http://api.zeromq.org/master:zmq: `Before using any ØMQ library functions you must create a ØMQ context.`\n\nedit: I just looked at the code. Yeah, I might have been too pedantic. As long as the API doc is not a contract, it's safe to move the call earlier: ",https://github.com/bitcoin/bitcoin/pull/13596#discussion_r200222942,200222942,src/zmq/zmqnotificationinterface.cpp
promag,2018-07-05T06:17:26Z,"It can matter if `zmq_ctx_new` fails for some reason, then you don't get the version in the logs.",https://github.com/bitcoin/bitcoin/pull/13596#discussion_r200242189,200242189,src/zmq/zmqnotificationinterface.cpp
mruddy,2018-07-05T11:20:08Z,"Makes sense. Updated, thanks!",https://github.com/bitcoin/bitcoin/pull/13596#discussion_r200316917,200316917,src/zmq/zmqnotificationinterface.cpp
