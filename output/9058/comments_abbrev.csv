laanwj,2016-11-03T09:17:20Z,"I'm not sure I understand this: is the protocol change needed just to fix the test?\n\nNit: this should not be labeled ""tests"" if it also involves a protocol change: if there is a protocol change that would be the primary focus, I was also confused by the title.\n",https://github.com/bitcoin/bitcoin/pull/9058#issuecomment-258093643,258093643,
ryanofsky,2016-11-03T10:20:05Z,"I'll add more detail to the third commit message. Making nodes always respond to getblocktxn requests instead of silently ignoring requests for old blocks (depth > 10) fixes a race in the syncing protocol that only happens in the test environment, because the test environment generates many new blocks very quickly, which wouldn't happen in the real world.\n",https://github.com/bitcoin/bitcoin/pull/9058#issuecomment-258106021,258106021,
TheBlueMatt,2016-11-03T12:25:43Z,"Note that while this is incredibly unlikely on main net, due to the bursts there, this could conceivably happen on test net.\n\nOn November 3, 2016 6:20:13 AM EDT, Russell Yanofsky notifications@github.com wrote:\n\n> I'll add more detail to the third commit message. Making nodes always\n> respond to getblocktxn requests instead of silently ignoring requests\n> for old blocks (depth > 10) fixes a ",https://github.com/bitcoin/bitcoin/pull/9058#issuecomment-258128583,258128583,
TheBlueMatt,2016-11-03T12:26:47Z,"Concept ACK\n\nOn November 1, 2016 10:54:19 AM EDT, Russell Yanofsky notifications@github.com wrote:\n\n> See commit messages for details. There are two test fixes and a\n> protocol change. Corresponding BIP update is\n> https://github.com/bitcoin/bips/pull/469.\n> You can view, comment on, or merge this pull request online at:\n> \n>  https://github.com/bitcoin/bitcoin/pull/9058\n> \n> -- Commit ",https://github.com/bitcoin/bitcoin/pull/9058#issuecomment-258128791,258128791,
ryanofsky,2016-11-03T14:24:52Z,"Updated the commit message. For completeness, I'll mention that I did also implement an alternate fix for for the timeouts at https://github.com/ryanofsky/bitcoin/commit/36692c9b426a23fb8ce9e32b5ffee7920b31c98b (`Get rid of MAX_GETBLOCKTXN_DEPTH constant`).\n",https://github.com/bitcoin/bitcoin/pull/9058#issuecomment-258156780,258156780,
sdaftuar,2016-11-09T02:08:17Z,"utACK dac53b58b555183ccc0d5e64c428528267cd98b3\n\nNote that the behavior this is changing could also be problematic for users on mainnet, say if you had an edge router whose network went down for a couple hours -- on resumption it might relay the first of a batch of blocks as a compact block, but then ignore the subsequent GETBLOCKTXN if its tip rapidly advances in the meantime as it catches up.\n",https://github.com/bitcoin/bitcoin/pull/9058#issuecomment-259317440,259317440,
laanwj,2016-11-11T10:02:17Z,"Going to merge this, as the random errors in the segwit test are starting to be really annoying.\n",https://github.com/bitcoin/bitcoin/pull/9058#issuecomment-259923539,259923539,
sdaftuar,2016-11-19T21:50:23Z,@TheBlueMatt Should this be tagged for backport to 0.13?\n,https://github.com/bitcoin/bitcoin/pull/9058#issuecomment-261741985,261741985,
TheBlueMatt,2016-11-19T22:41:12Z,"It's largely a fix for QA instability.... What is our normal process for that?\n\nOn November 19, 2016 1:50:27 PM PST, Suhas Daftuar notifications@github.com wrote:\n\n> @TheBlueMatt Should this be tagged for backport to 0.13?\n> \n> ## \n> \n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub:\n> https://github.com/bitcoin/bitcoin/pull/9058#is",https://github.com/bitcoin/bitcoin/pull/9058#issuecomment-261744598,261744598,
sdaftuar,2016-11-19T23:03:17Z,"Well usually QA instability is addressed by changing the tests, and I think we tend to be pretty liberal about backporting test changes.\n\nPersonally I think it makes sense to backport this behavior change, as I mentioned above I think this is basically a bugfix since it could be triggered in some mainnet configurations as well, and I think the patch here is small and low risk.  Not sure if every",https://github.com/bitcoin/bitcoin/pull/9058#issuecomment-261745699,261745699,
TheBlueMatt,2016-11-20T00:46:33Z,"Yea, I'm OK with this being backported.\n",https://github.com/bitcoin/bitcoin/pull/9058#issuecomment-261750227,261750227,
sdaftuar,2016-11-07T19:22:56Z,"Perhaps this should be inserted at the end rather than the beginning of vRecvGetData, to maintain ordering with other block requests.\n",https://github.com/bitcoin/bitcoin/pull/9058#discussion_r86847895,86847895,src/main.cpp
ryanofsky,2016-11-07T19:36:56Z,"Thanks, switched to push_back.\n",https://github.com/bitcoin/bitcoin/pull/9058#discussion_r86851101,86851101,src/main.cpp
TheBlueMatt,2016-11-11T23:46:50Z,"Oops, usually v refers to the type being a vector, but this is just a single inv.\n",https://github.com/bitcoin/bitcoin/pull/9058#discussion_r87676593,87676593,src/main.cpp
ryanofsky,2016-11-14T19:03:30Z,"Thanks, corrected in #9160\n",https://github.com/bitcoin/bitcoin/pull/9058#discussion_r87869024,87869024,src/main.cpp
