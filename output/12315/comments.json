[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362005742",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362005742",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 362005742,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjAwNTc0Mg==",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?u=36fd486ae632febf8a567949f0d82db936bdece4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-31T17:22:23Z",
    "updated_at": "2018-01-31T17:30:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "`p2sh-p2wpkh` addresses along with the `p2wpkh` raw script are still visible in the scripts area in dumpwallet.\r\n`importwallet` behaves the same (will import **all** scriptpubkey types)\r\nI've set the address to be written in the dump to be `[unknown address type]` if neither legacy, p2sh-segwit or bech32 are set in the client, but I'm not sure if it could ever happen.\r\nIn any case, it doesn't affect `importwallet` which will still import such dumps successfully.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362005742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362015034",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362015034",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 362015034,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjAxNTAzNA==",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?u=36fd486ae632febf8a567949f0d82db936bdece4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-31T17:52:30Z",
    "updated_at": "2018-01-31T17:52:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "Actually, this is not good enough.  If an uncompressed privkey is being dumped, the address should be a p2pkh one regardless of the global setting.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362015034/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362019598",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362019598",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 362019598,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjAxOTU5OA==",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?u=36fd486ae632febf8a567949f0d82db936bdece4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-31T18:07:41Z",
    "updated_at": "2018-01-31T18:07:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Moved the decision as to which address we should output to after `CKey key` is set so we can check if it's compressed or not.\r\nA mixed output looks like :\r\n\r\n```\r\n# extended private masterkey: tprv8ZgxMBicQKsPe1mq9Pnix5Ui8nJAFhT4CTcMSK881Nyg1H6AF4zyASDK55NtwbG7mW811RXsLZpJCzN1wLDF8CN2urZprbTUL5inwqKNMFG\r\n\r\n93VarZKnS5AGpxz86jLJ3amfXyVqY5eAjQ93noAshDYCbj55RW8 1970-01-01T00:00:01Z label= # addr=mzaNtEKZ62cqBUo3vNyYMURCzgqzFd9aGU\r\ncNQYFxubhW4PhxubRZzDhPnaU3vFifU2XoohqfQyFuCSNcrwJsTQ 2018-01-31T18:00:52Z reserve=1 # addr=bcrt1qpm5uqjvw6mqmqgdanu7q248pppcpec9ascwhle hdkeypath=m/0'/0'/8'\r\ncQp1biWyU45diaMQNpjgnHpVKutNMWJwwu1h9MrNRQLHVenAGu74 2018-01-31T18:00:52Z reserve=1 # addr=bcrt1qz5rqcfpzwh4hmugdrgjytwkv42xf9ymajuq9hq hdkeypath=m/0'/0'/0'\r\n```\r\n\r\nSegwit scriptpubkeys are not created for this uncompressed key on `importwallet`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362019598/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362125939",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362125939",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 362125939,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjEyNTkzOQ==",
    "user": {
      "login": "devrandom",
      "id": 107096,
      "node_id": "MDQ6VXNlcjEwNzA5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/107096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/devrandom",
      "html_url": "https://github.com/devrandom",
      "followers_url": "https://api.github.com/users/devrandom/followers",
      "following_url": "https://api.github.com/users/devrandom/following{/other_user}",
      "gists_url": "https://api.github.com/users/devrandom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/devrandom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/devrandom/subscriptions",
      "organizations_url": "https://api.github.com/users/devrandom/orgs",
      "repos_url": "https://api.github.com/users/devrandom/repos",
      "events_url": "https://api.github.com/users/devrandom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/devrandom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-01T01:15:28Z",
    "updated_at": "2018-02-01T01:15:28Z",
    "author_association": "NONE",
    "body": "I tested this by:\r\n\r\n- creating a wallet using v0.14.2, and generating one address\r\n- re-opening the wallet using bitcoind from this PR and dumping\r\n\r\nThe resulting dump has bech32 output for the old generated address.  I assume this wasn't the intention?\r\n\r\nHere are the dumps.  With 0.14.2:\r\n\r\n    cNfTtkT9q15ozS2ESSVcTEXaZorQwrDkwioFZgniwrqVJzs6DFAJ 2018-02-01T00:08:58Z label= # addr=mv7rgSAEUbJe3gnAsEmdSZS8koSYwD2S7G hdkeypath=m/0'/0'/1'\r\n\r\nand with this PR:\r\n\r\n    cNfTtkT9q15ozS2ESSVcTEXaZorQwrDkwioFZgniwrqVJzs6DFAJ 2018-02-01T00:08:58Z label= # addr=bcrt1q5q46yxf6gaelwlx8253py0qdyqzst32dtpf04e hdkeypath=m/0'/0'/1'\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362125939/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362130129",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362130129",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 362130129,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjEzMDEyOQ==",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?u=36fd486ae632febf8a567949f0d82db936bdece4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-01T01:39:28Z",
    "updated_at": "2018-02-01T01:39:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Right, I haven't identified a way of telling whether keys were added before or after the wallet upgrade for bech32.\r\nIn this PR the output address type is only decided by what's set in the global setting.  The only way to get the base58 addresses back is by changing the setting to addresstype=legacy.  Maybe I missed some marker in the wallet that suggests the point of upgrade?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362130129/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362131002",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362131002",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 362131002,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjEzMTAwMg==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-01T01:44:22Z",
    "updated_at": "2018-02-01T01:44:22Z",
    "author_association": "MEMBER",
    "body": "You can check which of the corresponding addresses has a label set. Typically this will only be one of the P2PKH, P2SH-P2WPKH, or P2WPKH ones. If so, you could just output that exact one. Unfortunately this won't work for imported keys, as they get the label assigned to all 3.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362131002/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362140721",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362140721",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 362140721,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjE0MDcyMQ==",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?u=36fd486ae632febf8a567949f0d82db936bdece4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-01T02:42:50Z",
    "updated_at": "2018-02-01T02:42:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks!  I'll see what I can do.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362140721/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362144245",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362144245",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 362144245,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjE0NDI0NQ==",
    "user": {
      "login": "devrandom",
      "id": 107096,
      "node_id": "MDQ6VXNlcjEwNzA5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/107096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/devrandom",
      "html_url": "https://github.com/devrandom",
      "followers_url": "https://api.github.com/users/devrandom/followers",
      "following_url": "https://api.github.com/users/devrandom/following{/other_user}",
      "gists_url": "https://api.github.com/users/devrandom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/devrandom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/devrandom/subscriptions",
      "organizations_url": "https://api.github.com/users/devrandom/orgs",
      "repos_url": "https://api.github.com/users/devrandom/repos",
      "events_url": "https://api.github.com/users/devrandom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/devrandom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-01T03:05:08Z",
    "updated_at": "2018-02-01T03:05:08Z",
    "author_association": "NONE",
    "body": "So perhaps the thing to do is to output any of the address types that have a label, and if none have a label output the global type.  So up to three addresses per line.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362144245/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362148114",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362148114",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 362148114,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjE0ODExNA==",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?u=36fd486ae632febf8a567949f0d82db936bdece4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-01T03:32:54Z",
    "updated_at": "2018-02-01T03:32:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "@devrandom sorry the page didn't auto update with your comment.  So you're saying that multiple addresses per entry is better?\r\nWith this push, the first hit is used.  I guess I see your point now though.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362148114/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362173894",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362173894",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 362173894,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjE3Mzg5NA==",
    "user": {
      "login": "devrandom",
      "id": 107096,
      "node_id": "MDQ6VXNlcjEwNzA5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/107096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/devrandom",
      "html_url": "https://github.com/devrandom",
      "followers_url": "https://api.github.com/users/devrandom/followers",
      "following_url": "https://api.github.com/users/devrandom/following{/other_user}",
      "gists_url": "https://api.github.com/users/devrandom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/devrandom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/devrandom/subscriptions",
      "organizations_url": "https://api.github.com/users/devrandom/orgs",
      "repos_url": "https://api.github.com/users/devrandom/repos",
      "events_url": "https://api.github.com/users/devrandom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/devrandom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-01T06:44:37Z",
    "updated_at": "2018-02-01T06:44:37Z",
    "author_association": "NONE",
    "body": "Given Sipa's point, with imported keys you'd outputting the first address type in the `if` statement, not necessarily the type that the user is actually using or expecting.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362173894/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362320220",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362320220",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 362320220,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjMyMDIyMA==",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?u=36fd486ae632febf8a567949f0d82db936bdece4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-01T16:26:21Z",
    "updated_at": "2018-02-01T16:26:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "(sorry for mass pushing, I'll push to a side branch for now)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362320220/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362347225",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362347225",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 362347225,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjM0NzIyNQ==",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?u=36fd486ae632febf8a567949f0d82db936bdece4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-01T17:49:21Z",
    "updated_at": "2018-02-01T22:03:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "I believe this push does things more along the lines that you guys suggested.  A couple things :\r\n\r\n1. If you set a label on an imported privkey, then try to set different labels to either its p2pkh or p2wpkh addresses, they will not show up in dumpwallet.  The label set to the privkey will show up instead.\r\n2. If you set a label on an imported privkey, then try to set a different label on its p2sh-p2wpkh address, its label will be used in the umpwallet entry.\r\n3. Change addresses, even if generated by `getrawchangeaddress` will not retain their original address type, that's because they have no label.\r\n\r\nHere's an example dump :\r\nhttps://gist.github.com/fivepiece/fe8e708264c390e0e943e54cec6d1162\r\n\r\nYou can see imported compressed and uncompressed keys and keys that were generated by `getnewaddress` retain their original type.\r\nThings like `reserve` , `change` and `hdmaster` (and other non `label`s) will have their output address set to the user's global setting.\r\nI've also added the case of outputting p2sh-p2wpkh addresses in the dump for non address book keys (in the `switch` statement) as the user might actually want to dump reserved keys as p2sh-p2wpkh.\r\n\r\nIn the gist, the line :\r\n```\r\n0014d6e506edcaf58910c27c4d8cbe94014552297808 1970-01-01T00:00:00Z script=1 # addr=2N1csGz3tHSBwXaLsHULSWj2PSphzoWvFPX\r\n```\r\nis a result of `importpubkey` with an compressed pubkey.  It's the p2sh-p2wpkh script for it.  I think this is new.  It doesn't happen for `importpubkey` with an uncompressed pubkey.\r\n\r\nI'll go over the tests now.  It's getting an address entry that looks like `mx5AyoDPJViVFaAu9VFMQ1MbwiUtTq8qJg,2MxskE9rmHDyK6pwdwM55ZFdAk3HtkQiwNW` so ~it currently breaks.~ I added a change to the test runner for this case.\r\n\r\nCheers",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362347225/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362698322",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362698322",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 362698322,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjY5ODMyMg==",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?u=36fd486ae632febf8a567949f0d82db936bdece4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-02T20:30:14Z",
    "updated_at": "2018-02-02T20:35:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "~I think that I'm getting the wrong addresses for p2wpkh and probably p2sh-p2wpkh too.  Looking into it.~\r\nNope, false alarm.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362698322/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363409840",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-363409840",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 363409840,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MzQwOTg0MA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-06T12:38:40Z",
    "updated_at": "2018-02-06T12:38:40Z",
    "author_association": "MEMBER",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363409840/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363538843",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-363538843",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 363538843,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MzUzODg0Mw==",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?u=36fd486ae632febf8a567949f0d82db936bdece4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-06T19:33:54Z",
    "updated_at": "2018-02-06T19:33:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "Moved things to a function per @laanwj review, I'm not sure if any locks or further wallet availability checks are needed though.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363538843/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363586578",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-363586578",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 363586578,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MzU4NjU3OA==",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?u=36fd486ae632febf8a567949f0d82db936bdece4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-06T22:27:22Z",
    "updated_at": "2018-02-06T22:27:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Actually, per @sipa's suggestion to use `GetAllDestinationsForKey()` for the labeled addresses, we can use `GetDestinationForKey()`, requesting a `g_address_type` for the unlabeled ones and remove the switch-case stuff altogether.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363586578/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363596021",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-363596021",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 363596021,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MzU5NjAyMQ==",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?u=36fd486ae632febf8a567949f0d82db936bdece4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-06T23:04:55Z",
    "updated_at": "2018-02-06T23:04:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "One commit now",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363596021/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363631009",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-363631009",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 363631009,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MzYzMTAwOQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-07T02:02:46Z",
    "updated_at": "2018-02-07T02:02:46Z",
    "author_association": "MEMBER",
    "body": "Lightly tested ACK 45eea40aa88f047111a9b1151fe4d1bad5c560e2",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363631009/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363922542",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-363922542",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 363922542,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MzkyMjU0Mg==",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?u=447cdc9e2966cbee415545c8ff452954ee1209af&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-07T21:50:16Z",
    "updated_at": "2018-02-07T21:50:16Z",
    "author_association": "MEMBER",
    "body": "LGTM, thanks for doing this :) \r\nutACK https://github.com/bitcoin/bitcoin/pull/12315/commits/45eea40aa88f047111a9b1151fe4d1bad5c560e2",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363922542/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364044235",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-364044235",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
    "id": 364044235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDA0NDIzNQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-08T08:55:52Z",
    "updated_at": "2018-02-08T08:55:52Z",
    "author_association": "MEMBER",
    "body": "utACK 45eea40",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364044235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165540242",
    "pull_request_review_id": 93498694,
    "id": 165540242,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NTU0MDI0Mg==",
    "diff_hunk": "@@ -729,12 +729,60 @@ UniValue dumpwallet(const JSONRPCRequest& request)\n     for (std::vector<std::pair<int64_t, CKeyID> >::const_iterator it = vKeyBirth.begin(); it != vKeyBirth.end(); it++) {\n         const CKeyID &keyid = it->second;\n         std::string strTime = EncodeDumpTime(it->first);\n-        std::string strAddr = EncodeDestination(keyid);\n+        std::string strAddr;\n+        std::string strLabel;\n+        bool fLabelFound = false;",
    "path": "src/wallet/rpcdump.cpp",
    "position": null,
    "original_position": 7,
    "commit_id": "45eea40aa88f047111a9b1151fe4d1bad5c560e2",
    "original_commit_id": "5baed68a31e497abe8e2fe22435559c61fc1a0a6",
    "user": {
      "login": "devrandom",
      "id": 107096,
      "node_id": "MDQ6VXNlcjEwNzA5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/107096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/devrandom",
      "html_url": "https://github.com/devrandom",
      "followers_url": "https://api.github.com/users/devrandom/followers",
      "following_url": "https://api.github.com/users/devrandom/following{/other_user}",
      "gists_url": "https://api.github.com/users/devrandom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/devrandom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/devrandom/subscriptions",
      "organizations_url": "https://api.github.com/users/devrandom/orgs",
      "repos_url": "https://api.github.com/users/devrandom/repos",
      "events_url": "https://api.github.com/users/devrandom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/devrandom/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Can `fLabelFound` declaration be moved inside the if statement?",
    "created_at": "2018-02-02T01:46:47Z",
    "updated_at": "2018-02-06T23:03:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r165540242",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165540242"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r165540242"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165540242/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 734,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165540491",
    "pull_request_review_id": 93498694,
    "id": 165540491,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NTU0MDQ5MQ==",
    "diff_hunk": "@@ -729,12 +729,60 @@ UniValue dumpwallet(const JSONRPCRequest& request)\n     for (std::vector<std::pair<int64_t, CKeyID> >::const_iterator it = vKeyBirth.begin(); it != vKeyBirth.end(); it++) {\n         const CKeyID &keyid = it->second;\n         std::string strTime = EncodeDumpTime(it->first);\n-        std::string strAddr = EncodeDestination(keyid);\n+        std::string strAddr;\n+        std::string strLabel;\n+        bool fLabelFound = false;\n         CKey key;\n         if (pwallet->GetKey(keyid, key)) {\n+            if (!key.IsCompressed()) {\n+                strAddr = EncodeDestination(keyid);\n+                strLabel = EncodeDumpString(pwallet->mapAddressBook[keyid].name);\n+                fLabelFound = true;",
    "path": "src/wallet/rpcdump.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "45eea40aa88f047111a9b1151fe4d1bad5c560e2",
    "original_commit_id": "5baed68a31e497abe8e2fe22435559c61fc1a0a6",
    "user": {
      "login": "devrandom",
      "id": 107096,
      "node_id": "MDQ6VXNlcjEwNzA5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/107096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/devrandom",
      "html_url": "https://github.com/devrandom",
      "followers_url": "https://api.github.com/users/devrandom/followers",
      "following_url": "https://api.github.com/users/devrandom/following{/other_user}",
      "gists_url": "https://api.github.com/users/devrandom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/devrandom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/devrandom/subscriptions",
      "organizations_url": "https://api.github.com/users/devrandom/orgs",
      "repos_url": "https://api.github.com/users/devrandom/repos",
      "events_url": "https://api.github.com/users/devrandom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/devrandom/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Should this be set true only if it's found in address book?",
    "created_at": "2018-02-02T01:48:59Z",
    "updated_at": "2018-02-06T23:03:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r165540491",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165540491"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r165540491"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165540491/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 740,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165545808",
    "pull_request_review_id": 93498694,
    "id": 165545808,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NTU0NTgwOA==",
    "diff_hunk": "@@ -47,8 +47,14 @@ def read_dump(file_name, addrs, script_addrs, hd_master_addr_old):\n \n                     # count key types\n                     for addrObj in addrs:\n-                        if addrObj['address'] == addr and addrObj['hdkeypath'] == keypath and keytype == \"label=\":\n-                            found_addr += 1\n+                        if addrObj['address'] == addr.split(\",\")[0] and addrObj['hdkeypath'] == keypath and keytype == \"label=\":\n+                            # ensure we only add the length of the set of addresses in an entry\n+                            # containing multiple addresses if it is the expected p2wsh-p2wpkh\n+                            # we added in the test\n+                            if len(set(addr.split(\",\"))) > 1 and addr.split(\",\")[1] == script_addrs[1]:\n+                                found_addr += len(set(addr.split(\",\")))",
    "path": "test/functional/wallet_dump.py",
    "position": null,
    "original_position": 11,
    "commit_id": "45eea40aa88f047111a9b1151fe4d1bad5c560e2",
    "original_commit_id": "5baed68a31e497abe8e2fe22435559c61fc1a0a6",
    "user": {
      "login": "devrandom",
      "id": 107096,
      "node_id": "MDQ6VXNlcjEwNzA5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/107096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/devrandom",
      "html_url": "https://github.com/devrandom",
      "followers_url": "https://api.github.com/users/devrandom/followers",
      "following_url": "https://api.github.com/users/devrandom/following{/other_user}",
      "gists_url": "https://api.github.com/users/devrandom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/devrandom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/devrandom/subscriptions",
      "organizations_url": "https://api.github.com/users/devrandom/orgs",
      "repos_url": "https://api.github.com/users/devrandom/repos",
      "events_url": "https://api.github.com/users/devrandom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/devrandom/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "this line seems to be unreached when this test is actually run",
    "created_at": "2018-02-02T02:33:52Z",
    "updated_at": "2018-02-06T23:03:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r165545808",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165545808"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r165545808"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165545808/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 55,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165652850",
    "pull_request_review_id": 93630297,
    "id": 165652850,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NTY1Mjg1MA==",
    "diff_hunk": "@@ -729,12 +729,60 @@ UniValue dumpwallet(const JSONRPCRequest& request)\n     for (std::vector<std::pair<int64_t, CKeyID> >::const_iterator it = vKeyBirth.begin(); it != vKeyBirth.end(); it++) {\n         const CKeyID &keyid = it->second;\n         std::string strTime = EncodeDumpTime(it->first);\n-        std::string strAddr = EncodeDestination(keyid);\n+        std::string strAddr;\n+        std::string strLabel;\n+        bool fLabelFound = false;",
    "path": "src/wallet/rpcdump.cpp",
    "position": null,
    "original_position": 7,
    "commit_id": "45eea40aa88f047111a9b1151fe4d1bad5c560e2",
    "original_commit_id": "5baed68a31e497abe8e2fe22435559c61fc1a0a6",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yep, will do.",
    "created_at": "2018-02-02T14:07:07Z",
    "updated_at": "2018-02-06T23:03:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r165652850",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165652850"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r165652850"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165652850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 734,
    "side": "RIGHT",
    "in_reply_to_id": 165540242
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165652882",
    "pull_request_review_id": 93630345,
    "id": 165652882,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NTY1Mjg4Mg==",
    "diff_hunk": "@@ -729,12 +729,60 @@ UniValue dumpwallet(const JSONRPCRequest& request)\n     for (std::vector<std::pair<int64_t, CKeyID> >::const_iterator it = vKeyBirth.begin(); it != vKeyBirth.end(); it++) {\n         const CKeyID &keyid = it->second;\n         std::string strTime = EncodeDumpTime(it->first);\n-        std::string strAddr = EncodeDestination(keyid);\n+        std::string strAddr;\n+        std::string strLabel;\n+        bool fLabelFound = false;\n         CKey key;\n         if (pwallet->GetKey(keyid, key)) {\n+            if (!key.IsCompressed()) {\n+                strAddr = EncodeDestination(keyid);\n+                strLabel = EncodeDumpString(pwallet->mapAddressBook[keyid].name);\n+                fLabelFound = true;",
    "path": "src/wallet/rpcdump.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "45eea40aa88f047111a9b1151fe4d1bad5c560e2",
    "original_commit_id": "5baed68a31e497abe8e2fe22435559c61fc1a0a6",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ah good call.  The uncompressed key might belong to an internal entry like change.",
    "created_at": "2018-02-02T14:07:17Z",
    "updated_at": "2018-02-06T23:03:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r165652882",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165652882"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r165652882"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165652882/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 740,
    "side": "RIGHT",
    "in_reply_to_id": 165540491
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165653340",
    "pull_request_review_id": 93630896,
    "id": 165653340,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NTY1MzM0MA==",
    "diff_hunk": "@@ -47,8 +47,14 @@ def read_dump(file_name, addrs, script_addrs, hd_master_addr_old):\n \n                     # count key types\n                     for addrObj in addrs:\n-                        if addrObj['address'] == addr and addrObj['hdkeypath'] == keypath and keytype == \"label=\":\n-                            found_addr += 1\n+                        if addrObj['address'] == addr.split(\",\")[0] and addrObj['hdkeypath'] == keypath and keytype == \"label=\":\n+                            # ensure we only add the length of the set of addresses in an entry\n+                            # containing multiple addresses if it is the expected p2wsh-p2wpkh\n+                            # we added in the test\n+                            if len(set(addr.split(\",\"))) > 1 and addr.split(\",\")[1] == script_addrs[1]:\n+                                found_addr += len(set(addr.split(\",\")))",
    "path": "test/functional/wallet_dump.py",
    "position": null,
    "original_position": 11,
    "commit_id": "45eea40aa88f047111a9b1151fe4d1bad5c560e2",
    "original_commit_id": "5baed68a31e497abe8e2fe22435559c61fc1a0a6",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good catch :) the test was passing for because I broke it.  I'll set the test to check for the p2sh-p2wpkh address specifically for the key it was added to.",
    "created_at": "2018-02-02T14:09:13Z",
    "updated_at": "2018-02-06T23:03:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r165653340",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165653340"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r165653340"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165653340/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 55,
    "side": "RIGHT",
    "in_reply_to_id": 165545808
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166280928",
    "pull_request_review_id": 94325663,
    "id": 166280928,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NjI4MDkyOA==",
    "diff_hunk": "@@ -729,12 +729,62 @@ UniValue dumpwallet(const JSONRPCRequest& request)\n     for (std::vector<std::pair<int64_t, CKeyID> >::const_iterator it = vKeyBirth.begin(); it != vKeyBirth.end(); it++) {\n         const CKeyID &keyid = it->second;\n         std::string strTime = EncodeDumpTime(it->first);\n-        std::string strAddr = EncodeDestination(keyid);\n+        std::string strAddr;\n+        std::string strLabel;\n         CKey key;\n         if (pwallet->GetKey(keyid, key)) {\n+            bool fLabelFound = false;\n+            if (!key.IsCompressed()) {",
    "path": "src/wallet/rpcdump.cpp",
    "position": null,
    "original_position": 10,
    "commit_id": "45eea40aa88f047111a9b1151fe4d1bad5c560e2",
    "original_commit_id": "c844debcb1a14b935d38fddb3b547cf97b1951ed",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Would make sense to encapsulate this (go from key/keyid to label,addr) out to a function.",
    "created_at": "2018-02-06T12:31:32Z",
    "updated_at": "2018-02-06T23:03:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r166280928",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166280928"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r166280928"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166280928/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 737,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166375118",
    "pull_request_review_id": 94427246,
    "id": 166375118,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NjM3NTExOA==",
    "diff_hunk": "@@ -729,12 +729,62 @@ UniValue dumpwallet(const JSONRPCRequest& request)\n     for (std::vector<std::pair<int64_t, CKeyID> >::const_iterator it = vKeyBirth.begin(); it != vKeyBirth.end(); it++) {\n         const CKeyID &keyid = it->second;\n         std::string strTime = EncodeDumpTime(it->first);\n-        std::string strAddr = EncodeDestination(keyid);\n+        std::string strAddr;\n+        std::string strLabel;\n         CKey key;\n         if (pwallet->GetKey(keyid, key)) {\n+            bool fLabelFound = false;\n+            if (!key.IsCompressed()) {",
    "path": "src/wallet/rpcdump.cpp",
    "position": null,
    "original_position": 10,
    "commit_id": "45eea40aa88f047111a9b1151fe4d1bad5c560e2",
    "original_commit_id": "c844debcb1a14b935d38fddb3b547cf97b1951ed",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks for having a look.  I'm not sure what I should be passing to that function though, seems that I would have to pass a pointer to the wallet itself along with the keyid in order to know whether a label exists for an address type for that keyid.\r\nI might be missing something obvious though.",
    "created_at": "2018-02-06T17:10:26Z",
    "updated_at": "2018-02-06T23:03:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r166375118",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166375118"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r166375118"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166375118/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 737,
    "side": "RIGHT",
    "in_reply_to_id": 166280928
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166419267",
    "pull_request_review_id": 94478226,
    "id": 166419267,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NjQxOTI2Nw==",
    "diff_hunk": "@@ -71,6 +71,63 @@ std::string DecodeDumpString(const std::string &str) {\n     return ret.str();\n }\n \n+bool GetWalletAddressesForKey(CWallet * const pwallet, const CKeyID &keyid, std::string &strAddr, std::string &strLabel)\n+{\n+    bool fLabelFound = false;\n+    CKey key;\n+    pwallet->GetKey(keyid, key);\n+    if (!key.IsCompressed()) {\n+        strAddr = EncodeDumpString(pwallet->mapAddressBook[keyid].name);\n+        if (pwallet->mapAddressBook.count(keyid)) {\n+            strLabel = EncodeDumpString(pwallet->mapAddressBook[keyid].name);\n+            fLabelFound = true;\n+        }\n+    } else {\n+        CTxDestination p2wpkhAddr;\n+        CTxDestination p2shAddr;\n+        CScript p2wpkhScr = GetScriptForDestination(WitnessV0KeyHash(keyid));\n+        CScript p2shScr = GetScriptForDestination(CScriptID(p2wpkhScr));\n+        ExtractDestination(p2wpkhScr, p2wpkhAddr);\n+        ExtractDestination(p2shScr, p2shAddr);",
    "path": "src/wallet/rpcdump.cpp",
    "position": null,
    "original_position": 21,
    "commit_id": "45eea40aa88f047111a9b1151fe4d1bad5c560e2",
    "original_commit_id": "03c04c609f8e304648909cecdc4f54cd280510e3",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You should iterate the result of `GetAllDestinationsForKey(key)` here instead of replicating the logic to compute the destinations.",
    "created_at": "2018-02-06T19:36:58Z",
    "updated_at": "2018-02-06T23:03:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r166419267",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166419267"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r166419267"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166419267/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 91,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166432235",
    "pull_request_review_id": 94493371,
    "id": 166432235,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NjQzMjIzNQ==",
    "diff_hunk": "@@ -71,6 +71,63 @@ std::string DecodeDumpString(const std::string &str) {\n     return ret.str();\n }\n \n+bool GetWalletAddressesForKey(CWallet * const pwallet, const CKeyID &keyid, std::string &strAddr, std::string &strLabel)\n+{\n+    bool fLabelFound = false;\n+    CKey key;\n+    pwallet->GetKey(keyid, key);\n+    if (!key.IsCompressed()) {\n+        strAddr = EncodeDumpString(pwallet->mapAddressBook[keyid].name);\n+        if (pwallet->mapAddressBook.count(keyid)) {\n+            strLabel = EncodeDumpString(pwallet->mapAddressBook[keyid].name);\n+            fLabelFound = true;\n+        }\n+    } else {\n+        CTxDestination p2wpkhAddr;\n+        CTxDestination p2shAddr;\n+        CScript p2wpkhScr = GetScriptForDestination(WitnessV0KeyHash(keyid));\n+        CScript p2shScr = GetScriptForDestination(CScriptID(p2wpkhScr));\n+        ExtractDestination(p2wpkhScr, p2wpkhAddr);\n+        ExtractDestination(p2shScr, p2shAddr);",
    "path": "src/wallet/rpcdump.cpp",
    "position": null,
    "original_position": 21,
    "commit_id": "45eea40aa88f047111a9b1151fe4d1bad5c560e2",
    "original_commit_id": "03c04c609f8e304648909cecdc4f54cd280510e3",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "That... makes a lot more sense :)",
    "created_at": "2018-02-06T20:25:59Z",
    "updated_at": "2018-02-06T23:03:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r166432235",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166432235"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r166432235"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166432235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 91,
    "side": "RIGHT",
    "in_reply_to_id": 166419267
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166465524",
    "pull_request_review_id": 94532125,
    "id": 166465524,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NjQ2NTUyNA==",
    "diff_hunk": "@@ -71,6 +71,27 @@ std::string DecodeDumpString(const std::string &str) {\n     return ret.str();\n }\n \n+bool GetWalletAddressesForKey(CWallet * const pwallet, const CKeyID &keyid, std::string &strAddr, std::string &strLabel)\n+{\n+    bool fLabelFound = false;\n+    CKey key;\n+    pwallet->GetKey(keyid, key);\n+    for (const auto& dest : GetAllDestinationsForKey(key.GetPubKey())) {\n+        if (pwallet->mapAddressBook.count(dest)) {\n+            if (!strAddr.empty())",
    "path": "src/wallet/rpcdump.cpp",
    "position": null,
    "original_position": 11,
    "commit_id": "45eea40aa88f047111a9b1151fe4d1bad5c560e2",
    "original_commit_id": "b7f99e67a833803bc44578bea87577464b615b61",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Style nit: braces when indenting.",
    "created_at": "2018-02-06T22:39:17Z",
    "updated_at": "2018-02-06T23:03:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r166465524",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166465524"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r166465524"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166465524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 81,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166471091",
    "pull_request_review_id": 94538744,
    "id": 166471091,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NjQ3MTA5MQ==",
    "diff_hunk": "@@ -71,6 +71,27 @@ std::string DecodeDumpString(const std::string &str) {\n     return ret.str();\n }\n \n+bool GetWalletAddressesForKey(CWallet * const pwallet, const CKeyID &keyid, std::string &strAddr, std::string &strLabel)\n+{\n+    bool fLabelFound = false;\n+    CKey key;\n+    pwallet->GetKey(keyid, key);\n+    for (const auto& dest : GetAllDestinationsForKey(key.GetPubKey())) {\n+        if (pwallet->mapAddressBook.count(dest)) {\n+            if (!strAddr.empty())",
    "path": "src/wallet/rpcdump.cpp",
    "position": null,
    "original_position": 11,
    "commit_id": "45eea40aa88f047111a9b1151fe4d1bad5c560e2",
    "original_commit_id": "b7f99e67a833803bc44578bea87577464b615b61",
    "user": {
      "login": "fivepiece",
      "id": 5624963,
      "node_id": "MDQ6VXNlcjU2MjQ5NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5624963?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fivepiece",
      "html_url": "https://github.com/fivepiece",
      "followers_url": "https://api.github.com/users/fivepiece/followers",
      "following_url": "https://api.github.com/users/fivepiece/following{/other_user}",
      "gists_url": "https://api.github.com/users/fivepiece/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fivepiece/subscriptions",
      "organizations_url": "https://api.github.com/users/fivepiece/orgs",
      "repos_url": "https://api.github.com/users/fivepiece/repos",
      "events_url": "https://api.github.com/users/fivepiece/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fivepiece/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed",
    "created_at": "2018-02-06T23:03:39Z",
    "updated_at": "2018-02-06T23:03:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r166471091",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166471091"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12315#discussion_r166471091"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12315"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166471091/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 81,
    "side": "RIGHT",
    "in_reply_to_id": 166465524
  }
]