[
  {
    "sha": "210eba9fdb9b4ed28ab0b9dcdbcaf45209a143b4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyMTBlYmE5ZmRiOWI0ZWQyOGFiMGI5ZGNkYmNhZjQ1MjA5YTE0M2I0",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "jonas.schnelli@include7.ch",
        "date": "2014-11-20T13:04:16Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "jonas.schnelli@include7.ch",
        "date": "2014-11-26T12:42:58Z"
      },
      "message": "[REST] fix headersonly flag for BINARY responses",
      "tree": {
        "sha": "ceb94188f2a839ea8ce034bc83c807aaf309f3d7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ceb94188f2a839ea8ce034bc83c807aaf309f3d7"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/210eba9fdb9b4ed28ab0b9dcdbcaf45209a143b4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/210eba9fdb9b4ed28ab0b9dcdbcaf45209a143b4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/210eba9fdb9b4ed28ab0b9dcdbcaf45209a143b4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/210eba9fdb9b4ed28ab0b9dcdbcaf45209a143b4/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4baa9f0c9b7675c851e05eb3ac185ab88475e959",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4baa9f0c9b7675c851e05eb3ac185ab88475e959",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4baa9f0c9b7675c851e05eb3ac185ab88475e959"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "1aa864a306ad3c6ef1074a8eb52c397ee72ccfdc",
        "filename": "src/rest.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/210eba9fdb9b4ed28ab0b9dcdbcaf45209a143b4/src/rest.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/210eba9fdb9b4ed28ab0b9dcdbcaf45209a143b4/src/rest.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rest.cpp?ref=210eba9fdb9b4ed28ab0b9dcdbcaf45209a143b4",
        "patch": "@@ -100,7 +100,7 @@ static bool rest_block(AcceptedConnection *conn,\n     switch (rf) {\n     case RF_BINARY: {\n         string binaryBlock = ssBlock.str();\n-        conn->stream() << HTTPReply(HTTP_OK, binaryBlock, fRun, true, \"application/octet-stream\") << binaryBlock << std::flush;\n+        conn->stream() << HTTPReplyHeader(HTTP_OK, fRun, binaryBlock.size(), \"application/octet-stream\") << binaryBlock << std::flush;\n         return true;\n     }\n \n@@ -148,7 +148,7 @@ static bool rest_tx(AcceptedConnection *conn,\n     switch (rf) {\n     case RF_BINARY: {\n         string binaryTx = ssTx.str();\n-        conn->stream() << HTTPReply(HTTP_OK, binaryTx, fRun, true, \"application/octet-stream\") << binaryTx << std::flush;\n+        conn->stream() << HTTPReplyHeader(HTTP_OK, fRun, binaryTx.size(), \"application/octet-stream\") << binaryTx << std::flush;\n         return true;\n     }\n "
      }
    ]
  },
  {
    "sha": "78bdc8103ff4c1b2f1f636f9c5564285028f3e19",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3OGJkYzgxMDNmZjRjMWIyZjFmNjM2ZjljNTU2NDI4NTAyOGYzZTE5",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "jonas.schnelli@include7.ch",
        "date": "2014-11-26T12:51:02Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "jonas.schnelli@include7.ch",
        "date": "2014-11-26T12:51:02Z"
      },
      "message": "[REST] give an appropriate response in warmup phase",
      "tree": {
        "sha": "116367901be37b441a25bd80922336cfaf28f5b2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/116367901be37b441a25bd80922336cfaf28f5b2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/78bdc8103ff4c1b2f1f636f9c5564285028f3e19",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/78bdc8103ff4c1b2f1f636f9c5564285028f3e19",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/78bdc8103ff4c1b2f1f636f9c5564285028f3e19",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/78bdc8103ff4c1b2f1f636f9c5564285028f3e19/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "210eba9fdb9b4ed28ab0b9dcdbcaf45209a143b4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/210eba9fdb9b4ed28ab0b9dcdbcaf45209a143b4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/210eba9fdb9b4ed28ab0b9dcdbcaf45209a143b4"
      }
    ],
    "stats": {
      "total": 16,
      "additions": 16,
      "deletions": 0
    },
    "files": [
      {
        "sha": "4953d7e717da2005d473f6aec40420bc3dd01065",
        "filename": "src/rest.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/78bdc8103ff4c1b2f1f636f9c5564285028f3e19/src/rest.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/78bdc8103ff4c1b2f1f636f9c5564285028f3e19/src/rest.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rest.cpp?ref=78bdc8103ff4c1b2f1f636f9c5564285028f3e19",
        "patch": "@@ -188,6 +188,10 @@ bool HTTPReq_REST(AcceptedConnection *conn,\n                   bool fRun)\n {\n     try {\n+        std::string statusmessage;\n+        if(RPCIsInWarmup(&statusmessage))\n+            throw RESTERR(HTTP_SERVICE_UNAVAILABLE, \"Service temporarily unavailable: \"+statusmessage);\n+        \n         for (unsigned int i = 0; i < ARRAYLEN(uri_prefixes); i++) {\n             unsigned int plen = strlen(uri_prefixes[i].prefix);\n             if (strURI.substr(0, plen) == uri_prefixes[i].prefix) {"
      },
      {
        "sha": "f7cd50f9f606295cbee65c255bb5e507ab2a8c52",
        "filename": "src/rpcprotocol.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/78bdc8103ff4c1b2f1f636f9c5564285028f3e19/src/rpcprotocol.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/78bdc8103ff4c1b2f1f636f9c5564285028f3e19/src/rpcprotocol.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcprotocol.h?ref=78bdc8103ff4c1b2f1f636f9c5564285028f3e19",
        "patch": "@@ -28,6 +28,7 @@ enum HTTPStatusCode\n     HTTP_FORBIDDEN             = 403,\n     HTTP_NOT_FOUND             = 404,\n     HTTP_INTERNAL_SERVER_ERROR = 500,\n+    HTTP_SERVICE_UNAVAILABLE   = 503,\n };\n \n //! Bitcoin RPC error codes"
      },
      {
        "sha": "c10b05cb0434b471b33c9fe52417681f638b80a4",
        "filename": "src/rpcserver.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/78bdc8103ff4c1b2f1f636f9c5564285028f3e19/src/rpcserver.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/78bdc8103ff4c1b2f1f636f9c5564285028f3e19/src/rpcserver.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcserver.cpp?ref=78bdc8103ff4c1b2f1f636f9c5564285028f3e19",
        "patch": "@@ -756,6 +756,14 @@ void SetRPCWarmupFinished()\n     fRPCInWarmup = false;\n }\n \n+bool RPCIsInWarmup(std::string *outStatus)\n+{\n+    LOCK(cs_rpcWarmup);\n+    if (outStatus)\n+        *outStatus = rpcWarmupStatus;\n+    return fRPCInWarmup;\n+}\n+\n void RPCRunHandler(const boost::system::error_code& err, boost::function<void(void)> func)\n {\n     if (!err)"
      },
      {
        "sha": "b0e437057bfff5cc5c7c470d40b8f0e8f717f644",
        "filename": "src/rpcserver.h",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/78bdc8103ff4c1b2f1f636f9c5564285028f3e19/src/rpcserver.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/78bdc8103ff4c1b2f1f636f9c5564285028f3e19/src/rpcserver.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcserver.h?ref=78bdc8103ff4c1b2f1f636f9c5564285028f3e19",
        "patch": "@@ -53,6 +53,9 @@ void SetRPCWarmupStatus(const std::string& newStatus);\n /* Mark warmup as done.  RPC calls will be processed from now on.  */\n void SetRPCWarmupFinished();\n \n+/* returns the current warmup state.  */\n+bool RPCIsInWarmup(std::string *statusOut);\n+\n /**\n  * Type-check arguments; throws JSONRPCError if wrong type given. Does not check that\n  * the right number of arguments are passed, just that any passed are the correct type."
      }
    ]
  },
  {
    "sha": "5dc713bfc7bf98c8e1d80fec9c5f5e0417a2bdcd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ZGM3MTNiZmM3YmY5OGM4ZTFkODBmZWM5YzVmNWUwNDE3YTJiZGNk",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "jonas.schnelli@include7.ch",
        "date": "2014-11-26T12:53:27Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "jonas.schnelli@include7.ch",
        "date": "2014-11-26T12:53:27Z"
      },
      "message": "[REST] set REST API behind \"-rest\" option",
      "tree": {
        "sha": "9f2a42987406cfbe1ce26605fe1273229721c425",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9f2a42987406cfbe1ce26605fe1273229721c425"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5dc713bfc7bf98c8e1d80fec9c5f5e0417a2bdcd",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5dc713bfc7bf98c8e1d80fec9c5f5e0417a2bdcd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5dc713bfc7bf98c8e1d80fec9c5f5e0417a2bdcd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5dc713bfc7bf98c8e1d80fec9c5f5e0417a2bdcd/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "78bdc8103ff4c1b2f1f636f9c5564285028f3e19",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/78bdc8103ff4c1b2f1f636f9c5564285028f3e19",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/78bdc8103ff4c1b2f1f636f9c5564285028f3e19"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 2,
      "deletions": 1
    },
    "files": [
      {
        "sha": "63e72c66d2d8c36f709c012e06bec892d3c92f53",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5dc713bfc7bf98c8e1d80fec9c5f5e0417a2bdcd/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5dc713bfc7bf98c8e1d80fec9c5f5e0417a2bdcd/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=5dc713bfc7bf98c8e1d80fec9c5f5e0417a2bdcd",
        "patch": "@@ -352,6 +352,7 @@ std::string HelpMessage(HelpMessageMode mode)\n \n     strUsage += \"\\n\" + _(\"RPC server options:\") + \"\\n\";\n     strUsage += \"  -server                \" + _(\"Accept command line and JSON-RPC commands\") + \"\\n\";\n+    strUsage += \"  -rest                  \" + strprintf(_(\"Accept public REST requests (default: %u)\"), 0) + \"\\n\";\n     strUsage += \"  -rpcbind=<addr>        \" + _(\"Bind to given address to listen for JSON-RPC connections. Use [host]:port notation for IPv6. This option can be specified multiple times (default: bind to all interfaces)\") + \"\\n\";\n     strUsage += \"  -rpcuser=<user>        \" + _(\"Username for JSON-RPC connections\") + \"\\n\";\n     strUsage += \"  -rpcpassword=<pw>      \" + _(\"Password for JSON-RPC connections\") + \"\\n\";"
      },
      {
        "sha": "b03016a50853e91bbde96caec973ff124a0cfe63",
        "filename": "src/rpcserver.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5dc713bfc7bf98c8e1d80fec9c5f5e0417a2bdcd/src/rpcserver.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5dc713bfc7bf98c8e1d80fec9c5f5e0417a2bdcd/src/rpcserver.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcserver.cpp?ref=5dc713bfc7bf98c8e1d80fec9c5f5e0417a2bdcd",
        "patch": "@@ -955,7 +955,7 @@ void ServiceConnection(AcceptedConnection *conn)\n                 break;\n \n         // Process via HTTP REST API\n-        } else if (strURI.substr(0, 6) == \"/rest/\") {\n+        } else if (strURI.substr(0, 6) == \"/rest/\" && GetBoolArg(\"-rest\", false)) {\n             if (!HTTPReq_REST(conn, strURI, mapHeaders, fRun))\n                 break;\n "
      }
    ]
  }
]