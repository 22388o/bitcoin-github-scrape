[
  {
    "sha": "09b703ebbd169592ffcdb9755b50feacd019c569",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowOWI3MDNlYmJkMTY5NTkyZmZjZGI5NzU1YjUwZmVhY2QwMTljNTY5",
    "commit": {
      "author": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2019-05-16T21:41:07Z"
      },
      "committer": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2019-05-16T21:42:08Z"
      },
      "message": "Drop BanLevel in favor of Optional<BanReason>\n\nBanLevel was a very narrow type which served a limited purpose. Removing\nit removes a layer of indirection.",
      "tree": {
        "sha": "be23f2ad9c42225e2be900736d4d31b0c2ff141c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/be23f2ad9c42225e2be900736d4d31b0c2ff141c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/09b703ebbd169592ffcdb9755b50feacd019c569",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQEcBAABCgAGBQJc3dk3AAoJEG7l83hfeLNFWXkIAJjKRdiIwHv3p1bTfsgKCqHH\nneu7dTklwr8jOAtZN08gINXD8T1tNijNNC/hQsIpYCJmB4RHdJDYwx/H3sjSJeBY\n3QJIGGwzmg+6QcqOFeSeKOA56qZ9t1UYgRRDa6tnQ9yntszPYXIL72KTdRHuo+Rg\nVWzAnw6H1PPO438h2scVUucH/wsCzeSq9mlPjM6wu1Z9eRXBeBwoTYkT7og0QnxV\noH0ZJi1BrxpVY1QF8KoV76kQeTjGM7inj2t9mjEcn1b+pT0HQcqCOoZT+0lf6VJC\nMHRUPHMYWiqSyA520ri8JgBc3gIFzHTa+jRUM5r4u8BQl2YLzl7HOkNYts/AKyE=\n=nHTA\n-----END PGP SIGNATURE-----",
        "payload": "tree be23f2ad9c42225e2be900736d4d31b0c2ff141c\nparent 8f2f17f79a10ab3db13f95291d302f5eae3e3a91\nauthor Ben Woosley <ben.woosley@gmail.com> 1558042867 -0400\ncommitter Ben Woosley <ben.woosley@gmail.com> 1558042928 -0400\n\nDrop BanLevel in favor of Optional<BanReason>\n\nBanLevel was a very narrow type which served a limited purpose. Removing\nit removes a layer of indirection.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/09b703ebbd169592ffcdb9755b50feacd019c569",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/09b703ebbd169592ffcdb9755b50feacd019c569",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/09b703ebbd169592ffcdb9755b50feacd019c569/comments",
    "author": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8f2f17f79a10ab3db13f95291d302f5eae3e3a91",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8f2f17f79a10ab3db13f95291d302f5eae3e3a91",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8f2f17f79a10ab3db13f95291d302f5eae3e3a91"
      }
    ],
    "stats": {
      "total": 38,
      "additions": 13,
      "deletions": 25
    },
    "files": [
      {
        "sha": "cbbc6e5207d14f9b0269b37102b9e44f2a000be9",
        "filename": "src/banman.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 20,
        "changes": 27,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/09b703ebbd169592ffcdb9755b50feacd019c569/src/banman.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/09b703ebbd169592ffcdb9755b50feacd019c569/src/banman.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/banman.cpp?ref=09b703ebbd169592ffcdb9755b50feacd019c569",
        "patch": "@@ -67,40 +67,27 @@ void BanMan::ClearBanned()\n     if (m_client_interface) m_client_interface->BannedListChanged();\n }\n \n-int BanMan::IsBannedLevel(CNetAddr net_addr)\n+Optional<BanReason> BanMan::IsBannedReason(CNetAddr net_addr)\n {\n-    // Returns the most severe level of banning that applies to this address.\n-    // 0 - Not banned\n-    // 1 - Automatic misbehavior ban\n-    // 2 - Any other ban\n-    int level = 0;\n+    // Returns the most severe reason for banning that applies to this address.\n+    Optional<BanReason> reason;\n     auto current_time = GetTime();\n     LOCK(m_cs_banned);\n     for (const auto& it : m_banned) {\n         CSubNet sub_net = it.first;\n         CBanEntry ban_entry = it.second;\n \n         if (current_time < ban_entry.nBanUntil && sub_net.Match(net_addr)) {\n-            if (ban_entry.banReason != BanReasonNodeMisbehaving) return 2;\n-            level = 1;\n+            if (ban_entry.banReason != BanReasonNodeMisbehaving) return BanReason(ban_entry.banReason);\n+            reason = BanReason(ban_entry.banReason);\n         }\n     }\n-    return level;\n+    return reason;\n }\n \n bool BanMan::IsBanned(CNetAddr net_addr)\n {\n-    auto current_time = GetTime();\n-    LOCK(m_cs_banned);\n-    for (const auto& it : m_banned) {\n-        CSubNet sub_net = it.first;\n-        CBanEntry ban_entry = it.second;\n-\n-        if (current_time < ban_entry.nBanUntil && sub_net.Match(net_addr)) {\n-            return true;\n-        }\n-    }\n-    return false;\n+    return IsBannedReason(net_addr) != nullopt;\n }\n \n bool BanMan::IsBanned(CSubNet sub_net)"
      },
      {
        "sha": "f3e8d65802ca34c88220e4fed1cff89bf6d8b814",
        "filename": "src/banman.h",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/09b703ebbd169592ffcdb9755b50feacd019c569/src/banman.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/09b703ebbd169592ffcdb9755b50feacd019c569/src/banman.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/banman.h?ref=09b703ebbd169592ffcdb9755b50feacd019c569",
        "patch": "@@ -10,6 +10,7 @@\n \n #include <addrdb.h>\n #include <fs.h>\n+#include <optional.h>\n #include <sync.h>\n \n // NOTE: When adjusting this, update rpcnet:setban's help (\"24h\")\n@@ -42,7 +43,7 @@ class BanMan\n     void Ban(const CNetAddr& net_addr, const BanReason& ban_reason, int64_t ban_time_offset = 0, bool since_unix_epoch = false);\n     void Ban(const CSubNet& sub_net, const BanReason& ban_reason, int64_t ban_time_offset = 0, bool since_unix_epoch = false);\n     void ClearBanned();\n-    int IsBannedLevel(CNetAddr net_addr);\n+    Optional<BanReason> IsBannedReason(CNetAddr net_addr);\n     bool IsBanned(CNetAddr net_addr);\n     bool IsBanned(CSubNet sub_net);\n     bool Unban(const CNetAddr& net_addr);"
      },
      {
        "sha": "7b893cc74ab6c60e56638dd96262adafbf367970",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/09b703ebbd169592ffcdb9755b50feacd019c569/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/09b703ebbd169592ffcdb9755b50feacd019c569/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=09b703ebbd169592ffcdb9755b50feacd019c569",
        "patch": "@@ -17,6 +17,7 @@\n #include <crypto/sha256.h>\n #include <primitives/transaction.h>\n #include <netbase.h>\n+#include <optional.h>\n #include <scheduler.h>\n #include <ui_interface.h>\n #include <util/strencodings.h>\n@@ -933,12 +934,11 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n     // on all platforms.  Set it again here just to be sure.\n     SetSocketNoDelay(hSocket);\n \n-    int bannedlevel = m_banman ? m_banman->IsBannedLevel(addr) : 0;\n+    Optional<BanReason> bannedreason = m_banman ? m_banman->IsBannedReason(addr) : nullopt;\n \n     // Don't accept connections from banned peers, but if our inbound slots aren't almost full, accept\n     // if the only banning reason was an automatic misbehavior ban.\n-    if (!whitelisted && bannedlevel > ((nInbound + 1 < nMaxInbound) ? 1 : 0))\n-    {\n+    if (!whitelisted && bannedreason != nullopt && ((nInbound + 1 >= nMaxInbound) || bannedreason != BanReasonNodeMisbehaving)) {\n         LogPrint(BCLog::NET, \"connection from %s dropped (banned)\\n\", addr.ToString());\n         CloseSocket(hSocket);\n         return;\n@@ -961,7 +961,7 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n     CNode* pnode = new CNode(id, nLocalServices, GetBestHeight(), hSocket, addr, CalculateKeyedNetGroup(addr), nonce, addr_bind, \"\", true);\n     pnode->AddRef();\n     pnode->fWhitelisted = whitelisted;\n-    pnode->m_prefer_evict = bannedlevel > 0;\n+    pnode->m_prefer_evict = bannedreason != nullopt;\n     m_msgproc->InitializeNode(pnode);\n \n     LogPrint(BCLog::NET, \"connection from %s accepted\\n\", addr.ToString());"
      }
    ]
  },
  {
    "sha": "b7866cf6d80ff9981d4942427b173e3fb787116f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiNzg2NmNmNmQ4MGZmOTk4MWQ0OTQyNDI3YjE3M2UzZmI3ODcxMTZm",
    "commit": {
      "author": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2019-05-16T22:27:38Z"
      },
      "committer": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2019-05-16T22:27:38Z"
      },
      "message": "Make BanReason an enum class",
      "tree": {
        "sha": "a440a185ee127db15653ea4dd685432b5a5b4ffb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a440a185ee127db15653ea4dd685432b5a5b4ffb"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b7866cf6d80ff9981d4942427b173e3fb787116f",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQEcBAABCgAGBQJc3ePaAAoJEG7l83hfeLNFCS0IAIAn44wTiR2ubGOww9/cGpbA\n9TXEw/y6oByHWlqUuhlK0zN7cbAkI8aLKFL7msnpMxoAF5ZmPx9niAK/iaXARWb5\nhZYL3RpVos022RnnygiJQXyl4xhT9pTkeokiBxWfo7ALstArdbO4RoN1RF5b8+zq\nxTA97nCOzu/nQ8cKoDuehnuyYY36NkcFCFHow8+yRQ6Dvb47DbmCSiXcpZklxzf6\nns6qRY3zv0eb51uA4unXJSsrYou8jukUYmnmJDuJqsTBlf4Tv6AESoWzS76slAh9\n80KKLkZX4ah0bXxahwy8XLtvHBqBVoyFRSq/ixec+uHJOLKlt35RJ9GZpBatFS4=\n=jEFV\n-----END PGP SIGNATURE-----",
        "payload": "tree a440a185ee127db15653ea4dd685432b5a5b4ffb\nparent 09b703ebbd169592ffcdb9755b50feacd019c569\nauthor Ben Woosley <ben.woosley@gmail.com> 1558045658 -0400\ncommitter Ben Woosley <ben.woosley@gmail.com> 1558045658 -0400\n\nMake BanReason an enum class\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b7866cf6d80ff9981d4942427b173e3fb787116f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b7866cf6d80ff9981d4942427b173e3fb787116f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b7866cf6d80ff9981d4942427b173e3fb787116f/comments",
    "author": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "09b703ebbd169592ffcdb9755b50feacd019c569",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/09b703ebbd169592ffcdb9755b50feacd019c569",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/09b703ebbd169592ffcdb9755b50feacd019c569"
      }
    ],
    "stats": {
      "total": 38,
      "additions": 19,
      "deletions": 19
    },
    "files": [
      {
        "sha": "b4d8b9fdc1d591b19e74c359397d8ff4e029adda",
        "filename": "src/addrdb.h",
        "status": "modified",
        "additions": 11,
        "deletions": 11,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b7866cf6d80ff9981d4942427b173e3fb787116f/src/addrdb.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b7866cf6d80ff9981d4942427b173e3fb787116f/src/addrdb.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/addrdb.h?ref=b7866cf6d80ff9981d4942427b173e3fb787116f",
        "patch": "@@ -16,12 +16,12 @@ class CSubNet;\n class CAddrMan;\n class CDataStream;\n \n-typedef enum BanReason\n+enum class BanReason\n {\n-    BanReasonUnknown          = 0,\n-    BanReasonNodeMisbehaving  = 1,\n-    BanReasonManuallyAdded    = 2\n-} BanReason;\n+    Unknown          = 0,\n+    NodeMisbehaving  = 1,\n+    ManuallyAdded    = 2\n+};\n \n class CBanEntry\n {\n@@ -30,7 +30,7 @@ class CBanEntry\n     int nVersion;\n     int64_t nCreateTime;\n     int64_t nBanUntil;\n-    uint8_t banReason;\n+    BanReason banReason;\n \n     CBanEntry()\n     {\n@@ -55,25 +55,25 @@ class CBanEntry\n         READWRITE(this->nVersion);\n         READWRITE(nCreateTime);\n         READWRITE(nBanUntil);\n-        READWRITE(banReason);\n+        READWRITE((uint8_t) banReason);\n     }\n \n     void SetNull()\n     {\n         nVersion = CBanEntry::CURRENT_VERSION;\n         nCreateTime = 0;\n         nBanUntil = 0;\n-        banReason = BanReasonUnknown;\n+        banReason = BanReason::Unknown;\n     }\n \n     std::string banReasonToString() const\n     {\n         switch (banReason) {\n-        case BanReasonNodeMisbehaving:\n+        case BanReason::NodeMisbehaving:\n             return \"node misbehaving\";\n-        case BanReasonManuallyAdded:\n+        case BanReason::ManuallyAdded:\n             return \"manually added\";\n-        default:\n+        case BanReason::Unknown:\n             return \"unknown\";\n         }\n     }"
      },
      {
        "sha": "e3e61e47a26b08281b9fc921a68192bda719bb39",
        "filename": "src/banman.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b7866cf6d80ff9981d4942427b173e3fb787116f/src/banman.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b7866cf6d80ff9981d4942427b173e3fb787116f/src/banman.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/banman.cpp?ref=b7866cf6d80ff9981d4942427b173e3fb787116f",
        "patch": "@@ -78,8 +78,8 @@ Optional<BanReason> BanMan::IsBannedReason(CNetAddr net_addr)\n         CBanEntry ban_entry = it.second;\n \n         if (current_time < ban_entry.nBanUntil && sub_net.Match(net_addr)) {\n-            if (ban_entry.banReason != BanReasonNodeMisbehaving) return BanReason(ban_entry.banReason);\n-            reason = BanReason(ban_entry.banReason);\n+            if (ban_entry.banReason != BanReason::NodeMisbehaving) return ban_entry.banReason;\n+            reason = ban_entry.banReason;\n         }\n     }\n     return reason;\n@@ -133,7 +133,7 @@ void BanMan::Ban(const CSubNet& sub_net, const BanReason& ban_reason, int64_t ba\n     if (m_client_interface) m_client_interface->BannedListChanged();\n \n     //store banlist to disk immediately if user requested ban\n-    if (ban_reason == BanReasonManuallyAdded) DumpBanlist();\n+    if (ban_reason == BanReason::ManuallyAdded) DumpBanlist();\n }\n \n bool BanMan::Unban(const CNetAddr& net_addr)"
      },
      {
        "sha": "73db5f9e27e6fb78b08a2c56233093193de355fb",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b7866cf6d80ff9981d4942427b173e3fb787116f/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b7866cf6d80ff9981d4942427b173e3fb787116f/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=b7866cf6d80ff9981d4942427b173e3fb787116f",
        "patch": "@@ -938,7 +938,7 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n \n     // Don't accept connections from banned peers, but if our inbound slots aren't almost full, accept\n     // if the only banning reason was an automatic misbehavior ban.\n-    if (!whitelisted && bannedreason != nullopt && ((nInbound + 1 >= nMaxInbound) || bannedreason != BanReasonNodeMisbehaving)) {\n+    if (!whitelisted && bannedreason != nullopt && ((nInbound + 1 >= nMaxInbound) || bannedreason != BanReason::NodeMisbehaving)) {\n         LogPrint(BCLog::NET, \"connection from %s dropped (banned)\\n\", addr.ToString());\n         CloseSocket(hSocket);\n         return;"
      },
      {
        "sha": "59d3ed9db1652c056db07f35bca8ca7aa3140d78",
        "filename": "src/net_processing.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b7866cf6d80ff9981d4942427b173e3fb787116f/src/net_processing.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b7866cf6d80ff9981d4942427b173e3fb787116f/src/net_processing.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net_processing.cpp?ref=b7866cf6d80ff9981d4942427b173e3fb787116f",
        "patch": "@@ -3183,7 +3183,7 @@ bool PeerLogicValidation::SendRejectsAndCheckIfBanned(CNode* pnode, bool enable_\n         } else {\n             // Disconnect and ban all nodes sharing the address\n             if (m_banman) {\n-                m_banman->Ban(pnode->addr, BanReasonNodeMisbehaving);\n+                m_banman->Ban(pnode->addr, BanReason::NodeMisbehaving);\n             }\n             connman->DisconnectNode(pnode->addr);\n         }"
      },
      {
        "sha": "8a0717601cf548dfbb17f0adf107947279ff183b",
        "filename": "src/qt/rpcconsole.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b7866cf6d80ff9981d4942427b173e3fb787116f/src/qt/rpcconsole.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b7866cf6d80ff9981d4942427b173e3fb787116f/src/qt/rpcconsole.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/rpcconsole.cpp?ref=b7866cf6d80ff9981d4942427b173e3fb787116f",
        "patch": "@@ -1215,7 +1215,7 @@ void RPCConsole::banSelectedNode(int bantime)\n         // Find possible nodes, ban it and clear the selected node\n         const CNodeCombinedStats *stats = clientModel->getPeerTableModel()->getNodeStats(detailNodeRow);\n         if (stats) {\n-            m_node.ban(stats->nodeStats.addr, BanReasonManuallyAdded, bantime);\n+            m_node.ban(stats->nodeStats.addr, BanReason::ManuallyAdded, bantime);\n             m_node.disconnect(stats->nodeStats.addr);\n         }\n     }"
      },
      {
        "sha": "84fd1e86b2f48fecd0a4f25e0d1ef5e83d319c32",
        "filename": "src/rpc/net.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b7866cf6d80ff9981d4942427b173e3fb787116f/src/rpc/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b7866cf6d80ff9981d4942427b173e3fb787116f/src/rpc/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/net.cpp?ref=b7866cf6d80ff9981d4942427b173e3fb787116f",
        "patch": "@@ -582,12 +582,12 @@ static UniValue setban(const JSONRPCRequest& request)\n             absolute = true;\n \n         if (isSubnet) {\n-            g_banman->Ban(subNet, BanReasonManuallyAdded, banTime, absolute);\n+            g_banman->Ban(subNet, BanReason::ManuallyAdded, banTime, absolute);\n             if (g_connman) {\n                 g_connman->DisconnectNode(subNet);\n             }\n         } else {\n-            g_banman->Ban(netAddr, BanReasonManuallyAdded, banTime, absolute);\n+            g_banman->Ban(netAddr, BanReason::ManuallyAdded, banTime, absolute);\n             if (g_connman) {\n                 g_connman->DisconnectNode(netAddr);\n             }"
      }
    ]
  }
]