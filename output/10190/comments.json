[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/300292029",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10190#issuecomment-300292029",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10190",
    "id": 300292029,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDI5MjAyOQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-09T20:30:28Z",
    "updated_at": "2017-05-09T20:30:28Z",
    "author_association": "MEMBER",
    "body": "@gmaxwell can I convince you to take a look at this? It adds a regression test for your fix in #10146 ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/300292029/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/304164543",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10190#issuecomment-304164543",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10190",
    "id": 304164543,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDE2NDU0Mw==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-26T01:10:02Z",
    "updated_at": "2017-05-26T01:10:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK. I am testing the test.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/304164543/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/309286965",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10190#issuecomment-309286965",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10190",
    "id": 309286965,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwOTI4Njk2NQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-18T16:12:58Z",
    "updated_at": "2017-06-18T16:12:58Z",
    "author_association": "MEMBER",
    "body": "No great rush for this but it'd be good to get it in soonish. It includes a regression test for #10146, which was backported to 0.14.1. Other benefits:\r\n\r\n- tidies up test code\r\n- increases coverage of mining RPCs",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/309286965/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/311387434",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10190#issuecomment-311387434",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10190",
    "id": 311387434,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTM4NzQzNA==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-27T15:04:55Z",
    "updated_at": "2017-06-27T15:04:55Z",
    "author_association": "MEMBER",
    "body": "rebased",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/311387434/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/314441373",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10190#issuecomment-314441373",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10190",
    "id": 314441373,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDQ0MTM3Mw==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-11T13:21:22Z",
    "updated_at": "2017-07-11T13:21:22Z",
    "author_association": "MEMBER",
    "body": "utACK 11ba8e9",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/314441373/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111810625",
    "pull_request_review_id": 33078653,
    "id": 111810625,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMTgxMDYyNQ==",
    "diff_hunk": "@@ -0,0 +1,125 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test block proposals with getblocktemplate.\"\"\"",
    "path": "test/functional/mining.py",
    "position": null,
    "original_position": 5,
    "commit_id": "11ba8e9cdd2652835c650b9f72d8421ea10f4116",
    "original_commit_id": "df93f6cc8d80e78eb8758a7d6b5148df9bc3afa9",
    "user": {
      "login": "jimmysong",
      "id": 524761,
      "node_id": "MDQ6VXNlcjUyNDc2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/524761?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimmysong",
      "html_url": "https://github.com/jimmysong",
      "followers_url": "https://api.github.com/users/jimmysong/followers",
      "following_url": "https://api.github.com/users/jimmysong/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimmysong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimmysong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimmysong/subscriptions",
      "organizations_url": "https://api.github.com/users/jimmysong/orgs",
      "repos_url": "https://api.github.com/users/jimmysong/repos",
      "events_url": "https://api.github.com/users/jimmysong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimmysong/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Guessing you'll want to change this comment.",
    "created_at": "2017-04-17T20:10:22Z",
    "updated_at": "2017-06-27T15:02:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r111810625",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111810625"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r111810625"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111810625/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 5,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112027035",
    "pull_request_review_id": 33078653,
    "id": 112027035,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMjAyNzAzNQ==",
    "diff_hunk": "@@ -82,13 +83,13 @@ def run_test(self):\n         # Mine a block to leave initial block download\n         node.generate(1)\n         tmpl = node.getblocktemplate()\n-        if 'coinbasetxn' not in tmpl:\n-            rawcoinbase = encodeUNum(tmpl['height'])\n-            rawcoinbase += b'\\x01-'\n-            hexcoinbase = b2x(rawcoinbase)\n-            hexoutval = b2x(pack('<Q', tmpl['coinbasevalue']))\n-            tmpl['coinbasetxn'] = {'data': '01000000' + '01' + '0000000000000000000000000000000000000000000000000000000000000000ffffffff' + ('%02x' % (len(rawcoinbase),)) + hexcoinbase + 'fffffffe' + '01' + hexoutval + '00' + '00000000'}\n-        txlist = list(bytearray(a2b_hex(a['data'])) for a in (tmpl['coinbasetxn'],) + tuple(tmpl['transactions']))\n+        assert 'coinbasetxn' not in tmpl\n+\n+        coinbase_tx = create_coinbase(height=int(tmpl[\"height\"]) + 1)\n+        # sequence numbers must not be max for nLockTime to have effect\n+        coinbase_tx.vin[0].nSequence = 2 ** 32 - 2\n+        tmpl['coinbasetxn'] = {'data': coinbase_tx.serialize()}\n+        txlist = [bytearray(coinbase_tx.serialize())]",
    "path": "test/functional/getblocktemplate_proposals.py",
    "position": null,
    "original_position": 25,
    "commit_id": "11ba8e9cdd2652835c650b9f72d8421ea10f4116",
    "original_commit_id": "4687fe6a225613b204fa6ef9f8445fadc01d0039",
    "user": {
      "login": "jimmysong",
      "id": 524761,
      "node_id": "MDQ6VXNlcjUyNDc2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/524761?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimmysong",
      "html_url": "https://github.com/jimmysong",
      "followers_url": "https://api.github.com/users/jimmysong/followers",
      "following_url": "https://api.github.com/users/jimmysong/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimmysong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimmysong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimmysong/subscriptions",
      "organizations_url": "https://api.github.com/users/jimmysong/orgs",
      "repos_url": "https://api.github.com/users/jimmysong/repos",
      "events_url": "https://api.github.com/users/jimmysong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimmysong/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "is `tmpl['transactions']` expected to be empty?",
    "created_at": "2017-04-18T18:17:47Z",
    "updated_at": "2017-06-27T15:02:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r112027035",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112027035"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r112027035"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112027035/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 92,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112028662",
    "pull_request_review_id": 33078653,
    "id": 112028662,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMjAyODY2Mg==",
    "diff_hunk": "@@ -0,0 +1,125 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test block proposals with getblocktemplate.\"\"\"\n+\n+from binascii import b2a_hex\n+import copy\n+\n+from test_framework.blocktools import create_coinbase\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.mininode import CBlock\n+from test_framework.util import *\n+\n+def b2x(b):\n+    return b2a_hex(b).decode('ascii')\n+\n+def assert_template(node, block, expect, rehash=True):\n+    if rehash:\n+        block.hashMerkleRoot = block.calc_merkle_root()\n+    rsp = node.getblocktemplate({'data': b2x(block.serialize()), 'mode': 'proposal'})\n+    assert_equal(rsp, expect)\n+\n+class GetBlockTemplateProposalTest(BitcoinTestFramework):",
    "path": "test/functional/mining.py",
    "position": null,
    "original_position": 24,
    "commit_id": "11ba8e9cdd2652835c650b9f72d8421ea10f4116",
    "original_commit_id": "df93f6cc8d80e78eb8758a7d6b5148df9bc3afa9",
    "user": {
      "login": "jimmysong",
      "id": 524761,
      "node_id": "MDQ6VXNlcjUyNDc2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/524761?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimmysong",
      "html_url": "https://github.com/jimmysong",
      "followers_url": "https://api.github.com/users/jimmysong/followers",
      "following_url": "https://api.github.com/users/jimmysong/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimmysong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimmysong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimmysong/subscriptions",
      "organizations_url": "https://api.github.com/users/jimmysong/orgs",
      "repos_url": "https://api.github.com/users/jimmysong/repos",
      "events_url": "https://api.github.com/users/jimmysong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimmysong/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "rename the test to `MiningTest`?",
    "created_at": "2017-04-18T18:24:37Z",
    "updated_at": "2017-06-27T15:02:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r112028662",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112028662"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r112028662"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112028662/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 24,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112028775",
    "pull_request_review_id": 33078653,
    "id": 112028775,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMjAyODc3NQ==",
    "diff_hunk": "@@ -0,0 +1,125 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test block proposals with getblocktemplate.\"\"\"\n+\n+from binascii import b2a_hex\n+import copy\n+\n+from test_framework.blocktools import create_coinbase\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.mininode import CBlock\n+from test_framework.util import *\n+\n+def b2x(b):\n+    return b2a_hex(b).decode('ascii')\n+\n+def assert_template(node, block, expect, rehash=True):\n+    if rehash:\n+        block.hashMerkleRoot = block.calc_merkle_root()\n+    rsp = node.getblocktemplate({'data': b2x(block.serialize()), 'mode': 'proposal'})\n+    assert_equal(rsp, expect)\n+\n+class GetBlockTemplateProposalTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 2\n+        self.setup_clean_chain = False\n+\n+    def setup_network(self):\n+        self.nodes = self.setup_nodes()\n+        connect_nodes_bi(self.nodes, 0, 1)\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        # Mine a block to leave initial block download\n+        node.generate(1)\n+        tmpl = node.getblocktemplate()\n+        self.log.info(\"getblocktemplate: Test capability advertised\")\n+        assert 'proposal' in tmpl['capabilities']\n+        assert 'coinbasetxn' not in tmpl\n+\n+        coinbase_tx = create_coinbase(height=int(tmpl[\"height\"]) + 1)\n+        # sequence numbers must not be max for nLockTime to have effect\n+        coinbase_tx.vin[0].nSequence = 2 ** 32 - 2\n+        coinbase_tx.rehash()\n+\n+        block = CBlock()\n+        block.nVersion = tmpl[\"version\"]\n+        block.hashPrevBlock = int(tmpl[\"previousblockhash\"], 16)\n+        block.nTime = tmpl[\"curtime\"]\n+        block.nBits = int(tmpl[\"bits\"], 16)\n+        block.nNonce = 0\n+        block.vtx = [coinbase_tx]\n+\n+        self.log.info(\"getblocktemplate: Test valid block\")\n+        assert_template(node, block, None)\n+\n+        self.log.info(\"submitblock: Test block decode failure\")\n+        assert_raises_jsonrpc(-22, \"Block decode failed\", node.submitblock, b2x(block.serialize()[:-15]))\n+\n+        self.log.info(\"getblocktemplate: Test bad input hash for coinbase transaction\")\n+        bad_block = copy.deepcopy(block)\n+        bad_block.vtx[0].vin[0].prevout.hash += 1\n+        bad_block.vtx[0].rehash()\n+        assert_template(node, bad_block, 'bad-cb-missing')\n+\n+        self.log.info(\"submitblock: Test invalid coinbase transaction\")\n+        assert_raises_jsonrpc(-22, \"Block does not start with a coinbase\", node.submitblock, b2x(bad_block.serialize()))\n+\n+        self.log.info(\"getblocktemplate: Test truncated final transaction\")\n+        assert_raises_jsonrpc(-22, \"Block decode failed\", node.getblocktemplate, {'data': b2x(block.serialize()[:-1]), 'mode': 'proposal'})\n+\n+        self.log.info(\"getblocktemplate: Test duplicate transaction\")\n+        bad_block = copy.deepcopy(block)\n+        bad_block.vtx.append(bad_block.vtx[0])\n+        assert_template(node, bad_block, 'bad-txns-duplicate')\n+\n+        self.log.info(\"getblocktemplate: Test invalid transaction\")\n+        bad_block = copy.deepcopy(block)\n+        bad_tx = copy.deepcopy(bad_block.vtx[0])\n+        bad_tx.vin[0].prevout.hash = 255\n+        bad_tx.rehash()\n+        bad_block.vtx.append(bad_tx)\n+        assert_template(node, bad_block, 'bad-txns-inputs-missingorspent')\n+\n+        self.log.info(\"getblocktemplate: Test nonfinal transaction\")\n+        bad_block = copy.deepcopy(block)\n+        bad_block.vtx[0].nLockTime = 2 ** 32 - 1\n+        bad_block.vtx[0].rehash()\n+        assert_template(node, bad_block, 'bad-txns-nonfinal')\n+\n+        self.log.info(\"getblocktemplate: Test bad tx count\")\n+        # The tx count is immediately after the block header\n+        TX_COUNT_OFFSET = 80\n+        bad_block_sn = bytearray(block.serialize())\n+        assert_equal(bad_block_sn[TX_COUNT_OFFSET], 1)\n+        bad_block_sn[TX_COUNT_OFFSET] += 1\n+        assert_raises_jsonrpc(-22, \"Block decode failed\", node.getblocktemplate, {'data': b2x(bad_block_sn), 'mode': 'proposal'})\n+\n+        self.log.info(\"getblocktemplate: Test bad bits\")\n+        bad_block = copy.deepcopy(block)\n+        bad_block.nBits = 469762303  # impossible in the real world\n+        assert_template(node, bad_block, 'bad-diffbits')\n+\n+        self.log.info(\"getblocktemplate: Test bad merkle root\")\n+        bad_block = copy.deepcopy(block)\n+        bad_block.hashMerkleRoot += 1\n+        assert_template(node, bad_block, 'bad-txnmrklroot', False)\n+\n+        self.log.info(\"getblocktemplate: Test bad timestamps\")\n+        bad_block = copy.deepcopy(block)\n+        bad_block.nTime = 2 ** 31 - 1\n+        assert_template(node, bad_block, 'time-too-new')\n+        bad_block.nTime = 0\n+        assert_template(node, bad_block, 'time-too-old')\n+\n+        self.log.info(\"getblocktemplate: Test not best block\")\n+        bad_block = copy.deepcopy(block)\n+        bad_block.hashPrevBlock = 123\n+        assert_template(node, bad_block, 'inconclusive-not-best-prevblk')\n+\n+if __name__ == '__main__':\n+    GetBlockTemplateProposalTest().main()",
    "path": "test/functional/mining.py",
    "position": null,
    "original_position": 125,
    "commit_id": "11ba8e9cdd2652835c650b9f72d8421ea10f4116",
    "original_commit_id": "df93f6cc8d80e78eb8758a7d6b5148df9bc3afa9",
    "user": {
      "login": "jimmysong",
      "id": 524761,
      "node_id": "MDQ6VXNlcjUyNDc2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/524761?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimmysong",
      "html_url": "https://github.com/jimmysong",
      "followers_url": "https://api.github.com/users/jimmysong/followers",
      "following_url": "https://api.github.com/users/jimmysong/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimmysong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimmysong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimmysong/subscriptions",
      "organizations_url": "https://api.github.com/users/jimmysong/orgs",
      "repos_url": "https://api.github.com/users/jimmysong/repos",
      "events_url": "https://api.github.com/users/jimmysong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimmysong/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`MiningTest`?",
    "created_at": "2017-04-18T18:25:04Z",
    "updated_at": "2017-06-27T15:02:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r112028775",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112028775"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r112028775"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112028775/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 125,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112054387",
    "pull_request_review_id": 33340965,
    "id": 112054387,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMjA1NDM4Nw==",
    "diff_hunk": "@@ -0,0 +1,125 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test block proposals with getblocktemplate.\"\"\"",
    "path": "test/functional/mining.py",
    "position": null,
    "original_position": 5,
    "commit_id": "11ba8e9cdd2652835c650b9f72d8421ea10f4116",
    "original_commit_id": "df93f6cc8d80e78eb8758a7d6b5148df9bc3afa9",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, thanks.",
    "created_at": "2017-04-18T20:22:52Z",
    "updated_at": "2017-06-27T15:02:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r112054387",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112054387"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r112054387"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112054387/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 5,
    "side": "RIGHT",
    "in_reply_to_id": 111810625
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112054406",
    "pull_request_review_id": 33340965,
    "id": 112054406,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMjA1NDQwNg==",
    "diff_hunk": "@@ -0,0 +1,125 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test block proposals with getblocktemplate.\"\"\"\n+\n+from binascii import b2a_hex\n+import copy\n+\n+from test_framework.blocktools import create_coinbase\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.mininode import CBlock\n+from test_framework.util import *\n+\n+def b2x(b):\n+    return b2a_hex(b).decode('ascii')\n+\n+def assert_template(node, block, expect, rehash=True):\n+    if rehash:\n+        block.hashMerkleRoot = block.calc_merkle_root()\n+    rsp = node.getblocktemplate({'data': b2x(block.serialize()), 'mode': 'proposal'})\n+    assert_equal(rsp, expect)\n+\n+class GetBlockTemplateProposalTest(BitcoinTestFramework):",
    "path": "test/functional/mining.py",
    "position": null,
    "original_position": 24,
    "commit_id": "11ba8e9cdd2652835c650b9f72d8421ea10f4116",
    "original_commit_id": "df93f6cc8d80e78eb8758a7d6b5148df9bc3afa9",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "agreed",
    "created_at": "2017-04-18T20:22:57Z",
    "updated_at": "2017-06-27T15:02:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r112054406",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112054406"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r112054406"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112054406/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 24,
    "side": "RIGHT",
    "in_reply_to_id": 112028662
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112054429",
    "pull_request_review_id": 33340965,
    "id": 112054429,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMjA1NDQyOQ==",
    "diff_hunk": "@@ -0,0 +1,125 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test block proposals with getblocktemplate.\"\"\"\n+\n+from binascii import b2a_hex\n+import copy\n+\n+from test_framework.blocktools import create_coinbase\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.mininode import CBlock\n+from test_framework.util import *\n+\n+def b2x(b):\n+    return b2a_hex(b).decode('ascii')\n+\n+def assert_template(node, block, expect, rehash=True):\n+    if rehash:\n+        block.hashMerkleRoot = block.calc_merkle_root()\n+    rsp = node.getblocktemplate({'data': b2x(block.serialize()), 'mode': 'proposal'})\n+    assert_equal(rsp, expect)\n+\n+class GetBlockTemplateProposalTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 2\n+        self.setup_clean_chain = False\n+\n+    def setup_network(self):\n+        self.nodes = self.setup_nodes()\n+        connect_nodes_bi(self.nodes, 0, 1)\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        # Mine a block to leave initial block download\n+        node.generate(1)\n+        tmpl = node.getblocktemplate()\n+        self.log.info(\"getblocktemplate: Test capability advertised\")\n+        assert 'proposal' in tmpl['capabilities']\n+        assert 'coinbasetxn' not in tmpl\n+\n+        coinbase_tx = create_coinbase(height=int(tmpl[\"height\"]) + 1)\n+        # sequence numbers must not be max for nLockTime to have effect\n+        coinbase_tx.vin[0].nSequence = 2 ** 32 - 2\n+        coinbase_tx.rehash()\n+\n+        block = CBlock()\n+        block.nVersion = tmpl[\"version\"]\n+        block.hashPrevBlock = int(tmpl[\"previousblockhash\"], 16)\n+        block.nTime = tmpl[\"curtime\"]\n+        block.nBits = int(tmpl[\"bits\"], 16)\n+        block.nNonce = 0\n+        block.vtx = [coinbase_tx]\n+\n+        self.log.info(\"getblocktemplate: Test valid block\")\n+        assert_template(node, block, None)\n+\n+        self.log.info(\"submitblock: Test block decode failure\")\n+        assert_raises_jsonrpc(-22, \"Block decode failed\", node.submitblock, b2x(block.serialize()[:-15]))\n+\n+        self.log.info(\"getblocktemplate: Test bad input hash for coinbase transaction\")\n+        bad_block = copy.deepcopy(block)\n+        bad_block.vtx[0].vin[0].prevout.hash += 1\n+        bad_block.vtx[0].rehash()\n+        assert_template(node, bad_block, 'bad-cb-missing')\n+\n+        self.log.info(\"submitblock: Test invalid coinbase transaction\")\n+        assert_raises_jsonrpc(-22, \"Block does not start with a coinbase\", node.submitblock, b2x(bad_block.serialize()))\n+\n+        self.log.info(\"getblocktemplate: Test truncated final transaction\")\n+        assert_raises_jsonrpc(-22, \"Block decode failed\", node.getblocktemplate, {'data': b2x(block.serialize()[:-1]), 'mode': 'proposal'})\n+\n+        self.log.info(\"getblocktemplate: Test duplicate transaction\")\n+        bad_block = copy.deepcopy(block)\n+        bad_block.vtx.append(bad_block.vtx[0])\n+        assert_template(node, bad_block, 'bad-txns-duplicate')\n+\n+        self.log.info(\"getblocktemplate: Test invalid transaction\")\n+        bad_block = copy.deepcopy(block)\n+        bad_tx = copy.deepcopy(bad_block.vtx[0])\n+        bad_tx.vin[0].prevout.hash = 255\n+        bad_tx.rehash()\n+        bad_block.vtx.append(bad_tx)\n+        assert_template(node, bad_block, 'bad-txns-inputs-missingorspent')\n+\n+        self.log.info(\"getblocktemplate: Test nonfinal transaction\")\n+        bad_block = copy.deepcopy(block)\n+        bad_block.vtx[0].nLockTime = 2 ** 32 - 1\n+        bad_block.vtx[0].rehash()\n+        assert_template(node, bad_block, 'bad-txns-nonfinal')\n+\n+        self.log.info(\"getblocktemplate: Test bad tx count\")\n+        # The tx count is immediately after the block header\n+        TX_COUNT_OFFSET = 80\n+        bad_block_sn = bytearray(block.serialize())\n+        assert_equal(bad_block_sn[TX_COUNT_OFFSET], 1)\n+        bad_block_sn[TX_COUNT_OFFSET] += 1\n+        assert_raises_jsonrpc(-22, \"Block decode failed\", node.getblocktemplate, {'data': b2x(bad_block_sn), 'mode': 'proposal'})\n+\n+        self.log.info(\"getblocktemplate: Test bad bits\")\n+        bad_block = copy.deepcopy(block)\n+        bad_block.nBits = 469762303  # impossible in the real world\n+        assert_template(node, bad_block, 'bad-diffbits')\n+\n+        self.log.info(\"getblocktemplate: Test bad merkle root\")\n+        bad_block = copy.deepcopy(block)\n+        bad_block.hashMerkleRoot += 1\n+        assert_template(node, bad_block, 'bad-txnmrklroot', False)\n+\n+        self.log.info(\"getblocktemplate: Test bad timestamps\")\n+        bad_block = copy.deepcopy(block)\n+        bad_block.nTime = 2 ** 31 - 1\n+        assert_template(node, bad_block, 'time-too-new')\n+        bad_block.nTime = 0\n+        assert_template(node, bad_block, 'time-too-old')\n+\n+        self.log.info(\"getblocktemplate: Test not best block\")\n+        bad_block = copy.deepcopy(block)\n+        bad_block.hashPrevBlock = 123\n+        assert_template(node, bad_block, 'inconclusive-not-best-prevblk')\n+\n+if __name__ == '__main__':\n+    GetBlockTemplateProposalTest().main()",
    "path": "test/functional/mining.py",
    "position": null,
    "original_position": 125,
    "commit_id": "11ba8e9cdd2652835c650b9f72d8421ea10f4116",
    "original_commit_id": "df93f6cc8d80e78eb8758a7d6b5148df9bc3afa9",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "yep",
    "created_at": "2017-04-18T20:23:03Z",
    "updated_at": "2017-06-27T15:02:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r112054429",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112054429"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r112054429"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112054429/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 125,
    "side": "RIGHT",
    "in_reply_to_id": 112028775
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112054978",
    "pull_request_review_id": 33341599,
    "id": 112054978,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMjA1NDk3OA==",
    "diff_hunk": "@@ -82,13 +83,13 @@ def run_test(self):\n         # Mine a block to leave initial block download\n         node.generate(1)\n         tmpl = node.getblocktemplate()\n-        if 'coinbasetxn' not in tmpl:\n-            rawcoinbase = encodeUNum(tmpl['height'])\n-            rawcoinbase += b'\\x01-'\n-            hexcoinbase = b2x(rawcoinbase)\n-            hexoutval = b2x(pack('<Q', tmpl['coinbasevalue']))\n-            tmpl['coinbasetxn'] = {'data': '01000000' + '01' + '0000000000000000000000000000000000000000000000000000000000000000ffffffff' + ('%02x' % (len(rawcoinbase),)) + hexcoinbase + 'fffffffe' + '01' + hexoutval + '00' + '00000000'}\n-        txlist = list(bytearray(a2b_hex(a['data'])) for a in (tmpl['coinbasetxn'],) + tuple(tmpl['transactions']))\n+        assert 'coinbasetxn' not in tmpl\n+\n+        coinbase_tx = create_coinbase(height=int(tmpl[\"height\"]) + 1)\n+        # sequence numbers must not be max for nLockTime to have effect\n+        coinbase_tx.vin[0].nSequence = 2 ** 32 - 2\n+        tmpl['coinbasetxn'] = {'data': coinbase_tx.serialize()}\n+        txlist = [bytearray(coinbase_tx.serialize())]",
    "path": "test/functional/getblocktemplate_proposals.py",
    "position": null,
    "original_position": 25,
    "commit_id": "11ba8e9cdd2652835c650b9f72d8421ea10f4116",
    "original_commit_id": "4687fe6a225613b204fa6ef9f8445fadc01d0039",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "yes, I believe so",
    "created_at": "2017-04-18T20:25:24Z",
    "updated_at": "2017-06-27T15:02:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r112054978",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112054978"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10190#discussion_r112054978"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10190"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112054978/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 92,
    "side": "RIGHT",
    "in_reply_to_id": 112027035
  }
]