MarcoFalke,2018-07-11T16:05:20Z,Doesn't the location of the default config file depend on the datadir?,https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-404224521,404224521,
Flowdalic,2018-07-11T17:37:14Z,"> Doesn't the location of the default config file depend on the datadir?\n\nYes, BITCOIN_CONF_FILENAME, which is set to `bitcoin.conf` is feed into AbsPathForConfigVal() which uses the datadir setting. However, if no datadir is explicitly set it defaults to """". I think that this means that `bitcoin.conf` is opened relative to the processe's working directory.\n\nIt appears that you have a spec",https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-404251868,404251868,
MarcoFalke,2018-07-11T18:41:03Z,See https://dev.visucore.com/bitcoin/doxygen/class_args_manager.html#aec848fd54ace0df3df48dac446feb7d2 which calls `GetDataDir`,https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-404270498,404270498,
AtsukiTak,2018-07-12T03:53:22Z,"Now the second if clause seems meaningless.\n\nhttps://github.com/Flowdalic/bitcoin/blob/94a038b8694229c0153ede48a53701424ca51e38/src/bitcoind.cpp#L98-L102\n\nBecause it already checked in `ReadConfigFiles`.\n\nhttps://github.com/bitcoin/bitcoin/blob/4a7e64fc85461a205f2b51da52d1455795d43b91/src/util.cpp#L909-L912",https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-404381179,404381179,
Flowdalic,2018-07-12T05:54:35Z,"Right, the check can get probably removed.",https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-404397796,404397796,
DrahtBot,2018-07-17T16:17:54Z,"<!--e57a25ab6845829454e8d69fc972939a-->Reviewers, this pull request conflicts with the following ones:\n\n* #14409 (utils and libraries: Make 'blocksdir' always net specific by hebasto)\n* #14324 (qa: Run more tests with wallet disabled by MarcoFalke)\n* #13878 (utils: Add fstream wrapper to allow to pass unicode filename on Windows by ken2812221)\n* #13746 (-masterdatadir for datadir bootstrappin",https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-405640903,405640903,
Flowdalic,2018-07-19T19:43:31Z,"Rebased. Also fixed the cause and re-enabled the tests which were disabled in https://github.com/bitcoin/bitcoin/pull/13687 with fabe28a0cdcfa13e0e595a0905e3642a960d3077.\n\nI had a hard time working on the argument and configuration file parsing code. It is a little bit spagettish and some parts are messy.\n\nI used default argument values in order to optionally change GetDataDir() to not cre",https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-406391841,406391841,
AtsukiTak,2018-07-20T17:28:35Z,"Nice work :)\nBut this PR seems to contains lots of changes for me such as\n- Check for datadir after the config files were read\n- Create directory if user specify non exist directory\n- Do not fallback to empy path in GetDataDir()\n\nI think you should leave only first one, and move rests to another PR, and then discuss about them.",https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-406670712,406670712,
Flowdalic,2018-07-21T12:40:31Z,"> I think you should leave only first one\n\nWell, those commits depend on each other: For example I wouldn't be able to re-enable the relevant tests of ""Check for datadir after the config files were read"" without the previous commits.\n\nI don't feel like that this patch series is worth splitting up, as it is pretty small, but I am happy create single PRs for each commit one after another, if",https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-406794188,406794188,
AtsukiTak,2018-07-21T18:43:56Z,"> I don't feel like that this patch series is worth splitting up, as it is pretty small\n\nI see. So please don't care about that. That was just newbie's nonsense comment.",https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-406815759,406815759,
leishman,2018-08-24T23:11:07Z,"I don't think our PRs conflict, but just wanted to make you aware of a minor change I'm putting in the logging behavior: https://github.com/bitcoin/bitcoin/pull/14057\n\nI'm also working on logic to create a `bitcoin.conf.example` file: https://github.com/bitcoin/bitcoin/pull/13761\n\n",https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-415905377,415905377,
Flowdalic,2018-09-07T11:10:57Z,Pinging @MarcoFalke since this PR re-enables tests he disabled in fabe28a0cdcfa13e0e595a0905e3642a960d3077 (#13687). Would be great to hear your thoughts on this.,https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-419407302,419407302,
MarcoFalke,2018-09-07T12:16:21Z,"I haven't looked at the most recent code, but I still think that the location of the default config file depends on the datadir? See https://dev.visucore.com/bitcoin/doxygen/class_args_manager.html#aec848fd54ace0df3df48dac446feb7d2 which calls `GetDataDir`.\n\nSo you are changing how and what config files are read. Not sure if we want this behavior change without discussion first.\n",https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-419421318,419421318,
MarcoFalke,2018-09-07T12:17:32Z,"Also, you modified how bitcoind and bitcoin-cli work, but not the gui. Wouldn't that lead to issues when the gui is used as rpc server via the bitcoin-cli?\n\nSo if you really want to go ahead with these changes, they need tests that fail on master but pass with your fixes for bitcoind as well as the bitcoin-qt and bitcoin-cli.",https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-419421577,419421577,
DrahtBot,2018-10-08T06:07:36Z,<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase,https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-427729463,427729463,
fanquake,2019-01-05T06:06:56Z,"Closing ""up for grabs"".",https://github.com/bitcoin/bitcoin/pull/13621#issuecomment-451631166,451631166,
AtsukiTak,2018-07-20T17:15:10Z,It seems never fail unless user specify unpermitted path.,https://github.com/bitcoin/bitcoin/pull/13621#discussion_r204111837,204111837,src/bitcoin-cli.cpp
Flowdalic,2018-07-21T12:37:39Z,It fails if the specified path is not a directory. I think that is sensible and was already previous behavior. Or do have a specific change request?,https://github.com/bitcoin/bitcoin/pull/13621#discussion_r204209882,204209882,src/bitcoin-cli.cpp
AtsukiTak,2018-07-21T18:33:23Z,"If I specify a file, `boost::filesystem::create_directory` throw an error.\nIf I specify a non-exist path, a new directory is created and no error happens.\n\nI think you just missed second argument; `GetDataDir(false, false)` might be what you want.",https://github.com/bitcoin/bitcoin/pull/13621#discussion_r204218029,204218029,src/bitcoin-cli.cpp
AtsukiTak,2018-07-21T18:43:40Z,Sorry for my poor English. Please feel free to ask me if my English is not clear.,https://github.com/bitcoin/bitcoin/pull/13621#discussion_r204218278,204218278,src/bitcoin-cli.cpp
