laanwj,2017-09-05T23:24:45Z,The option needs to be removed from `GetWalletHelpString` help too,https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-327330751,327330751,
MarcoFalke,2017-09-05T23:28:26Z,Removal of `usehd` needs a small mention in the release-notes.md,https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-327331345,327331345,
laanwj,2017-09-06T00:06:24Z,"Concept ACK, we need this asap, to prevent problems with wallets created with master on older versions (due to lack of default key triggering HD master key rollover).\n",https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-327336888,327336888,
jonasschnelli,2017-09-06T22:32:23Z,"Tested ACK 62fad1266f4ab41453a86ca83141dc1b4791d20f (modulo possible nit)\nhttps://bitcoin.jonasschnelli.ch/build/291",https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-327630359,327630359,
achow101,2017-09-07T23:39:26Z,"Comments addressed. I reverted the `-usehd` warning to just be the original warning with an additional statement for `-usehd=0` option. It now says\n\n> You can't disable HD on an already existing HD wallet or create new non-HD wallets.",https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-327957670,327957670,
jonasschnelli,2017-09-08T00:00:43Z,utACK 713a92073b3b391f48d4fa146bd334893ec94b8f,https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-327961961,327961961,
xor-freenet,2018-03-06T22:03:29Z,"@achow101 \n> Also remove the ```usehd``` option to avoid weird interaction with wallet version numbers and HD-ness of wallets.\n\nCan you please clarify what that ""weird interaction"" is?\nThanks!",https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-370945058,370945058,
achow101,2018-03-06T22:09:50Z,"The version number of a HD wallet is greater than or equal to 130000. But this makes the wallet version number 159900. So, by the previous version number constraint, all newly created wallets must be a HD wallet. Creating a non-HD wallet would mean that the version number has to be less than 130000, but then the new wallet cannot include the fix provided by the new version number. Thus we must eit",https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-370946800,370946800,
MarcoFalke,2018-03-06T22:11:19Z,@xor-freenet See #11582,https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-370947216,370947216,
xor-freenet,2018-03-06T22:26:53Z,"@achow101 \n> The version number of a HD wallet is greater than or equal to 130000. But this makes the wallet version number 159900. So, by the previous version number constraint, all newly created wallets must be a HD wallet. Creating a non-HD wallet would mean that the version number has to be less than 130000, but then the new wallet cannot include the fix provided by the new version number. T",https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-370951668,370951668,
xor-freenet,2018-03-06T22:30:52Z,"@achow101 \n(Though I just said that #11582 wasn't really about ```usehd``` please notice I merely meant its unrelated goal of disabling key generation, it still **does** in fact provide code to re-add ```usehd``` which you can re-use.)",https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-370952719,370952719,
MarcoFalke,2018-03-06T22:34:09Z,If you don't have enough entropy to generate a single seed you surely won't have enough entropy to generate multiple (keypoolsize) keys.,https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-370953581,370953581,
achow101,2018-03-06T22:35:25Z,"@xor-freenet Not to be rude, but if you want that feature, you can either implement it yourself or find someone to implement it for you. Of course just implementing it is not enough and you will need to defend why it is a good idea to allow non-HD wallets and how your implementation does not break backwards compatibility and is safe. I am not interested in doing that.",https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-370953925,370953925,
xor-freenet,2018-03-06T22:40:58Z,"@MarcoFalke \n@achow101 \n> If you don't have enough entropy to generate a single seed you surely won't have enough entropy to generate multiple (keypoolsize) keys.\n\nThe problem isn't a lack of entropy at key generation, the problem is that the single piece of entropy is going to be re-used for an indefinite amount of years for as long as a wallet is used.\nAttacks on the crypto may arise w",https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-370955331,370955331,
xor-freenet,2018-03-06T22:45:10Z,"@achow101 \n> @xor-freenet Not to be rude, but if you want that feature, you can either implement it yourself or find someone to implement it for you. Of course just implementing it is not enough and you will need to defend why it is a good idea to allow non-HD wallets and how your implementation does not break backwards compatibility and is safe. I am not interested in doing that.\n\nOh sorry ",https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-370956393,370956393,
MarcoFalke,2018-03-06T23:03:28Z,"@xor-freenet Are you aware that you can create a wallet with a previous version (create a no-hd wallet) and use it with the current version?\n\nhttps://github.com/bitcoin/bitcoin/blob/master/doc/release-notes/release-notes-0.16.0.md#hd-wallets-by-default",https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-370960990,370960990,
xor-freenet,2018-03-07T11:30:09Z,"@MarcoFalke \n> @xor-freenet Are you aware that you can create a wallet with a previous version (create a no-hd wallet) and use it with the current version?\n\nYes, thank you. Requiring the usage of obsolete software versions to access security features is a mutual exclusion though, old software is insecure by definition.\n\nBesides they won't stay available forever, it's entirely possible th",https://github.com/bitcoin/bitcoin/pull/11250#issuecomment-371109914,371109914,
laanwj,2017-09-05T23:23:32Z,I think we want to keep raising an (deprecation) error if `-usehd` is provided,https://github.com/bitcoin/bitcoin/pull/11250#discussion_r137139252,137139252,src/wallet/wallet.cpp
achow101,2017-09-05T23:52:58Z,Done,https://github.com/bitcoin/bitcoin/pull/11250#discussion_r137142856,137142856,src/wallet/wallet.cpp
jonasschnelli,2017-09-06T20:58:28Z,"ultra-nit: usually I think we write ""HD wallets"".",https://github.com/bitcoin/bitcoin/pull/11250#discussion_r137388530,137388530,src/wallet/wallet.cpp
jonasschnelli,2017-09-06T22:31:44Z,"nit: maybe we should write ""[Creating] HD wallets cannot be disabled"". Otherwise it may confuse if you habe usehd=1 (or =0) in your config.",https://github.com/bitcoin/bitcoin/pull/11250#discussion_r137406864,137406864,src/wallet/wallet.cpp
TheBlueMatt,2017-09-06T23:13:38Z,nit: s/has no/expecting no/,https://github.com/bitcoin/bitcoin/pull/11250#discussion_r137413503,137413503,src/wallet/wallet.cpp
TheBlueMatt,2017-09-06T23:44:41Z,"After discussion I believe the removal of the !IsHDEnabled check here is fine but I could totally see it breaking something very subtly, so would be good to get more eyeballs on this line.",https://github.com/bitcoin/bitcoin/pull/11250#discussion_r137417573,137417573,src/wallet/wallet.cpp
jonasschnelli,2017-09-07T17:25:46Z,IMO the `IsHDEnabled()` check was there because you could salvage the wallet which may then would have triggered a `fFirstRun` and recreated a HD master key. But this is no longer true since `fFirstRun` is always false if there is a key in the wallet (and HD master key is also a standard key).,https://github.com/bitcoin/bitcoin/pull/11250#discussion_r137603569,137603569,src/wallet/wallet.cpp
sipa,2017-09-07T17:44:23Z,I think the error should only be shown when the value passed to -usehd disagrees with the version number. That way setups with usehd=1 in the config file don't break. The error message could explain how to use -upgradewallet to enable HD on an existing non-HD wallet.,https://github.com/bitcoin/bitcoin/pull/11250#discussion_r137608188,137608188,src/wallet/wallet.cpp
MarcoFalke,2017-09-10T03:26:09Z,This new warning will only be printed in subsequent loads of the wallet (after the first start) since the code branch is never executed on first start.,https://github.com/bitcoin/bitcoin/pull/11250#discussion_r137940067,137940067,src/wallet/wallet.cpp
MarcoFalke,2017-09-10T03:26:35Z,Needs mention in the release notes and fixup for check-doc.py,https://github.com/bitcoin/bitcoin/pull/11250#discussion_r137940072,137940072,src/wallet/init.cpp
MarcoFalke,2017-09-10T03:27:02Z,Why is this test removed?,https://github.com/bitcoin/bitcoin/pull/11250#discussion_r137940080,137940080,test/functional/wallet-hd.py
achow101,2017-09-12T13:43:27Z,Oops. That was removed originally when I had `-usehd` always return an error regardless.,https://github.com/bitcoin/bitcoin/pull/11250#discussion_r138351285,138351285,test/functional/wallet-hd.py
