[
  {
    "sha": "5ff94c630e33e0a2b95aa374eb5f5375ba6b19ba",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ZmY5NGM2MzBlMzNlMGEyYjk1YWEzNzRlYjVmNTM3NWJhNmIxOWJh",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2015-04-03T00:15:29Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2015-04-03T00:52:52Z"
      },
      "message": "Add git-subtree-check.sh script",
      "tree": {
        "sha": "acc77b407af546475535372cbe94e09065f9a617",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/acc77b407af546475535372cbe94e09065f9a617"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5ff94c630e33e0a2b95aa374eb5f5375ba6b19ba",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5ff94c630e33e0a2b95aa374eb5f5375ba6b19ba",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5ff94c630e33e0a2b95aa374eb5f5375ba6b19ba",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5ff94c630e33e0a2b95aa374eb5f5375ba6b19ba/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "15facb4aca75122b6ae0dcc6f6e112127e6a0e59",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/15facb4aca75122b6ae0dcc6f6e112127e6a0e59",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/15facb4aca75122b6ae0dcc6f6e112127e6a0e59"
      }
    ],
    "stats": {
      "total": 87,
      "additions": 87,
      "deletions": 0
    },
    "files": [
      {
        "sha": "f90afa7f20d829a003d91def92c024d895fea29c",
        "filename": "contrib/devtools/README.md",
        "status": "modified",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5ff94c630e33e0a2b95aa374eb5f5375ba6b19ba/contrib/devtools/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5ff94c630e33e0a2b95aa374eb5f5375ba6b19ba/contrib/devtools/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/README.md?ref=5ff94c630e33e0a2b95aa374eb5f5375ba6b19ba",
        "patch": "@@ -81,3 +81,16 @@ It will do the following automatically:\n \n See doc/translation-process.md for more information.\n \n+git-subtree-check.sh\n+====================\n+\n+Run this script from the root of the repository to verify that a subtree matches the contents of\n+the commit it claims to have been updated to.\n+\n+To use, make sure that you have fetched the upstream repository branch in which the subtree is\n+maintained:\n+* for src/secp256k1: https://github.com/bitcoin/secp256k1.git (branch master)\n+* for sec/leveldb: https://github.com/bitcoin/leveldb.git (branch bitcoin-fork)\n+\n+Usage: git-subtree-check.sh DIR COMMIT\n+COMMIT may be omitted, in which case HEAD is used."
      },
      {
        "sha": "1cb82fe6826c74af49cf381ecaf5381ab210bdb7",
        "filename": "contrib/devtools/git-subtree-check.sh",
        "status": "added",
        "additions": 74,
        "deletions": 0,
        "changes": 74,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5ff94c630e33e0a2b95aa374eb5f5375ba6b19ba/contrib/devtools/git-subtree-check.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5ff94c630e33e0a2b95aa374eb5f5375ba6b19ba/contrib/devtools/git-subtree-check.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/git-subtree-check.sh?ref=5ff94c630e33e0a2b95aa374eb5f5375ba6b19ba",
        "patch": "@@ -0,0 +1,74 @@\n+#!/bin/sh\n+\n+DIR=\"$1\"\n+COMMIT=\"$2\"\n+if [ -z \"$COMMIT\" ]; then\n+    COMMIT=HEAD\n+fi\n+\n+# Taken from git-subtree (Copyright (C) 2009 Avery Pennarun <apenwarr@gmail.com>)\n+find_latest_squash()\n+{\n+\tdir=\"$1\"\n+\tsq=\n+\tmain=\n+\tsub=\n+\tgit log --grep=\"^git-subtree-dir: $dir/*\\$\" \\\n+\t\t--pretty=format:'START %H%n%s%n%n%b%nEND%n' \"$COMMIT\" |\n+\twhile read a b junk; do\n+\t\tcase \"$a\" in\n+\t\t\tSTART) sq=\"$b\" ;;\n+\t\t\tgit-subtree-mainline:) main=\"$b\" ;;\n+\t\t\tgit-subtree-split:) sub=\"$b\" ;;\n+\t\t\tEND)\n+\t\t\t\tif [ -n \"$sub\" ]; then\n+\t\t\t\t\tif [ -n \"$main\" ]; then\n+\t\t\t\t\t\t# a rejoin commit?\n+\t\t\t\t\t\t# Pretend its sub was a squash.\n+\t\t\t\t\t\tsq=\"$sub\"\n+\t\t\t\t\tfi\n+\t\t\t\t\techo \"$sq\" \"$sub\"\n+\t\t\t\t\tbreak\n+\t\t\t\tfi\n+\t\t\t\tsq=\n+\t\t\t\tmain=\n+\t\t\t\tsub=\n+\t\t\t\t;;\n+\t\tesac\n+\tdone\n+}\n+\n+latest_squash=\"$(find_latest_squash \"$DIR\")\"\n+if [ -z \"$latest_squash\" ]; then\n+    echo \"ERROR: $DIR is not a subtree\" >&2\n+    exit 2\n+fi\n+\n+set $latest_squash\n+old=$1\n+rev=$2\n+if [ \"d$(git cat-file -t $rev 2>/dev/null)\" != dcommit ]; then\n+    echo \"ERROR: subtree commit $rev unavailable. Fetch/update the subtree repository\" >&2\n+    exit 2\n+fi\n+tree_subtree=$(git show -s --format=\"%T\" $rev)\n+echo \"$DIR in $COMMIT was last updated to upstream commit $rev (tree $tree_subtree)\"\n+tree_actual=$(git ls-tree -d \"$COMMIT\" \"$DIR\" | head -n 1)\n+if [ -z \"$tree_actual\" ]; then\n+    echo \"FAIL: subtree directory $DIR not found in $COMMIT\" >&2\n+    exit 1\n+fi\n+set $tree_actual\n+tree_actual_type=$2\n+tree_actual_tree=$3\n+echo \"$DIR in $COMMIT currently refers to $tree_actual_type $tree_actual_tree\"\n+if [ \"d$tree_actual_type\" != \"dtree\" ]; then\n+    echo \"FAIL: subtree directory $DIR is not a tree in $COMMIT\" >&2\n+    exit 1\n+fi\n+if [ \"$tree_actual_tree\" != \"$tree_subtree\" ]; then\n+    git diff-tree $tree_actual_tree $tree_subtree >&2\n+    echo \"FAIL: subtree directory tree doesn't match subtree commit tree\" >&2\n+    exit 1\n+fi\n+echo \"GOOD\""
      }
    ]
  }
]