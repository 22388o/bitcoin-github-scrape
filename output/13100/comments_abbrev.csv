ken2812221,2018-04-27T01:33:37Z,"~~If the wallet folder name contains Chinese, it will create a new folder that has same wallet file with a weird name on Windows, maybe the encoding issue~~ (Not related)\n\nAlso, the seperator is incorrect on Windows\n![image](https://user-images.githubusercontent.com/11154118/39339224-243a5762-49fa-11e8-8ba5-183cff638d4d.png)",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-384836977,384836977,
promag,2018-04-27T08:36:44Z,@ken2812221 does the problem exists if you use the RPC command?,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-384904672,384904672,
ken2812221,2018-04-27T08:49:38Z,"~~It shows wallet not found on RPC.~~ (Not related)\n\n",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-384907883,384907883,
promag,2018-04-27T08:55:12Z,@ken2812221 but it does exists right? What if you launch the application with `-wallet=d:\...`?,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-384909246,384909246,
ken2812221,2018-04-27T09:14:04Z,"`-wallet=d:\錢包` does works, but the name displayed in Qt is incorrect\n![image](https://user-images.githubusercontent.com/11154118/39354932-60a17f3e-4a3e-11e8-8a5b-029d5caeaeec.png)\n\nAnd it crash when I quit Qt\n\nChecked that this isn't an issue on Linux.",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-384913996,384913996,
ryanofsky,2018-04-27T12:47:40Z,"Maybe windows or boost is using big5 encoding. which ends in a right square bracket `]`\n\n```python\n>>> '錢包'.encode('big5')\nb'\xbf\xfa\xa5]'\n>>> '錢包'.encode('big5').decode('utf8', 'replace')\n'���]'\n```",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-384959985,384959985,
promag,2018-04-27T14:08:45Z,@ken2812221 thanks for the review and bug report. Let's move the bug discussion to #13103.,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-384981183,384981183,
meshcollider,2018-05-02T09:12:30Z,Concept ACK,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-385914386,385914386,
jnewbery,2018-05-03T20:03:56Z,Please update description to say that this fixes #7675,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-386419078,386419078,
promag,2018-05-04T22:06:22Z,"> Please update description to say that this fixes #7675\n\nDone. Also rebased.",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-386747202,386747202,
promag,2018-05-23T11:57:17Z,Rebased on master.,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-391320420,391320420,
jnewbery,2018-05-23T13:29:34Z,wallet_multiwallet.py fails,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-391346857,391346857,
promag,2018-05-24T13:21:43Z,Rebased.,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-391712354,391712354,
jnewbery,2018-07-09T18:48:05Z,"@promag - what's the status of this? It'd be great to have this in v0.17, but feature freeze is next week.",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-403581871,403581871,
promag,2018-07-10T02:20:55Z,"@jnewbery agree, please test, I'll address your comments as soon as I can.",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-403678231,403678231,
promag,2018-07-10T14:09:06Z,"@Sjors thanks for testing!\n\n> The default should be the datadir,\n\nOr walletdir?",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-403835848,403835848,
Sjors,2018-07-10T14:14:38Z,"> Or walletdir?\n\nIf present, probably yes. Afaik it's only created if there was no datadir at launch time, so at least in normal circumstances if /wallets exists, it should be non-confusing to use that as a default.",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-403837797,403837797,
promag,2018-07-22T01:25:45Z,"With #9662 merged, do we want the same feature in the UI?",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-406834462,406834462,
promag,2018-07-22T01:28:00Z,Rebased.,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-406834540,406834540,
Sjors,2018-07-22T10:46:22Z,"A check box for watch-only in the GUI can probably wait. Not sure if it's useful, but not against it either.",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-406856829,406856829,
jnewbery,2018-07-23T20:56:13Z,"Fails `wallet_disableprivatekeys.py`. The `wallet_creation_flags` are not being passed through to `CreateWalletFromFile()`, and so this regresses being able to create a watch-only wallet.\n\n> With #9662 merged, do we want the same feature in the UI?\n\nLater. Let's just try to get the basic functionality into the GUI first!",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-407198293,407198293,
promag,2018-07-24T20:49:47Z,"@jnewbery thanks for the hint, fixed.",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-407547329,407547329,
Sjors,2018-07-25T08:53:03Z,"I'm a bit confused by git here: \nGithub shows 737ecac as the most recent commit, but when I fetch your branch it's not there. Travis seems to ignore it as well.",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-407683006,407683006,
promag,2018-07-25T09:23:13Z,"@Sjors the last commit in the branch is 940e445, github orders by author date IIUC.",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-407691712,407691712,
PierreRochard,2018-08-25T23:13:08Z,"Concept ACK, I read through the changes and manually tested the GUI. \nDitto to @jnewbery's comments",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-416002376,416002376,
MarcoFalke,2018-08-29T19:35:33Z,Removing from High-priority due to conflicts,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-417077975,417077975,
Sjors,2018-09-07T20:14:10Z,"I suggest adding a warning, once a user has selected a wallet file to open, that you should [never ever use wallet files downloaded from strangers](https://blog.blockchain.com/2018/04/11/addressing-watch-only-scams/).",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-419553356,419553356,
promag,2018-09-07T20:54:30Z,"> I suggest adding a warning, once a user has selected a wallet file to open, that you should never ever use wallet files downloaded from strangers.\n\n@Sjors do you think it should be done in this PR?\n\n> @promag - are you still actively working on this PR?\n\n@jnewbery yes, I have some changes to submit.",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-419563031,419563031,
jnewbery,2018-09-07T21:23:37Z,"> yes, I have some changes to submit.\n\nGreat! Looking forward to seeing them :grin: ",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-419569505,419569505,
Sjors,2018-09-08T09:29:29Z,"> in this PR?\n\nNo, but worth creating an up for grabs issue for.",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-419626805,419626805,
jnewbery,2018-09-11T17:37:10Z,"@promag - it'd be great to get this in for v0.18. It's the last piece in https://github.com/bitcoin/bitcoin/projects/2.\n\nLonger term, one of my motivations for https://github.com/bitcoin/bitcoin/issues/13059 was to have bitcoind/qt not create a default wallet at startup if one didn't exist. This PR is the final blocker for that to happen.",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-420357238,420357238,
promag,2018-09-21T22:03:23Z,Related https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-423683042,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-423683128,423683128,
DrahtBot,2018-09-22T07:21:22Z,"<!--e57a25ab6845829454e8d69fc972939a-->Reviewers, this pull request conflicts with the following ones:\n\n* #14451 (Add BIP70 deprecation warning and allow building GUI without BIP70 support by jameshilliard)\n* #14437 (Refactor: Start to separate wallet from node by ryanofsky)\n* #14350 (Add WalletInfo class by promag)\n* #14291 (wallet: Add ListWalletDir utility function by promag)\n* #13926 ([T",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-423723491,423723491,
practicalswift,2018-09-22T18:07:12Z,This PR does not compile after rebasing on `master` :-),https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-423762606,423762606,
Sjors,2018-09-25T11:51:38Z,"@jnewbery wrote:\n> Longer term [...] to have bitcoind/qt not create a default wallet at startup if one didn't exist. This PR is the final blocker for that to happen.\n\nThat would be nice indeed. I find it quite annoying that you can't start bitcoind without any wallet loaded. And I have too many `wallet.dat` files floating around that I need to carefully check are actually safe to delete :-)",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-424312291,424312291,
jnewbery,2018-09-25T12:26:45Z,@promag - what's the status here? This PR seems to have stalled.,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-424322318,424322318,
promag,2018-09-25T12:58:30Z,@jnewbery I'm rebasing on #14291. Current implementation is more suitable to external wallets.,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-424332547,424332547,
promag,2018-09-25T13:27:13Z,"@Sjors @jnewbery this is what it looks like:\n\n<img width=""425"" alt=""screen shot 2018-09-25 at 12 43 04"" src=""https://user-images.githubusercontent.com/3534524/46017109-9925fe00-c0ce-11e8-8635-ace219b7f603.png"">\n\n> For this PR it should be enough if the file dialog opens in walletdir, or datadir if that doesn't exist.\n\nIf we handle wallets in the `-walletdir` differently, then, for exte",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-424342813,424342813,
Sjors,2018-09-25T13:37:35Z,That looks pretty nice. I'd move `Open External Wallet` to the bottom and just call it `Other...`. Indeed it makes sense that doesn't use walletdir.,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-424346488,424346488,
jonasschnelli,2018-09-25T18:46:36Z,"Doesn't build on linux/win gitian:\n\n```\n  CXXLD    test/test_bitcoin.exe\n  AR       qt/libbitcoinqt.a\n  OBJCXXLD qt/bitcoin-qt.exe\nlibbitcoin_server.a(libbitcoin_server_a-node.o): In function `getWalletDir':\n/home/ubuntu/build/bitcoin/distsrc-i686-w64-mingw32/src/interfaces/node.cpp:226: undefined reference to `GetWalletDir[abi:cxx11]()'\ncollect2: error: ld returned 1 exit status\",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-424457599,424457599,
DrahtBot,2018-10-20T09:52:28Z,<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-431566343,431566343,
meshcollider,2018-11-03T06:21:16Z,"It'd be nice to get this in to 0.18, is that feasible? Needs a rebase\n\nOverall this is looking good, concept ACK with some code review, I'll review more once rebased/the comments above have been addressed and the WIP fixup commit is done",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-435564264,435564264,
Sjors,2018-12-10T17:42:47Z,"For a followup, once #11082 is merged, we should add a `wallet=` entry to it once a wallet is created.\n\nNoteable changes that may cause a headache during rebase:\n* #14350 (by yourself, `WalletLocation` needed in various places)\n* #14437 (you need to pass `interfaces::Chain& chain` to CreateWallet, which needs it for Verify)",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-445905189,445905189,
luke-jr,2019-01-02T11:13:30Z,Why is there a separate File and Wallet menu in the screenshot above? They should be the same menu...,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-450838467,450838467,
jonasschnelli,2019-01-04T06:33:13Z,@promag: care to rebase/pick this up again?,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-451363379,451363379,
Sjors,2019-01-17T16:10:30Z,"A lot of this has been moved to smaller pull requests. E.g. there's now a separate PR for just the open wallet feature #15153. I suppose ""unloading"" a wallet would be fairly trivial on top of that.\n\nFor my own work on #14912 I'd love to have a (proof of concept) ""create wallet"" PR to build on top of. Ideally it would a dialog, with a check box for the read-only feature (and later for the empty",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-455229542,455229542,
jnewbery,2019-01-17T16:20:29Z,"Feature freeze is on Feb 15th. I'd really love to have this in v0.18.\n\n@promag - any chance of a rebase so we can start testing & reviewing?",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-455233421,455233421,
promag,2019-01-17T16:55:18Z,@jnewbery please see #15101 and then #15153.,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-455246632,455246632,
jnewbery,2019-01-18T20:37:59Z,"Can this PR be closed? I think all changes are covered by other PRs, and issue #13059 tracks the total progress.",https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-455680016,455680016,
promag,2019-01-18T20:40:38Z,Thanks for updating that @jnewbery.,https://github.com/bitcoin/bitcoin/pull/13100#issuecomment-455680665,455680665,
ken2812221,2018-04-29T10:56:27Z,Use `QDir::toNativeSeparators` to convert `/` to `\` on Windows,https://github.com/bitcoin/bitcoin/pull/13100#discussion_r184879025,184879025,src/qt/bitcoingui.cpp
jnewbery,2018-04-30T18:12:05Z,This seems almost exactly duplicated from `loadwallet()` in rpcwallet.cpp. Does it make sense to factor it out to avoid repetition?,https://github.com/bitcoin/bitcoin/pull/13100#discussion_r185064610,185064610,src/interfaces/node.cpp
jnewbery,2018-04-30T18:14:24Z,I don't understand why you're passing back an error string if it's always the string `ops`,https://github.com/bitcoin/bitcoin/pull/13100#discussion_r185065217,185065217,src/interfaces/node.cpp
jnewbery,2018-04-30T18:15:01Z,The use of `auto` here makes it difficult to understand the `result.second` below.,https://github.com/bitcoin/bitcoin/pull/13100#discussion_r185065369,185065369,src/qt/bitcoingui.cpp
promag,2018-04-30T18:20:40Z,"Yeah, I would like to move to `WalletManager`",https://github.com/bitcoin/bitcoin/pull/13100#discussion_r185066891,185066891,src/interfaces/node.cpp
promag,2018-04-30T18:21:32Z,"Ops, it's unfinished. Not sure if it should return the pair.",https://github.com/bitcoin/bitcoin/pull/13100#discussion_r185067127,185067127,src/interfaces/node.cpp
promag,2018-05-02T16:32:25Z,@jnewbery done in #9888dc2.,https://github.com/bitcoin/bitcoin/pull/13100#discussion_r185559257,185559257,src/interfaces/node.cpp
promag,2018-05-02T16:32:53Z,"Removed, changed the return type.",https://github.com/bitcoin/bitcoin/pull/13100#discussion_r185559376,185559376,src/interfaces/node.cpp
promag,2018-05-02T16:33:34Z,"No an issue now, return value is not necessary.",https://github.com/bitcoin/bitcoin/pull/13100#discussion_r185559596,185559596,src/qt/bitcoingui.cpp
promag,2018-05-02T16:33:41Z,Done.,https://github.com/bitcoin/bitcoin/pull/13100#discussion_r185559631,185559631,src/qt/bitcoingui.cpp
promag,2018-05-03T09:37:52Z,"@jnewbery @laanwj ATM the wallet is loaded in the UI thread, should I refactor to load it in the background?",https://github.com/bitcoin/bitcoin/pull/13100#discussion_r185743384,185743384,src/qt/bitcoingui.cpp
jnewbery,2018-05-03T20:04:17Z,I think that's a good future enhancement. Not necessary in the initial version IMO.,https://github.com/bitcoin/bitcoin/pull/13100#discussion_r185920440,185920440,src/qt/bitcoingui.cpp
jnewbery,2018-05-24T14:51:14Z,"Suggestion: start in the data directory for the current network (mainnet/testnet/regtest) instead of the home directory, since that's where the wallet files and folders will usually be (and because it may be difficult to traverse down into `.bitcoin`).",https://github.com/bitcoin/bitcoin/pull/13100#discussion_r190616591,190616591,src/qt/bitcoingui.cpp
jnewbery,2018-05-24T14:51:46Z,Why only show directories and not symlinks? Wallets can be `.dat` files.,https://github.com/bitcoin/bitcoin/pull/13100#discussion_r190616798,190616798,src/qt/bitcoingui.cpp
promag,2018-05-24T15:48:45Z,Right.,https://github.com/bitcoin/bitcoin/pull/13100#discussion_r190638342,190638342,src/qt/bitcoingui.cpp
,2018-06-12T05:01:53Z,"^^\n",https://github.com/bitcoin/bitcoin/pull/13100#discussion_r194615154,194615154,src/qt/bitcoingui.cpp
Sjors,2018-07-10T13:11:41Z,"IIUC the `&` sets the keyboard shortcut, so these should be unique (or absent).",https://github.com/bitcoin/bitcoin/pull/13100#discussion_r201335446,201335446,src/qt/bitcoingui.cpp
promag,2018-07-10T14:08:20Z,"Then I think it's best to omit shortcuts for now, WDYT?",https://github.com/bitcoin/bitcoin/pull/13100#discussion_r201356809,201356809,src/qt/bitcoingui.cpp
Sjors,2018-07-10T14:13:14Z,I'm fine with either no shortcuts or unique ones. ,https://github.com/bitcoin/bitcoin/pull/13100#discussion_r201358671,201358671,src/qt/bitcoingui.cpp
Empact,2018-07-15T15:56:55Z,nit: there's a lot of common code between `LoadWallet` and `CreateWallet`,https://github.com/bitcoin/bitcoin/pull/13100#discussion_r202546800,202546800,src/wallet/wallet.cpp
MarcoFalke,2018-07-22T15:29:22Z,Could use the new syntax here?,https://github.com/bitcoin/bitcoin/pull/13100#discussion_r204244397,204244397,src/qt/bitcoingui.cpp
jnewbery,2018-07-26T21:37:28Z,This still defaults to the directory that qt is running in. Can we change that to the wallet directory?,https://github.com/bitcoin/bitcoin/pull/13100#discussion_r205610624,205610624,src/qt/bitcoingui.cpp
jnewbery,2018-07-26T21:38:10Z,"Why is this `getExistingDirectory()`? A wallet can also be a file I think.\n\nAlso defaults to the directory that qt is running in.",https://github.com/bitcoin/bitcoin/pull/13100#discussion_r205610781,205610781,src/qt/bitcoingui.cpp
jnewbery,2018-07-26T21:38:45Z,I find this function quite inscrutable. Can you add some comments?,https://github.com/bitcoin/bitcoin/pull/13100#discussion_r205611011,205611011,src/wallet/wallet.cpp
promag,2018-09-07T20:52:33Z,Sure!,https://github.com/bitcoin/bitcoin/pull/13100#discussion_r216084148,216084148,src/wallet/wallet.cpp
luke-jr,2019-01-02T11:10:31Z,"If we're going to use icons, I think they ought to be different...",https://github.com/bitcoin/bitcoin/pull/13100#discussion_r244710847,244710847,src/qt/bitcoingui.cpp
