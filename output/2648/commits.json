[
  {
    "sha": "0206e38dcd32e0cc76c6f0e08197a2a72bef0fb1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMjA2ZTM4ZGNkMzJlMGNjNzZjNmYwZTA4MTk3YTJhNzJiZWYwZmIx",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2013-05-13T06:26:29Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2013-06-10T17:27:57Z"
      },
      "message": "allow txindex to be removed and add a reindex dialog\n\n- adds a reindex dialog for Bitcoin-Qt to change -txindex without the need\n  to supply -reindex\n- now also does a -reindex, when removing the -txindex switch",
      "tree": {
        "sha": "5649c225a4a1fb9626569ebc3dd5840f86e46781",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5649c225a4a1fb9626569ebc3dd5840f86e46781"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0206e38dcd32e0cc76c6f0e08197a2a72bef0fb1",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0206e38dcd32e0cc76c6f0e08197a2a72bef0fb1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0206e38dcd32e0cc76c6f0e08197a2a72bef0fb1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0206e38dcd32e0cc76c6f0e08197a2a72bef0fb1/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "a2a2874fc03102c2e847cd165db1ff1f5d84fa89",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a2a2874fc03102c2e847cd165db1ff1f5d84fa89",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a2a2874fc03102c2e847cd165db1ff1f5d84fa89"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 8,
      "deletions": 5
    },
    "files": [
      {
        "sha": "fe74cd69635ef74428c3a384b045c068c974dc5a",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 4,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0206e38dcd32e0cc76c6f0e08197a2a72bef0fb1/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0206e38dcd32e0cc76c6f0e08197a2a72bef0fb1/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=0206e38dcd32e0cc76c6f0e08197a2a72bef0fb1",
        "patch": "@@ -744,6 +744,12 @@ bool AppInit2(boost::thread_group& threadGroup)\n                 if (!mapBlockIndex.empty() && pindexGenesisBlock == NULL)\n                     return InitError(_(\"Incorrect or no genesis block found. Wrong datadir for network?\"));\n \n+                // Check for changed -txindex state (only necessary if we are not reindexing anyway)\n+                if (!fReindex && fTxIndex != GetBoolArg(\"-txindex\", false)) {\n+                    strLoadError = _(\"You need to rebuild the database using -reindex to change -txindex\");\n+                    break;\n+                }\n+\n                 // Initialize the block index (no-op if non-empty database was already loaded)\n                 if (!InitBlockIndex()) {\n                     strLoadError = _(\"Error initializing block database\");\n@@ -767,7 +773,7 @@ bool AppInit2(boost::thread_group& threadGroup)\n             // first suggest a reindex\n             if (!fReset) {\n                 bool fRet = uiInterface.ThreadSafeMessageBox(\n-                    strLoadError + \".\\n\" + _(\"Do you want to rebuild the block database now?\"),\n+                    strLoadError + \".\\n\\n\" + _(\"Do you want to rebuild the block database now?\"),\n                     \"\", CClientUIInterface::MSG_ERROR | CClientUIInterface::BTN_ABORT);\n                 if (fRet) {\n                     fReindex = true;\n@@ -781,9 +787,6 @@ bool AppInit2(boost::thread_group& threadGroup)\n         }\n     }\n \n-    if (mapArgs.count(\"-txindex\") && fTxIndex != GetBoolArg(\"-txindex\", false))\n-        return InitError(_(\"You need to rebuild the databases using -reindex to change -txindex\"));\n-\n     // as LoadBlockIndex can take several minutes, it's possible the user\n     // requested to kill bitcoin-qt during the last operation. If so, exit.\n     // As the program has not fully started yet, Shutdown() is possibly overkill."
      },
      {
        "sha": "1afce2eb7ce076e4f59aabc3d9bc596ecbc9c565",
        "filename": "src/qt/bitcoinstrings.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0206e38dcd32e0cc76c6f0e08197a2a72bef0fb1/src/qt/bitcoinstrings.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0206e38dcd32e0cc76c6f0e08197a2a72bef0fb1/src/qt/bitcoinstrings.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoinstrings.cpp?ref=0206e38dcd32e0cc76c6f0e08197a2a72bef0fb1",
        "patch": "@@ -205,6 +205,6 @@ QT_TRANSLATE_NOOP(\"bitcoin-core\", \"Verifying wallet...\"),\n QT_TRANSLATE_NOOP(\"bitcoin-core\", \"Wallet needed to be rewritten: restart Bitcoin to complete\"),\n QT_TRANSLATE_NOOP(\"bitcoin-core\", \"Warning\"),\n QT_TRANSLATE_NOOP(\"bitcoin-core\", \"Warning: This version is obsolete, upgrade required!\"),\n-QT_TRANSLATE_NOOP(\"bitcoin-core\", \"You need to rebuild the databases using -reindex to change -txindex\"),\n+QT_TRANSLATE_NOOP(\"bitcoin-core\", \"You need to rebuild the database using -reindex to change -txindex\"),\n QT_TRANSLATE_NOOP(\"bitcoin-core\", \"wallet.dat corrupt, salvage failed\"),\n };\n\\ No newline at end of file"
      }
    ]
  }
]