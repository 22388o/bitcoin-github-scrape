jnewbery,2020-05-21 22:51:07,This is the 4th PR taken from #18876. Please see that PR for details of the full changes to support BIP 157.,https://github.com/bitcoin/bitcoin/pull/19044#issuecomment-632385406,632385406,
jnewbery,2020-05-26 15:29:57,rebased on master and fixed failing test.,https://github.com/bitcoin/bitcoin/pull/19044#issuecomment-634098833,634098833,
jnewbery,2020-05-26 21:42:27,"Thanks for the review @MarcoFalke and @Empact. I've addressed all of your review comments.\n\n> nit: for 0139a1b, how about noting in the commit message where this was introduced?\n\nThe default [de]serialization wasn't previously used anywhere, so I don't think this is necessary. It's trivial to look up the git blame for that line.",https://github.com/bitcoin/bitcoin/pull/19044#issuecomment-634295328,634295328,
Empact,2020-05-26 23:33:43,re-Code Review ACK https://github.com/bitcoin/bitcoin/pull/19044/commits/9e36067d8cd02830c7e5a88a391dff6ac3adbe0c,https://github.com/bitcoin/bitcoin/pull/19044#issuecomment-634334949,634334949,
DrahtBot,2020-05-27 20:12:02,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19053 (refactor: replace CNode pointers by references within net_processing.{h,cpp} by theStack)\n\nIf you consider this ",https://github.com/bitcoin/bitcoin/pull/19044#issuecomment-634914025,634914025,
MarcoFalke,2020-05-29 13:11:15,"re-ACK 9e36067d8c , only change is adding commit ""[refactor] Pass CNode and CConnman by reference"" ü•ë\n\n<details><summary>Show signature and timestamp</summary>\n\nSignature:\n\n```\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nre-ACK 9e36067d8c , only change is adding commit ""[refactor] Pass CNode and CConnman by reference"" ü•ë\n-----BEGIN PGP SIGNATURE-----\n\niQGzBAEBCgAdFiEE+",https://github.com/bitcoin/bitcoin/pull/19044#issuecomment-635964183,635964183,
jnewbery,2020-06-02 14:32:43,"Thanks for the review @jonatack \n\n- the messages are defined in order [getcfilters, cfilter, getcfheaders, cfheaders, getcfcheckpt, cfcheckpt] in the BIP, so I think it makes sense to preserve that ordering in protocol.cpp.\n- test docstring is fixed in the next PR",https://github.com/bitcoin/bitcoin/pull/19044#issuecomment-637581988,637581988,
theStack,2020-05-22 12:17:03,"```suggestion\n * Handle a cfilters request.\n```",https://github.com/bitcoin/bitcoin/pull/19044#discussion_r429212297,429212297,src/net_processing.cpp
jnewbery,2020-05-22 16:36:26,Fixed. Thanks!,https://github.com/bitcoin/bitcoin/pull/19044#discussion_r429345651,429345651,src/net_processing.cpp
MarcoFalke,2020-05-26 16:17:29,"style-nit in commit ee8499d294\n\n```suggestion\nextern const char* CFILTER;\n```",https://github.com/bitcoin/bitcoin/pull/19044#discussion_r430538847,430538847,src/protocol.h
jnewbery,2020-05-26 17:36:52,Fixed. Thanks!,https://github.com/bitcoin/bitcoin/pull/19044#discussion_r430589059,430589059,src/protocol.h
Empact,2020-05-26 20:42:59,nit: inconsistent whitespace,https://github.com/bitcoin/bitcoin/pull/19044#discussion_r430696398,430696398,src/net_processing.cpp
Empact,2020-05-26 20:46:11,"nit: since `pfrom` and `connman` are assumed, how about pass by reference?",https://github.com/bitcoin/bitcoin/pull/19044#discussion_r430697916,430697916,src/net_processing.cpp
jnewbery,2020-05-26 21:38:52,Fixed.,https://github.com/bitcoin/bitcoin/pull/19044#discussion_r430722778,430722778,src/net_processing.cpp
jnewbery,2020-05-26 21:40:34,"You're the second reviewer to ask for this so I've now made the change (as well as to `ProcessGetCFHeaders()` and `ProcessGetCFCheckPt`).\n\nSee also https://github.com/bitcoin/bitcoin/pull/19010#discussion_r429175250.",https://github.com/bitcoin/bitcoin/pull/19044#discussion_r430723502,430723502,src/net_processing.cpp
Empact,2020-05-26 22:11:40,"Thanks, IMO eliminating the null case is a worthwhile reason to break convention.",https://github.com/bitcoin/bitcoin/pull/19044#discussion_r430736092,430736092,src/net_processing.cpp
jkczyz,2020-05-29 00:38:33,"Not sure if there is a mistake in [BIP 157](https://github.com/bitcoin/bips/blob/master/bip-0157.mediawiki#getcfilters), but it reads that the difference must be strictly less than 1000 which [implies not equal](https://en.wikipedia.org/wiki/Inequality_(mathematics)). Currently, `PrepareBlockFilterRequest` would allow 1000.\n\nLikewise for headers.",https://github.com/bitcoin/bitcoin/pull/19044#discussion_r432197182,432197182,src/net_processing.cpp
jkczyz,2020-05-29 00:54:42,nit: Consider removing blank line for consistency with `ProcessGetCFHeaders`.,https://github.com/bitcoin/bitcoin/pull/19044#discussion_r432201307,432201307,src/net_processing.cpp
jkczyz,2020-05-29 01:07:03,"Does the ""p"" in `pfrom` stand for ""pointer"" or ""peer""? Consider renaming if the former.",https://github.com/bitcoin/bitcoin/pull/19044#discussion_r432204149,432204149,src/net_processing.cpp
jnewbery,2020-05-29 13:02:12,"I think the BIP and code are correct/consistent. If the difference between the start height and stop height in the request is 999, then the number of filters served is 1000. For example, request(1, 1000) results in blocks 1-1000 (1000 blocks) being served.\n\n`if (stop_height - start_height >= max_height_diff)` ensures the strictly-less-than.",https://github.com/bitcoin/bitcoin/pull/19044#discussion_r432466886,432466886,src/net_processing.cpp
jnewbery,2020-05-29 13:03:01,I'll do this if I need to retouch the branch.,https://github.com/bitcoin/bitcoin/pull/19044#discussion_r432467321,432467321,src/net_processing.cpp
jnewbery,2020-05-29 13:05:35,I think you're right that the p stands for pointer. I'll rename these if I need to retouch the branch.,https://github.com/bitcoin/bitcoin/pull/19044#discussion_r432468814,432468814,src/net_processing.cpp
jkczyz,2020-05-29 17:41:54,"Right, the difference. üëç ",https://github.com/bitcoin/bitcoin/pull/19044#discussion_r432640018,432640018,src/net_processing.cpp
fjahr,2020-05-31 21:28:04,nit-ish: the comment up top in `p2p_blockfilters.py` is still missing `cfilters`.,https://github.com/bitcoin/bitcoin/pull/19044#discussion_r432985941,432985941,test/functional/p2p_blockfilters.py
MarcoFalke,2020-05-31 22:17:53,Let's fix this up in a follow-up,https://github.com/bitcoin/bitcoin/pull/19044#discussion_r432990173,432990173,test/functional/p2p_blockfilters.py
