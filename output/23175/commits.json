[
  {
    "sha": "5bd40a3e84a35e0cdf802b132dac5725b9558f32",
    "node_id": "C_kwDOABII59oAKDViZDQwYTNlODRhMzVlMGNkZjgwMmIxMzJkYWM1NzI1Yjk1NThmMzI",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-10-04T14:13:05Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-11-11T12:13:59Z"
      },
      "message": "cli: add cjdns network to -addrinfo and -netinfo",
      "tree": {
        "sha": "16556c3ec5fdbd7616b29f70ec848d8aac560b24",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/16556c3ec5fdbd7616b29f70ec848d8aac560b24"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5bd40a3e84a35e0cdf802b132dac5725b9558f32",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmGNCQcACgkQT1chs9Dj\nkh0zuRAAhOYMnpDxNjYtsmDQdsZ2/tjuqmDaLXIvWnZgPKggSVKr5zllenSmuTTg\no6uFXevcdQ5G/VIzfc8VznhVFk53sChgldSHS1d0XFc4k1Q2vnTx4wmgHuFcCjMc\n0fkUG2vp1fHdxQwOFi7GTW3njM0STjtaDpqHHWwNhD22xPbC7Zca4gKh/eU4TY+v\nH2APOq3nxJZZR7BqXL0c0zEG15bZNjYPmasbURYL+IZU4WcxeHWDGP4Hsr6f/v54\n7VUG/Myn6eSyjyUSw/BUXb4xALO7dCqVSqmjvPAYcL/2wHIMUDk6RSe9OI1sBPE9\nzy0O73GbXZqYLIckpwpxZIdYuh++cdFO9cR0RAhifAV9/Sr/yM+U3ubsnUwKLhqe\nxjSS0MHosKKBq0zdzNs5eAHRDQNrwN+M5tbzWxw4CsBwmuhWsI543JZmxv/WEin3\nTTozOIc26snciNKdYSd4IhkxDg7UfJqpUugXpa3rwFzb5TteX4jr43viUXrZFm7e\nrxgibK39Sc0vKeap49NdwB4nvB1twNtvwEuA6OlemYweCLJ9EW3j3p0dWzdel9wx\n4XeA803u3Ipt4MLUKbuN/Qiq+/4B+Ujsg2jGzS1L0z0i/tMDsPF5uHI7IiN9Jt/0\nSF47LSXn8ZFaONhFzmKaqfdqsLYuFChtCOnzICi+hNhYw9NzdVg=\n=9C/T\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIGYXhprDhOjH/EGc59axqUpTORcGPiWXundM5QKBQ5x4CP/wECY8O8J6QeBL\nwRQuMfMWTAUI8QRhjQkI8AivbY+RCo/RDQCD3+MNLvkMjiwraHR0cHM6Ly9ib2Iu\nYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9yZ//wEJNmt2FUpdlzGxeP6bSF\nyGII8SChVo1Amyp3Ouhb2V8I3KRnjPGI6IOF+C6mrY7TKXVtKgjxBGGNCQjwCJoF\ncrlIyXoHAIPf4w0u+QyOLi1odHRwczovL2FsaWNlLmJ0Yy5jYWxlbmRhci5vcGVu\ndGltZXN0YW1wcy5vcmf/8BC4IxarTMkwvK7YyeBYsvXMCPEgSRzEQ3x0Ut8DTGl7\n5S49UMl1jWQ92x4DMw2vSwX02RYI8QRhjQkI8Ah5fPRBgWpRiACD3+MNLvkMjiko\naHR0cHM6Ly9maW5uZXkuY2FsZW5kYXIuZXRlcm5pdHl3YWxsLmNvbfAQ797qFqec\nlQZDlDZapKv3AQjxBGGNCQjwCFSoVsUGo+JcAIPf4w0u+QyOIyJodHRwczovL2J0\nYy5jYWxlbmRhci5jYXRhbGxheHkuY29t\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree 16556c3ec5fdbd7616b29f70ec848d8aac560b24\nparent f63bf05e73ea96e5c2c72cc455d05ad382883c27\nauthor Jon Atack <jon@atack.com> 1633356785 +0200\ncommitter Jon Atack <jon@atack.com> 1636632839 +0100\n\ncli: add cjdns network to -addrinfo and -netinfo\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5bd40a3e84a35e0cdf802b132dac5725b9558f32",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5bd40a3e84a35e0cdf802b132dac5725b9558f32",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5bd40a3e84a35e0cdf802b132dac5725b9558f32/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f63bf05e73ea96e5c2c72cc455d05ad382883c27",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f63bf05e73ea96e5c2c72cc455d05ad382883c27",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f63bf05e73ea96e5c2c72cc455d05ad382883c27"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "9ebad0238909b53615fa992b64205c988510acb5",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5bd40a3e84a35e0cdf802b132dac5725b9558f32/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5bd40a3e84a35e0cdf802b132dac5725b9558f32/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=5bd40a3e84a35e0cdf802b132dac5725b9558f32",
        "patch": "@@ -242,7 +242,7 @@ class BaseRequestHandler\n class AddrinfoRequestHandler : public BaseRequestHandler\n {\n private:\n-    static constexpr std::array m_networks{\"ipv4\", \"ipv6\", \"onion\", \"i2p\"};\n+    static constexpr std::array m_networks{\"ipv4\", \"ipv6\", \"onion\", \"i2p\", \"cjdns\"};\n     int8_t NetworkStringToId(const std::string& str) const\n     {\n         for (size_t i = 0; i < m_networks.size(); ++i) {\n@@ -363,7 +363,7 @@ class NetinfoRequestHandler : public BaseRequestHandler\n {\n private:\n     static constexpr uint8_t MAX_DETAIL_LEVEL{4};\n-    static constexpr std::array m_networks{\"ipv4\", \"ipv6\", \"onion\", \"i2p\"};\n+    static constexpr std::array m_networks{\"ipv4\", \"ipv6\", \"onion\", \"i2p\", \"cjdns\"};\n     std::array<std::array<uint16_t, m_networks.size() + 1>, 3> m_counts{{{}}}; //!< Peer counts by (in/out/total, networks/total)\n     uint8_t m_block_relay_peers_count{0};\n     uint8_t m_manual_peers_count{0};"
      }
    ]
  },
  {
    "sha": "7b6528746acf9c915d7157bb860ec899b58dded7",
    "node_id": "C_kwDOABII59oAKDdiNjUyODc0NmFjZjljOTE1ZDcxNTdiYjg2MGVjODk5YjU4ZGRlZDc",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-10-04T14:17:01Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-11-11T12:14:01Z"
      },
      "message": "cli: hoist networks class data members to a constant",
      "tree": {
        "sha": "3f1f84b6fb2b33983660653bfefacf32d3105f69",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3f1f84b6fb2b33983660653bfefacf32d3105f69"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7b6528746acf9c915d7157bb860ec899b58dded7",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmGNCQkACgkQT1chs9Dj\nkh0ULBAAttF6eubLTg+CoFjL87fQEXaUqNwLBbCkR5GzFYG3HT5Xv+h4Tsk7Vcwq\nzRnbVZj8gs74tXo0V+7fmXaQwaoxK3/yVY9b2ICw/f9tLcLINAkHp+BM2bFRprR6\n1nmpV4uXG9Vwaxl6ZutZukXwYu1E3AwXUVtMP4axtTv/uQ0mPgHCBWiVOVpSCW/G\n++jS9c2596Gnb9uQBrrBbzIPWu9ZxrNXtUEHJmqncU2LNglFDwbu/0LfC0pttbeo\neq/5WdYCax2tk+T6hUg5SpASlK2mYQXXwvgYwlt4lQ7ZXY2P+tEHlPXjcJOhijsr\nf5yZE6UPKnmeDEPvcPp6a5zwBK2KExVvQIb9GDmOjfLeHYRD9dWECODzktN8mqlF\niS5hWACx8vUgryNGFdbU7GRmN/67wa7KjZXdr0cpXZl/CSS/A30EOQKC5hmNA+AY\nRDRmmQI4aiGRJs0gQVMHO7Znnf2wZz9IwU2H91bkLIj731yDVz9R99QCkyAaHI4Q\nN26V3OZKXyPH4o4Hk/l3Jvx1GTAZ7SjQ4301dRpWsmQSVt8DqqGM/d3/VBDgVYXe\n3wAbUb8HE91H5+ipneStuZMj4D+cK/pJj2bxBMPOTinMwsQuFVQTmXidaagR6hJ1\ncqKQ1RroawWsm9Kp1XnS557bP8ghJLqIWKjeZDSFgUakkJeEoyY=\n=eww+\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIKx4oh/wx8Y3ggsf69cB2WlJoo8eV8ZktPCdcaAv5pH1CP/wEIlXF7l5S06z\n87sQNnEBEOsI8QRhjQkK8Aji8Vef/y/C0gCD3+MNLvkMjikoaHR0cHM6Ly9maW5u\nZXkuY2FsZW5kYXIuZXRlcm5pdHl3YWxsLmNvbf/wEKOP/dlTgydyjOUY8V+23mwI\n8QRhjQkK8AiM3DkmO92JIACD3+MNLvkMji4taHR0cHM6Ly9hbGljZS5idGMuY2Fs\nZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn//AQ0whOlII32ZHpBUE/WhT+AgjxBGGN\nCQrwCLF4wSEsn3SfAIPf4w0u+QyOIyJodHRwczovL2J0Yy5jYWxlbmRhci5jYXRh\nbGxheHkuY29t8BDc8VdeXjxEEK+rIL52iYYmCPEEYY0JCvAIha5pkbVtmkwAg9/j\nDS75DI4sK2h0dHBzOi8vYm9iLmJ0Yy5jYWxlbmRhci5vcGVudGltZXN0YW1wcy5v\ncmc=\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree 3f1f84b6fb2b33983660653bfefacf32d3105f69\nparent 5bd40a3e84a35e0cdf802b132dac5725b9558f32\nauthor Jon Atack <jon@atack.com> 1633357021 +0200\ncommitter Jon Atack <jon@atack.com> 1636632841 +0100\n\ncli: hoist networks class data members to a constant\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7b6528746acf9c915d7157bb860ec899b58dded7",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7b6528746acf9c915d7157bb860ec899b58dded7",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7b6528746acf9c915d7157bb860ec899b58dded7/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "5bd40a3e84a35e0cdf802b132dac5725b9558f32",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5bd40a3e84a35e0cdf802b132dac5725b9558f32",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/5bd40a3e84a35e0cdf802b132dac5725b9558f32"
      }
    ],
    "stats": {
      "total": 29,
      "additions": 14,
      "deletions": 15
    },
    "files": [
      {
        "sha": "279521a7613116e2fc64b2515c8853bf010efe15",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 15,
        "changes": 29,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7b6528746acf9c915d7157bb860ec899b58dded7/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7b6528746acf9c915d7157bb860ec899b58dded7/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=7b6528746acf9c915d7157bb860ec899b58dded7",
        "patch": "@@ -49,6 +49,7 @@ static constexpr int DEFAULT_WAIT_CLIENT_TIMEOUT = 0;\n static const bool DEFAULT_NAMED=false;\n static const int CONTINUE_EXECUTION=-1;\n static constexpr int8_t UNKNOWN_NETWORK{-1};\n+static constexpr std::array NETWORKS{\"ipv4\", \"ipv6\", \"onion\", \"i2p\", \"cjdns\"};\n \n /** Default number of blocks to generate for RPC generatetoaddress. */\n static const std::string DEFAULT_NBLOCKS = \"1\";\n@@ -242,11 +243,10 @@ class BaseRequestHandler\n class AddrinfoRequestHandler : public BaseRequestHandler\n {\n private:\n-    static constexpr std::array m_networks{\"ipv4\", \"ipv6\", \"onion\", \"i2p\", \"cjdns\"};\n     int8_t NetworkStringToId(const std::string& str) const\n     {\n-        for (size_t i = 0; i < m_networks.size(); ++i) {\n-            if (str == m_networks.at(i)) return i;\n+        for (size_t i = 0; i < NETWORKS.size(); ++i) {\n+            if (str == NETWORKS[i]) return i;\n         }\n         return UNKNOWN_NETWORK;\n     }\n@@ -269,7 +269,7 @@ class AddrinfoRequestHandler : public BaseRequestHandler\n             throw std::runtime_error(\"-addrinfo requires bitcoind server to be running v22.0 and up\");\n         }\n         // Count the number of peers known to our node, by network.\n-        std::array<uint64_t, m_networks.size()> counts{{}};\n+        std::array<uint64_t, NETWORKS.size()> counts{{}};\n         for (const UniValue& node : nodes) {\n             std::string network_name{node[\"network\"].get_str()};\n             const int8_t network_id{NetworkStringToId(network_name)};\n@@ -279,8 +279,8 @@ class AddrinfoRequestHandler : public BaseRequestHandler\n         // Prepare result to return to user.\n         UniValue result{UniValue::VOBJ}, addresses{UniValue::VOBJ};\n         uint64_t total{0}; // Total address count\n-        for (size_t i = 0; i < m_networks.size(); ++i) {\n-            addresses.pushKV(m_networks.at(i), counts.at(i));\n+        for (size_t i = 0; i < NETWORKS.size(); ++i) {\n+            addresses.pushKV(NETWORKS[i], counts.at(i));\n             total += counts.at(i);\n         }\n         addresses.pushKV(\"total\", total);\n@@ -363,14 +363,13 @@ class NetinfoRequestHandler : public BaseRequestHandler\n {\n private:\n     static constexpr uint8_t MAX_DETAIL_LEVEL{4};\n-    static constexpr std::array m_networks{\"ipv4\", \"ipv6\", \"onion\", \"i2p\", \"cjdns\"};\n-    std::array<std::array<uint16_t, m_networks.size() + 1>, 3> m_counts{{{}}}; //!< Peer counts by (in/out/total, networks/total)\n+    std::array<std::array<uint16_t, NETWORKS.size() + 1>, 3> m_counts{{{}}}; //!< Peer counts by (in/out/total, networks/total)\n     uint8_t m_block_relay_peers_count{0};\n     uint8_t m_manual_peers_count{0};\n     int8_t NetworkStringToId(const std::string& str) const\n     {\n-        for (size_t i = 0; i < m_networks.size(); ++i) {\n-            if (str == m_networks.at(i)) return i;\n+        for (size_t i = 0; i < NETWORKS.size(); ++i) {\n+            if (str == NETWORKS[i]) return i;\n         }\n         return UNKNOWN_NETWORK;\n     }\n@@ -471,10 +470,10 @@ class NetinfoRequestHandler : public BaseRequestHandler\n             const bool is_outbound{!peer[\"inbound\"].get_bool()};\n             const bool is_block_relay{!peer[\"relaytxes\"].get_bool()};\n             const std::string conn_type{peer[\"connection_type\"].get_str()};\n-            ++m_counts.at(is_outbound).at(network_id);        // in/out by network\n-            ++m_counts.at(is_outbound).at(m_networks.size()); // in/out overall\n-            ++m_counts.at(2).at(network_id);                  // total by network\n-            ++m_counts.at(2).at(m_networks.size());           // total overall\n+            ++m_counts.at(is_outbound).at(network_id);      // in/out by network\n+            ++m_counts.at(is_outbound).at(NETWORKS.size()); // in/out overall\n+            ++m_counts.at(2).at(network_id);                // total by network\n+            ++m_counts.at(2).at(NETWORKS.size());           // total overall\n             if (conn_type == \"block-relay-only\") ++m_block_relay_peers_count;\n             if (conn_type == \"manual\") ++m_manual_peers_count;\n             if (DetailsRequested()) {\n@@ -571,7 +570,7 @@ class NetinfoRequestHandler : public BaseRequestHandler\n             for (int8_t n : reachable_networks) {\n                 result += strprintf(\"%8i\", m_counts.at(i).at(n)); // network peers count\n             }\n-            result += strprintf(\"   %5i\", m_counts.at(i).at(m_networks.size())); // total peers count\n+            result += strprintf(\"   %5i\", m_counts.at(i).at(NETWORKS.size())); // total peers count\n             if (i == 1) { // the outbound row has two extra columns for block relay and manual peer counts\n                 result += strprintf(\"   %5i\", m_block_relay_peers_count);\n                 if (m_manual_peers_count) result += strprintf(\"   %5i\", m_manual_peers_count);"
      }
    ]
  }
]