[
  {
    "sha": "5e1e458ecb0f5d8e42e1a7fc3b8f9e1d37f52e46",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ZTFlNDU4ZWNiMGY1ZDhlNDJlMWE3ZmMzYjhmOWUxZDM3ZjUyZTQ2",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2011-05-26T21:35:00Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2011-05-26T21:35:00Z"
      },
      "message": "loss of significance in difficulty (by lfm)\n\nFor instance any nBits compressed value from 0x1a44b800 thru\n0x1a44b9ff will show as difficulty 244139.4816. This patch will\nmore accurately convert the nBits compressed values to the double\ndifficulty.\n\nThis will display any of the recent difficulty levels slightly\ndifferently though. Early difficulties and testnet difficulties are\nnot large enough to trigger this bug.\n\nNone of the actual targets or compressed targets are changed, only\nthe conversion to the floating point difficulty is changed and afaik\nit is only ever displayed, never converted back so the patch does not\neffect the target calculations, binary files, databases nor the binary\nprotocol.",
      "tree": {
        "sha": "2347755d1781c9b11a4702a594dad8ace403f0c8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2347755d1781c9b11a4702a594dad8ace403f0c8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5e1e458ecb0f5d8e42e1a7fc3b8f9e1d37f52e46",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5e1e458ecb0f5d8e42e1a7fc3b8f9e1d37f52e46",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5e1e458ecb0f5d8e42e1a7fc3b8f9e1d37f52e46",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5e1e458ecb0f5d8e42e1a7fc3b8f9e1d37f52e46/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "db69432dcdc8bcf9fcc4b2554593d9e0fac4918a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/db69432dcdc8bcf9fcc4b2554593d9e0fac4918a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/db69432dcdc8bcf9fcc4b2554593d9e0fac4918a"
      }
    ],
    "stats": {
      "total": 22,
      "additions": 18,
      "deletions": 4
    },
    "files": [
      {
        "sha": "530bef4a43f41d9fde35f1061a0dab6dcbb8375b",
        "filename": "src/rpc.cpp",
        "status": "modified",
        "additions": 18,
        "deletions": 4,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5e1e458ecb0f5d8e42e1a7fc3b8f9e1d37f52e46/src/rpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5e1e458ecb0f5d8e42e1a7fc3b8f9e1d37f52e46/src/rpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc.cpp?ref=5e1e458ecb0f5d8e42e1a7fc3b8f9e1d37f52e46",
        "patch": "@@ -199,12 +199,26 @@ double GetDifficulty()\n {\n     // Floating point number that is a multiple of the minimum difficulty,\n     // minimum difficulty = 1.0.\n+\n     if (pindexBest == NULL)\n         return 1.0;\n-    int nShift = 256 - 32 - 31; // to fit in a uint\n-    double dMinimum = (CBigNum().SetCompact(bnProofOfWorkLimit.GetCompact()) >> nShift).getuint();\n-    double dCurrently = (CBigNum().SetCompact(pindexBest->nBits) >> nShift).getuint();\n-    return dMinimum / dCurrently;\n+    int nShift = (pindexBest->nBits >> 24) & 0xff;\n+\n+    double dDiff =\n+        (double)0x0000ffff / (double)(pindexBest->nBits & 0x00ffffff);\n+\n+    while (nShift < 29)\n+    {\n+        dDiff *= 256.0;\n+        nShift++;\n+    }\n+    while (nShift > 29)\n+    {\n+        dDiff /= 256.0;\n+        nShift--;\n+    }\n+\n+    return dDiff;\n }\n \n Value getdifficulty(const Array& params, bool fHelp)"
      }
    ]
  }
]