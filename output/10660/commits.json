[
  {
    "sha": "00cb69bc8655b1c17064a7e42453fd049e555076",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMGNiNjliYzg2NTViMWMxNzA2NGE3ZTQyNDUzZmQwNDllNTU1MDc2",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-06-23T07:32:38Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-06-29T15:48:08Z"
      },
      "message": "[Qt] allow to execute a callback during splashscreen progress",
      "tree": {
        "sha": "e6b4f5be586f06f073c5a35e30f18e4e845f066d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e6b4f5be586f06f073c5a35e30f18e4e845f066d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/00cb69bc8655b1c17064a7e42453fd049e555076",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAllVITkACgkQHrd2uwPH\nki1dOw/+JUg2JPmEH9nPOyzkL5W9kg3tc1g0XZirmzC8FJgZR5Hq+0Zfy5YDPtRH\ntYOzlxvqfp5TjvKNf5V10nLhyvLSosLvnp0iiep3LThlFHhpTbTySEJd938/BG67\nnnphVzYhZqbe57DDrXhNA5MUf56nUqUzKxM1+IweM9uZxxVBBHY6GMBHUtBxkUne\nOnt8Kzle1ffHKqg68BIeYUXHW0N7LbnR1AhuQrAtM9tQ73qEUjRq24okwr8qmTjo\ncKK9ImIoWtdlxkRAJwH0vFn/+gV1q+69xfLm4VofVTykVMEaXLP4JGgYjPNQ2RHB\ngbj5FBeoJFkEB/kKmUya8jCOwdjGtVGJYOzl7MGjNgCbICYWYkqY57e0ng92tWVz\nJ+5M/ACQJzoMLhtQga4It2ETpT+kbocDBU77rPf57BdYQbyp5F0AQXwxuuw17KfJ\nmBhbBj+1G+baVgirp9eGTMX921ddmp13R9d5JO5wJWg3yJYRRLUYjyQ8q8whrnRJ\n1aEntvpTgBlNwC7WDnLclLD9sfLZVHZDKaa/65JU7zMbXyCSpYUH/cMGRmafNpaL\nJKIGRV290J5/dYTBPo8Ufl3uBwLib01mke/z9AF7Dglz9upgaO2Py4Vd3LUNranQ\nBU2wOAcVaRTg61ZgFNAbHJSpTbpOEKKbVUUNgWTEVt4fQOMcAuw=\n=g4L1\n-----END PGP SIGNATURE-----",
        "payload": "tree e6b4f5be586f06f073c5a35e30f18e4e845f066d\nparent 90a002ea647dcea57a2ed4294eab77897168ba1d\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1498203158 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1498751288 +0200\n\n[Qt] allow to execute a callback during splashscreen progress\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/00cb69bc8655b1c17064a7e42453fd049e555076",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/00cb69bc8655b1c17064a7e42453fd049e555076",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/00cb69bc8655b1c17064a7e42453fd049e555076/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "90a002ea647dcea57a2ed4294eab77897168ba1d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/90a002ea647dcea57a2ed4294eab77897168ba1d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/90a002ea647dcea57a2ed4294eab77897168ba1d"
      }
    ],
    "stats": {
      "total": 36,
      "additions": 36,
      "deletions": 0
    },
    "files": [
      {
        "sha": "8a745cadce7d8aa7df069db5578002b5dcf7fb0a",
        "filename": "src/qt/bitcoin.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/00cb69bc8655b1c17064a7e42453fd049e555076/src/qt/bitcoin.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/00cb69bc8655b1c17064a7e42453fd049e555076/src/qt/bitcoin.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoin.cpp?ref=00cb69bc8655b1c17064a7e42453fd049e555076",
        "patch": "@@ -578,6 +578,7 @@ int main(int argc, char *argv[])\n     //   Need to pass name here as CAmount is a typedef (see http://qt-project.org/doc/qt-5/qmetatype.html#qRegisterMetaType)\n     //   IMPORTANT if it is no longer a typedef use the normal variant above\n     qRegisterMetaType< CAmount >(\"CAmount\");\n+    qRegisterMetaType< std::function<void(void)> >(\"std::function<void(void)>\");\n \n     /// 3. Application identification\n     // must be set before OptionsModel is initialized or translations are loaded,"
      },
      {
        "sha": "1b7cc69231c14a648ddb045b84208aa297e4a9af",
        "filename": "src/qt/splashscreen.cpp",
        "status": "modified",
        "additions": 24,
        "deletions": 0,
        "changes": 24,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/00cb69bc8655b1c17064a7e42453fd049e555076/src/qt/splashscreen.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/00cb69bc8655b1c17064a7e42453fd049e555076/src/qt/splashscreen.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/splashscreen.cpp?ref=00cb69bc8655b1c17064a7e42453fd049e555076",
        "patch": "@@ -131,13 +131,24 @@ SplashScreen::SplashScreen(Qt::WindowFlags f, const NetworkStyle *networkStyle)\n     move(QApplication::desktop()->screenGeometry().center() - r.center());\n \n     subscribeToCoreSignals();\n+    installEventFilter(this);\n }\n \n SplashScreen::~SplashScreen()\n {\n     unsubscribeFromCoreSignals();\n }\n \n+bool SplashScreen::eventFilter(QObject * obj, QEvent * ev) {\n+    if (ev->type() == QEvent::KeyPress) {\n+        QKeyEvent *keyEvent = static_cast<QKeyEvent *>(ev);\n+        if(keyEvent->text()[0] == 'q' && breakAction != nullptr) {\n+            breakAction();\n+        }\n+    }\n+    return QObject::eventFilter(obj, ev);\n+}\n+\n void SplashScreen::slotFinish(QWidget *mainWin)\n {\n     Q_UNUSED(mainWin);\n@@ -164,6 +175,18 @@ static void ShowProgress(SplashScreen *splash, const std::string &title, int nPr\n     InitMessage(splash, title + strprintf(\"%d\", nProgress) + \"%\");\n }\n \n+void SplashScreen::setBreakAction(const std::function<void(void)> &action)\n+{\n+    breakAction = action;\n+}\n+\n+static void SetProgressBreakAction(SplashScreen *splash, const std::function<void(void)> &action)\n+{\n+    QMetaObject::invokeMethod(splash, \"setBreakAction\",\n+        Qt::QueuedConnection,\n+        Q_ARG(std::function<void(void)>, action));\n+}\n+\n #ifdef ENABLE_WALLET\n void SplashScreen::ConnectWallet(CWallet* wallet)\n {\n@@ -177,6 +200,7 @@ void SplashScreen::subscribeToCoreSignals()\n     // Connect signals to client\n     uiInterface.InitMessage.connect(boost::bind(InitMessage, this, _1));\n     uiInterface.ShowProgress.connect(boost::bind(ShowProgress, this, _1, _2));\n+    uiInterface.SetProgressBreakAction.connect(boost::bind(SetProgressBreakAction, this, _1));\n #ifdef ENABLE_WALLET\n     uiInterface.LoadWallet.connect(boost::bind(&SplashScreen::ConnectWallet, this, _1));\n #endif"
      },
      {
        "sha": "a88ebb98a87400c8d3f06c74b169158564859e95",
        "filename": "src/qt/splashscreen.h",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/00cb69bc8655b1c17064a7e42453fd049e555076/src/qt/splashscreen.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/00cb69bc8655b1c17064a7e42453fd049e555076/src/qt/splashscreen.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/splashscreen.h?ref=00cb69bc8655b1c17064a7e42453fd049e555076",
        "patch": "@@ -5,6 +5,7 @@\n #ifndef BITCOIN_QT_SPLASHSCREEN_H\n #define BITCOIN_QT_SPLASHSCREEN_H\n \n+#include <functional>\n #include <QSplashScreen>\n \n class CWallet;\n@@ -35,6 +36,11 @@ public Q_SLOTS:\n     /** Show message and progress */\n     void showMessage(const QString &message, int alignment, const QColor &color);\n \n+    /** Sets the break action */\n+    void setBreakAction(const std::function<void(void)> &action);\n+protected:\n+    bool eventFilter(QObject * obj, QEvent * ev);\n+\n private:\n     /** Connect core signals to splash screen */\n     void subscribeToCoreSignals();\n@@ -49,6 +55,8 @@ public Q_SLOTS:\n     int curAlignment;\n \n     QList<CWallet*> connectedWallets;\n+\n+    std::function<void(void)> breakAction;\n };\n \n #endif // BITCOIN_QT_SPLASHSCREEN_H"
      },
      {
        "sha": "762dd19b1904184d471d861835614f37d1102bed",
        "filename": "src/ui_interface.h",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/00cb69bc8655b1c17064a7e42453fd049e555076/src/ui_interface.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/00cb69bc8655b1c17064a7e42453fd049e555076/src/ui_interface.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/ui_interface.h?ref=00cb69bc8655b1c17064a7e42453fd049e555076",
        "patch": "@@ -97,6 +97,9 @@ class CClientUIInterface\n     /** Show progress e.g. for verifychain */\n     boost::signals2::signal<void (const std::string &title, int nProgress)> ShowProgress;\n \n+    /** Set progress break action (possible \"cancel button\" triggers that action) */\n+    boost::signals2::signal<void (std::function<void(void)> action)> SetProgressBreakAction;\n+\n     /** New block has been accepted */\n     boost::signals2::signal<void (bool, const CBlockIndex *)> NotifyBlockTip;\n "
      }
    ]
  },
  {
    "sha": "ae09d4583b26251e67fa48216ebafb6bcdf2472b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphZTA5ZDQ1ODNiMjYyNTFlNjdmYTQ4MjE2ZWJhZmI2YmNkZjI0NzJi",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-06-23T07:33:31Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-06-29T15:48:11Z"
      },
      "message": "Allow to shut down during txdb upgrade",
      "tree": {
        "sha": "e21d6a89dee9ed86302240201eec4a1e41ffda8d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e21d6a89dee9ed86302240201eec4a1e41ffda8d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ae09d4583b26251e67fa48216ebafb6bcdf2472b",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAllVITsACgkQHrd2uwPH\nki3OuA/+PB3WQiPOnxGRFLVuT0qLsw5A5sergBBc1YWdq+tS/k0mPpMIf1IWJW89\n5Z8R/egSsJIPbYgknjr5X8qBbqPZ/2xNgsLAPFQyHQ/AzzUwGEaCA6cbO9BIly+X\n+Sa9F2IwxZ9kZuqEVGJhRdv8Fzn7rYRA5ciCYqSPdENbBMw0fImECdjJgJRvCxl5\nQKNfBeQKS6hvCrnBgxXfX5VyOiiy2DfAE6FGG1VUEAT4nJPeSC6HVDl14B1OT6GR\nJkKIlAWgHtyi4qj1mh1IFk0CtsfUefIHa8rNrYEHkmxPQeaWMyHhU/B6NK/TsVpT\na0KxzfmWjk1JfnvcdEtcLyQpBWPjo0jsm366iA/Xg+AGeLYoAYaL8X01HCNmrgKl\nvQ4dhVNnTc6b88qMxmAUCIWZ+U4ALb+RtqyLl6pVHLCzLpoCQoavgsUlI+m/zuhP\n11dpmdhf0UQ6Wp9nySxsbVhZCwp5HITpWs+CqQWVbh+VwTurMVSBgqIRsIo9VaXm\nVEMifGrPaB7Nb8sSLppqegjDfM6EY1PKSMLdZPG7R9fqJNeaHBNxNr9w8v8oBX9b\n8HNm5T59Fgp2svShcsEiTyNdq2U0G7L0l/+ryDFQpbybrrmjkSwZY/TCZbnr59ZA\nbV31cgLnealcssapgYAxnAgjeCIdb+AAxlm138Xm8WEwBwJeo4U=\n=b437\n-----END PGP SIGNATURE-----",
        "payload": "tree e21d6a89dee9ed86302240201eec4a1e41ffda8d\nparent 00cb69bc8655b1c17064a7e42453fd049e555076\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1498203211 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1498751291 +0200\n\nAllow to shut down during txdb upgrade\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ae09d4583b26251e67fa48216ebafb6bcdf2472b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ae09d4583b26251e67fa48216ebafb6bcdf2472b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ae09d4583b26251e67fa48216ebafb6bcdf2472b/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "00cb69bc8655b1c17064a7e42453fd049e555076",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/00cb69bc8655b1c17064a7e42453fd049e555076",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/00cb69bc8655b1c17064a7e42453fd049e555076"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 6,
      "deletions": 2
    },
    "files": [
      {
        "sha": "ec1f18faef88db48c5271672bb82a915072f2853",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ae09d4583b26251e67fa48216ebafb6bcdf2472b/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ae09d4583b26251e67fa48216ebafb6bcdf2472b/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=ae09d4583b26251e67fa48216ebafb6bcdf2472b",
        "patch": "@@ -1358,7 +1358,7 @@ bool AppInitMain(boost::thread_group& threadGroup, CScheduler& scheduler)\n     LogPrintf(\"* Using %.1fMiB for in-memory UTXO set (plus up to %.1fMiB of unused mempool space)\\n\", nCoinCacheUsage * (1.0 / 1024 / 1024), nMempoolSizeMax * (1.0 / 1024 / 1024));\n \n     bool fLoaded = false;\n-    while (!fLoaded) {\n+    while (!fLoaded && !fRequestShutdown) {\n         bool fReset = fReindex;\n         std::string strLoadError;\n \n@@ -1389,6 +1389,7 @@ bool AppInitMain(boost::thread_group& threadGroup, CScheduler& scheduler)\n                         break;\n                     }\n                 }\n+                if (fRequestShutdown) break;\n \n                 if (!LoadBlockIndex(chainparams)) {\n                     strLoadError = _(\"Error loading block database\");\n@@ -1466,7 +1467,7 @@ bool AppInitMain(boost::thread_group& threadGroup, CScheduler& scheduler)\n             fLoaded = true;\n         } while(false);\n \n-        if (!fLoaded) {\n+        if (!fLoaded && !fRequestShutdown) {\n             // first suggest a reindex\n             if (!fReset) {\n                 bool fRet = uiInterface.ThreadSafeQuestion("
      },
      {
        "sha": "3e05683d1e710c91552485937afeb1ff04854eac",
        "filename": "src/txdb.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ae09d4583b26251e67fa48216ebafb6bcdf2472b/src/txdb.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ae09d4583b26251e67fa48216ebafb6bcdf2472b/src/txdb.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txdb.cpp?ref=ae09d4583b26251e67fa48216ebafb6bcdf2472b",
        "patch": "@@ -371,6 +371,9 @@ bool CCoinsViewDB::Upgrade() {\n     CDBBatch batch(db);\n     while (pcursor->Valid()) {\n         boost::this_thread::interruption_point();\n+        if (ShutdownRequested()) {\n+            break;\n+        }\n         std::pair<unsigned char, uint256> key;\n         if (pcursor->GetKey(key) && key.first == DB_COINS) {\n             CCoins old_coins;"
      }
    ]
  },
  {
    "sha": "316fcb5106b90f3dd7a2dced2063e237539e75b4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozMTZmY2I1MTA2YjkwZjNkZDdhMmRjZWQyMDYzZTIzNzUzOWU3NWI0",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-06-23T07:35:24Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-06-29T15:48:12Z"
      },
      "message": "Allow to cancel the txdb upgrade via splashscreen callback",
      "tree": {
        "sha": "14ebde89fd3142ecb820a51857836839b3fe9ab6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/14ebde89fd3142ecb820a51857836839b3fe9ab6"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/316fcb5106b90f3dd7a2dced2063e237539e75b4",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAllVITwACgkQHrd2uwPH\nki3nhg//Re4x7oNDN+2vJ6JfdqvhCAsX+SxSJBz8UfI7r3oWq8r3huMYU2woUrLZ\n/gs+qHqUcyodgAPTk6meoM0LiM2b9B+wCq0u5rNx+M/fSW25GkneYkmXrVe6k5Xk\nI4vhe7aTjMGiH+iJC/J1y2+8nGvmETjaHw30GKQD/LNVofoTbCVw3g6MJbuLOBbT\n7NB0BMwoisi/UoSc5I7yzR+SK08AR435BEmvPlGDOpjdkZfuKYNT5iQLjN2EgS8J\n5EZtuWkvggU6m4JJ9Sk+likIoGeJbmPsvqU+2rLKkracd2JymqyC4d/Y1DCuCSnD\nT6gzMnyrZaz3j0La2wcGgM3iyZFYkyaQRt6wwrPkNdyaHwYVV20zirb3d1fISSvr\n3gkmvz7ME2LO8QfJ4uQP4GFGQ26lbfZcJLT972eE3u/5iARaWf2TGyx493Mw6P8j\nkIU6x1QgZ+86s/li+GJPaficpBnwadHtrN5XrjKSXEzC5c6yTUkZ1MqpTvuDsg8Z\nGyRM6QOOfAeKs7Bg+qjyp1QrPpN9jJwWo2F5ISOLbhLy67rMq9Nha15Buy46ZKyK\nQnogQeYJWYHbGQQQgHH2xBhu+/6L6yS7N5ktDMOQp0RNrk9U2Ij1bBi+dRGV5qGl\n3+CVV4B8UN/JZYJSYVoYVbcRYX+E4luMBMP9r7K4YqCv0qfJvck=\n=JaWj\n-----END PGP SIGNATURE-----",
        "payload": "tree 14ebde89fd3142ecb820a51857836839b3fe9ab6\nparent ae09d4583b26251e67fa48216ebafb6bcdf2472b\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1498203324 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1498751292 +0200\n\nAllow to cancel the txdb upgrade via splashscreen callback\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/316fcb5106b90f3dd7a2dced2063e237539e75b4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/316fcb5106b90f3dd7a2dced2063e237539e75b4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/316fcb5106b90f3dd7a2dced2063e237539e75b4/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ae09d4583b26251e67fa48216ebafb6bcdf2472b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ae09d4583b26251e67fa48216ebafb6bcdf2472b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ae09d4583b26251e67fa48216ebafb6bcdf2472b"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 9,
      "deletions": 0
    },
    "files": [
      {
        "sha": "6f1d4824781d273855dbc131fc0674558896ea69",
        "filename": "src/txdb.cpp",
        "status": "modified",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/316fcb5106b90f3dd7a2dced2063e237539e75b4/src/txdb.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/316fcb5106b90f3dd7a2dced2063e237539e75b4/src/txdb.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txdb.cpp?ref=316fcb5106b90f3dd7a2dced2063e237539e75b4",
        "patch": "@@ -11,6 +11,8 @@\n #include \"pow.h\"\n #include \"uint256.h\"\n #include \"util.h\"\n+#include \"ui_interface.h\"\n+#include \"init.h\"\n \n #include <stdint.h>\n \n@@ -366,16 +368,22 @@ bool CCoinsViewDB::Upgrade() {\n         return true;\n     }\n \n+    int64_t count = 0;\n     LogPrintf(\"Upgrading database...\\n\");\n     size_t batch_size = 1 << 24;\n     CDBBatch batch(db);\n+    uiInterface.SetProgressBreakAction(StartShutdown);\n     while (pcursor->Valid()) {\n         boost::this_thread::interruption_point();\n         if (ShutdownRequested()) {\n             break;\n         }\n         std::pair<unsigned char, uint256> key;\n         if (pcursor->GetKey(key) && key.first == DB_COINS) {\n+            if (count++ % 256 == 0) {\n+                uint32_t high = 0x100 * *key.second.begin() + *(key.second.begin() + 1);\n+                uiInterface.ShowProgress(_(\"Upgrading UTXO database\") + \"\\n\"+ _(\"(press q to shutdown and continue later)\") + \"\\n\", (int)(high * 100.0 / 65536.0 + 0.5));\n+            }\n             CCoins old_coins;\n             if (!pcursor->GetValue(old_coins)) {\n                 return error(\"%s: cannot parse CCoins record\", __func__);\n@@ -400,5 +408,6 @@ bool CCoinsViewDB::Upgrade() {\n         }\n     }\n     db.WriteBatch(batch);\n+    uiInterface.SetProgressBreakAction(std::function<void(void)>());\n     return true;\n }"
      }
    ]
  },
  {
    "sha": "06c5b6edd33213a410d9f128524e74ba076f7ba0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowNmM1YjZlZGQzMzIxM2E0MTBkOWYxMjg1MjRlNzRiYTA3NmY3YmEw",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-06-23T07:51:59Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-06-29T15:48:12Z"
      },
      "message": "Show txdb upgrade progress in debug log",
      "tree": {
        "sha": "33dd299eaaa179d6745725d46e4c4bbcd20dc7b8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/33dd299eaaa179d6745725d46e4c4bbcd20dc7b8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/06c5b6edd33213a410d9f128524e74ba076f7ba0",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAllVITwACgkQHrd2uwPH\nki1thhAAycMChFisVlTKLj91bi3Bk9CmG6cJEgjE6qMERjKS0/zwXNy11gdlTX2d\nmuF6fgk7PN5fNL7YPBqWcnVvQWytuK8G72HIrEdh5EKbNzVCesm7dltmvIFusSGA\nJ37DEaNrgYEuv43w3b+VCUeWTmQ7lI5J9UZQH+3kr/NpwlvQZKtvcE2jczIGEhUL\nvtj8uzYG8iM94Ej6GyerQEl5/d2eT/i+pU+Cv/BGhrdOqtJrN6vwc+kvBH19a8s7\nLw477dfb572ieQcyg0f5RWDcbvJODxnaxjjX1RNJ8H8MGR2INjg1GRCGIAQEsTKg\nrrU3sxdo8uR5+YdIU+I/mknTmoAkNFLjRXTxZUivCl3/aqP+85hbedsRJTM6jsJv\nwsuNf9C2XpNm6VJLAiKpSotXNothQd9tGgE/+dGWc9CZHwk7Yfr9OtMCFWv9EY0C\nU4dUZY5WUIrJs09oFpvzJQmxaqG4AJSm9urPV9eDtiuM9vCoM0TcvD+T042rI+uo\noa0XokCskpW7EzPdLDhhDw9Wq/mCgfUpFk8SwfoBvy1/3TgFousY6IScLgH9uCxj\nACYbfHC2Z7ErL0McCMhKONNC071Yhf++WymykrOLiR1yyHE56QPvO/QVanfbCuos\nxxMDpN/yV5WusqRyktz/F2yINqM4j8AvFVs6lHaeQ1cyzqW3Ago=\n=3K2q\n-----END PGP SIGNATURE-----",
        "payload": "tree 33dd299eaaa179d6745725d46e4c4bbcd20dc7b8\nparent 316fcb5106b90f3dd7a2dced2063e237539e75b4\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1498204319 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1498751292 +0200\n\nShow txdb upgrade progress in debug log\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/06c5b6edd33213a410d9f128524e74ba076f7ba0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/06c5b6edd33213a410d9f128524e74ba076f7ba0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/06c5b6edd33213a410d9f128524e74ba076f7ba0/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "316fcb5106b90f3dd7a2dced2063e237539e75b4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/316fcb5106b90f3dd7a2dced2063e237539e75b4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/316fcb5106b90f3dd7a2dced2063e237539e75b4"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 4,
      "deletions": 1
    },
    "files": [
      {
        "sha": "6eff52f0509e8a68841b7dc37ad26279e1a52a01",
        "filename": "src/txdb.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/06c5b6edd33213a410d9f128524e74ba076f7ba0/src/txdb.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/06c5b6edd33213a410d9f128524e74ba076f7ba0/src/txdb.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txdb.cpp?ref=06c5b6edd33213a410d9f128524e74ba076f7ba0",
        "patch": "@@ -369,7 +369,8 @@ bool CCoinsViewDB::Upgrade() {\n     }\n \n     int64_t count = 0;\n-    LogPrintf(\"Upgrading database...\\n\");\n+    LogPrintf(\"Upgrading utxo-set database...\\n\");\n+    LogPrintf(\"[0%%]...\");\n     size_t batch_size = 1 << 24;\n     CDBBatch batch(db);\n     uiInterface.SetProgressBreakAction(StartShutdown);\n@@ -383,6 +384,7 @@ bool CCoinsViewDB::Upgrade() {\n             if (count++ % 256 == 0) {\n                 uint32_t high = 0x100 * *key.second.begin() + *(key.second.begin() + 1);\n                 uiInterface.ShowProgress(_(\"Upgrading UTXO database\") + \"\\n\"+ _(\"(press q to shutdown and continue later)\") + \"\\n\", (int)(high * 100.0 / 65536.0 + 0.5));\n+                LogPrintf(\"[%d%%]...\", (int)(high * 100.0 / 65536.0 + 0.5));\n             }\n             CCoins old_coins;\n             if (!pcursor->GetValue(old_coins)) {\n@@ -409,5 +411,6 @@ bool CCoinsViewDB::Upgrade() {\n     }\n     db.WriteBatch(batch);\n     uiInterface.SetProgressBreakAction(std::function<void(void)>());\n+    LogPrintf(\"[DONE].\\n\");\n     return true;\n }"
      }
    ]
  },
  {
    "sha": "83fbea3f25558fa6c72f2100d203b95b4030573e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4M2ZiZWEzZjI1NTU4ZmE2YzcyZjIxMDBkMjAzYjk1YjQwMzA1NzNl",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-06-28T19:05:39Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-06-29T15:48:13Z"
      },
      "message": "Report txdb upgrade not more often then every 10%",
      "tree": {
        "sha": "19faef41db85a213ae05b06b4e0042934a5e093f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/19faef41db85a213ae05b06b4e0042934a5e093f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/83fbea3f25558fa6c72f2100d203b95b4030573e",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAllVIT0ACgkQHrd2uwPH\nki1bVA/+NAeZa124sZd45HzRei6kfM/NgR+SuXwNz5JeMEAXs5USvssIyUVPu5RP\na34+2aQp62hM5WwalUMMZW8SfcjlURXf+LnxrBc8xpOdkOVYRR0LzvsmalSaSBAA\nGewTq95GXgU70Dj8vH1TQ05UjuxlDt8AmN/0q5rXf6IhgmXiOmAIIiAJInFr0X4n\nAFvzlX+zEr9kwpl3oaOsSlGUvkmoobnXoolkOtaFhhjxe6KlsVaPjTTwuv+OcIwG\nZE69084QtxY5Ed84o8sbTuxUkSMGU7fojV4GLT/xxqi7LjzikoBOQ+6kL762lBR4\nVVzhbWtG0lsV0cQcoXGrCD2f8/cqh0wR+2lP21ebV947/bmtVsA7zNZYKLQPc0S/\nqYe/L8B7rP3zHJPb5iY5j85LG37k4LEgDciFDQqWd9JB9biX0bZyRF727pqCpNTt\novEC1TBogDLAUT2TTVCLmEjv6lxV/sS+OPq/SJFYhBMzU3VNKWaoveWKv66YxGhy\ni3lp0ztdwJn57lt6lRVoMQR9+sb+F+VGik0f2JTBXnLtLOjCl+nInUu1g8tlHHRq\nkHT0k0BljYfvRLcBNnA0+p3KuBC/xl7IAh6zRYQTRwI3VcjQxu9tjLoqeFtx6oZT\nInuxUMo30mVRPXaCEwt84vDLddXAipkyAqH/+LZD0nWomi7dRB0=\n=a/bI\n-----END PGP SIGNATURE-----",
        "payload": "tree 19faef41db85a213ae05b06b4e0042934a5e093f\nparent 06c5b6edd33213a410d9f128524e74ba076f7ba0\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1498676739 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1498751293 +0200\n\nReport txdb upgrade not more often then every 10%\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/83fbea3f25558fa6c72f2100d203b95b4030573e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/83fbea3f25558fa6c72f2100d203b95b4030573e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/83fbea3f25558fa6c72f2100d203b95b4030573e/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "06c5b6edd33213a410d9f128524e74ba076f7ba0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/06c5b6edd33213a410d9f128524e74ba076f7ba0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/06c5b6edd33213a410d9f128524e74ba076f7ba0"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 8,
      "deletions": 2
    },
    "files": [
      {
        "sha": "c62f51cfcee9743696fef2c353f77599c5da849b",
        "filename": "src/txdb.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 2,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/83fbea3f25558fa6c72f2100d203b95b4030573e/src/txdb.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/83fbea3f25558fa6c72f2100d203b95b4030573e/src/txdb.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txdb.cpp?ref=83fbea3f25558fa6c72f2100d203b95b4030573e",
        "patch": "@@ -374,6 +374,7 @@ bool CCoinsViewDB::Upgrade() {\n     size_t batch_size = 1 << 24;\n     CDBBatch batch(db);\n     uiInterface.SetProgressBreakAction(StartShutdown);\n+    int reportDone = 0;\n     while (pcursor->Valid()) {\n         boost::this_thread::interruption_point();\n         if (ShutdownRequested()) {\n@@ -383,8 +384,13 @@ bool CCoinsViewDB::Upgrade() {\n         if (pcursor->GetKey(key) && key.first == DB_COINS) {\n             if (count++ % 256 == 0) {\n                 uint32_t high = 0x100 * *key.second.begin() + *(key.second.begin() + 1);\n-                uiInterface.ShowProgress(_(\"Upgrading UTXO database\") + \"\\n\"+ _(\"(press q to shutdown and continue later)\") + \"\\n\", (int)(high * 100.0 / 65536.0 + 0.5));\n-                LogPrintf(\"[%d%%]...\", (int)(high * 100.0 / 65536.0 + 0.5));\n+                int percentageDone = (int)(high * 100.0 / 65536.0 + 0.5);\n+                uiInterface.ShowProgress(_(\"Upgrading UTXO database\") + \"\\n\"+ _(\"(press q to shutdown and continue later)\") + \"\\n\", percentageDone);\n+                if (reportDone < percentageDone/10) {\n+                    // report max. every 10% step\n+                    LogPrintf(\"[%d%%]...\", percentageDone);\n+                    reportDone = percentageDone/10;\n+                }\n             }\n             CCoins old_coins;\n             if (!pcursor->GetValue(old_coins)) {"
      }
    ]
  },
  {
    "sha": "542ce6e24631a22451fabdb85d545add4024f553",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1NDJjZTZlMjQ2MzFhMjI0NTFmYWJkYjg1ZDU0NWFkZDQwMjRmNTUz",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-06-28T19:28:11Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-06-29T15:48:13Z"
      },
      "message": "Report [CANCELLED] instead of [DONE] when shut down during txdb upgrade",
      "tree": {
        "sha": "6e934feba4033c4dc4e5c5a80b065373f5f42abf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6e934feba4033c4dc4e5c5a80b065373f5f42abf"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/542ce6e24631a22451fabdb85d545add4024f553",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAllVIT0ACgkQHrd2uwPH\nki3PbRAAjk9h6kmnaiqV8K9HeIntBTg9oFKZ+H08lztytggMqGLDBsO0LHWE+xkj\n15sT+V5z2VXelpFvCdO2tYEUMb/S9X2MXXXUmUENT9vMX9ShxeAwSFKs0OiS2Olb\nBSzfVY1vCtnAYvn91QUOZY8e8yp8op7/qcdtpVsCKmiQH1pdddfNdMB1Zk1f9g2i\nPRRe8Xj+BCeG2Vzug2yIm4tGhDbsKem04rKPrukP+ylm1X/wgJRYxEs3XeD0girY\nK9c2PblY6JOgcIQiMphKAMte+BWQ0z7VNe0xY1epXf/rIZJJx35Ik8BTIh6UG7VP\nca4UOhNL6S/HawJplzt6xUx3AbmQtvZcu73n42TY36TiXp2BV6QGLNn4WTv6iHci\nPu8S10yukWrVmyHE6KCb+S031cxhl+IX9P9gnxsPqJBhlKZ+E2sbPs16BT3U4rtL\nG88O8bBKiqDZBXTsW7L4WKi6ICtuNbbM/EGo9pqKTQTU9E6vZomR1xrGMPw/2yFp\nDk0Xx/TQ30UyiZl6NtZJcHFhticsGr63Z5UJ7lnLdTcmHX76X5jCO6VUpX9DP1+X\neIQf/N5ejZN/3uZ8syoIKc1eKqJ6deF+Y1hJHF73ngAGMYS7/imw93yaUii5TA/2\nU/WOFuNAbEIQLfr93sjRokuMoC9NFlY9lHw6h6OUfO586z9SU0E=\n=LfX8\n-----END PGP SIGNATURE-----",
        "payload": "tree 6e934feba4033c4dc4e5c5a80b065373f5f42abf\nparent 83fbea3f25558fa6c72f2100d203b95b4030573e\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1498678091 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1498751293 +0200\n\nReport [CANCELLED] instead of [DONE] when shut down during txdb upgrade\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/542ce6e24631a22451fabdb85d545add4024f553",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/542ce6e24631a22451fabdb85d545add4024f553",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/542ce6e24631a22451fabdb85d545add4024f553/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "83fbea3f25558fa6c72f2100d203b95b4030573e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/83fbea3f25558fa6c72f2100d203b95b4030573e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/83fbea3f25558fa6c72f2100d203b95b4030573e"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "002f6550bcac7deaeecbdf6e14059353841be0ee",
        "filename": "src/txdb.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/542ce6e24631a22451fabdb85d545add4024f553/src/txdb.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/542ce6e24631a22451fabdb85d545add4024f553/src/txdb.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txdb.cpp?ref=542ce6e24631a22451fabdb85d545add4024f553",
        "patch": "@@ -417,6 +417,6 @@ bool CCoinsViewDB::Upgrade() {\n     }\n     db.WriteBatch(batch);\n     uiInterface.SetProgressBreakAction(std::function<void(void)>());\n-    LogPrintf(\"[DONE].\\n\");\n+    LogPrintf(\"[%s].\\n\", ShutdownRequested() ? \"CANCELLED\" : \"DONE\");\n     return true;\n }"
      }
    ]
  }
]