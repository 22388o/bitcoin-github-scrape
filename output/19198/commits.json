[
  {
    "sha": "fab83b934abcd1228ff21afdc9f8b30ad09745fa",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWI4M2I5MzRhYmNkMTIyOGZmMjFhZmRjOWY4YjMwYWQwOTc0NWZh",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-07T13:03:42Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-21T15:35:25Z"
      },
      "message": "test: pep-8 p2p_feefilter.py",
      "tree": {
        "sha": "e6c9f208c6363c30aec383e8b81006831aee79e0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e6c9f208c6363c30aec383e8b81006831aee79e0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fab83b934abcd1228ff21afdc9f8b30ad09745fa",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgCVgv/ZC2B8VVvgoFuufEIVoYh7VmPMXdC/cvER0/pxYHH+Xp/7RM/n432OSbK\noZ2OzgipBdsCudbL1KJ9ss5KDEfJ1zeDm9eC2/ZpxRE3qRzc2mF0EC988F3bpzB0\n2YSSMpxy5jKLOUhkK/1DU0/36NL62JkOvuTWuGXACuThZ5Tr3IsIYPUK6c2Brx60\nx0jmMIasAQ3ZjQ30V3PTYhAsFoqcwZTdVKoP211KSagKVoPgPVfIl4jeejsnvz5H\naIVjzWppuc7pM0DQKBsmKTz/NRZpPBnvhH7lUD1JIyGXSeW//wXPXlkx67AOQBUu\nEYbJ6C3uQWXLqpo4TWv0uXKj3mHmCgbEpSD0zcJ745RrfhzyVuhy+JAb1lVzTZDc\nsZTllWvfGoy/ez1GhiHTltJJpq6RV+NL0+4PpZ6fiED6IVmFxXN7fMGko76dxb23\nP0wFRPEjQN379cqSZuTmzCixRuBdQp0WIc8i9qg5DwOrRNXAelDKd3i/RLfrVsD+\nF2Uh9BeY\n=a9cC\n-----END PGP SIGNATURE-----",
        "payload": "tree e6c9f208c6363c30aec383e8b81006831aee79e0\nparent 4b5c9191e3edf6d3c2ac52f95c91e30e357906c6\nauthor MarcoFalke <falke.marco@gmail.com> 1591535022 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1592753725 -0400\n\ntest: pep-8 p2p_feefilter.py\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fab83b934abcd1228ff21afdc9f8b30ad09745fa",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fab83b934abcd1228ff21afdc9f8b30ad09745fa",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fab83b934abcd1228ff21afdc9f8b30ad09745fa/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4b5c9191e3edf6d3c2ac52f95c91e30e357906c6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4b5c9191e3edf6d3c2ac52f95c91e30e357906c6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4b5c9191e3edf6d3c2ac52f95c91e30e357906c6"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 6,
      "deletions": 2
    },
    "files": [
      {
        "sha": "ed4fcbd6ef3a554d6c1152c34531c660f68af594",
        "filename": "test/functional/p2p_feefilter.py",
        "status": "modified",
        "additions": 6,
        "deletions": 2,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fab83b934abcd1228ff21afdc9f8b30ad09745fa/test/functional/p2p_feefilter.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fab83b934abcd1228ff21afdc9f8b30ad09745fa/test/functional/p2p_feefilter.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/p2p_feefilter.py?ref=fab83b934abcd1228ff21afdc9f8b30ad09745fa",
        "patch": "@@ -15,6 +15,7 @@\n def hashToHex(hash):\n     return format(hash, '064x')\n \n+\n # Wait up to 60 secs to see if the testnode has received all the expected invs\n def allInvsMatch(invsExpected, testnode):\n     for x in range(60):\n@@ -24,6 +25,7 @@ def allInvsMatch(invsExpected, testnode):\n         time.sleep(1)\n     return False\n \n+\n class TestP2PConn(P2PInterface):\n     def __init__(self):\n         super().__init__()\n@@ -38,6 +40,7 @@ def clear_invs(self):\n         with mininode_lock:\n             self.txinvs = []\n \n+\n class FeeFilterTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 2\n@@ -46,7 +49,7 @@ def set_test_params(self):\n         # mempool and wallet feerate calculation based on GetFee\n         # rounding down 3 places, leading to stranded transactions.\n         # See issue #16499\n-        self.extra_args = [[\"-minrelaytxfee=0.00000100\", \"-mintxfee=0.00000100\"]]*self.num_nodes\n+        self.extra_args = [[\"-minrelaytxfee=0.00000100\", \"-mintxfee=0.00000100\"]] * self.num_nodes\n \n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n@@ -80,7 +83,7 @@ def run_test(self):\n         # by the test connection\n         node1.settxfee(Decimal(\"0.00000100\"))\n         [node1.sendtoaddress(node1.getnewaddress(), 1) for x in range(3)]\n-        self.sync_mempools() # must be sure node 0 has received all txs\n+        self.sync_mempools()  # must be sure node 0 has received all txs\n \n         # Send one transaction from node0 that should be received, so that we\n         # we can sync the test on receipt (if node1's txs were relayed, they'd\n@@ -100,5 +103,6 @@ def run_test(self):\n         assert allInvsMatch(txids, self.nodes[0].p2p)\n         self.nodes[0].p2p.clear_invs()\n \n+\n if __name__ == '__main__':\n     FeeFilterTest().main()"
      }
    ]
  },
  {
    "sha": "faccdc8a3143c9849e61312a7f438bc6e8232496",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWNjZGM4YTMxNDNjOTg0OWU2MTMxMmE3ZjQzOGJjNmU4MjMyNDk2",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-07T13:07:59Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-21T15:35:35Z"
      },
      "message": "test: remove redundant generate\n\nsetup_nodes takes care of getting out of ibd",
      "tree": {
        "sha": "547d4ecb75ef738dd824ed9acb62d19e8599dfca",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/547d4ecb75ef738dd824ed9acb62d19e8599dfca"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faccdc8a3143c9849e61312a7f438bc6e8232496",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUhBIAv/RrYPuqYIAxN9DhVFBeTBTPmisWscakG5/VP4Wu+ykNRjPhXUtCS2b6Ud\nxzS2rPV0qAfyUuroJyM4OpC3OnA/myTv1xa05dCeTw06XsTt/FXrJirV7F4MQdGH\nefjY/8jRapBoC1eiVv5HpoQEHT4eYiWWYDisl+DPpzs5yQswrvYJ1wRcFarHT0/v\nYMc0B/jbKMx/AYytuaDK/lnfWgxLjV3kKHMtVFh2ZfmqWomQXlBxn+Z2TDsy0ab9\nRR6AYw5pQo4Ke6cQWZJglDNluELAacH72OVahuA7Dn8BsDr3x8wT7yS2xkTMjohn\naP/1rUO0k5qkDTY0MV2MlTodF0rpbzs3uPwnFLp+ZEt6t7ag0+U2QKtCjET6Ao95\nAAZXGP1PYkzM0mqkL6UC31ViHRVhT9eqjDeNZuJFgdXgb3euuuUDcEpscrzG4jgg\nEGFlqrrWhpQf9UpBNtxmqZVg9UeeCzl05In1rdD3MXB84BUTE0wkewjOXOHw61KR\nx/LtS6d2\n=mp03\n-----END PGP SIGNATURE-----",
        "payload": "tree 547d4ecb75ef738dd824ed9acb62d19e8599dfca\nparent fab83b934abcd1228ff21afdc9f8b30ad09745fa\nauthor MarcoFalke <falke.marco@gmail.com> 1591535279 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1592753735 -0400\n\ntest: remove redundant generate\n\nsetup_nodes takes care of getting out of ibd\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faccdc8a3143c9849e61312a7f438bc6e8232496",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/faccdc8a3143c9849e61312a7f438bc6e8232496",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faccdc8a3143c9849e61312a7f438bc6e8232496/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fab83b934abcd1228ff21afdc9f8b30ad09745fa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fab83b934abcd1228ff21afdc9f8b30ad09745fa",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fab83b934abcd1228ff21afdc9f8b30ad09745fa"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 0,
      "deletions": 3
    },
    "files": [
      {
        "sha": "8cc62fbe12885e1148c25ec762f1fc12395d822d",
        "filename": "test/functional/p2p_feefilter.py",
        "status": "modified",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/faccdc8a3143c9849e61312a7f438bc6e8232496/test/functional/p2p_feefilter.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/faccdc8a3143c9849e61312a7f438bc6e8232496/test/functional/p2p_feefilter.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/p2p_feefilter.py?ref=faccdc8a3143c9849e61312a7f438bc6e8232496",
        "patch": "@@ -57,9 +57,6 @@ def skip_test_if_missing_module(self):\n     def run_test(self):\n         node1 = self.nodes[1]\n         node0 = self.nodes[0]\n-        # Get out of IBD\n-        node1.generate(1)\n-        self.sync_blocks()\n \n         self.nodes[0].add_p2p_connection(TestP2PConn())\n "
      }
    ]
  },
  {
    "sha": "ffff3fe50a16bd7dde3d2d206bbe7bc41c483bb8",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmZmZmM2ZlNTBhMTZiZDdkZGUzZDJkMjA2YmJlN2JjNDFjNDgzYmI4",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-07T13:14:33Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-21T15:35:44Z"
      },
      "message": "test: Replace self.nodes[0].p2p with conn",
      "tree": {
        "sha": "147d329767ad87aa9a7132432b96c63b13c5eadb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/147d329767ad87aa9a7132432b96c63b13c5eadb"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ffff3fe50a16bd7dde3d2d206bbe7bc41c483bb8",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUhvhAv/d6PQhh9aZBoHPX14MxkMi8JNm1YZ6yIbMZYZEIjRrWaIRRgHqVcOZTbV\na4rbGvcuY7El9Acex1opcseah+yrR1n9OV0Cv6i7cLwMnGlz5MtdhADj9SYavBJy\nwqEo8UiWgab5jyD6w7BHceb//G9gD6GfLKQMxpodFQaq6edS8zc6DMd06iwCfxIV\npReRiJEPQW17mY57BgG/XJzx6NGdem2e3PGsmZ68qpXim5kS2EG42tzMOFi323YG\nHPnHCj3FhrzmjHPY5+wW+CUCFIaLdPdK0AtgcelJ5E1SC5dRpHJmxLAd4XwEIzNA\ngH1RwseXeFhNKnIRb9mVFJ2VW7ASbAg5xl1NKU8Kcj/69+XkG2iVZZTkcywQa6qT\n8hFwz8ZVsqzemLWZcrLSYbHkNlK0y3T/Xey+b2qOwabktpggLyXwBN/PNlpciO+J\nfAJ2jZb+lKXUynK1O/TKJvamqDilyRmY0jyGcqKWtEodbCJkf09QnTDItk7vKrq0\naAjdmew3\n=+CDj\n-----END PGP SIGNATURE-----",
        "payload": "tree 147d329767ad87aa9a7132432b96c63b13c5eadb\nparent faccdc8a3143c9849e61312a7f438bc6e8232496\nauthor MarcoFalke <falke.marco@gmail.com> 1591535673 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1592753744 -0400\n\ntest: Replace self.nodes[0].p2p with conn\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ffff3fe50a16bd7dde3d2d206bbe7bc41c483bb8",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ffff3fe50a16bd7dde3d2d206bbe7bc41c483bb8",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ffff3fe50a16bd7dde3d2d206bbe7bc41c483bb8/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "faccdc8a3143c9849e61312a7f438bc6e8232496",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faccdc8a3143c9849e61312a7f438bc6e8232496",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/faccdc8a3143c9849e61312a7f438bc6e8232496"
      }
    ],
    "stats": {
      "total": 22,
      "additions": 11,
      "deletions": 11
    },
    "files": [
      {
        "sha": "0dfbb694688e46e08fc3891c6e987a2cadaabbf4",
        "filename": "test/functional/p2p_feefilter.py",
        "status": "modified",
        "additions": 11,
        "deletions": 11,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ffff3fe50a16bd7dde3d2d206bbe7bc41c483bb8/test/functional/p2p_feefilter.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ffff3fe50a16bd7dde3d2d206bbe7bc41c483bb8/test/functional/p2p_feefilter.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/p2p_feefilter.py?ref=ffff3fe50a16bd7dde3d2d206bbe7bc41c483bb8",
        "patch": "@@ -58,23 +58,23 @@ def run_test(self):\n         node1 = self.nodes[1]\n         node0 = self.nodes[0]\n \n-        self.nodes[0].add_p2p_connection(TestP2PConn())\n+        conn = self.nodes[0].add_p2p_connection(TestP2PConn())\n \n         # Test that invs are received by test connection for all txs at\n         # feerate of .2 sat/byte\n         node1.settxfee(Decimal(\"0.00000200\"))\n         txids = [node1.sendtoaddress(node1.getnewaddress(), 1) for x in range(3)]\n-        assert allInvsMatch(txids, self.nodes[0].p2p)\n-        self.nodes[0].p2p.clear_invs()\n+        assert allInvsMatch(txids, conn)\n+        conn.clear_invs()\n \n         # Set a filter of .15 sat/byte on test connection\n-        self.nodes[0].p2p.send_and_ping(msg_feefilter(150))\n+        conn.send_and_ping(msg_feefilter(150))\n \n         # Test that txs are still being received by test connection (paying .15 sat/byte)\n         node1.settxfee(Decimal(\"0.00000150\"))\n         txids = [node1.sendtoaddress(node1.getnewaddress(), 1) for x in range(3)]\n-        assert allInvsMatch(txids, self.nodes[0].p2p)\n-        self.nodes[0].p2p.clear_invs()\n+        assert allInvsMatch(txids, conn)\n+        conn.clear_invs()\n \n         # Change tx fee rate to .1 sat/byte and test they are no longer received\n         # by the test connection\n@@ -91,14 +91,14 @@ def run_test(self):\n         # as well.\n         node0.settxfee(Decimal(\"0.00020000\"))\n         txids = [node0.sendtoaddress(node0.getnewaddress(), 1)]\n-        assert allInvsMatch(txids, self.nodes[0].p2p)\n-        self.nodes[0].p2p.clear_invs()\n+        assert allInvsMatch(txids, conn)\n+        conn.clear_invs()\n \n         # Remove fee filter and check that txs are received again\n-        self.nodes[0].p2p.send_and_ping(msg_feefilter(0))\n+        conn.send_and_ping(msg_feefilter(0))\n         txids = [node1.sendtoaddress(node1.getnewaddress(), 1) for x in range(3)]\n-        assert allInvsMatch(txids, self.nodes[0].p2p)\n-        self.nodes[0].p2p.clear_invs()\n+        assert allInvsMatch(txids, conn)\n+        conn.clear_invs()\n \n \n if __name__ == '__main__':"
      }
    ]
  },
  {
    "sha": "fac6ef4fb2bbe6187a52d716eab734d0b1e9a221",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWM2ZWY0ZmIyYmJlNjE4N2E1MmQ3MTZlYWI3MzRkMGIxZTlhMjIx",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-07T13:24:18Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-21T15:35:46Z"
      },
      "message": "test: Add test for no net permission",
      "tree": {
        "sha": "d2c7a972879148907af7806996ba85c3560652d2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d2c7a972879148907af7806996ba85c3560652d2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fac6ef4fb2bbe6187a52d716eab734d0b1e9a221",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUikJQv+K+IugL/AqHRti+GuD21b331fAbjvINm3UxYfxGTgHp0Cid1C6+sbyP/r\nZC2nsdVWNosTl87vH3GVO7lljXwIM43PHNYmKHhB5+NnZuPv29gknyZ+3c537VCI\nkHZFqEdkJfHIoy4lvcYDlVaMH2RZI+ai3D5EaJPHeWWNVlng5w8sbSkXQ6Bz3gFI\n7iIsjTXp5ahHGe+lQjynYba/QKVioL3852wDanC2l8q5XhZxRo4Bxi1KHIwWjeyE\ngIbo3C+D/SjW3HvPwcuSuPcgYVvN9IcoeMrIB27XQPvA/HMtVF6+eS/GbP8XgB+7\nlX3YhH9c+b3fEIub4b9H90wF6b3+vg4dZHeI87VebgqAxcxQ+mFNxkWTivbAqTh6\nKaQeWiPXfEA9hMIvFTS5vuez6lzlkvWFEVDx22W18YyLLOLTOao85BA68AjQNpT1\nU1l6hY8BBqjU5BvmqpffKBw+0Yb18ajWfQoRh5uA81Kn9SU5Zy9p8z0eXLf5KPco\ndt/OE0tv\n=+25Y\n-----END PGP SIGNATURE-----",
        "payload": "tree d2c7a972879148907af7806996ba85c3560652d2\nparent ffff3fe50a16bd7dde3d2d206bbe7bc41c483bb8\nauthor MarcoFalke <falke.marco@gmail.com> 1591536258 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1592753746 -0400\n\ntest: Add test for no net permission\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fac6ef4fb2bbe6187a52d716eab734d0b1e9a221",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fac6ef4fb2bbe6187a52d716eab734d0b1e9a221",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fac6ef4fb2bbe6187a52d716eab734d0b1e9a221/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ffff3fe50a16bd7dde3d2d206bbe7bc41c483bb8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ffff3fe50a16bd7dde3d2d206bbe7bc41c483bb8",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ffff3fe50a16bd7dde3d2d206bbe7bc41c483bb8"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 6,
      "deletions": 0
    },
    "files": [
      {
        "sha": "bea202855d1048445eeda6531844efc0910858cb",
        "filename": "test/functional/p2p_permissions.py",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fac6ef4fb2bbe6187a52d716eab734d0b1e9a221/test/functional/p2p_permissions.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fac6ef4fb2bbe6187a52d716eab734d0b1e9a221/test/functional/p2p_permissions.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/p2p_permissions.py?ref=fac6ef4fb2bbe6187a52d716eab734d0b1e9a221",
        "patch": "@@ -42,6 +42,12 @@ def run_test(self):\n             [\"relay\", \"noban\", \"mempool\"],\n             True)\n \n+        self.checkpermission(\n+            # no permission (even with forcerelay)\n+            [\"-whitelist=@127.0.0.1\", \"-whitelistforcerelay=1\"],\n+            [],\n+            False)\n+\n         self.checkpermission(\n             # relay permission removed (no specific permissions)\n             [\"-whitelist=127.0.0.1\", \"-whitelistrelay=0\"],"
      }
    ]
  },
  {
    "sha": "fad676b8d2dfc3a8a62db3d3395d36d3e3076a5b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWQ2NzZiOGQyZGZjM2E4YTYyZGIzZDMzOTVkMzZkM2UzMDc2YTVi",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-07T13:54:56Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-21T15:36:07Z"
      },
      "message": "test: Add connect_nodes method",
      "tree": {
        "sha": "dd36003c89b2409587024d8db3fd8a0c4da4cb79",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dd36003c89b2409587024d8db3fd8a0c4da4cb79"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fad676b8d2dfc3a8a62db3d3395d36d3e3076a5b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUhpowv+NPeDa4/FATOJrHtuJGq5BeERlNn0PBYHRBYJAJkYEFMP27irZBkzGd3z\nHjwgO6Na3ye0JWgfRiy0+cb5epPUN3mKMpsVc8x6RMSBE38TU7Ki6e1JRnLGWDaI\n2xgrl42hsMrfm9kRD3T6JdJnTF+5HTSTNIGjPS90uY2hEIExnVIeMOGVFRSb2kmH\nlLGgAyIbTaW+xRHpD2W+gXnoqwFogjDOTixHM/e3SZGq8ZuRiBSf8vDFD2/QQAtR\n5cTiZBi+PShVY15/qye3pyGKyGqy77wDG/1EtymecXEBbexWZ9ZT5/llMJfVApqC\nZTwVTRuCFxyCFo25EEg9XeqRWtD3bwkLDy1hu42NpsQOLFWuAeZF0eodS0GtLz+n\nIvWjcLh0Gqppn9KpNpIGWmE0367rwh3QwTwL8rGcXkxoQoBJQRFes+J6nuSlwLrN\n4OpQ6h+ZXUSsRR9S8XAkLUws6DBQqVDK2UKeRTYpRKy7VQcC8Z/1JikaMv8muYJK\nTs5pSN1p\n=lm3O\n-----END PGP SIGNATURE-----",
        "payload": "tree dd36003c89b2409587024d8db3fd8a0c4da4cb79\nparent fac6ef4fb2bbe6187a52d716eab734d0b1e9a221\nauthor MarcoFalke <falke.marco@gmail.com> 1591538096 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1592753767 -0400\n\ntest: Add connect_nodes method\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fad676b8d2dfc3a8a62db3d3395d36d3e3076a5b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fad676b8d2dfc3a8a62db3d3395d36d3e3076a5b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fad676b8d2dfc3a8a62db3d3395d36d3e3076a5b/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fac6ef4fb2bbe6187a52d716eab734d0b1e9a221",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fac6ef4fb2bbe6187a52d716eab734d0b1e9a221",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fac6ef4fb2bbe6187a52d716eab734d0b1e9a221"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 10,
      "deletions": 4
    },
    "files": [
      {
        "sha": "9d9e065158a4f91b64e49b39945c1a9c2d6d7f01",
        "filename": "test/functional/test_framework/test_framework.py",
        "status": "modified",
        "additions": 10,
        "deletions": 4,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fad676b8d2dfc3a8a62db3d3395d36d3e3076a5b/test/functional/test_framework/test_framework.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fad676b8d2dfc3a8a62db3d3395d36d3e3076a5b/test/functional/test_framework/test_framework.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/test_framework.py?ref=fad676b8d2dfc3a8a62db3d3395d36d3e3076a5b",
        "patch": "@@ -353,9 +353,9 @@ def setup_network(self):\n         # See fPreferredDownload in net_processing.\n         #\n         # If further outbound connections are needed, they can be added at the beginning of the test with e.g.\n-        # connect_nodes(self.nodes[1], 2)\n+        # self.connect_nodes(1, 2)\n         for i in range(self.num_nodes - 1):\n-            connect_nodes(self.nodes[i + 1], i)\n+            self.connect_nodes(i + 1, i)\n         self.sync_all()\n \n     def setup_nodes(self):\n@@ -532,19 +532,25 @@ def restart_node(self, i, extra_args=None):\n     def wait_for_node_exit(self, i, timeout):\n         self.nodes[i].process.wait(timeout)\n \n+    def connect_nodes(self, a, b):\n+        connect_nodes(self.nodes[a], b)\n+\n+    def disconnect_nodes(self, a, b):\n+        disconnect_nodes(self.nodes[a], b)\n+\n     def split_network(self):\n         \"\"\"\n         Split the network of four nodes into nodes 0/1 and 2/3.\n         \"\"\"\n-        disconnect_nodes(self.nodes[1], 2)\n+        self.disconnect_nodes(1, 2)\n         self.sync_all(self.nodes[:2])\n         self.sync_all(self.nodes[2:])\n \n     def join_network(self):\n         \"\"\"\n         Join the (previously split) network halves together.\n         \"\"\"\n-        connect_nodes(self.nodes[1], 2)\n+        self.connect_nodes(1, 2)\n         self.sync_all()\n \n     def sync_blocks(self, nodes=None, wait=1, timeout=60):"
      }
    ]
  },
  {
    "sha": "faabd1514fecd828451387b025c1cc74a37bc854",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWFiZDE1MTRmZWNkODI4NDUxMzg3YjAyNWMxY2M3NGEzN2JjODU0",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-07T14:00:41Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-21T16:17:55Z"
      },
      "message": "test: Check that peers with forcerelay permission do not get a feefilter message",
      "tree": {
        "sha": "b503a98fa4c5e3c2b6364052936de8c12b7d1e55",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b503a98fa4c5e3c2b6364052936de8c12b7d1e55"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faabd1514fecd828451387b025c1cc74a37bc854",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUhfIgv9G2cFJF5LTKBcwoBCiIrdGK5P/djoXDVLY6SOOTSnVarlR/34n25LMgq4\nHEJTp/NLPatlQZ8u977EChoPWlPP1eZQuXVf28EudwNevJ/QfNPia0wUQX8fY4AH\neS5kYn4p7i45vXwL2auP6fCy5p/JXdukj9h1O7CoEO2P9Hg0gdTauGj9qFmQ6Pcx\nDTDwcvrDAvBvfUCIuv2AOjmI9gPusIWgxFCYag14CmHGj2f07Lp3hB3oEnvYCJKH\n22LzkwBWyXJoVXWakC+kEwlxYOnlRZq9seFVKbsxhJhj2Z9AnwFYXGR+BArTUxTj\nCHyEBwPJ4EtJaCK8UvnfbdRCax764LlFmXlNyPpaGfPOEPlF9k8/iTYjsOke+CKE\n4wZDiPj7KiB/Acmoada8eoT/S3FF6OfS1S6dF0BHgASu6xhYI461i4FZgz2Ci0Tc\nfUJeBuVD+g7SPUwKz1JBHQ82Cvi9vLGtf/rCVOd5tLIhE0C+XwxCTzRS0b22dxLv\nYHf9BDCK\n=PFJU\n-----END PGP SIGNATURE-----",
        "payload": "tree b503a98fa4c5e3c2b6364052936de8c12b7d1e55\nparent fad676b8d2dfc3a8a62db3d3395d36d3e3076a5b\nauthor MarcoFalke <falke.marco@gmail.com> 1591538441 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1592756275 -0400\n\ntest: Check that peers with forcerelay permission do not get a feefilter message\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faabd1514fecd828451387b025c1cc74a37bc854",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/faabd1514fecd828451387b025c1cc74a37bc854",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faabd1514fecd828451387b025c1cc74a37bc854/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fad676b8d2dfc3a8a62db3d3395d36d3e3076a5b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fad676b8d2dfc3a8a62db3d3395d36d3e3076a5b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fad676b8d2dfc3a8a62db3d3395d36d3e3076a5b"
      }
    ],
    "stats": {
      "total": 28,
      "additions": 28,
      "deletions": 0
    },
    "files": [
      {
        "sha": "f939ea965cf62f8e6d15e3fccb980964f558bd4c",
        "filename": "test/functional/p2p_feefilter.py",
        "status": "modified",
        "additions": 28,
        "deletions": 0,
        "changes": 28,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/faabd1514fecd828451387b025c1cc74a37bc854/test/functional/p2p_feefilter.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/faabd1514fecd828451387b025c1cc74a37bc854/test/functional/p2p_feefilter.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/p2p_feefilter.py?ref=faabd1514fecd828451387b025c1cc74a37bc854",
        "patch": "@@ -10,6 +10,7 @@\n from test_framework.messages import MSG_TX, msg_feefilter\n from test_framework.mininode import mininode_lock, P2PInterface\n from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n \n \n def hashToHex(hash):\n@@ -26,6 +27,17 @@ def allInvsMatch(invsExpected, testnode):\n     return False\n \n \n+class FeefilterConn(P2PInterface):\n+    feefilter_received = False\n+\n+    def on_feefilter(self, message):\n+        self.feefilter_received = True\n+\n+    def assert_feefilter_received(self, recv: bool):\n+        with mininode_lock:\n+            assert_equal(self.feefilter_received, recv)\n+\n+\n class TestP2PConn(P2PInterface):\n     def __init__(self):\n         super().__init__()\n@@ -55,6 +67,22 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n     def run_test(self):\n+        self.test_feefilter_forcerelay()\n+        self.test_feefilter()\n+\n+    def test_feefilter_forcerelay(self):\n+        self.log.info('Check that peers without forcerelay permission (default) get a feefilter message')\n+        self.nodes[0].add_p2p_connection(FeefilterConn()).assert_feefilter_received(True)\n+\n+        self.log.info('Check that peers with forcerelay permission do not get a feefilter message')\n+        self.restart_node(0, extra_args=['-whitelist=forcerelay@127.0.0.1'])\n+        self.nodes[0].add_p2p_connection(FeefilterConn()).assert_feefilter_received(False)\n+\n+        # Restart to disconnect peers and load default extra_args\n+        self.restart_node(0)\n+        self.connect_nodes(1, 0)\n+\n+    def test_feefilter(self):\n         node1 = self.nodes[1]\n         node0 = self.nodes[0]\n "
      }
    ]
  },
  {
    "sha": "fac63eb5eabcbbc2e51d414b9cf76f0e897dba1a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWM2M2ViNWVhYmNiYmMyZTUxZDQxNGI5Y2Y3NmYwZTg5N2RiYTFh",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-07T14:03:13Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-06-21T16:18:10Z"
      },
      "message": "doc: Remove -whitelistforcerelay from comment\n\nInstead, permission flags should be used. For example\n-whitelist=forcerelay@127.0.0.1",
      "tree": {
        "sha": "66770a64b97ee0b9eaeba5562b9f6f033218b30f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/66770a64b97ee0b9eaeba5562b9f6f033218b30f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fac63eb5eabcbbc2e51d414b9cf76f0e897dba1a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUguwwwAzDOuQ3GBSSnjeQ3WyoGL68fJ7ppQspXkZVoORR09nR40Ga9fCQ2jZ4Ep\nlH0rMWQoTiN5wBWXfdt0DjJU6CNvBESjATq2y2z4GY1Br8RbBpYdoz9g+uS/Vl8n\nXQt4/cO34RRZm6FRjJm7NqY0fVvDG4qlrVa3FZIIJxwYXucN5P5wQ4z8HH1wTZaZ\nfNCnlR5mdul+B7Lh/r9yytK5kLxf5f3180YKwKGEUz57kdXa78CyMYwc7D8tpMHw\ns6dsAA0kD2L55WrnJ39CjY1UKWyvqBjFnROV7EVx2BIE1w5cgYL0P+F8rV0lr8Xx\nypMoe5bxy18/nefD5qf3LXTjCC890sDR/DzUMQIRvBn0foamEVQnWncrR7pZiRB2\n2LMPfUqo2OUoB7/LcLma6aVPNEvF+MKojLMUz2D4OvZ9SFqqrsgs35fZqZ8xPUAU\nxFvEiC+3e6aOFwz9/8S8cxf7qVAIsYo5Gf0bFaz+SMTblOxmvl+Nd69roRm54kQd\nV5nhuBpO\n=RaSe\n-----END PGP SIGNATURE-----",
        "payload": "tree 66770a64b97ee0b9eaeba5562b9f6f033218b30f\nparent faabd1514fecd828451387b025c1cc74a37bc854\nauthor MarcoFalke <falke.marco@gmail.com> 1591538593 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1592756290 -0400\n\ndoc: Remove -whitelistforcerelay from comment\n\nInstead, permission flags should be used. For example\n-whitelist=forcerelay@127.0.0.1\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fac63eb5eabcbbc2e51d414b9cf76f0e897dba1a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fac63eb5eabcbbc2e51d414b9cf76f0e897dba1a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fac63eb5eabcbbc2e51d414b9cf76f0e897dba1a/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "faabd1514fecd828451387b025c1cc74a37bc854",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faabd1514fecd828451387b025c1cc74a37bc854",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/faabd1514fecd828451387b025c1cc74a37bc854"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "270e415e4205cb079af95b1c523f8a938abfbf0e",
        "filename": "src/net_processing.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fac63eb5eabcbbc2e51d414b9cf76f0e897dba1a/src/net_processing.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fac63eb5eabcbbc2e51d414b9cf76f0e897dba1a/src/net_processing.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net_processing.cpp?ref=fac63eb5eabcbbc2e51d414b9cf76f0e897dba1a",
        "patch": "@@ -4387,9 +4387,9 @@ bool PeerLogicValidation::SendMessages(CNode* pto)\n         //\n         // Message: feefilter\n         //\n-        // We don't want white listed peers to filter txs to us if we have -whitelistforcerelay\n         if (pto->m_tx_relay != nullptr && pto->nVersion >= FEEFILTER_VERSION && gArgs.GetBoolArg(\"-feefilter\", DEFAULT_FEEFILTER) &&\n-            !pto->HasPermission(PF_FORCERELAY)) {\n+            !pto->HasPermission(PF_FORCERELAY) // peers with the forcerelay permission should not filter txs to us\n+        ) {\n             CAmount currentFilter = m_mempool.GetMinFee(gArgs.GetArg(\"-maxmempool\", DEFAULT_MAX_MEMPOOL_SIZE) * 1000000).GetFeePerK();\n             int64_t timeNow = GetTimeMicros();\n             if (timeNow > pto->m_tx_relay->nextSendTimeFeeFilter) {"
      }
    ]
  }
]