[
  {
    "sha": "2002bceac5b8fad593c9cf83cc4e7127029f2174",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyMDAyYmNlYWM1YjhmYWQ1OTNjOWNmODNjYzRlNzEyNzAyOWYyMTc0",
    "commit": {
      "author": {
        "name": "Rune K. Svendsen",
        "email": "runesvend@gmail.com",
        "date": "2013-06-03T10:15:12Z"
      },
      "committer": {
        "name": "Rune K. Svendsen",
        "email": "runesvend@gmail.com",
        "date": "2013-06-03T10:15:12Z"
      },
      "message": "Add Linux script to limit outgoing bandwidth used by Bitcoin\n\nThis commit adds a Linux script that uses tc and iptables to\nlimit outgoing bandwidth to Bitcoin nodes. All tcp connections with\na source or destination port of 8333 are limited to the chosen rate.\nIt does not alter the incoming bandwidth. Additionally, outgoing\nbandwidth to a host on a local LAN (defined by the LOCALNET variable)\nis not limited.",
      "tree": {
        "sha": "e9fddd5904c62aa032dcd71894a70fac042d29f3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e9fddd5904c62aa032dcd71894a70fac042d29f3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2002bceac5b8fad593c9cf83cc4e7127029f2174",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2002bceac5b8fad593c9cf83cc4e7127029f2174",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2002bceac5b8fad593c9cf83cc4e7127029f2174",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2002bceac5b8fad593c9cf83cc4e7127029f2174/comments",
    "author": {
      "login": "runeksvendsen",
      "id": 1069247,
      "node_id": "MDQ6VXNlcjEwNjkyNDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1069247?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/runeksvendsen",
      "html_url": "https://github.com/runeksvendsen",
      "followers_url": "https://api.github.com/users/runeksvendsen/followers",
      "following_url": "https://api.github.com/users/runeksvendsen/following{/other_user}",
      "gists_url": "https://api.github.com/users/runeksvendsen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/runeksvendsen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/runeksvendsen/subscriptions",
      "organizations_url": "https://api.github.com/users/runeksvendsen/orgs",
      "repos_url": "https://api.github.com/users/runeksvendsen/repos",
      "events_url": "https://api.github.com/users/runeksvendsen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/runeksvendsen/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "runeksvendsen",
      "id": 1069247,
      "node_id": "MDQ6VXNlcjEwNjkyNDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1069247?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/runeksvendsen",
      "html_url": "https://github.com/runeksvendsen",
      "followers_url": "https://api.github.com/users/runeksvendsen/followers",
      "following_url": "https://api.github.com/users/runeksvendsen/following{/other_user}",
      "gists_url": "https://api.github.com/users/runeksvendsen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/runeksvendsen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/runeksvendsen/subscriptions",
      "organizations_url": "https://api.github.com/users/runeksvendsen/orgs",
      "repos_url": "https://api.github.com/users/runeksvendsen/repos",
      "events_url": "https://api.github.com/users/runeksvendsen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/runeksvendsen/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa9e5adddda0bee5adc040b957cf3f1a6a470802",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa9e5adddda0bee5adc040b957cf3f1a6a470802",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa9e5adddda0bee5adc040b957cf3f1a6a470802"
      }
    ],
    "stats": {
      "total": 44,
      "additions": 44,
      "deletions": 0
    },
    "files": [
      {
        "sha": "f419685744d74dca63559968652cd0abe3ae6fd7",
        "filename": "contrib/qos/README",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2002bceac5b8fad593c9cf83cc4e7127029f2174/contrib/qos/README",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2002bceac5b8fad593c9cf83cc4e7127029f2174/contrib/qos/README",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/qos/README?ref=2002bceac5b8fad593c9cf83cc4e7127029f2174",
        "patch": "@@ -0,0 +1,3 @@\n+This is a Linux bash script that will set up tc to limit the outgoing bandwidth for connections to the Bitcoin network. It limits outbound TCP traffic with a source or destination port of 8333, but not if the destination IP is within a LAN (defined as 192.168.x.x).\n+\n+This means one can have an always-on bitcoind instance running, and another local bitcoind/bitcoin-qt instance which connects to this node and receives blocks from it."
      },
      {
        "sha": "f62060421202c7954464d54d3b88c8377bd8e651",
        "filename": "contrib/qos/tc.sh",
        "status": "added",
        "additions": 41,
        "deletions": 0,
        "changes": 41,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2002bceac5b8fad593c9cf83cc4e7127029f2174/contrib/qos/tc.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2002bceac5b8fad593c9cf83cc4e7127029f2174/contrib/qos/tc.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/qos/tc.sh?ref=2002bceac5b8fad593c9cf83cc4e7127029f2174",
        "patch": "@@ -0,0 +1,41 @@\n+#network interface on which to limit traffic\n+IF=\"eth0\"\n+#limit of the network interface in question\n+LINKCEIL=\"1gbit\"\n+#limit outbound Bitcoin protocol traffic to this rate\n+LIMIT=\"160kbit\"\n+#defines the address space for which you wish to disable rate limiting\n+LOCALNET=\"192.168.0.0/16\"\n+\n+#delete existing rules\n+tc qdisc del dev ${IF} root\n+\n+#add root class\n+tc qdisc add dev ${IF} root handle 1: htb default 10\n+\n+#add parent class\n+tc class add dev ${IF} parent 1: classid 1:1 htb rate ${LINKCEIL} ceil ${LINKCEIL}\n+\n+#add our two classes. one unlimited, another limited\n+tc class add dev ${IF} parent 1:1 classid 1:10 htb rate ${LINKCEIL} ceil ${LINKCEIL} prio 0\n+tc class add dev ${IF} parent 1:1 classid 1:11 htb rate ${LIMIT} ceil ${LIMIT} prio 1\n+\n+#add handles to our classes so packets marked with <x> go into the class with \"... handle <x> fw ...\"\n+tc filter add dev ${IF} parent 1: protocol ip prio 1 handle 1 fw classid 1:10\n+tc filter add dev ${IF} parent 1: protocol ip prio 2 handle 2 fw classid 1:11\n+\n+#delete any existing rules\n+#disable for now\n+#ret=0\n+#while [ $ret -eq 0 ]; do\n+#\tiptables -t mangle -D OUTPUT 1\n+#\tret=$?\n+#done\n+\n+#limit outgoing traffic to and from port 8333. but not when dealing with a host on the local network\n+#\t(defined by $LOCALNET)\n+#\t--set-mark marks packages matching these criteria with the number \"2\"\n+#\tthese packages are filtered by the tc filter with \"handle 2\"\n+#\tthis filter sends the packages into the 1:11 class, and this class is limited to ${LIMIT}\n+iptables -t mangle -A OUTPUT -p tcp -m tcp --dport 8333 ! -d ${LOCALNET} -j MARK --set-mark 0x2\n+iptables -t mangle -A OUTPUT -p tcp -m tcp --sport 8333 ! -d ${LOCALNET} -j MARK --set-mark 0x2"
      }
    ]
  }
]