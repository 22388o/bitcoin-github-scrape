kallewoof,2020-08-17 07:53:48,@jonatack Thanks for review! Added a test to check the cap is not exceeded. [Edited: Will → Did],https://github.com/bitcoin/bitcoin/pull/19743#issuecomment-674723376,674723376,
kallewoof,2020-08-17 08:13:03,"Added test for when cap is exceeded.\n\nhttps://github.com/bitcoin/bitcoin/blob/452befa3999853383fc960d4982b244ab23d36b7/test/functional/wallet_groups.py#L114-L122",https://github.com/bitcoin/bitcoin/pull/19743#issuecomment-674732521,674732521,
fjahr,2020-08-17 12:22:02,"Code review ACK 198c4434a2870c67e9b1b7b39800c10ec0404fb5\n\nEdit: not sure about the CI failures, tests succeed for me locally.",https://github.com/bitcoin/bitcoin/pull/19743#issuecomment-674849280,674849280,
kallewoof,2020-08-18 01:10:44,"~This should fix; if waiting for this to be merge-ready is undesired, #19756 was opened.~",https://github.com/bitcoin/bitcoin/pull/19743#issuecomment-675192607,675192607,
jonatack,2020-08-18 06:49:24,ACK 19cf0d3 per `git range-diff e6e277f9 198c443 19cf0d3` provided the CI agrees; the test passes for me locally,https://github.com/bitcoin/bitcoin/pull/19743#issuecomment-675290278,675290278,
kallewoof,2020-08-18 07:55:01,"Weirdly, it's now giving a different message.\n\n> AssertionError: [node 3] Expected messages ""['Fee non-grouped = 2820, grouped = 4160, using grouped']"" does not partially match log:\n> [...]\n> 2020-08-18T07:17:37.634268Z [httpworker.1] [default wallet] Fee non-grouped = 2820, grouped = 2820, using grouped\n",https://github.com/bitcoin/bitcoin/pull/19743#issuecomment-675321223,675321223,
meshcollider,2020-08-18 08:06:32,I get the same error locally ^,https://github.com/bitcoin/bitcoin/pull/19743#issuecomment-675327463,675327463,
kallewoof,2020-08-18 08:12:01,Rebase screw-up. Fixing.,https://github.com/bitcoin/bitcoin/pull/19743#issuecomment-675330204,675330204,
jonatack,2020-08-18 09:39:37,"> ACK [19cf0d3](https://github.com/bitcoin/bitcoin/commit/19cf0d3a2006302dd32e58c3522c2346c55253a5) per `git range-diff e6e277f9 198c443 19cf0d3` provided the CI agrees; the test passes for me locally\n\nI think I mistakenly ran the test while still on commit 198c443. Re-reviewing.",https://github.com/bitcoin/bitcoin/pull/19743#issuecomment-675375799,675375799,
jonatack,2020-08-18 10:12:10,"@kallewoof further to https://github.com/bitcoin/bitcoin/pull/19743#discussion_r471457343, here is a proposed additional test commit if you feel like pulling it in:\n\nhttps://github.com/jonatack/bitcoin/commits/maxapsfee-tests",https://github.com/bitcoin/bitcoin/pull/19743#issuecomment-675390980,675390980,
kallewoof,2020-08-18 10:27:11,"Squashed @jonatack's improvements (including tx4 → tx5 typo) into main commit (already co-authored-by tagged).\n",https://github.com/bitcoin/bitcoin/pull/19743#issuecomment-675397813,675397813,
jonatack,2020-08-18 10:32:09,"ACK 7e31ea9fa0a\n\n(if Travis acks too)",https://github.com/bitcoin/bitcoin/pull/19743#issuecomment-675400062,675400062,
jonatack,2020-08-17 06:34:19,set. (#14582),https://github.com/bitcoin/bitcoin/pull/19743#discussion_r471258141,471258141,doc/release-notes-14582.md
jonatack,2020-08-17 06:35:12,option. (#14582),https://github.com/bitcoin/bitcoin/pull/19743#discussion_r471258436,471258436,doc/release-notes-14582.md
jonatack,2020-08-17 06:40:26,"while here, there are six other `assert_approx` assertions without keyword args (two also in the new test), and two of the others which could optionally also have an explicit default vspan added",https://github.com/bitcoin/bitcoin/pull/19743#discussion_r471260225,471260225,test/functional/wallet_groups.py
kallewoof,2020-08-17 07:52:02,Fair point. Fixed all of them.,https://github.com/bitcoin/bitcoin/pull/19743#discussion_r471303367,471303367,test/functional/wallet_groups.py
jonatack,2020-08-17 12:53:17,"Verified the tests all pass if `-maxapsfee=0.00002719`, and that they fail at this line if `-maxapsfee=0.00002720` (8240 - 5520 = 2720):\n\n```\nAssertionError: [node 3] Expected messages ""['Fee non-grouped = 5520, grouped = 8240, using non-grouped']""\n```\nActual log\n```\nFee non-grouped = 5520, grouped = 8240, using grouped\n```\nSo if you want to test the limit, could set maxapsfee to",https://github.com/bitcoin/bitcoin/pull/19743#discussion_r471457343,471457343,test/functional/wallet_groups.py
jonatack,2020-08-17 15:15:32,Hopefully this line will fix #19749,https://github.com/bitcoin/bitcoin/pull/19743#discussion_r471549351,471549351,test/functional/wallet_groups.py
MarcoFalke,2020-08-17 16:58:10,"Test fails here:\n\nhttps://cirrus-ci.com/task/6483042137014272?command=ci#L5047\n\n```\n test  2020-08-17T11:25:30.841000Z TestFramework (ERROR): JSONRPC error \n                                   Traceback (most recent call last):\n                                     File ""/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/test_framework.py"",",https://github.com/bitcoin/bitcoin/pull/19743#discussion_r471613352,471613352,test/functional/wallet_groups.py
jonatack,2020-08-17 17:14:45,![image](https://user-images.githubusercontent.com/2415484/90424067-cd897580-e0bd-11ea-9160-34cdf3183640.jpeg)\n\nThis may be a second one? I saw it at line 106. Edit: in the reported issue WRT master.,https://github.com/bitcoin/bitcoin/pull/19743#discussion_r471629946,471629946,test/functional/wallet_groups.py
jonatack,2020-08-18 09:40:49,"Should this be `tx5`?\n```suggestion\n        assert_equal(2, len(tx5[""vout""]))\n```",https://github.com/bitcoin/bitcoin/pull/19743#discussion_r472051209,472051209,test/functional/wallet_groups.py
kallewoof,2020-08-18 10:22:47,It should! Gah thanks.,https://github.com/bitcoin/bitcoin/pull/19743#discussion_r472074563,472074563,test/functional/wallet_groups.py
