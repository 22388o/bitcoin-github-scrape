[
  {
    "sha": "224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyMjRlYjk1MzRhOGQyYjBmMTQwZWNiMGNjMDBjNjFhZjhiYTFkYTRl",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-05-27T18:07:05Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-07-08T14:03:49Z"
      },
      "message": "gui: Sort wallets in open wallet menu",
      "tree": {
        "sha": "18a876a6a2ec1af930fa8e9e1300d4be89ca0424",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/18a876a6a2ec1af930fa8e9e1300d4be89ca0424"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b5fa2319d86343499ae0c49605d379a20038ca85",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b5fa2319d86343499ae0c49605d379a20038ca85",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b5fa2319d86343499ae0c49605d379a20038ca85"
      }
    ],
    "stats": {
      "total": 27,
      "additions": 16,
      "deletions": 11
    },
    "files": [
      {
        "sha": "1fa05d550acd2b6aef8764b881acb73d8d612e03",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 5,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e",
        "patch": "@@ -371,13 +371,12 @@ void BitcoinGUI::createActions()\n         connect(openAction, &QAction::triggered, this, &BitcoinGUI::openClicked);\n         connect(m_open_wallet_menu, &QMenu::aboutToShow, [this] {\n             m_open_wallet_menu->clear();\n-            std::vector<std::string> available_wallets = m_wallet_controller->getWalletsAvailableToOpen();\n-            std::vector<std::string> wallets = m_node.listWalletDir();\n-            for (const auto& path : wallets) {\n+            for (const std::pair<const std::string, bool>& i : m_wallet_controller->listWalletDir()) {\n+                const std::string& path = i.first;\n                 QString name = path.empty() ? QString(\"[\"+tr(\"default wallet\")+\"]\") : QString::fromStdString(path);\n                 QAction* action = m_open_wallet_menu->addAction(name);\n \n-                if (std::find(available_wallets.begin(), available_wallets.end(), path) == available_wallets.end()) {\n+                if (i.second) {\n                     // This wallet is already loaded\n                     action->setEnabled(false);\n                     continue;\n@@ -410,7 +409,7 @@ void BitcoinGUI::createActions()\n                     assert(invoked);\n                 });\n             }\n-            if (wallets.empty()) {\n+            if (m_open_wallet_menu->isEmpty()) {\n                 QAction* action = m_open_wallet_menu->addAction(tr(\"No wallets available\"));\n                 action->setEnabled(false);\n             }"
      },
      {
        "sha": "3bb0b8dbb69771462b549d6254c767dad03215ae",
        "filename": "src/qt/walletcontroller.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 4,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e/src/qt/walletcontroller.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e/src/qt/walletcontroller.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletcontroller.cpp?ref=224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e",
        "patch": "@@ -46,13 +46,16 @@ std::vector<WalletModel*> WalletController::getWallets() const\n     return m_wallets;\n }\n \n-std::vector<std::string> WalletController::getWalletsAvailableToOpen() const\n+std::map<std::string, bool> WalletController::listWalletDir() const\n {\n     QMutexLocker locker(&m_mutex);\n-    std::vector<std::string> wallets = m_node.listWalletDir();\n+    std::map<std::string, bool> wallets;\n+    for (const std::string& name : m_node.listWalletDir()) {\n+        wallets[name] = false;\n+    }\n     for (WalletModel* wallet_model : m_wallets) {\n-        auto it = std::remove(wallets.begin(), wallets.end(), wallet_model->wallet().getWalletName());\n-        if (it != wallets.end()) wallets.erase(it);\n+        auto it = wallets.find(wallet_model->wallet().getWalletName());\n+        if (it != wallets.end()) it->second = true;\n     }\n     return wallets;\n }"
      },
      {
        "sha": "dcd64aac7b420dc5d3ac36109a41b531f2413bcf",
        "filename": "src/qt/walletcontroller.h",
        "status": "modified",
        "additions": 5,
        "deletions": 2,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e/src/qt/walletcontroller.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e/src/qt/walletcontroller.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletcontroller.h?ref=224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e",
        "patch": "@@ -8,7 +8,7 @@\n #include <qt/walletmodel.h>\n #include <sync.h>\n \n-#include <list>\n+#include <map>\n #include <memory>\n #include <vector>\n \n@@ -41,7 +41,10 @@ class WalletController : public QObject\n     ~WalletController();\n \n     std::vector<WalletModel*> getWallets() const;\n-    std::vector<std::string> getWalletsAvailableToOpen() const;\n+\n+    //! Returns all wallet names in the wallet dir mapped to whether the wallet\n+    //! is loaded.\n+    std::map<std::string, bool> listWalletDir() const;\n \n     OpenWalletActivity* openWallet(const std::string& name, QWidget* parent = nullptr);\n     void closeWallet(WalletModel* wallet_model, QWidget* parent = nullptr);"
      }
    ]
  },
  {
    "sha": "fa90fe6440301edba71a6f0b1ba3ef1c78d5eae4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTkwZmU2NDQwMzAxZWRiYTcxYTZmMGIxYmEzZWYxYzc4ZDVlYWU0",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-05-27T21:14:29Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-07-08T14:07:17Z"
      },
      "message": "refactor: Rename getWallets to getOpenWallets in WalletController",
      "tree": {
        "sha": "74b8127eb93fc97e0f9ba790ecad42a206df8df6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/74b8127eb93fc97e0f9ba790ecad42a206df8df6"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa90fe6440301edba71a6f0b1ba3ef1c78d5eae4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa90fe6440301edba71a6f0b1ba3ef1c78d5eae4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa90fe6440301edba71a6f0b1ba3ef1c78d5eae4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa90fe6440301edba71a6f0b1ba3ef1c78d5eae4/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/224eb9534a8d2b0f140ecb0cc00c61af8ba1da4e"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 4,
      "deletions": 3
    },
    "files": [
      {
        "sha": "98c291aa63489673b0dad8c069527c777461e95c",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa90fe6440301edba71a6f0b1ba3ef1c78d5eae4/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa90fe6440301edba71a6f0b1ba3ef1c78d5eae4/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=fa90fe6440301edba71a6f0b1ba3ef1c78d5eae4",
        "patch": "@@ -639,7 +639,7 @@ void BitcoinGUI::setWalletController(WalletController* wallet_controller)\n     connect(wallet_controller, &WalletController::walletAdded, this, &BitcoinGUI::addWallet);\n     connect(wallet_controller, &WalletController::walletRemoved, this, &BitcoinGUI::removeWallet);\n \n-    for (WalletModel* wallet_model : m_wallet_controller->getWallets()) {\n+    for (WalletModel* wallet_model : m_wallet_controller->getOpenWallets()) {\n         addWallet(wallet_model);\n     }\n }"
      },
      {
        "sha": "4d489d7f44e9f87fd27513be994a3e74e64410f1",
        "filename": "src/qt/walletcontroller.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa90fe6440301edba71a6f0b1ba3ef1c78d5eae4/src/qt/walletcontroller.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa90fe6440301edba71a6f0b1ba3ef1c78d5eae4/src/qt/walletcontroller.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletcontroller.cpp?ref=fa90fe6440301edba71a6f0b1ba3ef1c78d5eae4",
        "patch": "@@ -40,7 +40,7 @@ WalletController::~WalletController()\n     m_activity_thread.wait();\n }\n \n-std::vector<WalletModel*> WalletController::getWallets() const\n+std::vector<WalletModel*> WalletController::getOpenWallets() const\n {\n     QMutexLocker locker(&m_mutex);\n     return m_wallets;"
      },
      {
        "sha": "03039dd795042b2ef5e3ab3d8967ab8b332380d8",
        "filename": "src/qt/walletcontroller.h",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa90fe6440301edba71a6f0b1ba3ef1c78d5eae4/src/qt/walletcontroller.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa90fe6440301edba71a6f0b1ba3ef1c78d5eae4/src/qt/walletcontroller.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletcontroller.h?ref=fa90fe6440301edba71a6f0b1ba3ef1c78d5eae4",
        "patch": "@@ -40,7 +40,8 @@ class WalletController : public QObject\n     WalletController(interfaces::Node& node, const PlatformStyle* platform_style, OptionsModel* options_model, QObject* parent);\n     ~WalletController();\n \n-    std::vector<WalletModel*> getWallets() const;\n+    //! Returns wallet models currently open.\n+    std::vector<WalletModel*> getOpenWallets() const;\n \n     //! Returns all wallet names in the wallet dir mapped to whether the wallet\n     //! is loaded."
      }
    ]
  }
]