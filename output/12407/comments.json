[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364695748",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-364695748",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
    "id": 364695748,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDY5NTc0OA==",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-10T21:38:57Z",
    "updated_at": "2018-02-10T21:38:57Z",
    "author_association": "MEMBER",
    "body": "Hm: this changeset is failing tests that initially transmit a block with unexpected witness data (which gets rejected) and then retransmit without witness data for expected acceptance, but we get hung up on an existing `mapBlockIndex` entry that's been marked invalid.\r\n\r\nIs it worth special-casing out `\"unexpected-witness\"` rejections from the `InvalidateBlock` call? Seems a little ugly.\r\n\r\nIs the bookkeeping this PR wants to do even worth it? I guess we could just lump long invalid forks in with long headers-only forks, but that doesn't seem great either...",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364695748/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364695970",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-364695970",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
    "id": 364695970,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDY5NTk3MA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-10T21:40:59Z",
    "updated_at": "2018-02-10T21:40:59Z",
    "author_association": "MEMBER",
    "body": "You can only mark a block as invalid when fPossibleCorruption is not set in the validation status.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364695970/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364697057",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-364697057",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
    "id": 364697057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDY5NzA1Nw==",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-10T21:49:50Z",
    "updated_at": "2018-02-10T21:49:50Z",
    "author_association": "MEMBER",
    "body": "Ah good point, thanks @sipa. That seems to have fixed it.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364697057/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/365766464",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-365766464",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
    "id": 365766464,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTc2NjQ2NA==",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T22:29:44Z",
    "updated_at": "2018-02-14T22:31:49Z",
    "author_association": "MEMBER",
    "body": "I've rebased this changeset, removing the code that's now in #12431 as well as the semi-related log statement. I've also DRY'd up parts of validation which set `BLOCK_FAILED_VALID` on `nStatus` to use `InvalidBlockFound` instead.\r\n\r\nThis change should only be merged *after* #12431 since this will exercise the bug that PR fixes.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/365766464/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371519441",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-371519441",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
    "id": 371519441,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTUxOTQ0MQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-08T15:22:27Z",
    "updated_at": "2018-03-08T15:22:27Z",
    "author_association": "MEMBER",
    "body": "Needs rebase to fix travis (sorry)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371519441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371524776",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-371524776",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
    "id": 371524776,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTUyNDc3Ng==",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-08T15:39:03Z",
    "updated_at": "2018-03-08T15:39:03Z",
    "author_association": "MEMBER",
    "body": "Rebased.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371524776/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372479549",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-372479549",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
    "id": 372479549,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjQ3OTU0OQ==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-12T22:09:51Z",
    "updated_at": "2018-03-12T22:09:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "Slight re-utACK a12ce0dde462911bb702070d31ed28ba32353a05. Again someone more knowledgeable than me should review safety of adding new `InvalidBlockFound` calls in `ProcessNewBlock`,  `AcceptBlock`, and `InvalidateBlock`.\r\n\r\nChanges since last review were rebase, python cleanups, adding CorruptionPossible log print, and some suggestions from the last review.\r\n\r\nYou may want to update PR description since it will become part of git history if this is merged.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372479549/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375775383",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-375775383",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
    "id": 375775383,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTc3NTM4Mw==",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-23T19:32:02Z",
    "updated_at": "2018-03-23T19:32:02Z",
    "author_association": "MEMBER",
    "body": "Thanks @ryanofsky and @sipa for the re-review. I've incorporated @sipa's change (remove unconditional log in `InvalidBlockFound` when corruption is possible), rebased, and updated the PR description to better reflect the change's contents. I've added some text discussing the refactoring, reproduced here\r\n\r\n> This change also consolidates the setting of CBlockIndex's `nStatus |= BLOCK_FAILED_VALID` to a single function (`InvalidBlockFound`) since there's peripheral bookkeeping (e.g. `g_failed_blocks.insert()`) that we want to do consistently but is duplicated in some places or not done in other cases when it apparently should be. \r\n> \r\n> [One such replacement with InvalidBlockFound](https://github.com/bitcoin/bitcoin/pull/12407/files?diff=unified#diff-24efdb00bfbe56b140fb006b562cc70bL3420) ensures addition of invalid blocks to `g_failed_blocks` and so (in theory) reduces CPU burden when being spammed with descendants of an invalid block, since we no longer have to walk `mapBlockIndex` to determine its invalidity. Based on reading usage of `g_failed_blocks` I can't tell if this savings is real, but in any case it seems worthwhile to keep that set consistent (i.e. 1-1 with blocks marked BLOCK_FAILED_VALID since last restart).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375775383/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/386027864",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-386027864",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
    "id": 386027864,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjAyNzg2NA==",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-02T15:55:43Z",
    "updated_at": "2018-05-02T15:55:43Z",
    "author_association": "MEMBER",
    "body": "Any hope of a concept ACK/NACK on this from @sipa @TheBlueMatt @sdaftuar?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/386027864/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390118996",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-390118996",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
    "id": 390118996,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDExODk5Ng==",
    "user": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?u=a1574ca2038ff1dfaa9a7764c59ea5ff4f305b5d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-18T07:23:13Z",
    "updated_at": "2018-05-18T07:23:13Z",
    "author_association": "MEMBER",
    "body": "Needs rebase",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390118996/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390783107",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-390783107",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
    "id": 390783107,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDc4MzEwNw==",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-21T21:07:20Z",
    "updated_at": "2018-05-21T21:07:20Z",
    "author_association": "MEMBER",
    "body": "Rebased and addressed @laanwj's feedback.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390783107/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/397728995",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-397728995",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
    "id": 397728995,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzcyODk5NQ==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-15T20:08:51Z",
    "updated_at": "2018-06-15T20:08:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/397728995/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/398179075",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-398179075",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
    "id": 398179075,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODE3OTA3NQ==",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-18T20:08:13Z",
    "updated_at": "2018-06-18T20:08:13Z",
    "author_association": "MEMBER",
    "body": "Closing this; isn't getting much traction and no point in rebasing if that's the case.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/398179075/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172657726",
    "pull_request_review_id": 101713470,
    "id": 172657726,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjY1NzcyNg==",
    "diff_hunk": "@@ -373,10 +373,13 @@ def sync_blocks(rpc_connections, *, wait=1, timeout=60):\n             if all(t[\"hash\"] == tips[0][\"hash\"] for t in tips):\n                 return\n             raise AssertionError(\"Block sync failed, mismatched block hashes:{}\".format(\n-                                 \"\".join(\"\\n  {!r}\".format(tip) for tip in tips)))\n+                \"\".join(\"\\n  Node {}: {!r}\".format(\n+                    rpc_connections[i].index, tip)\n+                        for i, tip in enumerate(tips))))",
    "path": "test/functional/test_framework/util.py",
    "position": null,
    "original_position": 7,
    "commit_id": "29bd4800ceab42f8b798869a2fb3e7f8de171738",
    "original_commit_id": "e2be3284d6a042e029c830d35e58c7c117d39602",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"[tests] Add utility for generating bad coinbase transactions\"\r\n\r\nI think:\r\n\r\n```python\r\n(r.index, tip for r, tip in zip(rpc_connections, tips))\r\n```\r\nwould be clearer than:\r\n\r\n```python\r\n(rpc_connections[i].index, tip for i, tip in enumerate(tips))\r\n```\r\n\r\nbut you should ignore this suggestion if you prefer enumerate.",
    "created_at": "2018-03-06T20:59:36Z",
    "updated_at": "2018-05-21T21:05:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172657726",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172657726"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172657726"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172657726/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 378,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172658464",
    "pull_request_review_id": 101713470,
    "id": 172658464,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjY1ODQ2NA==",
    "diff_hunk": "@@ -110,6 +112,16 @@ def create_transaction(prevtx, n, sig, value, scriptPubKey=CScript()):\n     tx.calc_sha256()\n     return tx\n \n+\n+def create_coinbase_with_bad_txin(*args, **kwargs):\n+    \"\"\"Return a coinbase CTransaction with an invalid txin.\"\"\"\n+    kwargs['txin'] = CTxIn(",
    "path": "test/functional/test_framework/blocktools.py",
    "position": null,
    "original_position": 23,
    "commit_id": "29bd4800ceab42f8b798869a2fb3e7f8de171738",
    "original_commit_id": "e2be3284d6a042e029c830d35e58c7c117d39602",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"[tests] Add utility for generating bad coinbase transactions\"\r\n\r\nCould drop kwargs assignment with\r\n\r\n```python\r\nreturn create_coinbase(*args, **kwargs. txin=CTxIn(...))\r\n```",
    "created_at": "2018-03-06T21:02:17Z",
    "updated_at": "2018-05-21T21:05:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172658464",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172658464"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172658464"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172658464/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 118,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172664641",
    "pull_request_review_id": 101713470,
    "id": 172664641,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjY2NDY0MQ==",
    "diff_hunk": "@@ -3410,10 +3419,21 @@ bool ProcessNewBlock(const CChainParams& chainparams, const std::shared_ptr<cons\n \n         LOCK(cs_main);\n \n-        if (ret) {\n+        if (!ret) {\n+            // Mark the block as invalid if we recognize it in mapBlockIndex.\n+            // This doesn't happen within CheckBlock so we have to include a call\n+            // here. It *does* happen within AcceptBlock below.\n+            BlockMap::iterator it = mapBlockIndex.find(pblock->GetHash());\n+\n+            // Duplicate call to CorruptionPossible() here just to be careful.",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 88,
    "commit_id": "29bd4800ceab42f8b798869a2fb3e7f8de171738",
    "original_commit_id": "6af17e40890651e5e5f5968a1a131c6a48ce998c",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"Do the proper InvalidateBlock bookkeeping for DoSy blocks\"\r\n\r\nDuplicating the CorruptionPossible check here seems unnecessarily confusing and fragile to me, though perhaps there's an advantage I'm not seeing.\r\n\r\n",
    "created_at": "2018-03-06T21:24:21Z",
    "updated_at": "2018-05-21T21:05:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172664641",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172664641"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172664641"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172664641/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3428,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172672014",
    "pull_request_review_id": 101730305,
    "id": 172672014,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjY3MjAxNA==",
    "diff_hunk": "@@ -110,6 +112,16 @@ def create_transaction(prevtx, n, sig, value, scriptPubKey=CScript()):\n     tx.calc_sha256()\n     return tx\n \n+\n+def create_coinbase_with_bad_txin(*args, **kwargs):\n+    \"\"\"Return a coinbase CTransaction with an invalid txin.\"\"\"\n+    kwargs['txin'] = CTxIn(",
    "path": "test/functional/test_framework/blocktools.py",
    "position": null,
    "original_position": 23,
    "commit_id": "29bd4800ceab42f8b798869a2fb3e7f8de171738",
    "original_commit_id": "e2be3284d6a042e029c830d35e58c7c117d39602",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ah yep, that's better.",
    "created_at": "2018-03-06T21:49:42Z",
    "updated_at": "2018-05-21T21:05:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172672014",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172672014"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172672014"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172672014/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 118,
    "side": "RIGHT",
    "in_reply_to_id": 172658464
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172672089",
    "pull_request_review_id": 101730305,
    "id": 172672089,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjY3MjA4OQ==",
    "diff_hunk": "@@ -373,10 +373,13 @@ def sync_blocks(rpc_connections, *, wait=1, timeout=60):\n             if all(t[\"hash\"] == tips[0][\"hash\"] for t in tips):\n                 return\n             raise AssertionError(\"Block sync failed, mismatched block hashes:{}\".format(\n-                                 \"\".join(\"\\n  {!r}\".format(tip) for tip in tips)))\n+                \"\".join(\"\\n  Node {}: {!r}\".format(\n+                    rpc_connections[i].index, tip)\n+                        for i, tip in enumerate(tips))))",
    "path": "test/functional/test_framework/util.py",
    "position": null,
    "original_position": 7,
    "commit_id": "29bd4800ceab42f8b798869a2fb3e7f8de171738",
    "original_commit_id": "e2be3284d6a042e029c830d35e58c7c117d39602",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Agree, will do.",
    "created_at": "2018-03-06T21:49:58Z",
    "updated_at": "2018-05-21T21:05:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172672089",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172672089"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172672089"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172672089/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 378,
    "side": "RIGHT",
    "in_reply_to_id": 172657726
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172676965",
    "pull_request_review_id": 101730305,
    "id": 172676965,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjY3Njk2NQ==",
    "diff_hunk": "@@ -3410,10 +3419,21 @@ bool ProcessNewBlock(const CChainParams& chainparams, const std::shared_ptr<cons\n \n         LOCK(cs_main);\n \n-        if (ret) {\n+        if (!ret) {\n+            // Mark the block as invalid if we recognize it in mapBlockIndex.\n+            // This doesn't happen within CheckBlock so we have to include a call\n+            // here. It *does* happen within AcceptBlock below.\n+            BlockMap::iterator it = mapBlockIndex.find(pblock->GetHash());\n+\n+            // Duplicate call to CorruptionPossible() here just to be careful.",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 88,
    "commit_id": "29bd4800ceab42f8b798869a2fb3e7f8de171738",
    "original_commit_id": "6af17e40890651e5e5f5968a1a131c6a48ce998c",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Agree in hindsight that this was overly paranoid. Will remove.",
    "created_at": "2018-03-06T22:07:49Z",
    "updated_at": "2018-05-21T21:05:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172676965",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172676965"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172676965"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172676965/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3428,
    "side": "RIGHT",
    "in_reply_to_id": 172664641
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172916549",
    "pull_request_review_id": 102017134,
    "id": 172916549,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjkxNjU0OQ==",
    "diff_hunk": "@@ -110,6 +112,16 @@ def create_transaction(prevtx, n, sig, value, scriptPubKey=CScript()):\n     tx.calc_sha256()\n     return tx\n \n+\n+def create_coinbase_with_bad_txin(*args, **kwargs):\n+    \"\"\"Return a coinbase CTransaction with an invalid txin.\"\"\"\n+    kwargs['txin'] = CTxIn(",
    "path": "test/functional/test_framework/blocktools.py",
    "position": null,
    "original_position": 23,
    "commit_id": "29bd4800ceab42f8b798869a2fb3e7f8de171738",
    "original_commit_id": "e2be3284d6a042e029c830d35e58c7c117d39602",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ah, Python 3.4 doesn't support this syntax (which is what we run on Travis). Will have to revert this.",
    "created_at": "2018-03-07T17:13:58Z",
    "updated_at": "2018-05-21T21:05:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172916549",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172916549"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172916549"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172916549/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 118,
    "side": "RIGHT",
    "in_reply_to_id": 172658464
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172942665",
    "pull_request_review_id": 102047409,
    "id": 172942665,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3Mjk0MjY2NQ==",
    "diff_hunk": "@@ -2727,7 +2741,6 @@ bool CChainState::InvalidateBlock(CValidationState& state, const CChainParams& c\n         it++;\n     }\n \n-    InvalidChainFound(pindex);",
    "path": "src/validation.cpp",
    "position": 66,
    "original_position": 79,
    "commit_id": "29bd4800ceab42f8b798869a2fb3e7f8de171738",
    "original_commit_id": "bdfe29e0431e779a91e5720a369faee4668c066e",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This now happens in the `InvalidBlockFound` call above.",
    "created_at": "2018-03-07T18:38:24Z",
    "updated_at": "2018-05-21T21:05:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172942665",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172942665"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172942665"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172942665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2804,
    "original_line": 2804,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/175240090",
    "pull_request_review_id": 104748002,
    "id": 175240090,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3NTI0MDA5MA==",
    "diff_hunk": "@@ -1277,14 +1277,27 @@ void static InvalidChainFound(CBlockIndex* pindexNew)\n     CheckForkWarningConditions();\n }\n \n+/**\n+ * Mark a single block as invalid, updating its status in `mapBlockIndex`.\n+ * Perform other index-related bookkeeping.\n+ *\n+ * See also: InvalidateBlock, which should be called instead of this if the\n+ * block being invalidated is on the active chain.\n+ */\n void CChainState::InvalidBlockFound(CBlockIndex *pindex, const CValidationState &state) {\n-    if (!state.CorruptionPossible()) {\n-        pindex->nStatus |= BLOCK_FAILED_VALID;\n-        g_failed_blocks.insert(pindex);\n-        setDirtyBlockIndex.insert(pindex);\n-        setBlockIndexCandidates.erase(pindex);\n-        InvalidChainFound(pindex);\n+    AssertLockHeld(cs_main);\n+\n+    if (state.CorruptionPossible()) {\n+        LogPrintf(\"%s: can't be called when corruption is possible (invalid block=%s)\",",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 21,
    "commit_id": "29bd4800ceab42f8b798869a2fb3e7f8de171738",
    "original_commit_id": "a12ce0dde462911bb702070d31ed28ba32353a05",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why log this unconditionally? I think it may be trivial to cause someone's logfile to be filled with these.",
    "created_at": "2018-03-17T00:17:12Z",
    "updated_at": "2018-05-21T21:05:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r175240090",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/175240090"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r175240090"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/175240090/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1290,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/176805311",
    "pull_request_review_id": 106579382,
    "id": 176805311,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3NjgwNTMxMQ==",
    "diff_hunk": "@@ -1277,14 +1277,27 @@ void static InvalidChainFound(CBlockIndex* pindexNew)\n     CheckForkWarningConditions();\n }\n \n+/**\n+ * Mark a single block as invalid, updating its status in `mapBlockIndex`.\n+ * Perform other index-related bookkeeping.\n+ *\n+ * See also: InvalidateBlock, which should be called instead of this if the\n+ * block being invalidated is on the active chain.\n+ */\n void CChainState::InvalidBlockFound(CBlockIndex *pindex, const CValidationState &state) {\n-    if (!state.CorruptionPossible()) {\n-        pindex->nStatus |= BLOCK_FAILED_VALID;\n-        g_failed_blocks.insert(pindex);\n-        setDirtyBlockIndex.insert(pindex);\n-        setBlockIndexCandidates.erase(pindex);\n-        InvalidChainFound(pindex);\n+    AssertLockHeld(cs_main);\n+\n+    if (state.CorruptionPossible()) {\n+        LogPrintf(\"%s: can't be called when corruption is possible (invalid block=%s)\",",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 21,
    "commit_id": "29bd4800ceab42f8b798869a2fb3e7f8de171738",
    "original_commit_id": "a12ce0dde462911bb702070d31ed28ba32353a05",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yep, that's a good point. I'll change this into a comment.",
    "created_at": "2018-03-23T17:15:55Z",
    "updated_at": "2018-05-21T21:05:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r176805311",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/176805311"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r176805311"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/176805311/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1290,
    "side": "RIGHT",
    "in_reply_to_id": 175240090
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/187966554",
    "pull_request_review_id": 119849991,
    "id": 187966554,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4Nzk2NjU1NA==",
    "diff_hunk": "@@ -2724,6 +2736,11 @@ bool PreciousBlock(CValidationState& state, const CChainParams& params, CBlockIn\n     return g_chainstate.PreciousBlock(state, params, pindex);\n }\n \n+/**",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 53,
    "commit_id": "29bd4800ceab42f8b798869a2fb3e7f8de171738",
    "original_commit_id": "16d75a01b91ecf5f4d9c682a982a5b67b4791f6b",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The usual convention for method documentation in this project is to add the comment in the class definition, not above the implementation. This makes it easier to read the API documentation in one place when looking at the class.\r\nThat said, as both are in the `.cpp` file for this class I don't think that's much of an issue here.",
    "created_at": "2018-05-14T14:09:39Z",
    "updated_at": "2018-05-21T21:05:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r187966554",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/187966554"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r187966554"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/187966554/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2762,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189713887",
    "pull_request_review_id": 121947332,
    "id": 189713887,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4OTcxMzg4Nw==",
    "diff_hunk": "@@ -2724,6 +2736,11 @@ bool PreciousBlock(CValidationState& state, const CChainParams& params, CBlockIn\n     return g_chainstate.PreciousBlock(state, params, pindex);\n }\n \n+/**",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 53,
    "commit_id": "29bd4800ceab42f8b798869a2fb3e7f8de171738",
    "original_commit_id": "16d75a01b91ecf5f4d9c682a982a5b67b4791f6b",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed, thanks.",
    "created_at": "2018-05-21T21:05:38Z",
    "updated_at": "2018-05-21T21:05:38Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r189713887",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189713887"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r189713887"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189713887/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2762,
    "side": "RIGHT",
    "in_reply_to_id": 187966554
  }
]