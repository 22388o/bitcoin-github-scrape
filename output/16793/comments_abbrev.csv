MarcoFalke,2019-09-03 14:35:21,"Tend to NACK, as this seems like a layer violation",https://github.com/bitcoin/bitcoin/pull/16793#issuecomment-527486808,527486808,
promag,2019-09-03 14:48:07,"@MarcoFalke I don't understand why, this change makes `NotifyHeaderTip` return whether it's IBD. Note that `NotifyHeaderTip` already sends it in the notification.",https://github.com/bitcoin/bitcoin/pull/16793#issuecomment-527492350,527492350,
TheBlueMatt,2019-09-03 15:10:28,"NACK as-is, but IsInitialBlockDownload() doesn't need cs_main anyway (it takes it itself if it needs it, and has an atomic cache first), so it looks like you should be able to just drop the cs_mains here wholesale with no other changes.",https://github.com/bitcoin/bitcoin/pull/16793#issuecomment-527502550,527502550,
MarcoFalke,2019-09-03 15:11:53,the lock is needed for `g_chainstate`,https://github.com/bitcoin/bitcoin/pull/16793#issuecomment-527503196,527503196,
TheBlueMatt,2019-09-03 20:31:08,"Huh? g_chainstate is set during init (pre-threading) and never edited after. No reason it would need cs_main, either?",https://github.com/bitcoin/bitcoin/pull/16793#issuecomment-527627150,527627150,
MarcoFalke,2019-09-03 20:38:19,I figured that would change with assumeutxo? Maybe @jamesob knows,https://github.com/bitcoin/bitcoin/pull/16793#issuecomment-527629717,527629717,
jamesob,2019-09-03 20:42:40,"Later on `g_chainstate` (or `ChainstateActive()`) will be covered by some lock (since it may be swapped out during runtime), but probably not cs_main. I think for now we should be able to do as @TheBlueMatt and just drop the lock acquisition.",https://github.com/bitcoin/bitcoin/pull/16793#issuecomment-527631357,527631357,
jamesob,2019-09-03 20:44:11,...though don't we need cs_main to safely use `ppindex`?,https://github.com/bitcoin/bitcoin/pull/16793#issuecomment-527631968,527631968,
MarcoFalke,2019-09-03 20:45:16,Not for the members that are read (`nHeight` et al),https://github.com/bitcoin/bitcoin/pull/16793#issuecomment-527632351,527632351,
MarcoFalke,2019-09-03 20:47:04,https://github.com/bitcoin/bitcoin/pull/15615#discussion_r266254817,https://github.com/bitcoin/bitcoin/pull/16793#issuecomment-527633044,527633044,
promag,2019-09-05 12:12:01,@MarcoFalke why are you linking that comment?,https://github.com/bitcoin/bitcoin/pull/16793#issuecomment-528334232,528334232,
MarcoFalke,2019-09-05 17:31:49,"cs_main might be needed for `pindexBestHeader`, but that is no longer in the current code. So, indeed, you can just remove cs_main here.",https://github.com/bitcoin/bitcoin/pull/16793#issuecomment-528488894,528488894,
promag,2019-09-05 23:40:33,Done.,https://github.com/bitcoin/bitcoin/pull/16793#issuecomment-528647770,528647770,
