laanwj,2018-01-18T18:49:17Z,"IMO, `-walletdir` should be relative to datadir if a relative path is provided. This is the case with many other path options. Isn't this the case here?  \n\nI do completely agree that arguments to daemons should never be relative to the *current* directory. ",https://github.com/bitcoin/bitcoin/pull/12220#issuecomment-358744075,358744075,
ryanofsky,2018-01-18T18:51:30Z,"> IMO, -walletdir should be relative to datadir if a relative path is provided. This is the case with many other path options. Isn't this the case here?\n\nI agree and I thought this was the case but it turns out it not to be: https://github.com/bitcoin/bitcoin/pull/12166#discussion_r161096222. It could be changed, but @jnewbery and @MeshCollider pointed out this would be treating -walletdir inc",https://github.com/bitcoin/bitcoin/pull/12220#issuecomment-358744699,358744699,
meshcollider,2018-01-18T19:05:14Z,Note that if the wallet directory doesnt exist an error will be given anyway so the risk of accidently using a different directory is minimised,https://github.com/bitcoin/bitcoin/pull/12220#issuecomment-358748797,358748797,
jnewbery,2018-01-18T19:55:06Z,"As noted here: https://github.com/bitcoin/bitcoin/pull/12166#discussion_r161617359, I don't have a strong preference on this if it's changed before v0.16.\n\nI don't think we should change this after v0.16 branches.",https://github.com/bitcoin/bitcoin/pull/12220#issuecomment-358762860,358762860,
laanwj,2018-01-18T20:00:37Z,">  this would be treating -walletdir inconsistently from -datadir.\n\nThat's true. I'm ok with it just failing with relative paths, too.",https://github.com/bitcoin/bitcoin/pull/12220#issuecomment-358764430,358764430,
MarcoFalke,2018-01-18T20:08:23Z,"Concept ACK. Being more strict seems safer, as explained in OP.",https://github.com/bitcoin/bitcoin/pull/12220#issuecomment-358766509,358766509,
jnewbery,2018-01-18T20:11:04Z,"Release notes should be updated. Assuming #12166 is merged, the change should be:\n\ns/can be an absolute path or a relative path (relative to the current working directory)/must be an absolute path/",https://github.com/bitcoin/bitcoin/pull/12220#issuecomment-358767212,358767212,
ryanofsky,2018-01-18T20:19:48Z,"Rebased 2214a15d3eb5fd65f7ecb4c83e436b0b8c104305 -> b84b0ddd21b20857417b6e120456dac94331bcc3 ([pr/wdabs.1](https://github.com/ryanofsky/bitcoin/commits/pr/wdabs.1) -> [pr/wdabs.2](https://github.com/ryanofsky/bitcoin/commits/pr/wdabs.2)). Only change is release notes update.\n",https://github.com/bitcoin/bitcoin/pull/12220#issuecomment-358769517,358769517,
jnewbery,2018-01-18T21:20:59Z,"Tested ACK ec527c6c88146d5b36de38a1fcebe4f6ea72bd1b modulo @MarcoFalke's comments.\n\nYou can probably remove the __RFC__ since it seems like people want this to be merged for v0.16",https://github.com/bitcoin/bitcoin/pull/12220#issuecomment-358785407,358785407,
MarcoFalke,2018-01-18T21:49:23Z,Will test after squash,https://github.com/bitcoin/bitcoin/pull/12220#issuecomment-358792905,358792905,
jnewbery,2018-01-19T01:47:25Z,tested reACK ec527c6c88146d5b36de38a1fcebe4f6ea72bd1b,https://github.com/bitcoin/bitcoin/pull/12220#issuecomment-358841458,358841458,
jonasschnelli,2018-01-19T07:01:16Z,utACK ec527c6c88146d5b36de38a1fcebe4f6ea72bd1b,https://github.com/bitcoin/bitcoin/pull/12220#issuecomment-358883337,358883337,
laanwj,2018-01-19T16:46:03Z,"utACK ec527c6\n\nI'm going forward an merging this, @jnewbery's suggestion makes sense but is no reason to hold this up with so many utACKs of the current state, it can be switched around later.",https://github.com/bitcoin/bitcoin/pull/12220#issuecomment-359022937,359022937,
jnewbery,2018-01-19T18:03:33Z,">  @jnewbery's suggestion makes sense\n\nAgree that this should be merged without changing the order. This was just a suggestion - I don't even think it *needs* to be changed later.",https://github.com/bitcoin/bitcoin/pull/12220#issuecomment-359043879,359043879,
MarcoFalke,2018-01-19T18:26:12Z,"```\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nutACK ec527c6c88146d5b36de38a1fcebe4f6ea72bd1b\n-----BEGIN PGP SIGNATURE-----\n\niQIcBAEBCgAGBQJaYjgpAAoJENLqSFDnUoslY6cP/jklOQrp19+pqj9yBkCRdLAX\nLQAGiee3vtHgam//akHAnhz3o0uRir8r5IglXAGOxNL7au3slhNN7SCLUgP34VwE\njRirwAjjZZx8hpmRoCtxc6XOx2jNNgSLwUbT1dn96NHk78fxE6MJHLAZVaHCHTlt\nUnTvrHMBnoB/Smd0YyVMmKCfg/RP7bDqtHPl+Bh0dly/KKmjckzNLn",https://github.com/bitcoin/bitcoin/pull/12220#issuecomment-359049485,359049485,
MarcoFalke,2018-01-18T20:34:35Z,"Any reason this is not in AppInitMain instead? I am asking, because I don't see the warning when using the gui.",https://github.com/bitcoin/bitcoin/pull/12220#discussion_r162461684,162461684,src/bitcoind.cpp
MarcoFalke,2018-01-18T20:37:29Z,Nit: Could remove call to `fs::system_complete` in `GetWalletDir`?,https://github.com/bitcoin/bitcoin/pull/12220#discussion_r162462378,162462378,src/wallet/init.cpp
ryanofsky,2018-01-18T21:20:28Z,"> Any reason this is not in AppInitMain instead? I am asking, because I don't see the warning when using the gui.\n\nNo reason, and this is a good thought. Moved in 46c40bfe2dbfc4ea05258c9b90273ed28cdc3278\n\n",https://github.com/bitcoin/bitcoin/pull/12220#discussion_r162472696,162472696,src/bitcoind.cpp
ryanofsky,2018-01-18T21:21:27Z,"> Nit: Could remove call to fs::system_complete in GetWalletDir?\n\nI'm not sure it was necessary to begin with, but now removed in 46c40bfe2dbfc4ea05258c9b90273ed28cdc3278.\n\n",https://github.com/bitcoin/bitcoin/pull/12220#discussion_r162472945,162472945,src/wallet/init.cpp
jnewbery,2018-01-19T01:45:20Z,"It makes slightly more sense to me to have this as the first check, ie we should error out immediately if the user has provided a relative path, rather than first checking whether it exists and is a directory. Is there any particular reason that you've placed this as the last check?",https://github.com/bitcoin/bitcoin/pull/12220#discussion_r162519705,162519705,src/wallet/init.cpp
