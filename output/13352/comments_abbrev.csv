laanwj,2018-05-31T05:47:04Z,"I'm divided about this. Though obviously, if this causes frequent travis errors, it's the pragmatic short thing to do on the short term.\nutACK faac7a2db4f9f511c901cb1b4d4e7c599b92884f\n\nIt's more this that made me question:\n\n> A more robust solution would be to read from the debug log. See #13006\n\nShouldn't the race in the network code be fixed instead?",https://github.com/bitcoin/bitcoin/pull/13352#issuecomment-393411794,393411794,
MarcoFalke,2018-05-31T09:19:48Z,"> Shouldn't the race in the network code be fixed instead?\n\nImo, we shouldn't be nice to peers that send us invalid messages. The reject messages are only best-effort and not a guarantee.",https://github.com/bitcoin/bitcoin/pull/13352#issuecomment-393469605,393469605,
laanwj,2018-05-31T20:53:30Z,"> Imo, we shouldn't be nice to peers that send us invalid messages. The reject messages are only best-effort and not a guarantee.\n\nI agree on that, but the race itself is somewhat scary, I'm not sure it's easy to tell whether this doesn't affect anything else.",https://github.com/bitcoin/bitcoin/pull/13352#issuecomment-393676366,393676366,
jnewbery,2018-05-31T21:14:40Z,"I agree with @laanwj that the underlying cause should be investigated.\n\nAsserting on the reason for a transaction being rejected is a useful regression test. I don't think we should remove this check without a replacement like #13006 ",https://github.com/bitcoin/bitcoin/pull/13352#issuecomment-393682816,393682816,
MarcoFalke,2018-05-31T22:54:56Z,"> I agree with @laanwj that the underlying cause should be investigated.\n\nI am not familiar with net, but a blind guess would be that we tear down the node (and message buffer) because of the disconnect without flushing it first. If this was the case, I doubt this wouldn't be intended behaviour. I am not aware of any guarantees in the protocol that we give to peers that are soon-to-be-disconne",https://github.com/bitcoin/bitcoin/pull/13352#issuecomment-393708040,393708040,
laanwj,2018-06-01T11:57:12Z,"I'm going to merge this to fix the travis failure, which seems to be really frequent.",https://github.com/bitcoin/bitcoin/pull/13352#issuecomment-393858799,393858799,
jnewbery,2018-06-01T23:51:45Z,"> Note that the test were never in place until a few days ago.\n\nAh. I hadn't realised that. utACK faac7a2db4f9f511c901cb1b4d4e7c599b92884f",https://github.com/bitcoin/bitcoin/pull/13352#issuecomment-394037539,394037539,
