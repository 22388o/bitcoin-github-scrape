[
  {
    "sha": "c6844c901ac349186ddbc1a17990dc0b068efb9a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjNjg0NGM5MDFhYzM0OTE4NmRkYmMxYTE3OTkwZGMwYjA2OGVmYjlh",
    "commit": {
      "author": {
        "name": "Pavel Jan\u00edk",
        "email": "Pavel@Janik.cz",
        "date": "2015-07-23T20:48:07Z"
      },
      "committer": {
        "name": "Pavel Jan\u00edk",
        "email": "Pavel@Janik.cz",
        "date": "2015-07-23T20:48:07Z"
      },
      "message": "Add removeaddress RPC call (remove watch-only address)",
      "tree": {
        "sha": "ece5a39455daab439f4d294bd73dcf1500abaad8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ece5a39455daab439f4d294bd73dcf1500abaad8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c6844c901ac349186ddbc1a17990dc0b068efb9a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c6844c901ac349186ddbc1a17990dc0b068efb9a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c6844c901ac349186ddbc1a17990dc0b068efb9a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c6844c901ac349186ddbc1a17990dc0b068efb9a/comments",
    "author": {
      "login": "paveljanik",
      "id": 6848764,
      "node_id": "MDQ6VXNlcjY4NDg3NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6848764?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paveljanik",
      "html_url": "https://github.com/paveljanik",
      "followers_url": "https://api.github.com/users/paveljanik/followers",
      "following_url": "https://api.github.com/users/paveljanik/following{/other_user}",
      "gists_url": "https://api.github.com/users/paveljanik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paveljanik/subscriptions",
      "organizations_url": "https://api.github.com/users/paveljanik/orgs",
      "repos_url": "https://api.github.com/users/paveljanik/repos",
      "events_url": "https://api.github.com/users/paveljanik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paveljanik/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "paveljanik",
      "id": 6848764,
      "node_id": "MDQ6VXNlcjY4NDg3NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6848764?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paveljanik",
      "html_url": "https://github.com/paveljanik",
      "followers_url": "https://api.github.com/users/paveljanik/followers",
      "following_url": "https://api.github.com/users/paveljanik/following{/other_user}",
      "gists_url": "https://api.github.com/users/paveljanik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paveljanik/subscriptions",
      "organizations_url": "https://api.github.com/users/paveljanik/orgs",
      "repos_url": "https://api.github.com/users/paveljanik/repos",
      "events_url": "https://api.github.com/users/paveljanik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paveljanik/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d2464dfee928cdd4194516e9bc8b541c22972ab9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d2464dfee928cdd4194516e9bc8b541c22972ab9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d2464dfee928cdd4194516e9bc8b541c22972ab9"
      }
    ],
    "stats": {
      "total": 48,
      "additions": 48,
      "deletions": 0
    },
    "files": [
      {
        "sha": "377b4317446bd59a3caf4de6ca0c3c77a87fc2ce",
        "filename": "src/rpcserver.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c6844c901ac349186ddbc1a17990dc0b068efb9a/src/rpcserver.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c6844c901ac349186ddbc1a17990dc0b068efb9a/src/rpcserver.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcserver.cpp?ref=c6844c901ac349186ddbc1a17990dc0b068efb9a",
        "patch": "@@ -370,6 +370,7 @@ static const CRPCCommand vRPCCommands[] =\n     { \"wallet\",             \"listunspent\",            &listunspent,            false },\n     { \"wallet\",             \"lockunspent\",            &lockunspent,            true  },\n     { \"wallet\",             \"move\",                   &movecmd,                false },\n+    { \"wallet\",             \"removeaddress\",          &removeaddress,          true  },\n     { \"wallet\",             \"sendfrom\",               &sendfrom,               false },\n     { \"wallet\",             \"sendmany\",               &sendmany,               false },\n     { \"wallet\",             \"sendtoaddress\",          &sendtoaddress,          false },"
      },
      {
        "sha": "bcd0632deae06b5887a007c0981b7be0e9d3328e",
        "filename": "src/rpcserver.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c6844c901ac349186ddbc1a17990dc0b068efb9a/src/rpcserver.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c6844c901ac349186ddbc1a17990dc0b068efb9a/src/rpcserver.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcserver.h?ref=c6844c901ac349186ddbc1a17990dc0b068efb9a",
        "patch": "@@ -161,6 +161,7 @@ extern UniValue clearbanned(const UniValue& params, bool fHelp);\n extern UniValue dumpprivkey(const UniValue& params, bool fHelp); // in rpcdump.cpp\n extern UniValue importprivkey(const UniValue& params, bool fHelp);\n extern UniValue importaddress(const UniValue& params, bool fHelp);\n+extern UniValue removeaddress(const UniValue& params, bool fHelp);\n extern UniValue dumpwallet(const UniValue& params, bool fHelp);\n extern UniValue importwallet(const UniValue& params, bool fHelp);\n "
      },
      {
        "sha": "cfa40fd57f3a58cea938a1bc7d6a5dae4715ba55",
        "filename": "src/wallet/rpcdump.cpp",
        "status": "modified",
        "additions": 46,
        "deletions": 0,
        "changes": 46,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c6844c901ac349186ddbc1a17990dc0b068efb9a/src/wallet/rpcdump.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c6844c901ac349186ddbc1a17990dc0b068efb9a/src/wallet/rpcdump.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcdump.cpp?ref=c6844c901ac349186ddbc1a17990dc0b068efb9a",
        "patch": "@@ -222,6 +222,52 @@ UniValue importaddress(const UniValue& params, bool fHelp)\n     return NullUniValue;\n }\n \n+UniValue removeaddress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"removeaddress \\\"address\\\"\\n\"\n+            \"\\nRemoves watch-only address or script (in hex) added by importaddress.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"address\\\"          (string, required) The address\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nRemove watch-only address\\n\"\n+            + HelpExampleCli(\"removeaddress\", \"\\\"myaddress\\\"\") +\n+            \"\\nAs a JSON-RPC call\\n\"\n+            + HelpExampleRpc(\"removeaddress\", \"\\\"myaddress\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CScript script;\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (address.IsValid()) {\n+        script = GetScriptForDestination(address.Get());\n+    } else if (IsHex(params[0].get_str())) {\n+        std::vector<unsigned char> data(ParseHex(params[0].get_str()));\n+        script = CScript(data.begin(), data.end());\n+    } else {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address or script\");\n+    }\n+\n+    if (::IsMine(*pwalletMain, script) == ISMINE_SPENDABLE)\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet contains the private key for this address or script - can't remove it\");\n+\n+    if (!pwalletMain->HaveWatchOnly(script))\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet does not contain this address or script\");\n+\n+    pwalletMain->MarkDirty();\n+\n+    if (!pwalletMain->RemoveWatchOnly(script))\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Error removing address from wallet\");\n+\n+    return NullUniValue;\n+}\n+\n UniValue importwallet(const UniValue& params, bool fHelp)\n {\n     if (!EnsureWalletIsAvailable(fHelp))"
      }
    ]
  },
  {
    "sha": "621a12233a0c56a6972e5079a2750426b3eee23b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2MjFhMTIyMzNhMGM1NmE2OTcyZTUwNzlhMjc1MDQyNmIzZWVlMjNi",
    "commit": {
      "author": {
        "name": "Pavel Jan\u00edk",
        "email": "Pavel@Janik.cz",
        "date": "2015-07-23T20:48:34Z"
      },
      "committer": {
        "name": "Pavel Jan\u00edk",
        "email": "Pavel@Janik.cz",
        "date": "2015-07-23T20:48:34Z"
      },
      "message": "Add importaddress and removeaddress tests to wallet tests",
      "tree": {
        "sha": "5afee0d3d66e707aa46b927a60cdd7996f6712f6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5afee0d3d66e707aa46b927a60cdd7996f6712f6"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/621a12233a0c56a6972e5079a2750426b3eee23b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/621a12233a0c56a6972e5079a2750426b3eee23b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/621a12233a0c56a6972e5079a2750426b3eee23b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/621a12233a0c56a6972e5079a2750426b3eee23b/comments",
    "author": {
      "login": "paveljanik",
      "id": 6848764,
      "node_id": "MDQ6VXNlcjY4NDg3NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6848764?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paveljanik",
      "html_url": "https://github.com/paveljanik",
      "followers_url": "https://api.github.com/users/paveljanik/followers",
      "following_url": "https://api.github.com/users/paveljanik/following{/other_user}",
      "gists_url": "https://api.github.com/users/paveljanik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paveljanik/subscriptions",
      "organizations_url": "https://api.github.com/users/paveljanik/orgs",
      "repos_url": "https://api.github.com/users/paveljanik/repos",
      "events_url": "https://api.github.com/users/paveljanik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paveljanik/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "paveljanik",
      "id": 6848764,
      "node_id": "MDQ6VXNlcjY4NDg3NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6848764?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paveljanik",
      "html_url": "https://github.com/paveljanik",
      "followers_url": "https://api.github.com/users/paveljanik/followers",
      "following_url": "https://api.github.com/users/paveljanik/following{/other_user}",
      "gists_url": "https://api.github.com/users/paveljanik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paveljanik/subscriptions",
      "organizations_url": "https://api.github.com/users/paveljanik/orgs",
      "repos_url": "https://api.github.com/users/paveljanik/repos",
      "events_url": "https://api.github.com/users/paveljanik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paveljanik/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c6844c901ac349186ddbc1a17990dc0b068efb9a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c6844c901ac349186ddbc1a17990dc0b068efb9a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c6844c901ac349186ddbc1a17990dc0b068efb9a"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "8ebb27a51a17daf1ff9f19668efb11b7ad03d0ad",
        "filename": "src/test/rpc_wallet_tests.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/621a12233a0c56a6972e5079a2750426b3eee23b/src/test/rpc_wallet_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/621a12233a0c56a6972e5079a2750426b3eee23b/src/test/rpc_wallet_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/rpc_wallet_tests.cpp?ref=621a12233a0c56a6972e5079a2750426b3eee23b",
        "patch": "@@ -76,7 +76,7 @@ BOOST_AUTO_TEST_CASE(rpc_wallet)\n     UniValue retValue;\n     string strAccount = \"walletDemoAccount\";\n     string strPurpose = \"receive\";\n-    BOOST_CHECK_NO_THROW({ /*Initialize Wallet with an account */\n+    BOOST_CHECK_NO_THROW({ /* Initialize Wallet with an account */\n         CWalletDB walletdb(pwalletMain->strWalletFile);\n         CAccount account;\n         account.vchPubKey = demoPubkey;"
      }
    ]
  }
]