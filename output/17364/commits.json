[
  {
    "sha": "3c84deebaa311155ccc7565d09525041eed9747c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozYzg0ZGVlYmFhMzExMTU1Y2NjNzU2NWQwOTUyNTA0MWVlZDk3NDdj",
    "commit": {
      "author": {
        "name": "Aaron Clauson",
        "email": "aaron@sipsorcery.com",
        "date": "2019-11-06T22:02:16Z"
      },
      "committer": {
        "name": "Aaron Clauson",
        "email": "aaron@sipsorcery.com",
        "date": "2019-11-06T22:02:16Z"
      },
      "message": "Updated appveyor config:\n - Update build image from Visual Studio 2017 to Visual Studio 2019.\n - Updated Qt static library from Qt5.9.7 to Qt5.9.8.\n - Added commands to update vcpkg port files (this does not update already installed packages).\n - Updated vcpkg package list as per #17309.\n - Removed commands setting common project file options. Now done via common.init.vcxproj include.\n - Changed msbuild verbosity from normal to quiet. Normal rights a LOT of logs and impacts appveyor job duration.\nUpdated msvc project configs:\n - Updated platform toolset from v141 to v142.\n - Updated Qt static library from Qt5.9.7 to Qt5.9.8.\n - Added ignore for linker warning building bitcoin-qt program.\n - Added missing util/str.cpp class file to test_bitcoin project file.",
      "tree": {
        "sha": "f7cd7311ac976be04354f90eb79d950a8e35e365",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f7cd7311ac976be04354f90eb79d950a8e35e365"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3c84deebaa311155ccc7565d09525041eed9747c",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEnTzIanL4SUNC6l/RCkG9w/T6/xwFAl3DQvIACgkQCkG9w/T6\n/xzr8Q/8DmQPihWhfy99kKiWfPXyKCTGuG/2MoLJP7rzb4VeGpmQVHmR0kVin0l/\nTxfqQKvF7/75g4hLMdnwTYHLZONKFH9jNUckRtXXZ/vw30moZvZNtJMaOsw9EE53\nwBW3FIUfu290BOMtFtZoqXVpsylx47FkxdgKxwZWSdGzp002CP4Kw7OpM5NfBy8J\nNQziTAf6grcXmF0pRccYXijG634plUwNtFr9kyZjoLbfRabWcDPW87i+Yey19IJj\nWjbsxGaU6hQy4VqJivOcRRJ5IkNzhh1qfAuRfgpw6961mz19F+vkGGAdtSV2HhzW\n2ehMmCJpZIbSJVQQNg0D+7W4qP6HvIqmcI2chZzkY1wW0Z2rRegKpwct8Nz9XccQ\nhDnodI9DvLeG7Zok0fi/OtuMk8L8IVVIBTginxmoxMl9zuh9n1sz2UvYHxEA1yw7\nwRbzPCP+i/GbYO914mf62VhFkdvyg8+c+KfhM8SN0G03HeeOq6Ny1aCjibZ4fEUi\nip0x3kvGtSc0hR2xL9UmL+Za0KGrBSv1h8lmySUzg4fhobabTV7ZMb5R79dg6Vvs\nM/UOvIw6tlN4fBisbp7+yK63zXV9Wqe1O1FlILOpsP64vxWCIEvUWsFU0lsKLGb5\nIMpMubPqcHqc7WJfqBNg3E6DyOWNdQS18d+PWiKgn9vFcajLFFY=\n=aOvX\n-----END PGP SIGNATURE-----",
        "payload": "tree f7cd7311ac976be04354f90eb79d950a8e35e365\nparent 7967104aee055476107dc17265cefc4ae4e75378\nauthor Aaron Clauson <aaron@sipsorcery.com> 1573077736 +0000\ncommitter Aaron Clauson <aaron@sipsorcery.com> 1573077736 +0000\n\nUpdated appveyor config:\n - Update build image from Visual Studio 2017 to Visual Studio 2019.\n - Updated Qt static library from Qt5.9.7 to Qt5.9.8.\n - Added commands to update vcpkg port files (this does not update already installed packages).\n - Updated vcpkg package list as per #17309.\n - Removed commands setting common project file options. Now done via common.init.vcxproj include.\n - Changed msbuild verbosity from normal to quiet. Normal rights a LOT of logs and impacts appveyor job duration.\nUpdated msvc project configs:\n - Updated platform toolset from v141 to v142.\n - Updated Qt static library from Qt5.9.7 to Qt5.9.8.\n - Added ignore for linker warning building bitcoin-qt program.\n - Added missing util/str.cpp class file to test_bitcoin project file.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3c84deebaa311155ccc7565d09525041eed9747c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3c84deebaa311155ccc7565d09525041eed9747c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3c84deebaa311155ccc7565d09525041eed9747c/comments",
    "author": {
      "login": "sipsorcery",
      "id": 197660,
      "node_id": "MDQ6VXNlcjE5NzY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/197660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipsorcery",
      "html_url": "https://github.com/sipsorcery",
      "followers_url": "https://api.github.com/users/sipsorcery/followers",
      "following_url": "https://api.github.com/users/sipsorcery/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipsorcery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipsorcery/subscriptions",
      "organizations_url": "https://api.github.com/users/sipsorcery/orgs",
      "repos_url": "https://api.github.com/users/sipsorcery/repos",
      "events_url": "https://api.github.com/users/sipsorcery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipsorcery/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipsorcery",
      "id": 197660,
      "node_id": "MDQ6VXNlcjE5NzY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/197660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipsorcery",
      "html_url": "https://github.com/sipsorcery",
      "followers_url": "https://api.github.com/users/sipsorcery/followers",
      "following_url": "https://api.github.com/users/sipsorcery/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipsorcery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipsorcery/subscriptions",
      "organizations_url": "https://api.github.com/users/sipsorcery/orgs",
      "repos_url": "https://api.github.com/users/sipsorcery/repos",
      "events_url": "https://api.github.com/users/sipsorcery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipsorcery/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7967104aee055476107dc17265cefc4ae4e75378",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7967104aee055476107dc17265cefc4ae4e75378",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7967104aee055476107dc17265cefc4ae4e75378"
      }
    ],
    "stats": {
      "total": 64,
      "additions": 43,
      "deletions": 21
    },
    "files": [
      {
        "sha": "8402dc22167292ee66f6640eab4cd45f2b1d1d30",
        "filename": ".appveyor.yml",
        "status": "modified",
        "additions": 37,
        "deletions": 18,
        "changes": 55,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3c84deebaa311155ccc7565d09525041eed9747c/.appveyor.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3c84deebaa311155ccc7565d09525041eed9747c/.appveyor.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/.appveyor.yml?ref=3c84deebaa311155ccc7565d09525041eed9747c",
        "patch": "@@ -1,31 +1,56 @@\n version: '{branch}.{build}'\n skip_tags: true\n-image: Visual Studio 2017\n+image: Visual Studio 2019\n configuration: Release\n platform: x64\n clone_depth: 5\n environment:\n   APPVEYOR_SAVE_CACHE_ON_ERROR: true\n   CLCACHE_SERVER: 1\n-  PACKAGES: berkeleydb boost-filesystem boost-signals2 boost-test libevent openssl rapidcheck zeromq double-conversion\n+  PACKAGES: berkeleydb boost-filesystem boost-multi-index boost-signals2 boost-test boost-thread libevent openssl rapidcheck zeromq double-conversion\n   PATH: 'C:\\Python37-x64;C:\\Python37-x64\\Scripts;%PATH%'\n   PYTHONUTF8: 1\n-  QT_DOWNLOAD_URL: 'https://github.com/sipsorcery/qt_win_binary/releases/download/v1.0/Qt5.9.7_ssl_x64_static_vs2017.zip'\n-  QT_DOWNLOAD_HASH: 'D4D35B8112302B67E5610A03421BB3E43FE13F14D9A5F637C22AE60DCEC0E0F5'\n-  QT_LOCAL_PATH: 'C:\\Qt5.9.7_ssl_x64_static_vs2017'\n+  QT_DOWNLOAD_URL: 'https://github.com/sipsorcery/qt_win_binary/releases/download/v1.4/Qt5.9.8_x64_static_vs2019.zip'\n+  QT_DOWNLOAD_HASH: 'f285cbb02bec3b3f3cc2621e3fa7d5edf0d6a66fa30c57859e583acda954ea80'\n+  QT_LOCAL_PATH: 'C:\\Qt5.9.8_x64_static_vs2019'\n+  VCPKG_INSTALL_PATH: 'C:\\tools\\vcpkg\\installed'\n cache:\n - C:\\tools\\vcpkg\\installed\n - C:\\Users\\appveyor\\clcache -> .appveyor.yml, build_msvc\\**, **\\Makefile.am, **\\*.vcxproj.in\n-- C:\\Qt5.9.7_ssl_x64_static_vs2017\n+- C:\\Qt5.9.8_x64_static_vs2019\n install:\n - cmd: pip install --quiet git+https://github.com/frerich/clcache.git@v4.2.0\n # Disable zmq test for now since python zmq library on Windows would cause Access violation sometimes.\n # - cmd: pip install zmq\n-- cmd: echo set(VCPKG_BUILD_TYPE release) >> C:\\tools\\vcpkg\\triplets\\%PLATFORM%-windows-static.cmake\n-- cmd: vcpkg remove --outdated --recurse\n-- cmd: vcpkg install --triplet %PLATFORM%-windows-static %PACKAGES% > NUL\n+# Powershell block below is to install the c++ dependencies via vcpkg. The pseudo code is:\n+# 1. If the vcpkg install directory exists assume dependencies are installed and do nothing. To\n+#    force a fresh install of the packages delete the job's appveyor cache.\n+# 2. Otherwise:\n+#    a. Update the vcpkg source (including port files) and build the vcpkg binary,\n+#    b. Install the required packages.\n+- ps: |\n+      cd c:\\tools\\vcpkg\n+      if(!(Test-Path -Path ($env:VCPKG_INSTALL_PATH))) {\n+          $env:GIT_REDIRECT_STDERR = '2>&1' # git is writing non-errors to STDERR when doing git pull. Send to STDOUT instead.\n+          Add-Content \"C:\\tools\\vcpkg\\triplets\\$env:PLATFORM-windows-static.cmake\" \"set(VCPKG_BUILD_TYPE release)\"\n+          git pull origin master\n+          .\\bootstrap-vcpkg.bat\n+          .\\vcpkg install --triplet $env:PLATFORM-windows-static $env:PACKAGES.split() > $null\n+      }\n+      else {\n+        Write-Host \"vcpkg packages already installed (to reinstall purge appveyor job's cache).\"\n+      }\n+      .\\vcpkg integrate install\n+      cd \"$env:APPVEYOR_BUILD_FOLDER\"\n before_build:\n - ps:  clcache -M 536870912\n+# Powershell block below is to download and extract the Qt static libraries. The pseudo code is:\n+# 1. If the Qt destination directory exists assume it is correct and do nothing. To\n+#    force a fresh install of the packages delete the job's appveyor cache.\n+# 2. Otherwise:\n+#    a. Download the zip file with the prebuilt Qt static libraries.\n+#    b. Check that the downloaded file matches the expected hash.\n+#    c. Extract the zip file to the specific destination path expected by the msbuild projects.\n - ps: |\n       if(!(Test-Path -Path ($env:QT_LOCAL_PATH))) {\n         Write-Host \"Downloading Qt binaries.\";\n@@ -44,17 +69,10 @@ before_build:\n          Write-Host \"Qt binaries already present.\";\n       }\n - cmd: python build_msvc\\msvc-autogen.py\n-- ps:  $files = (Get-ChildItem -Recurse | where {$_.extension -eq \".vcxproj\"}).FullName\n-- ps:  for (${i} = 0; ${i} -lt ${files}.length; ${i}++) {\n-           ${content} = (Get-Content ${files}[${i}]);\n-           ${content} = ${content}.Replace(\"</RuntimeLibrary>\", \"</RuntimeLibrary><DebugInformationFormat>None</DebugInformationFormat>\");\n-           ${content} = ${content}.Replace(\"<WholeProgramOptimization>true\", \"<WholeProgramOptimization>false\");\n-           Set-Content ${files}[${i}] ${content};\n-       }\n - ps:  Start-Process clcache-server\n - ps:  fsutil behavior set disablelastaccess 0 # Enable Access time feature on Windows (for clcache)\n build_script:\n-- cmd: msbuild /p:TrackFileAccess=false /p:CLToolExe=clcache.exe build_msvc\\bitcoin.sln /m /v:n /nologo\n+- cmd: msbuild /p:TrackFileAccess=false /p:CLToolExe=clcache.exe build_msvc\\bitcoin.sln /m /v:q /nologo\n after_build:\n - ps:  fsutil behavior set disablelastaccess 1 # Disable Access time feature on Windows (better performance)\n - ps:  clcache -z\n@@ -64,7 +82,8 @@ test_script:\n - cmd: src\\bench_bitcoin.exe -evals=1 -scaling=0 > NUL\n - ps:  python test\\util\\bitcoin-util-test.py\n - cmd: python test\\util\\rpcauth-test.py\n-- cmd: python test\\functional\\test_runner.py --ci --quiet --combinedlogslen=4000 --failfast\n+# Fee estimation test failing on appveyor with: WinError 10048] Only one usage of each socket address (protocol/network address/port) is normally permitted.\n+- cmd: python test\\functional\\test_runner.py --ci --quiet --combinedlogslen=4000 --failfast --exclude feature_fee_estimation\n artifacts:\n #- path: bitcoin-%APPVEYOR_BUILD_VERSION%.zip\n deploy: off"
      },
      {
        "sha": "dcfc1e1b33987e3fdf2a62583916b51bde31b3e5",
        "filename": "build_msvc/bitcoin-qt/bitcoin-qt.vcxproj",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3c84deebaa311155ccc7565d09525041eed9747c/build_msvc/bitcoin-qt/bitcoin-qt.vcxproj",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3c84deebaa311155ccc7565d09525041eed9747c/build_msvc/bitcoin-qt/bitcoin-qt.vcxproj",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build_msvc/bitcoin-qt/bitcoin-qt.vcxproj?ref=3c84deebaa311155ccc7565d09525041eed9747c",
        "patch": "@@ -56,6 +56,7 @@\n     </ClCompile>\n     <Link>\n       <AdditionalDependencies>$(QtReleaseLibraries);%(AdditionalDependencies)</AdditionalDependencies>\n+      <AdditionalOptions>/ignore:4206</AdditionalOptions>\n     </Link>\n     <ResourceCompile>\n       <AdditionalIncludeDirectories>..\\..\\src;</AdditionalIncludeDirectories>\n@@ -69,6 +70,7 @@\n     </ClCompile>\n     <Link>\n       <AdditionalDependencies>$(QtDebugLibraries);%(AdditionalDependencies)</AdditionalDependencies>\n+      <AdditionalOptions>/ignore:4206</AdditionalOptions>\n     </Link>\n     <ResourceCompile>\n       <AdditionalIncludeDirectories>..\\..\\src;</AdditionalIncludeDirectories>"
      },
      {
        "sha": "a04a38ff7c19064110e064d0e57a31e0c2c52005",
        "filename": "build_msvc/common.init.vcxproj",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3c84deebaa311155ccc7565d09525041eed9747c/build_msvc/common.init.vcxproj",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3c84deebaa311155ccc7565d09525041eed9747c/build_msvc/common.init.vcxproj",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build_msvc/common.init.vcxproj?ref=3c84deebaa311155ccc7565d09525041eed9747c",
        "patch": "@@ -39,7 +39,7 @@\n     <LinkIncremental>true</LinkIncremental>\n     <WholeProgramOptimization>false</WholeProgramOptimization>\n     <UseDebugLibraries>true</UseDebugLibraries>\n-    <PlatformToolset>v141</PlatformToolset>\n+    <PlatformToolset>v142</PlatformToolset>\n     <CharacterSet>Unicode</CharacterSet>\n     <OutDir>$(SolutionDir)$(Platform)\\$(Configuration)\\$(ProjectName)\\</OutDir>\n     <IntDir>$(Platform)\\$(Configuration)\\$(ProjectName)\\</IntDir>\n@@ -48,7 +48,7 @@\n     <LinkIncremental>false</LinkIncremental>\n     <WholeProgramOptimization>true</WholeProgramOptimization>\n     <UseDebugLibraries>false</UseDebugLibraries>\n-    <PlatformToolset>v141</PlatformToolset>\n+    <PlatformToolset>v142</PlatformToolset>\n     <CharacterSet>Unicode</CharacterSet>\n     <OutDir>$(SolutionDir)$(Platform)\\$(Configuration)\\$(ProjectName)\\</OutDir>\n     <IntDir>$(Platform)\\$(Configuration)\\$(ProjectName)\\</IntDir>"
      },
      {
        "sha": "42150a23103773a96de2f25f86de7ccb589e821e",
        "filename": "build_msvc/common.qt.init.vcxproj",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3c84deebaa311155ccc7565d09525041eed9747c/build_msvc/common.qt.init.vcxproj",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3c84deebaa311155ccc7565d09525041eed9747c/build_msvc/common.qt.init.vcxproj",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build_msvc/common.qt.init.vcxproj?ref=3c84deebaa311155ccc7565d09525041eed9747c",
        "patch": "@@ -2,7 +2,7 @@\n <Project xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\">\n \n   <PropertyGroup Label=\"QtGlobals\">\n-    <QtBaseDir>C:\\Qt5.9.7_ssl_x64_static_vs2017</QtBaseDir>\n+    <QtBaseDir>C:\\Qt5.9.8_x64_static_vs2019</QtBaseDir>\n     <QtPluginsLibraryDir>$(QtBaseDir)\\plugins</QtPluginsLibraryDir>\n     <QtLibraryDir>$(QtBaseDir)\\lib</QtLibraryDir>\n     <QtIncludeDir>$(QtBaseDir)\\include</QtIncludeDir>"
      },
      {
        "sha": "96df921e6a24de4aa8fd2cec1f7dbb162becdddb",
        "filename": "build_msvc/test_bitcoin/test_bitcoin.vcxproj",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3c84deebaa311155ccc7565d09525041eed9747c/build_msvc/test_bitcoin/test_bitcoin.vcxproj",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3c84deebaa311155ccc7565d09525041eed9747c/build_msvc/test_bitcoin/test_bitcoin.vcxproj",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build_msvc/test_bitcoin/test_bitcoin.vcxproj?ref=3c84deebaa311155ccc7565d09525041eed9747c",
        "patch": "@@ -17,6 +17,7 @@\n     <ClCompile Include=\"..\\..\\src\\test\\setup_common.cpp\" />\n     <ClCompile Include=\"..\\..\\src\\test\\main.cpp\" />\n     <ClCompile Include=\"..\\..\\src\\wallet\\test\\*_fixture.cpp\" />\n+    <ClCompile Include=\"..\\..\\src\\test\\util\\*.cpp\" />\n   </ItemGroup>\n   <ItemGroup>\n     <ProjectReference Include=\"..\\libbitcoinconsensus\\libbitcoinconsensus.vcxproj\">"
      }
    ]
  }
]