[
  {
    "sha": "63462c2b4bcd250402b040bc19f2ae39771a62f7",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2MzQ2MmMyYjRiY2QyNTA0MDJiMDQwYmMxOWYyYWUzOTc3MWE2MmY3",
    "commit": {
      "author": {
        "name": "whythat",
        "email": "yuri.zhykin@gmail.com",
        "date": "2016-09-02T09:38:04Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2016-09-16T09:28:48Z"
      },
      "message": "[qa] remove root test directory for RPC tests\n\nGithub-Pull: #8652\nRebased-From: 438e94dc330a37600ec1d86f2ba8502385b5262d c62cc4ec759a8487373f158b3cbb888efcdd753a",
      "tree": {
        "sha": "51d9dea55eab1a10141702e33bec85f5ff5d3ec4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/51d9dea55eab1a10141702e33bec85f5ff5d3ec4"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/63462c2b4bcd250402b040bc19f2ae39771a62f7",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/63462c2b4bcd250402b040bc19f2ae39771a62f7",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/63462c2b4bcd250402b040bc19f2ae39771a62f7",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/63462c2b4bcd250402b040bc19f2ae39771a62f7/comments",
    "author": null,
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4731623777abfe538190e72305b315b3c251b84e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4731623777abfe538190e72305b315b3c251b84e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4731623777abfe538190e72305b315b3c251b84e"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 7,
      "deletions": 4
    },
    "files": [
      {
        "sha": "306f31102b05796ce365f6e359a81e7335f53d06",
        "filename": "qa/rpc-tests/test_framework/test_framework.py",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/63462c2b4bcd250402b040bc19f2ae39771a62f7/qa/rpc-tests/test_framework/test_framework.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/63462c2b4bcd250402b040bc19f2ae39771a62f7/qa/rpc-tests/test_framework/test_framework.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/test_framework/test_framework.py?ref=63462c2b4bcd250402b040bc19f2ae39771a62f7",
        "patch": "@@ -123,7 +123,8 @@ def main(self):\n         self.add_options(parser)\n         (self.options, self.args) = parser.parse_args()\n \n-        self.options.tmpdir += '/' + str(self.options.port_seed)\n+        # backup dir variable for removal at cleanup\n+        self.options.root, self.options.tmpdir = self.options.tmpdir, self.options.tmpdir + '/' + str(self.options.port_seed)\n \n         if self.options.trace_rpc:\n             logging.basicConfig(level=logging.DEBUG, stream=sys.stdout)\n@@ -174,6 +175,8 @@ def main(self):\n         if not self.options.nocleanup and not self.options.noshutdown and success:\n             print(\"Cleaning up\")\n             shutil.rmtree(self.options.tmpdir)\n+            if not os.listdir(self.options.root):\n+                os.rmdir(self.options.root)\n         else:\n             print(\"Not cleaning up dir %s\" % self.options.tmpdir)\n "
      },
      {
        "sha": "a49d91f6f4f53e9d257bb67c23282ef7b9c4dadf",
        "filename": "qa/rpc-tests/wallet-hd.py",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/63462c2b4bcd250402b040bc19f2ae39771a62f7/qa/rpc-tests/wallet-hd.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/63462c2b4bcd250402b040bc19f2ae39771a62f7/qa/rpc-tests/wallet-hd.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/wallet-hd.py?ref=63462c2b4bcd250402b040bc19f2ae39771a62f7",
        "patch": "@@ -39,8 +39,8 @@ def run_test (self):\n         self.nodes[1].importprivkey(self.nodes[0].dumpprivkey(non_hd_add))\n \n         # This should be enough to keep the master key and the non-HD key \n-        self.nodes[1].backupwallet(tmpdir + \"hd.bak\")\n-        #self.nodes[1].dumpwallet(tmpdir + \"hd.dump\")\n+        self.nodes[1].backupwallet(tmpdir + \"/hd.bak\")\n+        #self.nodes[1].dumpwallet(tmpdir + \"/hd.dump\")\n \n         # Derive some HD addresses and remember the last\n         # Also send funds to each add\n@@ -63,7 +63,7 @@ def run_test (self):\n         print(\"Restore backup ...\")\n         self.stop_node(1)\n         os.remove(self.options.tmpdir + \"/node1/regtest/wallet.dat\")\n-        shutil.copyfile(tmpdir + \"hd.bak\", tmpdir + \"/node1/regtest/wallet.dat\")\n+        shutil.copyfile(tmpdir + \"/hd.bak\", tmpdir + \"/node1/regtest/wallet.dat\")\n         self.nodes[1] = start_node(1, self.options.tmpdir, self.node_args[1])\n         #connect_nodes_bi(self.nodes, 0, 1)\n "
      }
    ]
  },
  {
    "sha": "ae8c7df7a5725e812586f2c2d653578b8fd55a37",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphZThjN2RmN2E1NzI1ZTgxMjU4NmYyYzJkNjUzNTc4YjhmZDU1YTM3",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2016-09-13T17:35:35Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2016-09-16T09:29:35Z"
      },
      "message": "[qa] create_cache: Delete temp dir when done\n\nGithub-Pull: #8713\nRebased-From: fa27d990ee38a9dce1da71098be010e4a81b18c3",
      "tree": {
        "sha": "6845b015dd2a74e410c483d19e4ea40124d3556d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6845b015dd2a74e410c483d19e4ea40124d3556d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ae8c7df7a5725e812586f2c2d653578b8fd55a37",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ae8c7df7a5725e812586f2c2d653578b8fd55a37",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ae8c7df7a5725e812586f2c2d653578b8fd55a37",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ae8c7df7a5725e812586f2c2d653578b8fd55a37/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "63462c2b4bcd250402b040bc19f2ae39771a62f7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/63462c2b4bcd250402b040bc19f2ae39771a62f7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/63462c2b4bcd250402b040bc19f2ae39771a62f7"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 8,
      "deletions": 2
    },
    "files": [
      {
        "sha": "1ace6310d0d06c359db0dd4056324198c81f9a2f",
        "filename": "qa/rpc-tests/create_cache.py",
        "status": "modified",
        "additions": 8,
        "deletions": 2,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ae8c7df7a5725e812586f2c2d653578b8fd55a37/qa/rpc-tests/create_cache.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ae8c7df7a5725e812586f2c2d653578b8fd55a37/qa/rpc-tests/create_cache.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/create_cache.py?ref=ae8c7df7a5725e812586f2c2d653578b8fd55a37",
        "patch": "@@ -12,9 +12,15 @@\n \n class CreateCache(BitcoinTestFramework):\n \n+    def __init__(self):\n+        super().__init__()\n+\n+        # Test network and test nodes are not required:\n+        self.num_nodes = 0\n+        self.nodes = []\n+\n     def setup_network(self):\n-        # Don't setup any test nodes\n-        self.options.noshutdown = True\n+        pass\n \n     def run_test(self):\n         pass"
      }
    ]
  },
  {
    "sha": "d6ebe1369fca30a914e72cbe9da7367de80d8f8a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNmViZTEzNjlmY2EzMGE5MTRlNzJjYmU5ZGE3MzY3ZGU4MGQ4Zjhh",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2016-09-17T09:47:51Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2016-09-19T15:11:18Z"
      },
      "message": "[qa] Refactor RPCTestHandler to prevent TimeoutExpired\n\nGithub-Pull: #8750\nRebased-From: dddd04f979392a8c69cc11f5c54d817702eeed3e",
      "tree": {
        "sha": "a1f7c446445bf7ba521cd95ba12e10b3b5b657a2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a1f7c446445bf7ba521cd95ba12e10b3b5b657a2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d6ebe1369fca30a914e72cbe9da7367de80d8f8a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d6ebe1369fca30a914e72cbe9da7367de80d8f8a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d6ebe1369fca30a914e72cbe9da7367de80d8f8a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d6ebe1369fca30a914e72cbe9da7367de80d8f8a/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ae8c7df7a5725e812586f2c2d653578b8fd55a37",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ae8c7df7a5725e812586f2c2d653578b8fd55a37",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ae8c7df7a5725e812586f2c2d653578b8fd55a37"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 10,
      "deletions": 4
    },
    "files": [
      {
        "sha": "a99149e52a5ea10968c575a5219eed6d22801809",
        "filename": "qa/pull-tester/rpc-tests.py",
        "status": "modified",
        "additions": 10,
        "deletions": 4,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6ebe1369fca30a914e72cbe9da7367de80d8f8a/qa/pull-tester/rpc-tests.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6ebe1369fca30a914e72cbe9da7367de80d8f8a/qa/pull-tester/rpc-tests.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/pull-tester/rpc-tests.py?ref=d6ebe1369fca30a914e72cbe9da7367de80d8f8a",
        "patch": "@@ -248,21 +248,27 @@ def get_next(self):\n             self.num_running += 1\n             t = self.test_list.pop(0)\n             port_seed = [\"--portseed=%s\" % len(self.test_list)]\n+            log_stdout = tempfile.SpooledTemporaryFile(max_size=2**16)\n+            log_stderr = tempfile.SpooledTemporaryFile(max_size=2**16)\n             self.jobs.append((t,\n                               time.time(),\n                               subprocess.Popen((RPC_TESTS_DIR + t).split() + self.flags + port_seed,\n                                                universal_newlines=True,\n-                                               stdout=subprocess.PIPE,\n-                                               stderr=subprocess.PIPE)))\n+                                               stdout=log_stdout,\n+                                               stderr=log_stderr),\n+                              log_stdout,\n+                              log_stderr))\n         if not self.jobs:\n             raise IndexError('pop from empty list')\n         while True:\n             # Return first proc that finishes\n             time.sleep(.5)\n             for j in self.jobs:\n-                (name, time0, proc) = j\n+                (name, time0, proc, log_out, log_err) = j\n                 if proc.poll() is not None:\n-                    (stdout, stderr) = proc.communicate(timeout=3)\n+                    log_out.seek(0), log_err.seek(0)\n+                    [stdout, stderr] = [l.read().decode('utf-8') for l in (log_out, log_err)]\n+                    log_out.close(), log_err.close()\n                     passed = stderr == \"\" and proc.returncode == 0\n                     self.num_running -= 1\n                     self.jobs.remove(j)"
      }
    ]
  }
]