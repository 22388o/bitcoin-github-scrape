[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891323675",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22604#issuecomment-891323675",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22604",
    "id": 891323675,
    "node_id": "IC_kwDOABII5841IIUb",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-02T20:50:55Z",
    "updated_at": "2021-08-02T20:50:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK\r\n\r\nWill code-review tomorrow. At a first glance, most parts of the diff look straight-forward, the change in the rate-limiting logic (swapping the if conditions) needs probably most attention.\r\nTo speed up review, adding links to each of the review comments in #22387 that are tackled in this PR could be a good idea.\r\n\r\n(the AppVeyor CI build fail seems to be not caused by this PR's changes, by the way)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891323675/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891333553",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22604#issuecomment-891333553",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22604",
    "id": 891333553,
    "node_id": "IC_kwDOABII5841IKux",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-02T21:07:31Z",
    "updated_at": "2021-08-02T21:07:31Z",
    "author_association": "MEMBER",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891333553/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891519041",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22604#issuecomment-891519041",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22604",
    "id": 891519041,
    "node_id": "IC_kwDOABII5841I4BB",
    "user": {
      "login": "tryphe",
      "id": 8435003,
      "node_id": "MDQ6VXNlcjg0MzUwMDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8435003?u=7c63a6209cf9ab35dd71f150c3fe68a4eaef89cf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tryphe",
      "html_url": "https://github.com/tryphe",
      "followers_url": "https://api.github.com/users/tryphe/followers",
      "following_url": "https://api.github.com/users/tryphe/following{/other_user}",
      "gists_url": "https://api.github.com/users/tryphe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
      "organizations_url": "https://api.github.com/users/tryphe/orgs",
      "repos_url": "https://api.github.com/users/tryphe/repos",
      "events_url": "https://api.github.com/users/tryphe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tryphe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-03T04:41:47Z",
    "updated_at": "2021-08-03T04:41:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK\r\n\r\nNice fixups! Looks like there's essentially only one functional change here with  `if (rate_limited) {...`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891519041/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891597154",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22604#issuecomment-891597154",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22604",
    "id": 891597154,
    "node_id": "IC_kwDOABII5841JLFi",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-03T07:13:30Z",
    "updated_at": "2021-08-03T07:13:30Z",
    "author_association": "MEMBER",
    "body": "review ACK b7c4b058ba2625a39666636253620bc08a41c501\r\n\r\nThanks!\r\n\r\nAlso reset appveyor run.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891597154/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891597804",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22604#issuecomment-891597804",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22604",
    "id": 891597804,
    "node_id": "IC_kwDOABII5841JLPs",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-03T07:14:31Z",
    "updated_at": "2021-08-03T07:14:31Z",
    "author_association": "MEMBER",
    "body": "> Looks like there's essentially only one functional change here with if (rate_limited) {....\r\n\r\nI think it still counts as refactoring because the change shouldn't be observable by a user",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891597804/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/892145103",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22604#issuecomment-892145103",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22604",
    "id": 892145103,
    "node_id": "IC_kwDOABII5841LQ3P",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-03T20:30:57Z",
    "updated_at": "2021-08-04T21:36:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/892145103/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/892833368",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22604#issuecomment-892833368",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22604",
    "id": 892833368,
    "node_id": "IC_kwDOABII5841N45Y",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-04T17:19:06Z",
    "updated_at": "2021-08-04T17:19:06Z",
    "author_association": "MEMBER",
    "body": "Rebased per `git range-diff 2b06af1 b7c4b05 d930c7f`",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/892833368/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/893317727",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22604#issuecomment-893317727",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22604",
    "id": 893317727,
    "node_id": "IC_kwDOABII5841PvJf",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-05T09:42:01Z",
    "updated_at": "2021-08-05T09:42:01Z",
    "author_association": "MEMBER",
    "body": "review ACK d930c7f5b091687eb4208a5ffe8a2abe311d8054",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/893317727/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/681266426",
    "pull_request_review_id": 720587355,
    "id": 681266426,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MTI2NjQyNg==",
    "diff_hunk": "@@ -241,14 +241,14 @@ struct Peer {\n     std::atomic_bool m_wants_addrv2{false};\n     /** Whether this peer has already sent us a getaddr message. */\n     bool m_getaddr_recvd{false};\n-    /** Number of addr messages that can be processed from this peer. Start at 1 to\n+    /** Number of addresses that can be processed from this peer. Start at 1 to",
    "path": "src/net_processing.cpp",
    "position": 14,
    "original_position": 14,
    "commit_id": "d930c7f5b091687eb4208a5ffe8a2abe311d8054",
    "original_commit_id": "b7c4b058ba2625a39666636253620bc08a41c501",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "addresses the feedback here: https://github.com/bitcoin/bitcoin/pull/22387/files#r665882202",
    "created_at": "2021-08-02T20:57:47Z",
    "updated_at": "2021-08-02T21:02:15Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22604#discussion_r681266426",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/681266426"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22604#discussion_r681266426"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/681266426/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 266,
    "original_line": 266,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/681266812",
    "pull_request_review_id": 720587355,
    "id": 681266812,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MTI2NjgxMg==",
    "diff_hunk": "@@ -2817,11 +2817,12 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n                 return;\n \n             // Apply rate limiting.\n-            if (rate_limited) {\n-                if (peer->m_addr_token_bucket < 1.0) {\n+            if (peer->m_addr_token_bucket < 1.0) {\n+                if (rate_limited) {\n                     ++num_rate_limit;\n                     continue;\n                 }\n+            } else {\n                 peer->m_addr_token_bucket -= 1.0;\n             }",
    "path": "src/net_processing.cpp",
    "position": 39,
    "original_position": 39,
    "commit_id": "d930c7f5b091687eb4208a5ffe8a2abe311d8054",
    "original_commit_id": "b7c4b058ba2625a39666636253620bc08a41c501",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "proposed here: https://github.com/bitcoin/bitcoin/pull/22387/files#r672410564",
    "created_at": "2021-08-02T20:58:24Z",
    "updated_at": "2021-08-02T21:02:15Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22604#discussion_r681266812",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/681266812"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22604#discussion_r681266812"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/681266812/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2858,
    "original_line": 2858,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/681267120",
    "pull_request_review_id": 720587355,
    "id": 681267120,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MTI2NzEyMA==",
    "diff_hunk": "@@ -2849,12 +2850,8 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n         }\n         peer->m_addr_processed += num_proc;\n         peer->m_addr_rate_limited += num_rate_limit;\n-        LogPrint(BCLog::NET, \"Received addr: %u addresses (%u processed, %u rate-limited) from peer=%d%s\\n\",\n-                 vAddr.size(),\n-                 num_proc,\n-                 num_rate_limit,\n-                 pfrom.GetId(),\n-                 fLogIPs ? \", peeraddr=\" + pfrom.addr.ToString() : \"\");\n+        LogPrint(BCLog::NET, \"Received addr: %u addresses (%u processed, %u rate-limited) from peer=%d\\n\",\n+                 vAddr.size(), num_proc, num_rate_limit, pfrom.GetId());",
    "path": "src/net_processing.cpp",
    "position": 52,
    "original_position": 52,
    "commit_id": "d930c7f5b091687eb4208a5ffe8a2abe311d8054",
    "original_commit_id": "b7c4b058ba2625a39666636253620bc08a41c501",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "suggested here: https://github.com/bitcoin/bitcoin/pull/22387/files#r672414835",
    "created_at": "2021-08-02T20:58:57Z",
    "updated_at": "2021-08-02T21:02:15Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22604#discussion_r681267120",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/681267120"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22604#discussion_r681267120"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/681267120/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2885,
    "original_line": 2885,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/681267369",
    "pull_request_review_id": 720587355,
    "id": 681267369,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MTI2NzM2OQ==",
    "diff_hunk": "@@ -150,6 +150,8 @@ static RPCHelpMan getpeerinfo()\n                             {\n                                 {RPCResult::Type::NUM, \"n\", \"The heights of blocks we're currently asking from this peer\"},\n                             }},\n+                            {RPCResult::Type::NUM, \"addr_processed\", \"The total number of addresses processed, excluding those dropped due to rate limiting\"},\n+                            {RPCResult::Type::NUM, \"addr_rate_limited\", \"The total number of addresses dropped due to rate limiting\"},",
    "path": "src/rpc/net.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "d930c7f5b091687eb4208a5ffe8a2abe311d8054",
    "original_commit_id": "b7c4b058ba2625a39666636253620bc08a41c501",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "mentioned here: https://github.com/bitcoin/bitcoin/pull/22387/files#r672417898",
    "created_at": "2021-08-02T20:59:22Z",
    "updated_at": "2021-08-02T21:02:15Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22604#discussion_r681267369",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/681267369"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22604#discussion_r681267369"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/681267369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 155,
    "original_line": 155,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/681267728",
    "pull_request_review_id": 720587355,
    "id": 681267728,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MTI2NzcyOA==",
    "diff_hunk": "@@ -257,45 +257,45 @@ def send_addrs_and_test_rate_limiting(self, peer, no_relay, new_addrs, total_add\n             assert_equal(addrs_rate_limited, max(0, total_addrs - peer.tokens))\n \n     def rate_limit_tests(self):\n-\n         self.mocktime = int(time.time())\n         self.restart_node(0, [])\n         self.nodes[0].setmocktime(self.mocktime)\n \n-        for contype, no_relay in [(\"outbound-full-relay\", False), (\"block-relay-only\", True), (\"inbound\", False)]:\n-            self.log.info(f'Test rate limiting of addr processing for {contype} peers')\n-            if contype == \"inbound\":\n+        for conn_type, no_relay in [(\"outbound-full-relay\", False), (\"block-relay-only\", True), (\"inbound\", False)]:\n+            self.log.info(f'Test rate limiting of addr processing for {conn_type} peers')\n+            if conn_type == \"inbound\":\n                 peer = self.nodes[0].add_p2p_connection(AddrReceiver())\n             else:\n-                peer = self.nodes[0].add_outbound_p2p_connection(AddrReceiver(), p2p_idx=0, connection_type=contype)\n+                peer = self.nodes[0].add_outbound_p2p_connection(AddrReceiver(), p2p_idx=0, connection_type=conn_type)\n \n             # Send 600 addresses. For all but the block-relay-only peer this should result in addresses being processed.\n-            self.send_addrs_and_test_rate_limiting(peer, no_relay, 600, 600)\n+            self.send_addrs_and_test_rate_limiting(peer, no_relay, new_addrs=600, total_addrs=600)\n \n             # Send 600 more addresses. For the outbound-full-relay peer (which we send a GETADDR, and thus will\n             # process up to 1001 incoming addresses), this means more addresses will be processed.\n-            self.send_addrs_and_test_rate_limiting(peer, no_relay, 600, 1200)\n+            self.send_addrs_and_test_rate_limiting(peer, no_relay, new_addrs=600, total_addrs=1200)\n \n             # Send 10 more. As we reached the processing limit for all nodes, no more addresses should be procesesd.\n-            self.send_addrs_and_test_rate_limiting(peer, no_relay, 10, 1210)\n+            self.send_addrs_and_test_rate_limiting(peer, no_relay, new_addrs=10, total_addrs=1210)\n \n             # Advance the time by 100 seconds, permitting the processing of 10 more addresses.\n             # Send 200 and verify that 10 are processed.\n             self.mocktime += 100\n             self.nodes[0].setmocktime(self.mocktime)\n             peer.increment_tokens(10)\n \n-            self.send_addrs_and_test_rate_limiting(peer, no_relay, 200, 1410)\n+            self.send_addrs_and_test_rate_limiting(peer, no_relay, new_addrs=200, total_addrs=1410)\n \n             # Advance the time by 1000 seconds, permitting the processing of 100 more addresses.\n             # Send 200 and verify that 100 are processed.\n             self.mocktime += 1000\n             self.nodes[0].setmocktime(self.mocktime)\n             peer.increment_tokens(100)\n \n-            self.send_addrs_and_test_rate_limiting(peer, no_relay, 200, 1610)\n+            self.send_addrs_and_test_rate_limiting(peer, no_relay, new_addrs=200, total_addrs=1610)",
    "path": "test/functional/p2p_addr_relay.py",
    "position": 58,
    "original_position": 58,
    "commit_id": "d930c7f5b091687eb4208a5ffe8a2abe311d8054",
    "original_commit_id": "b7c4b058ba2625a39666636253620bc08a41c501",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "review feedback here: https://github.com/bitcoin/bitcoin/pull/22387/files#r671144448",
    "created_at": "2021-08-02T21:00:04Z",
    "updated_at": "2021-08-02T21:02:15Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22604#discussion_r681267728",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22604",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/681267728"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22604#discussion_r681267728"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/681267728/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 367,
    "original_line": 367,
    "side": "RIGHT"
  }
]