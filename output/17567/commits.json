[
  {
    "sha": "27d82b63fb8869716d2f103fd381c2413bde4d1b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyN2Q4MmI2M2ZiODg2OTcxNmQyZjEwM2ZkMzgxYzI0MTNiZGU0ZDFi",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2019-11-22T23:12:00Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2019-11-22T23:44:43Z"
      },
      "message": "gui: remove macOS start on login code\n\nThe macOS startup item code was disabled for builds targeting macOS >\n10.11 in #15208. Now that we require macOS 10.12 as a minimum, #17550,\nwe can remove the startup item code entirely, as the API we were using\nwas removed in macOS 10.12.",
      "tree": {
        "sha": "c3857aa1e60aa2a810a1297b1cb722b1e13e7b48",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c3857aa1e60aa2a810a1297b1cb722b1e13e7b48"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/27d82b63fb8869716d2f103fd381c2413bde4d1b",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAl3Ycu4ACgkQLuufXMCV\nJsGyiQ//Zyjgp5PZMo6hpLxfrIlRa55wY+Dw91ogfNqCdWOImL42jv/K5BBMSNdf\nXlSed/Ts/gayKk8XO49yyK/NwDvRLBjINpPjnPczYmD3fzWE8G0TherFnGh2m0e6\nhcMY1h5samFcXKWNEKcZbuSUwYtRHl07Bxbw2fFxS3yssrgy4FxINXBpcARVrQJT\n9Om+fWi1Wfx7/LcG5fMW9CmhK/Ryk7wCessrYV2EWFlr7eDCsvxXOvPkj+G6KY80\nhP4gbhThUSEKuFMzSXObEjJFUWPDtvGnQy7UJcdLlNDwoAZNBj08WSELKF5ve4or\nDhLdgUwsTciQxjOMy/BN+tzrTT7Hu0dEzaNUfw5FvYxhm+aDpkAL1pVoUaT1infx\nLI0k8yVQA6xI2Hd4eUxBChG0bSOhdJO0OCrW3A7734nDLoX2LK1GXNqrWjnLWumj\nan5VwmuVI6Q7r/Jik/0UpT4PowPHVZPj4uKLPfukXBLctRSX0H53tc63DRGcw7x3\nr5hy4mh4ix4Lpfn2+BXcJN7w/DUS7Ar9DgjFQLtoaVukhFO9LXqixIVbW+RNd1ib\nivvS6PZgnCffCyVsRThiUPD/AQxYmL+ltfoa3DHT2SzVk/gZN1vkoO/ubPQXtP/x\nxP9g/vBFnxtk0jq5WDXUUZx7NeFcE+kH8/XMVQDbxDkBelTRz7g=\n=/OOz\n-----END PGP SIGNATURE-----",
        "payload": "tree c3857aa1e60aa2a810a1297b1cb722b1e13e7b48\nparent 0b79caf658019de2c65a53c9e11fd1d2f4c369b6\nauthor fanquake <fanquake@gmail.com> 1574464320 -0500\ncommitter fanquake <fanquake@gmail.com> 1574466283 -0500\n\ngui: remove macOS start on login code\n\nThe macOS startup item code was disabled for builds targeting macOS >\n10.11 in #15208. Now that we require macOS 10.12 as a minimum, #17550,\nwe can remove the startup item code entirely, as the API we were using\nwas removed in macOS 10.12.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/27d82b63fb8869716d2f103fd381c2413bde4d1b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/27d82b63fb8869716d2f103fd381c2413bde4d1b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/27d82b63fb8869716d2f103fd381c2413bde4d1b/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0b79caf658019de2c65a53c9e11fd1d2f4c369b6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0b79caf658019de2c65a53c9e11fd1d2f4c369b6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0b79caf658019de2c65a53c9e11fd1d2f4c369b6"
      }
    ],
    "stats": {
      "total": 90,
      "additions": 3,
      "deletions": 87
    },
    "files": [
      {
        "sha": "0981315190f74471938553c1196114d8f729f42d",
        "filename": "doc/release-notes.md",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/27d82b63fb8869716d2f103fd381c2413bde4d1b/doc/release-notes.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/27d82b63fb8869716d2f103fd381c2413bde4d1b/doc/release-notes.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes.md?ref=27d82b63fb8869716d2f103fd381c2413bde4d1b",
        "patch": "@@ -86,6 +86,8 @@ Low-level Changes section below.\n GUI changes\n -----------\n \n+- The \"Start Bitcoin Core on system login\" option has been removed on macOS.\n+\n Wallet\n ------\n "
      },
      {
        "sha": "2bb95354415b54f88e4ead96cdff9637378f7de0",
        "filename": "src/qt/guiutil.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 84,
        "changes": 84,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/27d82b63fb8869716d2f103fd381c2413bde4d1b/src/qt/guiutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/27d82b63fb8869716d2f103fd381c2413bde4d1b/src/qt/guiutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.cpp?ref=27d82b63fb8869716d2f103fd381c2413bde4d1b",
        "patch": "@@ -54,10 +54,7 @@\n #include <QUrlQuery>\n \n #if defined(Q_OS_MAC)\n-#pragma GCC diagnostic push\n-#pragma GCC diagnostic ignored \"-Wdeprecated-declarations\"\n \n-#include <CoreServices/CoreServices.h>\n #include <QProcess>\n \n void ForceActivation();\n@@ -691,87 +688,6 @@ bool SetStartOnSystemStartup(bool fAutoStart)\n     return true;\n }\n \n-\n-#elif defined(Q_OS_MAC) && defined(MAC_OS_X_VERSION_MIN_REQUIRED) && MAC_OS_X_VERSION_MIN_REQUIRED <= 101100\n-// based on: https://github.com/Mozketo/LaunchAtLoginController/blob/master/LaunchAtLoginController.m\n-\n-LSSharedFileListItemRef findStartupItemInList(CFArrayRef listSnapshot, LSSharedFileListRef list, CFURLRef findUrl)\n-{\n-    if (listSnapshot == nullptr) {\n-        return nullptr;\n-    }\n-\n-    // loop through the list of startup items and try to find the bitcoin app\n-    for(int i = 0; i < CFArrayGetCount(listSnapshot); i++) {\n-        LSSharedFileListItemRef item = (LSSharedFileListItemRef)CFArrayGetValueAtIndex(listSnapshot, i);\n-        UInt32 resolutionFlags = kLSSharedFileListNoUserInteraction | kLSSharedFileListDoNotMountVolumes;\n-        CFURLRef currentItemURL = nullptr;\n-\n-#if defined(MAC_OS_X_VERSION_MAX_ALLOWED) && MAC_OS_X_VERSION_MAX_ALLOWED >= 10100\n-        if(&LSSharedFileListItemCopyResolvedURL)\n-            currentItemURL = LSSharedFileListItemCopyResolvedURL(item, resolutionFlags, nullptr);\n-#if defined(MAC_OS_X_VERSION_MIN_REQUIRED) && MAC_OS_X_VERSION_MIN_REQUIRED < 10100\n-        else\n-            LSSharedFileListItemResolve(item, resolutionFlags, &currentItemURL, nullptr);\n-#endif\n-#else\n-        LSSharedFileListItemResolve(item, resolutionFlags, &currentItemURL, nullptr);\n-#endif\n-\n-        if(currentItemURL) {\n-            if (CFEqual(currentItemURL, findUrl)) {\n-                // found\n-                CFRelease(currentItemURL);\n-                return item;\n-            }\n-            CFRelease(currentItemURL);\n-        }\n-    }\n-    return nullptr;\n-}\n-\n-bool GetStartOnSystemStartup()\n-{\n-    CFURLRef bitcoinAppUrl = CFBundleCopyBundleURL(CFBundleGetMainBundle());\n-    if (bitcoinAppUrl == nullptr) {\n-        return false;\n-    }\n-\n-    LSSharedFileListRef loginItems = LSSharedFileListCreate(nullptr, kLSSharedFileListSessionLoginItems, nullptr);\n-    CFArrayRef listSnapshot = LSSharedFileListCopySnapshot(loginItems, nullptr);\n-    bool res = (findStartupItemInList(listSnapshot, loginItems, bitcoinAppUrl) != nullptr);\n-    CFRelease(bitcoinAppUrl);\n-    CFRelease(loginItems);\n-    CFRelease(listSnapshot);\n-    return res;\n-}\n-\n-bool SetStartOnSystemStartup(bool fAutoStart)\n-{\n-    CFURLRef bitcoinAppUrl = CFBundleCopyBundleURL(CFBundleGetMainBundle());\n-    if (bitcoinAppUrl == nullptr) {\n-        return false;\n-    }\n-\n-    LSSharedFileListRef loginItems = LSSharedFileListCreate(nullptr, kLSSharedFileListSessionLoginItems, nullptr);\n-    CFArrayRef listSnapshot = LSSharedFileListCopySnapshot(loginItems, nullptr);\n-    LSSharedFileListItemRef foundItem = findStartupItemInList(listSnapshot, loginItems, bitcoinAppUrl);\n-\n-    if(fAutoStart && !foundItem) {\n-        // add bitcoin app to startup item list\n-        LSSharedFileListInsertItemURL(loginItems, kLSSharedFileListItemBeforeFirst, nullptr, nullptr, bitcoinAppUrl, nullptr, nullptr);\n-    }\n-    else if(!fAutoStart && foundItem) {\n-        // remove item\n-        LSSharedFileListItemRemove(loginItems, foundItem);\n-    }\n-\n-    CFRelease(bitcoinAppUrl);\n-    CFRelease(loginItems);\n-    CFRelease(listSnapshot);\n-    return true;\n-}\n-#pragma GCC diagnostic pop\n #else\n \n bool GetStartOnSystemStartup() { return false; }"
      },
      {
        "sha": "d48c537c75a32325c2bd7c7260a2bb220613f130",
        "filename": "src/qt/optionsdialog.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 3,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/27d82b63fb8869716d2f103fd381c2413bde4d1b/src/qt/optionsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/27d82b63fb8869716d2f103fd381c2413bde4d1b/src/qt/optionsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsdialog.cpp?ref=27d82b63fb8869716d2f103fd381c2413bde4d1b",
        "patch": "@@ -71,12 +71,10 @@ OptionsDialog::OptionsDialog(QWidget *parent, bool enableWallet) :\n #ifdef Q_OS_MAC\n     /* remove Window tab on Mac */\n     ui->tabWidget->removeTab(ui->tabWidget->indexOf(ui->tabWindow));\n-#if  defined(MAC_OS_X_VERSION_MIN_REQUIRED) && MAC_OS_X_VERSION_MIN_REQUIRED > 101100\n-    /* hide launch at startup option if compiled against macOS > 10.11 (removed API) */\n+    /* hide launch at startup option on macOS */\n     ui->bitcoinAtStartup->setVisible(false);\n     ui->verticalLayout_Main->removeWidget(ui->bitcoinAtStartup);\n     ui->verticalLayout_Main->removeItem(ui->horizontalSpacer_0_Main);\n-#endif\n #endif\n \n     /* remove Wallet tab in case of -disablewallet */"
      }
    ]
  }
]