[
  {
    "sha": "3d9b41ecc02a69daa19df2bc850d60bf9917b724",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozZDliNDFlY2MwMmE2OWRhYTE5ZGYyYmM4NTBkNjBiZjk5MTdiNzI0",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-02-13T06:21:32Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-02-27T04:12:18Z"
      },
      "message": "build: add --enable-determinism configure flag\n\nIf used, this will enable additional compile / link time flags\nthat will make subsequent builds of bitcoind determinisitic.",
      "tree": {
        "sha": "771cf8cb338ad6f15613528a379141f4e1e3cdf9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/771cf8cb338ad6f15613528a379141f4e1e3cdf9"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3d9b41ecc02a69daa19df2bc850d60bf9917b724",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAl5XQaIACgkQLuufXMCV\nJsGaoRAAnA6zrQUAddksY01N3sVtzJq+kQA32lDG7VJYIY27sWYDEfIyNM24Otgn\nCdYBKa3+WGDtL0oBeEOzQgZz4L8OjxpNYMvKg3RDBDuEWuKQTU+teT3i4HhjXQ2B\nKyENcvO0+MzNjcPk+8O+g6OSJ8r9KzV9XcSQwglqezOp1IDVd+T/aXbiemad5iPh\nYMCOJi0dEck+KjwD/VauE3WO3kMqmXuoFJhdJ85v90R9nzEFqjROqYOoA/meNitN\ndS3aenfomsqcd6La6il8nN/KF30Cl21IjFgB2Fq9RIN3zBCPFGmSGjw7elAV8OQZ\nHyXQS6e6BzmzX3+guVICszLqpj8HawMzp7pfVvPALdeDkd02ogN9z7MBjyYNVyF8\n19LAVAAKt1r/AUMgeKzrQQCpJWYVaH4DREiRu0NDdEYl0mmLkyZSk1fjjGc1B1Uz\np14ZZbVbEapPSTDYMILFI/ZU2NfwAnvmvR+4xWheyKkuzupMVUR4wrR7Vc/jIDC6\nrXq4zGfzqEFrFuOH6+rRIVQ74BK+J5hPmSIXSsGMbiv94mnoAPQRIE0vj4GIG+H2\n1QdWMBqwE0IRcP1mMWZ4sIrY7erAcSpWrvQs0rZL7w1MR6JQBRoIXQ8ZRFPIzQj9\nsp3O0qE7YuRGb67KOM7rjis41wn0vrjqPXYMrkh7sDF4M8ql97U=\n=EMUG\n-----END PGP SIGNATURE-----",
        "payload": "tree 771cf8cb338ad6f15613528a379141f4e1e3cdf9\nparent 4502ed7cd1b3f0478dd2fdf048ad36cd87a8e2df\nauthor fanquake <fanquake@gmail.com> 1581574892 +0800\ncommitter fanquake <fanquake@gmail.com> 1582776738 +0800\n\nbuild: add --enable-determinism configure flag\n\nIf used, this will enable additional compile / link time flags\nthat will make subsequent builds of bitcoind determinisitic.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3d9b41ecc02a69daa19df2bc850d60bf9917b724",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3d9b41ecc02a69daa19df2bc850d60bf9917b724",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3d9b41ecc02a69daa19df2bc850d60bf9917b724/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4502ed7cd1b3f0478dd2fdf048ad36cd87a8e2df",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4502ed7cd1b3f0478dd2fdf048ad36cd87a8e2df",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4502ed7cd1b3f0478dd2fdf048ad36cd87a8e2df"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 13,
      "deletions": 0
    },
    "files": [
      {
        "sha": "35e5dc1fe7741361b97ffc588904ff9a6734cd43",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3d9b41ecc02a69daa19df2bc850d60bf9917b724/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3d9b41ecc02a69daa19df2bc850d60bf9917b724/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=3d9b41ecc02a69daa19df2bc850d60bf9917b724",
        "patch": "@@ -262,6 +262,13 @@ AC_ARG_ENABLE([gprof],\n     [enable_gprof=$enableval],\n     [enable_gprof=no])\n \n+dnl Pass compiler & liner flags that make builds deterministic\n+AC_ARG_ENABLE([determinism],\n+    [AS_HELP_STRING([--enable-determinism],\n+                    [Enable compilation flags that make builds deterministic (default is no)])],\n+    [enable_determinism=$enableval],\n+    [enable_determinism=no])\n+\n dnl Turn warnings into errors\n AC_ARG_ENABLE([werror],\n     [AS_HELP_STRING([--enable-werror],\n@@ -764,6 +771,12 @@ if test x$TARGET_OS = xdarwin; then\n   AX_CHECK_LINK_FLAG([[-Wl,-bind_at_load]], [HARDENED_LDFLAGS=\"$HARDENED_LDFLAGS -Wl,-bind_at_load\"])\n fi\n \n+if test x$enable_determinism = xyes; then\n+  if test x$TARGET_OS = xwindows; then\n+    AX_CHECK_LINK_FLAG([[-Wl,--no-insert-timestamp]], [LDFLAGS=\"$LDFLAGS -Wl,--no-insert-timestamp\"])\n+  fi\n+fi\n+\n AC_CHECK_HEADERS([endian.h sys/endian.h byteswap.h stdio.h stdlib.h unistd.h strings.h sys/types.h sys/stat.h sys/select.h sys/prctl.h sys/sysctl.h vm/vm_param.h sys/vmmeter.h sys/resources.h])\n \n dnl FD_ZERO may be dependent on a declaration of memcpy, e.g. in SmartOS"
      }
    ]
  }
]