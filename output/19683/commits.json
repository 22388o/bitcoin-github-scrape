[
  {
    "sha": "107f33d434ebbe6f93fa187e2af1f6f850e82d3b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxMDdmMzNkNDM0ZWJiZTZmOTNmYTE4N2UyYWYxZjZmODUwZTgyZDNi",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-08-20T21:30:30Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-07T19:02:39Z"
      },
      "message": "depends: Delay expansion of per-package vars\n\nPrior to this commit, when int_vars was called for packages, it would\nimmediately expand the \"single-dollar variables\", which may be defined\nin terms of variables which are not yet determined (e.g. variables\ndefined in package/*.mk, which are included after int_vars is called).\n\nThis is required for the next commit as after that commit, for darwin\ncross-builds:\n\n0. int_vars is defined in terms of $(1)_cc\n1. $(1)_cc is defined in terms of darwin_CC\n2. ... which is defined in terms of clang_resource_dir\n3. ... which is defined in terms of native_cctools_clang_version\n4. which is undetermined at the time when int_vars is being expanded and evaluated",
      "tree": {
        "sha": "c1cebf76882ac9aa85d4fe7ed4bd71dcc09d7e38",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c1cebf76882ac9aa85d4fe7ed4bd71dcc09d7e38"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/107f33d434ebbe6f93fa187e2af1f6f850e82d3b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/107f33d434ebbe6f93fa187e2af1f6f850e82d3b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/107f33d434ebbe6f93fa187e2af1f6f850e82d3b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/107f33d434ebbe6f93fa187e2af1f6f850e82d3b/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d7e2401c629be3db6ceef551ee0f74deb56c02d1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d7e2401c629be3db6ceef551ee0f74deb56c02d1",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d7e2401c629be3db6ceef551ee0f74deb56c02d1"
      }
    ],
    "stats": {
      "total": 30,
      "additions": 18,
      "deletions": 12
    },
    "files": [
      {
        "sha": "c0159f0e3891d77358375ebfd1ea929ef70f4139",
        "filename": "depends/funcs.mk",
        "status": "modified",
        "additions": 18,
        "deletions": 12,
        "changes": 30,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/107f33d434ebbe6f93fa187e2af1f6f850e82d3b/depends/funcs.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/107f33d434ebbe6f93fa187e2af1f6f850e82d3b/depends/funcs.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/funcs.mk?ref=107f33d434ebbe6f93fa187e2af1f6f850e82d3b",
        "patch": "@@ -1,17 +1,23 @@\n define int_vars\n #Set defaults for vars which may be overridden per-package\n-$(1)_cc=$($($(1)_type)_CC)\n-$(1)_cxx=$($($(1)_type)_CXX)\n-$(1)_objc=$($($(1)_type)_OBJC)\n-$(1)_objcxx=$($($(1)_type)_OBJCXX)\n-$(1)_ar=$($($(1)_type)_AR)\n-$(1)_ranlib=$($($(1)_type)_RANLIB)\n-$(1)_libtool=$($($(1)_type)_LIBTOOL)\n-$(1)_nm=$($($(1)_type)_NM)\n-$(1)_cflags=$($($(1)_type)_CFLAGS) $($($(1)_type)_$(release_type)_CFLAGS)\n-$(1)_cxxflags=$($($(1)_type)_CXXFLAGS) $($($(1)_type)_$(release_type)_CXXFLAGS)\n-$(1)_ldflags=$($($(1)_type)_LDFLAGS) $($($(1)_type)_$(release_type)_LDFLAGS) -L$($($(1)_type)_prefix)/lib\n-$(1)_cppflags=$($($(1)_type)_CPPFLAGS) $($($(1)_type)_$(release_type)_CPPFLAGS) -I$($($(1)_type)_prefix)/include\n+$(1)_cc=$$($$($(1)_type)_CC)\n+$(1)_cxx=$$($$($(1)_type)_CXX)\n+$(1)_objc=$$($$($(1)_type)_OBJC)\n+$(1)_objcxx=$$($$($(1)_type)_OBJCXX)\n+$(1)_ar=$$($$($(1)_type)_AR)\n+$(1)_ranlib=$$($$($(1)_type)_RANLIB)\n+$(1)_libtool=$$($$($(1)_type)_LIBTOOL)\n+$(1)_nm=$$($$($(1)_type)_NM)\n+$(1)_cflags=$$($$($(1)_type)_CFLAGS) \\\n+            $$($$($(1)_type)_$$(release_type)_CFLAGS)\n+$(1)_cxxflags=$$($$($(1)_type)_CXXFLAGS) \\\n+              $$($$($(1)_type)_$$(release_type)_CXXFLAGS)\n+$(1)_ldflags=$$($$($(1)_type)_LDFLAGS) \\\n+             $$($$($(1)_type)_$$(release_type)_LDFLAGS) \\\n+             -L$$($($(1)_type)_prefix)/lib\n+$(1)_cppflags=$$($$($(1)_type)_CPPFLAGS) \\\n+              $$($$($(1)_type)_$$(release_type)_CPPFLAGS) \\\n+              -I$$($$($(1)_type)_prefix)/include\n $(1)_recipe_hash:=\n endef\n "
      }
    ]
  },
  {
    "sha": "300733921863c176535806c40afdc813b99e7459",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozMDA3MzM5MjE4NjNjMTc2NTM1ODA2YzQwYWZkYzgxM2I5OWU3NDU5",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-08-06T15:51:55Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-07T19:02:39Z"
      },
      "message": "depends: Pin clang search paths for darwin host",
      "tree": {
        "sha": "5b7c436a35383864997938e2df1b53c539d6e7da",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5b7c436a35383864997938e2df1b53c539d6e7da"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/300733921863c176535806c40afdc813b99e7459",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/300733921863c176535806c40afdc813b99e7459",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/300733921863c176535806c40afdc813b99e7459",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/300733921863c176535806c40afdc813b99e7459/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "107f33d434ebbe6f93fa187e2af1f6f850e82d3b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/107f33d434ebbe6f93fa187e2af1f6f850e82d3b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/107f33d434ebbe6f93fa187e2af1f6f850e82d3b"
      }
    ],
    "stats": {
      "total": 55,
      "additions": 52,
      "deletions": 3
    },
    "files": [
      {
        "sha": "83da049618b45973f6b4fdc09ea6ffe27348af80",
        "filename": "depends/hosts/darwin.mk",
        "status": "modified",
        "additions": 52,
        "deletions": 3,
        "changes": 55,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/300733921863c176535806c40afdc813b99e7459/depends/hosts/darwin.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/300733921863c176535806c40afdc813b99e7459/depends/hosts/darwin.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/hosts/darwin.mk?ref=300733921863c176535806c40afdc813b99e7459",
        "patch": "@@ -6,6 +6,12 @@ LD64_VERSION=530\n \n OSX_SDK=$(SDK_PATH)/Xcode-$(XCODE_VERSION)-$(XCODE_BUILD_ID)-extracted-SDK-with-libcxx-headers\n \n+ifeq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)\n+clang_resource_dir=$(build_prefix)/lib/clang/$(native_cctools_clang_version)\n+else\n+clang_resource_dir=$(shell clang -print-resource-dir)\n+endif\n+\n # Flag explanations:\n #\n #     -mlinker-version\n@@ -18,7 +24,7 @@ OSX_SDK=$(SDK_PATH)/Xcode-$(XCODE_VERSION)-$(XCODE_BUILD_ID)-extracted-SDK-with-\n #         Explicitly point to our binaries (e.g. cctools) so that they are\n #         ensured to be found and preferred over other possibilities.\n #\n-#     -nostdinc++ -isystem $(OSX_SDK)/usr/include/c++/v1\n+#     -stdlib=libc++ -nostdinc++ -Xclang -cxx-isystem$(OSX_SDK)/usr/include/c++/v1\n #\n #         Forces clang to use the libc++ headers from our SDK and completely\n #         forget about the libc++ headers from the standard directories\n@@ -28,8 +34,51 @@ OSX_SDK=$(SDK_PATH)/Xcode-$(XCODE_VERSION)-$(XCODE_BUILD_ID)-extracted-SDK-with-\n #         https://reviews.llvm.org/D64089, we should use that instead. Read the\n #         differential summary there for more details.\n #\n-darwin_CC=clang -target $(host) -mmacosx-version-min=$(OSX_MIN_VERSION) --sysroot $(OSX_SDK) -mlinker-version=$(LD64_VERSION) -B$(build_prefix)/bin\n-darwin_CXX=clang++ -target $(host) -mmacosx-version-min=$(OSX_MIN_VERSION) --sysroot $(OSX_SDK) -stdlib=libc++ -mlinker-version=$(LD64_VERSION) -B$(build_prefix)/bin -nostdinc++ -isystem $(OSX_SDK)/usr/include/c++/v1\n+#     -Xclang -*system<path_a> \\\n+#     -Xclang -*system<path_b> \\\n+#     -Xclang -*system<path_c> ...\n+#\n+#         Adds path_a, path_b, and path_c to the bottom of clang's list of\n+#         include search paths. This is used to explicitly specify the list of\n+#         system include search paths and its ordering, rather than rely on\n+#         clang's autodetection routine. This routine has been shown to:\n+#             1. Fail to pickup libc++ headers in $SYSROOT/usr/include/c++/v1\n+#                when clang was built manually (see: https://github.com/bitcoin/bitcoin/pull/17919#issuecomment-656785034)\n+#             2. Fail to pickup C headers in $SYSROOT/usr/include when\n+#                C_INCLUDE_DIRS was specified at configure time (see: https://gist.github.com/dongcarl/5cdc6990b7599e8a5bf6d2a9c70e82f9)\n+#\n+#         Talking directly to cc1 with -Xclang here grants us access to specify\n+#         more granular categories for these system include search paths, and we\n+#         can use the correct categories that these search paths would have been\n+#         placed in if the autodetection routine had worked correctly. (see:\n+#         https://gist.github.com/dongcarl/5cdc6990b7599e8a5bf6d2a9c70e82f9#the-treatment)\n+#\n+#         Furthermore, it places these search paths after any \"non-Xclang\"\n+#         specified search paths. This prevents any additional clang options or\n+#         environment variables from coming after or in between these system\n+#         include search paths, as that would be wrong in general but would also\n+#         break #include_next's.\n+#\n+darwin_CC=env -u C_INCLUDE_PATH -u CPLUS_INCLUDE_PATH \\\n+              -u OBJC_INCLUDE_PATH -u OBJCPLUS_INCLUDE_PATH -u CPATH \\\n+              -u LIBRARY_PATH \\\n+            clang --target=$(host) -mmacosx-version-min=$(OSX_MIN_VERSION) \\\n+              -B$(build_prefix)/bin -mlinker-version=$(LD64_VERSION) \\\n+              -fuse-ld=$(build_prefix)/bin/x86_64-apple-darwin16-ld \\\n+              --sysroot=$(OSX_SDK) \\\n+              -Xclang -internal-externc-isystem$(clang_resource_dir)/include \\\n+              -Xclang -internal-externc-isystem$(OSX_SDK)/usr/include\n+darwin_CXX=env -u C_INCLUDE_PATH -u CPLUS_INCLUDE_PATH \\\n+               -u OBJC_INCLUDE_PATH -u OBJCPLUS_INCLUDE_PATH -u CPATH \\\n+               -u LIBRARY_PATH \\\n+             clang++ --target=$(host) -mmacosx-version-min=$(OSX_MIN_VERSION) \\\n+               -B$(build_prefix)/bin -mlinker-version=$(LD64_VERSION) \\\n+               -fuse-ld=$(build_prefix)/bin/x86_64-apple-darwin16-ld \\\n+               --sysroot=$(OSX_SDK) \\\n+               -stdlib=libc++ -nostdinc++ \\\n+               -Xclang -cxx-isystem$(OSX_SDK)/usr/include/c++/v1 \\\n+               -Xclang -internal-externc-isystem$(clang_resource_dir)/include \\\n+               -Xclang -internal-externc-isystem$(OSX_SDK)/usr/include\n \n darwin_CFLAGS=-pipe\n darwin_CXXFLAGS=$(darwin_CFLAGS)"
      }
    ]
  },
  {
    "sha": "77b1ef89a07bf7a493ce4abaccbbff793cbde9be",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3N2IxZWY4OWEwN2JmN2E0OTNjZTRhYmFjY2JiZmY3OTNjYmRlOWJl",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-09-30T23:20:41Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-07T19:02:39Z"
      },
      "message": "depends: Remove -fuse-ld line\n\nclang warns when a command line option is unused, and some of our tests\nuse Werror, so unfortunately we cannot use this flag to pin our linker\nfor now. Leaving this commit in for future reference, as it would be\ngreat if there's more granularity to Werror and we can be explicit about\nwhat linker we want to use.",
      "tree": {
        "sha": "20c1f53b111f4c8167f30ccc6448cc2fb9150393",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/20c1f53b111f4c8167f30ccc6448cc2fb9150393"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/77b1ef89a07bf7a493ce4abaccbbff793cbde9be",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/77b1ef89a07bf7a493ce4abaccbbff793cbde9be",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/77b1ef89a07bf7a493ce4abaccbbff793cbde9be",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/77b1ef89a07bf7a493ce4abaccbbff793cbde9be/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "300733921863c176535806c40afdc813b99e7459",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/300733921863c176535806c40afdc813b99e7459",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/300733921863c176535806c40afdc813b99e7459"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 0,
      "deletions": 2
    },
    "files": [
      {
        "sha": "4a70d55405afad91da7eebf1e1547cfb4817102f",
        "filename": "depends/hosts/darwin.mk",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/77b1ef89a07bf7a493ce4abaccbbff793cbde9be/depends/hosts/darwin.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/77b1ef89a07bf7a493ce4abaccbbff793cbde9be/depends/hosts/darwin.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/hosts/darwin.mk?ref=77b1ef89a07bf7a493ce4abaccbbff793cbde9be",
        "patch": "@@ -64,7 +64,6 @@ darwin_CC=env -u C_INCLUDE_PATH -u CPLUS_INCLUDE_PATH \\\n               -u LIBRARY_PATH \\\n             clang --target=$(host) -mmacosx-version-min=$(OSX_MIN_VERSION) \\\n               -B$(build_prefix)/bin -mlinker-version=$(LD64_VERSION) \\\n-              -fuse-ld=$(build_prefix)/bin/x86_64-apple-darwin16-ld \\\n               --sysroot=$(OSX_SDK) \\\n               -Xclang -internal-externc-isystem$(clang_resource_dir)/include \\\n               -Xclang -internal-externc-isystem$(OSX_SDK)/usr/include\n@@ -73,7 +72,6 @@ darwin_CXX=env -u C_INCLUDE_PATH -u CPLUS_INCLUDE_PATH \\\n                -u LIBRARY_PATH \\\n              clang++ --target=$(host) -mmacosx-version-min=$(OSX_MIN_VERSION) \\\n                -B$(build_prefix)/bin -mlinker-version=$(LD64_VERSION) \\\n-               -fuse-ld=$(build_prefix)/bin/x86_64-apple-darwin16-ld \\\n                --sysroot=$(OSX_SDK) \\\n                -stdlib=libc++ -nostdinc++ \\\n                -Xclang -cxx-isystem$(OSX_SDK)/usr/include/c++/v1 \\"
      }
    ]
  },
  {
    "sha": "80331107416b8a6cb487ee1c89a39c6a8bced27b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4MDMzMTEwNzQxNmI4YTZjYjQ4N2VlMWM4OWEzOWM2YThiY2VkMjdi",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-11T21:28:00Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-07T19:04:33Z"
      },
      "message": "depends: Quote to prevent word splitting in config.site\n\nSC2086 is disabled in our linter script so this wasn't caught.",
      "tree": {
        "sha": "6636fc96b560c4ca9a394ac76b93ba91abd0a1bd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6636fc96b560c4ca9a394ac76b93ba91abd0a1bd"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/80331107416b8a6cb487ee1c89a39c6a8bced27b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/80331107416b8a6cb487ee1c89a39c6a8bced27b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/80331107416b8a6cb487ee1c89a39c6a8bced27b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/80331107416b8a6cb487ee1c89a39c6a8bced27b/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "77b1ef89a07bf7a493ce4abaccbbff793cbde9be",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/77b1ef89a07bf7a493ce4abaccbbff793cbde9be",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/77b1ef89a07bf7a493ce4abaccbbff793cbde9be"
      }
    ],
    "stats": {
      "total": 72,
      "additions": 36,
      "deletions": 36
    },
    "files": [
      {
        "sha": "391767357a1a1338a351636ad865997eab318365",
        "filename": "depends/config.site.in",
        "status": "modified",
        "additions": 36,
        "deletions": 36,
        "changes": 72,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/80331107416b8a6cb487ee1c89a39c6a8bced27b/depends/config.site.in",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/80331107416b8a6cb487ee1c89a39c6a8bced27b/depends/config.site.in",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/config.site.in?ref=80331107416b8a6cb487ee1c89a39c6a8bced27b",
        "patch": "@@ -8,74 +8,74 @@ true  # Dummy command because shellcheck treats all directives before first\n       # See: https://github.com/koalaman/shellcheck/wiki/Directive\n \n # shellcheck disable=SC2154\n-depends_prefix=\"$(cd \"$(dirname ${ac_site_file})/..\" && pwd)\"\n+depends_prefix=\"$(cd \"$(dirname \"$ac_site_file\")/..\" && pwd)\"\n \n cross_compiling=maybe\n-host_alias=@HOST@\n-ac_tool_prefix=${host_alias}-\n+host_alias=\"@HOST@\"\n+ac_tool_prefix=\"${host_alias}-\"\n \n-if test -z $with_boost; then\n-  with_boost=$depends_prefix\n+if test -z \"$with_boost\"; then\n+  with_boost=\"$depends_prefix\"\n fi\n-if test -z $with_qt_plugindir; then\n-  with_qt_plugindir=$depends_prefix/plugins\n+if test -z \"$with_qt_plugindir\"; then\n+  with_qt_plugindir=\"${depends_prefix}/plugins\"\n fi\n-if test -z $with_qt_translationdir; then\n-  with_qt_translationdir=$depends_prefix/translations\n+if test -z \"$with_qt_translationdir\"; then\n+  with_qt_translationdir=\"${depends_prefix}/translations\"\n fi\n-if test -z $with_qt_bindir && test -z \"@no_qt@\"; then\n-  with_qt_bindir=$depends_prefix/native/bin\n+if test -z \"$with_qt_bindir\" && test -z \"@no_qt@\"; then\n+  with_qt_bindir=\"${depends_prefix}/native/bin\"\n fi\n-if test -z $with_mpgen && test -n \"@multiprocess@\"; then\n-  with_mpgen=$depends_prefix/native\n+if test -z \"$with_mpgen\" && test -n \"@multiprocess@\"; then\n+  with_mpgen=\"${depends_prefix}/native\"\n fi\n \n-if test -z $with_qrencode && test -n \"@no_qr@\"; then\n+if test -z \"$with_qrencode\" && test -n \"@no_qr@\"; then\n   with_qrencode=no\n fi\n \n-if test -z $enable_wallet && test -n \"@no_wallet@\"; then\n+if test -z \"$enable_wallet\" && test -n \"@no_wallet@\"; then\n   enable_wallet=no\n fi\n \n-if test -z $enable_multiprocess && test -n \"@multiprocess@\"; then\n+if test -z \"$enable_multiprocess\" && test -n \"@multiprocess@\"; then\n   enable_multiprocess=yes\n fi\n \n-if test -z $with_miniupnpc && test -n \"@no_upnp@\"; then\n+if test -z \"$with_miniupnpc\" && test -n \"@no_upnp@\"; then\n   with_miniupnpc=no\n fi\n \n-if test -z $with_natpmp && test -n \"@no_natpmp@\"; then\n+if test -z \"$with_natpmp\" && test -n \"@no_natpmp@\"; then\n   with_natpmp=no\n fi\n \n-if test -z $with_gui && test -n \"@no_qt@\"; then\n+if test -z \"$with_gui\" && test -n \"@no_qt@\"; then\n   with_gui=no\n fi\n \n-if test -z $enable_zmq && test -n \"@no_zmq@\"; then\n+if test -z \"$enable_zmq\" && test -n \"@no_zmq@\"; then\n   enable_zmq=no\n fi\n \n-if test x@host_os@ = xdarwin; then\n+if test \"x@host_os@\" = xdarwin; then\n   BREW=no\n   PORT=no\n fi\n \n-PATH=$depends_prefix/native/bin:$PATH\n+PATH=\"${depends_prefix}/native/bin:${PATH}\"\n PKG_CONFIG=\"$(which pkg-config) --static\"\n \n # These two need to remain exported because pkg-config does not see them\n # otherwise. That means they must be unexported at the end of configure.ac to\n # avoid ruining the cache. Sigh.\n-export PKG_CONFIG_PATH=$depends_prefix/share/pkgconfig:$depends_prefix/lib/pkgconfig\n+export PKG_CONFIG_PATH=\"${depends_prefix}/share/pkgconfig:${depends_prefix}/lib/pkgconfig\"\n if test -z \"@allow_host_packages@\"; then\n-  export PKG_CONFIG_LIBDIR=$depends_prefix/lib/pkgconfig\n+  export PKG_CONFIG_LIBDIR=\"${depends_prefix}/lib/pkgconfig\"\n fi\n \n-CPPFLAGS=\"-I$depends_prefix/include/ $CPPFLAGS\"\n-LDFLAGS=\"-L$depends_prefix/lib $LDFLAGS\"\n+CPPFLAGS=\"-I${depends_prefix}/include/ ${CPPFLAGS}\"\n+LDFLAGS=\"-L${depends_prefix}/lib ${LDFLAGS}\"\n \n if test -n \"@CC@\" -a -z \"${CC}\"; then\n   CC=\"@CC@\"\n@@ -86,33 +86,33 @@ fi\n PYTHONPATH=\"${depends_prefix}/native/lib/python3/dist-packages${PYTHONPATH:+${PATH_SEPARATOR}}${PYTHONPATH}\"\n \n if test -n \"@AR@\"; then\n-  AR=@AR@\n-  ac_cv_path_ac_pt_AR=${AR}\n+  AR=\"@AR@\"\n+  ac_cv_path_ac_pt_AR=\"${AR}\"\n fi\n \n if test -n \"@RANLIB@\"; then\n-  RANLIB=@RANLIB@\n-  ac_cv_path_ac_pt_RANLIB=${RANLIB}\n+  RANLIB=\"@RANLIB@\"\n+  ac_cv_path_ac_pt_RANLIB=\"${RANLIB}\"\n fi\n \n if test -n \"@NM@\"; then\n-  NM=@NM@\n-  ac_cv_path_ac_pt_NM=${NM}\n+  NM=\"@NM@\"\n+  ac_cv_path_ac_pt_NM=\"${NM}\"\n fi\n \n if test -n \"@debug@\"; then\n   enable_reduce_exports=no\n fi\n \n if test -n \"@CFLAGS@\"; then\n-  CFLAGS=\"@CFLAGS@ $CFLAGS\"\n+  CFLAGS=\"@CFLAGS@ ${CFLAGS}\"\n fi\n if test -n \"@CXXFLAGS@\"; then\n-  CXXFLAGS=\"@CXXFLAGS@ $CXXFLAGS\"\n+  CXXFLAGS=\"@CXXFLAGS@ ${CXXFLAGS}\"\n fi\n if test -n \"@CPPFLAGS@\"; then\n-  CPPFLAGS=\"@CPPFLAGS@ $CPPFLAGS\"\n+  CPPFLAGS=\"@CPPFLAGS@ ${CPPFLAGS}\"\n fi\n if test -n \"@LDFLAGS@\"; then\n-  LDFLAGS=\"@LDFLAGS@ $LDFLAGS\"\n+  LDFLAGS=\"@LDFLAGS@ ${LDFLAGS}\"\n fi"
      }
    ]
  },
  {
    "sha": "880660acfa547558f6ef5adff6768de95e53af6e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4ODA2NjBhY2ZhNTQ3NTU4ZjZlZjVhZGZmNjc2OGRlOTVlNTNhZjZl",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-07T05:25:46Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-07T19:22:36Z"
      },
      "message": "depends: Fully determine path for darwin_{CC,CXX}\n\nInstead of doing the awkward /bin path prepending at config.site\ncreation time, set darwin_{CC,CXX} in a way that fully determines the\nprogram's path (clang/clang++) similar to how AC_PATH_{TOOL,PROG} would\ndo.\n\nAlso see the added comment block in depends/Makefile for more context on\ndetermining $PATH for our config.site.",
      "tree": {
        "sha": "ae2bdbd57f08464f63768f3b31e21261f533bd8a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ae2bdbd57f08464f63768f3b31e21261f533bd8a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/880660acfa547558f6ef5adff6768de95e53af6e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/880660acfa547558f6ef5adff6768de95e53af6e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/880660acfa547558f6ef5adff6768de95e53af6e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/880660acfa547558f6ef5adff6768de95e53af6e/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "80331107416b8a6cb487ee1c89a39c6a8bced27b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/80331107416b8a6cb487ee1c89a39c6a8bced27b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/80331107416b8a6cb487ee1c89a39c6a8bced27b"
      }
    ],
    "stats": {
      "total": 69,
      "additions": 54,
      "deletions": 15
    },
    "files": [
      {
        "sha": "e0265973cb1f5024c0fd2343228ebb3eeed2ab52",
        "filename": "depends/Makefile",
        "status": "modified",
        "additions": 27,
        "deletions": 7,
        "changes": 34,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/880660acfa547558f6ef5adff6768de95e53af6e/depends/Makefile",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/880660acfa547558f6ef5adff6768de95e53af6e/depends/Makefile",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/Makefile?ref=880660acfa547558f6ef5adff6768de95e53af6e",
        "patch": "@@ -167,11 +167,7 @@ $(host_arch)_$(host_os)_native_toolchain?=$($(host_os)_native_toolchain)\n include funcs.mk\n \n binutils_path=$($($(host_arch)_$(host_os)_native_binutils)_prefixbin)\n-ifeq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)\n-toolchain_path=$($($(host_arch)_$(host_os)_native_toolchain)_prefixbin)\n-else\n-toolchain_path=\n-endif\n+\n final_build_id_long+=$(shell $(build_SHA256SUM) config.site.in)\n final_build_id+=$(shell echo -n \"$(final_build_id_long)\" | $(build_SHA256SUM) | cut -c-$(HASH_LENGTH))\n $(host_prefix)/.stamp_$(final_build_id): $(native_packages) $(packages)\n@@ -182,11 +178,35 @@ $(host_prefix)/.stamp_$(final_build_id): $(native_packages) $(packages)\n \t$(AT)cd $(@D); $(foreach package,$^, tar xf $($(package)_cached); )\n \t$(AT)touch $@\n \n+# $PATH is not preserved between ./configure and make by convention. Its\n+# modification and overriding at ./configure time is (as I understand it)\n+# supposed to be captured by the AC_{PROG_{,OBJ}CXX,PATH_{PROG,TOOL}} macros,\n+# which will expand the program names to their full absolute paths. The notable\n+# exception is command line overriding: ./configure CC=clang, which skips the\n+# program name expansion step, and works because the user implicitly indicates\n+# with CC=clang that clang will be available in $PATH at all times, and is most\n+# likely part of the user's system.\n+#\n+# Therefore, when we \"seed the autoconf cache\"/\"override well-known program\n+# vars\" by setting AR=<blah> in our config.site, either one of two things needs\n+# to be true for the build system to work correctly:\n+#\n+#   1. If we refer to the program by name (e.g. AR=riscv64-gnu-linux-ar), the\n+#      tool needs to be available in $PATH at all times.\n+#\n+#   2. If the tool is _**not**_ expected to be available in $PATH at all times\n+#      (such as is the case for our native_cctools binutils tools), it needs to\n+#      be referred to by its absolute path, such as would be output by the\n+#      AC_PATH_{PROG,TOOL} macros.\n+#\n+# Minor note: it is also okay to refer to tools by their absolute path even if\n+# we expect them to be available in $PATH at all times, more specificity does\n+# not hurt.\n $(host_prefix)/share/config.site : config.site.in $(host_prefix)/.stamp_$(final_build_id)\n \t$(AT)@mkdir -p $(@D)\n \t$(AT)sed -e 's|@HOST@|$(host)|' \\\n-            -e 's|@CC@|$(toolchain_path)$(host_CC)|' \\\n-            -e 's|@CXX@|$(toolchain_path)$(host_CXX)|' \\\n+            -e 's|@CC@|$(host_CC)|' \\\n+            -e 's|@CXX@|$(host_CXX)|' \\\n             -e 's|@AR@|$(binutils_path)$(host_AR)|' \\\n             -e 's|@RANLIB@|$(binutils_path)$(host_RANLIB)|' \\\n             -e 's|@NM@|$(binutils_path)$(host_NM)|' \\"
      },
      {
        "sha": "fb947bf337fe009c51059cb1a67280e3065d8fe0",
        "filename": "depends/hosts/darwin.mk",
        "status": "modified",
        "additions": 27,
        "deletions": 8,
        "changes": 35,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/880660acfa547558f6ef5adff6768de95e53af6e/depends/hosts/darwin.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/880660acfa547558f6ef5adff6768de95e53af6e/depends/hosts/darwin.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/hosts/darwin.mk?ref=880660acfa547558f6ef5adff6768de95e53af6e",
        "patch": "@@ -7,8 +7,33 @@ LD64_VERSION=530\n OSX_SDK=$(SDK_PATH)/Xcode-$(XCODE_VERSION)-$(XCODE_BUILD_ID)-extracted-SDK-with-libcxx-headers\n \n ifeq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)\n+# FORCE_USE_SYSTEM_CLANG is empty, so we use our depends-managed, pinned clang\n+# from llvm.org\n+\n+# The native_cctools package is what provides clang when FORCE_USE_SYSTEM_CLANG\n+# is empty\n+darwin_native_toolchain=native_cctools\n+\n+clang_prog=$(build_prefix)/bin/clang\n+clangxx_prog=$(clang_prog)++\n+\n clang_resource_dir=$(build_prefix)/lib/clang/$(native_cctools_clang_version)\n else\n+# FORCE_USE_SYSTEM_CLANG is non-empty, so we use the clang from the user's\n+# system\n+\n+darwin_native_toolchain=\n+\n+# We can't just use $(shell command -v clang) because GNU Make handles builtins\n+# in a special way and doesn't know that `command` is a POSIX-standard builtin\n+# prior to 1af314465e5dfe3e8baa839a32a72e83c04f26ef, first released in v4.2.90.\n+# At the time of writing, GNU Make v4.2.1 is still being used in supported\n+# distro releases.\n+#\n+# Source: https://lists.gnu.org/archive/html/bug-make/2017-11/msg00017.html\n+clang_prog=$(shell $(SHELL) $(.SHELLFLAGS) \"command -v clang\")\n+clangxx_prog=$(shell $(SHELL) $(.SHELLFLAGS) \"command -v clang++\")\n+\n clang_resource_dir=$(shell clang -print-resource-dir)\n endif\n \n@@ -62,15 +87,15 @@ endif\n darwin_CC=env -u C_INCLUDE_PATH -u CPLUS_INCLUDE_PATH \\\n               -u OBJC_INCLUDE_PATH -u OBJCPLUS_INCLUDE_PATH -u CPATH \\\n               -u LIBRARY_PATH \\\n-            clang --target=$(host) -mmacosx-version-min=$(OSX_MIN_VERSION) \\\n+            $(clang_prog) --target=$(host) -mmacosx-version-min=$(OSX_MIN_VERSION) \\\n               -B$(build_prefix)/bin -mlinker-version=$(LD64_VERSION) \\\n               --sysroot=$(OSX_SDK) \\\n               -Xclang -internal-externc-isystem$(clang_resource_dir)/include \\\n               -Xclang -internal-externc-isystem$(OSX_SDK)/usr/include\n darwin_CXX=env -u C_INCLUDE_PATH -u CPLUS_INCLUDE_PATH \\\n                -u OBJC_INCLUDE_PATH -u OBJCPLUS_INCLUDE_PATH -u CPATH \\\n                -u LIBRARY_PATH \\\n-             clang++ --target=$(host) -mmacosx-version-min=$(OSX_MIN_VERSION) \\\n+             $(clangxx_prog) --target=$(host) -mmacosx-version-min=$(OSX_MIN_VERSION) \\\n                -B$(build_prefix)/bin -mlinker-version=$(LD64_VERSION) \\\n                --sysroot=$(OSX_SDK) \\\n                -stdlib=libc++ -nostdinc++ \\\n@@ -88,10 +113,4 @@ darwin_debug_CFLAGS=-O1\n darwin_debug_CXXFLAGS=$(darwin_debug_CFLAGS)\n \n darwin_native_binutils=native_cctools\n-ifeq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)\n-darwin_native_toolchain=native_cctools\n-else\n-darwin_native_toolchain=\n-endif\n-\n darwin_cmake_system=Darwin"
      }
    ]
  },
  {
    "sha": "949c480e527532be58d6184deb313d91339efdbf",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5NDljNDgwZTUyNzUzMmJlNThkNjE4NGRlYjMxM2Q5MTMzOWVmZGJm",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-07T05:26:31Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-07T19:24:06Z"
      },
      "message": "depends: Fully determine path for darwin cctools\n\nSee previous commit for description.",
      "tree": {
        "sha": "431c39f1ee01474ff0b6c73bfef2b0f47e652b84",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/431c39f1ee01474ff0b6c73bfef2b0f47e652b84"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/949c480e527532be58d6184deb313d91339efdbf",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/949c480e527532be58d6184deb313d91339efdbf",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/949c480e527532be58d6184deb313d91339efdbf",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/949c480e527532be58d6184deb313d91339efdbf/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "880660acfa547558f6ef5adff6768de95e53af6e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/880660acfa547558f6ef5adff6768de95e53af6e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/880660acfa547558f6ef5adff6768de95e53af6e"
      }
    ],
    "stats": {
      "total": 23,
      "additions": 16,
      "deletions": 7
    },
    "files": [
      {
        "sha": "6a4f268d66d9f30ce3c774262f46a7dd7026c78b",
        "filename": "depends/Makefile",
        "status": "modified",
        "additions": 4,
        "deletions": 6,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/949c480e527532be58d6184deb313d91339efdbf/depends/Makefile",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/949c480e527532be58d6184deb313d91339efdbf/depends/Makefile",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/Makefile?ref=949c480e527532be58d6184deb313d91339efdbf",
        "patch": "@@ -166,8 +166,6 @@ $(host_arch)_$(host_os)_native_toolchain?=$($(host_os)_native_toolchain)\n \n include funcs.mk\n \n-binutils_path=$($($(host_arch)_$(host_os)_native_binutils)_prefixbin)\n-\n final_build_id_long+=$(shell $(build_SHA256SUM) config.site.in)\n final_build_id+=$(shell echo -n \"$(final_build_id_long)\" | $(build_SHA256SUM) | cut -c-$(HASH_LENGTH))\n $(host_prefix)/.stamp_$(final_build_id): $(native_packages) $(packages)\n@@ -207,10 +205,10 @@ $(host_prefix)/share/config.site : config.site.in $(host_prefix)/.stamp_$(final_\n \t$(AT)sed -e 's|@HOST@|$(host)|' \\\n             -e 's|@CC@|$(host_CC)|' \\\n             -e 's|@CXX@|$(host_CXX)|' \\\n-            -e 's|@AR@|$(binutils_path)$(host_AR)|' \\\n-            -e 's|@RANLIB@|$(binutils_path)$(host_RANLIB)|' \\\n-            -e 's|@NM@|$(binutils_path)$(host_NM)|' \\\n-            -e 's|@STRIP@|$(binutils_path)$(host_STRIP)|' \\\n+            -e 's|@AR@|$(host_AR)|' \\\n+            -e 's|@RANLIB@|$(host_RANLIB)|' \\\n+            -e 's|@NM@|$(host_NM)|' \\\n+            -e 's|@STRIP@|$(host_STRIP)|' \\\n             -e 's|@build_os@|$(build_os)|' \\\n             -e 's|@host_os@|$(host_os)|' \\\n             -e 's|@CFLAGS@|$(strip $(host_CFLAGS) $(host_$(release_type)_CFLAGS))|' \\"
      },
      {
        "sha": "646e97837af374cb78111b3f1eb3044ca4e6b09f",
        "filename": "depends/hosts/darwin.mk",
        "status": "modified",
        "additions": 12,
        "deletions": 1,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/949c480e527532be58d6184deb313d91339efdbf/depends/hosts/darwin.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/949c480e527532be58d6184deb313d91339efdbf/depends/hosts/darwin.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/hosts/darwin.mk?ref=949c480e527532be58d6184deb313d91339efdbf",
        "patch": "@@ -6,6 +6,8 @@ LD64_VERSION=530\n \n OSX_SDK=$(SDK_PATH)/Xcode-$(XCODE_VERSION)-$(XCODE_BUILD_ID)-extracted-SDK-with-libcxx-headers\n \n+darwin_native_binutils=native_cctools\n+\n ifeq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)\n # FORCE_USE_SYSTEM_CLANG is empty, so we use our depends-managed, pinned clang\n # from llvm.org\n@@ -37,6 +39,16 @@ clangxx_prog=$(shell $(SHELL) $(.SHELLFLAGS) \"command -v clang++\")\n clang_resource_dir=$(shell clang -print-resource-dir)\n endif\n \n+cctools_TOOLS=AR RANLIB STRIP NM LIBTOOL OTOOL INSTALL_NAME_TOOL\n+\n+# Make-only lowercase function\n+lc = $(subst A,a,$(subst B,b,$(subst C,c,$(subst D,d,$(subst E,e,$(subst F,f,$(subst G,g,$(subst H,h,$(subst I,i,$(subst J,j,$(subst K,k,$(subst L,l,$(subst M,m,$(subst N,n,$(subst O,o,$(subst P,p,$(subst Q,q,$(subst R,r,$(subst S,s,$(subst T,t,$(subst U,u,$(subst V,v,$(subst W,w,$(subst X,x,$(subst Y,y,$(subst Z,z,$1))))))))))))))))))))))))))\n+\n+# For well-known tools provided by cctools, make sure that their well-known\n+# variable is set to the full path of the tool, just like how AC_PATH_{TOO,PROG}\n+# would.\n+$(foreach TOOL,$(cctools_TOOLS),$(eval darwin_$(TOOL) = $$(build_prefix)/bin/$$(host)-$(call lc,$(TOOL))))\n+\n # Flag explanations:\n #\n #     -mlinker-version\n@@ -112,5 +124,4 @@ darwin_release_CXXFLAGS=$(darwin_release_CFLAGS)\n darwin_debug_CFLAGS=-O1\n darwin_debug_CXXFLAGS=$(darwin_debug_CFLAGS)\n \n-darwin_native_binutils=native_cctools\n darwin_cmake_system=Darwin"
      }
    ]
  },
  {
    "sha": "196b7276495c5d125e3799aee6cfc54be6720ec7",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxOTZiNzI3NjQ5NWM1ZDEyNWUzNzk5YWVlNmNmYzU0YmU2NzIwZWM3",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-07T05:27:11Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-01-07T19:24:06Z"
      },
      "message": "depends: Add comment about cache invalidation",
      "tree": {
        "sha": "b86ce3869105115f009f1aca9e4a78fff97ad468",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b86ce3869105115f009f1aca9e4a78fff97ad468"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/196b7276495c5d125e3799aee6cfc54be6720ec7",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/196b7276495c5d125e3799aee6cfc54be6720ec7",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/196b7276495c5d125e3799aee6cfc54be6720ec7",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/196b7276495c5d125e3799aee6cfc54be6720ec7/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "949c480e527532be58d6184deb313d91339efdbf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/949c480e527532be58d6184deb313d91339efdbf",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/949c480e527532be58d6184deb313d91339efdbf"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 2,
      "deletions": 0
    },
    "files": [
      {
        "sha": "596a46d4a242898e247cd77e744e7c9be63acda6",
        "filename": "depends/Makefile",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/196b7276495c5d125e3799aee6cfc54be6720ec7/depends/Makefile",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/196b7276495c5d125e3799aee6cfc54be6720ec7/depends/Makefile",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/Makefile?ref=196b7276495c5d125e3799aee6cfc54be6720ec7",
        "patch": "@@ -127,6 +127,8 @@ $(host_arch)_$(host_os)_id_string+=$(shell $(host_RANLIB) --version 2>/dev/null)\n $(host_arch)_$(host_os)_id_string+=$(shell $(host_STRIP) --version 2>/dev/null)\n \n ifneq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)\n+# Make sure that cache is invalidated when switching between system and\n+# depends-managed, pinned clang\n build_id_string+=system_clang\n $(host_arch)_$(host_os)_id_string+=system_clang\n endif"
      }
    ]
  }
]