[
  {
    "sha": "1221f60c94971c0f66abe5fdf086087a173bb0ac",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxMjIxZjYwYzk0OTcxYzBmNjZhYmU1ZmRmMDg2MDg3YTE3M2JiMGFj",
    "commit": {
      "author": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2017-08-14T17:36:25Z"
      },
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2017-08-16T21:22:49Z"
      },
      "message": "[wallet] Remove keypool_topup_cleanups\n\nUnused function. Mostly reverts c25d90f125d69e33688288eff439eb7be75012e9\n\nc25d90f... was merged as part of PR 11022 but is not required.",
      "tree": {
        "sha": "8146470dd268376724a84e455b21a2f26aea1839",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8146470dd268376724a84e455b21a2f26aea1839"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1221f60c94971c0f66abe5fdf086087a173bb0ac",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1221f60c94971c0f66abe5fdf086087a173bb0ac",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1221f60c94971c0f66abe5fdf086087a173bb0ac",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1221f60c94971c0f66abe5fdf086087a173bb0ac/comments",
    "author": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c2704ec98a1b7b35b6a7c1b6b26a3f16d44e8880",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c2704ec98a1b7b35b6a7c1b6b26a3f16d44e8880",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c2704ec98a1b7b35b6a7c1b6b26a3f16d44e8880"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 0,
      "deletions": 7
    },
    "files": [
      {
        "sha": "aa0713ea0363069f51381bc5fb8fed85c3306320",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 5,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1221f60c94971c0f66abe5fdf086087a173bb0ac/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1221f60c94971c0f66abe5fdf086087a173bb0ac/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=1221f60c94971c0f66abe5fdf086087a173bb0ac",
        "patch": "@@ -3663,11 +3663,6 @@ void CWallet::MarkReserveKeysAsUsed(int64_t keypool_id)\n     }\n }\n \n-bool CWallet::HasUnusedKeys(int min_keys) const\n-{\n-    return setExternalKeyPool.size() >= min_keys && (setInternalKeyPool.size() >= min_keys || !CanSupportFeature(FEATURE_HD_SPLIT));\n-}\n-\n void CWallet::GetScriptForMining(std::shared_ptr<CReserveScript> &script)\n {\n     std::shared_ptr<CReserveKey> rKey = std::make_shared<CReserveKey>(this);"
      },
      {
        "sha": "296bb73219eaa5988dd23ad4cbdd1c3690a58377",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1221f60c94971c0f66abe5fdf086087a173bb0ac/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1221f60c94971c0f66abe5fdf086087a173bb0ac/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=1221f60c94971c0f66abe5fdf086087a173bb0ac",
        "patch": "@@ -984,8 +984,6 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n      */\n     void MarkReserveKeysAsUsed(int64_t keypool_id);\n     const std::map<CKeyID, int64_t>& GetAllReserveKeys() const { return m_pool_key_to_index; }\n-    /** Does the wallet have at least min_keys in the keypool? */\n-    bool HasUnusedKeys(int min_keys) const;\n \n     std::set< std::set<CTxDestination> > GetAddressGroupings();\n     std::map<CTxDestination, CAmount> GetAddressBalances();"
      }
    ]
  },
  {
    "sha": "67ceff4039ae038ae16f06128f868a2e8395b59a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2N2NlZmY0MDM5YWUwMzhhZTE2ZjA2MTI4Zjg2OGEyZTgzOTViNTlh",
    "commit": {
      "author": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2017-08-14T17:38:21Z"
      },
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2017-08-16T21:23:20Z"
      },
      "message": "[wallet] Add logging to MarkReserveKeysAsUsed",
      "tree": {
        "sha": "81ad3f92854238b67c303040011b56a9506d8a49",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/81ad3f92854238b67c303040011b56a9506d8a49"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/67ceff4039ae038ae16f06128f868a2e8395b59a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/67ceff4039ae038ae16f06128f868a2e8395b59a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/67ceff4039ae038ae16f06128f868a2e8395b59a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/67ceff4039ae038ae16f06128f868a2e8395b59a/comments",
    "author": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1221f60c94971c0f66abe5fdf086087a173bb0ac",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1221f60c94971c0f66abe5fdf086087a173bb0ac",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1221f60c94971c0f66abe5fdf086087a173bb0ac"
      }
    ],
    "stats": {
      "total": 1,
      "additions": 1,
      "deletions": 0
    },
    "files": [
      {
        "sha": "680c5ed9b37ab91f6ef7dde1d1dc252368428a9e",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/67ceff4039ae038ae16f06128f868a2e8395b59a/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/67ceff4039ae038ae16f06128f868a2e8395b59a/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=67ceff4039ae038ae16f06128f868a2e8395b59a",
        "patch": "@@ -3659,6 +3659,7 @@ void CWallet::MarkReserveKeysAsUsed(int64_t keypool_id)\n             m_pool_key_to_index.erase(keypool.vchPubKey.GetID());\n         }\n         walletdb.ErasePool(index);\n+        LogPrintf(\"keypool index %d removed\\n\", index);\n         it = setKeyPool->erase(it);\n     }\n }"
      }
    ]
  }
]