MarcoFalke,2021-04-27 11:25:24,Can be reviewed with `--color-moved=dimmed-zebra` to reduce the review burden by 3 lines :sweat_smile: ,https://github.com/bitcoin/bitcoin/pull/21785#issuecomment-827532742,827532742,
mzumsande,2021-04-27 11:35:54,Thanks for the fix and Concept ACK. See https://github.com/bitcoin/bitcoin/pull/21707#discussion_r620085210 - there is another occurrence in `blocksonly_mode_tests`  of `p2p_addr_relay.py` that should be changed as well - by calling the `send_addr_msg()` helper as suggested by John or directly there. ,https://github.com/bitcoin/bitcoin/pull/21785#issuecomment-827538135,827538135,
jonatack,2021-04-27 17:27:55,"Concept ACK, hit this issue today.\n ",https://github.com/bitcoin/bitcoin/pull/21785#issuecomment-827780992,827780992,
mzumsande,2021-04-28 14:49:25,ACK faa51ef4d33034f8c14cfd18f1c01c90883a1bb4,https://github.com/bitcoin/bitcoin/pull/21785#issuecomment-828518423,828518423,
amitiuttarwar,2021-04-28 19:59:52,ACK faa51ef4d33034f8c14cfd18f1c01c90883a1bb4,https://github.com/bitcoin/bitcoin/pull/21785#issuecomment-828738582,828738582,
jnewbery,2021-04-29 06:56:54,ACK faa51ef4d33034f8c14cfd18f1c01c90883a1bb4. Looks good. Thanks Marco.,https://github.com/bitcoin/bitcoin/pull/21785#issuecomment-828986940,828986940,
amitiuttarwar,2021-04-27 18:44:23,"thanks for adding description here & in `sync_send_with_ping`, but imo it could be clearer. offering a suggestion incase you agree this captures the mechanism better:\n\n""Ensure the recipient node has run ProcessMessages for all previously sent p2p messages""",https://github.com/bitcoin/bitcoin/pull/21785#discussion_r621500062,621500062,test/functional/test_framework/p2p.py
amitiuttarwar,2021-04-27 18:45:09,"to consider:\n\n""Ensure the recipient node has run ProcessMessages and SendMessages for all previously sent p2p messages""",https://github.com/bitcoin/bitcoin/pull/21785#discussion_r621500606,621500606,test/functional/test_framework/p2p.py
mzumsande,2021-04-27 19:38:35,"Isn't ''**any** message"" too strong (instead of ""at least one message""), especially here but also above?  `ProcessMessages`, `ProcessMessage` and `SendMessages`  can all return early. With `SendMessages`, it goes together with a disconnect, but for `ProcessMessage(s)` there are many other ways, so that in case of multiple messages not all might have been processed in this iteration of the loop.",https://github.com/bitcoin/bitcoin/pull/21785#discussion_r621543311,621543311,test/functional/test_framework/p2p.py
amitiuttarwar,2021-04-27 20:19:15,"you make a good point, I was making an assumption about test setup that isn't necessarily true.",https://github.com/bitcoin/bitcoin/pull/21785#discussion_r621570542,621570542,test/functional/test_framework/p2p.py
MarcoFalke,2021-04-28 06:20:01,"Tried to fix, thanks",https://github.com/bitcoin/bitcoin/pull/21785#discussion_r621847441,621847441,test/functional/test_framework/p2p.py
MarcoFalke,2021-04-28 06:20:09,"Tried to fix, thanks",https://github.com/bitcoin/bitcoin/pull/21785#discussion_r621847516,621847516,test/functional/test_framework/p2p.py
