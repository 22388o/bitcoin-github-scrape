MarcoFalke,2019-09-27 17:57:08,Can be tested by injecting a failure in any test case and then running `make check`,https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-536038892,536038892,
jamesob,2019-09-27 18:07:48,"Concept ACK. \n\nRan `make -j7 check` with following patch and got confusing output - looks like a lot of duplicated lines. Maybe unavoidable?\n```diff\ndiff --git a/src/test/net_tests.cpp b/src/test/net_tests.cpp\nindex fed65afdbf..d0948dcbca 100644\n--- a/src/test/net_tests.cpp\n+++ b/src/test/net_tests.cpp\n@@ -88,6 +88,7 @@ BOOST_AUTO_TEST_CASE(cnode_listen_port)\n     BOOST_CHECK(gAr",https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-536042540,536042540,
MarcoFalke,2019-09-27 18:31:08,Whoops. Fixing ...,https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-536050700,536050700,
MarcoFalke,2019-09-27 19:16:03,Fixed,https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-536065118,536065118,
practicalswift,2019-09-28 08:10:25,Concept ACK,https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-536164721,536164721,
promag,2019-09-28 08:48:05,Concept ACK.,https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-536167217,536167217,
mzumsande,2019-09-29 23:49:13,"Concept ACK.\nThere is a data race warning in the Travis TSan build for `txindex_tests`, which I could reproduce. ",https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-536353215,536353215,
DrahtBot,2019-10-03 20:48:12,<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.,https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-538122060,538122060,
MarcoFalke,2019-10-07 20:37:25,"Ah, forgot to push one more tsan suppression. Fixed.\n\nThough, longer term I'd like to do https://github.com/bitcoin/bitcoin/issues/8670#issuecomment-539171149",https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-539193576,539193576,
adamjonas,2019-10-22 19:48:59,"utACK faa5a01d523b8eb0436128eb6c87ef22694cf13f. Tried a few different scenarios and noted that logging is provided for multiple failed test cases in a file before exiting.\n\nFor example:\n```\ntest/arith_uint256_tests.cpp:345: Entering test case ""divide""\n2019-10-22T19:44:29Z Bitcoin Core version v0.18.99.0-faa5a01d5-dirty (release build)\n2019-10-22T19:44:29Z Using 16 MiB out of 32/2 reque",https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-545124124,545124124,
MarcoFalke,2019-10-24 14:32:40,Rebased for minor merge conflict,https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-545946771,545946771,
fjahr,2019-10-28 23:55:55,"Concept ACK\n\nIf there are multiple test cases in a single test file and one of them fails currently the logs of all the test cases are printed, also the succeeding ones. Could that be improved? It could be especially annoying if there are a lot of logs for every test case and the developer would have to search for the failing one (I discovered this on `merkle_tests.cpp` where logs were short, ",https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-547196330,547196330,
MarcoFalke,2019-10-30 17:17:39,"@fjahr I don't think I can solve that without having a way to detect (inside the `TestingSetup`, e.g. the destructor) whether a test case failed\n\nAlso, I think having too much logs is better than having no logs to debug at all.",https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-548017810,548017810,
laanwj,2019-11-06 11:44:48,"Concept ACK.\n\n> Also, I think having too much logs is better than having no logs to debug at all.\n\nUsually true, though having too much (unrelated) logging can also distract. And CI web interfaces make the experience of browsing large files quite horrible. Also, too much logging can slow down the tests.\n\nBut I don't think that's the case with this change.",https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-550274009,550274009,
MarcoFalke,2019-11-07 15:49:35,"> Usually true, though having too much (unrelated) logging can also distract. And CI web interfaces make the experience of browsing large files quite horrible. Also, too much logging can slow down the tests.\n> But I don't think that's the case with this change.\n\nAgree on the distraction part, but if you set the log level to ""debug"" or ""test_suite"" I think a verbose log should be expected.\n",https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-551138333,551138333,
MarcoFalke,2019-12-20 17:58:28,Anything left to do here?,https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-568020936,568020936,
practicalswift,2019-12-20 18:59:26,ACK fad5fe2dbaef662a8d00385a3a9060aa7f4e74d7 -- diff looks correct,https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-568045382,568045382,
MarcoFalke,2020-01-02 23:20:27,Rebased to fix trivial merge conflict,https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-570395382,570395382,
jamesob,2020-01-03 16:46:09,"Would-be ACK https://github.com/bitcoin/bitcoin/pull/16975/commits/fa37e0a68bea65979f9f8f2e5258fe608acf2bdf but it looks like I've hit a deadlock.\n\nModified the coins test for failure:\n```diff\ndiff --git a/src/test/coins_tests.cpp b/src/test/coins_tests.cpp\nindex 436c1bffa0..2c20efc12b 100644\n--- a/src/test/coins_tests.cpp\n+++ b/src/test/coins_tests.cpp\n@@ -213,6 +213,7 @@ BOOST_AU",https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-570628247,570628247,
MarcoFalke,2020-01-03 17:30:18,"@jamesob I think you can't use `assert` in the boost test framework, see #16700. I'd guess this issue also happens on master",https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-570640676,570640676,
jamesob,2020-01-04 15:35:39,"ACK fa37e0a68bea65979f9f8f2e5258fe608acf2bdf ([`jamesob/ackr/16975.1.MarcoFalke.test_show_debug_log_on_u`](https://github.com/jamesob/bitcoin/tree/ackr/16975.1.MarcoFalke.test_show_debug_log_on_u))\n\nConfirmed that `assert(false);` behavior deadlocks on master too.\n\n<details><summary>Show signature data</summary>\n<p>\n\n```\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nACK fa",https://github.com/bitcoin/bitcoin/pull/16975#issuecomment-570794871,570794871,
jamesob,2019-09-27 19:39:22,Why comment the lock annotation?,https://github.com/bitcoin/bitcoin/pull/16975#discussion_r329223300,329223300,src/logging.h
jamesob,2019-09-27 19:42:23,Unused?,https://github.com/bitcoin/bitcoin/pull/16975#discussion_r329224238,329224238,src/logging.h
MarcoFalke,2019-09-27 19:47:05,"It can't compile otherwise. If you include `sync.h`, the tests won't run after compilation.",https://github.com/bitcoin/bitcoin/pull/16975#discussion_r329225812,329225812,src/logging.h
MarcoFalke,2019-09-27 19:47:25,Used in #16540 ,https://github.com/bitcoin/bitcoin/pull/16975#discussion_r329225912,329225912,src/logging.h
