[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/383819324",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13042#issuecomment-383819324",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13042",
    "id": 383819324,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MzgxOTMyNA==",
    "user": {
      "login": "qshuai",
      "id": 20664531,
      "node_id": "MDQ6VXNlcjIwNjY0NTMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/20664531?u=3b30ac3adda4dc458c563c3ad01b14ccd46da5e8&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qshuai",
      "html_url": "https://github.com/qshuai",
      "followers_url": "https://api.github.com/users/qshuai/followers",
      "following_url": "https://api.github.com/users/qshuai/following{/other_user}",
      "gists_url": "https://api.github.com/users/qshuai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qshuai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qshuai/subscriptions",
      "organizations_url": "https://api.github.com/users/qshuai/orgs",
      "repos_url": "https://api.github.com/users/qshuai/repos",
      "events_url": "https://api.github.com/users/qshuai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qshuai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-24T06:34:02Z",
    "updated_at": "2018-04-24T06:34:02Z",
    "author_association": "NONE",
    "body": "As mentioned above(testnet will exec twice), the referenced code is [here](https://github.com/bitcoin/bitcoin/blob/master/src/miner.cpp#L168-L169).\r\n```\r\nUpdateTime(pblock, chainparams.GetConsensus(), pindexPrev); \r\npblock->nBits          = GetNextWorkRequired(pindexPrev, pblock, chainparams.GetConsensus());\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/383819324/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/384554485",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13042#issuecomment-384554485",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13042",
    "id": 384554485,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDU1NDQ4NQ==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-26T08:18:15Z",
    "updated_at": "2018-04-26T08:18:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "utACK f404765c8ba6ca16f0c7d9e274fd64cf28675a6b.\r\n`pblock->nBits = GetNextWorkRequired()` is indeed called twice in that case.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/384554485/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390232911",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13042#issuecomment-390232911",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13042",
    "id": 390232911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDIzMjkxMQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-18T14:54:00Z",
    "updated_at": "2018-05-18T14:54:00Z",
    "author_association": "MEMBER",
    "body": "What is the status of this? I think the feedback wasn't addressed and I suggest closing",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390232911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184362005",
    "pull_request_review_id": 115540777,
    "id": 184362005,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDM2MjAwNQ==",
    "diff_hunk": "@@ -529,7 +529,7 @@ UniValue getblocktemplate(const JSONRPCRequest& request)\n     const Consensus::Params& consensusParams = Params().GetConsensus();\n \n     // Update nTime\n-    UpdateTime(pblock, consensusParams, pindexPrev);\n+    UpdateTime(pblock, pindexPrev);\n     pblock->nNonce = 0;",
    "path": "src/rpc/mining.cpp",
    "position": 6,
    "original_position": 6,
    "commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "original_commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You never update nBits here, whereas it should.",
    "created_at": "2018-04-26T11:55:57Z",
    "updated_at": "2018-04-26T11:55:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184362005",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184362005"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184362005"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184362005/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 533,
    "original_line": 533,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184444271",
    "pull_request_review_id": 115643231,
    "id": 184444271,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDQ0NDI3MQ==",
    "diff_hunk": "@@ -529,7 +529,7 @@ UniValue getblocktemplate(const JSONRPCRequest& request)\n     const Consensus::Params& consensusParams = Params().GetConsensus();\n \n     // Update nTime\n-    UpdateTime(pblock, consensusParams, pindexPrev);\n+    UpdateTime(pblock, pindexPrev);\n     pblock->nNonce = 0;",
    "path": "src/rpc/mining.cpp",
    "position": 6,
    "original_position": 6,
    "commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "original_commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "user": {
      "login": "qshuai",
      "id": 20664531,
      "node_id": "MDQ6VXNlcjIwNjY0NTMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/20664531?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qshuai",
      "html_url": "https://github.com/qshuai",
      "followers_url": "https://api.github.com/users/qshuai/followers",
      "following_url": "https://api.github.com/users/qshuai/following{/other_user}",
      "gists_url": "https://api.github.com/users/qshuai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qshuai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qshuai/subscriptions",
      "organizations_url": "https://api.github.com/users/qshuai/orgs",
      "repos_url": "https://api.github.com/users/qshuai/repos",
      "events_url": "https://api.github.com/users/qshuai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qshuai/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@MarcoFalke nBits updating depends on whether CreateNewBlock() is called. That is to say, nBits will be updated when CreateNewBlock() is called. It indicates the miner is mining the same height block at the current time at least if CreateNewBlock() is not called. So the nBits needs not to be update, just use cached blocktemplate. \r\nThe following is the condition of calling CreateNewBlock():\r\n```\r\nif (pindexPrev != chainActive.Tip() ||\r\n        (mempool.GetTransactionsUpdated() != nTransactionsUpdatedLast && GetTime() - nStart > 5) ||\r\n        fLastTemplateSupportsSegwit != fSupportsSegwit)\r\n```",
    "created_at": "2018-04-26T16:02:28Z",
    "updated_at": "2018-04-26T16:02:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184444271",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184444271"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184444271"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184444271/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 533,
    "original_line": 533,
    "side": "RIGHT",
    "in_reply_to_id": 184362005
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184448205",
    "pull_request_review_id": 115648045,
    "id": 184448205,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDQ0ODIwNQ==",
    "diff_hunk": "@@ -529,7 +529,7 @@ UniValue getblocktemplate(const JSONRPCRequest& request)\n     const Consensus::Params& consensusParams = Params().GetConsensus();\n \n     // Update nTime\n-    UpdateTime(pblock, consensusParams, pindexPrev);\n+    UpdateTime(pblock, pindexPrev);\n     pblock->nNonce = 0;",
    "path": "src/rpc/mining.cpp",
    "position": 6,
    "original_position": 6,
    "commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "original_commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Then, why would you need to call `UpdateTime` at all?",
    "created_at": "2018-04-26T16:14:44Z",
    "updated_at": "2018-04-26T16:14:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184448205",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184448205"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184448205"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184448205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 533,
    "original_line": 533,
    "side": "RIGHT",
    "in_reply_to_id": 184362005
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184457184",
    "pull_request_review_id": 115658839,
    "id": 184457184,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDQ1NzE4NA==",
    "diff_hunk": "@@ -529,7 +529,7 @@ UniValue getblocktemplate(const JSONRPCRequest& request)\n     const Consensus::Params& consensusParams = Params().GetConsensus();\n \n     // Update nTime\n-    UpdateTime(pblock, consensusParams, pindexPrev);\n+    UpdateTime(pblock, pindexPrev);\n     pblock->nNonce = 0;",
    "path": "src/rpc/mining.cpp",
    "position": 6,
    "original_position": 6,
    "commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "original_commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "user": {
      "login": "qshuai",
      "id": 20664531,
      "node_id": "MDQ6VXNlcjIwNjY0NTMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/20664531?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qshuai",
      "html_url": "https://github.com/qshuai",
      "followers_url": "https://api.github.com/users/qshuai/followers",
      "following_url": "https://api.github.com/users/qshuai/following{/other_user}",
      "gists_url": "https://api.github.com/users/qshuai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qshuai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qshuai/subscriptions",
      "organizations_url": "https://api.github.com/users/qshuai/orgs",
      "repos_url": "https://api.github.com/users/qshuai/repos",
      "events_url": "https://api.github.com/users/qshuai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qshuai/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "UpdateTime is responsible for updating nTime field.",
    "created_at": "2018-04-26T16:43:24Z",
    "updated_at": "2018-04-26T16:43:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184457184",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184457184"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184457184"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184457184/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 533,
    "original_line": 533,
    "side": "RIGHT",
    "in_reply_to_id": 184362005
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184529428",
    "pull_request_review_id": 115746936,
    "id": 184529428,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDUyOTQyOA==",
    "diff_hunk": "@@ -529,7 +529,7 @@ UniValue getblocktemplate(const JSONRPCRequest& request)\n     const Consensus::Params& consensusParams = Params().GetConsensus();\n \n     // Update nTime\n-    UpdateTime(pblock, consensusParams, pindexPrev);\n+    UpdateTime(pblock, pindexPrev);\n     pblock->nNonce = 0;",
    "path": "src/rpc/mining.cpp",
    "position": 6,
    "original_position": 6,
    "commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "original_commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "But it is already called in `CreateNewBlock` just before `GetNextWorkRequired`. So if you can skip the `GetNextWorkRequired` in `UpdateTime` (with the reason that it was called twice through CNB), you can also skip `UpdateTime`, no?",
    "created_at": "2018-04-26T21:00:30Z",
    "updated_at": "2018-04-26T21:00:30Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184529428",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184529428"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184529428"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184529428/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 533,
    "original_line": 533,
    "side": "RIGHT",
    "in_reply_to_id": 184362005
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184564880",
    "pull_request_review_id": 115788771,
    "id": 184564880,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDU2NDg4MA==",
    "diff_hunk": "@@ -529,7 +529,7 @@ UniValue getblocktemplate(const JSONRPCRequest& request)\n     const Consensus::Params& consensusParams = Params().GetConsensus();\n \n     // Update nTime\n-    UpdateTime(pblock, consensusParams, pindexPrev);\n+    UpdateTime(pblock, pindexPrev);\n     pblock->nNonce = 0;",
    "path": "src/rpc/mining.cpp",
    "position": 6,
    "original_position": 6,
    "commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "original_commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "user": {
      "login": "qshuai",
      "id": 20664531,
      "node_id": "MDQ6VXNlcjIwNjY0NTMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/20664531?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qshuai",
      "html_url": "https://github.com/qshuai",
      "followers_url": "https://api.github.com/users/qshuai/followers",
      "following_url": "https://api.github.com/users/qshuai/following{/other_user}",
      "gists_url": "https://api.github.com/users/qshuai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qshuai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qshuai/subscriptions",
      "organizations_url": "https://api.github.com/users/qshuai/orgs",
      "repos_url": "https://api.github.com/users/qshuai/repos",
      "events_url": "https://api.github.com/users/qshuai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qshuai/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Firstly, `UpdateTime` must be called regardless of `CreateNewBlock`:\r\n[https://github.com/bitcoin/bitcoin/blob/master/src/rpc/mining.cpp#L506-L532](https://github.com/bitcoin/bitcoin/blob/master/src/rpc/mining.cpp#L506-L532)\r\n\r\nSecondly,  `GetNextWorkRequired` and `TestBlockValidity` use the nTime field. So it may be necessary to update nTime field in advance. ",
    "created_at": "2018-04-27T00:17:24Z",
    "updated_at": "2018-04-27T01:44:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184564880",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184564880"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184564880"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184564880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 533,
    "original_line": 533,
    "side": "RIGHT",
    "in_reply_to_id": 184362005
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184673002",
    "pull_request_review_id": 115919145,
    "id": 184673002,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDY3MzAwMg==",
    "diff_hunk": "@@ -529,7 +529,7 @@ UniValue getblocktemplate(const JSONRPCRequest& request)\n     const Consensus::Params& consensusParams = Params().GetConsensus();\n \n     // Update nTime\n-    UpdateTime(pblock, consensusParams, pindexPrev);\n+    UpdateTime(pblock, pindexPrev);\n     pblock->nNonce = 0;",
    "path": "src/rpc/mining.cpp",
    "position": 6,
    "original_position": 6,
    "commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "original_commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "If you don't update nBits here, then this patch would change behavior for `getblocktemplate` users on testnet, right?  Previously the calculated difficulty could go down if enough time passes (even using a cached block), whereas after this patch that could no longer happen.",
    "created_at": "2018-04-27T12:30:26Z",
    "updated_at": "2018-04-27T12:30:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184673002",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184673002"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184673002"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184673002/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 533,
    "original_line": 533,
    "side": "RIGHT",
    "in_reply_to_id": 184362005
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184704430",
    "pull_request_review_id": 115958693,
    "id": 184704430,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDcwNDQzMA==",
    "diff_hunk": "@@ -529,7 +529,7 @@ UniValue getblocktemplate(const JSONRPCRequest& request)\n     const Consensus::Params& consensusParams = Params().GetConsensus();\n \n     // Update nTime\n-    UpdateTime(pblock, consensusParams, pindexPrev);\n+    UpdateTime(pblock, pindexPrev);\n     pblock->nNonce = 0;",
    "path": "src/rpc/mining.cpp",
    "position": 6,
    "original_position": 6,
    "commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "original_commit_id": "f404765c8ba6ca16f0c7d9e274fd64cf28675a6b",
    "user": {
      "login": "qshuai",
      "id": 20664531,
      "node_id": "MDQ6VXNlcjIwNjY0NTMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/20664531?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qshuai",
      "html_url": "https://github.com/qshuai",
      "followers_url": "https://api.github.com/users/qshuai/followers",
      "following_url": "https://api.github.com/users/qshuai/following{/other_user}",
      "gists_url": "https://api.github.com/users/qshuai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qshuai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qshuai/subscriptions",
      "organizations_url": "https://api.github.com/users/qshuai/orgs",
      "repos_url": "https://api.github.com/users/qshuai/repos",
      "events_url": "https://api.github.com/users/qshuai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qshuai/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@sdaftuar Yeah, that is true. I did not consider it before now. So it works although it is  a bad code smell.",
    "created_at": "2018-04-27T14:28:30Z",
    "updated_at": "2018-04-27T14:28:30Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184704430",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184704430"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13042#discussion_r184704430"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13042"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184704430/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 533,
    "original_line": 533,
    "side": "RIGHT",
    "in_reply_to_id": 184362005
  }
]