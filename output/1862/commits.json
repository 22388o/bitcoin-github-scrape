[
  {
    "sha": "b202d430762c1b5c9925e948f357c66040f95f10",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiMjAyZDQzMDc2MmMxYjVjOTkyNWU5NDhmMzU3YzY2MDQwZjk1ZjEw",
    "commit": {
      "author": {
        "name": "kjj2",
        "email": "github@jerviss.org",
        "date": "2012-09-24T13:39:12Z"
      },
      "committer": {
        "name": "kjj2",
        "email": "github@jerviss.org",
        "date": "2012-09-24T20:26:04Z"
      },
      "message": "Fix: when testnet=1 specified, change default ports to 18332 and 18333",
      "tree": {
        "sha": "6c2ac2791649f43884ffc7f8a367ee22627b7890",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6c2ac2791649f43884ffc7f8a367ee22627b7890"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b202d430762c1b5c9925e948f357c66040f95f10",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b202d430762c1b5c9925e948f357c66040f95f10",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b202d430762c1b5c9925e948f357c66040f95f10",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b202d430762c1b5c9925e948f357c66040f95f10/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "6cbae37667f504d9ecd6173e1eff817d2b7aaf0c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6cbae37667f504d9ecd6173e1eff817d2b7aaf0c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6cbae37667f504d9ecd6173e1eff817d2b7aaf0c"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 8,
      "deletions": 3
    },
    "files": [
      {
        "sha": "6072b270b05d6a9d7a00d94f8491697625a3fadd",
        "filename": "src/bitcoinrpc.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 2,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b202d430762c1b5c9925e948f357c66040f95f10/src/bitcoinrpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b202d430762c1b5c9925e948f357c66040f95f10/src/bitcoinrpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoinrpc.cpp?ref=b202d430762c1b5c9925e948f357c66040f95f10",
        "patch": "@@ -40,6 +40,11 @@ const Object emptyobj;\n \n void ThreadRPCServer3(void* parg);\n \n+static inline unsigned short GetDefaultRPCPort()\n+{\n+    return GetBoolArg(\"-testnet\", false) ? 18332 : 8332;\n+}\n+\n Object JSONRPCError(int code, const string& message)\n {\n     Object error;\n@@ -760,7 +765,7 @@ void ThreadRPCServer2(void* parg)\n     // Try a dual IPv6/IPv4 socket, falling back to separate IPv4 and IPv6 sockets\n     const bool loopback = !mapArgs.count(\"-rpcallowip\");\n     asio::ip::address bindAddress = loopback ? asio::ip::address_v6::loopback() : asio::ip::address_v6::any();\n-    ip::tcp::endpoint endpoint(bindAddress, GetArg(\"-rpcport\", 8332));\n+    ip::tcp::endpoint endpoint(bindAddress, GetArg(\"-rpcport\", GetDefaultRPCPort()));\n     boost::system::error_code v6_only_error;\n     boost::shared_ptr<ip::tcp::acceptor> acceptor(new ip::tcp::acceptor(io_service));\n \n@@ -1055,7 +1060,7 @@ Object CallRPC(const string& strMethod, const Array& params)\n     asio::ssl::stream<asio::ip::tcp::socket> sslStream(io_service, context);\n     SSLIOStreamDevice<asio::ip::tcp> d(sslStream, fUseSSL);\n     iostreams::stream< SSLIOStreamDevice<asio::ip::tcp> > stream(d);\n-    if (!d.connect(GetArg(\"-rpcconnect\", \"127.0.0.1\"), GetArg(\"-rpcport\", \"8332\")))\n+    if (!d.connect(GetArg(\"-rpcconnect\", \"127.0.0.1\"), GetArg(\"-rpcport\", itostr(GetDefaultRPCPort()))))\n         throw runtime_error(\"couldn't connect to server\");\n \n     // HTTP basic authentication"
      },
      {
        "sha": "8910ed071174a6a5d5a2ef827e6e8f844710ac82",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b202d430762c1b5c9925e948f357c66040f95f10/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b202d430762c1b5c9925e948f357c66040f95f10/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=b202d430762c1b5c9925e948f357c66040f95f10",
        "patch": "@@ -272,7 +272,7 @@ std::string HelpMessage()\n #endif\n         \"  -rpcuser=<user>        \" + _(\"Username for JSON-RPC connections\") + \"\\n\" +\n         \"  -rpcpassword=<pw>      \" + _(\"Password for JSON-RPC connections\") + \"\\n\" +\n-        \"  -rpcport=<port>        \" + _(\"Listen for JSON-RPC connections on <port> (default: 8332)\") + \"\\n\" +\n+        \"  -rpcport=<port>        \" + _(\"Listen for JSON-RPC connections on <port> (default: 8332 or testnet: 18332)\") + \"\\n\" +\n         \"  -rpcallowip=<ip>       \" + _(\"Allow JSON-RPC connections from specified IP address\") + \"\\n\" +\n         \"  -rpcconnect=<ip>       \" + _(\"Send commands to node running on <ip> (default: 127.0.0.1)\") + \"\\n\" +\n         \"  -blocknotify=<cmd>     \" + _(\"Execute command when the best block changes (%s in cmd is replaced by block hash)\") + \"\\n\" +"
      }
    ]
  }
]