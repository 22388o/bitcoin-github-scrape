[
  {
    "sha": "1e9c5c4fa8beb68f196ad971d7cfee68a1cfcca0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxZTljNWM0ZmE4YmViNjhmMTk2YWQ5NzFkN2NmZWU2OGExY2ZjY2Ew",
    "commit": {
      "author": {
        "name": "Z5483",
        "email": "Z5483Y@gmail.com",
        "date": "2020-08-27T14:18:01Z"
      },
      "committer": {
        "name": "Z5483",
        "email": "Z5483Y@gmail.com",
        "date": "2020-09-01T17:30:24Z"
      },
      "message": "ci: check if scripted diff is using BSD sed syntax",
      "tree": {
        "sha": "716827bd5e4a7383ddddeca5e9ac084331ff45dd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/716827bd5e4a7383ddddeca5e9ac084331ff45dd"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1e9c5c4fa8beb68f196ad971d7cfee68a1cfcca0",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1e9c5c4fa8beb68f196ad971d7cfee68a1cfcca0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1e9c5c4fa8beb68f196ad971d7cfee68a1cfcca0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1e9c5c4fa8beb68f196ad971d7cfee68a1cfcca0/comments",
    "author": {
      "login": "khuei",
      "id": 52610961,
      "node_id": "MDQ6VXNlcjUyNjEwOTYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/52610961?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/khuei",
      "html_url": "https://github.com/khuei",
      "followers_url": "https://api.github.com/users/khuei/followers",
      "following_url": "https://api.github.com/users/khuei/following{/other_user}",
      "gists_url": "https://api.github.com/users/khuei/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/khuei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/khuei/subscriptions",
      "organizations_url": "https://api.github.com/users/khuei/orgs",
      "repos_url": "https://api.github.com/users/khuei/repos",
      "events_url": "https://api.github.com/users/khuei/events{/privacy}",
      "received_events_url": "https://api.github.com/users/khuei/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "khuei",
      "id": 52610961,
      "node_id": "MDQ6VXNlcjUyNjEwOTYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/52610961?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/khuei",
      "html_url": "https://github.com/khuei",
      "followers_url": "https://api.github.com/users/khuei/followers",
      "following_url": "https://api.github.com/users/khuei/following{/other_user}",
      "gists_url": "https://api.github.com/users/khuei/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/khuei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/khuei/subscriptions",
      "organizations_url": "https://api.github.com/users/khuei/orgs",
      "repos_url": "https://api.github.com/users/khuei/repos",
      "events_url": "https://api.github.com/users/khuei/events{/privacy}",
      "received_events_url": "https://api.github.com/users/khuei/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2562d5d23863b6ef6cbdd9c34db5e485d9dc8406",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2562d5d23863b6ef6cbdd9c34db5e485d9dc8406",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2562d5d23863b6ef6cbdd9c34db5e485d9dc8406"
      }
    ],
    "stats": {
      "total": 22,
      "additions": 22,
      "deletions": 0
    },
    "files": [
      {
        "sha": "50f026f97829a7398ff0103e18cffba5f5b41a2d",
        "filename": "test/lint/commit-script-check.sh",
        "status": "modified",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1e9c5c4fa8beb68f196ad971d7cfee68a1cfcca0/test/lint/commit-script-check.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1e9c5c4fa8beb68f196ad971d7cfee68a1cfcca0/test/lint/commit-script-check.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/lint/commit-script-check.sh?ref=1e9c5c4fa8beb68f196ad971d7cfee68a1cfcca0",
        "patch": "@@ -29,6 +29,28 @@ for commit in $(git rev-list --reverse $1); do\n             echo \"Failed\"\n             RET=1\n         else\n+            for option in $(echo $SCRIPT | grep -w 'sed'); do\n+                case $option in\n+                    \"''\")\n+                        BSD_SED=1\n+                        continue\n+                        ;;\n+                    -*a*)\n+                        BSD_SED=1\n+                        continue\n+                        ;;\n+                    -*I*)\n+                        BSD_SED=1\n+                        continue\n+                        ;;\n+                esac\n+            done\n+            if test $BSD_SED -eq 1; then\n+                echo \"Error: scripted diff contain sed syntax in BSD extensions\"\n+                echo \"Failed\"\n+                RET=1\n+                continue\n+            fi\n             echo \"Running script for: $commit\"\n             echo \"$SCRIPT\"\n             (eval \"$SCRIPT\")"
      }
    ]
  }
]