[
  {
    "sha": "d795c610d3095eeff1bfe5c1a34877cf0a841823",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNzk1YzYxMGQzMDk1ZWVmZjFiZmU1YzFhMzQ4NzdjZjBhODQxODIz",
    "commit": {
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2018-08-01T16:43:46Z"
      },
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2018-08-01T16:43:46Z"
      },
      "message": "[qt] TransactionView: highlight replacement tx after fee bump",
      "tree": {
        "sha": "12d7283e8d47e592949337b12d90eb29f314c781",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/12d7283e8d47e592949337b12d90eb29f314c781"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d795c610d3095eeff1bfe5c1a34877cf0a841823",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAlth40QACgkQV/+b28ww\nEAkTFg//VBGoy6R/mtf1qKkyBqwX9BgSVEBqxV+PyD3AXcna6OIKbPJbjHmUs9KU\nBiLc5ttm4lfeqnZU6M7/nM7uNThItKJ3oWhfgw404vKPUpYMEk4GhEVDApusv3Sl\nGlxVfBP4zDWD04mi+HzxaL/ApJTbuA6ZzY7aRYCsRpnJWwaZxzX5l9ocQsgqofLE\nTd8n3wVl/2LNJ0caaeOuxnu9FmMXwmQ03SAF6kMpY3fxTYu/WQDQd28BEwp13M26\nBAgyc7kwF/UxLYMMVNLA83wKs6g3A5GdkGuKPqHhK5sDj+XuM4lgZAImfwQiYuxb\nyU6zXol930FOpbCY1r0fORpCwkfAmSWIjyTMaUjoI9rAsbq8N+33PX+0lZ7g144l\nz86Wc9ibT7srxPN5+JX6WxCvxC4+lwT6QdjPgwRqp3Exwa5i8B+PjojIyCzTS9L3\ndqc6GZclusWOY38TjeGJgG0Iot3jrWnnv+lyu4tGLsc588zZ3WzMzccaIMmyBzrq\nfLg9ti1T09yACuDEozEAudEvCW/46Vv7JFYQIohn3I6LfWUFTLBguB2WziSsOnSL\nqMyCjcojAyKF64VPsCpct2cZkXT4XGvqLsediHu058UnCbYv+moov1brYJVpGCQC\nl7zXwobj2K/4GpkOsYw64+rl8/MG9b1s4NenMojWJlVuHm1RKLQ=\n=T0k6\n-----END PGP SIGNATURE-----",
        "payload": "tree 12d7283e8d47e592949337b12d90eb29f314c781\nparent c88529a178d5ca719ebab597a4c4c3437327b2f6\nauthor Sjors Provoost <sjors@sprovoost.nl> 1533141826 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1533141826 +0200\n\n[qt] TransactionView: highlight replacement tx after fee bump\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d795c610d3095eeff1bfe5c1a34877cf0a841823",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d795c610d3095eeff1bfe5c1a34877cf0a841823",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d795c610d3095eeff1bfe5c1a34877cf0a841823/comments",
    "author": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c88529a178d5ca719ebab597a4c4c3437327b2f6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c88529a178d5ca719ebab597a4c4c3437327b2f6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c88529a178d5ca719ebab597a4c4c3437327b2f6"
      }
    ],
    "stats": {
      "total": 22,
      "additions": 17,
      "deletions": 5
    },
    "files": [
      {
        "sha": "2fd2b815aa9c5b9306cf5b028b1868676fc29201",
        "filename": "src/qt/transactionview.cpp",
        "status": "modified",
        "additions": 12,
        "deletions": 1,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d795c610d3095eeff1bfe5c1a34877cf0a841823/src/qt/transactionview.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d795c610d3095eeff1bfe5c1a34877cf0a841823/src/qt/transactionview.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionview.cpp?ref=d795c610d3095eeff1bfe5c1a34877cf0a841823",
        "patch": "@@ -19,6 +19,7 @@\n \n #include <ui_interface.h>\n \n+#include <QApplication>\n #include <QComboBox>\n #include <QDateTimeEdit>\n #include <QDesktopServices>\n@@ -198,6 +199,11 @@ TransactionView::TransactionView(const PlatformStyle *platformStyle, QWidget *pa\n     connect(copyTxPlainText, SIGNAL(triggered()), this, SLOT(copyTxPlainText()));\n     connect(editLabelAction, SIGNAL(triggered()), this, SLOT(editLabel()));\n     connect(showDetailsAction, SIGNAL(triggered()), this, SLOT(showDetails()));\n+\n+    // Highlight transaction after fee bump\n+    connect(this, &TransactionView::bumpedFee, [this](const uint256& txid) {\n+      focusTransaction(txid);\n+    });\n }\n \n void TransactionView::setModel(WalletModel *_model)\n@@ -428,9 +434,14 @@ void TransactionView::bumpFee()\n     hash.SetHex(hashQStr.toStdString());\n \n     // Bump tx fee over the walletModel\n-    if (model->bumpFee(hash)) {\n+    uint256 newHash;\n+    if (model->bumpFee(hash, newHash)) {\n         // Update the table\n+        transactionView->selectionModel()->clearSelection();\n         model->getTransactionTableModel()->updateTransaction(hashQStr, CT_UPDATED, true);\n+\n+        qApp->processEvents();\n+        Q_EMIT bumpedFee(newHash);\n     }\n }\n "
      },
      {
        "sha": "9819fb43256752287955bca6ab36ddcb970f261b",
        "filename": "src/qt/transactionview.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d795c610d3095eeff1bfe5c1a34877cf0a841823/src/qt/transactionview.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d795c610d3095eeff1bfe5c1a34877cf0a841823/src/qt/transactionview.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionview.h?ref=d795c610d3095eeff1bfe5c1a34877cf0a841823",
        "patch": "@@ -110,6 +110,8 @@ private Q_SLOTS:\n     /**  Fired when a message should be reported to the user */\n     void message(const QString &title, const QString &message, unsigned int style);\n \n+    void bumpedFee(const uint256& txid);\n+\n public Q_SLOTS:\n     void chooseDate(int idx);\n     void chooseType(int idx);"
      },
      {
        "sha": "17df1bd4d187b584ef3a0bd338b8da1900f43842",
        "filename": "src/qt/walletmodel.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 3,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d795c610d3095eeff1bfe5c1a34877cf0a841823/src/qt/walletmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d795c610d3095eeff1bfe5c1a34877cf0a841823/src/qt/walletmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.cpp?ref=d795c610d3095eeff1bfe5c1a34877cf0a841823",
        "patch": "@@ -492,7 +492,7 @@ bool WalletModel::saveReceiveRequest(const std::string &sAddress, const int64_t\n         return m_wallet->addDestData(dest, key, sRequest);\n }\n \n-bool WalletModel::bumpFee(uint256 hash)\n+bool WalletModel::bumpFee(uint256 hash, uint256& new_hash)\n {\n     CCoinControl coin_control;\n     coin_control.m_signal_bip125_rbf = true;\n@@ -544,8 +544,7 @@ bool WalletModel::bumpFee(uint256 hash)\n         return false;\n     }\n     // commit the bumped transaction\n-    uint256 txid;\n-    if(!m_wallet->commitBumpTransaction(hash, std::move(mtx), errors, txid)) {\n+    if(!m_wallet->commitBumpTransaction(hash, std::move(mtx), errors, new_hash)) {\n         QMessageBox::critical(0, tr(\"Fee bump error\"), tr(\"Could not commit transaction\") + \"<br />(\" +\n             QString::fromStdString(errors[0])+\")\");\n          return false;"
      },
      {
        "sha": "2d53a7dc4d9474ff3128ac67bd77aaa8c77c647e",
        "filename": "src/qt/walletmodel.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d795c610d3095eeff1bfe5c1a34877cf0a841823/src/qt/walletmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d795c610d3095eeff1bfe5c1a34877cf0a841823/src/qt/walletmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.h?ref=d795c610d3095eeff1bfe5c1a34877cf0a841823",
        "patch": "@@ -194,7 +194,7 @@ class WalletModel : public QObject\n     void loadReceiveRequests(std::vector<std::string>& vReceiveRequests);\n     bool saveReceiveRequest(const std::string &sAddress, const int64_t nId, const std::string &sRequest);\n \n-    bool bumpFee(uint256 hash);\n+    bool bumpFee(uint256 hash, uint256& new_hash);\n \n     static bool isWalletEnabled();\n     bool privateKeysDisabled() const;"
      }
    ]
  }
]