laanwj,2019-11-05 23:44:11,"I'm afraid this is still a layer violation, but the other way around :smile: \n- ""Compacting"" is berkeleyDB specific, other databases may not have anything similar\n- I don't think direct use of `BerkeleyBatch` is supposed to leak into `wallet.cpp`. At least, this is the first occurence.",https://github.com/bitcoin/bitcoin/pull/17386#discussion_r342854662,342854662,src/wallet/wallet.cpp
laanwj,2019-11-05 23:46:23,"So ideally this would iterate over current wallet databases, not current wallets, it's just that we don't have an iterator like that. Note that it does nothing with `pwallet` except get its database.",https://github.com/bitcoin/bitcoin/pull/17386#discussion_r342855208,342855208,src/wallet/walletdb.cpp
Empact,2019-11-06 00:41:26,Yeah that makes sense. Thanks,https://github.com/bitcoin/bitcoin/pull/17386#discussion_r342868895,342868895,src/wallet/wallet.cpp
