[
  {
    "sha": "c41d05b081d28616b0ef11dffac5f7d35d8fa8c4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjNDFkMDViMDgxZDI4NjE2YjBlZjExZGZmYWM1ZjdkMzVkOGZhOGM0",
    "commit": {
      "author": {
        "name": "St\u00e9phane Gimenez",
        "email": "dev@gim.name",
        "date": "2011-06-27T21:23:49Z"
      },
      "committer": {
        "name": "St\u00e9phane Gimenez",
        "email": "dev@gim.name",
        "date": "2011-08-10T13:28:02Z"
      },
      "message": "Add a check for validity of sending addresses (Issue #328)",
      "tree": {
        "sha": "769d9b0d90e7f97ea63eb1fe8a864b53d636054c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/769d9b0d90e7f97ea63eb1fe8a864b53d636054c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c41d05b081d28616b0ef11dffac5f7d35d8fa8c4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c41d05b081d28616b0ef11dffac5f7d35d8fa8c4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c41d05b081d28616b0ef11dffac5f7d35d8fa8c4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c41d05b081d28616b0ef11dffac5f7d35d8fa8c4/comments",
    "author": {
      "login": "sgimenez",
      "id": 858993,
      "node_id": "MDQ6VXNlcjg1ODk5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858993?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sgimenez",
      "html_url": "https://github.com/sgimenez",
      "followers_url": "https://api.github.com/users/sgimenez/followers",
      "following_url": "https://api.github.com/users/sgimenez/following{/other_user}",
      "gists_url": "https://api.github.com/users/sgimenez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sgimenez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sgimenez/subscriptions",
      "organizations_url": "https://api.github.com/users/sgimenez/orgs",
      "repos_url": "https://api.github.com/users/sgimenez/repos",
      "events_url": "https://api.github.com/users/sgimenez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sgimenez/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sgimenez",
      "id": 858993,
      "node_id": "MDQ6VXNlcjg1ODk5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858993?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sgimenez",
      "html_url": "https://github.com/sgimenez",
      "followers_url": "https://api.github.com/users/sgimenez/followers",
      "following_url": "https://api.github.com/users/sgimenez/following{/other_user}",
      "gists_url": "https://api.github.com/users/sgimenez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sgimenez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sgimenez/subscriptions",
      "organizations_url": "https://api.github.com/users/sgimenez/orgs",
      "repos_url": "https://api.github.com/users/sgimenez/repos",
      "events_url": "https://api.github.com/users/sgimenez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sgimenez/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9f0ac16942d9f15ec57204448436cd429badf481",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9f0ac16942d9f15ec57204448436cd429badf481",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9f0ac16942d9f15ec57204448436cd429badf481"
      }
    ],
    "stats": {
      "total": 21,
      "additions": 14,
      "deletions": 7
    },
    "files": [
      {
        "sha": "a098465c476e078b2a2a5b13ae0e7d2ed4bca146",
        "filename": "src/ui.cpp",
        "status": "modified",
        "additions": 13,
        "deletions": 6,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c41d05b081d28616b0ef11dffac5f7d35d8fa8c4/src/ui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c41d05b081d28616b0ef11dffac5f7d35d8fa8c4/src/ui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/ui.cpp?ref=c41d05b081d28616b0ef11dffac5f7d35d8fa8c4",
        "patch": "@@ -2736,13 +2736,20 @@ void CAddressBookDialog::OnButtonCopy(wxCommandEvent& event)\n     }\n }\n \n-bool CAddressBookDialog::CheckIfMine(const string& strAddress, const string& strTitle)\n+bool CAddressBookDialog::CheckSendingAddress(const string& strAddress, const string& strTitle)\n {\n     CBitcoinAddress address(strAddress);\n-    bool fMine = address.IsValid() && pwalletMain->HaveKey(address);\n-    if (fMine)\n+    if (!address.IsValid())\n+    {\n+        wxMessageBox(_(\"Invalid bitcoin address\"), strTitle);\n+        return false;\n+    }\n+    if (pwalletMain->HaveKey(address))\n+    {\n         wxMessageBox(_(\"This is one of your own addresses for receiving payments and cannot be entered in the address book.  \"), strTitle);\n-    return fMine;\n+        return false;\n+    }\n+    return true;\n }\n \n void CAddressBookDialog::OnButtonEdit(wxCommandEvent& event)\n@@ -2765,7 +2772,7 @@ void CAddressBookDialog::OnButtonEdit(wxCommandEvent& event)\n             strName = dialog.GetValue1();\n             strAddress = dialog.GetValue2();\n         }\n-        while (CheckIfMine(strAddress, _(\"Edit Address\")));\n+        while (!CheckSendingAddress(strAddress, _(\"Edit Address\")));\n \n     }\n     else if (nPage == RECEIVING)\n@@ -2805,7 +2812,7 @@ void CAddressBookDialog::OnButtonNew(wxCommandEvent& event)\n             strName = dialog.GetValue1();\n             strAddress = dialog.GetValue2();\n         }\n-        while (CheckIfMine(strAddress, _(\"Add Address\")));\n+        while (!CheckSendingAddress(strAddress, _(\"Add Address\")));\n     }\n     else if (nPage == RECEIVING)\n     {"
      },
      {
        "sha": "cb0f29539173091fb7c19a6ec11f74c8bdde74bb",
        "filename": "src/ui.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c41d05b081d28616b0ef11dffac5f7d35d8fa8c4/src/ui.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c41d05b081d28616b0ef11dffac5f7d35d8fa8c4/src/ui.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/ui.h?ref=c41d05b081d28616b0ef11dffac5f7d35d8fa8c4",
        "patch": "@@ -264,7 +264,7 @@ class CAddressBookDialog : public CAddressBookDialogBase\n     wxString GetSelectedAddress();\n     wxString GetSelectedSendingAddress();\n     wxString GetSelectedReceivingAddress();\n-    bool CheckIfMine(const std::string& strAddress, const std::string& strTitle);\n+    bool CheckSendingAddress(const std::string& strAddress, const std::string& strTitle);\n };\n \n "
      }
    ]
  },
  {
    "sha": "c613990c389249fcb755faefe5c1076b7c15614e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjNjEzOTkwYzM4OTI0OWZjYjc1NWZhZWZlNWMxMDc2YjdjMTU2MTRl",
    "commit": {
      "author": {
        "name": "St\u00e9phane Gimenez",
        "email": "dev@gim.name",
        "date": "2011-06-21T17:13:50Z"
      },
      "committer": {
        "name": "St\u00e9phane Gimenez",
        "email": "dev@gim.name",
        "date": "2011-08-10T13:28:02Z"
      },
      "message": "Fix for setaccount related Issue #329",
      "tree": {
        "sha": "70cc328b3cf101c8166d2bb3a963c611e74e1ce3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/70cc328b3cf101c8166d2bb3a963c611e74e1ce3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c613990c389249fcb755faefe5c1076b7c15614e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c613990c389249fcb755faefe5c1076b7c15614e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c613990c389249fcb755faefe5c1076b7c15614e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c613990c389249fcb755faefe5c1076b7c15614e/comments",
    "author": {
      "login": "sgimenez",
      "id": 858993,
      "node_id": "MDQ6VXNlcjg1ODk5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858993?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sgimenez",
      "html_url": "https://github.com/sgimenez",
      "followers_url": "https://api.github.com/users/sgimenez/followers",
      "following_url": "https://api.github.com/users/sgimenez/following{/other_user}",
      "gists_url": "https://api.github.com/users/sgimenez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sgimenez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sgimenez/subscriptions",
      "organizations_url": "https://api.github.com/users/sgimenez/orgs",
      "repos_url": "https://api.github.com/users/sgimenez/repos",
      "events_url": "https://api.github.com/users/sgimenez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sgimenez/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sgimenez",
      "id": 858993,
      "node_id": "MDQ6VXNlcjg1ODk5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858993?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sgimenez",
      "html_url": "https://github.com/sgimenez",
      "followers_url": "https://api.github.com/users/sgimenez/followers",
      "following_url": "https://api.github.com/users/sgimenez/following{/other_user}",
      "gists_url": "https://api.github.com/users/sgimenez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sgimenez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sgimenez/subscriptions",
      "organizations_url": "https://api.github.com/users/sgimenez/orgs",
      "repos_url": "https://api.github.com/users/sgimenez/repos",
      "events_url": "https://api.github.com/users/sgimenez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sgimenez/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c41d05b081d28616b0ef11dffac5f7d35d8fa8c4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c41d05b081d28616b0ef11dffac5f7d35d8fa8c4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c41d05b081d28616b0ef11dffac5f7d35d8fa8c4"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "1a72c7979c04df7ca335715ac1141f0dee4e4295",
        "filename": "src/rpc.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c613990c389249fcb755faefe5c1076b7c15614e/src/rpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c613990c389249fcb755faefe5c1076b7c15614e/src/rpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc.cpp?ref=c613990c389249fcb755faefe5c1076b7c15614e",
        "patch": "@@ -445,7 +445,7 @@ Value setaccount(const Array& params, bool fHelp)\n     CRITICAL_BLOCK(pwalletMain->cs_mapWallet)\n     CRITICAL_BLOCK(pwalletMain->cs_mapAddressBook)\n     {\n-        if (pwalletMain->mapAddressBook.count(address))\n+        if (pwalletMain->HaveKey(address) && pwalletMain->mapAddressBook.count(address))\n         {\n             string strOldAccount = pwalletMain->mapAddressBook[address];\n             if (address == GetAccountAddress(strOldAccount))"
      }
    ]
  },
  {
    "sha": "21b31e1761ed06e07d898dc75013135da5b657a9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyMWIzMWUxNzYxZWQwNmUwN2Q4OThkYzc1MDEzMTM1ZGE1YjY1N2E5",
    "commit": {
      "author": {
        "name": "St\u00e9phane Gimenez",
        "email": "dev@gim.name",
        "date": "2011-08-10T13:26:52Z"
      },
      "committer": {
        "name": "St\u00e9phane Gimenez",
        "email": "dev@gim.name",
        "date": "2011-08-10T13:28:02Z"
      },
      "message": "Avoid propagation of unnecessary updates to CWalletDB",
      "tree": {
        "sha": "11cfcbe39aff0e98d3ba9b7a6620914bb891973d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/11cfcbe39aff0e98d3ba9b7a6620914bb891973d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/21b31e1761ed06e07d898dc75013135da5b657a9",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/21b31e1761ed06e07d898dc75013135da5b657a9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/21b31e1761ed06e07d898dc75013135da5b657a9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/21b31e1761ed06e07d898dc75013135da5b657a9/comments",
    "author": {
      "login": "sgimenez",
      "id": 858993,
      "node_id": "MDQ6VXNlcjg1ODk5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858993?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sgimenez",
      "html_url": "https://github.com/sgimenez",
      "followers_url": "https://api.github.com/users/sgimenez/followers",
      "following_url": "https://api.github.com/users/sgimenez/following{/other_user}",
      "gists_url": "https://api.github.com/users/sgimenez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sgimenez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sgimenez/subscriptions",
      "organizations_url": "https://api.github.com/users/sgimenez/orgs",
      "repos_url": "https://api.github.com/users/sgimenez/repos",
      "events_url": "https://api.github.com/users/sgimenez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sgimenez/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sgimenez",
      "id": 858993,
      "node_id": "MDQ6VXNlcjg1ODk5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858993?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sgimenez",
      "html_url": "https://github.com/sgimenez",
      "followers_url": "https://api.github.com/users/sgimenez/followers",
      "following_url": "https://api.github.com/users/sgimenez/following{/other_user}",
      "gists_url": "https://api.github.com/users/sgimenez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sgimenez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sgimenez/subscriptions",
      "organizations_url": "https://api.github.com/users/sgimenez/orgs",
      "repos_url": "https://api.github.com/users/sgimenez/repos",
      "events_url": "https://api.github.com/users/sgimenez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sgimenez/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c613990c389249fcb755faefe5c1076b7c15614e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c613990c389249fcb755faefe5c1076b7c15614e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c613990c389249fcb755faefe5c1076b7c15614e"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 4,
      "deletions": 0
    },
    "files": [
      {
        "sha": "c81537bafa9177b76e041e4946d4c80d17b6543c",
        "filename": "src/wallet.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/21b31e1761ed06e07d898dc75013135da5b657a9/src/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/21b31e1761ed06e07d898dc75013135da5b657a9/src/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet.cpp?ref=21b31e1761ed06e07d898dc75013135da5b657a9",
        "patch": "@@ -1154,6 +1154,8 @@ int CWallet::LoadWallet(bool& fFirstRunRet)\n \n bool CWallet::SetAddressBookName(const CBitcoinAddress& address, const string& strName)\n {\n+    if (mapAddressBook.count(address) && mapAddressBook[address] == strName)\n+        return false;\n     mapAddressBook[address] = strName;\n     if (!fFileBacked)\n         return false;\n@@ -1162,6 +1164,8 @@ bool CWallet::SetAddressBookName(const CBitcoinAddress& address, const string& s\n \n bool CWallet::DelAddressBookName(const CBitcoinAddress& address)\n {\n+    if (!mapAddressBook.count(address))\n+        return false;\n     mapAddressBook.erase(address);\n     if (!fFileBacked)\n         return false;"
      }
    ]
  }
]