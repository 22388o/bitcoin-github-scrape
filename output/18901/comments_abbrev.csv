sipa,2020-05-06 23:21:24,"I dislike changes like this. The code is correct, and the compiler is just not smart enough to figure it out. Silencing the warning means it'd become harder to detect actual bugs that might be introduced later.",https://github.com/bitcoin/bitcoin/pull/18901#issuecomment-624940664,624940664,
MarcoFalke,2020-05-06 23:25:48,I wouldn't mind setting `--enable-c++17` on the fuzz tests and then simply using `std::optional`,https://github.com/bitcoin/bitcoin/pull/18901#issuecomment-624942087,624942087,
sipa,2020-05-06 23:27:27,@MarcoFalke Seems reasonable.,https://github.com/bitcoin/bitcoin/pull/18901#issuecomment-624942620,624942620,
brakmic,2020-05-07 05:45:01,Is it OK to close this PR? @MarcoFalke ,https://github.com/bitcoin/bitcoin/pull/18901#issuecomment-625041564,625041564,
MarcoFalke,2020-05-07 12:17:34,"Oh, I was hoping you keep working on this. All you need to do is to switch the flag in the ci config for the fuzz test. See `git grep '\--enable-c++1' ci`\n\nThen `#import <optional>` and adjust the fix.",https://github.com/bitcoin/bitcoin/pull/18901#issuecomment-625219618,625219618,
brakmic,2020-05-07 12:19:45,"> Oh, I was hoping you keep working on this. All you need to do is to switch the flag in the ci config for the fuzz test. See `git grep '\--enable-c++1' ci`\n> \n> Then `#import <optional>` and adjust the fix.\n\nNo problem, I'll gladly continue working on it. :)\n\nMy impression was, that you are going to introduce new flags and include std::optional which would render this solution obsolet",https://github.com/bitcoin/bitcoin/pull/18901#issuecomment-625220696,625220696,
MarcoFalke,2020-05-07 13:27:43,glanced over the code on GitHub for 5 seconds ACK 4f0a6d79c7efc950b263a91084fdef2354567f54,https://github.com/bitcoin/bitcoin/pull/18901#issuecomment-625255309,625255309,
brakmic,2020-05-07 13:31:38,"> glanced over the code on GitHub for 5 seconds ACK [4f0a6d7](https://github.com/bitcoin/bitcoin/commit/4f0a6d79c7efc950b263a91084fdef2354567f54)\n\nThanks. Pushed again because forgot to include you as co-author. ",https://github.com/bitcoin/bitcoin/pull/18901#issuecomment-625257480,625257480,
brakmic,2020-05-07 14:43:55,"@MarcoFalke \nThe two fuzz tests on travis seem to be working fine. No warnings related to **sep_pos** so far. \n\nHowever, there is another error message, from the fuzzer itself. Not related to this PR, actually, but worth looking into, I think:\n\n```shell\n #1 0x556d615cabf0 in ArgsManager::ParseParameters(int, char const* const*, std::__cxx11::basic_string<char, std::char_traits<char>, s",https://github.com/bitcoin/bitcoin/pull/18901#issuecomment-625298734,625298734,
brakmic,2020-05-07 18:02:18,"@MarcoFalke \n\nI think the UB problem has to do with [this line](https://github.com/bitcoin/bitcoin/blob/master/src/util/system.cpp#L288) of code in util/system.cpp\n\n```cpp\nfor (int i = 1; i < argc; i++) {\n      std::string key(argv[i]);\n```\n\nI'll create a draft PR and test it. If it passes, I'll open a proper PR.\n\n--EDIT: Currently compiling with fuzzers on my macOS. Let's se",https://github.com/bitcoin/bitcoin/pull/18901#issuecomment-625410181,625410181,
practicalswift,2020-05-07 20:05:07,Is there any reason to go with `std::optional` instead of the expected `Optional`? :),https://github.com/bitcoin/bitcoin/pull/18901#issuecomment-625469044,625469044,
practicalswift,2020-05-09 10:05:31,ACK 420fa0770f37619bfa29898d59dac45b6a477abb,https://github.com/bitcoin/bitcoin/pull/18901#issuecomment-626141619,626141619,
MarcoFalke,2020-05-09 11:30:14,ACK 420fa07,https://github.com/bitcoin/bitcoin/pull/18901#issuecomment-626153938,626153938,
promag,2020-05-06 23:14:18,Could do `size_t sep_pos = buffer.size();` and before usage do `assert(sep_pos < buffer.size())`.,https://github.com/bitcoin/bitcoin/pull/18901#discussion_r421145625,421145625,src/test/fuzz/asmap_direct.cpp
brakmic,2020-05-07 05:44:27,"I took the recommended value from compiler warning message. But it seems that there is a much better solution to that proposed by @MarcoFalke \n",https://github.com/bitcoin/bitcoin/pull/18901#discussion_r421252350,421252350,src/test/fuzz/asmap_direct.cpp
MarcoFalke,2020-05-07 13:16:37,can remove this now,https://github.com/bitcoin/bitcoin/pull/18901#discussion_r421494818,421494818,src/test/fuzz/asmap_direct.cpp
sipa,2020-05-07 16:12:16,"Nit: this is the default constructor, so you can drop the `= std::nullopt;`.",https://github.com/bitcoin/bitcoin/pull/18901#discussion_r421625187,421625187,src/test/fuzz/asmap_direct.cpp
MarcoFalke,2020-05-08 22:16:48,"for a smaller diff you could rename the optional to `sep_pos_opt` and insert before this line\n\n```cpp\nconst size_t sep_pos{sep_pos_opt.value()};",https://github.com/bitcoin/bitcoin/pull/18901#discussion_r422400580,422400580,src/test/fuzz/asmap_direct.cpp
MarcoFalke,2020-05-08 23:59:07,"The two lines are swapped, no?\n```suggestion\n    if (!sep_pos_opt) return; // Needs exactly 1 separator\n```",https://github.com/bitcoin/bitcoin/pull/18901#discussion_r422424169,422424169,src/test/fuzz/asmap_direct.cpp
brakmic,2020-05-09 08:01:19,"Yeah, ~these errors happen when you have no working compiler on your machine~. ~Can't compile fuzzing variants anymore~ (*Catalina is not an OS but Malware*). It's time for Linux VM.\n\nSorry!\n\n--EDIT: it works now, somehow.",https://github.com/bitcoin/bitcoin/pull/18901#discussion_r422466853,422466853,src/test/fuzz/asmap_direct.cpp
