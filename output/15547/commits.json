[
  {
    "sha": "f61b3f8cce7403de0c95499243b99a7ac2b8169f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmNjFiM2Y4Y2NlNzQwM2RlMGM5NTQ5OTI0M2I5OWE3YWMyYjgxNjlm",
    "commit": {
      "author": {
        "name": "Gregory Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2019-03-06T13:29:39Z"
      },
      "committer": {
        "name": "Gregory Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2019-03-06T13:29:39Z"
      },
      "message": "Switch wallet default to reject too-long transaction chains for mempool",
      "tree": {
        "sha": "5ba050ac4eba4c0921906ba366849a94257019a8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5ba050ac4eba4c0921906ba366849a94257019a8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f61b3f8cce7403de0c95499243b99a7ac2b8169f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f61b3f8cce7403de0c95499243b99a7ac2b8169f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f61b3f8cce7403de0c95499243b99a7ac2b8169f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f61b3f8cce7403de0c95499243b99a7ac2b8169f/comments",
    "author": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "3800ca606896eb2d7b20816f3040f61ef0c8356f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3800ca606896eb2d7b20816f3040f61ef0c8356f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/3800ca606896eb2d7b20816f3040f61ef0c8356f"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 6,
      "deletions": 6
    },
    "files": [
      {
        "sha": "f23abe1393e0ba8fa3e2b549a06376852173022d",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f61b3f8cce7403de0c95499243b99a7ac2b8169f/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f61b3f8cce7403de0c95499243b99a7ac2b8169f/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=f61b3f8cce7403de0c95499243b99a7ac2b8169f",
        "patch": "@@ -83,7 +83,7 @@ static const CAmount WALLET_INCREMENTAL_RELAY_FEE = 5000;\n //! Default for -spendzeroconfchange\n static const bool DEFAULT_SPEND_ZEROCONF_CHANGE = true;\n //! Default for -walletrejectlongchains\n-static const bool DEFAULT_WALLET_REJECT_LONG_CHAINS = false;\n+static const bool DEFAULT_WALLET_REJECT_LONG_CHAINS = true;\n //! Default for -avoidpartialspends\n static const bool DEFAULT_AVOIDPARTIALSPENDS = false;\n //! -txconfirmtarget default"
      },
      {
        "sha": "c16dc358db921570725cadd5510b8f6d9dccad02",
        "filename": "test/functional/wallet_basic.py",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f61b3f8cce7403de0c95499243b99a7ac2b8169f/test/functional/wallet_basic.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f61b3f8cce7403de0c95499243b99a7ac2b8169f/test/functional/wallet_basic.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/wallet_basic.py?ref=f61b3f8cce7403de0c95499243b99a7ac2b8169f",
        "patch": "@@ -420,8 +420,8 @@ def run_test(self):\n         for m in maintenance:\n             self.log.info(\"check \" + m)\n             self.stop_nodes()\n-            # set lower ancestor limit for later\n-            self.start_node(0, [m, \"-limitancestorcount=\" + str(chainlimit)])\n+            # set lower ancestor limit and allow node0 wallet to make too-long chains for later\n+            self.start_node(0, [m, \"-limitancestorcount=\" + str(chainlimit), \"-walletrejectlongchains=0\"])\n             self.start_node(1, [m, \"-limitancestorcount=\" + str(chainlimit)])\n             self.start_node(2, [m, \"-limitancestorcount=\" + str(chainlimit)])\n             if m == '-reindex':\n@@ -460,18 +460,18 @@ def run_test(self):\n         assert_equal(self.nodes[0].getmempoolinfo()['size'], chainlimit * 2)\n         assert_equal(len(txid_list), chainlimit * 2)\n \n-        # Without walletrejectlongchains, we will still generate a txid\n+        # With walletrejectlongchains=0, we will still generate a txid\n         # The tx will be stored in the wallet but not accepted to the mempool\n         extra_txid = self.nodes[0].sendtoaddress(sending_addr, Decimal('0.0001'))\n         assert extra_txid not in self.nodes[0].getrawmempool()\n         assert extra_txid in [tx[\"txid\"] for tx in self.nodes[0].listtransactions()]\n         self.nodes[0].abandontransaction(extra_txid)\n         total_txs = len(self.nodes[0].listtransactions(\"*\", 99999))\n \n-        # Try with walletrejectlongchains\n+        # Try with walletrejectlongchains default value of true\n         # Double chain limit but require combining inputs, so we pass SelectCoinsMinConf\n         self.stop_node(0)\n-        self.start_node(0, extra_args=[\"-walletrejectlongchains\", \"-limitancestorcount=\" + str(2 * chainlimit)])\n+        self.start_node(0, extra_args=[\"-limitancestorcount=\" + str(2 * chainlimit)])\n \n         # wait for loadmempool\n         timeout = 10"
      }
    ]
  }
]