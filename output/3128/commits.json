[
  {
    "sha": "22de68dffc1e94c5b06b7e512140c42290cb4f5d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyMmRlNjhkZmZjMWU5NGM1YjA2YjdlNTEyMTQwYzQyMjkwY2I0ZjVk",
    "commit": {
      "author": {
        "name": "Peter Todd",
        "email": "pete@petertodd.org",
        "date": "2013-10-24T08:32:35Z"
      },
      "committer": {
        "name": "Peter Todd",
        "email": "pete@petertodd.org",
        "date": "2013-10-24T08:32:35Z"
      },
      "message": "Relay OP_RETURN TxOut as standard transaction type\n\nAlso fix decoderawtransaction to not show reqSigs or addresses for\nnulldata txouts. (Previous version also left reqSigs uninitialized\nmistakenly)",
      "tree": {
        "sha": "9f723331f610480aa0af80aff36411bc2a3c6b95",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9f723331f610480aa0af80aff36411bc2a3c6b95"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/22de68dffc1e94c5b06b7e512140c42290cb4f5d",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.12 (GNU/Linux)\n\niQGrBAABCACVBQJSaNslXhSAAAAAABUAQGJsb2NraGFzaEBiaXRjb2luLm9yZzAw\nMDAwMDAwMDAwMDAwMGZkMjQ4MmExMTgxYTY5YmE2ODcwNjM0MTZmNzc2OWU4ZGU2\nMjVhMzZhZGI0MTRhZjEvFIAAAAAAFQARcGthLWFkZHJlc3NAZ251cGcub3JncGV0\nZUBwZXRlcnRvZC5vcmcACgkQJIFAPaXwkftUdgf/YlWft0IKgssgTItqqaanFDah\n4m0wJApQ5BLWVtZq21Tybz9c1rq0yaij0YACl+lJ3PCueu6jok1jH10CAiX4x6Me\nEjY8EKCEXu2q+mPLVCC6iiTM0Yl9T0yYV1IOAR5syFEQtfbaSy3z59mEoPVzGcaY\n5sDq45aqRPzxOlxXbXUvlong36URrvyJdRUoDCZvX38luAEGBCLz9Iy3/dwtp2W6\nrI6p9Dmjc6m0HX5CLFRBPGxq06af8JrKcofsKlZauiWimFol/mqLysca6ffDJchr\nkAZES99gwLycF+hWj3hWWSdjskCM9ksqYZRb+G+03ZU8VEeDA0hIon9IsJX+4w==\n=z7o/\n-----END PGP SIGNATURE-----",
        "payload": "tree 9f723331f610480aa0af80aff36411bc2a3c6b95\nparent 125bdead3e9be9a6ce23129409612a4d8501980b\nauthor Peter Todd <pete@petertodd.org> 1382603555 -0400\ncommitter Peter Todd <pete@petertodd.org> 1382603555 -0400\n\nRelay OP_RETURN TxOut as standard transaction type\n\nAlso fix decoderawtransaction to not show reqSigs or addresses for\nnulldata txouts. (Previous version also left reqSigs uninitialized\nmistakenly)\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/22de68dffc1e94c5b06b7e512140c42290cb4f5d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/22de68dffc1e94c5b06b7e512140c42290cb4f5d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/22de68dffc1e94c5b06b7e512140c42290cb4f5d/comments",
    "author": {
      "login": "petertodd",
      "id": 7042,
      "node_id": "MDQ6VXNlcjcwNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petertodd",
      "html_url": "https://github.com/petertodd",
      "followers_url": "https://api.github.com/users/petertodd/followers",
      "following_url": "https://api.github.com/users/petertodd/following{/other_user}",
      "gists_url": "https://api.github.com/users/petertodd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
      "organizations_url": "https://api.github.com/users/petertodd/orgs",
      "repos_url": "https://api.github.com/users/petertodd/repos",
      "events_url": "https://api.github.com/users/petertodd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petertodd/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "petertodd",
      "id": 7042,
      "node_id": "MDQ6VXNlcjcwNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petertodd",
      "html_url": "https://github.com/petertodd",
      "followers_url": "https://api.github.com/users/petertodd/followers",
      "following_url": "https://api.github.com/users/petertodd/following{/other_user}",
      "gists_url": "https://api.github.com/users/petertodd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
      "organizations_url": "https://api.github.com/users/petertodd/orgs",
      "repos_url": "https://api.github.com/users/petertodd/repos",
      "events_url": "https://api.github.com/users/petertodd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petertodd/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "125bdead3e9be9a6ce23129409612a4d8501980b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/125bdead3e9be9a6ce23129409612a4d8501980b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/125bdead3e9be9a6ce23129409612a4d8501980b"
      }
    ],
    "stats": {
      "total": 29,
      "additions": 22,
      "deletions": 7
    },
    "files": [
      {
        "sha": "cb571947a9d9c37c19e13af63e9d69ca281c7fb2",
        "filename": "src/rpcrawtransaction.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22de68dffc1e94c5b06b7e512140c42290cb4f5d/src/rpcrawtransaction.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22de68dffc1e94c5b06b7e512140c42290cb4f5d/src/rpcrawtransaction.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcrawtransaction.cpp?ref=22de68dffc1e94c5b06b7e512140c42290cb4f5d",
        "patch": "@@ -29,7 +29,7 @@ void ScriptPubKeyToJSON(const CScript& scriptPubKey, Object& out, bool fIncludeH\n \n     if (!ExtractDestinations(scriptPubKey, type, addresses, nRequired))\n     {\n-        out.push_back(Pair(\"type\", GetTxnOutputType(TX_NONSTANDARD)));\n+        out.push_back(Pair(\"type\", GetTxnOutputType(type)));\n         return;\n     }\n "
      },
      {
        "sha": "ec9e9d61deb49e57820b6c52351a8394170d0162",
        "filename": "src/script.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 5,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22de68dffc1e94c5b06b7e512140c42290cb4f5d/src/script.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22de68dffc1e94c5b06b7e512140c42290cb4f5d/src/script.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/script.cpp?ref=22de68dffc1e94c5b06b7e512140c42290cb4f5d",
        "patch": "@@ -1195,7 +1195,7 @@ bool CheckSig(vector<unsigned char> vchSig, const vector<unsigned char> &vchPubK\n bool Solver(const CScript& scriptPubKey, txnouttype& typeRet, vector<vector<unsigned char> >& vSolutionsRet)\n {\n     // Templates\n-    static map<txnouttype, CScript> mTemplates;\n+    static multimap<txnouttype, CScript> mTemplates;\n     if (mTemplates.empty())\n     {\n         // Standard tx, sender provides pubkey, receiver adds signature\n@@ -1209,6 +1209,7 @@ bool Solver(const CScript& scriptPubKey, txnouttype& typeRet, vector<vector<unsi\n \n         // Empty, provably prunable, data-carrying output\n         mTemplates.insert(make_pair(TX_NULL_DATA, CScript() << OP_RETURN << OP_SMALLDATA));\n+        mTemplates.insert(make_pair(TX_NULL_DATA, CScript() << OP_RETURN));\n     }\n \n     // Shortcut for pay-to-script-hash, which are more constrained than the other types:\n@@ -1392,9 +1393,8 @@ int ScriptSigArgsExpected(txnouttype t, const std::vector<std::vector<unsigned c\n     switch (t)\n     {\n     case TX_NONSTANDARD:\n-        return -1;\n     case TX_NULL_DATA:\n-        return 1;\n+        return -1;\n     case TX_PUBKEY:\n         return 1;\n     case TX_PUBKEYHASH:\n@@ -1532,8 +1532,10 @@ bool ExtractDestinations(const CScript& scriptPubKey, txnouttype& typeRet, vecto\n     vector<valtype> vSolutions;\n     if (!Solver(scriptPubKey, typeRet, vSolutions))\n         return false;\n-    if (typeRet == TX_NULL_DATA)\n-        return true;\n+    if (typeRet == TX_NULL_DATA){\n+        // This is data, not addresses\n+        return false;\n+    }\n \n     if (typeRet == TX_MULTISIG)\n     {"
      },
      {
        "sha": "c6bc2e8aa196de6ca11f2f13e50e962b8a2baf62",
        "filename": "src/test/transaction_tests.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 1,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22de68dffc1e94c5b06b7e512140c42290cb4f5d/src/test/transaction_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22de68dffc1e94c5b06b7e512140c42290cb4f5d/src/test/transaction_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/transaction_tests.cpp?ref=22de68dffc1e94c5b06b7e512140c42290cb4f5d",
        "patch": "@@ -282,11 +282,24 @@ BOOST_AUTO_TEST_CASE(test_IsStandard)\n     t.vout[0].scriptPubKey = CScript() << OP_RETURN << ParseHex(\"04678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef3804678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef3800\");\n     BOOST_CHECK(!IsStandardTx(t, reason));\n \n-    // Only one TX_NULL_DATA permitted\n+    // TX_NULL_DATA w/o PUSHDATA\n+    t.vout.resize(1);\n+    t.vout[0].scriptPubKey = CScript() << OP_RETURN;\n+    BOOST_CHECK(IsStandardTx(t, reason));\n+\n+    // Only one TX_NULL_DATA permitted in all cases\n     t.vout.resize(2);\n     t.vout[0].scriptPubKey = CScript() << OP_RETURN << ParseHex(\"04678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef3804678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38\");\n     t.vout[1].scriptPubKey = CScript() << OP_RETURN << ParseHex(\"04678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef3804678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38\");\n     BOOST_CHECK(!IsStandardTx(t, reason));\n+\n+    t.vout[0].scriptPubKey = CScript() << OP_RETURN << ParseHex(\"04678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef3804678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38\");\n+    t.vout[1].scriptPubKey = CScript() << OP_RETURN;\n+    BOOST_CHECK(!IsStandardTx(t, reason));\n+\n+    t.vout[0].scriptPubKey = CScript() << OP_RETURN;\n+    t.vout[1].scriptPubKey = CScript() << OP_RETURN;\n+    BOOST_CHECK(!IsStandardTx(t, reason));\n }\n \n BOOST_AUTO_TEST_SUITE_END()"
      }
    ]
  },
  {
    "sha": "005609539b2184a474ffe9ebfe883984c900a3fb",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMDU2MDk1MzliMjE4NGE0NzRmZmU5ZWJmZTg4Mzk4NGM5MDBhM2Zi",
    "commit": {
      "author": {
        "name": "Peter Todd",
        "email": "pete@petertodd.org",
        "date": "2013-10-24T08:52:16Z"
      },
      "committer": {
        "name": "Peter Todd",
        "email": "pete@petertodd.org",
        "date": "2013-10-24T08:52:16Z"
      },
      "message": "Show short scriptPubKeys correctly\n\nPreviously bitcoin-qt's -debug transaction info was showing CTxOut([error])\n\nIt is valid for a scriptPubKey to be any size, for example simply\nOP_RETURN is valid and can be used to destroy a TXOUT to mining fees.",
      "tree": {
        "sha": "09ca40ac7b728882753c056f31d821cd3e825a9b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/09ca40ac7b728882753c056f31d821cd3e825a9b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/005609539b2184a474ffe9ebfe883984c900a3fb",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.12 (GNU/Linux)\n\niQGrBAABCACVBQJSaN/uXhSAAAAAABUAQGJsb2NraGFzaEBiaXRjb2luLm9yZzAw\nMDAwMDAwMDAwMDAwMDUyYjZiMDkwYTVjMGJkNzRmMjdlYTBmZmNkMDM2M2E3Y2M0\nNDBhNzY0NzFlODY4MWEvFIAAAAAAFQARcGthLWFkZHJlc3NAZ251cGcub3JncGV0\nZUBwZXRlcnRvZC5vcmcACgkQJIFAPaXwkfsbYwf/dR27doG87qFIXU8EI/Pl5fP7\npDAm7p9YeuFnw7FlDs+FdhZBwfh6pXF0PQWJIIkiKV8Q8p2WT23MKd9K5xuZ8d/k\nHD3bmO59v0qP8xcX1dO16fyWq5BFbQ1Dwbz4rq9PCk0qXpOufmQD5IwO2/JBkazy\n9y9HQJfLAIB5Dl3jrtNRAfSmsV54RVuMdXZiLPtijNU/jor/7iyJMlXxXHoN9B3T\ndNtPxFpa9Lk1xMmmbbeJ3Sn0BKnHVMEUfu22vlyMHk0E2RzkHWjSt8craG9J9DcD\naLXUpPVIOVc+aLH4hJnhQvgqQwwiysK1g9eE9w1L0oaZ2LrTzgyNV0Hiqex6nQ==\n=Q/+u\n-----END PGP SIGNATURE-----",
        "payload": "tree 09ca40ac7b728882753c056f31d821cd3e825a9b\nparent 22de68dffc1e94c5b06b7e512140c42290cb4f5d\nauthor Peter Todd <pete@petertodd.org> 1382604736 -0400\ncommitter Peter Todd <pete@petertodd.org> 1382604736 -0400\n\nShow short scriptPubKeys correctly\n\nPreviously bitcoin-qt's -debug transaction info was showing CTxOut([error])\n\nIt is valid for a scriptPubKey to be any size, for example simply\nOP_RETURN is valid and can be used to destroy a TXOUT to mining fees.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/005609539b2184a474ffe9ebfe883984c900a3fb",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/005609539b2184a474ffe9ebfe883984c900a3fb",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/005609539b2184a474ffe9ebfe883984c900a3fb/comments",
    "author": {
      "login": "petertodd",
      "id": 7042,
      "node_id": "MDQ6VXNlcjcwNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petertodd",
      "html_url": "https://github.com/petertodd",
      "followers_url": "https://api.github.com/users/petertodd/followers",
      "following_url": "https://api.github.com/users/petertodd/following{/other_user}",
      "gists_url": "https://api.github.com/users/petertodd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
      "organizations_url": "https://api.github.com/users/petertodd/orgs",
      "repos_url": "https://api.github.com/users/petertodd/repos",
      "events_url": "https://api.github.com/users/petertodd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petertodd/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "petertodd",
      "id": 7042,
      "node_id": "MDQ6VXNlcjcwNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petertodd",
      "html_url": "https://github.com/petertodd",
      "followers_url": "https://api.github.com/users/petertodd/followers",
      "following_url": "https://api.github.com/users/petertodd/following{/other_user}",
      "gists_url": "https://api.github.com/users/petertodd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
      "organizations_url": "https://api.github.com/users/petertodd/orgs",
      "repos_url": "https://api.github.com/users/petertodd/repos",
      "events_url": "https://api.github.com/users/petertodd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petertodd/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "22de68dffc1e94c5b06b7e512140c42290cb4f5d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/22de68dffc1e94c5b06b7e512140c42290cb4f5d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/22de68dffc1e94c5b06b7e512140c42290cb4f5d"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 0,
      "deletions": 2
    },
    "files": [
      {
        "sha": "5512f81b618002a114ce26f281a9cd2ce213ea0d",
        "filename": "src/core.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/005609539b2184a474ffe9ebfe883984c900a3fb/src/core.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/005609539b2184a474ffe9ebfe883984c900a3fb/src/core.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/core.cpp?ref=005609539b2184a474ffe9ebfe883984c900a3fb",
        "patch": "@@ -63,8 +63,6 @@ uint256 CTxOut::GetHash() const\n \n std::string CTxOut::ToString() const\n {\n-    if (scriptPubKey.size() < 6)\n-        return \"CTxOut(error)\";\n     return strprintf(\"CTxOut(nValue=%\"PRI64d\".%08\"PRI64d\", scriptPubKey=%s)\", nValue / COIN, nValue % COIN, scriptPubKey.ToString().substr(0,30).c_str());\n }\n "
      }
    ]
  }
]