[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/394032009",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13365#issuecomment-394032009",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13365",
    "id": 394032009,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDAzMjAwOQ==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-01T23:07:59Z",
    "updated_at": "2018-06-01T23:07:59Z",
    "author_association": "MEMBER",
    "body": "I don't think this is the correct fix. What if the caller wants an empty string? ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/394032009/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/394211141",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13365#issuecomment-394211141",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13365",
    "id": 394211141,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDIxMTE0MQ==",
    "user": {
      "login": "yuntai",
      "id": 371172,
      "node_id": "MDQ6VXNlcjM3MTE3Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/371172?u=1dad33291221e4236ba168553c1f6ac94c05cdba&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yuntai",
      "html_url": "https://github.com/yuntai",
      "followers_url": "https://api.github.com/users/yuntai/followers",
      "following_url": "https://api.github.com/users/yuntai/following{/other_user}",
      "gists_url": "https://api.github.com/users/yuntai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yuntai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yuntai/subscriptions",
      "organizations_url": "https://api.github.com/users/yuntai/orgs",
      "repos_url": "https://api.github.com/users/yuntai/repos",
      "events_url": "https://api.github.com/users/yuntai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yuntai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-04T01:28:10Z",
    "updated_at": "2018-06-04T01:28:10Z",
    "author_association": "NONE",
    "body": "being addressed in #13381 ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/394211141/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192535900",
    "pull_request_review_id": 125341257,
    "id": 192535900,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5MjUzNTkwMA==",
    "diff_hunk": "@@ -3262,7 +3262,8 @@ bool CWallet::SetAddressBook(const CTxDestination& address, const std::string& s\n         LOCK(cs_wallet); // mapAddressBook\n         std::map<CTxDestination, CAddressBookData>::iterator mi = mapAddressBook.find(address);\n         fUpdated = mi != mapAddressBook.end();\n-        mapAddressBook[address].name = strName;\n+        if (!strName.empty()) /* update name only if requested */",
    "path": "src/wallet/wallet.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "ce5431eaa87e8a882d587644975e973d7eb8f787",
    "original_commit_id": "ce5431eaa87e8a882d587644975e973d7eb8f787",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is incorrect. If `mapAddressBook` doesn't already have an entry for `address`, an empty **has** to be created, or the resulting address will be considered change.",
    "created_at": "2018-06-01T23:20:00Z",
    "updated_at": "2018-06-01T23:20:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13365#discussion_r192535900",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13365",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192535900"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13365#discussion_r192535900"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13365"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192535900/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3265,
    "original_line": 3265,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192536725",
    "pull_request_review_id": 125342233,
    "id": 192536725,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5MjUzNjcyNQ==",
    "diff_hunk": "@@ -3262,7 +3262,8 @@ bool CWallet::SetAddressBook(const CTxDestination& address, const std::string& s\n         LOCK(cs_wallet); // mapAddressBook\n         std::map<CTxDestination, CAddressBookData>::iterator mi = mapAddressBook.find(address);\n         fUpdated = mi != mapAddressBook.end();\n-        mapAddressBook[address].name = strName;\n+        if (!strName.empty()) /* update name only if requested */",
    "path": "src/wallet/wallet.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "ce5431eaa87e8a882d587644975e973d7eb8f787",
    "original_commit_id": "ce5431eaa87e8a882d587644975e973d7eb8f787",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Right, funny travis is green.",
    "created_at": "2018-06-01T23:28:06Z",
    "updated_at": "2018-06-01T23:28:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13365#discussion_r192536725",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13365",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192536725"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13365#discussion_r192536725"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13365"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192536725/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3265,
    "original_line": 3265,
    "side": "RIGHT",
    "in_reply_to_id": 192535900
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192551966",
    "pull_request_review_id": 125357954,
    "id": 192551966,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5MjU1MTk2Ng==",
    "diff_hunk": "@@ -3262,7 +3262,8 @@ bool CWallet::SetAddressBook(const CTxDestination& address, const std::string& s\n         LOCK(cs_wallet); // mapAddressBook\n         std::map<CTxDestination, CAddressBookData>::iterator mi = mapAddressBook.find(address);\n         fUpdated = mi != mapAddressBook.end();\n-        mapAddressBook[address].name = strName;\n+        if (!strName.empty()) /* update name only if requested */",
    "path": "src/wallet/wallet.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "ce5431eaa87e8a882d587644975e973d7eb8f787",
    "original_commit_id": "ce5431eaa87e8a882d587644975e973d7eb8f787",
    "user": {
      "login": "yuntai",
      "id": 371172,
      "node_id": "MDQ6VXNlcjM3MTE3Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/371172?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yuntai",
      "html_url": "https://github.com/yuntai",
      "followers_url": "https://api.github.com/users/yuntai/followers",
      "following_url": "https://api.github.com/users/yuntai/following{/other_user}",
      "gists_url": "https://api.github.com/users/yuntai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yuntai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yuntai/subscriptions",
      "organizations_url": "https://api.github.com/users/yuntai/orgs",
      "repos_url": "https://api.github.com/users/yuntai/repos",
      "events_url": "https://api.github.com/users/yuntai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yuntai/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It's green because there is no test case where strPurpose.isEmpty(). \r\n\r\nAs far as #13087 concerned, I could think of:\r\n* disallow adding key when it's already in the wallet\r\n(so as to allow the user to recreate wallet and import the address again to change label) \r\n'importaddress' already disallow adding an existing address.\r\n\r\n* extend existing rpc commands (import*key) to allow the user update label/purpose (possibly with an additional flag?). not sure how to allow the user to specify an explicit empty label.\r\n\r\n* adding new rpc command for updating label/purpose (and remove)\r\n\r\n\r\n\r\n\r\n",
    "created_at": "2018-06-02T06:40:40Z",
    "updated_at": "2018-06-02T06:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13365#discussion_r192551966",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13365",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192551966"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13365#discussion_r192551966"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13365"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192551966/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3265,
    "original_line": 3265,
    "side": "RIGHT",
    "in_reply_to_id": 192535900
  }
]