[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/205877424",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7816#issuecomment-205877424",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7816",
    "id": 205877424,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNTg3NzQyNA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-05T16:14:02Z",
    "updated_at": "2016-04-05T16:14:02Z",
    "author_association": "MEMBER",
    "body": "This is meant to fix #7794\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/205877424/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/205947403",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7816#issuecomment-205947403",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7816",
    "id": 205947403,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNTk0NzQwMw==",
    "user": {
      "login": "paveljanik",
      "id": 6848764,
      "node_id": "MDQ6VXNlcjY4NDg3NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6848764?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paveljanik",
      "html_url": "https://github.com/paveljanik",
      "followers_url": "https://api.github.com/users/paveljanik/followers",
      "following_url": "https://api.github.com/users/paveljanik/following{/other_user}",
      "gists_url": "https://api.github.com/users/paveljanik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paveljanik/subscriptions",
      "organizations_url": "https://api.github.com/users/paveljanik/orgs",
      "repos_url": "https://api.github.com/users/paveljanik/repos",
      "events_url": "https://api.github.com/users/paveljanik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paveljanik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-05T18:53:19Z",
    "updated_at": "2016-04-05T18:53:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "tests fail with:\n\n```\nInitializing test directory /var/folders/65/fn0h49r55k7779vg1b_h461r0000gn/T/testfGlvKm\nJSONRPC error: Error: Keypool ran out, please call keypoolrefill first\n  File \"/private/tmp/bitcoin-7816/qa/rpc-tests/test_framework/test_framework.py\", line 135, in main\n    self.run_test()\n  File \"./keypool.py\", line 83, in run_test\n    nodes[0].generate(1)\n  File \"/private/tmp/bitcoin-7816/qa/rpc-tests/test_framework/coverage.py\", line 50, in __call__\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n  File \"/private/tmp/bitcoin-7816/qa/rpc-tests/test_framework/authproxy.py\", line 139, in __call__\n    raise JSONRPCException(response['error'])\nStopping nodes\nCleaning up\nFailed\n```\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/205947403/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/206169576",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7816#issuecomment-206169576",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7816",
    "id": 206169576,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjE2OTU3Ng==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-06T07:12:10Z",
    "updated_at": "2016-04-06T07:12:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "Fixed the bug (accidentally erase keypool key) that caused the test to fail.\nFixed @paveljanik typo/nit.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/206169576/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/206186669",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7816#issuecomment-206186669",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7816",
    "id": 206186669,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjE4NjY2OQ==",
    "user": {
      "login": "paveljanik",
      "id": 6848764,
      "node_id": "MDQ6VXNlcjY4NDg3NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6848764?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paveljanik",
      "html_url": "https://github.com/paveljanik",
      "followers_url": "https://api.github.com/users/paveljanik/followers",
      "following_url": "https://api.github.com/users/paveljanik/following{/other_user}",
      "gists_url": "https://api.github.com/users/paveljanik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paveljanik/subscriptions",
      "organizations_url": "https://api.github.com/users/paveljanik/orgs",
      "repos_url": "https://api.github.com/users/paveljanik/repos",
      "events_url": "https://api.github.com/users/paveljanik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paveljanik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-06T07:40:05Z",
    "updated_at": "2016-04-06T07:40:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "So if the keypool is empty, you are returning NOW. RPC `getinfo`'s help says/expects the key to exist though:\n\n```\n  \"keypoololdest\": xxxxxx,    (numeric) the timestamp (seconds since GMT epoch) of the oldest pre-generated key in the key pool\n```\n\nThis is a slight change in the semantic, but I think it is OK.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/206186669/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/206209929",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7816#issuecomment-206209929",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7816",
    "id": 206209929,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjIwOTkyOQ==",
    "user": {
      "login": "paveljanik",
      "id": 6848764,
      "node_id": "MDQ6VXNlcjY4NDg3NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6848764?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paveljanik",
      "html_url": "https://github.com/paveljanik",
      "followers_url": "https://api.github.com/users/paveljanik/followers",
      "following_url": "https://api.github.com/users/paveljanik/following{/other_user}",
      "gists_url": "https://api.github.com/users/paveljanik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paveljanik/subscriptions",
      "organizations_url": "https://api.github.com/users/paveljanik/orgs",
      "repos_url": "https://api.github.com/users/paveljanik/repos",
      "events_url": "https://api.github.com/users/paveljanik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paveljanik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-06T08:15:22Z",
    "updated_at": "2016-04-06T08:15:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "minor nit: commit message typo slighly-> slightly (sorry for noticing all these unimportant things, please bear with me...).\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/206209929/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/206240976",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7816#issuecomment-206240976",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7816",
    "id": 206240976,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjI0MDk3Ng==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-06T09:07:22Z",
    "updated_at": "2016-04-06T09:07:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "@paveljanik: \n\n> So if the keypool is empty, you are returning NOW\n\nI think this was already the case before. `ReserveKeyFromKeyPool` returns -1 if the keypool is empty which should have lead to return `GetTime()`? Or am I wrong'\n\nThanks. Fixed the commit typo. I'm happy if you point to nits/typos.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/206240976/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/211846790",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7816#issuecomment-211846790",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7816",
    "id": 211846790,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxMTg0Njc5MA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-19T10:25:41Z",
    "updated_at": "2016-04-19T10:25:41Z",
    "author_association": "MEMBER",
    "body": "Yes, the `return GetTime();` was already there. If this was written from scratch it could be argued if returning the current time is the sensible thing to do, but let's not change this API.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/211846790/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/211851529",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7816#issuecomment-211851529",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7816",
    "id": 211851529,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxMTg1MTUyOQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-19T10:40:21Z",
    "updated_at": "2016-04-19T10:40:42Z",
    "author_association": "MEMBER",
    "body": "tACK 9f7336b Can confirm that this solves #7794.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/211851529/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/58594404",
    "pull_request_review_id": null,
    "id": 58594404,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NTk0NDA0",
    "diff_hunk": "@@ -2611,12 +2611,20 @@ bool CWallet::GetKeyFromPool(CPubKey& result)\n \n int64_t CWallet::GetOldestKeyPoolTime()\n {\n-    int64_t nIndex = 0;\n-    CKeyPool keypool;\n-    ReserveKeyFromKeyPool(nIndex, keypool);\n-    if (nIndex == -1)\n+    LOCK(cs_wallet);\n+\n+    // is the keypool is empty, return <NOW>",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 10,
    "commit_id": "9f7336b4575b15193151dbf08b09562529a24363",
    "original_commit_id": "a77bb1046c94dcfa6e3e9e1de7f283bba630d157",
    "user": {
      "login": "paveljanik",
      "id": 6848764,
      "node_id": "MDQ6VXNlcjY4NDg3NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6848764?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paveljanik",
      "html_url": "https://github.com/paveljanik",
      "followers_url": "https://api.github.com/users/paveljanik/followers",
      "following_url": "https://api.github.com/users/paveljanik/following{/other_user}",
      "gists_url": "https://api.github.com/users/paveljanik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paveljanik/subscriptions",
      "organizations_url": "https://api.github.com/users/paveljanik/orgs",
      "repos_url": "https://api.github.com/users/paveljanik/repos",
      "events_url": "https://api.github.com/users/paveljanik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paveljanik/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Typo: if\n",
    "created_at": "2016-04-05T18:48:52Z",
    "updated_at": "2016-04-06T09:06:48Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7816#discussion_r58594404",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7816",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/58594404"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7816#discussion_r58594404"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7816"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/58594404/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2616,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/58595548",
    "pull_request_review_id": null,
    "id": 58595548,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NTk1NTQ4",
    "diff_hunk": "@@ -2611,12 +2611,20 @@ bool CWallet::GetKeyFromPool(CPubKey& result)\n \n int64_t CWallet::GetOldestKeyPoolTime()\n {\n-    int64_t nIndex = 0;\n-    CKeyPool keypool;\n-    ReserveKeyFromKeyPool(nIndex, keypool);\n-    if (nIndex == -1)\n+    LOCK(cs_wallet);\n+\n+    // is the keypool is empty, return <NOW>\n+    if (setKeyPool.empty())\n         return GetTime();\n-    ReturnKey(nIndex);\n+\n+    // load oldest key from keypool, get time and return\n+    CKeyPool keypool;\n+    CWalletDB walletdb(strWalletFile);\n+    int64_t nIndex = *(setKeyPool.begin());\n+    setKeyPool.erase(setKeyPool.begin());\n+    if (!walletdb.ReadPool(nIndex, keypool))\n+        throw runtime_error(\"GetOldestKeyPoolTime(): read oldest key in keypool failed\");",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 21,
    "commit_id": "9f7336b4575b15193151dbf08b09562529a24363",
    "original_commit_id": "a77bb1046c94dcfa6e3e9e1de7f283bba630d157",
    "user": {
      "login": "paveljanik",
      "id": 6848764,
      "node_id": "MDQ6VXNlcjY4NDg3NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6848764?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paveljanik",
      "html_url": "https://github.com/paveljanik",
      "followers_url": "https://api.github.com/users/paveljanik/followers",
      "following_url": "https://api.github.com/users/paveljanik/following{/other_user}",
      "gists_url": "https://api.github.com/users/paveljanik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paveljanik/subscriptions",
      "organizations_url": "https://api.github.com/users/paveljanik/orgs",
      "repos_url": "https://api.github.com/users/paveljanik/repos",
      "events_url": "https://api.github.com/users/paveljanik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paveljanik/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "How do you know it is `GetOldestKeyPoolTime` who failed?\n\nEdit: Ah, please use `__func__` ;-))\n",
    "created_at": "2016-04-05T18:55:11Z",
    "updated_at": "2016-04-06T09:06:48Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7816#discussion_r58595548",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7816",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/58595548"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7816#discussion_r58595548"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7816"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/58595548/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2626,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/58660341",
    "pull_request_review_id": null,
    "id": 58660341,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NjYwMzQx",
    "diff_hunk": "@@ -2611,12 +2611,20 @@ bool CWallet::GetKeyFromPool(CPubKey& result)\n \n int64_t CWallet::GetOldestKeyPoolTime()\n {\n-    int64_t nIndex = 0;\n-    CKeyPool keypool;\n-    ReserveKeyFromKeyPool(nIndex, keypool);\n-    if (nIndex == -1)\n+    LOCK(cs_wallet);\n+\n+    // is the keypool is empty, return <NOW>\n+    if (setKeyPool.empty())\n         return GetTime();\n-    ReturnKey(nIndex);\n+\n+    // load oldest key from keypool, get time and return\n+    CKeyPool keypool;\n+    CWalletDB walletdb(strWalletFile);\n+    int64_t nIndex = *(setKeyPool.begin());\n+    setKeyPool.erase(setKeyPool.begin());\n+    if (!walletdb.ReadPool(nIndex, keypool))\n+        throw runtime_error(\"GetOldestKeyPoolTime(): read oldest key in keypool failed\");",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 21,
    "commit_id": "9f7336b4575b15193151dbf08b09562529a24363",
    "original_commit_id": "a77bb1046c94dcfa6e3e9e1de7f283bba630d157",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks. But lets keep `GetOldestKeyPoolTime():` for now and let it open if someone wants to change the whole wallet sources to make use of `__func__`. Mixing would be worse IMO.\n",
    "created_at": "2016-04-06T07:10:47Z",
    "updated_at": "2016-04-06T09:06:48Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7816#discussion_r58660341",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7816",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/58660341"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7816#discussion_r58660341"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7816"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/58660341/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2626,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/58662401",
    "pull_request_review_id": null,
    "id": 58662401,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NjYyNDAx",
    "diff_hunk": "@@ -2611,12 +2611,20 @@ bool CWallet::GetKeyFromPool(CPubKey& result)\n \n int64_t CWallet::GetOldestKeyPoolTime()\n {\n-    int64_t nIndex = 0;\n-    CKeyPool keypool;\n-    ReserveKeyFromKeyPool(nIndex, keypool);\n-    if (nIndex == -1)\n+    LOCK(cs_wallet);\n+\n+    // is the keypool is empty, return <NOW>\n+    if (setKeyPool.empty())\n         return GetTime();\n-    ReturnKey(nIndex);\n+\n+    // load oldest key from keypool, get time and return\n+    CKeyPool keypool;\n+    CWalletDB walletdb(strWalletFile);\n+    int64_t nIndex = *(setKeyPool.begin());\n+    setKeyPool.erase(setKeyPool.begin());\n+    if (!walletdb.ReadPool(nIndex, keypool))\n+        throw runtime_error(\"GetOldestKeyPoolTime(): read oldest key in keypool failed\");",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 21,
    "commit_id": "9f7336b4575b15193151dbf08b09562529a24363",
    "original_commit_id": "a77bb1046c94dcfa6e3e9e1de7f283bba630d157",
    "user": {
      "login": "paveljanik",
      "id": 6848764,
      "node_id": "MDQ6VXNlcjY4NDg3NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6848764?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paveljanik",
      "html_url": "https://github.com/paveljanik",
      "followers_url": "https://api.github.com/users/paveljanik/followers",
      "following_url": "https://api.github.com/users/paveljanik/following{/other_user}",
      "gists_url": "https://api.github.com/users/paveljanik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paveljanik/subscriptions",
      "organizations_url": "https://api.github.com/users/paveljanik/orgs",
      "repos_url": "https://api.github.com/users/paveljanik/repos",
      "events_url": "https://api.github.com/users/paveljanik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paveljanik/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Sorry, this is like using TABs to indent and say that it is OK to use TABs, and later someone could reformat it completely with `clang-format`. I thought we already agreed that in new code, we should follow our best practice (and as you see on my example above, it can even fool people). And it is shorter ;-)\n",
    "created_at": "2016-04-06T07:32:51Z",
    "updated_at": "2016-04-06T09:06:48Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7816#discussion_r58662401",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7816",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/58662401"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7816#discussion_r58662401"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7816"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/58662401/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2626,
    "side": "RIGHT"
  }
]