sipa,2020-10-15 23:38:31,"If you increase the size of m_state, please also decrease the size of m_sequence (54 bits is still plenty!), otherwise the memory usage of an Announcement object will increase by 16 bytes.\n\nAn alternative is changing the type to uint8_t, and having a getter/setter on Announcement to convert/from to State.",https://github.com/bitcoin/bitcoin/pull/20162#issuecomment-709644710,709644710,
ajtowns,2020-10-15 23:43:34,"Needs to shrink `m_sequence` by 5 bits to keep the overall data structure size the same.\n\nThe original solution was making `m_state` be a `uint8_t : 3` and having a getter and setter that did the conversion to/from `State` rather than accessing it directly. I think that's better than shrinking the sequence by 5 bits, but don't have an opinion between doing the getter/setter and spurious warnin",https://github.com/bitcoin/bitcoin/pull/20162#issuecomment-709645946,709645946,
sipa,2020-10-15 23:45:44,"@ajtowns Priority isn't stored anywhere, it's computed on the fly. But sequence can be shrunk with no downside really.",https://github.com/bitcoin/bitcoin/pull/20162#issuecomment-709646496,709646496,
jonatack,2020-10-15 23:51:02,Thanks -- adjusted `m_sequence` accordingly. It's late so will re-look at this tomorrow.,https://github.com/bitcoin/bitcoin/pull/20162#issuecomment-709647820,709647820,
jonatack,2020-10-16 21:06:59,"Previous commit 0bd2602 added 5 bits to `m_state` and removed 5 from `m_sequence`.\n\nCurrent commit 39cb2ba follows your suggestions to do `uint8_t m_state : 3` with a getter and setter. ",https://github.com/bitcoin/bitcoin/pull/20162#issuecomment-710636027,710636027,
sipa,2020-10-16 22:30:19,utACK c8abbc9d1fd8f77b5dcf31cf7a6dd6aac5d1c75c,https://github.com/bitcoin/bitcoin/pull/20162#issuecomment-710681277,710681277,
ajtowns,2020-10-17 01:37:51,ACK c8abbc9d1fd8f77b5dcf31cf7a6dd6aac5d1c75c -- quick code review,https://github.com/bitcoin/bitcoin/pull/20162#issuecomment-710722291,710722291,
sipa,2020-10-16 21:12:30,"Perhaps document which GCC version(s) and a link to the bug, so that we can decide in the future if it's worth maintaining this workaround.\n\n(I initially had this approach in my PR, but removed it after I couldn't reproduce it anymore).",https://github.com/bitcoin/bitcoin/pull/20162#discussion_r506723401,506723401,src/txrequest.cpp
jonatack,2020-10-16 21:17:28,"Good idea. Yes, this is the approach in your commit daa4f59b, the first one I reviewed.",https://github.com/bitcoin/bitcoin/pull/20162#discussion_r506725194,506725194,src/txrequest.cpp
jonatack,2020-10-16 21:36:57,Done,https://github.com/bitcoin/bitcoin/pull/20162#discussion_r506732120,506732120,src/txrequest.cpp
