[
  {
    "sha": "58222ead7ee40a29eabc549ba1ba510c653df8fd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ODIyMmVhZDdlZTQwYTI5ZWFiYzU0OWJhMWJhNTEwYzY1M2RmOGZk",
    "commit": {
      "author": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2018-09-19T05:24:22Z"
      },
      "committer": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2018-09-19T07:29:02Z"
      },
      "message": "Move urlDecode to wallet/rpcwallet.cpp, where it's used\n\nRemove now-unnecessary includes of httpserver.h from bitcoind.cpp and\nwallet/rpcwallet.cpp.\n\nPass decode_plus arg as an int rather than bool, as documented here:\nhttp://www.wangafu.net/~nickm/libevent-2.0/doxygen/html/http_8h.html#ac2914389616f04199aded10444fd8e42\nhttps://github.com/libevent/libevent/blob/29cc8386a2f7911eaa9336692a2c5544d8b4734f/http.c#L3182",
      "tree": {
        "sha": "a1f09b410c52f7a37ec6014711b240994b18a035",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a1f09b410c52f7a37ec6014711b240994b18a035"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/58222ead7ee40a29eabc549ba1ba510c653df8fd",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQEcBAABCgAGBQJbofs6AAoJEG7l83hfeLNFomYIAKW9g3yhOilIh6W+nvshIJnO\n0dXoDciu2dM9crsEm8N528HD29ZUQQwTf9H/z0DH0jPdmVNQwYLGcvLcs7Z4MMkB\nQSmK8dylSsAeFJQGeK6MiNQ4jIt6rONCIA97tD0kZx4HlXN2G7iueJ9FuKpKq2V/\nd2FoDY+1ToXl0T4DjHT4IaZA/0/WEQx9DvZZPrHeD1N9xs2arcKcCfj78JLLjOwQ\nTWlsmkZMdT+X26tdvE/sFQF+L+sXZDJaMyCWu/H/Xm6KT4GhrgoYmD5iue4cr5uC\nBFo0pTyW0RYJUlqiTRby1MBwUxc7babIjGfr86LiHwkv6swyTjsUuQ+d8AXJs88=\n=t0qq\n-----END PGP SIGNATURE-----",
        "payload": "tree a1f09b410c52f7a37ec6014711b240994b18a035\nparent d26278988fbfc71dc558f7b2c60a184e8091450b\nauthor Ben Woosley <ben.woosley@gmail.com> 1537334662 -0400\ncommitter Ben Woosley <ben.woosley@gmail.com> 1537342142 -0400\n\nMove urlDecode to wallet/rpcwallet.cpp, where it's used\n\nRemove now-unnecessary includes of httpserver.h from bitcoind.cpp and\nwallet/rpcwallet.cpp.\n\nPass decode_plus arg as an int rather than bool, as documented here:\nhttp://www.wangafu.net/~nickm/libevent-2.0/doxygen/html/http_8h.html#ac2914389616f04199aded10444fd8e42\nhttps://github.com/libevent/libevent/blob/29cc8386a2f7911eaa9336692a2c5544d8b4734f/http.c#L3182\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/58222ead7ee40a29eabc549ba1ba510c653df8fd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/58222ead7ee40a29eabc549ba1ba510c653df8fd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/58222ead7ee40a29eabc549ba1ba510c653df8fd/comments",
    "author": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d26278988fbfc71dc558f7b2c60a184e8091450b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d26278988fbfc71dc558f7b2c60a184e8091450b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d26278988fbfc71dc558f7b2c60a184e8091450b"
      }
    ],
    "stats": {
      "total": 34,
      "additions": 15,
      "deletions": 19
    },
    "files": [
      {
        "sha": "1f9d3c31d3b88906d9312478ef739dd8ae928d83",
        "filename": "src/bitcoind.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/58222ead7ee40a29eabc549ba1ba510c653df8fd/src/bitcoind.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/58222ead7ee40a29eabc549ba1ba510c653df8fd/src/bitcoind.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoind.cpp?ref=58222ead7ee40a29eabc549ba1ba510c653df8fd",
        "patch": "@@ -16,7 +16,6 @@\n #include <noui.h>\n #include <shutdown.h>\n #include <util.h>\n-#include <httpserver.h>\n #include <httprpc.h>\n #include <utilstrencodings.h>\n #include <walletinitinterface.h>"
      },
      {
        "sha": "c4de1b45d75f21890c2cc272d3bcb88602cb71ee",
        "filename": "src/httpserver.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 12,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/58222ead7ee40a29eabc549ba1ba510c653df8fd/src/httpserver.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/58222ead7ee40a29eabc549ba1ba510c653df8fd/src/httpserver.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/httpserver.cpp?ref=58222ead7ee40a29eabc549ba1ba510c653df8fd",
        "patch": "@@ -665,15 +665,3 @@ void UnregisterHTTPHandler(const std::string &prefix, bool exactMatch)\n         pathHandlers.erase(i);\n     }\n }\n-\n-std::string urlDecode(const std::string &urlEncoded) {\n-    std::string res;\n-    if (!urlEncoded.empty()) {\n-        char *decoded = evhttp_uridecode(urlEncoded.c_str(), false, nullptr);\n-        if (decoded) {\n-            res = std::string(decoded);\n-            free(decoded);\n-        }\n-    }\n-    return res;\n-}"
      },
      {
        "sha": "bbe4b1c7c23238bcb33a0739fdd9f0e082644866",
        "filename": "src/httpserver.h",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/58222ead7ee40a29eabc549ba1ba510c653df8fd/src/httpserver.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/58222ead7ee40a29eabc549ba1ba510c653df8fd/src/httpserver.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/httpserver.h?ref=58222ead7ee40a29eabc549ba1ba510c653df8fd",
        "patch": "@@ -148,6 +148,4 @@ class HTTPEvent\n     struct event* ev;\n };\n \n-std::string urlDecode(const std::string &urlEncoded);\n-\n #endif // BITCOIN_HTTPSERVER_H"
      },
      {
        "sha": "3aa5d1ce73496d4add69f7f912896e9f711668ec",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 15,
        "deletions": 4,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/58222ead7ee40a29eabc549ba1ba510c653df8fd/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/58222ead7ee40a29eabc549ba1ba510c653df8fd/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=58222ead7ee40a29eabc549ba1ba510c653df8fd",
        "patch": "@@ -7,7 +7,6 @@\n #include <chain.h>\n #include <consensus/validation.h>\n #include <core_io.h>\n-#include <httpserver.h>\n #include <validation.h>\n #include <key_io.h>\n #include <net.h>\n@@ -32,15 +31,27 @@\n #include <wallet/walletdb.h>\n #include <wallet/walletutil.h>\n \n-#include <stdint.h>\n-\n+#include <event2/http.h> // for evhttp_uridecode\n #include <univalue.h>\n \n #include <functional>\n+#include <stdint.h>\n+\n+static std::string urlDecode(const std::string &urlEncoded) {\n+    std::string res;\n+    if (!urlEncoded.empty()) {\n+        char *decoded = evhttp_uridecode(urlEncoded.c_str(), 0, nullptr);\n+        if (decoded) {\n+            res = std::string(decoded);\n+            free(decoded);\n+        }\n+    }\n+    return res;\n+}\n \n static const std::string WALLET_ENDPOINT_BASE = \"/wallet/\";\n \n-bool GetWalletNameFromJSONRPCRequest(const JSONRPCRequest& request, std::string& wallet_name)\n+static bool GetWalletNameFromJSONRPCRequest(const JSONRPCRequest& request, std::string& wallet_name)\n {\n     if (request.URI.substr(0, WALLET_ENDPOINT_BASE.size()) == WALLET_ENDPOINT_BASE) {\n         // wallet endpoint was used"
      }
    ]
  }
]