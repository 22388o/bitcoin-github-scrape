MarcoFalke,2019-06-02 08:26:33,"Could you explain which member needs to be guarded by the lock, but istn't. Also how does the crash look like? Are there issues open about the crash?",https://github.com/bitcoin/bitcoin/pull/16134#issuecomment-498010458,498010458,
sidhujag,2019-06-02 14:14:40,I think it’s the wallet and locked chain it’s outside the scope and the crash is in showProgress on memory cleanup. I can attach the user log on my OS X to show the exact line and stack but it’s likely because in rescanwallet it tries to update showProgress again and I don’t know if those calls are idempotent ,https://github.com/bitcoin/bitcoin/pull/16134#issuecomment-498035109,498035109,
fanquake,2019-06-02 14:16:19,@sidhujag If you have logs / more info please put them up here.,https://github.com/bitcoin/bitcoin/pull/16134#issuecomment-498035236,498035236,
sidhujag,2019-06-02 14:25:08,"Thread 0 Crashed:: bitcoin-main  Dispatch queue: com.apple.main-thread\n0   org.qt-project.QtWidgets      	0x0000000103b4d4a7 QWidgetPrivate::close_helper(QWidgetPrivate::CloseMode) + 23\n1   bitcoin-qt                    	0x0000000102687ab3 BitcoinGUI::showProgress(QString const&, int) + 67 (bitcoingui.cpp:1433)\n2   org.qt-project.QtCore         	0x0000000104807e42 QMetaObject::activate(QObje",https://github.com/bitcoin/bitcoin/pull/16134#issuecomment-498035968,498035968,
fanquake,2019-06-02 16:09:24,"Thanks @sidhujag, I've recreated the crash using master (c7cfd20a77ce57d200b3b9e5e0dfb0d63818abdc):\n\n```bash\nlldb Bitcoin-Qt.app -- -regtest\n(lldb) target create ""Bitcoin-Qt.app""\nCurrent executable set to 'Bitcoin-Qt.app' (x86_64).\n(lldb) settings set -- target.run-args  ""-regtest""\n(lldb) run\nProcess 70618 launched: '/Users/michael/github/bitcoin/Bitcoin-Qt.app/Contents/MacOS/Bitco",https://github.com/bitcoin/bitcoin/pull/16134#issuecomment-498044223,498044223,
promag,2019-06-02 16:10:14,"From the stack trace looks like it tries to close an invalid progress dialog. Considering current master, the progress dialog pointer isn't reset to nullptr after deletion. Please test with #16135 instead.",https://github.com/bitcoin/bitcoin/pull/16134#issuecomment-498044279,498044279,
fanquake,2019-06-02 16:16:25,Checked that the same crash occurs using `0.18.0` (2472733a24a9364e4c6233ccd04166a26a68cc65).,https://github.com/bitcoin/bitcoin/pull/16134#issuecomment-498044786,498044786,
sidhujag,2019-06-02 20:43:46,Thanks @fanquake + @promag ,https://github.com/bitcoin/bitcoin/pull/16134#issuecomment-498063882,498063882,
fanquake,2019-06-02 21:13:54,"@sidhujag Thanks for reporting the bug, and providing an initial fix. I'm going to close this in favor of #16135, if you could test the changes there that'd be great.",https://github.com/bitcoin/bitcoin/pull/16134#issuecomment-498066007,498066007,
