sipa,2013-10-24T13:44:55Z,"I believe the issue and the solution is correct, but this patch seems over-complicated. I'll look at it later today.\n\nAs we do not have any releases with the pruning code enabled, this is not urgent.\n",https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-26993099,26993099,
gmaxwell,2013-10-25T14:19:38Z,"I think it's slightly urgent as my analysis was that this issue is fork forming, and people do mine on git code. (The conclusion I reached while investigating this was that it would cause reorgs to fail, though I haven't attempted a test)\n",https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27096017,27096017,
petertodd,2013-10-26T10:25:00Z,Fixed nits from @sipa\n,https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27143543,27143543,
sipa,2013-10-26T10:33:52Z,"Alternative with less code changes: move outsBlock construction to before the test, and then use outsBlock.IsPruned() instead of the loop to check whether all outputs are unspendable.\n",https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27143646,27143646,
petertodd,2013-10-26T10:36:15Z,@sipa Note though I haven't actually changed much at all - all the lines changed are just due to an indent.\n,https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27143675,27143675,
BitcoinPullTester,2013-10-26T10:39:06Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/cbea442e6d8fb2b447e14fd8a527d670f76b1e68 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27143709,27143709,
sipa,2013-10-26T11:49:49Z,"@petertodd Sure, but it avoids adding the extra loop for detecting the all-prunable case (and the duplicate work that is associated with it)\n",https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27144757,27144757,
Diapolo,2013-10-26T13:03:49Z,"Seems this _is_ urgent, I had to reindex now 2 times on my mainnet wallet using current master and 5 times my testnet wallet.\n",https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27145837,27145837,
sipa,2013-10-26T19:32:30Z,@petertodd I sent a simpler pullreq (#3163) that should accomplish the same. Care to test it?\n,https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27153819,27153819,
sipa,2013-10-26T19:37:57Z,@Diapolo A reindex does not fix this (but that will let you temporarily avoid it); using -checklevel=2 is an easier workaround.\n,https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27153924,27153924,
gmaxwell,2013-10-26T20:11:40Z,"A checklevel 2 is not really a workaround here, since we still can't disconnect the block if it ends up orphaned.\n",https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27154652,27154652,
sipa,2013-10-26T20:14:14Z,"@gmaxwell An alternative to reindexing.\n\nIn case we need to reorganize away from such a block, there is indeed a problem. Though both this and #3163 should fix it.\n",https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27154702,27154702,
petertodd,2013-10-28T04:34:32Z,FWIW looks like https://github.com/bitcoin/bitcoin/pull/3163 is the better solution here.\n\nWill close once that gets merged if nothing else comes up.\n,https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27189032,27189032,
sipa,2013-10-25T18:57:56Z,"Can you replace this by tx.IsPruned(), and see if things still work?\n",https://github.com/bitcoin/bitcoin/pull/3143#discussion_r7224973,7224973,src/main.cpp
sipa,2013-10-25T19:00:10Z,"Ugh, this is a CTransaction, not a CCoins of course. Never mind.\n",https://github.com/bitcoin/bitcoin/pull/3143#discussion_r7225031,7225031,src/main.cpp
sipa,2013-10-25T19:00:57Z,"No need to call AllOutputsUnspendable twice, I think? (also, use && instead of &).\n",https://github.com/bitcoin/bitcoin/pull/3143#discussion_r7225055,7225055,src/main.cpp
petertodd,2013-10-25T19:12:57Z,"Ooops!\n\nYeah, that patch was a bit rushed...\n",https://github.com/bitcoin/bitcoin/pull/3143#discussion_r7225394,7225394,src/main.cpp
petertodd,2013-10-25T19:14:04Z,FWIW I dunno I really need to add that function to CTransaction itself; this seems like the only case where it would ever be used.\n,https://github.com/bitcoin/bitcoin/pull/3143#discussion_r7225428,7225428,src/main.cpp
