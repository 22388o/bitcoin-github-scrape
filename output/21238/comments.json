[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/782314297",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-782314297",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 782314297,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MjMxNDI5Nw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-19T20:12:59Z",
    "updated_at": "2021-02-19T20:12:59Z",
    "author_association": "MEMBER",
    "body": "I don't intend to squash. They're all independent improvements.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/782314297/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/782561567",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-782561567",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 782561567,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MjU2MTU2Nw==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-20T05:05:14Z",
    "updated_at": "2021-03-18T14:15:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21329 (descriptor wallet: Cache last hardened xpub and use in normalized descriptors by achow101)\n* #16116 (Avoid unnecessary signing provider copies on descriptor expansion by Empact)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/782561567/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797165938",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-797165938",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 797165938,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5NzE2NTkzOA==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-12T01:19:50Z",
    "updated_at": "2021-03-12T01:19:50Z",
    "author_association": "MEMBER",
    "body": "Partial ACK. Same questions as Sjors.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797165938/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797207524",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-797207524",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 797207524,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5NzIwNzUyNA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-12T03:22:18Z",
    "updated_at": "2021-03-12T03:22:18Z",
    "author_association": "MEMBER",
    "body": "@achow101 @Sjors Good that you raise that point.\r\n\r\nThe original reason why this behavior of MakeScripts-is-invoked-once-per-evaluation existed was to support things like `combo()`, where a single evaluation at a single index results in multiple scriptPubKeys. This was particularly complicated to combine with descriptors that support multiple subdescriptors (like `tr()`) - there isn't really a straightforward way of doing that (cartesian product? requiring the same number of evaluations from each and combining pairwise? ...?). I didn't want to deal with that, so I added the restriction that this once-per-evaluation only existed for descriptors with 1 subdescriptor.\r\n\r\nThis is all silly, because we don't ever need it. `combo()` is the only descriptor that produces multiple output scripts, and it is only permitted at the top level - so it's not even possible to have it as a subdescriptor. I've just removed support for multiple-outputscripts-from-subscriptor entirely in a separate commit now. Bye.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797207524/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797323709",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-797323709",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 797323709,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5NzMyMzcwOQ==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-12T08:28:13Z",
    "updated_at": "2021-03-12T08:28:13Z",
    "author_association": "MEMBER",
    "body": "Thanks, I'll review again after rebase.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797323709/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797331256",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-797331256",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 797331256,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5NzMzMTI1Ng==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-12T08:40:25Z",
    "updated_at": "2021-03-12T08:40:25Z",
    "author_association": "MEMBER",
    "body": "Rebased.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797331256/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797509162",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-797509162",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 797509162,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5NzUwOTE2Mg==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-12T14:02:47Z",
    "updated_at": "2021-03-12T14:03:25Z",
    "author_association": "MEMBER",
    "body": "ACK 05c633e\r\n\r\nConceptually I find it marginally simpler if you reverse the first and second commit, so the first step is to remove the unused loop:\r\n\r\n```cpp\r\n        if (m_subdescriptor_arg) {\r\n            const auto& subscript = subscripts[0];\r\n            out.scripts.emplace(CScriptID(subscript), subscript);\r\n            output_scripts = MakeScripts(pubkeys, &subscript, out);\r\n        } else {\r\n            output_scripts = MakeScripts(pubkeys, nullptr, out);\r\n        }\r\n ```\r\n \r\n And then the second commit drops `out.scripts.emplace` and moves that into `MakeScripts` (which is also where `combo` does this).\r\n \r\nTo sanity check my understanding: `key_exp_index` is currently used for multisig descriptors to create a seperate cache for each participating key. With taproot, you might have a root key (`key_exp_index == 0`), one branch with a key `key_exp_index == 2`, and another branch with a 3 key multisig (`key_exp_index  3,4,5`). Is that how it works?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797509162/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797659235",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-797659235",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 797659235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5NzY1OTIzNQ==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-12T18:00:34Z",
    "updated_at": "2021-03-12T18:00:34Z",
    "author_association": "MEMBER",
    "body": "ACK 05c633e0efaf300aa3353303f77c0a622647a588",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797659235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797686035",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-797686035",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 797686035,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5NzY4NjAzNQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-12T18:58:28Z",
    "updated_at": "2021-03-12T18:58:28Z",
    "author_association": "MEMBER",
    "body": "@Sjors \r\n\r\n> Conceptually I find it marginally simpler if you reverse the first and second commit\r\n\r\nOk, done.\r\n\r\n> With taproot, you might have a root key (`key_exp_index == 0`), one branch with a key `key_exp_index == 2`, and another branch with a 3 key multisig (`key_exp_index  3,4,5`). Is that how it works?\r\n\r\nI think you skipped the 1, but otherwise: exactly.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797686035/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/799700761",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-799700761",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 799700761,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5OTcwMDc2MQ==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-15T19:41:25Z",
    "updated_at": "2021-03-15T19:41:25Z",
    "author_association": "MEMBER",
    "body": "re-ACK 35cbef1c483ac9905331f8035d32600e105baab4\r\n\r\nOnly change was commit reordering.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/799700761/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809832062",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-809832062",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 809832062,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwOTgzMjA2Mg==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-30T01:19:26Z",
    "updated_at": "2021-03-30T01:19:36Z",
    "author_association": "MEMBER",
    "body": "Rebased, and addressed all comments I think.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809832062/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809970145",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-809970145",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 809970145,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwOTk3MDE0NQ==",
    "user": {
      "login": "S3RK",
      "id": 1466284,
      "node_id": "MDQ6VXNlcjE0NjYyODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/S3RK",
      "html_url": "https://github.com/S3RK",
      "followers_url": "https://api.github.com/users/S3RK/followers",
      "following_url": "https://api.github.com/users/S3RK/following{/other_user}",
      "gists_url": "https://api.github.com/users/S3RK/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
      "organizations_url": "https://api.github.com/users/S3RK/orgs",
      "repos_url": "https://api.github.com/users/S3RK/repos",
      "events_url": "https://api.github.com/users/S3RK/events{/privacy}",
      "received_events_url": "https://api.github.com/users/S3RK/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-30T07:06:39Z",
    "updated_at": "2021-03-30T07:06:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "reACK 0b188b7\r\nThe only changes are addressing review comments above. 1) removing unused constructor 2) removing redundant signing provided instance creation 3) simplifying `ToStringSubScriptHelper` signature",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809970145/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/811856656",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-811856656",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 811856656,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMTg1NjY1Ng==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-01T11:57:04Z",
    "updated_at": "2021-04-01T11:57:04Z",
    "author_association": "MEMBER",
    "body": "re-ACK 0b188b7",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/811856656/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/816928671",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-816928671",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 816928671,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNjkyODY3MQ==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-09T19:46:53Z",
    "updated_at": "2021-04-09T19:46:53Z",
    "author_association": "MEMBER",
    "body": "re-ACK 0b188b751f970027c52729e0c223cc9257669322",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/816928671/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821026070",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-821026070",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 821026070,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMTAyNjA3MA==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-16T08:50:55Z",
    "updated_at": "2021-04-16T08:50:55Z",
    "author_association": "MEMBER",
    "body": "@instagibbs what do you think?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821026070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821908342",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-821908342",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
    "id": 821908342,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMTkwODM0Mg==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-18T00:32:49Z",
    "updated_at": "2021-04-18T00:32:49Z",
    "author_association": "MEMBER",
    "body": "Seems like 3 ACKs is enough? not familiar enough with this code anymore to give a proper ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821908342/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592350156",
    "pull_request_review_id": 609741358,
    "id": 592350156,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MjM1MDE1Ng==",
    "diff_hunk": "@@ -576,33 +581,37 @@ class DescriptorImpl : public Descriptor\n         std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n         entries.reserve(m_pubkey_args.size());\n \n-        // Construct temporary data in `entries` and `subscripts`, to avoid producing output in case of failure.\n+        // Construct temporary data in `entries`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n         for (const auto& p : m_pubkey_args) {\n             entries.emplace_back();\n             if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second, read_cache, write_cache)) return false;\n         }\n         std::vector<CScript> subscripts;\n-        if (m_subdescriptor_arg) {\n-            FlatSigningProvider subprovider;\n-            if (!m_subdescriptor_arg->ExpandHelper(pos, arg, read_cache, subscripts, subprovider, write_cache)) return false;\n-            out = Merge(out, subprovider);\n+        FlatSigningProvider subprovider;\n+        for (const auto& subarg : m_subdescriptor_args) {\n+            std::vector<CScript> outscripts;\n+            if (!subarg->ExpandHelper(pos, arg, read_cache, outscripts, subprovider, write_cache)) return false;\n+            if (outscripts.size() != 1 && m_subdescriptor_args.size() != 1) return false;",
    "path": "src/script/descriptor.cpp",
    "position": null,
    "original_position": 92,
    "commit_id": "0b188b751f970027c52729e0c223cc9257669322",
    "original_commit_id": "5a044ac64f3f51dc89a772f512d403c7baa12ae2",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "5a044ac64f3f51dc89a772f512d403c7baa12ae2: I'm a bit confused what this new check is doing",
    "created_at": "2021-03-11T13:15:33Z",
    "updated_at": "2021-03-30T01:17:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592350156",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592350156"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592350156"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592350156/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 594,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592352945",
    "pull_request_review_id": 609741358,
    "id": 592352945,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MjM1Mjk0NQ==",
    "diff_hunk": "@@ -576,33 +581,37 @@ class DescriptorImpl : public Descriptor\n         std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n         entries.reserve(m_pubkey_args.size());\n \n-        // Construct temporary data in `entries` and `subscripts`, to avoid producing output in case of failure.\n+        // Construct temporary data in `entries`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n         for (const auto& p : m_pubkey_args) {\n             entries.emplace_back();\n             if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second, read_cache, write_cache)) return false;\n         }\n         std::vector<CScript> subscripts;\n-        if (m_subdescriptor_arg) {\n-            FlatSigningProvider subprovider;\n-            if (!m_subdescriptor_arg->ExpandHelper(pos, arg, read_cache, subscripts, subprovider, write_cache)) return false;\n-            out = Merge(out, subprovider);\n+        FlatSigningProvider subprovider;\n+        for (const auto& subarg : m_subdescriptor_args) {\n+            std::vector<CScript> outscripts;\n+            if (!subarg->ExpandHelper(pos, arg, read_cache, outscripts, subprovider, write_cache)) return false;\n+            if (outscripts.size() != 1 && m_subdescriptor_args.size() != 1) return false;\n+            subscripts = Cat(std::move(subscripts), std::move(outscripts));\n         }\n+        out = Merge(std::move(out), std::move(subprovider));\n \n         std::vector<CPubKey> pubkeys;\n         pubkeys.reserve(entries.size());\n         for (auto& entry : entries) {\n             pubkeys.push_back(entry.first);\n             out.origins.emplace(entry.first.GetID(), std::make_pair<CPubKey, KeyOriginInfo>(CPubKey(entry.first), std::move(entry.second)));\n         }\n-        if (m_subdescriptor_arg) {\n+        if (m_subdescriptor_args.size() == 1) {",
    "path": "src/script/descriptor.cpp",
    "position": null,
    "original_position": 104,
    "commit_id": "0b188b751f970027c52729e0c223cc9257669322",
    "original_commit_id": "5a044ac64f3f51dc89a772f512d403c7baa12ae2",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "5a044ac64f3f51dc89a772f512d403c7baa12ae2: why is `m_subdescriptor_args` length 1 a special case?",
    "created_at": "2021-03-11T13:19:35Z",
    "updated_at": "2021-03-30T01:17:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592352945",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592352945"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592352945"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592352945/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 605,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592883824",
    "pull_request_review_id": 610421725,
    "id": 592883824,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Mjg4MzgyNA==",
    "diff_hunk": "@@ -576,33 +581,37 @@ class DescriptorImpl : public Descriptor\n         std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n         entries.reserve(m_pubkey_args.size());\n \n-        // Construct temporary data in `entries` and `subscripts`, to avoid producing output in case of failure.\n+        // Construct temporary data in `entries`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n         for (const auto& p : m_pubkey_args) {\n             entries.emplace_back();\n             if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second, read_cache, write_cache)) return false;\n         }\n         std::vector<CScript> subscripts;\n-        if (m_subdescriptor_arg) {\n-            FlatSigningProvider subprovider;\n-            if (!m_subdescriptor_arg->ExpandHelper(pos, arg, read_cache, subscripts, subprovider, write_cache)) return false;\n-            out = Merge(out, subprovider);\n+        FlatSigningProvider subprovider;\n+        for (const auto& subarg : m_subdescriptor_args) {\n+            std::vector<CScript> outscripts;\n+            if (!subarg->ExpandHelper(pos, arg, read_cache, outscripts, subprovider, write_cache)) return false;\n+            if (outscripts.size() != 1 && m_subdescriptor_args.size() != 1) return false;\n+            subscripts = Cat(std::move(subscripts), std::move(outscripts));\n         }\n+        out = Merge(std::move(out), std::move(subprovider));\n \n         std::vector<CPubKey> pubkeys;\n         pubkeys.reserve(entries.size());\n         for (auto& entry : entries) {\n             pubkeys.push_back(entry.first);\n             out.origins.emplace(entry.first.GetID(), std::make_pair<CPubKey, KeyOriginInfo>(CPubKey(entry.first), std::move(entry.second)));\n         }\n-        if (m_subdescriptor_arg) {\n+        if (m_subdescriptor_args.size() == 1) {",
    "path": "src/script/descriptor.cpp",
    "position": null,
    "original_position": 104,
    "commit_id": "0b188b751f970027c52729e0c223cc9257669322",
    "original_commit_id": "5a044ac64f3f51dc89a772f512d403c7baa12ae2",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Gone.",
    "created_at": "2021-03-12T03:22:28Z",
    "updated_at": "2021-03-30T01:17:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592883824",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592883824"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592883824"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592883824/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 605,
    "side": "RIGHT",
    "in_reply_to_id": 592352945
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592883851",
    "pull_request_review_id": 610421768,
    "id": 592883851,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Mjg4Mzg1MQ==",
    "diff_hunk": "@@ -576,33 +581,37 @@ class DescriptorImpl : public Descriptor\n         std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n         entries.reserve(m_pubkey_args.size());\n \n-        // Construct temporary data in `entries` and `subscripts`, to avoid producing output in case of failure.\n+        // Construct temporary data in `entries`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n         for (const auto& p : m_pubkey_args) {\n             entries.emplace_back();\n             if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second, read_cache, write_cache)) return false;\n         }\n         std::vector<CScript> subscripts;\n-        if (m_subdescriptor_arg) {\n-            FlatSigningProvider subprovider;\n-            if (!m_subdescriptor_arg->ExpandHelper(pos, arg, read_cache, subscripts, subprovider, write_cache)) return false;\n-            out = Merge(out, subprovider);\n+        FlatSigningProvider subprovider;\n+        for (const auto& subarg : m_subdescriptor_args) {\n+            std::vector<CScript> outscripts;\n+            if (!subarg->ExpandHelper(pos, arg, read_cache, outscripts, subprovider, write_cache)) return false;\n+            if (outscripts.size() != 1 && m_subdescriptor_args.size() != 1) return false;",
    "path": "src/script/descriptor.cpp",
    "position": null,
    "original_position": 92,
    "commit_id": "0b188b751f970027c52729e0c223cc9257669322",
    "original_commit_id": "5a044ac64f3f51dc89a772f512d403c7baa12ae2",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Gone.",
    "created_at": "2021-03-12T03:22:36Z",
    "updated_at": "2021-03-30T01:17:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592883851",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592883851"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592883851"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592883851/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 594,
    "side": "RIGHT",
    "in_reply_to_id": 592350156
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/595022079",
    "pull_request_review_id": 613054424,
    "id": 595022079,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NTAyMjA3OQ==",
    "diff_hunk": "@@ -480,34 +480,36 @@ class DescriptorImpl : public Descriptor\n     const std::string m_name;\n \n protected:\n-    //! The sub-descriptor argument (nullptr for everything but SH and WSH).\n+    //! The sub-descriptor arguments (empty for everything but SH and WSH).\n     //! In doc/descriptors.m this is referred to as SCRIPT expressions sh(SCRIPT)\n     //! and wsh(SCRIPT), and distinct from KEY expressions and ADDR expressions.\n-    const std::unique_ptr<DescriptorImpl> m_subdescriptor_arg;\n+    //! Subdescriptors can only ever generate a single script.\n+    const std::vector<std::unique_ptr<DescriptorImpl>> m_subdescriptor_args;\n \n     //! Return a serialization of anything except pubkey and script arguments, to be prepended to those.\n     virtual std::string ToStringExtra() const { return \"\"; }\n \n     /** A helper function to construct the scripts for this descriptor.\n      *\n-     *  This function is invoked once for every CScript produced by evaluating\n-     *  m_subdescriptor_arg, or just once in case m_subdescriptor_arg is nullptr.\n-\n+     *  This function is invoked once by ExpandHelper.\n+     *\n      *  @param pubkeys The evaluations of the m_pubkey_args field.\n-     *  @param script The evaluation of m_subdescriptor_arg (or nullptr when m_subdescriptor_arg is nullptr).\n+     *  @param script The evaluations of m_subdescriptor_args (one for each m_subdescriptor_args element).\n      *  @param out A FlatSigningProvider to put scripts or public keys in that are necessary to the solver.\n-     *             The script arguments to this function are automatically added, as is the origin info of the provided pubkeys.\n+     *             The origin info of the provided pubkeys is automatically added.\n      *  @return A vector with scriptPubKeys for this descriptor.\n      */\n-    virtual std::vector<CScript> MakeScripts(const std::vector<CPubKey>& pubkeys, const CScript* script, FlatSigningProvider& out) const = 0;\n+    virtual std::vector<CScript> MakeScripts(const std::vector<CPubKey>& pubkeys, Span<const CScript> scripts, FlatSigningProvider& out) const = 0;\n \n public:\n-    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, std::unique_ptr<DescriptorImpl> script, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_arg(std::move(script)) {}\n+    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_args() {}\n+    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, std::unique_ptr<DescriptorImpl> script, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_args(Vector(std::move(script))) {}\n+    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, std::vector<std::unique_ptr<DescriptorImpl>> scripts, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_args(std::move(scripts)) {}",
    "path": "src/script/descriptor.cpp",
    "position": null,
    "original_position": 37,
    "commit_id": "0b188b751f970027c52729e0c223cc9257669322",
    "original_commit_id": "35cbef1c483ac9905331f8035d32600e105baab4",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`warning: unused member function 'DescriptorImpl'`",
    "created_at": "2021-03-16T10:04:38Z",
    "updated_at": "2021-03-30T01:17:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r595022079",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/595022079"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r595022079"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/595022079/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 508,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600265689",
    "pull_request_review_id": 619439488,
    "id": 600265689,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDI2NTY4OQ==",
    "diff_hunk": "@@ -577,30 +579,29 @@ class DescriptorImpl : public Descriptor\n         std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n         entries.reserve(m_pubkey_args.size());\n \n-        // Construct temporary data in `entries` and `subscripts`, to avoid producing output in case of failure.\n+        // Construct temporary data in `entries`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n         for (const auto& p : m_pubkey_args) {\n             entries.emplace_back();\n             if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second, read_cache, write_cache)) return false;\n         }\n         std::vector<CScript> subscripts;\n-        if (m_subdescriptor_arg) {\n-            FlatSigningProvider subprovider;\n-            if (!m_subdescriptor_arg->ExpandHelper(pos, arg, read_cache, subscripts, subprovider, write_cache)) return false;\n-            assert(subscripts.size() == 1);\n-            out = Merge(out, subprovider);\n+        FlatSigningProvider subprovider;\n+        for (const auto& subarg : m_subdescriptor_args) {\n+            std::vector<CScript> outscripts;\n+            if (!subarg->ExpandHelper(pos, arg, read_cache, outscripts, subprovider, write_cache)) return false;\n+            assert(outscripts.size() == 1);\n+            subscripts.emplace_back(std::move(outscripts[0]));\n         }\n+        out = Merge(std::move(out), std::move(subprovider));",
    "path": "src/script/descriptor.cpp",
    "position": 114,
    "original_position": 92,
    "commit_id": "0b188b751f970027c52729e0c223cc9257669322",
    "original_commit_id": "6c114a10103e675120d54868d2eac571662a71da",
    "user": {
      "login": "S3RK",
      "id": 1466284,
      "node_id": "MDQ6VXNlcjE0NjYyODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/S3RK",
      "html_url": "https://github.com/S3RK",
      "followers_url": "https://api.github.com/users/S3RK/followers",
      "following_url": "https://api.github.com/users/S3RK/following{/other_user}",
      "gists_url": "https://api.github.com/users/S3RK/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
      "organizations_url": "https://api.github.com/users/S3RK/orgs",
      "repos_url": "https://api.github.com/users/S3RK/repos",
      "events_url": "https://api.github.com/users/S3RK/events{/privacy}",
      "received_events_url": "https://api.github.com/users/S3RK/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Q: why do we need to move the first argument?",
    "created_at": "2021-03-24T08:29:34Z",
    "updated_at": "2021-03-30T01:17:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r600265689",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600265689"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r600265689"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600265689/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 603,
    "original_line": 603,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600267004",
    "pull_request_review_id": 619439488,
    "id": 600267004,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDI2NzAwNA==",
    "diff_hunk": "@@ -621,9 +622,9 @@ class DescriptorImpl : public Descriptor\n             if (!p->GetPrivKey(pos, provider, key)) continue;\n             out.keys.emplace(key.GetPubKey().GetID(), key);\n         }\n-        if (m_subdescriptor_arg) {\n+        for (const auto& arg : m_subdescriptor_args) {\n             FlatSigningProvider subprovider;",
    "path": "src/script/descriptor.cpp",
    "position": null,
    "original_position": 116,
    "commit_id": "0b188b751f970027c52729e0c223cc9257669322",
    "original_commit_id": "6c114a10103e675120d54868d2eac571662a71da",
    "user": {
      "login": "S3RK",
      "id": 1466284,
      "node_id": "MDQ6VXNlcjE0NjYyODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/S3RK",
      "html_url": "https://github.com/S3RK",
      "followers_url": "https://api.github.com/users/S3RK/followers",
      "following_url": "https://api.github.com/users/S3RK/following{/other_user}",
      "gists_url": "https://api.github.com/users/S3RK/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
      "organizations_url": "https://api.github.com/users/S3RK/orgs",
      "repos_url": "https://api.github.com/users/S3RK/repos",
      "events_url": "https://api.github.com/users/S3RK/events{/privacy}",
      "received_events_url": "https://api.github.com/users/S3RK/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: I think one instance of `FlatSigningProvider`  is enough, same as you do in `ExpandHelper`",
    "created_at": "2021-03-24T08:31:39Z",
    "updated_at": "2021-03-30T01:17:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r600267004",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600267004"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r600267004"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600267004/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 626,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600283226",
    "pull_request_review_id": 619439488,
    "id": 600283226,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDI4MzIyNg==",
    "diff_hunk": "@@ -543,12 +554,7 @@ class DescriptorImpl : public Descriptor\n             }\n             ret += std::move(tmp);\n         }\n-        for (const auto& scriptarg : m_subdescriptor_args) {\n-            if (pos++) ret += \",\";\n-            std::string tmp;\n-            if (!scriptarg->ToStringHelper(arg, tmp, priv, normalized)) return false;\n-            ret += std::move(tmp);\n-        }\n+        if (!ToStringSubScriptHelper(arg, ret, priv, normalized, pos)) return false;",
    "path": "src/script/descriptor.cpp",
    "position": null,
    "original_position": 28,
    "commit_id": "0b188b751f970027c52729e0c223cc9257669322",
    "original_commit_id": "c612a1d3fc9f886a5b8406e95dd2b350af261872",
    "user": {
      "login": "S3RK",
      "id": 1466284,
      "node_id": "MDQ6VXNlcjE0NjYyODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/S3RK",
      "html_url": "https://github.com/S3RK",
      "followers_url": "https://api.github.com/users/S3RK/followers",
      "following_url": "https://api.github.com/users/S3RK/following{/other_user}",
      "gists_url": "https://api.github.com/users/S3RK/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
      "organizations_url": "https://api.github.com/users/S3RK/orgs",
      "repos_url": "https://api.github.com/users/S3RK/repos",
      "events_url": "https://api.github.com/users/S3RK/events{/privacy}",
      "received_events_url": "https://api.github.com/users/S3RK/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: I find it clearer If we keep placing of the first comma inside `ToStringHelper` and do not pass `pos` into `ToStringSubScriptHelper`. Something like:\r\n\r\n```cpp\r\nstd::string subscript;\r\nif (!ToStringSubScriptHelper(arg, subscript, priv, normalized)) return false;\r\nif (pos && subscript.size()) ret += \",\";\r\nout = std::move(ret) + std::move(subscript) + \")\";\r\n```",
    "created_at": "2021-03-24T08:55:37Z",
    "updated_at": "2021-03-30T01:17:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r600283226",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600283226"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r600283226"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600283226/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 557,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601152614",
    "pull_request_review_id": 620799471,
    "id": 601152614,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTE1MjYxNA==",
    "diff_hunk": "@@ -577,30 +579,29 @@ class DescriptorImpl : public Descriptor\n         std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n         entries.reserve(m_pubkey_args.size());\n \n-        // Construct temporary data in `entries` and `subscripts`, to avoid producing output in case of failure.\n+        // Construct temporary data in `entries`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n         for (const auto& p : m_pubkey_args) {\n             entries.emplace_back();\n             if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second, read_cache, write_cache)) return false;\n         }\n         std::vector<CScript> subscripts;\n-        if (m_subdescriptor_arg) {\n-            FlatSigningProvider subprovider;\n-            if (!m_subdescriptor_arg->ExpandHelper(pos, arg, read_cache, subscripts, subprovider, write_cache)) return false;\n-            assert(subscripts.size() == 1);\n-            out = Merge(out, subprovider);\n+        FlatSigningProvider subprovider;\n+        for (const auto& subarg : m_subdescriptor_args) {\n+            std::vector<CScript> outscripts;\n+            if (!subarg->ExpandHelper(pos, arg, read_cache, outscripts, subprovider, write_cache)) return false;\n+            assert(outscripts.size() == 1);\n+            subscripts.emplace_back(std::move(outscripts[0]));\n         }\n+        out = Merge(std::move(out), std::move(subprovider));",
    "path": "src/script/descriptor.cpp",
    "position": 114,
    "original_position": 92,
    "commit_id": "0b188b751f970027c52729e0c223cc9257669322",
    "original_commit_id": "6c114a10103e675120d54868d2eac571662a71da",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It doesn't matter now apparently, as Merge takes const lvalue references only. But a more efficient variant could be added that takes advantage of inputs that aren't needed anymore.",
    "created_at": "2021-03-25T07:39:29Z",
    "updated_at": "2021-03-30T01:17:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r601152614",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601152614"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r601152614"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601152614/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 603,
    "original_line": 603,
    "side": "RIGHT",
    "in_reply_to_id": 600265689
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603714367",
    "pull_request_review_id": 623767837,
    "id": 603714367,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzcxNDM2Nw==",
    "diff_hunk": "@@ -543,12 +554,7 @@ class DescriptorImpl : public Descriptor\n             }\n             ret += std::move(tmp);\n         }\n-        for (const auto& scriptarg : m_subdescriptor_args) {\n-            if (pos++) ret += \",\";\n-            std::string tmp;\n-            if (!scriptarg->ToStringHelper(arg, tmp, priv, normalized)) return false;\n-            ret += std::move(tmp);\n-        }\n+        if (!ToStringSubScriptHelper(arg, ret, priv, normalized, pos)) return false;",
    "path": "src/script/descriptor.cpp",
    "position": null,
    "original_position": 28,
    "commit_id": "0b188b751f970027c52729e0c223cc9257669322",
    "original_commit_id": "c612a1d3fc9f886a5b8406e95dd2b350af261872",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.",
    "created_at": "2021-03-30T01:17:40Z",
    "updated_at": "2021-03-30T01:17:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r603714367",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603714367"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r603714367"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603714367/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 557,
    "side": "RIGHT",
    "in_reply_to_id": 600283226
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603714446",
    "pull_request_review_id": 623767910,
    "id": 603714446,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzcxNDQ0Ng==",
    "diff_hunk": "@@ -621,9 +622,9 @@ class DescriptorImpl : public Descriptor\n             if (!p->GetPrivKey(pos, provider, key)) continue;\n             out.keys.emplace(key.GetPubKey().GetID(), key);\n         }\n-        if (m_subdescriptor_arg) {\n+        for (const auto& arg : m_subdescriptor_args) {\n             FlatSigningProvider subprovider;",
    "path": "src/script/descriptor.cpp",
    "position": null,
    "original_position": 116,
    "commit_id": "0b188b751f970027c52729e0c223cc9257669322",
    "original_commit_id": "6c114a10103e675120d54868d2eac571662a71da",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done. In fact, I don't need any at all.",
    "created_at": "2021-03-30T01:17:52Z",
    "updated_at": "2021-03-30T01:17:52Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r603714446",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603714446"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r603714446"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603714446/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 626,
    "side": "RIGHT",
    "in_reply_to_id": 600267004
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603714472",
    "pull_request_review_id": 623767950,
    "id": 603714472,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzcxNDQ3Mg==",
    "diff_hunk": "@@ -480,34 +480,36 @@ class DescriptorImpl : public Descriptor\n     const std::string m_name;\n \n protected:\n-    //! The sub-descriptor argument (nullptr for everything but SH and WSH).\n+    //! The sub-descriptor arguments (empty for everything but SH and WSH).\n     //! In doc/descriptors.m this is referred to as SCRIPT expressions sh(SCRIPT)\n     //! and wsh(SCRIPT), and distinct from KEY expressions and ADDR expressions.\n-    const std::unique_ptr<DescriptorImpl> m_subdescriptor_arg;\n+    //! Subdescriptors can only ever generate a single script.\n+    const std::vector<std::unique_ptr<DescriptorImpl>> m_subdescriptor_args;\n \n     //! Return a serialization of anything except pubkey and script arguments, to be prepended to those.\n     virtual std::string ToStringExtra() const { return \"\"; }\n \n     /** A helper function to construct the scripts for this descriptor.\n      *\n-     *  This function is invoked once for every CScript produced by evaluating\n-     *  m_subdescriptor_arg, or just once in case m_subdescriptor_arg is nullptr.\n-\n+     *  This function is invoked once by ExpandHelper.\n+     *\n      *  @param pubkeys The evaluations of the m_pubkey_args field.\n-     *  @param script The evaluation of m_subdescriptor_arg (or nullptr when m_subdescriptor_arg is nullptr).\n+     *  @param script The evaluations of m_subdescriptor_args (one for each m_subdescriptor_args element).\n      *  @param out A FlatSigningProvider to put scripts or public keys in that are necessary to the solver.\n-     *             The script arguments to this function are automatically added, as is the origin info of the provided pubkeys.\n+     *             The origin info of the provided pubkeys is automatically added.\n      *  @return A vector with scriptPubKeys for this descriptor.\n      */\n-    virtual std::vector<CScript> MakeScripts(const std::vector<CPubKey>& pubkeys, const CScript* script, FlatSigningProvider& out) const = 0;\n+    virtual std::vector<CScript> MakeScripts(const std::vector<CPubKey>& pubkeys, Span<const CScript> scripts, FlatSigningProvider& out) const = 0;\n \n public:\n-    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, std::unique_ptr<DescriptorImpl> script, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_arg(std::move(script)) {}\n+    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_args() {}\n+    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, std::unique_ptr<DescriptorImpl> script, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_args(Vector(std::move(script))) {}\n+    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, std::vector<std::unique_ptr<DescriptorImpl>> scripts, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_args(std::move(scripts)) {}",
    "path": "src/script/descriptor.cpp",
    "position": null,
    "original_position": 37,
    "commit_id": "0b188b751f970027c52729e0c223cc9257669322",
    "original_commit_id": "35cbef1c483ac9905331f8035d32600e105baab4",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed.",
    "created_at": "2021-03-30T01:18:01Z",
    "updated_at": "2021-03-30T01:18:01Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r603714472",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603714472"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r603714472"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603714472/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 508,
    "side": "RIGHT",
    "in_reply_to_id": 595022079
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616265571",
    "pull_request_review_id": 639412981,
    "id": 616265571,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNjI2NTU3MQ==",
    "diff_hunk": "@@ -1045,6 +1066,9 @@ std::unique_ptr<DescriptorImpl> ParseScript(uint32_t key_exp_index, Span<const c\n         }\n         auto bytes = ParseHex(str);\n         return std::make_unique<RawDescriptor>(CScript(bytes.begin(), bytes.end()));\n+    } else if (Func(\"raw\", expr)) {\n+        error = \"Can only have raw() at top level\";",
    "path": "src/script/descriptor.cpp",
    "position": 447,
    "original_position": 447,
    "commit_id": "0b188b751f970027c52729e0c223cc9257669322",
    "original_commit_id": "0b188b751f970027c52729e0c223cc9257669322",
    "user": {
      "login": "ysangkok",
      "id": 284023,
      "node_id": "MDQ6VXNlcjI4NDAyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/284023?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ysangkok",
      "html_url": "https://github.com/ysangkok",
      "followers_url": "https://api.github.com/users/ysangkok/followers",
      "following_url": "https://api.github.com/users/ysangkok/following{/other_user}",
      "gists_url": "https://api.github.com/users/ysangkok/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ysangkok/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ysangkok/subscriptions",
      "organizations_url": "https://api.github.com/users/ysangkok/orgs",
      "repos_url": "https://api.github.com/users/ysangkok/repos",
      "events_url": "https://api.github.com/users/ysangkok/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ysangkok/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "why is there no new test for this and for `addr()`?",
    "created_at": "2021-04-20T00:40:29Z",
    "updated_at": "2021-04-20T00:40:30Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r616265571",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616265571"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r616265571"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616265571/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1070,
    "original_line": 1070,
    "side": "RIGHT"
  }
]