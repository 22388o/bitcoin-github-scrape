[
  {
    "sha": "b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiODdmZTRiYjllYzJkYzFhMjNjY2NjMjA1ZDZlNTIyNTI2ZGQ0ZjM5",
    "commit": {
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2017-07-18T19:04:35Z"
      },
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2017-07-19T01:20:33Z"
      },
      "message": "Add BIP 91 deployment info for stats tracking",
      "tree": {
        "sha": "ea68c7e819338e147c8ad5365a7d51867012dc53",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ea68c7e819338e147c8ad5365a7d51867012dc53"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39/comments",
    "author": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9e8d6a3fb43a2433ef46aaf95511650e3888f730",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9e8d6a3fb43a2433ef46aaf95511650e3888f730",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9e8d6a3fb43a2433ef46aaf95511650e3888f730"
      }
    ],
    "stats": {
      "total": 30,
      "additions": 27,
      "deletions": 3
    },
    "files": [
      {
        "sha": "a6e9224d53c334cd30e766b16e5d43bbf5e858ce",
        "filename": "src/chainparams.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39/src/chainparams.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39/src/chainparams.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/chainparams.cpp?ref=b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39",
        "patch": "@@ -100,6 +100,13 @@ class CMainParams : public CChainParams {\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGWIT].nStartTime = 1479168000; // November 15th, 2016.\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGWIT].nTimeout = 1510704000; // November 15th, 2017.\n \n+        // Deployment of SegWit2x\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGWIT2X].bit = 4;\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGWIT2X].nStartTime = 1496275200; // June 1st, 2017.\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGWIT2X].nTimeout = 1510704000; // November 15th, 2017.\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGWIT2X].nOverrideMinerConfirmationWindow = 336; // ~2.33 days\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGWIT2X].nOverrideRuleChangeActivationThreshold = 269; // 80%\n+\n         // The best chain should have at least this much work.\n         consensus.nMinimumChainWork = uint256S(\"0x0000000000000000000000000000000000000000003f94d1ad391682fe038bf5\");\n "
      },
      {
        "sha": "e7f4ac7e72544aee6475ea16a1dfd7d7fb7fbf03",
        "filename": "src/consensus/params.h",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39/src/consensus/params.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39/src/consensus/params.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/params.h?ref=b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39",
        "patch": "@@ -17,6 +17,7 @@ enum DeploymentPos\n     DEPLOYMENT_TESTDUMMY,\n     DEPLOYMENT_CSV, // Deployment of BIP68, BIP112, and BIP113.\n     DEPLOYMENT_SEGWIT, // Deployment of BIP141, BIP143, and BIP147.\n+    DEPLOYMENT_SEGWIT2X, // Deployment of BIP 91\n     // NOTE: Also add new deployments to VersionBitsDeploymentInfo in versionbits.cpp\n     MAX_VERSION_BITS_DEPLOYMENTS\n };\n@@ -30,7 +31,10 @@ struct BIP9Deployment {\n     /** Start MedianTime for version bits miner confirmation. Can be a date in the past */\n     int64_t nStartTime;\n     /** Timeout/expiry MedianTime for the deployment attempt. */\n-    int64_t nTimeout;\n+    int64_t nTimeout;/** Overriding the default threshold if not zero. */\n+    uint32_t nOverrideRuleChangeActivationThreshold = 0;\n+    /** Overriding the default confirmation window if not zero . */\n+    uint32_t nOverrideMinerConfirmationWindow = 0;\n };\n \n /**"
      },
      {
        "sha": "b8208b33517a48ae50c0867ba96c6060f77270ef",
        "filename": "src/rpc/blockchain.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39/src/rpc/blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39/src/rpc/blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.cpp?ref=b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39",
        "patch": "@@ -1187,6 +1187,7 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n     softforks.push_back(SoftForkDesc(\"bip65\", 4, tip, consensusParams));\n     BIP9SoftForkDescPushBack(bip9_softforks, \"csv\", consensusParams, Consensus::DEPLOYMENT_CSV);\n     BIP9SoftForkDescPushBack(bip9_softforks, \"segwit\", consensusParams, Consensus::DEPLOYMENT_SEGWIT);\n+    BIP9SoftForkDescPushBack(bip9_softforks, \"bip91\", consensusParams, Consensus::DEPLOYMENT_SEGWIT2X);\n     obj.push_back(Pair(\"softforks\",             softforks));\n     obj.push_back(Pair(\"bip9_softforks\", bip9_softforks));\n "
      },
      {
        "sha": "53c5d7b950b383eb74b71aceff15972dd5cecac6",
        "filename": "src/versionbits.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 2,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39/src/versionbits.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39/src/versionbits.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/versionbits.cpp?ref=b87fe4bb9ec2dc1a23cccc205d6e522526dd4f39",
        "patch": "@@ -17,6 +17,10 @@ const struct VBDeploymentInfo VersionBitsDeploymentInfo[Consensus::MAX_VERSION_B\n     {\n         /*.name =*/ \"segwit\",\n         /*.gbt_force =*/ true,\n+    },\n+    {\n+        /*.name =*/ \"bip91\",\n+        /*.gbt_force =*/ true,\n     }\n };\n \n@@ -176,8 +180,16 @@ class VersionBitsConditionChecker : public AbstractThresholdConditionChecker {\n protected:\n     int64_t BeginTime(const Consensus::Params& params) const override { return params.vDeployments[id].nStartTime; }\n     int64_t EndTime(const Consensus::Params& params) const override { return params.vDeployments[id].nTimeout; }\n-    int Period(const Consensus::Params& params) const override { return params.nMinerConfirmationWindow; }\n-    int Threshold(const Consensus::Params& params) const override { return params.nRuleChangeActivationThreshold; }\n+    int Period(const Consensus::Params& params) const override {\n+        if (params.vDeployments[id].nOverrideMinerConfirmationWindow > 0)\n+            return params.vDeployments[id].nOverrideMinerConfirmationWindow;\n+        return params.nMinerConfirmationWindow;\n+    }\n+    int Threshold(const Consensus::Params& params) const override {\n+        if (params.vDeployments[id].nOverrideRuleChangeActivationThreshold > 0)\n+            return params.vDeployments[id].nOverrideRuleChangeActivationThreshold;\n+        return params.nRuleChangeActivationThreshold;\n+    }\n \n     bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const override\n     {"
      }
    ]
  }
]