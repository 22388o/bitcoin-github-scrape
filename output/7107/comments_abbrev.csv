tulip0,2015-11-27T02:23:17Z,"It's counterintuitive to most people that Bitcoin Core will refuse to use non-standard ports as anything but a last resort, does the option label need a GUI label or a confirmation popup to reflect this? I suspect a lot of people will be mystified otherwise that they don't get any incoming connections after changing a fairly innocuous looking option. \n",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-160028535,160028535,
jonasschnelli,2015-11-27T07:57:17Z,"Concept ACK.\n\nWe just need to make sure, people can only enter reasonable/valid ports. Because if someone enters port 80, bitcoin-qt is very likely ""bricked"" (unless he start with root permissions!) until he manages to startup Bitcoin-Qt with a override port setting (through a shell with `-port=8333' or by changing bitcoin.conf).\n\nBest would be to ask the user – during startup – if he likes to",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-160063027,160063027,
jonasschnelli,2015-11-28T08:46:28Z,https://bitcoin.jonasschnelli.ch/pulls/7107/\n,https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-160264924,160264924,
hsjoberg,2015-11-28T11:31:59Z,"Thanks for the feedback @jonasschnelli, I'll work on the things you pointed out.  \nI'll be available more and more in #bitcoin #bitcoin-dev etc as cocoBTC.\n",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-160280019,160280019,
fanquake,2015-12-24T10:55:09Z,@Cocosoft Are you still working on this?\n,https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-167092402,167092402,
hsjoberg,2015-12-26T00:44:02Z,"@fanquake Yes, I do intend to continue working on this.\n",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-167268688,167268688,
tulip0,2015-12-26T02:17:47Z,"Again, this needs a warning that users will get essentially no incoming connections if they change the port. It's not initiative behaviour and will cause significant confusion, I'm not convinced that this option should even be in a configuration window like this to begin with.\n\n```\n // do not allow non-default ports, unless after 50 invalid addresses selected already\nif (addr.GetPort() != Para",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-167271658,167271658,
laanwj,2016-01-28T11:57:21Z,"Concept ACK.\n\nAgree that adding a warning (e.g. as mouseover) would make sense, and that ports should be restricted to valid ports (>1024 at least).\n",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-176144373,176144373,
hsjoberg,2016-01-28T12:05:57Z,"Just FYI, I am still committed to this issue. I am still alive.\n\n@laanwj, agreed.\n",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-176146837,176146837,
luke-jr,2016-02-12T20:48:33Z,"@Cocosoft I've addressed the port number concern, and modified NetworkStyle to store regtest settings separately from testnet.\n\n```\ngit pull https://github.com/luke-jr/bitcoin.git qtnetworkport\n```\n",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-183483819,183483819,
hsjoberg,2016-02-18T21:56:50Z,"@luke-jr, great, thank you for your help!\n",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-185939572,185939572,
jonasschnelli,2016-02-19T16:03:53Z,"Needs rebase.\nI could continue this. I think it needs some additional ""focus-lost"" checks (also see how proxy port settings do work) and I could imaging a problem when setting the port to a port-number that is already in use (could prevent from starting Bitcoin-Qt).\n",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-186277514,186277514,
jonasschnelli,2016-04-05T07:27:22Z,@ping Cocosoft. Are you interested to finish this?\n,https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-205695591,205695591,
hsjoberg,2016-04-05T09:08:44Z,"@jonasschnelli, I am interested in finishing this. I do understand however if you or someone else wants to take over because it has been idling for so long.\n\nI'll try to be on the IRC channel this week.\n",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-205721439,205721439,
laanwj,2016-04-25T14:10:46Z,> I could imaging a problem when setting the port to a port-number that is already in use (could prevent from starting Bitcoin-Qt).\n\nPossibly in the case of the GUI it could be non-fatal if binding a port at startup fails. After warning the user there's no harm in continuing with the port closed.\n\nThis would make this change a lot less dangerous.\n,https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-214350298,214350298,
fanquake,2016-06-22T10:47:31Z,@Cocosoft Are you still planning on finishing this? This needs a rebase at least.\n,https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-227708468,227708468,
hsjoberg,2016-06-22T12:55:16Z,"@fanquake Yes, I haven't forgotten about this and I still plan to continue, I just need to find time. I fully understand if someone wants to finish it up though, as it has been delayed for so long.\n",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-227733979,227733979,
luke-jr,2016-06-27T21:29:27Z,Why did you add an enableOkButton and disableOkButton methods that are unused?\n,https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-228881415,228881415,
hsjoberg,2016-06-27T21:56:01Z,"I did not, actually you made them according to Git:\n\n``` bash\n$ git blame -L 227,227 src/qt/optionsdialog.cpp\n578064a6 (Luke Dashjr 2016-02-12 20:08:00 +0000 227) void OptionsDialog::enableOkButton()\n```\n\nI'll rebase again and fix that.\n\nOr did you merge the qtnetworkport branch to the master branch of Bitcoinknots? If that's the case, I maybe could just make a new commit removed the unus",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-228887951,228887951,
luke-jr,2016-06-27T21:57:52Z,That code wasn't part of my commit; somehow it got added in when you rebased. Perhaps an accident during a merge?\n,https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-228888398,228888398,
hsjoberg,2016-06-27T22:02:08Z,"You're right, sorry. It seems like Philip Kaufman wrote the functions back in 2013:\n\n``` bash\n$ git blame -L 227,227 src/qt/optionsdialog.cpp\n7e195e84 (Philip Kaufmann 2013-12-03 09:10:10 +0100 227)     setOkButtonState(false);\n```\n",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-228889531,228889531,
hsjoberg,2016-06-27T22:19:22Z,"I'm not sure where the functions come from, I can confirm (by a backup) that they existed before the rebase I did.\n\nI'll remove them.\n\nEdit: Right, I had a merge conflict regarding the functions during the rebase. My bad!\n",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-228893288,228893288,
fanquake,2016-08-31T12:55:12Z,This needs a rebase.\n,https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-243754631,243754631,
hsjoberg,2016-09-05T22:13:39Z,"As per @jonasschnelli suggestion, I added a Question box on startup to ask if the user wants to use the standard network port if the specified port (whether it's from -port or in GUI) is already in use.\n",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-244816440,244816440,
jonasschnelli,2016-09-20T13:37:18Z,Needs rebase and nit fixes.\n,https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-248303329,248303329,
jonasschnelli,2016-10-18T19:35:09Z,Closing due to inactivity. Happy to reopen once this has made progress.\n,https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-254615166,254615166,
hsjoberg,2017-02-23T00:15:27Z,"Hi @jonasschnelli, I've rebased the branch upon master on cocosoft/bitcoin branch qtnetworkport.\nI'm not sure what nits are still missing, but I would be happy to fix them.\n\nI added a warning prompt on startup if the user tries to use a non-standard port that is already in use, and gives the option to use the standard port.\n\nBest\nHampus",https://github.com/bitcoin/bitcoin/pull/7107#issuecomment-281848435,281848435,
jonasschnelli,2015-11-27T07:52:11Z,We need a better protection to not run into a startup termination if the user did enter a invalid port. IIRC the `QIntValidator` still allows one to enter `0` as port number which will very likely result in a locked Bitcoin-QT (startup will stop because of a invalid port). Haven't tested although.\nMaybe check: https://github.com/bitcoin/bitcoin/pull/7025\n,https://github.com/bitcoin/bitcoin/pull/7107#discussion_r46023796,46023796,src/qt/optionsdialog.cpp
tulip0,2015-11-27T10:46:13Z,This should probably see 1-1023 as invalid as well.\n,https://github.com/bitcoin/bitcoin/pull/7107#discussion_r46035795,46035795,src/qt/optionsdialog.cpp
luke-jr,2015-11-27T20:57:48Z,"@tulip0 That is not universally true. I think Windows allows non-admin to bind them, and on Linux there are capabilities to allow binding them.\n",https://github.com/bitcoin/bitcoin/pull/7107#discussion_r46069858,46069858,src/qt/optionsdialog.cpp
hsjoberg,2016-02-18T22:25:07Z,"Maybe I'm mistaken, but won't this code never be reached because of acc8f4e?\n",https://github.com/bitcoin/bitcoin/pull/7107#discussion_r53392944,53392944,src/qt/optionsmodel.cpp
luke-jr,2016-04-05T07:35:45Z,You mean because the empty field is invalid input? I suppose so.\n,https://github.com/bitcoin/bitcoin/pull/7107#discussion_r58497680,58497680,src/qt/optionsmodel.cpp
