MarcoFalke,2018-04-13T00:56:40Z,"According to https://doc.qt.io/qt-5.10/supported-platforms-and-configurations.html#qt-5-9 gcc4.8 is supported. Also, I could build your receipt on ubuntu trusty, which comes with gcc4.8. I think you can get rid of the optional flag to compile qt5.9?\n\nEdit: I didn't try windows or mac cross builds, so those might be causing issues ... ?",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-380988170,380988170,
fanquake,2018-04-13T01:23:43Z,"The plan is to just move depends to Qt 5.9+ quite soon, I have been delayed doing that work. \nI don't think we want to want to have support for 5.7 and 5.9 in depends at the same time. \nWould you be interested in turning this work into a Qt 5.7 -> 5.9 upgrade?",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-380991926,380991926,
TheCharlatan,2018-04-13T07:37:02Z,"@MarcoFalke The compiler version for linux native compilation is not a problem. It is though as soon as you are trying to cross compile to windows (which requires Mingw5.3). \nI originally did not want to open the pr for this reason, since it would mean that the current travis tests would be broken because of the windows build requirement. I heard though that @theuni is working on getting the ent",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-381051061,381051061,
MarcoFalke,2018-04-13T13:35:14Z,"> cross compile to windows (which requires Mingw5.3)\n\nHmm. Imo we could drop support for cross-compile to windows on trusty and just require xenial or above.",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-381137133,381137133,
MarcoFalke,2018-04-15T15:51:56Z,Could do a rebase since #12946 is merged?,https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-381416556,381416556,
TheCharlatan,2018-04-15T16:40:23Z,Rebased.,https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-381420031,381420031,
fanquake,2018-04-16T02:10:43Z,"@TheCharlatan Thanks for the work so far, however did you see my comment above? I think this would be better as a straight 5.7 -> 5.9 upgrade, instead of adding an additional version of Qt to depends. We would like to use Qt 5.9+ to build the next release anyways.\n\nRegardless of the that this needs a few fixes.\n\nThere are currently [whitespace linting errors](https://travis-ci.org/bitcoin/",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-381460418,381460418,
TheCharlatan,2018-04-16T06:55:47Z,"@fanquake thanks for the review. \nIf I were to change this to a straight upgrade, how would travis, or gitian windows builds be done?",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-381497984,381497984,
MarcoFalke,2018-04-16T12:39:52Z,"Our gitian descriptors will be switched to bionic soon: #12511. Similarly, we can switch travis to xenial. Those will happen in separate pull request, so don't worry about them.",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-381585128,381585128,
laanwj,2018-05-14T13:19:51Z,"Travis fails on linux 64 bit with:\n```\nchecking for QTPLATFORM... no\nconfigure: error: Package requirements (Qt5PlatformSupport) were not met:\nNo package 'Qt5PlatformSupport' found\n```\n\nAnd OSX:\n```\nProject ERROR: Could not resolve SDK --show-sdk-path for 'macosx'\n```",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-388813583,388813583,
MarcoFalke,2018-05-14T13:25:18Z,See also #13215,https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-388815250,388815250,
TheCharlatan,2018-05-16T00:20:54Z,"Removed the optional flags, Qt5.9.4 is now the new default. The build still fails on MacOS. ",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-389355464,389355464,
fanquake,2018-05-16T00:58:02Z,@TheCharlatan Can you fixup any trailing whitespace so that Travis will run: https://travis-ci.org/bitcoin/bitcoin/jobs/379496754,https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-389360897,389360897,
ken2812221,2018-05-17T15:37:09Z,"This should fix the problem. Patch from [QTBUG-67286](https://bugreports.qt.io/browse/QTBUG-67286)\n[removed]",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-389910640,389910640,
ken2812221,2018-05-18T09:34:37Z,"This additional patch should fix all Mac and Windows build:\n[removed]",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-390152410,390152410,
ken2812221,2018-05-18T10:51:15Z,"You committed the wrong patch, it's not `fix-cocoahelpers-macos.patch` but `fix_no_printer.patch`",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-390170799,390170799,
ken2812221,2018-05-18T13:40:20Z,"Sorry, I did not test this before on Linux. Please apply this patch to allow static link Qt on Linux.\n[removed]",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-390210370,390210370,
jonasschnelli,2018-05-18T13:44:02Z,"Seems not yet to build on gitian:\n\n`../../corelib/tools/qbytearray.cpp:57:19: fatal error: zconf.h: No such file or directory\n #include <zconf.h>`\n\nhttps://bitcoin.jonasschnelli.ch/build/616 (see build logs)",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-390211489,390211489,
ken2812221,2018-05-19T02:18:14Z,"This should fix the gitian build issue\n```diff\ndiff --git a/depends/packages/qt.mk b/depends/packages/qt.mkindex 884a02c2b..e15a13bb0 100644\n--- a/depends/packages/qt.mk\n+++ b/depends/packages/qt.mk\n@@ -87,6 +87,7 @@ $(package)_config_opts_linux += -fontconfig\n $(package)_config_opts_linux += -no-opengl\n $(package)_config_opts_arm_linux  = -platform linux-g++ -xplatform $(host)\n $(",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-390371544,390371544,
jonasschnelli,2018-05-19T20:23:54Z,"OSX and Linux are building okay:\nhttps://bitcoin.jonasschnelli.ch/build/618 (a45cbc63)",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-390430320,390430320,
ken2812221,2018-05-20T02:25:25Z,"~~With further tests, `_` does not translate anything, but `tr` do translate.~~\nIt is a bug related to master #13287",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-390452930,390452930,
fanquake,2018-05-30T08:28:51Z,"After discussing with @jonasschnelli irc, need to note that this will likely bump the minimum required macOS version to 10.10. Which probably requires further discussion.",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-393076084,393076084,
fanquake,2018-06-01T02:50:43Z,"Given that 5.9.5 has been [released](https://blog.qt.io/blog/2018/04/12/qt-5-9-5-released/), this PR can also be updated to that, over 5.9.4.",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-393742816,393742816,
TheCharlatan,2018-06-02T22:17:46Z,Upgraded to 5.9.5,https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-394121024,394121024,
Sjors,2018-06-18T13:36:42Z,Would this also allow cross compiling to ARM? My initial attempt in #13495 failed.,https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-398056330,398056330,
TheCharlatan,2018-06-21T12:00:07Z,@Sjors I tested it with arm-linux-gnueabihf and it has the same problem with qminimal.,https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-399079034,399079034,
DrahtBot,2018-06-24T14:21:01Z,<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase,https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-399760143,399760143,
TheCharlatan,2018-07-05T15:17:31Z,Rebased. ,https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-402757720,402757720,
laanwj,2018-07-05T15:24:42Z,utACK 5e9d4fe6448371ec3e38bad4f404d385f12355c4,https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-402760061,402760061,
theuni,2018-07-05T18:28:24Z,"Thanks for the rebase, taking another look.",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-402812637,402812637,
ken2812221,2018-07-05T20:32:51Z,utACK 5e9d4fe6448371ec3e38bad4f404d385f12355c4,https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-402844263,402844263,
fanquake,2018-07-05T22:52:22Z,"Thanks @TheCharlatan:\n\nCan this be updated to Qt [5.9.6](https://blog.qt.io/blog/2018/06/11/qt-5-9-6-released/), which contains further [bugfixes](https://bugreports.qt.io/browse/QTBUG-63772?filter=19377) from 5.9.5.\n\nOnce that's done the `qfixed-coretext.patch` can be dropped as it should have been fixed in [QTBUG-67545](https://bugreports.qt.io/browse/QTBUG-67545).\n\nAlso, can you upd",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-402874985,402874985,
TheCharlatan,2018-07-06T00:59:05Z,"Force-pushed to bump the version to Qt 5.9.6, as suggested by @fanquake .",https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-402893960,402893960,
laanwj,2018-07-09T15:55:08Z,utACK 800dea88a6ad2d8b615c1cc486da5942f6e391c2,https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-403528306,403528306,
fanquake,2018-04-16T02:13:36Z,This looks like it's building QT 5.9 in either case?,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r181609465,181609465,depends/packages/packages.mk
MarcoFalke,2018-05-16T02:20:48Z,Can remove this hunk and all other references to qt 5.9?,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r188487239,188487239,depends/README.md
MarcoFalke,2018-05-17T12:54:13Z,nit: Either remove or replace with proper comment/reasoning.,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r188945772,188945772,depends/packages/qt.mk
MarcoFalke,2018-05-17T12:55:45Z,"This whole section is added in #13246, so feel free to remove this to avoid merge conflicts.",https://github.com/bitcoin/bitcoin/pull/12971#discussion_r188946262,188946262,doc/build-windows.md
fanquake,2018-05-19T02:44:28Z,"Are you sure this patch is no longer required?\nCompiling 99d2d3c I'm seeing:\n```\ncompiling qtestcase.cpp\nmac/qfontengine_coretext.mm:833:20: error: qualified reference to 'QFixed' is a constructor name rather than a type in this context\n    return QFixed::QFixed(int(CTFontGetUnitsPerEm(ctfont)));\n                   ^\n1 error generated.\n```",https://github.com/bitcoin/bitcoin/pull/12971#discussion_r189422796,189422796,depends/patches/qt/qfixed-coretext.patch
fanquake,2018-05-19T02:49:43Z,Can you move all the patching back up here?,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r189422896,189422896,depends/packages/qt.mk
TheCharlatan,2018-05-19T15:05:07Z,"Yes, moved.",https://github.com/bitcoin/bitcoin/pull/12971#discussion_r189436634,189436634,depends/packages/qt.mk
TheCharlatan,2018-05-19T21:28:13Z,nit-picking here: is it preferable to use `&& \` or `&&\` ?,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r189445263,189445263,depends/packages/qt.mk
fanquake,2018-05-20T05:53:33Z,Best to just match the code around the lines you're touching. However please don't change any lines your not actually modifying just to change `&& \` to `&&\` or vice-versa. i.e line 150,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r189451986,189451986,depends/packages/qt.mk
theuni,2018-05-21T16:03:06Z,Please add '-no-feature-concurrent' and remove concurrent here.,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r189634724,189634724,depends/packages/qt.mk
theuni,2018-05-21T16:17:59Z,"Untested: looks like this is ""-no-feature-sessionmanager"" now.",https://github.com/bitcoin/bitcoin/pull/12971#discussion_r189639242,189639242,depends/packages/qt.mk
theuni,2018-05-21T16:21:03Z,"Concurrent should not be needed. IIRC xml is needed, but only due to qt buildsystem bugs that I believe we patch around already.\n```\n$(package)_config_opts += -no-feature-concurrent\n$(package)_config_opts += -no-feature-xml\n```",https://github.com/bitcoin/bitcoin/pull/12971#discussion_r189640062,189640062,depends/packages/qt.mk
theuni,2018-05-21T16:22:27Z,"I believe we may have to specify some new gfx options, notice that ""vnc"" is now enabled for Linux.",https://github.com/bitcoin/bitcoin/pull/12971#discussion_r189640456,189640456,depends/packages/qt.mk
theuni,2018-05-21T16:27:15Z,"Are these all needed for plugins? And are they all mandatory? We don't want to fail if someone has their qt configured with, for example, -no-feature-accessibility",https://github.com/bitcoin/bitcoin/pull/12971#discussion_r189641793,189641793,build-aux/m4/bitcoin_qt.m4
theuni,2018-05-21T16:31:33Z,are qtlibpng/libqtpcre2 correct? Those imply linking with: -lqtlibpng and -llibqtpcre2,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r189642982,189642982,build-aux/m4/bitcoin_qt.m4
theuni,2018-05-21T16:32:24Z,Why are these needed?,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r189643217,189643217,depends/packages/qt.mk
TheCharlatan,2018-05-21T20:30:33Z,The libraries built are libqtlibpng.a and libqtpcre2.a,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r189704925,189704925,build-aux/m4/bitcoin_qt.m4
TheCharlatan,2018-05-24T14:24:07Z,"The build fails without them (`execvp: .obj/release/pcre2_auto_possess.o: Permission denied\n`). Found the solution on https://bugreports.qt.io/browse/QTBUG-63659 .",https://github.com/bitcoin/bitcoin/pull/12971#discussion_r190605876,190605876,depends/packages/qt.mk
TheCharlatan,2018-05-24T23:41:33Z,"Usually this would be achieved by `no-gfx-vnc`, but Qt5.8 changed large parts of the configure. `-no-xinput2` still works, I'll add it back.",https://github.com/bitcoin/bitcoin/pull/12971#discussion_r190759465,190759465,depends/packages/qt.mk
Sjors,2018-07-06T11:00:15Z,Nit: no need to reference Qt4 anymore,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r200620389,200620389,build-aux/m4/bitcoin_qt.m4
Sjors,2018-07-06T11:03:02Z,Can confirm eed620cb268b199bd83b3fc6a471c51d51e1dc2dbb5374fc97a0cc75facbe36f matches https://download.qt.io/archive/qt/5.9/5.9.6/submodules/qtbase-opensource-src-5.9.6.tar.xz.mirrorlist,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r200620961,200620961,depends/packages/qt.mk
Sjors,2018-07-06T11:03:19Z,Why the http downgrade?,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r200621013,200621013,depends/packages/qt.mk
Sjors,2018-07-06T11:05:11Z,Is the reason we can drop these lines that these options been removed from QT?,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r200621368,200621368,depends/packages/qt.mk
Sjors,2018-07-06T11:06:15Z,I can try building these depends on an arm64 device soon.,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r200621561,200621561,depends/packages/qt.mk
TheCharlatan,2018-07-06T13:06:27Z,The config_opts lines I removed are no longer supported by qt's configure. ,https://github.com/bitcoin/bitcoin/pull/12971#discussion_r200647162,200647162,depends/packages/qt.mk
TheCharlatan,2018-07-06T13:06:39Z,"Thanks, missed this during rebase.",https://github.com/bitcoin/bitcoin/pull/12971#discussion_r200647217,200647217,depends/packages/qt.mk
Sjors,2018-07-12T10:41:14Z,"`cd depends && make` doesn't build QT when run from a aarch64 host, so nvm :-)",https://github.com/bitcoin/bitcoin/pull/12971#discussion_r201989119,201989119,depends/packages/qt.mk
