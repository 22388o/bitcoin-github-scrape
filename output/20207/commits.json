[
  {
    "sha": "18246ed5f09dd078fa1410b7ec2ba4379cc5e032",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxODI0NmVkNWYwOWRkMDc4ZmExNDEwYjdlYzJiYTQzNzljYzVlMDMy",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-10-20T22:08:54Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-11-26T22:56:25Z"
      },
      "message": "Fix and improve taproot_construct comments",
      "tree": {
        "sha": "512dfae4c6eb58bdc06da3daf24e091e9aaabf43",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/512dfae4c6eb58bdc06da3daf24e091e9aaabf43"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/18246ed5f09dd078fa1410b7ec2ba4379cc5e032",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/18246ed5f09dd078fa1410b7ec2ba4379cc5e032",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/18246ed5f09dd078fa1410b7ec2ba4379cc5e032",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/18246ed5f09dd078fa1410b7ec2ba4379cc5e032/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "50091592dd875a1c94030dbed74112b003732d68",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/50091592dd875a1c94030dbed74112b003732d68",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/50091592dd875a1c94030dbed74112b003732d68"
      }
    ],
    "stats": {
      "total": 24,
      "additions": 18,
      "deletions": 6
    },
    "files": [
      {
        "sha": "26ccab3039e316063d79b4b98ed3847ab9fab402",
        "filename": "test/functional/test_framework/script.py",
        "status": "modified",
        "additions": 18,
        "deletions": 6,
        "changes": 24,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/18246ed5f09dd078fa1410b7ec2ba4379cc5e032/test/functional/test_framework/script.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/18246ed5f09dd078fa1410b7ec2ba4379cc5e032/test/functional/test_framework/script.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/script.py?ref=18246ed5f09dd078fa1410b7ec2ba4379cc5e032",
        "patch": "@@ -824,21 +824,33 @@ def taproot_tree_helper(scripts):\n     h = TaggedHash(\"TapBranch\", left_h + right_h)\n     return (left + right, h)\n \n+# A TaprootInfo object has the following fields:\n+# - scriptPubKey: the scriptPubKey (witness v1 CScript)\n+# - inner_pubkey: the inner pubkey (32 bytes)\n+# - negflag: whether the pubkey in the scriptPubKey was negated from inner_pubkey+tweak*G (bool).\n+# - tweak: the tweak (32 bytes)\n+# - leaves: a dict of name -> TaprootLeafInfo objects for all known leaves\n TaprootInfo = namedtuple(\"TaprootInfo\", \"scriptPubKey,inner_pubkey,negflag,tweak,leaves\")\n+\n+# A TaprootLeafInfo object has the following fields:\n+# - script: the leaf script (CScript or bytes)\n+# - version: the leaf version (0xc0 for BIP342 tapscript)\n+# - merklebranch: the merkle branch to use for this leaf (32*N bytes)\n TaprootLeafInfo = namedtuple(\"TaprootLeafInfo\", \"script,version,merklebranch\")\n \n def taproot_construct(pubkey, scripts=None):\n     \"\"\"Construct a tree of Taproot spending conditions\n \n-    pubkey: an ECPubKey object for the internal pubkey\n+    pubkey: a 32-byte xonly pubkey for the internal pubkey (bytes)\n     scripts: a list of items; each item is either:\n-             - a (name, CScript) tuple\n-             - a (name, CScript, leaf version) tuple\n+             - a (name, CScript or bytes, leaf version) tuple\n+             - a (name, CScript or bytes) tuple (defaulting to leaf version 0xc0)\n              - another list of items (with the same structure)\n-             - a function, which specifies how to compute the hashing partner\n-               in function of the hash of whatever it is combined with\n+             - a list of two items; the first of which is an item itself, and the\n+               second is a function. The function takes as input the Merkle root of the\n+               first item, and produces a (fictitious) partner to hash with.\n \n-    Returns: script (sPK or redeemScript), tweak, {name:(script, leaf version, negation flag, innerkey, merklepath), ...}\n+    Returns: a TaprootInfo object\n     \"\"\"\n     if scripts is None:\n         scripts = []"
      }
    ]
  },
  {
    "sha": "cdf900cbf26db05c7edb398ea645f1d23049d810",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjZGY5MDBjYmYyNmRiMDVjN2VkYjM5OGVhNjQ1ZjFkMjMwNDlkODEw",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-10-20T22:11:07Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-11-26T22:56:25Z"
      },
      "message": "Document need_vin_vout_mismatch argument to make_spender",
      "tree": {
        "sha": "3f72cee7c874fa58f45633272b3ec3f1f901ec79",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3f72cee7c874fa58f45633272b3ec3f1f901ec79"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cdf900cbf26db05c7edb398ea645f1d23049d810",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cdf900cbf26db05c7edb398ea645f1d23049d810",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/cdf900cbf26db05c7edb398ea645f1d23049d810",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cdf900cbf26db05c7edb398ea645f1d23049d810/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "18246ed5f09dd078fa1410b7ec2ba4379cc5e032",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/18246ed5f09dd078fa1410b7ec2ba4379cc5e032",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/18246ed5f09dd078fa1410b7ec2ba4379cc5e032"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 2,
      "deletions": 0
    },
    "files": [
      {
        "sha": "116eb7e3d7908b7364c3c73aebd0f08b107c685f",
        "filename": "test/functional/feature_taproot.py",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/cdf900cbf26db05c7edb398ea645f1d23049d810/test/functional/feature_taproot.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/cdf900cbf26db05c7edb398ea645f1d23049d810/test/functional/feature_taproot.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_taproot.py?ref=cdf900cbf26db05c7edb398ea645f1d23049d810",
        "patch": "@@ -444,6 +444,8 @@ def make_spender(comment, *, tap=None, witv0=False, script=None, pkh=None, p2sh=\n     * standard: whether the (valid version of) spending is expected to be standard\n     * err_msg: a string with an expected error message for failure (or None, if not cared about)\n     * sigops_weight: the pre-taproot sigops weight consumed by a successful spend\n+    * need_vin_vout_mismatch: whether this test requires being tested in a transaction input that has no corresponding\n+                              transaction output.\n     \"\"\"\n \n     conf = dict()"
      }
    ]
  },
  {
    "sha": "8dbb7de67ce0a71f5fc54289c0ff048ac8dd0acc",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4ZGJiN2RlNjdjZTBhNzFmNWZjNTQyODljMGZmMDQ4YWM4ZGQwYWNj",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-10-20T22:17:52Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-11-26T22:56:25Z"
      },
      "message": "Add comments to VerifyTaprootCommitment",
      "tree": {
        "sha": "c6823bcead3b4ae8d0770a96caae385260e574e0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c6823bcead3b4ae8d0770a96caae385260e574e0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8dbb7de67ce0a71f5fc54289c0ff048ac8dd0acc",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8dbb7de67ce0a71f5fc54289c0ff048ac8dd0acc",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8dbb7de67ce0a71f5fc54289c0ff048ac8dd0acc",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8dbb7de67ce0a71f5fc54289c0ff048ac8dd0acc/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "cdf900cbf26db05c7edb398ea645f1d23049d810",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cdf900cbf26db05c7edb398ea645f1d23049d810",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/cdf900cbf26db05c7edb398ea645f1d23049d810"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 6,
      "deletions": 0
    },
    "files": [
      {
        "sha": "bb5a7158a5308bd296e173b182ff0029c09e7c4b",
        "filename": "src/script/interpreter.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8dbb7de67ce0a71f5fc54289c0ff048ac8dd0acc/src/script/interpreter.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8dbb7de67ce0a71f5fc54289c0ff048ac8dd0acc/src/script/interpreter.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/script/interpreter.cpp?ref=8dbb7de67ce0a71f5fc54289c0ff048ac8dd0acc",
        "patch": "@@ -1834,9 +1834,13 @@ static bool ExecuteWitnessScript(const Span<const valtype>& stack_span, const CS\n static bool VerifyTaprootCommitment(const std::vector<unsigned char>& control, const std::vector<unsigned char>& program, const CScript& script, uint256& tapleaf_hash)\n {\n     const int path_len = (control.size() - TAPROOT_CONTROL_BASE_SIZE) / TAPROOT_CONTROL_NODE_SIZE;\n+    //! The inner pubkey (x-only, so no Y coordinate parity).\n     const XOnlyPubKey p{uint256(std::vector<unsigned char>(control.begin() + 1, control.begin() + TAPROOT_CONTROL_BASE_SIZE))};\n+    //! The output pubkey (taken from the scriptPubKey).\n     const XOnlyPubKey q{uint256(program)};\n+    // Compute the tapleaf hash.\n     tapleaf_hash = (CHashWriter(HASHER_TAPLEAF) << uint8_t(control[0] & TAPROOT_LEAF_MASK) << script).GetSHA256();\n+    // Compute the Merkle root from the leaf and the provided path.\n     uint256 k = tapleaf_hash;\n     for (int i = 0; i < path_len; ++i) {\n         CHashWriter ss_branch{HASHER_TAPBRANCH};\n@@ -1848,7 +1852,9 @@ static bool VerifyTaprootCommitment(const std::vector<unsigned char>& control, c\n         }\n         k = ss_branch.GetSHA256();\n     }\n+    // Compute the tweak from the Merkle root and the inner pubkey.\n     k = (CHashWriter(HASHER_TAPTWEAK) << MakeSpan(p) << k).GetSHA256();\n+    // Verify that the output pubkey matches the tweaked inner pubkey, after correcting for parity.\n     return q.CheckPayToContract(p, k, control[0] & 1);\n }\n "
      }
    ]
  },
  {
    "sha": "6040de9a46725826330cd63cdf76e2121a18e728",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2MDQwZGU5YTQ2NzI1ODI2MzMwY2Q2M2NkZjc2ZTIxMjFhMThlNzI4",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-10-20T22:26:29Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-11-26T22:56:25Z"
      },
      "message": "Add comments on CPubKey::IsValid",
      "tree": {
        "sha": "b746553e7011821b44e651d50dd9963941bd69f7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b746553e7011821b44e651d50dd9963941bd69f7"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6040de9a46725826330cd63cdf76e2121a18e728",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6040de9a46725826330cd63cdf76e2121a18e728",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6040de9a46725826330cd63cdf76e2121a18e728",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6040de9a46725826330cd63cdf76e2121a18e728/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8dbb7de67ce0a71f5fc54289c0ff048ac8dd0acc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8dbb7de67ce0a71f5fc54289c0ff048ac8dd0acc",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8dbb7de67ce0a71f5fc54289c0ff048ac8dd0acc"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 9,
      "deletions": 0
    },
    "files": [
      {
        "sha": "80d0c18540d11cc0c09d98911a3449df90f1b905",
        "filename": "src/pubkey.h",
        "status": "modified",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6040de9a46725826330cd63cdf76e2121a18e728/src/pubkey.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6040de9a46725826330cd63cdf76e2121a18e728/src/pubkey.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/pubkey.h?ref=6040de9a46725826330cd63cdf76e2121a18e728",
        "patch": "@@ -170,6 +170,15 @@ class CPubKey\n     /*\n      * Check syntactic correctness.\n      *\n+     * When setting a pubkey (Set()) or deserializing fails (its header bytes\n+     * don't match the length of the data), the size is set to 0. Thus,\n+     * by checking size, one can observe whether Set() or deserialization has\n+     * failed.\n+     *\n+     * This does not check for more than that. In particular, it does not verify\n+     * that the coordinates correspond to a point on the curve (see IsFullyValid()\n+     * for that instead).\n+     *\n      * Note that this is consensus critical as CheckECDSASignature() calls it!\n      */\n     bool IsValid() const"
      }
    ]
  },
  {
    "sha": "ea0e78677bdbe3313f594118c500cf7784c56970",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplYTBlNzg2NzdiZGJlMzMxM2Y1OTQxMThjNTAwY2Y3Nzg0YzU2OTcw",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-10-21T20:03:38Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-11-26T22:56:25Z"
      },
      "message": "Document additional IsWitnessStandard behavior",
      "tree": {
        "sha": "f894163055b8212cd0b78e8fbfeddf5dcaa26218",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f894163055b8212cd0b78e8fbfeddf5dcaa26218"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ea0e78677bdbe3313f594118c500cf7784c56970",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ea0e78677bdbe3313f594118c500cf7784c56970",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ea0e78677bdbe3313f594118c500cf7784c56970",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ea0e78677bdbe3313f594118c500cf7784c56970/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6040de9a46725826330cd63cdf76e2121a18e728",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6040de9a46725826330cd63cdf76e2121a18e728",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6040de9a46725826330cd63cdf76e2121a18e728"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 3,
      "deletions": 1
    },
    "files": [
      {
        "sha": "466cf029a4f7da04f2f196e430815f97cc756236",
        "filename": "src/policy/policy.h",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ea0e78677bdbe3313f594118c500cf7784c56970/src/policy/policy.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ea0e78677bdbe3313f594118c500cf7784c56970/src/policy/policy.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/policy/policy.h?ref=ea0e78677bdbe3313f594118c500cf7784c56970",
        "patch": "@@ -103,7 +103,9 @@ bool AreInputsStandard(const CTransaction& tx, const CCoinsViewCache& mapInputs,\n     /**\n      * Check if the transaction is over standard P2WSH resources limit:\n      * 3600bytes witnessScript size, 80bytes per witness stack element, 100 witness stack elements\n-     * These limits are adequate for multi-signature up to n-of-100 using OP_CHECKSIG, OP_ADD, and OP_EQUAL,\n+     * These limits are adequate for multisignatures up to n-of-100 using OP_CHECKSIG, OP_ADD, and OP_EQUAL.\n+     *\n+     * Also enforce a maximum stack item size limit and no annexes for tapscript spends.\n      */\n bool IsWitnessStandard(const CTransaction& tx, const CCoinsViewCache& mapInputs);\n "
      }
    ]
  },
  {
    "sha": "f867cbcc268a3bfaeef5510a7e40e6d3c0818b6d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmODY3Y2JjYzI2OGEzYmZhZWVmNTUxMGE3ZTQwZTZkM2MwODE4YjZk",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-10-21T20:20:14Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-11-26T22:56:25Z"
      },
      "message": "Clean up assets test minimizer LDFLAGS",
      "tree": {
        "sha": "239074d25384016634f9e647373692786f7b11f0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/239074d25384016634f9e647373692786f7b11f0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f867cbcc268a3bfaeef5510a7e40e6d3c0818b6d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f867cbcc268a3bfaeef5510a7e40e6d3c0818b6d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f867cbcc268a3bfaeef5510a7e40e6d3c0818b6d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f867cbcc268a3bfaeef5510a7e40e6d3c0818b6d/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ea0e78677bdbe3313f594118c500cf7784c56970",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ea0e78677bdbe3313f594118c500cf7784c56970",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ea0e78677bdbe3313f594118c500cf7784c56970"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "f4c726b0b253a9aa1d46f20b93143314d458907a",
        "filename": "src/Makefile.test.include",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f867cbcc268a3bfaeef5510a7e40e6d3c0818b6d/src/Makefile.test.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f867cbcc268a3bfaeef5510a7e40e6d3c0818b6d/src/Makefile.test.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.test.include?ref=f867cbcc268a3bfaeef5510a7e40e6d3c0818b6d",
        "patch": "@@ -1105,7 +1105,7 @@ test_fuzz_script_interpreter_SOURCES = test/fuzz/script_interpreter.cpp\n test_fuzz_script_assets_test_minimizer_CPPFLAGS = $(AM_CPPFLAGS) $(BITCOIN_INCLUDES)\n test_fuzz_script_assets_test_minimizer_CXXFLAGS = $(AM_CXXFLAGS) $(PIE_FLAGS)\n test_fuzz_script_assets_test_minimizer_LDADD = $(FUZZ_SUITE_LD_COMMON)\n-test_fuzz_script_assets_test_minimizer_LDFLAGS = $(RELDFLAGS) $(AM_LDFLAGS) $(LIBTOOL_APP_LDFLAGS)\n+test_fuzz_script_assets_test_minimizer_LDFLAGS = $(FUZZ_SUITE_LDFLAGS_COMMON)\n test_fuzz_script_assets_test_minimizer_SOURCES = test/fuzz/script_assets_test_minimizer.cpp\n \n test_fuzz_script_ops_CPPFLAGS = $(AM_CPPFLAGS) $(BITCOIN_INCLUDES)"
      }
    ]
  },
  {
    "sha": "84e29c7c0141b52044020ec0c5dfa8a462b7e97f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4NGUyOWM3YzAxNDFiNTIwNDQwMjBlYzBjNWRmYThhNDYyYjdlOTdm",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-10-21T20:45:02Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-11-26T22:56:25Z"
      },
      "message": "Mention in validation that IsWitnessStandard tests for P2TR",
      "tree": {
        "sha": "c1e2484fcf25d2052c5f00c3bfdf49b491f417e3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c1e2484fcf25d2052c5f00c3bfdf49b491f417e3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/84e29c7c0141b52044020ec0c5dfa8a462b7e97f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/84e29c7c0141b52044020ec0c5dfa8a462b7e97f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/84e29c7c0141b52044020ec0c5dfa8a462b7e97f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/84e29c7c0141b52044020ec0c5dfa8a462b7e97f/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f867cbcc268a3bfaeef5510a7e40e6d3c0818b6d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f867cbcc268a3bfaeef5510a7e40e6d3c0818b6d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f867cbcc268a3bfaeef5510a7e40e6d3c0818b6d"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "5ddee092bf8f57ec2bb2d8fc6fde8d60110a31d2",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/84e29c7c0141b52044020ec0c5dfa8a462b7e97f/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/84e29c7c0141b52044020ec0c5dfa8a462b7e97f/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=84e29c7c0141b52044020ec0c5dfa8a462b7e97f",
        "patch": "@@ -696,7 +696,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         return state.Invalid(TxValidationResult::TX_INPUTS_NOT_STANDARD, \"bad-txns-nonstandard-inputs\");\n     }\n \n-    // Check for non-standard witness in P2WSH\n+    // Check for non-standard witnesses.\n     if (tx.HasWitness() && fRequireStandard && !IsWitnessStandard(tx, m_view))\n         return state.Invalid(TxValidationResult::TX_WITNESS_MUTATED, \"bad-witness-nonstandard\");\n "
      }
    ]
  },
  {
    "sha": "2d8099c713dfd4b546150fd53c2e4f364b9009f4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyZDgwOTljNzEzZGZkNGI1NDYxNTBmZDUzYzJlNGYzNjRiOTAwOWY0",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-10-30T21:56:16Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-11-26T22:56:25Z"
      },
      "message": "Mention units of MAX_STANDARD_ policy constants",
      "tree": {
        "sha": "d2f926b862ebe3e85eb244f1d749a497a3a971f0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d2f926b862ebe3e85eb244f1d749a497a3a971f0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2d8099c713dfd4b546150fd53c2e4f364b9009f4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2d8099c713dfd4b546150fd53c2e4f364b9009f4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2d8099c713dfd4b546150fd53c2e4f364b9009f4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2d8099c713dfd4b546150fd53c2e4f364b9009f4/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "84e29c7c0141b52044020ec0c5dfa8a462b7e97f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/84e29c7c0141b52044020ec0c5dfa8a462b7e97f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/84e29c7c0141b52044020ec0c5dfa8a462b7e97f"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 3,
      "deletions": 3
    },
    "files": [
      {
        "sha": "fc144e924bc3fb2e2a888bfa5249a61025bc39bd",
        "filename": "src/policy/policy.h",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2d8099c713dfd4b546150fd53c2e4f364b9009f4/src/policy/policy.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2d8099c713dfd4b546150fd53c2e4f364b9009f4/src/policy/policy.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/policy/policy.h?ref=2d8099c713dfd4b546150fd53c2e4f364b9009f4",
        "patch": "@@ -38,11 +38,11 @@ static const unsigned int DEFAULT_BYTES_PER_SIGOP = 20;\n static const bool DEFAULT_PERMIT_BAREMULTISIG = true;\n /** The maximum number of witness stack items in a standard P2WSH script */\n static const unsigned int MAX_STANDARD_P2WSH_STACK_ITEMS = 100;\n-/** The maximum size of each witness stack item in a standard P2WSH script */\n+/** The maximum size in bytes of each witness stack item in a standard P2WSH script */\n static const unsigned int MAX_STANDARD_P2WSH_STACK_ITEM_SIZE = 80;\n-/** The maximum size of each witness stack item in a standard BIP 342 script (Taproot, leaf version 0xc0) */\n+/** The maximum size in bytes of each witness stack item in a standard BIP 342 script (Taproot, leaf version 0xc0) */\n static const unsigned int MAX_STANDARD_TAPSCRIPT_STACK_ITEM_SIZE = 80;\n-/** The maximum size of a standard witnessScript */\n+/** The maximum size in bytes of a standard witnessScript */\n static const unsigned int MAX_STANDARD_P2WSH_SCRIPT_SIZE = 3600;\n /** Min feerate for defining dust. Historically this has been based on the\n  * minRelayTxFee, however changing the dust limit changes which transactions are"
      }
    ]
  }
]