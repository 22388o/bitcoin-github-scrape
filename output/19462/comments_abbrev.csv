andrewtoth,2020-07-07 20:32:01,"Concept ACK.\n\nDefinitely useful since there's no easy way to currently track replacement for systems listening to bitcoind.",https://github.com/bitcoin/bitcoin/pull/19462#issuecomment-655115354,655115354,
DrahtBot,2020-07-07 21:05:19,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18309 (zmq: Add support to listen on multiple interfaces by n-thumann)\n* #13686 (ZMQ: Small cleanups in the ZMQ code by ",https://github.com/bitcoin/bitcoin/pull/19462#issuecomment-655134151,655134151,
instagibbs,2020-07-08 02:00:10,"Pushed some fixes, and documentation.",https://github.com/bitcoin/bitcoin/pull/19462#issuecomment-655234881,655234881,
instagibbs,2020-07-08 13:21:14,"Single run failure unrelated:\n```\n  File ""/home/travis/build/bitcoin/bitcoin/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/feature_backwards_compatibility.py"", line 106, in run_test\n    self.nodes[1].abandontransaction(tx3_id)\n```\nrestarted",https://github.com/bitcoin/bitcoin/pull/19462#issuecomment-655515693,655515693,
laanwj,2020-07-09 13:00:56,Concept ACK,https://github.com/bitcoin/bitcoin/pull/19462#issuecomment-656112969,656112969,
shuckc,2020-07-09 13:51:54,"At the moment, the way that I synchronise with mempool contents is to poll `getrawmempool` and listen out for `hashtx` notifications, with the caveat that evictions are only detected by the poll. Since you are looking to address that here, Concept Ack from me. \n\nOne consideration is that it's not currently possible to perfectly synchronise the poll of `getrawmempool` with the zmq announcements",https://github.com/bitcoin/bitcoin/pull/19462#issuecomment-656140421,656140421,
luke-jr,2020-07-09 19:34:54,Couldn't this just be a new message for the existing endpoints?,https://github.com/bitcoin/bitcoin/pull/19462#issuecomment-656312103,656312103,
instagibbs,2020-07-09 19:41:10,"@luke-jr I thought I'd break someone's integration perhaps if I did so since there's no ""options"" or anything in current messages, just txids AFAICT. (maybe I'm wrong!)",https://github.com/bitcoin/bitcoin/pull/19462#issuecomment-656314688,656314688,
instagibbs,2020-07-10 17:46:42,pushed fixups,https://github.com/bitcoin/bitcoin/pull/19462#issuecomment-656801667,656801667,
instagibbs,2020-07-14 17:15:58,"Oddly enough I'm going to concept NACK my own PR.\n\nAfter spending some time trying to write a ""mempool tracker"" via ZMQ with mempool sequence numbers, this plus legacy zmq notifications are insufficient.\n\n1) The `hashtx` feed really isn't a mempool feed, it's a feed of ""transactions I saw somewhere"", which is pretty obnoxious and hard to reason about and be very useful, especially in the p",https://github.com/bitcoin/bitcoin/pull/19462#issuecomment-658304417,658304417,
promag,2020-07-07 20:40:38,"nit, double space.",https://github.com/bitcoin/bitcoin/pull/19462#discussion_r451130141,451130141,src/init.cpp
instagibbs,2020-07-08 01:59:49,done,https://github.com/bitcoin/bitcoin/pull/19462#discussion_r451238965,451238965,src/init.cpp
laanwj,2020-07-09 13:28:16,I don't think it makes sense to pass `reason` as a reference here. Let alone a mutable one!,https://github.com/bitcoin/bitcoin/pull/19462#discussion_r452216846,452216846,src/zmq/zmqabstractnotifier.cpp
laanwj,2020-07-09 13:28:38,Same comment re: use of reference parameter.,https://github.com/bitcoin/bitcoin/pull/19462#discussion_r452217096,452217096,src/zmq/zmqabstractnotifier.h
laanwj,2020-07-09 13:31:49,"Do we want to report the reason here? No strong reason here. On one hand, reasons are an  implementation detail, on the other, for statistics it could be useful to report it (I think back in the day when I had a patch to add this functionality, I did add the reason, though converted to a interface-specific enum).",https://github.com/bitcoin/bitcoin/pull/19462#discussion_r452219371,452219371,src/zmq/zmqpublishnotifier.cpp
instagibbs,2020-07-09 13:35:23,"Just a hunch but I think in general ""no"". Anyone who wants to do statistics on mempool drops can look at logs after the fact? The aim of this PR is primarily for timely notification of transaction changes in ""known"" mempool.",https://github.com/bitcoin/bitcoin/pull/19462#discussion_r452221784,452221784,src/zmq/zmqpublishnotifier.cpp
fjahr,2020-07-10 14:23:53,nit: looks like there is an extra space here,https://github.com/bitcoin/bitcoin/pull/19462#discussion_r452876325,452876325,src/zmq/zmqnotificationinterface.cpp
fjahr,2020-07-10 14:29:43,Also a some code duplication here with the two functions above.,https://github.com/bitcoin/bitcoin/pull/19462#discussion_r452879993,452879993,src/zmq/zmqnotificationinterface.cpp
instagibbs,2020-07-10 17:46:20,Done.,https://github.com/bitcoin/bitcoin/pull/19462#discussion_r452985437,452985437,src/zmq/zmqabstractnotifier.cpp
fjahr,2020-07-10 18:18:35,"Code between this function and `NotifyTransaction` is almost identical, could be de-dublicated, maybe also together with `NotifyBlock` but it's not blocking IMO",https://github.com/bitcoin/bitcoin/pull/19462#discussion_r453000770,453000770,src/zmq/zmqpublishnotifier.cpp
instagibbs,2020-07-13 14:26:50,"Deduplicated the txn publishing portion, left block stuff alone for now.",https://github.com/bitcoin/bitcoin/pull/19462#discussion_r453689416,453689416,src/zmq/zmqpublishnotifier.cpp
