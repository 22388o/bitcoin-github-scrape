[
  {
    "sha": "076183b36b76a11438463883ff916f17aef9e001",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowNzYxODNiMzZiNzZhMTE0Mzg0NjM4ODNmZjkxNmYxN2FlZjllMDAx",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-06-18T05:31:07Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-06-19T09:20:27Z"
      },
      "message": "build: add -fcf-protection=full to hardening options\n\nEnables code instrumentation of control-flow transfers. Available in\nGCC 8 and Clang 7.\n\nThis option is now on by default in Ubuntu GCC as of 19.10.",
      "tree": {
        "sha": "0fd11ad5682521d0a0587169a6a43d5688c0605b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0fd11ad5682521d0a0587169a6a43d5688c0605b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/076183b36b76a11438463883ff916f17aef9e001",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAl7sg1sACgkQLuufXMCV\nJsHoiA//aelFs9O97PRpl3YIv9O/+lWJrZeVeGrNDoHZcUEYHkatWFOtYbmcI8UG\nmk3zq5ZsF7QPFZZPnNFctgoCB4JfhP+c0X6Wvc4tgJ0pXHCzxikEnDFzMsaHDDux\nWSQeX/ZwqH4nGCsvIv1nfr1/QEhKOkh1D7t/VWtkmVtOCsaVnTIe5F/WHuqqFmoE\nV1yK77WnI30OSLSVMpH2mMI7tIKuIGbs7KwQ1o9ITxHI8b1BH3JUHSYvzbAqEGfH\njEGuZA9GgNcz7XuhZ+CgqdVcu2llv+uvpv9r6jmt7U3fyEOCK2yJvQxTJZmKusdy\nr4vYfnSsP7/MV7uhp64JWyueo/J5jvrwNjFwtD8F9ZDZAc89/7Epv55Ihoo99aIU\n+DLqWRRgajPAMoZnLy2mYU6Kbjhu7qgo1e1cInvxmR/08C+pO0Wfp6c/kT759zBm\nHOGr8N+0yNnaoSYy78EVVIuNHuCZMk+2TafeyxxBrFvytg7dfCpC3wNgc9uhzQFO\nPa/vGNjsrryR4Gx2wTU0eJAGzgc2VDzSGFYFEqB+dQuWhLG540I4T2HTZ//h0vcF\nMu7BnETJS6RQHZ4Xs2C017uyF5Lcm2pTLGi0RUaoPKSlgtwISuab8WC9FBgQN5Mq\n3+vYhaqODm/DO+9BqN/BBd6yX3QXZ0K2wYXrEzCkqSszbqPjxV8=\n=CWwl\n-----END PGP SIGNATURE-----",
        "payload": "tree 0fd11ad5682521d0a0587169a6a43d5688c0605b\nparent c940c1ad8547eb7df1dcbd6f4e566820664d19c9\nauthor fanquake <fanquake@gmail.com> 1592458267 +0800\ncommitter fanquake <fanquake@gmail.com> 1592558427 +0800\n\nbuild: add -fcf-protection=full to hardening options\n\nEnables code instrumentation of control-flow transfers. Available in\nGCC 8 and Clang 7.\n\nThis option is now on by default in Ubuntu GCC as of 19.10.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/076183b36b76a11438463883ff916f17aef9e001",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/076183b36b76a11438463883ff916f17aef9e001",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/076183b36b76a11438463883ff916f17aef9e001/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c940c1ad8547eb7df1dcbd6f4e566820664d19c9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c940c1ad8547eb7df1dcbd6f4e566820664d19c9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c940c1ad8547eb7df1dcbd6f4e566820664d19c9"
      }
    ],
    "stats": {
      "total": 1,
      "additions": 1,
      "deletions": 0
    },
    "files": [
      {
        "sha": "fe8ce1a8f79686dc44a87b0384c2cf158c717a1a",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/076183b36b76a11438463883ff916f17aef9e001/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/076183b36b76a11438463883ff916f17aef9e001/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=076183b36b76a11438463883ff916f17aef9e001",
        "patch": "@@ -785,6 +785,7 @@ if test x$use_hardening != xno; then\n   AX_CHECK_COMPILE_FLAG([-Wstack-protector],[HARDENED_CXXFLAGS=\"$HARDENED_CXXFLAGS -Wstack-protector\"])\n   AX_CHECK_COMPILE_FLAG([-fstack-protector-all],[HARDENED_CXXFLAGS=\"$HARDENED_CXXFLAGS -fstack-protector-all\"])\n \n+  AX_CHECK_COMPILE_FLAG([-fcf-protection=full],[HARDENED_CXXFLAGS=\"$HARDENED_CXXFLAGS -fcf-protection=full\"])\n   dnl When enable_debug is yes, all optimizations are disabled.\n   dnl However, FORTIFY_SOURCE requires that there is some level of optimization, otherwise it does nothing and just creates a compiler warning.\n   dnl Since FORTIFY_SOURCE is a no-op without optimizations, do not enable it when enable_debug is yes."
      }
    ]
  },
  {
    "sha": "b536813cefc13f5c54a28a7c2fce8c69e89d6624",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiNTM2ODEzY2VmYzEzZjVjNTRhMjhhN2MyZmNlOGM2OWU4OWQ2NjI0",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-06-18T05:31:28Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-06-19T09:20:27Z"
      },
      "message": "build: add -fstack-clash-protection to hardening flags\n\nThis option causes the compiler to insert probes whenever stack space\nis allocated statically or dynamically to reliably detect stack overflows\nand thus mitigate the attack vector that relies on jumping over a stack\nguard page as provided by the operating system.\n\nThis option is now enabled by default in Ubuntu GCC as of 19.10.\n\nAvailable in GCC 8 and Clang 11.",
      "tree": {
        "sha": "4242559791a76e7f3705618f8d985d28761a53c9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4242559791a76e7f3705618f8d985d28761a53c9"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b536813cefc13f5c54a28a7c2fce8c69e89d6624",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAl7sg1sACgkQLuufXMCV\nJsF+ZRAAtpRGLTfjKFDJ6cRn8onE0dDZFK0CBf9b7cCENAS6+1DbsO1S4x/ub4ir\nz0nr48tkA/gly84FHs2m1qWyLC27EXDIIGX1/lC8hPUUk1aJCos6dizOTtsF6Cmz\nUCoJCpsHfe00oedqUNyjWuwlto8BBTVaaiJbyEJuNbpltPJd9fFVa6RmI0BMceZB\nL82BlkvEOnQXil/4FwACUqmT+AgHh7HcZa5PEa9Q+RoUDZ15Km/jHiCDI/HWGoFz\nRn5hk1ToslnJzgqQeZuNM1xhHo+65ICZdYupbkzXIAI8FGEvVsZr7zQfEtb60faE\n/Te9akhLOEOR2x8G+OynTvFjxqEAj5SzRqWbJKRD31fdk3+cKEkvym5b3eAq7ZLA\n4qudXhh8O9NwqiFxYKucNlo9MKi/cuzH2TKg64wbZLWA0pyKiAIKKMMTZeEv5HyH\nPYp3eiujMzRzUlB6/fm4f80B/7RaYCH+Vf7gV65sX+Ah2bN61xjsN6wqGzjguI/i\n/Xr7m50vYoVAOrgSsg3843o1zujG7nXr92I8jYvUZXTeJVjr1yaxNMvd/NJIp1YB\nf9nAa404OFi3VHLaUhXNZMvJ0ym3hSUXgHlz5qxSYnjNalE6Wn02dMkMYDD3wvH4\n9oWStvUBYvmVBO6PsUH27z3FWKj/e2OYtsB/7JnlvOVisehlJs4=\n=QA5T\n-----END PGP SIGNATURE-----",
        "payload": "tree 4242559791a76e7f3705618f8d985d28761a53c9\nparent 076183b36b76a11438463883ff916f17aef9e001\nauthor fanquake <fanquake@gmail.com> 1592458288 +0800\ncommitter fanquake <fanquake@gmail.com> 1592558427 +0800\n\nbuild: add -fstack-clash-protection to hardening flags\n\nThis option causes the compiler to insert probes whenever stack space\nis allocated statically or dynamically to reliably detect stack overflows\nand thus mitigate the attack vector that relies on jumping over a stack\nguard page as provided by the operating system.\n\nThis option is now enabled by default in Ubuntu GCC as of 19.10.\n\nAvailable in GCC 8 and Clang 11.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b536813cefc13f5c54a28a7c2fce8c69e89d6624",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b536813cefc13f5c54a28a7c2fce8c69e89d6624",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b536813cefc13f5c54a28a7c2fce8c69e89d6624/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "076183b36b76a11438463883ff916f17aef9e001",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/076183b36b76a11438463883ff916f17aef9e001",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/076183b36b76a11438463883ff916f17aef9e001"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 7,
      "deletions": 0
    },
    "files": [
      {
        "sha": "c26180ab3eeca6c8afca91766e68e4dc64656120",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b536813cefc13f5c54a28a7c2fce8c69e89d6624/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b536813cefc13f5c54a28a7c2fce8c69e89d6624/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=b536813cefc13f5c54a28a7c2fce8c69e89d6624",
        "patch": "@@ -786,6 +786,13 @@ if test x$use_hardening != xno; then\n   AX_CHECK_COMPILE_FLAG([-fstack-protector-all],[HARDENED_CXXFLAGS=\"$HARDENED_CXXFLAGS -fstack-protector-all\"])\n \n   AX_CHECK_COMPILE_FLAG([-fcf-protection=full],[HARDENED_CXXFLAGS=\"$HARDENED_CXXFLAGS -fcf-protection=full\"])\n+\n+  dnl stack-clash-protection does not work properly when building for Windows.\n+  dnl We use the test case from https://gcc.gnu.org/bugzilla/show_bug.cgi?id=90458\n+  dnl to determine if it can be enabled.\n+  AX_CHECK_COMPILE_FLAG([-fstack-clash-protection],[HARDENED_CXXFLAGS=\"$HARDENED_CXXFLAGS -fstack-clash-protection\"],[],[\"-O0\"],\n+    [AC_LANG_SOURCE([[class D {public: unsigned char buf[32768];}; int main() {D d; return 0;}]])])\n+\n   dnl When enable_debug is yes, all optimizations are disabled.\n   dnl However, FORTIFY_SOURCE requires that there is some level of optimization, otherwise it does nothing and just creates a compiler warning.\n   dnl Since FORTIFY_SOURCE is a no-op without optimizations, do not enable it when enable_debug is yes."
      }
    ]
  }
]