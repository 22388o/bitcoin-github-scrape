[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370891217",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12618#issuecomment-370891217",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12618",
    "id": 370891217,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDg5MTIxNw==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-06T19:03:39Z",
    "updated_at": "2018-03-06T19:03:39Z",
    "author_association": "MEMBER",
    "body": "Is loadblk thread the only thread this is relevant for? what about the script verification threads?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370891217/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370905121",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12618#issuecomment-370905121",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12618",
    "id": 370905121,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDkwNTEyMQ==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-06T19:48:18Z",
    "updated_at": "2018-03-06T19:48:18Z",
    "author_association": "MEMBER",
    "body": "Is this the windows equivalent?\r\n```cpp\r\nSetThreadPriority(GetCurrentThread(), THREAD_MODE_BACKGROUND_BEGIN)\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370905121/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370918802",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12618#issuecomment-370918802",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12618",
    "id": 370918802,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDkxODgwMg==",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-06T20:34:47Z",
    "updated_at": "2018-03-06T20:34:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "On Linux `SCHED_BATCH` just prevents batch tasks from pre-empting normal tasks (i.e. normal tasks will run until their timeslice expires, or another normal tasks pre-empts them). When picking the next task to run the scheduler considers `SCHED_OTHER` (i.e. normal) and `SCHED_BATCH` tasks equally. This is why setting `SCHED_BATCH` tasks are only \"mildly disfavored\", because they'll still be considered to run using the normal metrics whenever the scheduler ticks (usually 100Hz or 1000Hz).\r\n\r\nIt sounds like Windows `THREAD_MODE_BACKGROUND_BEGIN` is [much more extreme](https://stackoverflow.com/questions/43051261/why-does-thread-mode-background-begin-cause-my-code-to-run-20x-slower-than-threa). It looks like maybe the Windows equivalent is `THREAD_PRIORITY_BELOW_NORMAL` but I do not know a lot about Windows.\r\n\r\nI don't know as much about the script verification threads. If we are going to set `SCHED_BATCH` for loadblk then it makes sense to me to set the script verification threads to `SCHED_BATCH` as well, at least until the loadblk thread completes. You can freely switch back from `SCHED_BATCH` to `SCHED_OTHER` so it would be possible to only run them in the batch mode while reindexing is happening, or we could just always have them set at batch priority.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370918802/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370960158",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12618#issuecomment-370960158",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12618",
    "id": 370960158,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDk2MDE1OA==",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?u=8cdd8653982252593843d7369ecfebe432b89768&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-06T23:00:16Z",
    "updated_at": "2018-03-06T23:00:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK for this: \r\n\r\none note: you would want something realtime for scriptcheck threads while they are validating a block incoming from network -- we want these to take priority over other threads aggressively.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370960158/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371908136",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12618#issuecomment-371908136",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12618",
    "id": 371908136,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTkwODEzNg==",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-09T18:42:53Z",
    "updated_at": "2018-03-09T18:42:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Re: Jeremy's comment, there are a few ways to increase the priority of the script verification thread to ensure low-latency block relay. On Linux there exists `SCHED_FIFO` and `SCHED_RR` threads which give threads semi-realtime scheduling guarantees, and can ensure that such threads are always prioritized above other threads. Linux also supports per-thread nice values (this is a Linux extension, POSIX specifies that nice values are per-process).\r\n\r\nUsing the other scheduling modes is better for realtime behavior, but somewhat dangerous because such threads can pre-empt all other non-realtime processes, meaning that this could be used as a DOS vector. Changing the nice value is a bit safer. I will probably look into this as part of another PR because I'd like to benchmark that change.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371908136/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/374064663",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12618#issuecomment-374064663",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12618",
    "id": 374064663,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDA2NDY2Mw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-18T23:14:56Z",
    "updated_at": "2018-03-18T23:14:56Z",
    "author_association": "MEMBER",
    "body": "I think the commits can be squashed?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/374064663/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/374117709",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12618#issuecomment-374117709",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12618",
    "id": 374117709,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDExNzcwOQ==",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-19T06:58:08Z",
    "updated_at": "2018-03-19T06:58:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @MarcoFalke , squashed to one commit. I'm interested into looking at the RT change Jeremy suggested as well, but that's more impactful so I'd rather do that separately unless people want to see that change done here.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/374117709/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/376338730",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12618#issuecomment-376338730",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12618",
    "id": 376338730,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NjMzODczMA==",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-26T22:58:53Z",
    "updated_at": "2018-03-26T22:58:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Updated to use `pthread_setschedparam()`. It seems that `<sched.h>` is standard on Posix systems but `SCHED_BATCH` is not, so I updated the `#ifdef` logic a little to reflect that. I also put the error logging in `SchedBatchPriority()` itself as this return 1 on Windows but errno won't be set. Could also do it the other way (return 0 on non-Linux hosts and then move the log statement to the call site).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/376338730/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379485567",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12618#issuecomment-379485567",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12618",
    "id": 379485567,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTQ4NTU2Nw==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-07T17:24:26Z",
    "updated_at": "2018-04-07T17:24:26Z",
    "author_association": "MEMBER",
    "body": "utACK https://github.com/bitcoin/bitcoin/pull/12618/commits/d54874d795a523d7cad5f4a9f4270145e56238f8",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379485567/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172624948",
    "pull_request_review_id": 101674328,
    "id": 172624948,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjYyNDk0OA==",
    "diff_hunk": "@@ -955,3 +955,10 @@ fs::path AbsPathForConfigVal(const fs::path& path, bool net_specific)\n {\n     return fs::absolute(path, GetDataDir(net_specific));\n }\n+\n+void ScheduleBatchPriority(pid_t tid) {",
    "path": "src/util.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "d54874d795a523d7cad5f4a9f4270145e56238f8",
    "original_commit_id": "cb89fcaa835b11133143557c264fdc86c111f3b1",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "pid_t is not available on windows, I think it would be better to remove the parameter as it's always passed as 0.",
    "created_at": "2018-03-06T19:03:19Z",
    "updated_at": "2018-03-26T22:59:54Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12618#discussion_r172624948",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12618",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172624948"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12618#discussion_r172624948"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12618"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172624948/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 959,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172626755",
    "pull_request_review_id": 101676484,
    "id": 172626755,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjYyNjc1NQ==",
    "diff_hunk": "@@ -955,3 +955,10 @@ fs::path AbsPathForConfigVal(const fs::path& path, bool net_specific)\n {\n     return fs::absolute(path, GetDataDir(net_specific));\n }\n+\n+void ScheduleBatchPriority(pid_t tid) {",
    "path": "src/util.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "d54874d795a523d7cad5f4a9f4270145e56238f8",
    "original_commit_id": "cb89fcaa835b11133143557c264fdc86c111f3b1",
    "user": {
      "login": "eklitzke",
      "id": 2734,
      "node_id": "MDQ6VXNlcjI3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eklitzke",
      "html_url": "https://github.com/eklitzke",
      "followers_url": "https://api.github.com/users/eklitzke/followers",
      "following_url": "https://api.github.com/users/eklitzke/following{/other_user}",
      "gists_url": "https://api.github.com/users/eklitzke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
      "organizations_url": "https://api.github.com/users/eklitzke/orgs",
      "repos_url": "https://api.github.com/users/eklitzke/repos",
      "events_url": "https://api.github.com/users/eklitzke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eklitzke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think you're right.",
    "created_at": "2018-03-06T19:09:39Z",
    "updated_at": "2018-03-26T22:59:54Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12618#discussion_r172626755",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12618",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172626755"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12618#discussion_r172626755"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12618"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172626755/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 959,
    "side": "RIGHT",
    "in_reply_to_id": 172624948
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/176436766",
    "pull_request_review_id": 106137689,
    "id": 176436766,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3NjQzNjc2Ng==",
    "diff_hunk": "@@ -627,6 +627,7 @@ void ThreadImport(std::vector<fs::path> vImportFiles)\n {\n     const CChainParams& chainparams = Params();\n     RenameThread(\"bitcoin-loadblk\");\n+    ScheduleBatchPriority();",
    "path": "src/init.cpp",
    "position": 4,
    "original_position": 4,
    "commit_id": "d54874d795a523d7cad5f4a9f4270145e56238f8",
    "original_commit_id": "a2ed276b52aec97d37257b7aad73f7f332a926d3",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Would be nice to log the error message if sched_batch returns -1. EINVAL / EPERM cases would be good to know about.",
    "created_at": "2018-03-22T14:20:45Z",
    "updated_at": "2018-03-26T22:59:54Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12618#discussion_r176436766",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12618",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/176436766"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12618#discussion_r176436766"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12618"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/176436766/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 628,
    "original_line": 628,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/176439149",
    "pull_request_review_id": 106137689,
    "id": 176439149,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3NjQzOTE0OQ==",
    "diff_hunk": "@@ -953,3 +957,12 @@ fs::path AbsPathForConfigVal(const fs::path& path, bool net_specific)\n {\n     return fs::absolute(path, GetDataDir(net_specific));\n }\n+\n+int ScheduleBatchPriority(void) {\n+#if HAVE_SCHED_H && defined(SCHED_BATCH)\n+    sched_param param{.sched_priority = 0};\n+    return sched_setscheduler(0, SCHED_BATCH, &param);",
    "path": "src/util.cpp",
    "position": null,
    "original_position": 19,
    "commit_id": "d54874d795a523d7cad5f4a9f4270145e56238f8",
    "original_commit_id": "a2ed276b52aec97d37257b7aad73f7f332a926d3",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Would calling `pthread_setschedparam` instead of `sched_setscheduler` be a little more portable? It seems like you might not need the configure check using this.",
    "created_at": "2018-03-22T14:26:41Z",
    "updated_at": "2018-03-26T22:59:54Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12618#discussion_r176439149",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12618",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/176439149"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12618#discussion_r176439149"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12618"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/176439149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 964,
    "side": "RIGHT"
  }
]