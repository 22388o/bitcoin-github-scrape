[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243101062",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-243101062",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 243101062,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzEwMTA2Mg==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-29T11:40:14Z",
    "updated_at": "2016-08-29T11:40:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is indeed a nice idea.\nutACK.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243101062/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243143404",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-243143404",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 243143404,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzE0MzQwNA==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-29T14:38:03Z",
    "updated_at": "2016-08-29T14:38:03Z",
    "author_association": "MEMBER",
    "body": "At the risk of it being blatantly obvious, this would especially allow nodes with default settings during IBD to sync faster, yes?\n\nconcept ACK\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243143404/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243154336",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-243154336",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 243154336,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzE1NDMzNg==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-29T15:13:57Z",
    "updated_at": "2016-08-29T15:13:57Z",
    "author_association": "MEMBER",
    "body": "> At the risk of it being blatantly obvious, this would especially allow nodes with default settings during IBD to sync faster, yes?\n\nIndeed!\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243154336/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244536507",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-244536507",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 244536507,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDUzNjUwNw==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-03T09:22:26Z",
    "updated_at": "2016-09-03T09:22:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "utACK.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244536507/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247354294",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-247354294",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 247354294,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NzM1NDI5NA==",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?u=6a4a31aaddbc438e053c52d084a698a5f622f1ea&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-15T15:02:19Z",
    "updated_at": "2016-09-15T15:02:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "At the risk of appearing stupid, how does this help nodes with default settings sync faster during IBD?\n\n...coincache helps to validate blocks..?\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247354294/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247355905",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-247355905",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 247355905,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NzM1NTkwNQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-15T15:07:57Z",
    "updated_at": "2016-09-15T15:07:57Z",
    "author_association": "MEMBER",
    "body": "Because during IBD, the mempool is nearly empty. With this patch, all that\nunused mempool space (300 Mbyte by default currently) will be used for the\nchainstate cache, which is the bottleneck for block validation during IBD.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247355905/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247357336",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-247357336",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 247357336,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NzM1NzMzNg==",
    "user": {
      "login": "paveljanik",
      "id": 6848764,
      "node_id": "MDQ6VXNlcjY4NDg3NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6848764?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paveljanik",
      "html_url": "https://github.com/paveljanik",
      "followers_url": "https://api.github.com/users/paveljanik/followers",
      "following_url": "https://api.github.com/users/paveljanik/following{/other_user}",
      "gists_url": "https://api.github.com/users/paveljanik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paveljanik/subscriptions",
      "organizations_url": "https://api.github.com/users/paveljanik/orgs",
      "repos_url": "https://api.github.com/users/paveljanik/repos",
      "events_url": "https://api.github.com/users/paveljanik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paveljanik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-15T15:12:58Z",
    "updated_at": "2016-09-15T15:12:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "utACK https://github.com/bitcoin/bitcoin/pull/8610/commits/8b85edee37df75c443dd5bfe33eca44e964482d8\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247357336/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247377621",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-247377621",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 247377621,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NzM3NzYyMQ==",
    "user": {
      "login": "morcos",
      "id": 4360349,
      "node_id": "MDQ6VXNlcjQzNjAzNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4360349?u=b7dd63827227d69794b5fe28797b1bd107b930dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/morcos",
      "html_url": "https://github.com/morcos",
      "followers_url": "https://api.github.com/users/morcos/followers",
      "following_url": "https://api.github.com/users/morcos/following{/other_user}",
      "gists_url": "https://api.github.com/users/morcos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/morcos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/morcos/subscriptions",
      "organizations_url": "https://api.github.com/users/morcos/orgs",
      "repos_url": "https://api.github.com/users/morcos/repos",
      "events_url": "https://api.github.com/users/morcos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/morcos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-15T16:22:51Z",
    "updated_at": "2016-09-15T16:22:51Z",
    "author_association": "MEMBER",
    "body": "@sipa do you have any concern that this gives outside peers some control over when your coinsviewcache is flushed?  That seems not ideal to me, at least until we are smarter about flushing it.\n\nI had previously imagined doing this by setting the mempool limit low initially and then increasing it to the desired setting after IBD was finished.  But I'm not sure I succeeded in having the code architected to make that possible.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247377621/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247962089",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-247962089",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 247962089,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0Nzk2MjA4OQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-19T10:47:20Z",
    "updated_at": "2016-09-19T10:47:20Z",
    "author_association": "MEMBER",
    "body": "@morcos I think that's already a concern, but I'm not sure this patch worsens it significantly. External peers can cause an increase in memory usage of the cache or the mempool, but the latter is already harder anyway.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247962089/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/258773492",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-258773492",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 258773492,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1ODc3MzQ5Mg==",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?u=a0e0040aacd7d4f0787481e8ac30b494fa429e11&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-07T08:26:33Z",
    "updated_at": "2016-11-07T08:26:33Z",
    "author_association": "MEMBER",
    "body": "Seeing a roughly 30% decrease in time to reindex to 270'000 with this change.\n\n#### Master -reindex-chainstate\n\n08:04:43 Cache configuration:\n08:04:43 \\* Using 2.0MiB for block index database\n08:04:43 \\* Using 8.0MiB for chain state database\n08:04:43 \\* Using 290.0MiB for in-memory UTXO set\n\n08:04:45 UpdateTip: height=0 cache=0.0MiB(0tx)\n08:08:09 UpdateTip: height=200000 cache=172.9MiB(553629tx)\n08:12:52 UpdateTip: height=230000 cache=274.9MiB(668943tx)\n08:19:08 UpdateTip: height=260488 cache=239.4MiB(318281tx)\n08:19:08 UpdateTip: height=260489 cache=239.4MiB(318525tx)\n08:22:11 UpdateTip: height=270000 cache=31.7MiB(8943tx)\n\n#### 1046s\n\n#### #8610 -reindex-chainstate\n\n07:50:16 Cache configuration:\n07:50:16 \\* Using 2.0MiB for block index database\n07:50:16 \\* Using 8.0MiB for chain state database\n07:50:16 \\* Using 290.0MiB for UTXO set (plus up to 286.1MiB of unused mempool space)\n...\n07:50:18 UpdateTip: height=0 cache=0.0MiB(0tx)\n07:53:33 UpdateTip: height=200000 cache=356.1MiB(1336689tx)\n07:56:58 UpdateTip: height=230000 cache=575.5MiB(1900937tx)\n08:01:02 UpdateTip: height=260488 cache=576.1MiB(1324684tx)\n08:01:11 UpdateTip: height=260489 cache=16.0MiB(0tx)\n08:02:32 UpdateTip: height=270000 cache=486.6MiB(972452tx)\n\n#### 734s\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/258773492/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263024449",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-263024449",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 263024449,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzAyNDQ0OQ==",
    "user": {
      "login": "morcos",
      "id": 4360349,
      "node_id": "MDQ6VXNlcjQzNjAzNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4360349?u=b7dd63827227d69794b5fe28797b1bd107b930dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/morcos",
      "html_url": "https://github.com/morcos",
      "followers_url": "https://api.github.com/users/morcos/followers",
      "following_url": "https://api.github.com/users/morcos/following{/other_user}",
      "gists_url": "https://api.github.com/users/morcos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/morcos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/morcos/subscriptions",
      "organizations_url": "https://api.github.com/users/morcos/orgs",
      "repos_url": "https://api.github.com/users/morcos/repos",
      "events_url": "https://api.github.com/users/morcos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/morcos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-25T21:31:58Z",
    "updated_at": "2016-11-25T23:04:48Z",
    "author_association": "MEMBER",
    "body": "utACK modulo suggestion about calling LimitMempoolSize in FSTD.  \r\nHowever if we decide there are downsides to that suggestion, I'm fine with leaving it out.\r\n\r\nEDIT: maybe 0dedace?  Though I'm not sure it's worth it..\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263024449/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263034977",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-263034977",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 263034977,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzAzNDk3Nw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-26T00:22:14Z",
    "updated_at": "2016-11-26T00:22:14Z",
    "author_association": "MEMBER",
    "body": "@morcos Looks good, I've included it.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263034977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263037071",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-263037071",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 263037071,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzAzNzA3MQ==",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-26T01:15:22Z",
    "updated_at": "2016-11-26T01:50:09Z",
    "author_association": "MEMBER",
    "body": "@morcos Not sure I'm a fan of 0dedace.  I believe this code will work correctly for now, but only because we don't seem to call `FlushStateToDisk` anywhere the mempool might be in an inconsistent state.  I don't think it's safe to call `LimitMempoolSize()` when the mempool is in an inconsistent state, because `CTxMemPool::TrimToSize()` and `CTxMemPool::Expire` rely on `CTxMemPool::CalculateDescendants()` to do the right thing, and that function assumes that `setMemPoolChildren` is correct for all entries.  If `CalculateDescendants()` doesn't catch everything it should, then we could wind up with orphans in the mempool.\r\n\r\nSo in particular, during a reorg, we call `AcceptToMemoryPool()` for all the transactions in a disconnected block.  If someone were to add a `FlushStateToDisk()` call inside ATMP (which I think seems harmless on the face of it), then that would introduce a bug that could cause orphans in the mempool after a reorg.\r\n\r\nSo at the very least, we would need to document that FlushStateToDisk() has a new requirement, that the mempool is in a consistent state when invoked.  But as this condition is difficult to assert for and test, I think my preference would be to not impose this requirement, just to reduce the chance we introduce a bug in the future.\r\n\r\nBut also, note that #9208 should solve the problem of the mempool growing beyond its configured limit during a reorg...",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263037071/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263041688",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-263041688",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 263041688,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzA0MTY4OA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-26T03:27:24Z",
    "updated_at": "2016-11-26T03:27:24Z",
    "author_association": "MEMBER",
    "body": "I removed the commit again.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263041688/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263188917",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-263188917",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 263188917,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzE4ODkxNw==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-28T05:52:37Z",
    "updated_at": "2016-11-28T05:52:37Z",
    "author_association": "MEMBER",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263188917/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263196976",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-263196976",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 263196976,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzE5Njk3Ng==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-28T06:58:21Z",
    "updated_at": "2016-11-28T06:58:21Z",
    "author_association": "MEMBER",
    "body": "Going to address @morcos's issue soon.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263196976/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268709078",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-268709078",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 268709078,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODcwOTA3OA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-22T03:23:04Z",
    "updated_at": "2016-12-22T03:23:04Z",
    "author_association": "MEMBER",
    "body": "Rebased, and rewritten to take https://github.com/bitcoin/bitcoin/pull/8610#discussion_r89663403 into account.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268709078/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268744213",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-268744213",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 268744213,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODc0NDIxMw==",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?u=636a89c913ac407f52bb8d57c4fff384b98f421f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-22T08:17:04Z",
    "updated_at": "2016-12-22T08:17:04Z",
    "author_association": "MEMBER",
    "body": "Concept ACK.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268744213/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268830880",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-268830880",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 268830880,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODgzMDg4MA==",
    "user": {
      "login": "morcos",
      "id": 4360349,
      "node_id": "MDQ6VXNlcjQzNjAzNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4360349?u=b7dd63827227d69794b5fe28797b1bd107b930dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/morcos",
      "html_url": "https://github.com/morcos",
      "followers_url": "https://api.github.com/users/morcos/followers",
      "following_url": "https://api.github.com/users/morcos/following{/other_user}",
      "gists_url": "https://api.github.com/users/morcos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/morcos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/morcos/subscriptions",
      "organizations_url": "https://api.github.com/users/morcos/orgs",
      "repos_url": "https://api.github.com/users/morcos/repos",
      "events_url": "https://api.github.com/users/morcos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/morcos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-22T16:04:45Z",
    "updated_at": "2016-12-22T16:04:45Z",
    "author_association": "MEMBER",
    "body": "Looks good @sipa , thanks\r\n\r\nSeems like an actual lock inversion, I think you fixed it previously by moving the `mempool.DynamicMemoryUsage()` to the top of `FlustStateToDisk`, which makes sense to me.\r\nHowever I don't understand why `CWallet::ReacceptWalletTransactions` is locking mempool.cs anyway, so maybe that should also be removed.\r\n\r\nI guess you lost the advantage of the extra space in VerifyDB, but that seems no big loss to me.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268830880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270261225",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-270261225",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 270261225,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDI2MTIyNQ==",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?u=a0e0040aacd7d4f0787481e8ac30b494fa429e11&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-04T00:05:56Z",
    "updated_at": "2017-01-04T00:05:56Z",
    "author_association": "MEMBER",
    "body": "#8610 on top of master (2a524b8e8fe69ef487fd8ea1b4f7a03f473ed201) with -reindex-chainstate -dbcache=2048:\r\n```\r\n2017-01-03 22:39:59 Cache configuration:\r\n2017-01-03 22:39:59 * Using 2.0MiB for block index database\r\n2017-01-03 22:39:59 * Using 8.0MiB for chain state database\r\n2017-01-03 22:39:59 * Using 2038.0MiB for in-memory UTXO set (plus up to 286.1MiB of unused mempool space)\r\n2017-01-03 22:43:04 height=200000 cache=356.1MiB(1336689tx)\r\n2017-01-03 22:46:20 height=230000 cache=575.5MiB(1900937tx)\r\n2017-01-03 22:51:26 height=270000 cache=915.5MiB(2499199tx)\r\n2017-01-03 22:53:26 height=280000 cache=1050.5MiB(2816546tx)\r\n```\r\n#### 807s (to 280'000)\r\n\r\nMaster (2a524b8e8fe69ef487fd8ea1b4f7a03f473ed201) -reindex-chainstate -dbcache=2048:\r\n```\r\n2017-01-03 23:01:24 Cache configuration:\r\n2017-01-03 23:01:24 * Using 2.0MiB for block index database\r\n2017-01-03 23:01:24 * Using 8.0MiB for chain state database\r\n2017-01-03 23:01:24 * Using 2038.0MiB for in-memory UTXO set\r\n2017-01-03 23:04:29 height=200000 cache=356.1MiB(1336689tx)\r\n2017-01-03 23:07:46 height=230000 cache=575.5MiB(1900937tx)\r\n2017-01-03 23:12:48 height=270000 cache=915.5MiB(2499199tx)\r\n2017-01-03 23:14:45 height=280000 cache=1050.5MiB(2816546tx)\r\n```\r\n#### 801s (to 280'000)\r\n\r\nMaster (2a524b8e8fe69ef487fd8ea1b4f7a03f473ed201) -reindex-chainstate -dbcache=300:\r\n```\r\n2017-01-03 23:24:34 Cache configuration:\r\n2017-01-03 23:24:34 * Using 2.0MiB for block index database\r\n2017-01-03 23:24:34 * Using 8.0MiB for chain state database\r\n2017-01-03 23:24:34 * Using 290.0MiB for in-memory UTXO set\r\n2017-01-03 23:27:55 height=200000 cache=172.9MiB(553629tx)\r\n2017-01-03 23:32:32 height=230000 cache=274.9MiB(668943tx)\r\n2017-01-03 23:36:41 height=250000 cache=128.6MiB(113010tx)\r\n2017-01-03 23:42:36 height=270000 cache=31.7MiB(8943tx)\r\n```\r\n#### 1082s (to 270'000)\r\n\r\n#8610 on top of master (2a524b8e8fe69ef487fd8ea1b4f7a03f473ed201) -reindex-chainstate -dbcache=300\r\n```\r\n2017-01-03 23:47:30 Cache configuration:\r\n2017-01-03 23:47:30 * Using 2.0MiB for block index database\r\n2017-01-03 23:47:30 * Using 8.0MiB for chain state database\r\n2017-01-03 23:47:30 * Using 290.0MiB for in-memory UTXO set (plus up to 286.1MiB of unused mempool space)\r\n2017-01-03 23:50:37 height=200000 cache=356.1MiB(1336689tx)\r\n2017-01-03 23:53:58 height=230000 cache=575.5MiB(1900937tx)\r\n2017-01-03 23:56:50 height=250000 cache=504.4MiB(1124858tx)\r\n2017-01-03 23:59:30 height=270000 cache=486.6MiB(972452tx)\r\n2017-01-04 00:02:10 height=280000 cache=75.2MiB(48075tx)\r\n```\r\n#### 720s (to 270'000)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270261225/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270726683",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-270726683",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 270726683,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDcyNjY4Mw==",
    "user": {
      "login": "morcos",
      "id": 4360349,
      "node_id": "MDQ6VXNlcjQzNjAzNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4360349?u=b7dd63827227d69794b5fe28797b1bd107b930dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/morcos",
      "html_url": "https://github.com/morcos",
      "followers_url": "https://api.github.com/users/morcos/followers",
      "following_url": "https://api.github.com/users/morcos/following{/other_user}",
      "gists_url": "https://api.github.com/users/morcos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/morcos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/morcos/subscriptions",
      "organizations_url": "https://api.github.com/users/morcos/orgs",
      "repos_url": "https://api.github.com/users/morcos/repos",
      "events_url": "https://api.github.com/users/morcos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/morcos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-05T18:57:46Z",
    "updated_at": "2017-01-05T18:57:46Z",
    "author_association": "MEMBER",
    "body": "utACK ba3cecf (for the avoidance of doubt)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270726683/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270726809",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-270726809",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 270726809,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDcyNjgwOQ==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-05T18:58:06Z",
    "updated_at": "2017-01-05T18:58:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "utACK ba3cecf5c436bf38efad045d46e0aa26210d2234",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270726809/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270843147",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#issuecomment-270843147",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8610",
    "id": 270843147,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDg0MzE0Nw==",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?u=6a4a31aaddbc438e053c52d084a698a5f622f1ea&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-06T06:46:46Z",
    "updated_at": "2017-01-06T06:46:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "utACK - will merge and test",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270843147/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/79915084",
    "pull_request_review_id": 1026380,
    "id": 79915084,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc5OTE1MDg0",
    "diff_hunk": "@@ -1277,11 +1277,11 @@ bool AppInit2(boost::thread_group& threadGroup, CScheduler& scheduler)\n     int64_t nCoinDBCache = std::min(nTotalCache / 2, (nTotalCache / 4) + (1 << 23)); // use 25%-50% of the remainder for disk cache\n     nCoinDBCache = std::min(nCoinDBCache, nMaxCoinsDBCache << 20); // cap total coins db cache\n     nTotalCache -= nCoinDBCache;\n-    nCoinCacheUsage = nTotalCache; // the rest goes to in-memory cache\n+    nCoinCachePlusMempoolUsage = nMempoolSizeMax + nTotalCache; // the rest goes to in-memory cache\n     LogPrintf(\"Cache configuration:\\n\");\n     LogPrintf(\"* Using %.1fMiB for block index database\\n\", nBlockTreeDBCache * (1.0 / 1024 / 1024));\n     LogPrintf(\"* Using %.1fMiB for chain state database\\n\", nCoinDBCache * (1.0 / 1024 / 1024));\n-    LogPrintf(\"* Using %.1fMiB for in-memory UTXO set\\n\", nCoinCacheUsage * (1.0 / 1024 / 1024));\n+    LogPrintf(\"* Using %.1fMiB for UTXO set (shared with mempool)\\n\", nCoinCachePlusMempoolUsage * (1.0 / 1024 / 1024));",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 10,
    "commit_id": "ba3cecf5c436bf38efad045d46e0aa26210d2234",
    "original_commit_id": "8b85edee37df75c443dd5bfe33eca44e964482d8",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is confusing to me - maybe \"Using $cache_only_size for UTXO set (+ up to $mempool_size from mempool)\"\n",
    "created_at": "2016-09-21T19:37:00Z",
    "updated_at": "2016-12-22T23:04:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#discussion_r79915084",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8610",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/79915084"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8610#discussion_r79915084"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8610"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/79915084/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1284,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/81481742",
    "pull_request_review_id": 2459089,
    "id": 81481742,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgxNDgxNzQy",
    "diff_hunk": "@@ -1277,11 +1277,11 @@ bool AppInit2(boost::thread_group& threadGroup, CScheduler& scheduler)\n     int64_t nCoinDBCache = std::min(nTotalCache / 2, (nTotalCache / 4) + (1 << 23)); // use 25%-50% of the remainder for disk cache\n     nCoinDBCache = std::min(nCoinDBCache, nMaxCoinsDBCache << 20); // cap total coins db cache\n     nTotalCache -= nCoinDBCache;\n-    nCoinCacheUsage = nTotalCache; // the rest goes to in-memory cache\n+    nCoinCachePlusMempoolUsage = nMempoolSizeMax + nTotalCache; // the rest goes to in-memory cache\n     LogPrintf(\"Cache configuration:\\n\");\n     LogPrintf(\"* Using %.1fMiB for block index database\\n\", nBlockTreeDBCache * (1.0 / 1024 / 1024));\n     LogPrintf(\"* Using %.1fMiB for chain state database\\n\", nCoinDBCache * (1.0 / 1024 / 1024));\n-    LogPrintf(\"* Using %.1fMiB for in-memory UTXO set\\n\", nCoinCacheUsage * (1.0 / 1024 / 1024));\n+    LogPrintf(\"* Using %.1fMiB for UTXO set (shared with mempool)\\n\", nCoinCachePlusMempoolUsage * (1.0 / 1024 / 1024));",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 10,
    "commit_id": "ba3cecf5c436bf38efad045d46e0aa26210d2234",
    "original_commit_id": "8b85edee37df75c443dd5bfe33eca44e964482d8",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.\n",
    "created_at": "2016-10-03T00:23:59Z",
    "updated_at": "2016-12-22T23:04:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#discussion_r81481742",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8610",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/81481742"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8610#discussion_r81481742"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8610"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/81481742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1284,
    "side": "RIGHT",
    "in_reply_to_id": 79915084
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/89658164",
    "pull_request_review_id": 10203229,
    "id": 89658164,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg5NjU4MTY0",
    "diff_hunk": "@@ -2553,6 +2553,7 @@ enum FlushStateMode {\n  * or always and in all cases if we're in prune mode and are deleting files.\n  */\n bool static FlushStateToDisk(CValidationState &state, FlushStateMode mode) {\n+    size_t cacheSize = mempool.DynamicMemoryUsage();",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "ba3cecf5c436bf38efad045d46e0aa26210d2234",
    "original_commit_id": "27562efde135360caae90bc2692aeed7f3fa0ab1",
    "user": {
      "login": "morcos",
      "id": 4360349,
      "node_id": "MDQ6VXNlcjQzNjAzNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4360349?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/morcos",
      "html_url": "https://github.com/morcos",
      "followers_url": "https://api.github.com/users/morcos/followers",
      "following_url": "https://api.github.com/users/morcos/following{/other_user}",
      "gists_url": "https://api.github.com/users/morcos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/morcos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/morcos/subscriptions",
      "organizations_url": "https://api.github.com/users/morcos/orgs",
      "repos_url": "https://api.github.com/users/morcos/repos",
      "events_url": "https://api.github.com/users/morcos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/morcos/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I wonder if it would be better to call `LimitMempoolSize` right before this?   During a reorg the mempool size isn't limited until the end, so theoretically `FlushStateToDisk` could get called and have its effective cache size reduced below the expected minimum.  @sdaftuar Is there any harm in calling an extra `LimitMempoolSize` in the middle of a reorg other than possible inefficiencies of what you're evicting?\r\n\r\nEDIT: Shoot this isn't exactly what I was imagining. I was thinking it would only limit the mempool if it was going to flush anyway, but this suggestion will limit the mempool every time FSTD is called which defeats the whole point of not limiting inside a reorg.",
    "created_at": "2016-11-25T21:30:55Z",
    "updated_at": "2016-12-22T23:04:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#discussion_r89658164",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8610",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/89658164"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8610#discussion_r89658164"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8610"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/89658164/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2556,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/89663403",
    "pull_request_review_id": 10207889,
    "id": 89663403,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg5NjYzNDAz",
    "diff_hunk": "@@ -2583,11 +2584,16 @@ bool static FlushStateToDisk(CValidationState &state, FlushStateMode mode) {\n     if (nLastSetChain == 0) {\n         nLastSetChain = nNow;\n     }\n-    size_t cacheSize = pcoinsTip->DynamicMemoryUsage();\n+    cacheSize += pcoinsTip->DynamicMemoryUsage();\n     // The cache is large and close to the limit, but we have time now (not in the middle of a block processing).\n-    bool fCacheLarge = mode == FLUSH_STATE_PERIODIC && cacheSize * (10.0/9) > nCoinCacheUsage;\n+    bool fCacheLarge = mode == FLUSH_STATE_PERIODIC && cacheSize * (10.0/9) > nCoinCachePlusMempoolUsage;",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 25,
    "commit_id": "ba3cecf5c436bf38efad045d46e0aa26210d2234",
    "original_commit_id": "3ec401e9a597d94576affed405cb0c88b0cd1d50",
    "user": {
      "login": "morcos",
      "id": 4360349,
      "node_id": "MDQ6VXNlcjQzNjAzNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4360349?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/morcos",
      "html_url": "https://github.com/morcos",
      "followers_url": "https://api.github.com/users/morcos/followers",
      "following_url": "https://api.github.com/users/morcos/following{/other_user}",
      "gists_url": "https://api.github.com/users/morcos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/morcos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/morcos/subscriptions",
      "organizations_url": "https://api.github.com/users/morcos/orgs",
      "repos_url": "https://api.github.com/users/morcos/repos",
      "events_url": "https://api.github.com/users/morcos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/morcos/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@sipa sorry, one more issue.  this line would be pretty broken if someone sets a large maxmempool.  i was thinking maybe we should change it to 20.0/19 so it doesn't make the base case behavior a smaller effective cache size, but then realized if someone sets say a 2GB mempool and doesn't make a larger dbcache, then they could be flushing all the time.\r\n\r\nPerhaps this problem and the other one could be avoided by just calculating any extra available space max(0,(maxmempool - usage)) and comparing only the pcoinstip usage to (dbcache limit + any extra available space).  ",
    "created_at": "2016-11-26T01:11:46Z",
    "updated_at": "2016-12-22T23:04:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8610#discussion_r89663403",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8610",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/89663403"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8610#discussion_r89663403"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8610"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/89663403/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2589,
    "side": "RIGHT"
  }
]