lsilva01,2021-11-17 02:08:54,"Concept ACK.\n\nPerhaps the test with valid command can create a file in test or `tmp` dir and checks if this file was created..",https://github.com/bitcoin/bitcoin/pull/23532#issuecomment-971098391,971098391,
DrahtBot,2021-11-17 04:29:31,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22776](https://github.com/bitcoin/bitcoin/pull/22776) (rpc/wallet: add optional transaction(s) to getbalances by kallewo",https://github.com/bitcoin/bitcoin/pull/23532#issuecomment-971172063,971172063,
brunoerg,2021-11-17 11:22:45,"I've tried different valid commands with -startupnotify like: `echo` (common command for Unix system and Windows), tried a simple `ls` for Unix and `dir` for Windows and other ones, but the CI is failing for all of them. Any thoughts about it, @MarcoFalke?",https://github.com/bitcoin/bitcoin/pull/23532#issuecomment-971482512,971482512,
MarcoFalke,2021-11-17 11:29:26,"You can find the error in the log:\n\n```\n node0 stderr Error: The experimental syscall sandbox feature (-sandbox=<mode>) is incompatible with -startupnotify (which uses execve). ",https://github.com/bitcoin/bitcoin/pull/23532#issuecomment-971487390,971487390,
brunoerg,2021-11-17 11:53:11,"> You can find the error in the log:\n> \n> ```\n>  node0 stderr Error: The experimental syscall sandbox feature (-sandbox=<mode>) is incompatible with -startupnotify (which uses execve). \n> ```\n\nSorry, I read that but didn't notice this part of the log. Thanks.",https://github.com/bitcoin/bitcoin/pull/23532#issuecomment-971507892,971507892,
theStack,2021-11-17 13:28:53,Concept ACK,https://github.com/bitcoin/bitcoin/pull/23532#issuecomment-971583716,971583716,
brunoerg,2021-11-17 17:31:58,Force-pushed with a update on `expected_stderr` in `stop_node`. I just edited the description.,https://github.com/bitcoin/bitcoin/pull/23532#issuecomment-971801333,971801333,
brunoerg,2021-11-18 18:35:56,"Win64 has failed:\n<img width=""1060"" alt=""Screen Shot 2021-11-18 at 10 23 47"" src=""https://user-images.githubusercontent.com/19480819/142430123-5ed41a77-3173-4442-85ae-6f37654921b6.png"">\n\nI think the problem may be the breaklines. Going to work to fix it.\n",https://github.com/bitcoin/bitcoin/pull/23532#issuecomment-973148078,973148078,
brunoerg,2021-11-19 10:51:08,Force-pushed adding `os.linesep` into expected windows message.,https://github.com/bitcoin/bitcoin/pull/23532#issuecomment-973968108,973968108,
stratospher,2021-11-20 18:22:58,"In e9ebe3b, shouldn't it be this?\n\n```suggestion\n        f""'{INVALID_COMMAND}' is not recognized as an internal or external command,{os.linesep}operable program or batch file.""]\n```",https://github.com/bitcoin/bitcoin/pull/23532#discussion_r753700427,753700427,test/functional/feature_startupnotify.py
MarcoFalke,2021-11-21 07:31:46,Do we need tests for to check the operating systems exact response to an invalid command? This doesn't increase the test coverage of Bitcoin Core itself and it seems a bit painful to maintain.,https://github.com/bitcoin/bitcoin/pull/23532#discussion_r753759588,753759588,test/functional/feature_startupnotify.py
brunoerg,2021-11-21 11:17:03,"I agree it seems a bit painful to maintain, but if we don't pass an expected error message the test will fail. I think the stop_node could have a boolean flag when expecting error without specifing the message it would be helpful. What do you think?",https://github.com/bitcoin/bitcoin/pull/23532#discussion_r753784354,753784354,test/functional/feature_startupnotify.py
brunoerg,2021-11-21 11:38:21,"Not sure if the right is:  \n`f""'{INVALID_COMMAND}' is not recognized as an internal or external command,{os.linesep}operable program or batch file.""]` or `f""Unexpected stderr '{INVALID_COMMAND}' is not recognized as an internal or external command,{os.linesep}operable program or batch file.""`\n\nGoing to test it, thanks!",https://github.com/bitcoin/bitcoin/pull/23532#discussion_r753786664,753786664,test/functional/feature_startupnotify.py
brunoerg,2021-11-22 11:06:38,Both of them didn't work.,https://github.com/bitcoin/bitcoin/pull/23532#discussion_r754166197,754166197,test/functional/feature_startupnotify.py
stratospher,2021-11-24 12:49:09,"It should be the first option because ""AssertionError: Unexpected stderr"" comes from [L351](https://github.com/bitcoin/bitcoin/blob/7f462b1a95a48762186783fadf01ae8f3c6df56f/test/functional/test_framework/test_node.py#L351). There shouldn't be a space before `{os.linesep}` in  [L31](https://github.com/bitcoin/bitcoin/blob/7f462b1a95a48762186783fadf01ae8f3c6df56f/test/functional/feature_startupnotif",https://github.com/bitcoin/bitcoin/pull/23532#discussion_r756031610,756031610,test/functional/feature_startupnotify.py
brunoerg,2021-11-24 13:01:50,"My bad, I hadn't notice this one on L351. Going to test again, thanks! ",https://github.com/bitcoin/bitcoin/pull/23532#discussion_r756045429,756045429,test/functional/feature_startupnotify.py
luke-jr,2021-11-30 19:57:43,This seems shell-specific and not reliable for a test,https://github.com/bitcoin/bitcoin/pull/23532#discussion_r759614946,759614946,test/functional/feature_startupnotify.py
