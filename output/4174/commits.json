[
  {
    "sha": "5248ff40997c64cc0fde7aaa67cf94dd38b14899",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1MjQ4ZmY0MDk5N2M2NGNjMGZkZTdhYWE2N2NmOTRkZDM4YjE0ODk5",
    "commit": {
      "author": {
        "name": "Stuart Cardall",
        "email": "developer@it-offshore.co.uk",
        "date": "2014-05-13T10:15:00Z"
      },
      "committer": {
        "name": "Stuart Cardall",
        "email": "developer@it-offshore.co.uk",
        "date": "2014-05-13T10:15:00Z"
      },
      "message": "SetupEnvironment() - clean commit",
      "tree": {
        "sha": "d40c2b2e3ab9d2406e8ddaa312ef6295af950485",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d40c2b2e3ab9d2406e8ddaa312ef6295af950485"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5248ff40997c64cc0fde7aaa67cf94dd38b14899",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5248ff40997c64cc0fde7aaa67cf94dd38b14899",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5248ff40997c64cc0fde7aaa67cf94dd38b14899",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5248ff40997c64cc0fde7aaa67cf94dd38b14899/comments",
    "author": {
      "login": "itoffshore",
      "id": 1141947,
      "node_id": "MDQ6VXNlcjExNDE5NDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1141947?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/itoffshore",
      "html_url": "https://github.com/itoffshore",
      "followers_url": "https://api.github.com/users/itoffshore/followers",
      "following_url": "https://api.github.com/users/itoffshore/following{/other_user}",
      "gists_url": "https://api.github.com/users/itoffshore/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/itoffshore/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/itoffshore/subscriptions",
      "organizations_url": "https://api.github.com/users/itoffshore/orgs",
      "repos_url": "https://api.github.com/users/itoffshore/repos",
      "events_url": "https://api.github.com/users/itoffshore/events{/privacy}",
      "received_events_url": "https://api.github.com/users/itoffshore/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "itoffshore",
      "id": 1141947,
      "node_id": "MDQ6VXNlcjExNDE5NDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1141947?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/itoffshore",
      "html_url": "https://github.com/itoffshore",
      "followers_url": "https://api.github.com/users/itoffshore/followers",
      "following_url": "https://api.github.com/users/itoffshore/following{/other_user}",
      "gists_url": "https://api.github.com/users/itoffshore/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/itoffshore/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/itoffshore/subscriptions",
      "organizations_url": "https://api.github.com/users/itoffshore/orgs",
      "repos_url": "https://api.github.com/users/itoffshore/repos",
      "events_url": "https://api.github.com/users/itoffshore/events{/privacy}",
      "received_events_url": "https://api.github.com/users/itoffshore/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "bfae70aae686e4631090bd0064fa6ac6eeed17d2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bfae70aae686e4631090bd0064fa6ac6eeed17d2",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/bfae70aae686e4631090bd0064fa6ac6eeed17d2"
      }
    ],
    "stats": {
      "total": 23,
      "additions": 23,
      "deletions": 0
    },
    "files": [
      {
        "sha": "ce9e7a4027fd3cc0a8840328b1325638c8a5e4d8",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5248ff40997c64cc0fde7aaa67cf94dd38b14899/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5248ff40997c64cc0fde7aaa67cf94dd38b14899/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=5248ff40997c64cc0fde7aaa67cf94dd38b14899",
        "patch": "@@ -58,6 +58,8 @@ static bool AppInitRPC(int argc, char* argv[])\n \n int main(int argc, char* argv[])\n {\n+    SetupEnvironment();\n+\n     try\n     {\n         if(!AppInitRPC(argc, argv))"
      },
      {
        "sha": "78c8b2ba0ec170870cf107ae52e70ca8de59b0d7",
        "filename": "src/bitcoind.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5248ff40997c64cc0fde7aaa67cf94dd38b14899/src/bitcoind.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5248ff40997c64cc0fde7aaa67cf94dd38b14899/src/bitcoind.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoind.cpp?ref=5248ff40997c64cc0fde7aaa67cf94dd38b14899",
        "patch": "@@ -172,6 +172,8 @@ bool AppInit(int argc, char* argv[])\n \n int main(int argc, char* argv[])\n {\n+    SetupEnvironment();\n+\n     bool fRet = false;\n \n     // Connect bitcoind signal handlers"
      },
      {
        "sha": "45d7a52889a7dba0f0bf2e06cc544452bcae6429",
        "filename": "src/qt/bitcoin.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5248ff40997c64cc0fde7aaa67cf94dd38b14899/src/qt/bitcoin.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5248ff40997c64cc0fde7aaa67cf94dd38b14899/src/qt/bitcoin.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoin.cpp?ref=5248ff40997c64cc0fde7aaa67cf94dd38b14899",
        "patch": "@@ -459,6 +459,8 @@ WId BitcoinApplication::getMainWinId() const\n #ifndef BITCOIN_QT_TEST\n int main(int argc, char *argv[])\n {\n+    SetupEnvironment();\n+\n     /// 1. Parse command-line options. These take precedence over anything else.\n     // Command-line options take precedence:\n     ParseParameters(argc, argv);"
      },
      {
        "sha": "2e8500eeae2d37f8cb6a73612c687c2aa9b6374d",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 16,
        "deletions": 0,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5248ff40997c64cc0fde7aaa67cf94dd38b14899/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5248ff40997c64cc0fde7aaa67cf94dd38b14899/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=5248ff40997c64cc0fde7aaa67cf94dd38b14899",
        "patch": "@@ -1404,3 +1404,19 @@ bool ParseInt32(const std::string& str, int32_t *out)\n         n <= std::numeric_limits<int32_t>::max();\n }\n \n+void SetupEnvironment()\n+{\n+    #ifndef WIN32\n+    try\n+    {\n+\t#if BOOST_FILESYSTEM_VERSION == 3\n+            boost::filesystem::path::codecvt(); // Raises runtime error if current locale is invalid\n+\t#else\t\t\t\t          // boost filesystem v2\n+            std::locale();                      // Raises runtime error if current locale is invalid\n+\t#endif\n+    } catch(std::runtime_error &e)\n+    {\n+        setenv(\"LC_ALL\", \"C\", 1); // Force C locale\n+    }\n+    #endif\n+}"
      },
      {
        "sha": "b252295e76695d13fc979a7cb0e574fbf15479ee",
        "filename": "src/util.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5248ff40997c64cc0fde7aaa67cf94dd38b14899/src/util.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5248ff40997c64cc0fde7aaa67cf94dd38b14899/src/util.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.h?ref=5248ff40997c64cc0fde7aaa67cf94dd38b14899",
        "patch": "@@ -106,6 +106,7 @@ extern volatile bool fReopenDebugLog;\n \n void RandAddSeed();\n void RandAddSeedPerfmon();\n+void SetupEnvironment();\n \n /* Return true if log accepts specified category */\n bool LogAcceptCategory(const char* category);"
      }
    ]
  }
]