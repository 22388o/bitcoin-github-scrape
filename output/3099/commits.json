[
  {
    "sha": "74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3NGZiNzY1ZTI5ZWQyYjg1ZWU3ZjZlNjFkMTY4NzZjMDNiNGFiZTli",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-16T13:14:26Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-23T07:15:24Z"
      },
      "message": "qt: rework \"receive coins\" workflow",
      "tree": {
        "sha": "85f5c13d4a147c8deec135aa5eb576fb90c2fc1b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/85f5c13d4a147c8deec135aa5eb576fb90c2fc1b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "58daa0162cb97209d87f3034a9351688a4631eac",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/58daa0162cb97209d87f3034a9351688a4631eac",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/58daa0162cb97209d87f3034a9351688a4631eac"
      }
    ],
    "stats": {
      "total": 768,
      "additions": 533,
      "deletions": 235
    },
    "files": [
      {
        "sha": "7087709741b5a40411d6777e9a752884bae3a53f",
        "filename": "contrib/bitcoin-qt.pro",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/contrib/bitcoin-qt.pro",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/contrib/bitcoin-qt.pro",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/bitcoin-qt.pro?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -11,7 +11,9 @@ FORMS += \\\n     ../src/qt/forms/editaddressdialog.ui \\\n     ../src/qt/forms/askpassphrasedialog.ui \\\n     ../src/qt/forms/addressbookpage.ui \\\n-    ../src/qt/forms/aboutdialog.ui\n+    ../src/qt/forms/aboutdialog.ui \\\n+    ../src/qt/forms/receivecoinsdialog.ui \\\n+    ../src/qt/forms/receiverequestdialog.ui\n \n RESOURCES += \\\n     ../src/qt/bitcoin.qrc"
      },
      {
        "sha": "4ecd5629eab0c4b452add56780aa5c034ae2c0dd",
        "filename": "src/qt/Makefile.am",
        "status": "modified",
        "additions": 8,
        "deletions": 8,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/Makefile.am?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -34,7 +34,8 @@ QT_TS = locale/bitcoin_ach.ts locale/bitcoin_af_ZA.ts locale/bitcoin_ar.ts \\\n \n QT_FORMS_UI = forms/aboutdialog.ui forms/addressbookpage.ui \\\n   forms/askpassphrasedialog.ui forms/editaddressdialog.ui forms/intro.ui \\\n-  forms/optionsdialog.ui forms/overviewpage.ui forms/qrcodedialog.ui \\\n+  forms/optionsdialog.ui forms/overviewpage.ui forms/receiverequestdialog.ui \\\n+  forms/receivecoinsdialog.ui \\\n   forms/rpcconsole.ui forms/sendcoinsdialog.ui forms/sendcoinsentry.ui \\\n   forms/signverifymessagedialog.ui forms/transactiondescdialog.ui\n \n@@ -46,15 +47,15 @@ QT_MOC_CPP = moc_aboutdialog.cpp moc_addressbookpage.cpp \\\n   moc_intro.cpp moc_macdockiconhandler.cpp moc_macnotificationhandler.cpp \\\n   moc_monitoreddatamapper.cpp moc_notificator.cpp moc_optionsdialog.cpp \\\n   moc_optionsmodel.cpp moc_overviewpage.cpp moc_paymentserver.cpp \\\n-  moc_qrcodedialog.cpp moc_qvalidatedlineedit.cpp moc_qvaluecombobox.cpp \\\n+  moc_receiverequestdialog.cpp moc_qvalidatedlineedit.cpp moc_qvaluecombobox.cpp \\\n+  moc_receivecoinsdialog.cpp \\\n   moc_rpcconsole.cpp moc_sendcoinsdialog.cpp moc_sendcoinsentry.cpp \\\n   moc_signverifymessagedialog.cpp moc_splashscreen.cpp moc_trafficgraphwidget.cpp moc_transactiondesc.cpp \\\n   moc_transactiondescdialog.cpp moc_transactionfilterproxy.cpp \\\n   moc_transactiontablemodel.cpp moc_transactionview.cpp moc_walletframe.cpp \\\n   moc_walletmodel.cpp moc_walletview.cpp\n \n BITCOIN_MM = macdockiconhandler.mm macnotificationhandler.mm\n-QR_CPP = qrcodedialog.cpp\n \n QT_MOC = intro.moc overviewpage.moc rpcconsole.moc\n \n@@ -71,7 +72,8 @@ BITCOIN_QT_H  = aboutdialog.h addressbookpage.h addresstablemodel.h \\\n   editaddressdialog.h guiconstants.h guiutil.h intro.h macdockiconhandler.h \\\n   macnotificationhandler.h monitoreddatamapper.h notificator.h optionsdialog.h \\\n   optionsmodel.h overviewpage.h paymentrequestplus.h paymentserver.h \\\n-  qrcodedialog.h qvalidatedlineedit.h qvaluecombobox.h rpcconsole.h \\\n+  receivecoinsdialog.h \\\n+  receiverequestdialog.h qvalidatedlineedit.h qvaluecombobox.h rpcconsole.h \\\n   sendcoinsdialog.h sendcoinsentry.h signverifymessagedialog.h splashscreen.h \\\n   trafficgraphwidget.h transactiondescdialog.h transactiondesc.h transactionfilterproxy.h \\\n   transactionrecord.h transactiontablemodel.h transactionview.h walletframe.h \\\n@@ -101,6 +103,7 @@ BITCOIN_QT_CPP = aboutdialog.cpp addressbookpage.cpp \\\n   guiutil.cpp intro.cpp monitoreddatamapper.cpp notificator.cpp \\\n   optionsdialog.cpp optionsmodel.cpp overviewpage.cpp paymentrequestplus.cpp \\\n   paymentserver.cpp qvalidatedlineedit.cpp qvaluecombobox.cpp \\\n+  receivecoinsdialog.cpp receiverequestdialog.cpp \\\n   rpcconsole.cpp sendcoinsdialog.cpp sendcoinsentry.cpp \\\n   signverifymessagedialog.cpp splashscreen.cpp trafficgraphwidget.cpp transactiondesc.cpp \\\n   transactiondescdialog.cpp transactionfilterproxy.cpp transactionrecord.cpp \\\n@@ -135,9 +138,6 @@ endif\n if TARGET_WINDOWS\n   libbitcoinqt_a_SOURCES += $(BITCOIN_RC)\n endif\n-if USE_QRCODE\n-  libbitcoinqt_a_SOURCES += $(QR_CPP)\n-endif\n #\n \n # bitcoin-qt binary #\n@@ -159,7 +159,7 @@ QT_QM=$(QT_TS:.ts=.qm)\n bitcoinstrings.cpp: FORCE\n \t$(MAKE) -C $(top_srcdir)/src qt/bitcoinstrings.cpp\n \n-translate: bitcoinstrings.cpp $(QT_FORMS_UI) $(QT_FORMS_UI) $(BITCOIN_QT_CPP) $(BITCOIN_QT_H) $(BITCOIN_MM) $(QR_CPP)\n+translate: bitcoinstrings.cpp $(QT_FORMS_UI) $(QT_FORMS_UI) $(BITCOIN_QT_CPP) $(BITCOIN_QT_H) $(BITCOIN_MM)\n \t@test -n $(LUPDATE) || echo \"lupdate is required for updating translations\"\n \t@$(LUPDATE) $^ -locations relative -no-obsolete -ts locale/bitcoin_en.ts\n "
      },
      {
        "sha": "c9718c37bc96ca69f09b60fa225feb1075e3349b",
        "filename": "src/qt/addressbookpage.cpp",
        "status": "modified",
        "additions": 12,
        "deletions": 40,
        "changes": 52,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/addressbookpage.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/addressbookpage.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/addressbookpage.cpp?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -12,10 +12,6 @@\n #include \"csvmodelwriter.h\"\n #include \"guiutil.h\"\n \n-#ifdef USE_QRCODE\n-#include \"qrcodedialog.h\"\n-#endif\n-\n #include <QSortFilterProxyModel>\n #include <QClipboard>\n #include <QMessageBox>\n@@ -40,20 +36,25 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n     ui->exportButton->setIcon(QIcon());\n #endif\n \n-#ifndef USE_QRCODE\n-    ui->showQRCode->setVisible(false);\n-#endif\n-\n     switch(mode)\n     {\n-    case ForSending:\n+    case ForSelection:\n+        switch(tab)\n+        {\n+        case SendingTab: setWindowTitle(tr(\"Choose the address to send coins to\")); break;\n+        case ReceivingTab: setWindowTitle(tr(\"Choose the address to receive coins with\")); break;\n+        }\n         connect(ui->tableView, SIGNAL(doubleClicked(QModelIndex)), this, SLOT(accept()));\n         ui->tableView->setEditTriggers(QAbstractItemView::NoEditTriggers);\n         ui->tableView->setFocus();\n         ui->exportButton->hide();\n         break;\n     case ForEditing:\n-        ui->buttonBox->setVisible(false);\n+        switch(tab)\n+        {\n+        case SendingTab: setWindowTitle(tr(\"Sending addresses\")); break;\n+        case ReceivingTab: setWindowTitle(tr(\"Receiving addresses\")); break;\n+        }\n         break;\n     }\n     switch(tab)\n@@ -64,7 +65,7 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n         ui->signMessage->setVisible(false);\n         break;\n     case ReceivingTab:\n-        ui->labelExplanation->setText(tr(\"These are your Bitcoin addresses for receiving payments. You may want to give a different one to each sender so you can keep track of who is paying you.\"));\n+        ui->labelExplanation->setText(tr(\"These are your Bitcoin addresses for receiving payments. It is recommended to use a new receiving address for each transaction.\"));\n         ui->deleteAddress->setVisible(false);\n         ui->signMessage->setVisible(true);\n         break;\n@@ -75,7 +76,6 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n     QAction *copyLabelAction = new QAction(tr(\"Copy &Label\"), this);\n     QAction *editAction = new QAction(tr(\"&Edit\"), this);\n     QAction *sendCoinsAction = new QAction(tr(\"Send &Coins\"), this);\n-    QAction *showQRCodeAction = new QAction(ui->showQRCode->text(), this);\n     QAction *signMessageAction = new QAction(ui->signMessage->text(), this);\n     QAction *verifyMessageAction = new QAction(ui->verifyMessage->text(), this);\n     deleteAction = new QAction(ui->deleteAddress->text(), this);\n@@ -90,9 +90,6 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n     contextMenu->addSeparator();\n     if(tab == SendingTab)\n         contextMenu->addAction(sendCoinsAction);\n-#ifdef USE_QRCODE\n-    contextMenu->addAction(showQRCodeAction);\n-#endif\n     if(tab == ReceivingTab)\n         contextMenu->addAction(signMessageAction);\n     else if(tab == SendingTab)\n@@ -104,7 +101,6 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n     connect(editAction, SIGNAL(triggered()), this, SLOT(onEditAction()));\n     connect(deleteAction, SIGNAL(triggered()), this, SLOT(on_deleteAddress_clicked()));\n     connect(sendCoinsAction, SIGNAL(triggered()), this, SLOT(onSendCoinsAction()));\n-    connect(showQRCodeAction, SIGNAL(triggered()), this, SLOT(on_showQRCode_clicked()));\n     connect(signMessageAction, SIGNAL(triggered()), this, SLOT(on_signMessage_clicked()));\n     connect(verifyMessageAction, SIGNAL(triggered()), this, SLOT(on_verifyMessage_clicked()));\n \n@@ -295,12 +291,10 @@ void AddressBookPage::selectionChanged()\n             break;\n         }\n         ui->copyAddress->setEnabled(true);\n-        ui->showQRCode->setEnabled(true);\n     }\n     else\n     {\n         ui->deleteAddress->setEnabled(false);\n-        ui->showQRCode->setEnabled(false);\n         ui->copyAddress->setEnabled(false);\n         ui->signMessage->setEnabled(false);\n         ui->verifyMessage->setEnabled(false);\n@@ -312,9 +306,6 @@ void AddressBookPage::done(int retval)\n     QTableView *table = ui->tableView;\n     if(!table->selectionModel() || !table->model())\n         return;\n-    // When this is a tab/widget and not a model dialog, ignore \"done\"\n-    if(mode == ForEditing)\n-        return;\n \n     // Figure out which address was selected, and return it\n     QModelIndexList indexes = table->selectionModel()->selectedRows(AddressTableModel::Address);\n@@ -358,25 +349,6 @@ void AddressBookPage::on_exportButton_clicked()\n     }\n }\n \n-void AddressBookPage::on_showQRCode_clicked()\n-{\n-#ifdef USE_QRCODE\n-    QTableView *table = ui->tableView;\n-    QModelIndexList indexes = table->selectionModel()->selectedRows(AddressTableModel::Address);\n-\n-    foreach (QModelIndex index, indexes)\n-    {\n-        QString address = index.data().toString();\n-        QString label = index.sibling(index.row(), 0).data(Qt::EditRole).toString();\n-\n-        QRCodeDialog *dialog = new QRCodeDialog(address, label, tab == ReceivingTab, this);\n-        dialog->setModel(optionsModel);\n-        dialog->setAttribute(Qt::WA_DeleteOnClose);\n-        dialog->show();\n-    }\n-#endif\n-}\n-\n void AddressBookPage::contextualMenu(const QPoint &point)\n {\n     QModelIndex index = ui->tableView->indexAt(point);"
      },
      {
        "sha": "70ff3984be5cfbbee2ffe48b5f0cfbc0d2f11726",
        "filename": "src/qt/addressbookpage.h",
        "status": "modified",
        "additions": 1,
        "deletions": 3,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/addressbookpage.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/addressbookpage.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/addressbookpage.h?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -30,7 +30,7 @@ class AddressBookPage : public QDialog\n     };\n \n     enum Mode {\n-        ForSending, /**< Open address book to pick address for sending */\n+        ForSelection, /**< Open address book to pick address */\n         ForEditing  /**< Open address book for editing */\n     };\n \n@@ -69,8 +69,6 @@ private slots:\n     void on_verifyMessage_clicked();\n     /** Open send coins dialog for currently selected address (no button) */\n     void onSendCoinsAction();\n-    /** Generate a QR Code from the currently selected address */\n-    void on_showQRCode_clicked();\n     /** Copy label of currently selected address entry to clipboard (no button) */\n     void onCopyLabelAction();\n     /** Edit currently selected address entry (no button) */"
      },
      {
        "sha": "5bcbf3cfdfcba93348b5a98c14e801b495dd13dc",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 16,
        "changes": 26,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -207,13 +207,6 @@ void BitcoinGUI::createActions(bool fIsTestnet)\n     historyAction->setShortcut(QKeySequence(Qt::ALT + Qt::Key_4));\n     tabGroup->addAction(historyAction);\n \n-    addressBookAction = new QAction(QIcon(\":/icons/address-book\"), tr(\"&Addresses\"), this);\n-    addressBookAction->setStatusTip(tr(\"Edit the list of stored addresses and labels\"));\n-    addressBookAction->setToolTip(addressBookAction->statusTip());\n-    addressBookAction->setCheckable(true);\n-    addressBookAction->setShortcut(QKeySequence(Qt::ALT + Qt::Key_5));\n-    tabGroup->addAction(addressBookAction);\n-\n     connect(overviewAction, SIGNAL(triggered()), this, SLOT(showNormalIfMinimized()));\n     connect(overviewAction, SIGNAL(triggered()), this, SLOT(gotoOverviewPage()));\n     connect(sendCoinsAction, SIGNAL(triggered()), this, SLOT(showNormalIfMinimized()));\n@@ -222,8 +215,6 @@ void BitcoinGUI::createActions(bool fIsTestnet)\n     connect(receiveCoinsAction, SIGNAL(triggered()), this, SLOT(gotoReceiveCoinsPage()));\n     connect(historyAction, SIGNAL(triggered()), this, SLOT(showNormalIfMinimized()));\n     connect(historyAction, SIGNAL(triggered()), this, SLOT(gotoHistoryPage()));\n-    connect(addressBookAction, SIGNAL(triggered()), this, SLOT(showNormalIfMinimized()));\n-    connect(addressBookAction, SIGNAL(triggered()), this, SLOT(gotoAddressBookPage()));\n \n     quitAction = new QAction(QIcon(\":/icons/quit\"), tr(\"E&xit\"), this);\n     quitAction->setStatusTip(tr(\"Quit application\"));\n@@ -266,6 +257,11 @@ void BitcoinGUI::createActions(bool fIsTestnet)\n     openRPCConsoleAction = new QAction(QIcon(\":/icons/debugwindow\"), tr(\"&Debug window\"), this);\n     openRPCConsoleAction->setStatusTip(tr(\"Open debugging and diagnostic console\"));\n \n+    usedSendingAddressesAction = new QAction(QIcon(\":/icons/address-book\"), tr(\"&Used sending addresses...\"), this);\n+    usedSendingAddressesAction->setStatusTip(tr(\"Edit the list of used sending addresses and labels\"));\n+    usedReceivingAddressesAction = new QAction(QIcon(\":/icons/address-book\"), tr(\"Used &receiving addresses...\"), this);\n+    usedReceivingAddressesAction->setStatusTip(tr(\"Edit the list of used receiving addresses and labels\"));\n+\n     connect(quitAction, SIGNAL(triggered()), qApp, SLOT(quit()));\n     connect(aboutAction, SIGNAL(triggered()), this, SLOT(aboutClicked()));\n     connect(aboutQtAction, SIGNAL(triggered()), qApp, SLOT(aboutQt()));\n@@ -276,6 +272,8 @@ void BitcoinGUI::createActions(bool fIsTestnet)\n     connect(changePassphraseAction, SIGNAL(triggered()), walletFrame, SLOT(changePassphrase()));\n     connect(signMessageAction, SIGNAL(triggered()), this, SLOT(gotoSignMessageTab()));\n     connect(verifyMessageAction, SIGNAL(triggered()), this, SLOT(gotoVerifyMessageTab()));\n+    connect(usedSendingAddressesAction, SIGNAL(triggered()), walletFrame, SLOT(usedSendingAddresses()));\n+    connect(usedReceivingAddressesAction, SIGNAL(triggered()), walletFrame, SLOT(usedReceivingAddresses()));\n }\n \n void BitcoinGUI::createMenuBar()\n@@ -294,6 +292,9 @@ void BitcoinGUI::createMenuBar()\n     file->addAction(signMessageAction);\n     file->addAction(verifyMessageAction);\n     file->addSeparator();\n+    file->addAction(usedSendingAddressesAction);\n+    file->addAction(usedReceivingAddressesAction);\n+    file->addSeparator();\n     file->addAction(quitAction);\n \n     QMenu *settings = appMenuBar->addMenu(tr(\"&Settings\"));\n@@ -317,7 +318,6 @@ void BitcoinGUI::createToolBars()\n     toolbar->addAction(sendCoinsAction);\n     toolbar->addAction(receiveCoinsAction);\n     toolbar->addAction(historyAction);\n-    toolbar->addAction(addressBookAction);\n }\n \n void BitcoinGUI::setClientModel(ClientModel *clientModel)\n@@ -457,12 +457,6 @@ void BitcoinGUI::gotoHistoryPage()\n     if (walletFrame) walletFrame->gotoHistoryPage();\n }\n \n-void BitcoinGUI::gotoAddressBookPage()\n-{\n-    addressBookAction->setChecked(true);\n-    if (walletFrame) walletFrame->gotoAddressBookPage();\n-}\n-\n void BitcoinGUI::gotoReceiveCoinsPage()\n {\n     receiveCoinsAction->setChecked(true);"
      },
      {
        "sha": "5710b827ad55d1b18795c62626d3fad80640015f",
        "filename": "src/qt/bitcoingui.h",
        "status": "modified",
        "additions": 2,
        "deletions": 4,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/bitcoingui.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/bitcoingui.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.h?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -13,7 +13,6 @@ class WalletModel;\n class WalletStack;\n class TransactionView;\n class OverviewPage;\n-class AddressBookPage;\n class SendCoinsDialog;\n class SendCoinsRecipient;\n class SignVerifyMessageDialog;\n@@ -83,7 +82,8 @@ class BitcoinGUI : public QMainWindow\n     QAction *historyAction;\n     QAction *quitAction;\n     QAction *sendCoinsAction;\n-    QAction *addressBookAction;\n+    QAction *usedSendingAddressesAction;\n+    QAction *usedReceivingAddressesAction;\n     QAction *signMessageAction;\n     QAction *verifyMessageAction;\n     QAction *aboutAction;\n@@ -156,8 +156,6 @@ private slots:\n     void gotoOverviewPage();\n     /** Switch to history (transactions) page */\n     void gotoHistoryPage();\n-    /** Switch to address book page */\n-    void gotoAddressBookPage();\n     /** Switch to receive coins page */\n     void gotoReceiveCoinsPage();\n     /** Switch to send coins page */"
      },
      {
        "sha": "836d61024b534b0ee153476ba52212ea18e02763",
        "filename": "src/qt/forms/addressbookpage.ui",
        "status": "modified",
        "additions": 1,
        "deletions": 12,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/forms/addressbookpage.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/forms/addressbookpage.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/addressbookpage.ui?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -11,7 +11,7 @@\n    </rect>\n   </property>\n   <property name=\"windowTitle\">\n-   <string>Address Book</string>\n+   <string></string>\n   </property>\n   <layout class=\"QVBoxLayout\" name=\"verticalLayout\">\n    <item>\n@@ -82,17 +82,6 @@\n        </property>\n       </widget>\n      </item>\n-     <item>\n-      <widget class=\"QPushButton\" name=\"showQRCode\">\n-       <property name=\"text\">\n-        <string>Show &amp;QR Code</string>\n-       </property>\n-       <property name=\"icon\">\n-        <iconset resource=\"../bitcoin.qrc\">\n-         <normaloff>:/icons/qrcode</normaloff>:/icons/qrcode</iconset>\n-       </property>\n-      </widget>\n-     </item>\n      <item>\n       <widget class=\"QPushButton\" name=\"signMessage\">\n        <property name=\"toolTip\">"
      },
      {
        "sha": "a5946883bdfff2b7bfe0619c4fa118742ea01b87",
        "filename": "src/qt/forms/receivecoinsdialog.ui",
        "status": "added",
        "additions": 164,
        "deletions": 0,
        "changes": 164,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/forms/receivecoinsdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/forms/receivecoinsdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/receivecoinsdialog.ui?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -0,0 +1,164 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<ui version=\"4.0\">\n+ <class>ReceiveCoinsDialog</class>\n+ <widget class=\"QWidget\" name=\"ReceiveCoinsDialog\">\n+  <property name=\"geometry\">\n+   <rect>\n+    <x>0</x>\n+    <y>0</y>\n+    <width>776</width>\n+    <height>343</height>\n+   </rect>\n+  </property>\n+  <property name=\"windowTitle\">\n+   <string>Form</string>\n+  </property>\n+  <layout class=\"QVBoxLayout\" name=\"verticalLayout\">\n+   <item>\n+    <layout class=\"QFormLayout\" name=\"formLayout\">\n+     <property name=\"fieldGrowthPolicy\">\n+      <enum>QFormLayout::AllNonFixedFieldsGrow</enum>\n+     </property>\n+     <item row=\"3\" column=\"0\">\n+      <widget class=\"QLabel\" name=\"label\">\n+       <property name=\"text\">\n+        <string>&amp;Amount:</string>\n+       </property>\n+       <property name=\"buddy\">\n+        <cstring>reqAmount</cstring>\n+       </property>\n+      </widget>\n+     </item>\n+     <item row=\"3\" column=\"1\">\n+      <widget class=\"BitcoinAmountField\" name=\"reqAmount\" native=\"true\">\n+       <property name=\"minimumSize\">\n+        <size>\n+         <width>80</width>\n+         <height>0</height>\n+        </size>\n+       </property>\n+      </widget>\n+     </item>\n+     <item row=\"4\" column=\"0\">\n+      <widget class=\"QLabel\" name=\"label_2\">\n+       <property name=\"text\">\n+        <string>&amp;Label:</string>\n+       </property>\n+       <property name=\"buddy\">\n+        <cstring>reqLabel</cstring>\n+       </property>\n+      </widget>\n+     </item>\n+     <item row=\"4\" column=\"1\">\n+      <widget class=\"QLineEdit\" name=\"reqLabel\"/>\n+     </item>\n+     <item row=\"5\" column=\"0\">\n+      <widget class=\"QLabel\" name=\"label_3\">\n+       <property name=\"text\">\n+        <string>&amp;Message:</string>\n+       </property>\n+       <property name=\"buddy\">\n+        <cstring>reqMessage</cstring>\n+       </property>\n+      </widget>\n+     </item>\n+     <item row=\"5\" column=\"1\">\n+      <widget class=\"QLineEdit\" name=\"reqMessage\"/>\n+     </item>\n+     <item row=\"6\" column=\"0\">\n+      <widget class=\"QLabel\" name=\"label_4\">\n+       <property name=\"text\">\n+        <string/>\n+       </property>\n+      </widget>\n+     </item>\n+     <item row=\"6\" column=\"1\">\n+      <widget class=\"QCheckBox\" name=\"reuseAddress\">\n+       <property name=\"text\">\n+        <string>R&amp;euse an existing receiving address</string>\n+       </property>\n+      </widget>\n+     </item>\n+     <item row=\"2\" column=\"1\">\n+      <widget class=\"QLabel\" name=\"label_5\">\n+       <property name=\"text\">\n+        <string>Use this form to request payments. All fields are optional.</string>\n+       </property>\n+      </widget>\n+     </item>\n+    </layout>\n+   </item>\n+   <item>\n+    <layout class=\"QHBoxLayout\" name=\"horizontalLayout\">\n+     <item>\n+      <widget class=\"QPushButton\" name=\"clearButton\">\n+       <property name=\"sizePolicy\">\n+        <sizepolicy hsizetype=\"Minimum\" vsizetype=\"Fixed\">\n+         <horstretch>0</horstretch>\n+         <verstretch>0</verstretch>\n+        </sizepolicy>\n+       </property>\n+       <property name=\"toolTip\">\n+        <string>Remove all transaction fields</string>\n+       </property>\n+       <property name=\"text\">\n+        <string>Clear</string>\n+       </property>\n+       <property name=\"icon\">\n+        <iconset resource=\"../bitcoin.qrc\">\n+         <normaloff>:/icons/remove</normaloff>:/icons/remove</iconset>\n+       </property>\n+       <property name=\"autoRepeatDelay\">\n+        <number>300</number>\n+       </property>\n+       <property name=\"autoDefault\">\n+        <bool>false</bool>\n+       </property>\n+      </widget>\n+     </item>\n+     <item>\n+      <spacer name=\"horizontalSpacer\">\n+       <property name=\"orientation\">\n+        <enum>Qt::Horizontal</enum>\n+       </property>\n+       <property name=\"sizeHint\" stdset=\"0\">\n+        <size>\n+         <width>40</width>\n+         <height>20</height>\n+        </size>\n+       </property>\n+      </spacer>\n+     </item>\n+     <item>\n+      <widget class=\"QPushButton\" name=\"receiveButton\">\n+       <property name=\"minimumSize\">\n+        <size>\n+         <width>150</width>\n+         <height>0</height>\n+        </size>\n+       </property>\n+       <property name=\"text\">\n+        <string>&amp;Request payment</string>\n+       </property>\n+       <property name=\"icon\">\n+        <iconset resource=\"../bitcoin.qrc\">\n+         <normaloff>:/icons/receiving_addresses</normaloff>:/icons/receiving_addresses</iconset>\n+       </property>\n+      </widget>\n+     </item>\n+    </layout>\n+   </item>\n+  </layout>\n+ </widget>\n+ <customwidgets>\n+  <customwidget>\n+   <class>BitcoinAmountField</class>\n+   <extends>QLineEdit</extends>\n+   <header>bitcoinamountfield.h</header>\n+  </customwidget>\n+ </customwidgets>\n+ <resources>\n+  <include location=\"../bitcoin.qrc\"/>\n+ </resources>\n+ <connections/>\n+</ui>"
      },
      {
        "sha": "7430b34d0c86164336812605e5a389209f2f1fc5",
        "filename": "src/qt/forms/receiverequestdialog.ui",
        "status": "renamed",
        "additions": 89,
        "deletions": 62,
        "changes": 151,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/forms/receiverequestdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/forms/receiverequestdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/receiverequestdialog.ui?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -1,17 +1,17 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n <ui version=\"4.0\">\n- <class>QRCodeDialog</class>\n- <widget class=\"QDialog\" name=\"QRCodeDialog\">\n+ <class>ReceiveRequestDialog</class>\n+ <widget class=\"QDialog\" name=\"ReceiveRequestDialog\">\n   <property name=\"geometry\">\n    <rect>\n     <x>0</x>\n     <y>0</y>\n-    <width>340</width>\n-    <height>530</height>\n+    <width>487</width>\n+    <height>597</height>\n    </rect>\n   </property>\n   <property name=\"windowTitle\">\n-   <string>QR Code Dialog</string>\n+   <string>Request coins</string>\n   </property>\n   <layout class=\"QVBoxLayout\" name=\"verticalLayout_3\">\n    <item>\n@@ -39,6 +39,37 @@\n      </property>\n     </widget>\n    </item>\n+   <item>\n+    <layout class=\"QHBoxLayout\" name=\"horizontalLayout\">\n+     <item>\n+      <spacer name=\"horizontalSpacer\">\n+       <property name=\"orientation\">\n+        <enum>Qt::Horizontal</enum>\n+       </property>\n+       <property name=\"sizeHint\" stdset=\"0\">\n+        <size>\n+         <width>40</width>\n+         <height>20</height>\n+        </size>\n+       </property>\n+      </spacer>\n+     </item>\n+     <item>\n+      <widget class=\"QPushButton\" name=\"btnSaveAs\">\n+       <property name=\"text\">\n+        <string>&amp;Save Image...</string>\n+       </property>\n+      </widget>\n+     </item>\n+    </layout>\n+   </item>\n+   <item>\n+    <widget class=\"QLabel\" name=\"label\">\n+     <property name=\"text\">\n+      <string>Bitcoin URI:</string>\n+     </property>\n+    </widget>\n+   </item>\n    <item>\n     <widget class=\"QPlainTextEdit\" name=\"outUri\">\n      <property name=\"sizePolicy\">\n@@ -61,25 +92,22 @@\n      </property>\n     </widget>\n    </item>\n+   <item>\n+    <widget class=\"QLabel\" name=\"label_2\">\n+     <property name=\"text\">\n+      <string>Payment information:</string>\n+     </property>\n+    </widget>\n+   </item>\n    <item>\n     <widget class=\"QWidget\" name=\"widget\" native=\"true\">\n      <layout class=\"QVBoxLayout\" name=\"verticalLayout_2\">\n-      <item>\n-       <widget class=\"QCheckBox\" name=\"chkReqPayment\">\n-        <property name=\"enabled\">\n-         <bool>true</bool>\n-        </property>\n-        <property name=\"text\">\n-         <string>Request Payment</string>\n-        </property>\n-       </widget>\n-      </item>\n       <item>\n        <layout class=\"QFormLayout\" name=\"formLayout\">\n         <property name=\"fieldGrowthPolicy\">\n          <enum>QFormLayout::AllNonFixedFieldsGrow</enum>\n         </property>\n-        <item row=\"1\" column=\"0\">\n+        <item row=\"2\" column=\"0\">\n          <widget class=\"QLabel\" name=\"lblLabel\">\n           <property name=\"text\">\n            <string>Label:</string>\n@@ -95,10 +123,17 @@\n           </property>\n          </widget>\n         </item>\n-        <item row=\"1\" column=\"1\">\n-         <widget class=\"QLineEdit\" name=\"lnLabel\"/>\n+        <item row=\"2\" column=\"1\">\n+         <widget class=\"QLineEdit\" name=\"lnLabel\">\n+          <property name=\"enabled\">\n+           <bool>true</bool>\n+          </property>\n+          <property name=\"readOnly\">\n+           <bool>true</bool>\n+          </property>\n+         </widget>\n         </item>\n-        <item row=\"2\" column=\"0\">\n+        <item row=\"3\" column=\"0\">\n          <widget class=\"QLabel\" name=\"lblMessage\">\n           <property name=\"text\">\n            <string>Message:</string>\n@@ -114,10 +149,17 @@\n           </property>\n          </widget>\n         </item>\n-        <item row=\"2\" column=\"1\">\n-         <widget class=\"QLineEdit\" name=\"lnMessage\"/>\n+        <item row=\"3\" column=\"1\">\n+         <widget class=\"QLineEdit\" name=\"lnMessage\">\n+          <property name=\"enabled\">\n+           <bool>true</bool>\n+          </property>\n+          <property name=\"readOnly\">\n+           <bool>true</bool>\n+          </property>\n+         </widget>\n         </item>\n-        <item row=\"0\" column=\"0\">\n+        <item row=\"1\" column=\"0\">\n          <widget class=\"QLabel\" name=\"lblAmount\">\n           <property name=\"sizePolicy\">\n            <sizepolicy hsizetype=\"Preferred\" vsizetype=\"Maximum\">\n@@ -139,40 +181,42 @@\n           </property>\n          </widget>\n         </item>\n-        <item row=\"0\" column=\"1\">\n-         <widget class=\"BitcoinAmountField\" name=\"lnReqAmount\">\n+        <item row=\"1\" column=\"1\">\n+         <widget class=\"BitcoinAmountField\" name=\"lnReqAmount\" native=\"true\">\n           <property name=\"enabled\">\n-           <bool>false</bool>\n+           <bool>true</bool>\n           </property>\n           <property name=\"minimumSize\">\n            <size>\n             <width>80</width>\n             <height>0</height>\n            </size>\n           </property>\n+          <property name=\"readOnly\" stdset=\"0\">\n+           <bool>true</bool>\n+          </property>\n          </widget>\n         </item>\n-       </layout>\n-      </item>\n-      <item>\n-       <layout class=\"QHBoxLayout\" name=\"horizontalLayout\">\n-        <item>\n-         <spacer name=\"horizontalSpacer\">\n-          <property name=\"orientation\">\n-           <enum>Qt::Horizontal</enum>\n+        <item row=\"0\" column=\"0\">\n+         <widget class=\"QLabel\" name=\"label_3\">\n+          <property name=\"text\">\n+           <string>Address:</string>\n           </property>\n-          <property name=\"sizeHint\" stdset=\"0\">\n-           <size>\n-            <width>40</width>\n-            <height>20</height>\n-           </size>\n+          <property name=\"textFormat\">\n+           <enum>Qt::PlainText</enum>\n+          </property>\n+          <property name=\"alignment\">\n+           <set>Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter</set>\n+          </property>\n+          <property name=\"buddy\">\n+           <cstring>reqAddress</cstring>\n           </property>\n-         </spacer>\n+         </widget>\n         </item>\n-        <item>\n-         <widget class=\"QPushButton\" name=\"btnSaveAs\">\n-          <property name=\"text\">\n-           <string>&amp;Save As...</string>\n+        <item row=\"0\" column=\"1\">\n+         <widget class=\"QLineEdit\" name=\"lnAddress\">\n+          <property name=\"readOnly\">\n+           <bool>true</bool>\n           </property>\n          </widget>\n         </item>\n@@ -186,27 +230,10 @@\n  <customwidgets>\n   <customwidget>\n    <class>BitcoinAmountField</class>\n-   <extends>QLineEdit</extends>\n+   <extends>QWidget</extends>\n    <header>bitcoinamountfield.h</header>\n   </customwidget>\n  </customwidgets>\n  <resources/>\n- <connections>\n-  <connection>\n-   <sender>chkReqPayment</sender>\n-   <signal>clicked(bool)</signal>\n-   <receiver>lnReqAmount</receiver>\n-   <slot>setEnabled(bool)</slot>\n-   <hints>\n-    <hint type=\"sourcelabel\">\n-     <x>92</x>\n-     <y>285</y>\n-    </hint>\n-    <hint type=\"destinationlabel\">\n-     <x>98</x>\n-     <y>311</y>\n-    </hint>\n-   </hints>\n-  </connection>\n- </connections>\n+ <connections/>\n </ui>",
        "previous_filename": "src/qt/forms/qrcodedialog.ui"
      },
      {
        "sha": "9e81c2cf7bccb0c6c038e43f029153775f307c8a",
        "filename": "src/qt/receivecoinsdialog.cpp",
        "status": "added",
        "additions": 105,
        "deletions": 0,
        "changes": 105,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/receivecoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/receivecoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receivecoinsdialog.cpp?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -0,0 +1,105 @@\n+#include \"receivecoinsdialog.h\"\n+#include \"ui_receivecoinsdialog.h\"\n+\n+#include \"walletmodel.h\"\n+#include \"bitcoinunits.h\"\n+#include \"addressbookpage.h\"\n+#include \"optionsmodel.h\"\n+#include \"guiutil.h\"\n+#include \"receiverequestdialog.h\"\n+#include \"addresstablemodel.h\"\n+\n+#include <QMessageBox>\n+#include <QTextDocument>\n+#include <QScrollBar>\n+\n+ReceiveCoinsDialog::ReceiveCoinsDialog(QWidget *parent) :\n+    QDialog(parent),\n+    ui(new Ui::ReceiveCoinsDialog),\n+    model(0)\n+{\n+    ui->setupUi(this);\n+\n+#ifdef Q_OS_MAC // Icons on push buttons are very uncommon on Mac\n+    ui->clearButton->setIcon(QIcon());\n+    ui->receiveButton->setIcon(QIcon());\n+#endif\n+    connect(ui->clearButton, SIGNAL(clicked()), this, SLOT(clear()));\n+}\n+\n+void ReceiveCoinsDialog::setModel(WalletModel *model)\n+{\n+    this->model = model;\n+\n+    if(model && model->getOptionsModel())\n+    {\n+        connect(model->getOptionsModel(), SIGNAL(displayUnitChanged(int)), this, SLOT(updateDisplayUnit()));\n+        updateDisplayUnit();\n+    }\n+}\n+\n+ReceiveCoinsDialog::~ReceiveCoinsDialog()\n+{\n+    delete ui;\n+}\n+\n+void ReceiveCoinsDialog::clear()\n+{\n+    ui->reqAmount->clear();\n+    ui->reqLabel->setText(\"\");\n+    ui->reqMessage->setText(\"\");\n+    ui->reuseAddress->setChecked(false);\n+    updateDisplayUnit();\n+}\n+\n+void ReceiveCoinsDialog::reject()\n+{\n+    clear();\n+}\n+\n+void ReceiveCoinsDialog::accept()\n+{\n+    clear();\n+}\n+\n+void ReceiveCoinsDialog::updateDisplayUnit()\n+{\n+    if(model && model->getOptionsModel())\n+    {\n+        ui->reqAmount->setDisplayUnit(model->getOptionsModel()->getDisplayUnit());\n+    }\n+}\n+\n+void ReceiveCoinsDialog::on_receiveButton_clicked()\n+{\n+    if(!model || !model->getOptionsModel() || !model->getAddressTableModel())\n+        return;\n+\n+    QString address;\n+    QString label = ui->reqLabel->text();\n+    if(ui->reuseAddress->isChecked())\n+    {\n+        /* Choose existing receiving address */\n+        AddressBookPage dlg(AddressBookPage::ForSelection, AddressBookPage::ReceivingTab, this);\n+        dlg.setModel(model->getAddressTableModel());\n+        if(dlg.exec())\n+        {\n+            address = dlg.getReturnValue();\n+            if(label.isEmpty()) /* If no label provided, use the previously used label */\n+            {\n+                label = model->getAddressTableModel()->labelForAddress(address);\n+            }\n+        } else {\n+            return;\n+        }\n+    } else {\n+        /* Generate new receiving address */\n+        address = model->getAddressTableModel()->addRow(AddressTableModel::Receive, label, \"\");\n+    }\n+    ReceiveRequestDialog *dialog = new ReceiveRequestDialog(address, label,\n+            ui->reqAmount->value(), ui->reqMessage->text(), this);\n+    dialog->setModel(model->getOptionsModel());\n+    dialog->setAttribute(Qt::WA_DeleteOnClose);\n+    dialog->show();\n+    clear();\n+}"
      },
      {
        "sha": "8d12e55afe2c636e553fcedc8165f355f4ff6af0",
        "filename": "src/qt/receivecoinsdialog.h",
        "status": "added",
        "additions": 38,
        "deletions": 0,
        "changes": 38,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/receivecoinsdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/receivecoinsdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receivecoinsdialog.h?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -0,0 +1,38 @@\n+#ifndef RECEIVECOINSDIALOG_H\n+#define RECEIVECOINSDIALOG_H\n+\n+#include <QDialog>\n+#include <QVariant>\n+\n+namespace Ui {\n+    class ReceiveCoinsDialog;\n+}\n+class WalletModel;\n+class OptionsModel;\n+\n+/** Dialog for requesting payment of bitcoins */\n+class ReceiveCoinsDialog : public QDialog\n+{\n+    Q_OBJECT\n+\n+public:\n+    explicit ReceiveCoinsDialog(QWidget *parent = 0);\n+    ~ReceiveCoinsDialog();\n+\n+    void setModel(WalletModel *model);\n+\n+public slots:\n+    void clear();\n+    void reject();\n+    void accept();\n+\n+private:\n+    Ui::ReceiveCoinsDialog *ui;\n+    WalletModel *model;\n+\n+private slots:\n+    void on_receiveButton_clicked();\n+    void updateDisplayUnit();\n+};\n+\n+#endif // RECEIVECOINSDIALOG_H"
      },
      {
        "sha": "b40cda9b324f7357acf950b7c17d32dfb82efd2e",
        "filename": "src/qt/receiverequestdialog.cpp",
        "status": "renamed",
        "additions": 42,
        "deletions": 49,
        "changes": 91,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/receiverequestdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/receiverequestdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.cpp?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -1,5 +1,5 @@\n-#include \"qrcodedialog.h\"\n-#include \"ui_qrcodedialog.h\"\n+#include \"receiverequestdialog.h\"\n+#include \"ui_receiverequestdialog.h\"\n \n #include \"bitcoinunits.h\"\n #include \"guiconstants.h\"\n@@ -11,35 +11,46 @@\n #include <QUrl>\n #endif\n \n+#include \"bitcoin-config.h\" /* for USE_QRCODE */\n+\n+#ifdef USE_QRCODE\n #include <qrencode.h>\n+#endif\n \n-QRCodeDialog::QRCodeDialog(const QString &addr, const QString &label, bool enableReq, QWidget *parent) :\n+ReceiveRequestDialog::ReceiveRequestDialog(const QString &addr, const QString &label, quint64 amount, const QString &message, QWidget *parent) :\n     QDialog(parent),\n-    ui(new Ui::QRCodeDialog),\n+    ui(new Ui::ReceiveRequestDialog),\n     model(0),\n     address(addr)\n {\n     ui->setupUi(this);\n \n-    setWindowTitle(QString(\"%1\").arg(address));\n-\n-    ui->chkReqPayment->setVisible(enableReq);\n-    ui->lblAmount->setVisible(enableReq);\n-    ui->lnReqAmount->setVisible(enableReq);\n+    QString target = label;\n+    if(target.isEmpty())\n+        target = addr;\n+    setWindowTitle(tr(\"Request payment to %1\").arg(target));\n \n+    ui->lnAddress->setText(addr);\n+    if(amount)\n+        ui->lnReqAmount->setValue(amount);\n+    ui->lnReqAmount->setReadOnly(true);\n     ui->lnLabel->setText(label);\n+    ui->lnMessage->setText(message);\n \n-    ui->btnSaveAs->setEnabled(false);\n+#ifndef USE_QRCODE\n+    ui->btnSaveAs->setVisible(false);\n+    ui->lblQRCode->setVisible(false);\n+#endif\n \n     genCode();\n }\n \n-QRCodeDialog::~QRCodeDialog()\n+ReceiveRequestDialog::~ReceiveRequestDialog()\n {\n     delete ui;\n }\n \n-void QRCodeDialog::setModel(OptionsModel *model)\n+void ReceiveRequestDialog::setModel(OptionsModel *model)\n {\n     this->model = model;\n \n@@ -50,10 +61,12 @@ void QRCodeDialog::setModel(OptionsModel *model)\n     updateDisplayUnit();\n }\n \n-void QRCodeDialog::genCode()\n+void ReceiveRequestDialog::genCode()\n {\n     QString uri = getURI();\n-\n+    ui->btnSaveAs->setEnabled(false);\n+    ui->outUri->setPlainText(uri);\n+#ifdef USE_QRCODE\n     if (uri != \"\")\n     {\n         ui->lblQRCode->setText(\"\");\n@@ -78,32 +91,21 @@ void QRCodeDialog::genCode()\n         QRcode_free(code);\n \n         ui->lblQRCode->setPixmap(QPixmap::fromImage(myImage).scaled(300, 300));\n-\n-        ui->outUri->setPlainText(uri);\n+        ui->btnSaveAs->setEnabled(true);\n     }\n+#endif\n }\n \n-QString QRCodeDialog::getURI()\n+QString ReceiveRequestDialog::getURI()\n {\n     QString ret = QString(\"bitcoin:%1\").arg(address);\n     int paramCount = 0;\n \n-    ui->outUri->clear();\n-\n-    if (ui->chkReqPayment->isChecked())\n+    if (ui->lnReqAmount->validate())\n     {\n-        if (ui->lnReqAmount->validate())\n-        {\n-            // even if we allow a non BTC unit input in lnReqAmount, we generate the URI with BTC as unit (as defined in BIP21)\n-            ret += QString(\"?amount=%1\").arg(BitcoinUnits::format(BitcoinUnits::BTC, ui->lnReqAmount->value()));\n-            paramCount++;\n-        }\n-        else\n-        {\n-            ui->btnSaveAs->setEnabled(false);\n-            ui->lblQRCode->setText(tr(\"The entered amount is invalid, please check.\"));\n-            return QString(\"\");\n-        }\n+        // even if we allow a non BTC unit input in lnReqAmount, we generate the URI with BTC as unit (as defined in BIP21)\n+        ret += QString(\"?amount=%1\").arg(BitcoinUnits::format(BitcoinUnits::BTC, ui->lnReqAmount->value()));\n+        paramCount++;\n     }\n \n     if (!ui->lnLabel->text().isEmpty())\n@@ -120,50 +122,41 @@ QString QRCodeDialog::getURI()\n         paramCount++;\n     }\n \n-    // limit URI length to prevent a DoS against the QR-Code dialog\n+    // limit URI length\n     if (ret.length() > MAX_URI_LENGTH)\n     {\n-        ui->btnSaveAs->setEnabled(false);\n         ui->lblQRCode->setText(tr(\"Resulting URI too long, try to reduce the text for label / message.\"));\n         return QString(\"\");\n     }\n \n-    ui->btnSaveAs->setEnabled(true);\n     return ret;\n }\n \n-void QRCodeDialog::on_lnReqAmount_textChanged()\n+void ReceiveRequestDialog::on_lnReqAmount_textChanged()\n {\n     genCode();\n }\n \n-void QRCodeDialog::on_lnLabel_textChanged()\n+void ReceiveRequestDialog::on_lnLabel_textChanged()\n {\n     genCode();\n }\n \n-void QRCodeDialog::on_lnMessage_textChanged()\n+void ReceiveRequestDialog::on_lnMessage_textChanged()\n {\n     genCode();\n }\n \n-void QRCodeDialog::on_btnSaveAs_clicked()\n+void ReceiveRequestDialog::on_btnSaveAs_clicked()\n {\n+#ifdef USE_QRCODE\n     QString fn = GUIUtil::getSaveFileName(this, tr(\"Save QR Code\"), QString(), tr(\"PNG Images (*.png)\"));\n     if (!fn.isEmpty())\n         myImage.scaled(EXPORT_IMAGE_SIZE, EXPORT_IMAGE_SIZE).save(fn);\n+#endif\n }\n \n-void QRCodeDialog::on_chkReqPayment_toggled(bool fChecked)\n-{\n-    if (!fChecked)\n-        // if chkReqPayment is not active, don't display lnReqAmount as invalid\n-        ui->lnReqAmount->setValid(true);\n-\n-    genCode();\n-}\n-\n-void QRCodeDialog::updateDisplayUnit()\n+void ReceiveRequestDialog::updateDisplayUnit()\n {\n     if (model)\n     {",
        "previous_filename": "src/qt/qrcodedialog.cpp"
      },
      {
        "sha": "37a3fa22d64bd8fea966ff395093627fdc034f10",
        "filename": "src/qt/receiverequestdialog.h",
        "status": "renamed",
        "additions": 5,
        "deletions": 6,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/receiverequestdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/receiverequestdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.h?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -5,17 +5,17 @@\n #include <QImage>\n \n namespace Ui {\n-    class QRCodeDialog;\n+    class ReceiveRequestDialog;\n }\n class OptionsModel;\n \n-class QRCodeDialog : public QDialog\n+class ReceiveRequestDialog : public QDialog\n {\n     Q_OBJECT\n \n public:\n-    explicit QRCodeDialog(const QString &addr, const QString &label, bool enableReq, QWidget *parent = 0);\n-    ~QRCodeDialog();\n+    explicit ReceiveRequestDialog(const QString &addr, const QString &label, quint64 amount, const QString &message, QWidget *parent = 0);\n+    ~ReceiveRequestDialog();\n \n     void setModel(OptionsModel *model);\n \n@@ -24,12 +24,11 @@ private slots:\n     void on_lnLabel_textChanged();\n     void on_lnMessage_textChanged();\n     void on_btnSaveAs_clicked();\n-    void on_chkReqPayment_toggled(bool fChecked);\n \n     void updateDisplayUnit();\n \n private:\n-    Ui::QRCodeDialog *ui;\n+    Ui::ReceiveRequestDialog *ui;\n     OptionsModel *model;\n     QString address;\n     QImage myImage;",
        "previous_filename": "src/qt/qrcodedialog.h"
      },
      {
        "sha": "2d42ecb568b12f00d60cb3d7cf44b2755f06a2e1",
        "filename": "src/qt/sendcoinsentry.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/sendcoinsentry.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/sendcoinsentry.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsentry.cpp?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -49,7 +49,7 @@ void SendCoinsEntry::on_addressBookButton_clicked()\n {\n     if(!model)\n         return;\n-    AddressBookPage dlg(AddressBookPage::ForSending, AddressBookPage::SendingTab, this);\n+    AddressBookPage dlg(AddressBookPage::ForSelection, AddressBookPage::SendingTab, this);\n     dlg.setModel(model->getAddressTableModel());\n     if(dlg.exec())\n     {"
      },
      {
        "sha": "ff3d00b326a47427dd2573b755579b3edc6d20d2",
        "filename": "src/qt/signverifymessagedialog.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/signverifymessagedialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/signverifymessagedialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/signverifymessagedialog.cpp?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -86,7 +86,7 @@ void SignVerifyMessageDialog::on_addressBookButton_SM_clicked()\n {\n     if (model && model->getAddressTableModel())\n     {\n-        AddressBookPage dlg(AddressBookPage::ForSending, AddressBookPage::ReceivingTab, this);\n+        AddressBookPage dlg(AddressBookPage::ForSelection, AddressBookPage::ReceivingTab, this);\n         dlg.setModel(model->getAddressTableModel());\n         if (dlg.exec())\n         {\n@@ -178,7 +178,7 @@ void SignVerifyMessageDialog::on_addressBookButton_VM_clicked()\n {\n     if (model && model->getAddressTableModel())\n     {\n-        AddressBookPage dlg(AddressBookPage::ForSending, AddressBookPage::SendingTab, this);\n+        AddressBookPage dlg(AddressBookPage::ForSelection, AddressBookPage::SendingTab, this);\n         dlg.setModel(model->getAddressTableModel());\n         if (dlg.exec())\n         {"
      },
      {
        "sha": "dd1d69ec3a278bb4ff1fe523b8b3bcaea60b0614",
        "filename": "src/qt/walletframe.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 7,
        "changes": 21,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/walletframe.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/walletframe.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletframe.cpp?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -115,13 +115,6 @@ void WalletFrame::gotoHistoryPage()\n         i.value()->gotoHistoryPage();\n }\n \n-void WalletFrame::gotoAddressBookPage()\n-{\n-    QMap<QString, WalletView*>::const_iterator i;\n-    for (i = mapWalletViews.constBegin(); i != mapWalletViews.constEnd(); ++i)\n-        i.value()->gotoAddressBookPage();\n-}\n-\n void WalletFrame::gotoReceiveCoinsPage()\n {\n     QMap<QString, WalletView*>::const_iterator i;\n@@ -184,3 +177,17 @@ void WalletFrame::setEncryptionStatus()\n     if (walletView)\n         walletView->setEncryptionStatus();\n }\n+\n+void WalletFrame::usedSendingAddresses()\n+{\n+    WalletView *walletView = (WalletView*)walletStack->currentWidget();\n+    if (walletView)\n+        walletView->usedSendingAddresses();\n+}\n+\n+void WalletFrame::usedReceivingAddresses()\n+{\n+    WalletView *walletView = (WalletView*)walletStack->currentWidget();\n+    if (walletView)\n+        walletView->usedReceivingAddresses();\n+}"
      },
      {
        "sha": "89983b4aeca1d9a0e990461de973cce19e89f7e5",
        "filename": "src/qt/walletframe.h",
        "status": "modified",
        "additions": 5,
        "deletions": 2,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/walletframe.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/walletframe.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletframe.h?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -52,8 +52,6 @@ public slots:\n     void gotoOverviewPage();\n     /** Switch to history (transactions) page */\n     void gotoHistoryPage();\n-    /** Switch to address book page */\n-    void gotoAddressBookPage();\n     /** Switch to receive coins page */\n     void gotoReceiveCoinsPage();\n     /** Switch to send coins page */\n@@ -73,6 +71,11 @@ public slots:\n     /** Ask for passphrase to unlock wallet temporarily */\n     void unlockWallet();\n \n+    /** Show used sending addresses */\n+    void usedSendingAddresses();\n+    /** Show used receiving addresses */\n+    void usedReceivingAddresses();\n+\n     /** Set the encryption status as shown in the UI.\n      @param[in] status            current encryption status\n      @see WalletModel::EncryptionStatus"
      },
      {
        "sha": "1b80ae34eded8aadf7cc1b10362d5586258493b9",
        "filename": "src/qt/walletview.cpp",
        "status": "modified",
        "additions": 24,
        "deletions": 17,
        "changes": 41,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/walletview.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/walletview.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletview.cpp?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -9,6 +9,7 @@\n #include \"transactiontablemodel.h\"\n #include \"addressbookpage.h\"\n #include \"sendcoinsdialog.h\"\n+#include \"receivecoinsdialog.h\"\n #include \"signverifymessagedialog.h\"\n #include \"clientmodel.h\"\n #include \"walletmodel.h\"\n@@ -53,13 +54,11 @@ WalletView::WalletView(QWidget *parent):\n     vbox->addLayout(hbox_buttons);\n     transactionsPage->setLayout(vbox);\n \n-    addressBookPage = new AddressBookPage(AddressBookPage::ForEditing, AddressBookPage::SendingTab);\n-    receiveCoinsPage = new AddressBookPage(AddressBookPage::ForEditing, AddressBookPage::ReceivingTab);\n-    sendCoinsPage = new SendCoinsDialog();\n+    receiveCoinsPage = new ReceiveCoinsDialog(gui);\n+    sendCoinsPage = new SendCoinsDialog(gui);\n \n     addWidget(overviewPage);\n     addWidget(transactionsPage);\n-    addWidget(addressBookPage);\n     addWidget(receiveCoinsPage);\n     addWidget(sendCoinsPage);\n \n@@ -69,10 +68,6 @@ WalletView::WalletView(QWidget *parent):\n     // Double-clicking on a transaction on the transaction history page shows details\n     connect(transactionView, SIGNAL(doubleClicked(QModelIndex)), transactionView, SLOT(showDetails()));\n \n-    // Clicking on \"Send Coins\" in the address book sends you to the send coins tab\n-    connect(addressBookPage, SIGNAL(sendCoins(QString)), this, SLOT(gotoSendCoinsPage(QString)));\n-    // Clicking on \"Verify Message\" in the address book opens the verify message tab in the Sign/Verify Message dialog\n-    connect(addressBookPage, SIGNAL(verifyMessage(QString)), this, SLOT(gotoVerifyMessageTab(QString)));\n     // Clicking on \"Sign Message\" in the receive coins page opens the sign message tab in the Sign/Verify Message dialog\n     connect(receiveCoinsPage, SIGNAL(signMessage(QString)), this, SLOT(gotoSignMessageTab(QString)));\n     // Clicking on \"Export\" allows to export the transaction list\n@@ -98,8 +93,6 @@ void WalletView::setClientModel(ClientModel *clientModel)\n     if (clientModel)\n     {\n         overviewPage->setClientModel(clientModel);\n-        addressBookPage->setOptionsModel(clientModel->getOptionsModel());\n-        receiveCoinsPage->setOptionsModel(clientModel->getOptionsModel());\n     }\n }\n \n@@ -114,8 +107,7 @@ void WalletView::setWalletModel(WalletModel *walletModel)\n         // Put transaction list in tabs\n         transactionView->setModel(walletModel);\n         overviewPage->setWalletModel(walletModel);\n-        addressBookPage->setModel(walletModel->getAddressTableModel());\n-        receiveCoinsPage->setModel(walletModel->getAddressTableModel());\n+        receiveCoinsPage->setModel(walletModel);\n         sendCoinsPage->setModel(walletModel);\n \n         setEncryptionStatus();\n@@ -156,11 +148,6 @@ void WalletView::gotoHistoryPage()\n     setCurrentWidget(transactionsPage);\n }\n \n-void WalletView::gotoAddressBookPage()\n-{\n-    setCurrentWidget(addressBookPage);\n-}\n-\n void WalletView::gotoReceiveCoinsPage()\n {\n     setCurrentWidget(receiveCoinsPage);\n@@ -270,3 +257,23 @@ void WalletView::unlockWallet()\n         dlg.exec();\n     }\n }\n+\n+void WalletView::usedSendingAddresses()\n+{\n+    if(!walletModel)\n+        return;\n+    AddressBookPage *dlg = new AddressBookPage(AddressBookPage::ForEditing, AddressBookPage::SendingTab, this);\n+    dlg->setModel(walletModel->getAddressTableModel());\n+    dlg->setAttribute(Qt::WA_DeleteOnClose);\n+    dlg->show();\n+}\n+\n+void WalletView::usedReceivingAddresses()\n+{\n+    if(!walletModel)\n+        return;\n+    AddressBookPage *dlg = new AddressBookPage(AddressBookPage::ForEditing, AddressBookPage::ReceivingTab, this);\n+    dlg->setModel(walletModel->getAddressTableModel());\n+    dlg->setAttribute(Qt::WA_DeleteOnClose);\n+    dlg->show();\n+}"
      },
      {
        "sha": "54451d744a4a34270cc6dcda12a3260d0c50fbd6",
        "filename": "src/qt/walletview.h",
        "status": "modified",
        "additions": 7,
        "deletions": 5,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/walletview.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b/src/qt/walletview.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletview.h?ref=74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "patch": "@@ -14,8 +14,8 @@ class ClientModel;\n class WalletModel;\n class TransactionView;\n class OverviewPage;\n-class AddressBookPage;\n class SendCoinsDialog;\n+class ReceiveCoinsDialog;\n class SendCoinsRecipient;\n class SignVerifyMessageDialog;\n class RPCConsole;\n@@ -61,8 +61,7 @@ class WalletView : public QStackedWidget\n \n     OverviewPage *overviewPage;\n     QWidget *transactionsPage;\n-    AddressBookPage *addressBookPage;\n-    AddressBookPage *receiveCoinsPage;\n+    ReceiveCoinsDialog *receiveCoinsPage;\n     SendCoinsDialog *sendCoinsPage;\n \n     TransactionView *transactionView;\n@@ -72,8 +71,6 @@ public slots:\n     void gotoOverviewPage();\n     /** Switch to history (transactions) page */\n     void gotoHistoryPage();\n-    /** Switch to address book page */\n-    void gotoAddressBookPage();\n     /** Switch to receive coins page */\n     void gotoReceiveCoinsPage();\n     /** Switch to send coins page */\n@@ -98,6 +95,11 @@ public slots:\n     /** Ask for passphrase to unlock wallet temporarily */\n     void unlockWallet();\n \n+    /** Show used sending addresses */\n+    void usedSendingAddresses();\n+    /** Show used receiving addresses */\n+    void usedReceivingAddresses();\n+\n     void setEncryptionStatus();\n \n signals:"
      }
    ]
  },
  {
    "sha": "864a6f790ee80a4acc56189cdc1897c9a3ed6998",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4NjRhNmY3OTBlZTgwYTRhY2M1NjE4OWNkYzE4OTdjOWEzZWQ2OTk4",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-18T09:23:48Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-23T07:15:25Z"
      },
      "message": "qt: remove verify/send message and send coins from address book\n\nThese no longer make sense in the new workflow. It's less\nclicks to reach sign/verify message from the menu. And sending\nfrom the address book is one kind of automatic address reuse\nwe're trying to avoid.",
      "tree": {
        "sha": "1392999a3c3af3dfa25bc10eb504b5dc6056c765",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1392999a3c3af3dfa25bc10eb504b5dc6056c765"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/864a6f790ee80a4acc56189cdc1897c9a3ed6998",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/864a6f790ee80a4acc56189cdc1897c9a3ed6998",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/864a6f790ee80a4acc56189cdc1897c9a3ed6998",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/864a6f790ee80a4acc56189cdc1897c9a3ed6998/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/74fb765e29ed2b85ee7f6e61d16876c03b4abe9b"
      }
    ],
    "stats": {
      "total": 98,
      "additions": 0,
      "deletions": 98
    },
    "files": [
      {
        "sha": "7fbdf2e9c5753cdd3022f843ba8407f0a4133391",
        "filename": "src/qt/addressbookpage.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 62,
        "changes": 62,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/864a6f790ee80a4acc56189cdc1897c9a3ed6998/src/qt/addressbookpage.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/864a6f790ee80a4acc56189cdc1897c9a3ed6998/src/qt/addressbookpage.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/addressbookpage.cpp?ref=864a6f790ee80a4acc56189cdc1897c9a3ed6998",
        "patch": "@@ -31,8 +31,6 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n     ui->newAddress->setIcon(QIcon());\n     ui->copyAddress->setIcon(QIcon());\n     ui->deleteAddress->setIcon(QIcon());\n-    ui->verifyMessage->setIcon(QIcon());\n-    ui->signMessage->setIcon(QIcon());\n     ui->exportButton->setIcon(QIcon());\n #endif\n \n@@ -62,22 +60,17 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n     case SendingTab:\n         ui->labelExplanation->setText(tr(\"These are your Bitcoin addresses for sending payments. Always check the amount and the receiving address before sending coins.\"));\n         ui->deleteAddress->setVisible(true);\n-        ui->signMessage->setVisible(false);\n         break;\n     case ReceivingTab:\n         ui->labelExplanation->setText(tr(\"These are your Bitcoin addresses for receiving payments. It is recommended to use a new receiving address for each transaction.\"));\n         ui->deleteAddress->setVisible(false);\n-        ui->signMessage->setVisible(true);\n         break;\n     }\n \n     // Context menu actions\n     QAction *copyAddressAction = new QAction(ui->copyAddress->text(), this);\n     QAction *copyLabelAction = new QAction(tr(\"Copy &Label\"), this);\n     QAction *editAction = new QAction(tr(\"&Edit\"), this);\n-    QAction *sendCoinsAction = new QAction(tr(\"Send &Coins\"), this);\n-    QAction *signMessageAction = new QAction(ui->signMessage->text(), this);\n-    QAction *verifyMessageAction = new QAction(ui->verifyMessage->text(), this);\n     deleteAction = new QAction(ui->deleteAddress->text(), this);\n \n     // Build context menu\n@@ -88,21 +81,12 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n     if(tab == SendingTab)\n         contextMenu->addAction(deleteAction);\n     contextMenu->addSeparator();\n-    if(tab == SendingTab)\n-        contextMenu->addAction(sendCoinsAction);\n-    if(tab == ReceivingTab)\n-        contextMenu->addAction(signMessageAction);\n-    else if(tab == SendingTab)\n-        contextMenu->addAction(verifyMessageAction);\n \n     // Connect signals for context menu actions\n     connect(copyAddressAction, SIGNAL(triggered()), this, SLOT(on_copyAddress_clicked()));\n     connect(copyLabelAction, SIGNAL(triggered()), this, SLOT(onCopyLabelAction()));\n     connect(editAction, SIGNAL(triggered()), this, SLOT(onEditAction()));\n     connect(deleteAction, SIGNAL(triggered()), this, SLOT(on_deleteAddress_clicked()));\n-    connect(sendCoinsAction, SIGNAL(triggered()), this, SLOT(onSendCoinsAction()));\n-    connect(signMessageAction, SIGNAL(triggered()), this, SLOT(on_signMessage_clicked()));\n-    connect(verifyMessageAction, SIGNAL(triggered()), this, SLOT(on_verifyMessage_clicked()));\n \n     connect(ui->tableView, SIGNAL(customContextMenuRequested(QPoint)), this, SLOT(contextualMenu(QPoint)));\n \n@@ -193,42 +177,6 @@ void AddressBookPage::onEditAction()\n     dlg.exec();\n }\n \n-void AddressBookPage::on_signMessage_clicked()\n-{\n-    QTableView *table = ui->tableView;\n-    QModelIndexList indexes = table->selectionModel()->selectedRows(AddressTableModel::Address);\n-\n-    foreach (QModelIndex index, indexes)\n-    {\n-        QString address = index.data().toString();\n-        emit signMessage(address);\n-    }\n-}\n-\n-void AddressBookPage::on_verifyMessage_clicked()\n-{\n-    QTableView *table = ui->tableView;\n-    QModelIndexList indexes = table->selectionModel()->selectedRows(AddressTableModel::Address);\n-\n-    foreach (QModelIndex index, indexes)\n-    {\n-        QString address = index.data().toString();\n-        emit verifyMessage(address);\n-    }\n-}\n-\n-void AddressBookPage::onSendCoinsAction()\n-{\n-    QTableView *table = ui->tableView;\n-    QModelIndexList indexes = table->selectionModel()->selectedRows(AddressTableModel::Address);\n-\n-    foreach (QModelIndex index, indexes)\n-    {\n-        QString address = index.data().toString();\n-        emit sendCoins(address);\n-    }\n-}\n-\n void AddressBookPage::on_newAddress_clicked()\n {\n     if(!model)\n@@ -274,20 +222,12 @@ void AddressBookPage::selectionChanged()\n             ui->deleteAddress->setEnabled(true);\n             ui->deleteAddress->setVisible(true);\n             deleteAction->setEnabled(true);\n-            ui->signMessage->setEnabled(false);\n-            ui->signMessage->setVisible(false);\n-            ui->verifyMessage->setEnabled(true);\n-            ui->verifyMessage->setVisible(true);\n             break;\n         case ReceivingTab:\n             // Deleting receiving addresses, however, is not allowed\n             ui->deleteAddress->setEnabled(false);\n             ui->deleteAddress->setVisible(false);\n             deleteAction->setEnabled(false);\n-            ui->signMessage->setEnabled(true);\n-            ui->signMessage->setVisible(true);\n-            ui->verifyMessage->setEnabled(false);\n-            ui->verifyMessage->setVisible(false);\n             break;\n         }\n         ui->copyAddress->setEnabled(true);\n@@ -296,8 +236,6 @@ void AddressBookPage::selectionChanged()\n     {\n         ui->deleteAddress->setEnabled(false);\n         ui->copyAddress->setEnabled(false);\n-        ui->signMessage->setEnabled(false);\n-        ui->verifyMessage->setEnabled(false);\n     }\n }\n "
      },
      {
        "sha": "9255e58144094fce55ba0ac64dfced85d8f57861",
        "filename": "src/qt/addressbookpage.h",
        "status": "modified",
        "additions": 0,
        "deletions": 8,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/864a6f790ee80a4acc56189cdc1897c9a3ed6998/src/qt/addressbookpage.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/864a6f790ee80a4acc56189cdc1897c9a3ed6998/src/qt/addressbookpage.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/addressbookpage.h?ref=864a6f790ee80a4acc56189cdc1897c9a3ed6998",
        "patch": "@@ -63,12 +63,6 @@ private slots:\n     void on_newAddress_clicked();\n     /** Copy address of currently selected address entry to clipboard */\n     void on_copyAddress_clicked();\n-    /** Open the sign message tab in the Sign/Verify Message dialog with currently selected address */\n-    void on_signMessage_clicked();\n-    /** Open the verify message tab in the Sign/Verify Message dialog with currently selected address */\n-    void on_verifyMessage_clicked();\n-    /** Open send coins dialog for currently selected address (no button) */\n-    void onSendCoinsAction();\n     /** Copy label of currently selected address entry to clipboard (no button) */\n     void onCopyLabelAction();\n     /** Edit currently selected address entry (no button) */\n@@ -84,8 +78,6 @@ private slots:\n     void selectNewAddress(const QModelIndex &parent, int begin, int /*end*/);\n \n signals:\n-    void signMessage(QString addr);\n-    void verifyMessage(QString addr);\n     void sendCoins(QString addr);\n };\n "
      },
      {
        "sha": "9edaf74023633a8de5ba18cf0496d1eaee36965a",
        "filename": "src/qt/forms/addressbookpage.ui",
        "status": "modified",
        "additions": 0,
        "deletions": 28,
        "changes": 28,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/864a6f790ee80a4acc56189cdc1897c9a3ed6998/src/qt/forms/addressbookpage.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/864a6f790ee80a4acc56189cdc1897c9a3ed6998/src/qt/forms/addressbookpage.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/addressbookpage.ui?ref=864a6f790ee80a4acc56189cdc1897c9a3ed6998",
        "patch": "@@ -82,34 +82,6 @@\n        </property>\n       </widget>\n      </item>\n-     <item>\n-      <widget class=\"QPushButton\" name=\"signMessage\">\n-       <property name=\"toolTip\">\n-        <string>Sign a message to prove you own a Bitcoin address</string>\n-       </property>\n-       <property name=\"text\">\n-        <string>Sign &amp;Message</string>\n-       </property>\n-       <property name=\"icon\">\n-        <iconset resource=\"../bitcoin.qrc\">\n-         <normaloff>:/icons/edit</normaloff>:/icons/edit</iconset>\n-       </property>\n-      </widget>\n-     </item>\n-     <item>\n-      <widget class=\"QPushButton\" name=\"verifyMessage\">\n-       <property name=\"toolTip\">\n-        <string>Verify a message to ensure it was signed with a specified Bitcoin address</string>\n-       </property>\n-       <property name=\"text\">\n-        <string>&amp;Verify Message</string>\n-       </property>\n-       <property name=\"icon\">\n-        <iconset resource=\"../bitcoin.qrc\">\n-         <normaloff>:/icons/transaction_0</normaloff>:/icons/transaction_0</iconset>\n-       </property>\n-      </widget>\n-     </item>\n      <item>\n       <widget class=\"QPushButton\" name=\"deleteAddress\">\n        <property name=\"toolTip\">"
      }
    ]
  },
  {
    "sha": "82095923bb71a670aa67ad15987bb6d4d7726abe",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4MjA5NTkyM2JiNzFhNjcwYWE2N2FkMTU5ODdiYjZkNGQ3NzI2YWJl",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-18T11:08:30Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-23T07:15:25Z"
      },
      "message": "qt: allow dragging, copying and saving QR code\n\nAdd context menu and drag handling to QR code widget.",
      "tree": {
        "sha": "1bd9b4747659277bb365d8d56008fbed9ead0945",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1bd9b4747659277bb365d8d56008fbed9ead0945"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/82095923bb71a670aa67ad15987bb6d4d7726abe",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/82095923bb71a670aa67ad15987bb6d4d7726abe",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/82095923bb71a670aa67ad15987bb6d4d7726abe",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/82095923bb71a670aa67ad15987bb6d4d7726abe/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "864a6f790ee80a4acc56189cdc1897c9a3ed6998",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/864a6f790ee80a4acc56189cdc1897c9a3ed6998",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/864a6f790ee80a4acc56189cdc1897c9a3ed6998"
      }
    ],
    "stats": {
      "total": 88,
      "additions": 75,
      "deletions": 13
    },
    "files": [
      {
        "sha": "4f53dc19b8ba4b1ec2dfe87ecaf3ac4318471d59",
        "filename": "src/qt/forms/receiverequestdialog.ui",
        "status": "modified",
        "additions": 6,
        "deletions": 1,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/82095923bb71a670aa67ad15987bb6d4d7726abe/src/qt/forms/receiverequestdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/82095923bb71a670aa67ad15987bb6d4d7726abe/src/qt/forms/receiverequestdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/receiverequestdialog.ui?ref=82095923bb71a670aa67ad15987bb6d4d7726abe",
        "patch": "@@ -15,7 +15,7 @@\n   </property>\n   <layout class=\"QVBoxLayout\" name=\"verticalLayout_3\">\n    <item>\n-    <widget class=\"QLabel\" name=\"lblQRCode\">\n+    <widget class=\"QRImageWidget\" name=\"lblQRCode\">\n      <property name=\"sizePolicy\">\n       <sizepolicy hsizetype=\"Expanding\" vsizetype=\"Expanding\">\n        <horstretch>0</horstretch>\n@@ -233,6 +233,11 @@\n    <extends>QWidget</extends>\n    <header>bitcoinamountfield.h</header>\n   </customwidget>\n+  <customwidget>\n+   <class>QRImageWidget</class>\n+   <extends>QLabel</extends>\n+   <header>receiverequestdialog.h</header>\n+  </customwidget>\n  </customwidgets>\n  <resources/>\n  <connections/>"
      },
      {
        "sha": "dd4f5f16f4f599e5cde131a60c3bcb638a684f12",
        "filename": "src/qt/receiverequestdialog.cpp",
        "status": "modified",
        "additions": 49,
        "deletions": 10,
        "changes": 59,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/82095923bb71a670aa67ad15987bb6d4d7726abe/src/qt/receiverequestdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/82095923bb71a670aa67ad15987bb6d4d7726abe/src/qt/receiverequestdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.cpp?ref=82095923bb71a670aa67ad15987bb6d4d7726abe",
        "patch": "@@ -7,6 +7,7 @@\n #include \"optionsmodel.h\"\n \n #include <QPixmap>\n+#include <QClipboard>\n #if QT_VERSION < 0x050000\n #include <QUrl>\n #endif\n@@ -17,6 +18,51 @@\n #include <qrencode.h>\n #endif\n \n+QRImageWidget::QRImageWidget(QWidget *parent):\n+    QLabel(parent)\n+{\n+    setContextMenuPolicy(Qt::ActionsContextMenu);\n+\n+    QAction *saveImageAction = new QAction(tr(\"&Save Image...\"), this);\n+    connect(saveImageAction, SIGNAL(triggered()), this, SLOT(saveImage()));\n+    addAction(saveImageAction);\n+    QAction *copyImageAction = new QAction(tr(\"&Copy Image\"), this);\n+    connect(copyImageAction, SIGNAL(triggered()), this, SLOT(copyImage()));\n+    addAction(copyImageAction);\n+}\n+\n+QImage QRImageWidget::exportImage()\n+{\n+    return pixmap()->toImage().scaled(EXPORT_IMAGE_SIZE, EXPORT_IMAGE_SIZE);\n+}\n+\n+void QRImageWidget::mousePressEvent(QMouseEvent *event)\n+{\n+    if(event->button() == Qt::LeftButton)\n+    {\n+        QMimeData *mimeData = new QMimeData;\n+        mimeData->setImageData(exportImage());\n+\n+        QDrag *drag = new QDrag(this);\n+        drag->setMimeData(mimeData);\n+        drag->exec();\n+    }\n+}\n+\n+void QRImageWidget::saveImage()\n+{\n+    QString fn = GUIUtil::getSaveFileName(this, tr(\"Save QR Code\"), QString(), tr(\"PNG Images (*.png)\"));\n+    if (!fn.isEmpty())\n+    {\n+        exportImage().save(fn);\n+    }\n+}\n+\n+void QRImageWidget::copyImage()\n+{\n+    QApplication::clipboard()->setImage(exportImage());\n+}\n+\n ReceiveRequestDialog::ReceiveRequestDialog(const QString &addr, const QString &label, quint64 amount, const QString &message, QWidget *parent) :\n     QDialog(parent),\n     ui(new Ui::ReceiveRequestDialog),\n@@ -42,6 +88,8 @@ ReceiveRequestDialog::ReceiveRequestDialog(const QString &addr, const QString &l\n     ui->lblQRCode->setVisible(false);\n #endif\n \n+    connect(ui->btnSaveAs, SIGNAL(clicked()), ui->lblQRCode, SLOT(saveImage()));\n+\n     genCode();\n }\n \n@@ -77,7 +125,7 @@ void ReceiveRequestDialog::genCode()\n             ui->lblQRCode->setText(tr(\"Error encoding URI into QR Code.\"));\n             return;\n         }\n-        myImage = QImage(code->width + 8, code->width + 8, QImage::Format_RGB32);\n+        QImage myImage = QImage(code->width + 8, code->width + 8, QImage::Format_RGB32);\n         myImage.fill(0xffffff);\n         unsigned char *p = code->data;\n         for (int y = 0; y < code->width; y++)\n@@ -147,15 +195,6 @@ void ReceiveRequestDialog::on_lnMessage_textChanged()\n     genCode();\n }\n \n-void ReceiveRequestDialog::on_btnSaveAs_clicked()\n-{\n-#ifdef USE_QRCODE\n-    QString fn = GUIUtil::getSaveFileName(this, tr(\"Save QR Code\"), QString(), tr(\"PNG Images (*.png)\"));\n-    if (!fn.isEmpty())\n-        myImage.scaled(EXPORT_IMAGE_SIZE, EXPORT_IMAGE_SIZE).save(fn);\n-#endif\n-}\n-\n void ReceiveRequestDialog::updateDisplayUnit()\n {\n     if (model)"
      },
      {
        "sha": "e560a24ff15ab505105c05ebc2df65eee56d2823",
        "filename": "src/qt/receiverequestdialog.h",
        "status": "modified",
        "additions": 20,
        "deletions": 2,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/82095923bb71a670aa67ad15987bb6d4d7726abe/src/qt/receiverequestdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/82095923bb71a670aa67ad15987bb6d4d7726abe/src/qt/receiverequestdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.h?ref=82095923bb71a670aa67ad15987bb6d4d7726abe",
        "patch": "@@ -3,12 +3,32 @@\n \n #include <QDialog>\n #include <QImage>\n+#include <QLabel>\n \n namespace Ui {\n     class ReceiveRequestDialog;\n }\n class OptionsModel;\n \n+/* Label widget for QR code. This image can be dragged, dropped, copied and saved\n+ * to disk.\n+ */\n+class QRImageWidget : public QLabel\n+{\n+    Q_OBJECT\n+\n+public:\n+    explicit QRImageWidget(QWidget *parent = 0);\n+    QImage exportImage();\n+\n+public slots:\n+    void saveImage();\n+    void copyImage();\n+\n+protected:\n+    virtual void mousePressEvent(QMouseEvent *event);\n+};\n+\n class ReceiveRequestDialog : public QDialog\n {\n     Q_OBJECT\n@@ -23,15 +43,13 @@ private slots:\n     void on_lnReqAmount_textChanged();\n     void on_lnLabel_textChanged();\n     void on_lnMessage_textChanged();\n-    void on_btnSaveAs_clicked();\n \n     void updateDisplayUnit();\n \n private:\n     Ui::ReceiveRequestDialog *ui;\n     OptionsModel *model;\n     QString address;\n-    QImage myImage;\n \n     void genCode();\n     QString getURI();"
      }
    ]
  },
  {
    "sha": "03535acd053fc0597a9e1fd76c5c7b1f54f5c1df",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMzUzNWFjZDA1M2ZjMDU5N2E5ZTFmZDc2YzVjN2IxZjU0ZjVjMWRm",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-18T11:44:27Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-23T07:15:25Z"
      },
      "message": "qt: add message field to SendCoinsRecipient\n\nAlso update URI parsing to fill in this field.\nNote that the message is not currently used in any way with the client.\nIt should be stored with the transaction.",
      "tree": {
        "sha": "98b137a8f4efc3a1ddd46d5aa840515c22261491",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/98b137a8f4efc3a1ddd46d5aa840515c22261491"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/03535acd053fc0597a9e1fd76c5c7b1f54f5c1df",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/03535acd053fc0597a9e1fd76c5c7b1f54f5c1df",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/03535acd053fc0597a9e1fd76c5c7b1f54f5c1df",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/03535acd053fc0597a9e1fd76c5c7b1f54f5c1df/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "82095923bb71a670aa67ad15987bb6d4d7726abe",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/82095923bb71a670aa67ad15987bb6d4d7726abe",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/82095923bb71a670aa67ad15987bb6d4d7726abe"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 10,
      "deletions": 3
    },
    "files": [
      {
        "sha": "e7334e67cb13db89563cb9798bb5db6b80ba31d0",
        "filename": "src/qt/guiutil.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/03535acd053fc0597a9e1fd76c5c7b1f54f5c1df/src/qt/guiutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/03535acd053fc0597a9e1fd76c5c7b1f54f5c1df/src/qt/guiutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.cpp?ref=03535acd053fc0597a9e1fd76c5c7b1f54f5c1df",
        "patch": "@@ -112,6 +112,11 @@ bool parseBitcoinURI(const QUrl &uri, SendCoinsRecipient *out)\n             rv.label = i->second;\n             fShouldReturnFalse = false;\n         }\n+        if (i->first == \"message\")\n+        {\n+            rv.message = i->second;\n+            fShouldReturnFalse = false;\n+        }\n         else if (i->first == \"amount\")\n         {\n             if(!i->second.isEmpty())"
      },
      {
        "sha": "df4df3154bbe07b1ed163d2e293172bee79f4ed3",
        "filename": "src/qt/test/uritests.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/03535acd053fc0597a9e1fd76c5c7b1f54f5c1df/src/qt/test/uritests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/03535acd053fc0597a9e1fd76c5c7b1f54f5c1df/src/qt/test/uritests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/test/uritests.cpp?ref=03535acd053fc0597a9e1fd76c5c7b1f54f5c1df",
        "patch": "@@ -50,9 +50,8 @@ void URITests::uriTests()\n     QVERIFY(rv.address == QString(\"175tWpb8K1S7NmH4Zx6rewF9WQrcZv245W\"));\n     QVERIFY(rv.label == QString());\n \n-    // We currently don't implement the message parameter (ok, yea, we break spec...)\n     uri.setUrl(QString(\"bitcoin:175tWpb8K1S7NmH4Zx6rewF9WQrcZv245W?req-message=Wikipedia Example Address\"));\n-    QVERIFY(!GUIUtil::parseBitcoinURI(uri, &rv));\n+    QVERIFY(GUIUtil::parseBitcoinURI(uri, &rv));\n \n     uri.setUrl(QString(\"bitcoin:175tWpb8K1S7NmH4Zx6rewF9WQrcZv245W?amount=1,000&label=Wikipedia Example\"));\n     QVERIFY(!GUIUtil::parseBitcoinURI(uri, &rv));"
      },
      {
        "sha": "2e99eaddcb53040c021dec437c1f71b6da309d14",
        "filename": "src/qt/walletmodel.h",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/03535acd053fc0597a9e1fd76c5c7b1f54f5c1df/src/qt/walletmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/03535acd053fc0597a9e1fd76c5c7b1f54f5c1df/src/qt/walletmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.h?ref=03535acd053fc0597a9e1fd76c5c7b1f54f5c1df",
        "patch": "@@ -21,11 +21,14 @@ QT_END_NAMESPACE\n class SendCoinsRecipient\n {\n public:\n-    SendCoinsRecipient() : amount(0) { }\n+    explicit SendCoinsRecipient() : amount(0) { }\n+    explicit SendCoinsRecipient(const QString &addr, const QString &label, quint64 amount, const QString &message):\n+        address(addr), label(label), amount(amount), message(message) {}\n \n     QString address;\n     QString label;\n     qint64 amount;\n+    QString message;\n \n     // If from a payment request, paymentRequest.IsInitialized() will be true\n     PaymentRequestPlus paymentRequest;"
      }
    ]
  },
  {
    "sha": "8a7f37c7972504d25225c96f225503c329aaf6fa",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4YTdmMzdjNzk3MjUwNGQyNTIyNWM5NmYyMjU1MDNjMzI5YWFmNmZh",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-18T11:45:11Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-23T07:15:25Z"
      },
      "message": "qt: use SendCoinsRecipient for payment request information\n\nThis brings some symmetry into the design by using the same object\nboth for incoming URIs that are parsed as for outgoing URIs that\nare formatted.",
      "tree": {
        "sha": "877843917da5d2e1ba69d553272f33f58b75d940",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/877843917da5d2e1ba69d553272f33f58b75d940"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8a7f37c7972504d25225c96f225503c329aaf6fa",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8a7f37c7972504d25225c96f225503c329aaf6fa",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8a7f37c7972504d25225c96f225503c329aaf6fa",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8a7f37c7972504d25225c96f225503c329aaf6fa/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "03535acd053fc0597a9e1fd76c5c7b1f54f5c1df",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/03535acd053fc0597a9e1fd76c5c7b1f54f5c1df",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/03535acd053fc0597a9e1fd76c5c7b1f54f5c1df"
      }
    ],
    "stats": {
      "total": 32,
      "additions": 18,
      "deletions": 14
    },
    "files": [
      {
        "sha": "fff678d0c6cc6caa110d95ef7c209541a17279f4",
        "filename": "src/qt/receivecoinsdialog.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8a7f37c7972504d25225c96f225503c329aaf6fa/src/qt/receivecoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8a7f37c7972504d25225c96f225503c329aaf6fa/src/qt/receivecoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receivecoinsdialog.cpp?ref=8a7f37c7972504d25225c96f225503c329aaf6fa",
        "patch": "@@ -96,8 +96,9 @@ void ReceiveCoinsDialog::on_receiveButton_clicked()\n         /* Generate new receiving address */\n         address = model->getAddressTableModel()->addRow(AddressTableModel::Receive, label, \"\");\n     }\n-    ReceiveRequestDialog *dialog = new ReceiveRequestDialog(address, label,\n-            ui->reqAmount->value(), ui->reqMessage->text(), this);\n+    SendCoinsRecipient info(address, label,\n+            ui->reqAmount->value(), ui->reqMessage->text());\n+    ReceiveRequestDialog *dialog = new ReceiveRequestDialog(info, this);\n     dialog->setModel(model->getOptionsModel());\n     dialog->setAttribute(Qt::WA_DeleteOnClose);\n     dialog->show();"
      },
      {
        "sha": "861458f8d89f484692c89edbceae4f354e695d5f",
        "filename": "src/qt/receiverequestdialog.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 10,
        "changes": 21,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8a7f37c7972504d25225c96f225503c329aaf6fa/src/qt/receiverequestdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8a7f37c7972504d25225c96f225503c329aaf6fa/src/qt/receiverequestdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.cpp?ref=8a7f37c7972504d25225c96f225503c329aaf6fa",
        "patch": "@@ -5,6 +5,7 @@\n #include \"guiconstants.h\"\n #include \"guiutil.h\"\n #include \"optionsmodel.h\"\n+#include \"walletmodel.h\"\n \n #include <QPixmap>\n #include <QClipboard>\n@@ -63,25 +64,25 @@ void QRImageWidget::copyImage()\n     QApplication::clipboard()->setImage(exportImage());\n }\n \n-ReceiveRequestDialog::ReceiveRequestDialog(const QString &addr, const QString &label, quint64 amount, const QString &message, QWidget *parent) :\n+ReceiveRequestDialog::ReceiveRequestDialog(const SendCoinsRecipient &info, QWidget *parent) :\n     QDialog(parent),\n     ui(new Ui::ReceiveRequestDialog),\n     model(0),\n-    address(addr)\n+    info(info)\n {\n     ui->setupUi(this);\n \n-    QString target = label;\n+    QString target = info.label;\n     if(target.isEmpty())\n-        target = addr;\n+        target = info.address;\n     setWindowTitle(tr(\"Request payment to %1\").arg(target));\n \n-    ui->lnAddress->setText(addr);\n-    if(amount)\n-        ui->lnReqAmount->setValue(amount);\n+    ui->lnAddress->setText(info.address);\n+    if(info.amount)\n+        ui->lnReqAmount->setValue(info.amount);\n     ui->lnReqAmount->setReadOnly(true);\n-    ui->lnLabel->setText(label);\n-    ui->lnMessage->setText(message);\n+    ui->lnLabel->setText(info.label);\n+    ui->lnMessage->setText(info.message);\n \n #ifndef USE_QRCODE\n     ui->btnSaveAs->setVisible(false);\n@@ -146,7 +147,7 @@ void ReceiveRequestDialog::genCode()\n \n QString ReceiveRequestDialog::getURI()\n {\n-    QString ret = QString(\"bitcoin:%1\").arg(address);\n+    QString ret = QString(\"bitcoin:%1\").arg(info.address);\n     int paramCount = 0;\n \n     if (ui->lnReqAmount->validate())"
      },
      {
        "sha": "bfe50bde77eca0dcfb89e86986c0f686dcce2a1b",
        "filename": "src/qt/receiverequestdialog.h",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8a7f37c7972504d25225c96f225503c329aaf6fa/src/qt/receiverequestdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8a7f37c7972504d25225c96f225503c329aaf6fa/src/qt/receiverequestdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.h?ref=8a7f37c7972504d25225c96f225503c329aaf6fa",
        "patch": "@@ -1,6 +1,8 @@\n #ifndef QRCODEDIALOG_H\n #define QRCODEDIALOG_H\n \n+#include \"walletmodel.h\"\n+\n #include <QDialog>\n #include <QImage>\n #include <QLabel>\n@@ -34,7 +36,7 @@ class ReceiveRequestDialog : public QDialog\n     Q_OBJECT\n \n public:\n-    explicit ReceiveRequestDialog(const QString &addr, const QString &label, quint64 amount, const QString &message, QWidget *parent = 0);\n+    explicit ReceiveRequestDialog(const SendCoinsRecipient &info, QWidget *parent = 0);\n     ~ReceiveRequestDialog();\n \n     void setModel(OptionsModel *model);\n@@ -49,7 +51,7 @@ private slots:\n private:\n     Ui::ReceiveRequestDialog *ui;\n     OptionsModel *model;\n-    QString address;\n+    SendCoinsRecipient info;\n \n     void genCode();\n     QString getURI();"
      }
    ]
  },
  {
    "sha": "786b066f037bf2d7ba7fe0df1a4e15b22ab65599",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3ODZiMDY2ZjAzN2JmMmQ3YmE3ZmUwZGYxYTRlMTViMjJhYjY1NTk5",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-18T12:03:17Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-23T07:15:25Z"
      },
      "message": "qt: move bitcoin URI formatting to guiutil\n\nFollow the same pattern as the parseBitcoinURI function.",
      "tree": {
        "sha": "5477946fc4ebfedd3c3cec67e03d0a0f8caabf7e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5477946fc4ebfedd3c3cec67e03d0a0f8caabf7e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/786b066f037bf2d7ba7fe0df1a4e15b22ab65599",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/786b066f037bf2d7ba7fe0df1a4e15b22ab65599",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/786b066f037bf2d7ba7fe0df1a4e15b22ab65599",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/786b066f037bf2d7ba7fe0df1a4e15b22ab65599/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8a7f37c7972504d25225c96f225503c329aaf6fa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8a7f37c7972504d25225c96f225503c329aaf6fa",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8a7f37c7972504d25225c96f225503c329aaf6fa"
      }
    ],
    "stats": {
      "total": 113,
      "additions": 56,
      "deletions": 57
    },
    "files": [
      {
        "sha": "9bb2fa7c997f1012c945d6989160dbd7669a6888",
        "filename": "src/qt/guiutil.cpp",
        "status": "modified",
        "additions": 28,
        "deletions": 0,
        "changes": 28,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/786b066f037bf2d7ba7fe0df1a4e15b22ab65599/src/qt/guiutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/786b066f037bf2d7ba7fe0df1a4e15b22ab65599/src/qt/guiutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.cpp?ref=786b066f037bf2d7ba7fe0df1a4e15b22ab65599",
        "patch": "@@ -153,6 +153,34 @@ bool parseBitcoinURI(QString uri, SendCoinsRecipient *out)\n     return parseBitcoinURI(uriInstance, out);\n }\n \n+QString formatBitcoinURI(const SendCoinsRecipient &info)\n+{\n+    QString ret = QString(\"bitcoin:%1\").arg(info.address);\n+    int paramCount = 0;\n+\n+    if (info.amount)\n+    {\n+        ret += QString(\"?amount=%1\").arg(BitcoinUnits::format(BitcoinUnits::BTC, info.amount));\n+        paramCount++;\n+    }\n+\n+    if (!info.label.isEmpty())\n+    {\n+        QString lbl(QUrl::toPercentEncoding(info.label));\n+        ret += QString(\"%1label=%2\").arg(paramCount == 0 ? \"?\" : \"&\").arg(lbl);\n+        paramCount++;\n+    }\n+\n+    if (!info.message.isEmpty())\n+    {\n+        QString msg(QUrl::toPercentEncoding(info.message));;\n+        ret += QString(\"%1message=%2\").arg(paramCount == 0 ? \"?\" : \"&\").arg(msg);\n+        paramCount++;\n+    }\n+\n+    return ret;\n+}\n+\n bool isDust(const QString& address, qint64 amount)\n {\n     CTxDestination dest = CBitcoinAddress(address.toStdString()).Get();"
      },
      {
        "sha": "956f550989e533370e95ba4e10fd27554cc40a36",
        "filename": "src/qt/guiutil.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/786b066f037bf2d7ba7fe0df1a4e15b22ab65599/src/qt/guiutil.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/786b066f037bf2d7ba7fe0df1a4e15b22ab65599/src/qt/guiutil.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.h?ref=786b066f037bf2d7ba7fe0df1a4e15b22ab65599",
        "patch": "@@ -35,6 +35,7 @@ namespace GUIUtil\n     // See Bitcoin URI definition discussion here: https://bitcointalk.org/index.php?topic=33490.0\n     bool parseBitcoinURI(const QUrl &uri, SendCoinsRecipient *out);\n     bool parseBitcoinURI(QString uri, SendCoinsRecipient *out);\n+    QString formatBitcoinURI(const SendCoinsRecipient &info);\n \n     // Returns true if given address+amount meets \"dust\" definition\n     bool isDust(const QString& address, qint64 amount);"
      },
      {
        "sha": "efbc6ebd70a1acecead46c46a211780a439608cc",
        "filename": "src/qt/receiverequestdialog.cpp",
        "status": "modified",
        "additions": 27,
        "deletions": 57,
        "changes": 84,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/786b066f037bf2d7ba7fe0df1a4e15b22ab65599/src/qt/receiverequestdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/786b066f037bf2d7ba7fe0df1a4e15b22ab65599/src/qt/receiverequestdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.cpp?ref=786b066f037bf2d7ba7fe0df1a4e15b22ab65599",
        "patch": "@@ -112,75 +112,45 @@ void ReceiveRequestDialog::setModel(OptionsModel *model)\n \n void ReceiveRequestDialog::genCode()\n {\n-    QString uri = getURI();\n+    QString uri = GUIUtil::formatBitcoinURI(info);\n     ui->btnSaveAs->setEnabled(false);\n     ui->outUri->setPlainText(uri);\n+\n #ifdef USE_QRCODE\n-    if (uri != \"\")\n+    ui->lblQRCode->setText(\"\");\n+    if(!uri.isEmpty())\n     {\n-        ui->lblQRCode->setText(\"\");\n-\n-        QRcode *code = QRcode_encodeString(uri.toUtf8().constData(), 0, QR_ECLEVEL_L, QR_MODE_8, 1);\n-        if (!code)\n-        {\n-            ui->lblQRCode->setText(tr(\"Error encoding URI into QR Code.\"));\n-            return;\n-        }\n-        QImage myImage = QImage(code->width + 8, code->width + 8, QImage::Format_RGB32);\n-        myImage.fill(0xffffff);\n-        unsigned char *p = code->data;\n-        for (int y = 0; y < code->width; y++)\n+        // limit URI length\n+        if (uri.length() > MAX_URI_LENGTH)\n         {\n-            for (int x = 0; x < code->width; x++)\n+            ui->lblQRCode->setText(tr(\"Resulting URI too long, try to reduce the text for label / message.\"));\n+        } else {\n+            QRcode *code = QRcode_encodeString(uri.toUtf8().constData(), 0, QR_ECLEVEL_L, QR_MODE_8, 1);\n+            if (!code)\n             {\n-                myImage.setPixel(x + 4, y + 4, ((*p & 1) ? 0x0 : 0xffffff));\n-                p++;\n+                ui->lblQRCode->setText(tr(\"Error encoding URI into QR Code.\"));\n+                return;\n             }\n-        }\n-        QRcode_free(code);\n+            QImage myImage = QImage(code->width + 8, code->width + 8, QImage::Format_RGB32);\n+            myImage.fill(0xffffff);\n+            unsigned char *p = code->data;\n+            for (int y = 0; y < code->width; y++)\n+            {\n+                for (int x = 0; x < code->width; x++)\n+                {\n+                    myImage.setPixel(x + 4, y + 4, ((*p & 1) ? 0x0 : 0xffffff));\n+                    p++;\n+                }\n+            }\n+            QRcode_free(code);\n \n-        ui->lblQRCode->setPixmap(QPixmap::fromImage(myImage).scaled(300, 300));\n-        ui->btnSaveAs->setEnabled(true);\n+            ui->lblQRCode->setPixmap(QPixmap::fromImage(myImage).scaled(300, 300));\n+            ui->btnSaveAs->setEnabled(true);\n+        }\n     }\n #endif\n }\n \n-QString ReceiveRequestDialog::getURI()\n-{\n-    QString ret = QString(\"bitcoin:%1\").arg(info.address);\n-    int paramCount = 0;\n-\n-    if (ui->lnReqAmount->validate())\n-    {\n-        // even if we allow a non BTC unit input in lnReqAmount, we generate the URI with BTC as unit (as defined in BIP21)\n-        ret += QString(\"?amount=%1\").arg(BitcoinUnits::format(BitcoinUnits::BTC, ui->lnReqAmount->value()));\n-        paramCount++;\n-    }\n-\n-    if (!ui->lnLabel->text().isEmpty())\n-    {\n-        QString lbl(QUrl::toPercentEncoding(ui->lnLabel->text()));\n-        ret += QString(\"%1label=%2\").arg(paramCount == 0 ? \"?\" : \"&\").arg(lbl);\n-        paramCount++;\n-    }\n-\n-    if (!ui->lnMessage->text().isEmpty())\n-    {\n-        QString msg(QUrl::toPercentEncoding(ui->lnMessage->text()));\n-        ret += QString(\"%1message=%2\").arg(paramCount == 0 ? \"?\" : \"&\").arg(msg);\n-        paramCount++;\n-    }\n-\n-    // limit URI length\n-    if (ret.length() > MAX_URI_LENGTH)\n-    {\n-        ui->lblQRCode->setText(tr(\"Resulting URI too long, try to reduce the text for label / message.\"));\n-        return QString(\"\");\n-    }\n-\n-    return ret;\n-}\n-\n void ReceiveRequestDialog::on_lnReqAmount_textChanged()\n {\n     genCode();"
      }
    ]
  },
  {
    "sha": "33a2febf5de0c7bd73c0ea409584487bd9995643",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozM2EyZmViZjVkZTBjN2JkNzNjMGVhNDA5NTg0NDg3YmQ5OTk1NjQz",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-18T12:25:35Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-23T07:15:25Z"
      },
      "message": "qt: show payment information in one text area\n\nSimplifies the dialog (makes it look less crowded) as well\nas the code and makes it possible to copy multiple fields at once.\nAlso format bitcoin URI as URI, add copy button for URI.",
      "tree": {
        "sha": "0c485b19fc58751f732a290a13cc83cd9577d374",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0c485b19fc58751f732a290a13cc83cd9577d374"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/33a2febf5de0c7bd73c0ea409584487bd9995643",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/33a2febf5de0c7bd73c0ea409584487bd9995643",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/33a2febf5de0c7bd73c0ea409584487bd9995643",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/33a2febf5de0c7bd73c0ea409584487bd9995643/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "786b066f037bf2d7ba7fe0df1a4e15b22ab65599",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/786b066f037bf2d7ba7fe0df1a4e15b22ab65599",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/786b066f037bf2d7ba7fe0df1a4e15b22ab65599"
      }
    ],
    "stats": {
      "total": 303,
      "additions": 84,
      "deletions": 219
    },
    "files": [
      {
        "sha": "fc0d10b4e40127e305cfd8f5f18df5e74977725b",
        "filename": "src/qt/forms/receiverequestdialog.ui",
        "status": "modified",
        "additions": 37,
        "deletions": 168,
        "changes": 205,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/33a2febf5de0c7bd73c0ea409584487bd9995643/src/qt/forms/receiverequestdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/33a2febf5de0c7bd73c0ea409584487bd9995643/src/qt/forms/receiverequestdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/receiverequestdialog.ui?ref=33a2febf5de0c7bd73c0ea409584487bd9995643",
        "patch": "@@ -17,7 +17,7 @@\n    <item>\n     <widget class=\"QRImageWidget\" name=\"lblQRCode\">\n      <property name=\"sizePolicy\">\n-      <sizepolicy hsizetype=\"Expanding\" vsizetype=\"Expanding\">\n+      <sizepolicy hsizetype=\"Expanding\" vsizetype=\"Fixed\">\n        <horstretch>0</horstretch>\n        <verstretch>0</verstretch>\n       </sizepolicy>\n@@ -39,6 +39,28 @@\n      </property>\n     </widget>\n    </item>\n+   <item>\n+    <widget class=\"QTextEdit\" name=\"outUri\">\n+     <property name=\"sizePolicy\">\n+      <sizepolicy hsizetype=\"Expanding\" vsizetype=\"Expanding\">\n+       <horstretch>0</horstretch>\n+       <verstretch>0</verstretch>\n+      </sizepolicy>\n+     </property>\n+     <property name=\"minimumSize\">\n+      <size>\n+       <width>0</width>\n+       <height>50</height>\n+      </size>\n+     </property>\n+     <property name=\"tabChangesFocus\">\n+      <bool>true</bool>\n+     </property>\n+     <property name=\"textInteractionFlags\">\n+      <set>Qt::TextSelectableByKeyboard|Qt::TextSelectableByMouse</set>\n+     </property>\n+    </widget>\n+   </item>\n    <item>\n     <layout class=\"QHBoxLayout\" name=\"horizontalLayout\">\n      <item>\n@@ -54,6 +76,20 @@\n        </property>\n       </spacer>\n      </item>\n+     <item>\n+      <widget class=\"QPushButton\" name=\"btnCopyURI\">\n+       <property name=\"text\">\n+        <string>Copy &amp;URI</string>\n+       </property>\n+      </widget>\n+     </item>\n+     <item>\n+      <widget class=\"QPushButton\" name=\"btnCopyImage\">\n+       <property name=\"text\">\n+        <string>&amp;Copy Image</string>\n+       </property>\n+      </widget>\n+     </item>\n      <item>\n       <widget class=\"QPushButton\" name=\"btnSaveAs\">\n        <property name=\"text\">\n@@ -63,176 +99,9 @@\n      </item>\n     </layout>\n    </item>\n-   <item>\n-    <widget class=\"QLabel\" name=\"label\">\n-     <property name=\"text\">\n-      <string>Bitcoin URI:</string>\n-     </property>\n-    </widget>\n-   </item>\n-   <item>\n-    <widget class=\"QPlainTextEdit\" name=\"outUri\">\n-     <property name=\"sizePolicy\">\n-      <sizepolicy hsizetype=\"Expanding\" vsizetype=\"Minimum\">\n-       <horstretch>0</horstretch>\n-       <verstretch>0</verstretch>\n-      </sizepolicy>\n-     </property>\n-     <property name=\"minimumSize\">\n-      <size>\n-       <width>0</width>\n-       <height>50</height>\n-      </size>\n-     </property>\n-     <property name=\"tabChangesFocus\">\n-      <bool>true</bool>\n-     </property>\n-     <property name=\"textInteractionFlags\">\n-      <set>Qt::TextSelectableByKeyboard|Qt::TextSelectableByMouse</set>\n-     </property>\n-    </widget>\n-   </item>\n-   <item>\n-    <widget class=\"QLabel\" name=\"label_2\">\n-     <property name=\"text\">\n-      <string>Payment information:</string>\n-     </property>\n-    </widget>\n-   </item>\n-   <item>\n-    <widget class=\"QWidget\" name=\"widget\" native=\"true\">\n-     <layout class=\"QVBoxLayout\" name=\"verticalLayout_2\">\n-      <item>\n-       <layout class=\"QFormLayout\" name=\"formLayout\">\n-        <property name=\"fieldGrowthPolicy\">\n-         <enum>QFormLayout::AllNonFixedFieldsGrow</enum>\n-        </property>\n-        <item row=\"2\" column=\"0\">\n-         <widget class=\"QLabel\" name=\"lblLabel\">\n-          <property name=\"text\">\n-           <string>Label:</string>\n-          </property>\n-          <property name=\"textFormat\">\n-           <enum>Qt::PlainText</enum>\n-          </property>\n-          <property name=\"alignment\">\n-           <set>Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter</set>\n-          </property>\n-          <property name=\"buddy\">\n-           <cstring>lnLabel</cstring>\n-          </property>\n-         </widget>\n-        </item>\n-        <item row=\"2\" column=\"1\">\n-         <widget class=\"QLineEdit\" name=\"lnLabel\">\n-          <property name=\"enabled\">\n-           <bool>true</bool>\n-          </property>\n-          <property name=\"readOnly\">\n-           <bool>true</bool>\n-          </property>\n-         </widget>\n-        </item>\n-        <item row=\"3\" column=\"0\">\n-         <widget class=\"QLabel\" name=\"lblMessage\">\n-          <property name=\"text\">\n-           <string>Message:</string>\n-          </property>\n-          <property name=\"textFormat\">\n-           <enum>Qt::PlainText</enum>\n-          </property>\n-          <property name=\"alignment\">\n-           <set>Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter</set>\n-          </property>\n-          <property name=\"buddy\">\n-           <cstring>lnMessage</cstring>\n-          </property>\n-         </widget>\n-        </item>\n-        <item row=\"3\" column=\"1\">\n-         <widget class=\"QLineEdit\" name=\"lnMessage\">\n-          <property name=\"enabled\">\n-           <bool>true</bool>\n-          </property>\n-          <property name=\"readOnly\">\n-           <bool>true</bool>\n-          </property>\n-         </widget>\n-        </item>\n-        <item row=\"1\" column=\"0\">\n-         <widget class=\"QLabel\" name=\"lblAmount\">\n-          <property name=\"sizePolicy\">\n-           <sizepolicy hsizetype=\"Preferred\" vsizetype=\"Maximum\">\n-            <horstretch>0</horstretch>\n-            <verstretch>0</verstretch>\n-           </sizepolicy>\n-          </property>\n-          <property name=\"text\">\n-           <string>Amount:</string>\n-          </property>\n-          <property name=\"textFormat\">\n-           <enum>Qt::PlainText</enum>\n-          </property>\n-          <property name=\"alignment\">\n-           <set>Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter</set>\n-          </property>\n-          <property name=\"buddy\">\n-           <cstring>lnReqAmount</cstring>\n-          </property>\n-         </widget>\n-        </item>\n-        <item row=\"1\" column=\"1\">\n-         <widget class=\"BitcoinAmountField\" name=\"lnReqAmount\" native=\"true\">\n-          <property name=\"enabled\">\n-           <bool>true</bool>\n-          </property>\n-          <property name=\"minimumSize\">\n-           <size>\n-            <width>80</width>\n-            <height>0</height>\n-           </size>\n-          </property>\n-          <property name=\"readOnly\" stdset=\"0\">\n-           <bool>true</bool>\n-          </property>\n-         </widget>\n-        </item>\n-        <item row=\"0\" column=\"0\">\n-         <widget class=\"QLabel\" name=\"label_3\">\n-          <property name=\"text\">\n-           <string>Address:</string>\n-          </property>\n-          <property name=\"textFormat\">\n-           <enum>Qt::PlainText</enum>\n-          </property>\n-          <property name=\"alignment\">\n-           <set>Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter</set>\n-          </property>\n-          <property name=\"buddy\">\n-           <cstring>reqAddress</cstring>\n-          </property>\n-         </widget>\n-        </item>\n-        <item row=\"0\" column=\"1\">\n-         <widget class=\"QLineEdit\" name=\"lnAddress\">\n-          <property name=\"readOnly\">\n-           <bool>true</bool>\n-          </property>\n-         </widget>\n-        </item>\n-       </layout>\n-      </item>\n-     </layout>\n-    </widget>\n-   </item>\n   </layout>\n  </widget>\n  <customwidgets>\n-  <customwidget>\n-   <class>BitcoinAmountField</class>\n-   <extends>QWidget</extends>\n-   <header>bitcoinamountfield.h</header>\n-  </customwidget>\n   <customwidget>\n    <class>QRImageWidget</class>\n    <extends>QLabel</extends>"
      },
      {
        "sha": "f3ab343fea6d5bfaa1680058e9fc7aca5d6abb90",
        "filename": "src/qt/receivecoinsdialog.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/33a2febf5de0c7bd73c0ea409584487bd9995643/src/qt/receivecoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/33a2febf5de0c7bd73c0ea409584487bd9995643/src/qt/receivecoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receivecoinsdialog.cpp?ref=33a2febf5de0c7bd73c0ea409584487bd9995643",
        "patch": "@@ -98,8 +98,9 @@ void ReceiveCoinsDialog::on_receiveButton_clicked()\n     }\n     SendCoinsRecipient info(address, label,\n             ui->reqAmount->value(), ui->reqMessage->text());\n-    ReceiveRequestDialog *dialog = new ReceiveRequestDialog(info, this);\n+    ReceiveRequestDialog *dialog = new ReceiveRequestDialog(this);\n     dialog->setModel(model->getOptionsModel());\n+    dialog->setInfo(info);\n     dialog->setAttribute(Qt::WA_DeleteOnClose);\n     dialog->show();\n     clear();"
      },
      {
        "sha": "f6031e2b472c54baf4ede122a352f4553fa73587",
        "filename": "src/qt/receiverequestdialog.cpp",
        "status": "modified",
        "additions": 41,
        "deletions": 42,
        "changes": 83,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/33a2febf5de0c7bd73c0ea409584487bd9995643/src/qt/receiverequestdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/33a2febf5de0c7bd73c0ea409584487bd9995643/src/qt/receiverequestdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.cpp?ref=33a2febf5de0c7bd73c0ea409584487bd9995643",
        "patch": "@@ -9,6 +9,9 @@\n \n #include <QPixmap>\n #include <QClipboard>\n+#include <QMouseEvent>\n+#include <QDrag>\n+#include <QMimeData>\n #if QT_VERSION < 0x050000\n #include <QUrl>\n #endif\n@@ -64,34 +67,21 @@ void QRImageWidget::copyImage()\n     QApplication::clipboard()->setImage(exportImage());\n }\n \n-ReceiveRequestDialog::ReceiveRequestDialog(const SendCoinsRecipient &info, QWidget *parent) :\n+ReceiveRequestDialog::ReceiveRequestDialog(QWidget *parent) :\n     QDialog(parent),\n     ui(new Ui::ReceiveRequestDialog),\n-    model(0),\n-    info(info)\n+    model(0)\n {\n     ui->setupUi(this);\n \n-    QString target = info.label;\n-    if(target.isEmpty())\n-        target = info.address;\n-    setWindowTitle(tr(\"Request payment to %1\").arg(target));\n-\n-    ui->lnAddress->setText(info.address);\n-    if(info.amount)\n-        ui->lnReqAmount->setValue(info.amount);\n-    ui->lnReqAmount->setReadOnly(true);\n-    ui->lnLabel->setText(info.label);\n-    ui->lnMessage->setText(info.message);\n-\n #ifndef USE_QRCODE\n     ui->btnSaveAs->setVisible(false);\n+    ui->btnCopyImage->setVisible(false);\n     ui->lblQRCode->setVisible(false);\n #endif\n \n     connect(ui->btnSaveAs, SIGNAL(clicked()), ui->lblQRCode, SLOT(saveImage()));\n-\n-    genCode();\n+    connect(ui->btnCopyImage, SIGNAL(clicked()), ui->lblQRCode, SLOT(copyImage()));\n }\n \n ReceiveRequestDialog::~ReceiveRequestDialog()\n@@ -104,17 +94,42 @@ void ReceiveRequestDialog::setModel(OptionsModel *model)\n     this->model = model;\n \n     if (model)\n-        connect(model, SIGNAL(displayUnitChanged(int)), this, SLOT(updateDisplayUnit()));\n+        connect(model, SIGNAL(displayUnitChanged(int)), this, SLOT(update()));\n \n-    // update the display unit, to not use the default (\"BTC\")\n-    updateDisplayUnit();\n+    // update the display unit if necessary\n+    update();\n }\n \n-void ReceiveRequestDialog::genCode()\n+void ReceiveRequestDialog::setInfo(const SendCoinsRecipient &info)\n {\n+    this->info = info;\n+    update();\n+}\n+\n+void ReceiveRequestDialog::update()\n+{\n+    if(!model)\n+        return;\n+    QString target = info.label;\n+    if(target.isEmpty())\n+        target = info.address;\n+    setWindowTitle(tr(\"Request payment to %1\").arg(target));\n+\n     QString uri = GUIUtil::formatBitcoinURI(info);\n     ui->btnSaveAs->setEnabled(false);\n-    ui->outUri->setPlainText(uri);\n+    QString html;\n+    html += \"<html><font face='verdana, arial, helvetica, sans-serif'>\";\n+    html += \"<a href=\\\"\"+uri+\"\\\">\" + GUIUtil::HtmlEscape(uri) + \"</a><br>\";\n+    html += \"<br>\";\n+    html += \"<b>\"+tr(\"Payment information\")+\"</b><br>\";\n+    html += \"<b>\"+tr(\"Address\")+\"</b>: \" + GUIUtil::HtmlEscape(info.address) + \"<br>\";\n+    if(info.amount)\n+        html += \"<b>\"+tr(\"Amount\")+\"</b>: \" + BitcoinUnits::formatWithUnit(model->getDisplayUnit(), info.amount) + \"<br>\";\n+    if(!info.label.isEmpty())\n+        html += \"<b>\"+tr(\"Label\")+\"</b>: \" + GUIUtil::HtmlEscape(info.label) + \"<br>\";\n+    if(!info.message.isEmpty())\n+        html += \"<b>\"+tr(\"Message\")+\"</b>: \" + GUIUtil::HtmlEscape(info.message) + \"<br>\";\n+    ui->outUri->setText(html);\n \n #ifdef USE_QRCODE\n     ui->lblQRCode->setText(\"\");\n@@ -151,26 +166,10 @@ void ReceiveRequestDialog::genCode()\n #endif\n }\n \n-void ReceiveRequestDialog::on_lnReqAmount_textChanged()\n-{\n-    genCode();\n-}\n-\n-void ReceiveRequestDialog::on_lnLabel_textChanged()\n-{\n-    genCode();\n-}\n-\n-void ReceiveRequestDialog::on_lnMessage_textChanged()\n+void ReceiveRequestDialog::on_btnCopyURI_clicked()\n {\n-    genCode();\n+    QString uri = GUIUtil::formatBitcoinURI(info);\n+    QApplication::clipboard()->setText(uri, QClipboard::Clipboard);\n+    QApplication::clipboard()->setText(uri, QClipboard::Selection);\n }\n \n-void ReceiveRequestDialog::updateDisplayUnit()\n-{\n-    if (model)\n-    {\n-        // Update lnReqAmount with the current unit\n-        ui->lnReqAmount->setDisplayUnit(model->getDisplayUnit());\n-    }\n-}"
      },
      {
        "sha": "8db1ad83a1b1d664a76f816d2421f1c33e71a172",
        "filename": "src/qt/receiverequestdialog.h",
        "status": "modified",
        "additions": 4,
        "deletions": 8,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/33a2febf5de0c7bd73c0ea409584487bd9995643/src/qt/receiverequestdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/33a2febf5de0c7bd73c0ea409584487bd9995643/src/qt/receiverequestdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.h?ref=33a2febf5de0c7bd73c0ea409584487bd9995643",
        "patch": "@@ -36,25 +36,21 @@ class ReceiveRequestDialog : public QDialog\n     Q_OBJECT\n \n public:\n-    explicit ReceiveRequestDialog(const SendCoinsRecipient &info, QWidget *parent = 0);\n+    explicit ReceiveRequestDialog(QWidget *parent = 0);\n     ~ReceiveRequestDialog();\n \n     void setModel(OptionsModel *model);\n+    void setInfo(const SendCoinsRecipient &info);\n \n private slots:\n-    void on_lnReqAmount_textChanged();\n-    void on_lnLabel_textChanged();\n-    void on_lnMessage_textChanged();\n+    void on_btnCopyURI_clicked();\n \n-    void updateDisplayUnit();\n+    void update();\n \n private:\n     Ui::ReceiveRequestDialog *ui;\n     OptionsModel *model;\n     SendCoinsRecipient info;\n-\n-    void genCode();\n-    QString getURI();\n };\n \n #endif // QRCODEDIALOG_H"
      }
    ]
  },
  {
    "sha": "70b14636cd60529c87b2cc61516f5d1bf49299a5",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3MGIxNDYzNmNkNjA1MjljODdiMmNjNjE1MTZmNWQxYmY0OTI5OWE1",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-18T17:42:40Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-10-25T11:25:25Z"
      },
      "message": "qt: general polish after adding new receive flow\n\n- We no longer have an address book, but \"address lists\", update message\n  accordingly\n- Add tooltips here and there\n- Clarify text on buttons\n- add Copy Address button to receive request dialog",
      "tree": {
        "sha": "d2bec1b1e3fa9991320b4e062ffe82a40193e68f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d2bec1b1e3fa9991320b4e062ffe82a40193e68f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/70b14636cd60529c87b2cc61516f5d1bf49299a5",
      "comment_count": 1,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/70b14636cd60529c87b2cc61516f5d1bf49299a5",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/70b14636cd60529c87b2cc61516f5d1bf49299a5",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/70b14636cd60529c87b2cc61516f5d1bf49299a5/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "33a2febf5de0c7bd73c0ea409584487bd9995643",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/33a2febf5de0c7bd73c0ea409584487bd9995643",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/33a2febf5de0c7bd73c0ea409584487bd9995643"
      }
    ],
    "stats": {
      "total": 156,
      "additions": 114,
      "deletions": 42
    },
    "files": [
      {
        "sha": "0b364afca892ff522fd4ccc5385fc543ce861bd5",
        "filename": "src/qt/addressbookpage.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/addressbookpage.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/addressbookpage.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/addressbookpage.cpp?ref=70b14636cd60529c87b2cc61516f5d1bf49299a5",
        "patch": "@@ -45,6 +45,7 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n         connect(ui->tableView, SIGNAL(doubleClicked(QModelIndex)), this, SLOT(accept()));\n         ui->tableView->setEditTriggers(QAbstractItemView::NoEditTriggers);\n         ui->tableView->setFocus();\n+        ui->closeButton->setText(tr(\"C&hoose\"));\n         ui->exportButton->hide();\n         break;\n     case ForEditing:\n@@ -90,8 +91,7 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n \n     connect(ui->tableView, SIGNAL(customContextMenuRequested(QPoint)), this, SLOT(contextualMenu(QPoint)));\n \n-    // Pass through accept action from button box\n-    connect(ui->buttonBox, SIGNAL(accepted()), this, SLOT(accept()));\n+    connect(ui->closeButton, SIGNAL(clicked()), this, SLOT(accept()));\n }\n \n AddressBookPage::~AddressBookPage()\n@@ -268,7 +268,7 @@ void AddressBookPage::on_exportButton_clicked()\n     // CSV is currently the only supported format\n     QString filename = GUIUtil::getSaveFileName(\n             this,\n-            tr(\"Export Address Book Data\"), QString(),\n+            tr(\"Export Address List\"), QString(),\n             tr(\"Comma separated file (*.csv)\"));\n \n     if (filename.isNull()) return;"
      },
      {
        "sha": "5a92a455b12d6dea2a147e6af7e8080c733ecb3b",
        "filename": "src/qt/forms/addressbookpage.ui",
        "status": "modified",
        "additions": 6,
        "deletions": 12,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/forms/addressbookpage.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/forms/addressbookpage.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/addressbookpage.ui?ref=70b14636cd60529c87b2cc61516f5d1bf49299a5",
        "patch": "@@ -11,7 +11,7 @@\n    </rect>\n   </property>\n   <property name=\"windowTitle\">\n-   <string></string>\n+   <string/>\n   </property>\n   <layout class=\"QVBoxLayout\" name=\"verticalLayout\">\n    <item>\n@@ -60,7 +60,7 @@\n         <string>Create a new address</string>\n        </property>\n        <property name=\"text\">\n-        <string>&amp;New Address</string>\n+        <string>&amp;New</string>\n        </property>\n        <property name=\"icon\">\n         <iconset resource=\"../bitcoin.qrc\">\n@@ -74,7 +74,7 @@\n         <string>Copy the currently selected address to the system clipboard</string>\n        </property>\n        <property name=\"text\">\n-        <string>&amp;Copy Address</string>\n+        <string>&amp;Copy</string>\n        </property>\n        <property name=\"icon\">\n         <iconset resource=\"../bitcoin.qrc\">\n@@ -124,15 +124,9 @@\n       </widget>\n      </item>\n      <item>\n-      <widget class=\"QDialogButtonBox\" name=\"buttonBox\">\n-       <property name=\"sizePolicy\">\n-        <sizepolicy hsizetype=\"Maximum\" vsizetype=\"Fixed\">\n-         <horstretch>0</horstretch>\n-         <verstretch>0</verstretch>\n-        </sizepolicy>\n-       </property>\n-       <property name=\"standardButtons\">\n-        <set>QDialogButtonBox::Ok</set>\n+      <widget class=\"QPushButton\" name=\"closeButton\">\n+       <property name=\"text\">\n+        <string>C&amp;lose</string>\n        </property>\n       </widget>\n      </item>"
      },
      {
        "sha": "8ff38052262a1f5ab00428aa597f552c4af010e5",
        "filename": "src/qt/forms/editaddressdialog.ui",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/forms/editaddressdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/forms/editaddressdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/editaddressdialog.ui?ref=70b14636cd60529c87b2cc61516f5d1bf49299a5",
        "patch": "@@ -32,7 +32,7 @@\n      <item row=\"0\" column=\"1\">\n       <widget class=\"QLineEdit\" name=\"labelEdit\">\n        <property name=\"toolTip\">\n-        <string>The label associated with this address book entry</string>\n+        <string>The label associated with this address list entry</string>\n        </property>\n       </widget>\n      </item>\n@@ -49,7 +49,7 @@\n      <item row=\"1\" column=\"1\">\n       <widget class=\"QLineEdit\" name=\"addressEdit\">\n        <property name=\"toolTip\">\n-        <string>The address associated with this address book entry. This can only be modified for sending addresses.</string>\n+        <string>The address associated with this address list entry. This can only be modified for sending addresses.</string>\n        </property>\n       </widget>\n      </item>"
      },
      {
        "sha": "e01a23b9c4469a2d906696a16bde7470f17b8cb1",
        "filename": "src/qt/forms/receivecoinsdialog.ui",
        "status": "modified",
        "additions": 18,
        "deletions": 4,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/forms/receivecoinsdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/forms/receivecoinsdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/receivecoinsdialog.ui?ref=70b14636cd60529c87b2cc61516f5d1bf49299a5",
        "patch": "@@ -30,13 +30,16 @@\n       </widget>\n      </item>\n      <item row=\"3\" column=\"1\">\n-      <widget class=\"BitcoinAmountField\" name=\"reqAmount\" native=\"true\">\n+      <widget class=\"BitcoinAmountField\" name=\"reqAmount\">\n        <property name=\"minimumSize\">\n         <size>\n          <width>80</width>\n          <height>0</height>\n         </size>\n        </property>\n+       <property name=\"toolTip\">\n+        <string>The amount to request</string>\n+       </property>\n       </widget>\n      </item>\n      <item row=\"4\" column=\"0\">\n@@ -50,7 +53,11 @@\n       </widget>\n      </item>\n      <item row=\"4\" column=\"1\">\n-      <widget class=\"QLineEdit\" name=\"reqLabel\"/>\n+      <widget class=\"QLineEdit\" name=\"reqLabel\">\n+       <property name=\"toolTip\">\n+        <string>The label to associate with the receiving address</string>\n+       </property>\n+      </widget>\n      </item>\n      <item row=\"5\" column=\"0\">\n       <widget class=\"QLabel\" name=\"label_3\">\n@@ -63,7 +70,11 @@\n       </widget>\n      </item>\n      <item row=\"5\" column=\"1\">\n-      <widget class=\"QLineEdit\" name=\"reqMessage\"/>\n+      <widget class=\"QLineEdit\" name=\"reqMessage\">\n+       <property name=\"toolTip\">\n+        <string>The message to attach to payment request</string>\n+       </property>\n+      </widget>\n      </item>\n      <item row=\"6\" column=\"0\">\n       <widget class=\"QLabel\" name=\"label_4\">\n@@ -74,8 +85,11 @@\n      </item>\n      <item row=\"6\" column=\"1\">\n       <widget class=\"QCheckBox\" name=\"reuseAddress\">\n+       <property name=\"toolTip\">\n+        <string>Reuse one of the previously used receiving addresses. Reusing addresses has security and privacy issues. Do not use this unless re-generating a payment request made before.</string>\n+       </property>\n        <property name=\"text\">\n-        <string>R&amp;euse an existing receiving address</string>\n+        <string>R&amp;euse an existing receiving address (not recommended)</string>\n        </property>\n       </widget>\n      </item>"
      },
      {
        "sha": "d7724ef91576a43b65975f2202ad06d58c10736c",
        "filename": "src/qt/forms/receiverequestdialog.ui",
        "status": "modified",
        "additions": 69,
        "deletions": 13,
        "changes": 82,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/forms/receiverequestdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/forms/receiverequestdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/receiverequestdialog.ui?ref=70b14636cd60529c87b2cc61516f5d1bf49299a5",
        "patch": "@@ -28,6 +28,9 @@\n        <height>300</height>\n       </size>\n      </property>\n+     <property name=\"toolTip\">\n+      <string>QR Code</string>\n+     </property>\n      <property name=\"textFormat\">\n       <enum>Qt::PlainText</enum>\n      </property>\n@@ -53,6 +56,12 @@\n        <height>50</height>\n       </size>\n      </property>\n+     <property name=\"frameShape\">\n+      <enum>QFrame::NoFrame</enum>\n+     </property>\n+     <property name=\"frameShadow\">\n+      <enum>QFrame::Plain</enum>\n+     </property>\n      <property name=\"tabChangesFocus\">\n       <bool>true</bool>\n      </property>\n@@ -64,22 +73,16 @@\n    <item>\n     <layout class=\"QHBoxLayout\" name=\"horizontalLayout\">\n      <item>\n-      <spacer name=\"horizontalSpacer\">\n-       <property name=\"orientation\">\n-        <enum>Qt::Horizontal</enum>\n-       </property>\n-       <property name=\"sizeHint\" stdset=\"0\">\n-        <size>\n-         <width>40</width>\n-         <height>20</height>\n-        </size>\n+      <widget class=\"QPushButton\" name=\"btnCopyURI\">\n+       <property name=\"text\">\n+        <string>Copy &amp;URI</string>\n        </property>\n-      </spacer>\n+      </widget>\n      </item>\n      <item>\n-      <widget class=\"QPushButton\" name=\"btnCopyURI\">\n+      <widget class=\"QPushButton\" name=\"btnCopyAddress\">\n        <property name=\"text\">\n-        <string>Copy &amp;URI</string>\n+        <string>Copy &amp;Address</string>\n        </property>\n       </widget>\n      </item>\n@@ -97,6 +100,26 @@\n        </property>\n       </widget>\n      </item>\n+     <item>\n+      <spacer name=\"horizontalSpacer_2\">\n+       <property name=\"orientation\">\n+        <enum>Qt::Horizontal</enum>\n+       </property>\n+       <property name=\"sizeHint\" stdset=\"0\">\n+        <size>\n+         <width>40</width>\n+         <height>20</height>\n+        </size>\n+       </property>\n+      </spacer>\n+     </item>\n+     <item>\n+      <widget class=\"QDialogButtonBox\" name=\"buttonBox\">\n+       <property name=\"standardButtons\">\n+        <set>QDialogButtonBox::Close</set>\n+       </property>\n+      </widget>\n+     </item>\n     </layout>\n    </item>\n   </layout>\n@@ -109,5 +132,38 @@\n   </customwidget>\n  </customwidgets>\n  <resources/>\n- <connections/>\n+ <connections>\n+  <connection>\n+   <sender>buttonBox</sender>\n+   <signal>rejected()</signal>\n+   <receiver>ReceiveRequestDialog</receiver>\n+   <slot>reject()</slot>\n+   <hints>\n+    <hint type=\"sourcelabel\">\n+     <x>452</x>\n+     <y>573</y>\n+    </hint>\n+    <hint type=\"destinationlabel\">\n+     <x>243</x>\n+     <y>298</y>\n+    </hint>\n+   </hints>\n+  </connection>\n+  <connection>\n+   <sender>buttonBox</sender>\n+   <signal>accepted()</signal>\n+   <receiver>ReceiveRequestDialog</receiver>\n+   <slot>accept()</slot>\n+   <hints>\n+    <hint type=\"sourcelabel\">\n+     <x>452</x>\n+     <y>573</y>\n+    </hint>\n+    <hint type=\"destinationlabel\">\n+     <x>243</x>\n+     <y>298</y>\n+    </hint>\n+   </hints>\n+  </connection>\n+ </connections>\n </ui>"
      },
      {
        "sha": "db742d633dfc1e10f6bbbbe1d24a5f41c80a57b4",
        "filename": "src/qt/forms/sendcoinsentry.ui",
        "status": "modified",
        "additions": 2,
        "deletions": 3,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/forms/sendcoinsentry.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/forms/sendcoinsentry.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/sendcoinsentry.ui?ref=70b14636cd60529c87b2cc61516f5d1bf49299a5",
        "patch": "@@ -87,7 +87,7 @@\n       <item>\n        <widget class=\"QToolButton\" name=\"addressBookButton\">\n         <property name=\"toolTip\">\n-         <string>Choose address from address book</string>\n+         <string>Choose previously used address</string>\n         </property>\n         <property name=\"text\">\n          <string/>\n@@ -137,7 +137,7 @@\n     <item row=\"4\" column=\"1\">\n      <widget class=\"QValidatedLineEdit\" name=\"addAsLabel\">\n       <property name=\"toolTip\">\n-       <string>Enter a label for this address to add it to your address book</string>\n+       <string>Enter a label for this address to add it to the list of used addresses</string>\n       </property>\n      </widget>\n     </item>\n@@ -674,7 +674,6 @@\n    <class>BitcoinAmountField</class>\n    <extends>QLineEdit</extends>\n    <header>bitcoinamountfield.h</header>\n-   <container>1</container>\n   </customwidget>\n   <customwidget>\n    <class>QValidatedLineEdit</class>"
      },
      {
        "sha": "16cc6c2ea1b31abf7504ea9f6b10b8c9fa7fe98c",
        "filename": "src/qt/forms/signverifymessagedialog.ui",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/forms/signverifymessagedialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/forms/signverifymessagedialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/signverifymessagedialog.ui?ref=70b14636cd60529c87b2cc61516f5d1bf49299a5",
        "patch": "@@ -20,7 +20,7 @@\n    <item>\n     <widget class=\"QTabWidget\" name=\"tabWidget\">\n      <property name=\"currentIndex\">\n-      <number>0</number>\n+      <number>1</number>\n      </property>\n      <widget class=\"QWidget\" name=\"tabSignMessage\">\n       <attribute name=\"title\">\n@@ -58,7 +58,7 @@\n          <item>\n           <widget class=\"QPushButton\" name=\"addressBookButton_SM\">\n            <property name=\"toolTip\">\n-            <string>Choose an address from the address book</string>\n+            <string>Choose previously used address</string>\n            </property>\n            <property name=\"text\">\n             <string/>\n@@ -271,7 +271,7 @@\n          <item>\n           <widget class=\"QPushButton\" name=\"addressBookButton_VM\">\n            <property name=\"toolTip\">\n-            <string>Choose an address from the address book</string>\n+            <string>Choose previously used address</string>\n            </property>\n            <property name=\"text\">\n             <string/>"
      },
      {
        "sha": "cb0a07fcdf73b32692894546f506c7c921f4e3b0",
        "filename": "src/qt/receiverequestdialog.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 2,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/receiverequestdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/receiverequestdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.cpp?ref=70b14636cd60529c87b2cc61516f5d1bf49299a5",
        "patch": "@@ -44,12 +44,15 @@ void QRImageWidget::mousePressEvent(QMouseEvent *event)\n {\n     if(event->button() == Qt::LeftButton)\n     {\n+        event->accept();\n         QMimeData *mimeData = new QMimeData;\n         mimeData->setImageData(exportImage());\n \n         QDrag *drag = new QDrag(this);\n         drag->setMimeData(mimeData);\n         drag->exec();\n+    } else {\n+        QLabel::mousePressEvent(event);\n     }\n }\n \n@@ -119,9 +122,9 @@ void ReceiveRequestDialog::update()\n     ui->btnSaveAs->setEnabled(false);\n     QString html;\n     html += \"<html><font face='verdana, arial, helvetica, sans-serif'>\";\n-    html += \"<a href=\\\"\"+uri+\"\\\">\" + GUIUtil::HtmlEscape(uri) + \"</a><br>\";\n-    html += \"<br>\";\n     html += \"<b>\"+tr(\"Payment information\")+\"</b><br>\";\n+    html += \"<b>\"+tr(\"URI\")+\"</b>: \";\n+    html += \"<a href=\\\"\"+uri+\"\\\">\" + GUIUtil::HtmlEscape(uri) + \"</a><br>\";\n     html += \"<b>\"+tr(\"Address\")+\"</b>: \" + GUIUtil::HtmlEscape(info.address) + \"<br>\";\n     if(info.amount)\n         html += \"<b>\"+tr(\"Amount\")+\"</b>: \" + BitcoinUnits::formatWithUnit(model->getDisplayUnit(), info.amount) + \"<br>\";\n@@ -173,3 +176,8 @@ void ReceiveRequestDialog::on_btnCopyURI_clicked()\n     QApplication::clipboard()->setText(uri, QClipboard::Selection);\n }\n \n+void ReceiveRequestDialog::on_btnCopyAddress_clicked()\n+{\n+    QApplication::clipboard()->setText(info.address, QClipboard::Clipboard);\n+    QApplication::clipboard()->setText(info.address, QClipboard::Selection);\n+}"
      },
      {
        "sha": "1beb873dfda4d5840d8de0b0c8140d07834f5076",
        "filename": "src/qt/receiverequestdialog.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/receiverequestdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/70b14636cd60529c87b2cc61516f5d1bf49299a5/src/qt/receiverequestdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.h?ref=70b14636cd60529c87b2cc61516f5d1bf49299a5",
        "patch": "@@ -44,6 +44,7 @@ class ReceiveRequestDialog : public QDialog\n \n private slots:\n     void on_btnCopyURI_clicked();\n+    void on_btnCopyAddress_clicked();\n \n     void update();\n "
      }
    ]
  }
]