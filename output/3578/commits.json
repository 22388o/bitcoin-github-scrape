[
  {
    "sha": "fd67424c829b9bb0ed7f4a53040524c560262810",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmZDY3NDI0YzgyOWI5YmIwZWQ3ZjRhNTMwNDA1MjRjNTYwMjYyODEw",
    "commit": {
      "author": {
        "name": "Gavin Andresen",
        "email": "gavinandresen@gmail.com",
        "date": "2014-01-23T19:18:26Z"
      },
      "committer": {
        "name": "Gavin Andresen",
        "email": "gavinandresen@gmail.com",
        "date": "2014-01-24T15:47:29Z"
      },
      "message": "Unit test fixes for AssertLockHeld / -DDEBUG_LOCKORDER\n\nUnit tests would fail if compiled with -DDEBUG_LOCKORDER (AssertLockHeld()\nwould fail; AssertLockHeld() relies on the DEBUG_LOCKORDER code to keep\ntrack of locks held).\n\nFixed by LOCK'ing the wallet mutex in the unit tests that manipulate the\nwallet.",
      "tree": {
        "sha": "49585a6d81c8bd6fe625d49f8a4eee318a3d6da6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/49585a6d81c8bd6fe625d49f8a4eee318a3d6da6"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fd67424c829b9bb0ed7f4a53040524c560262810",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fd67424c829b9bb0ed7f4a53040524c560262810",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fd67424c829b9bb0ed7f4a53040524c560262810",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fd67424c829b9bb0ed7f4a53040524c560262810/comments",
    "author": {
      "login": "gavinandresen",
      "id": 331997,
      "node_id": "MDQ6VXNlcjMzMTk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/331997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavinandresen",
      "html_url": "https://github.com/gavinandresen",
      "followers_url": "https://api.github.com/users/gavinandresen/followers",
      "following_url": "https://api.github.com/users/gavinandresen/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavinandresen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavinandresen/subscriptions",
      "organizations_url": "https://api.github.com/users/gavinandresen/orgs",
      "repos_url": "https://api.github.com/users/gavinandresen/repos",
      "events_url": "https://api.github.com/users/gavinandresen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavinandresen/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "gavinandresen",
      "id": 331997,
      "node_id": "MDQ6VXNlcjMzMTk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/331997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavinandresen",
      "html_url": "https://github.com/gavinandresen",
      "followers_url": "https://api.github.com/users/gavinandresen/followers",
      "following_url": "https://api.github.com/users/gavinandresen/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavinandresen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavinandresen/subscriptions",
      "organizations_url": "https://api.github.com/users/gavinandresen/orgs",
      "repos_url": "https://api.github.com/users/gavinandresen/repos",
      "events_url": "https://api.github.com/users/gavinandresen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavinandresen/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d0a94f2c2f127768acd9be4c0905d40f609ba6fc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d0a94f2c2f127768acd9be4c0905d40f609ba6fc",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d0a94f2c2f127768acd9be4c0905d40f609ba6fc"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 11,
      "deletions": 0
    },
    "files": [
      {
        "sha": "bfdb95927b3dce10e9a72cee212159a6fe2c898b",
        "filename": "src/test/accounting_tests.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fd67424c829b9bb0ed7f4a53040524c560262810/src/test/accounting_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fd67424c829b9bb0ed7f4a53040524c560262810/src/test/accounting_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/accounting_tests.cpp?ref=fd67424c829b9bb0ed7f4a53040524c560262810",
        "patch": "@@ -34,6 +34,8 @@ BOOST_AUTO_TEST_CASE(acc_orderupgrade)\n     CAccountingEntry ae;\n     std::map<int64_t, CAccountingEntry> results;\n \n+    LOCK(pwalletMain->cs_wallet);\n+\n     ae.strAccount = \"\";\n     ae.nCreditDebit = 1;\n     ae.nTime = 1333333333;"
      },
      {
        "sha": "628ba95067656fd42978ba3ed318a6eca03cc0b0",
        "filename": "src/test/rpc_wallet_tests.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fd67424c829b9bb0ed7f4a53040524c560262810/src/test/rpc_wallet_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fd67424c829b9bb0ed7f4a53040524c560262810/src/test/rpc_wallet_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/rpc_wallet_tests.cpp?ref=fd67424c829b9bb0ed7f4a53040524c560262810",
        "patch": "@@ -2,6 +2,7 @@\n #include \"rpcclient.h\"\n \n #include \"base58.h\"\n+#include \"wallet.h\"\n \n #include <boost/algorithm/string.hpp>\n #include <boost/test/unit_test.hpp>\n@@ -12,10 +13,14 @@ using namespace json_spirit;\n extern Array createArgs(int nRequired, const char* address1=NULL, const char* address2=NULL);\n extern Value CallRPC(string args);\n \n+extern CWallet* pwalletMain;\n+\n BOOST_AUTO_TEST_SUITE(rpc_wallet_tests)\n \n BOOST_AUTO_TEST_CASE(rpc_addmultisig)\n {\n+    LOCK(pwalletMain->cs_wallet);\n+\n     rpcfn_type addmultisig = tableRPC[\"addmultisigaddress\"]->actor;\n \n     // old, 65-byte-long:\n@@ -56,6 +61,8 @@ BOOST_AUTO_TEST_CASE(rpc_wallet)\n     // Test RPC calls for various wallet statistics\n     Value r;\n \n+    LOCK(pwalletMain->cs_wallet);\n+\n     BOOST_CHECK_NO_THROW(CallRPC(\"listunspent\"));\n     BOOST_CHECK_THROW(CallRPC(\"listunspent string\"), runtime_error);\n     BOOST_CHECK_THROW(CallRPC(\"listunspent 0 string\"), runtime_error);"
      },
      {
        "sha": "bd0517ae081818884b691a96410e1389a966c478",
        "filename": "src/test/wallet_tests.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fd67424c829b9bb0ed7f4a53040524c560262810/src/test/wallet_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fd67424c829b9bb0ed7f4a53040524c560262810/src/test/wallet_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/wallet_tests.cpp?ref=fd67424c829b9bb0ed7f4a53040524c560262810",
        "patch": "@@ -62,6 +62,8 @@ BOOST_AUTO_TEST_CASE(coin_selection_tests)\n     CoinSet setCoinsRet, setCoinsRet2;\n     int64_t nValueRet;\n \n+    LOCK(wallet.cs_wallet);\n+\n     // test multiple times to allow for differences in the shuffle order\n     for (int i = 0; i < RUN_TESTS; i++)\n     {"
      }
    ]
  }
]