jamesob,2018-05-03T18:38:35Z,"utACK https://github.com/bitcoin/bitcoin/pull/13161/commits/264c64380978d7b0bd3ecb56a861eb004cc58b01\n\nNice first contribution.",https://github.com/bitcoin/bitcoin/pull/13161#issuecomment-386395541,386395541,
fanquake,2018-05-04T03:30:38Z,"Concept ACK. \n@real-or-random  What are you doing to simulate an issue with the database?",https://github.com/bitcoin/bitcoin/pull/13161#issuecomment-386497845,386497845,
real-or-random,2018-05-05T10:43:40Z,"Oh it was not simulated, the error was real. The log file says\n```\nUnacceptable log file /home/tim/.bitcoin/database/log.0000000001: unsupported log version 19\nInvalid log file: log.0000000001: Invalid argument\nPANIC: Invalid argument\nprocess-private: unable to find environment\n```\n(I guess the last line appeared only later after bitcoind moved away the database directory.)\nAny ide",https://github.com/bitcoin/bitcoin/pull/13161#issuecomment-386796509,386796509,
real-or-random,2018-05-07T12:38:44Z,"Not really related but I think I know what caused the database error: The wallet was initially created with the official Arch Linux version, which is configured `--with-incompatible-bdb` (I didn't know that), and then I tried to open the wallet with a version built against bdb 4.8. ",https://github.com/bitcoin/bitcoin/pull/13161#issuecomment-387051479,387051479,
ryanofsky,2018-05-08T15:18:53Z,"Would a simpler fix just be to drop the `dbenv->close(0);` line? Adding more initialization steps and  resetting fDbEnvInit and fMockDb members would seem to make the retry code a little more convoluted than it needs to be. It also doesn't seem good that the `close` return value isn't checked and nothing is logged if it failed (also true before this PR).\n\nI also wonder if we could add a unit t",https://github.com/bitcoin/bitcoin/pull/13161#issuecomment-387439202,387439202,
real-or-random,2018-05-09T11:36:52Z,"The documentation says we need the close():\n > If DbEnv::open() fails, the DbEnv::close() method must be called to discard the DbEnv handle.\n(see https://docs.oracle.com/cd/E17275_01/html/api_reference/CXX/envopen.html)\n\nI've added proper logging if the close() fails.\n\nI'm not sure if a test is that helpful but I can certainly add one if people think it's a good idea.",https://github.com/bitcoin/bitcoin/pull/13161#issuecomment-387710542,387710542,
sipa,2018-05-09T17:20:59Z,Concept ACK,https://github.com/bitcoin/bitcoin/pull/13161#issuecomment-387812254,387812254,
laanwj,2018-05-14T13:06:28Z,utACK b6f0b4d8595df0241a6499cd57e7ddac56558bf1,https://github.com/bitcoin/bitcoin/pull/13161#issuecomment-388809546,388809546,
hbxia,2018-05-25T03:53:19Z,"Hi Tim, I still meet the similar issue with the latest code (already has your fix):\n\n2018-05-25T02:14:01Z HTTP: creating work queue of depth 16\n2018-05-25T02:14:01Z No rpcpassword set - using random cookie authentication\n2018-05-25T02:14:01Z Generated RPC authentication cookie /root/.bitcoin/.cookie\n2018-05-25T02:14:01Z HTTP: starting 4 worker threads\n2018-05-25T02:14:01Z Using wallet ",https://github.com/bitcoin/bitcoin/pull/13161#issuecomment-391933702,391933702,
real-or-random,2018-05-25T07:27:29Z,"Hm, your problem should not be related to this pull request.\n\nThese are the build instructions:\nhttps://github.com/bitcoin/bitcoin/blob/master/doc/build-unix.md#linux-distribution-specific-instructions\nIf you still encounter the problem, I'd recommend you to open a new issue and paste the contents of the ErrorFile as mentioned in the log.",https://github.com/bitcoin/bitcoin/pull/13161#issuecomment-391966646,391966646,
hbxia,2018-05-25T08:33:28Z,"Tim, thanks for your info. My current work around is to disable wallet ""./configure --disable-wallet"", because I do not need it so far.",https://github.com/bitcoin/bitcoin/pull/13161#issuecomment-391982361,391982361,
