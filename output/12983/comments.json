[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381270099",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12983#issuecomment-381270099",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12983",
    "id": 381270099,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTI3MDA5OQ==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-13T21:55:02Z",
    "updated_at": "2018-04-13T21:55:09Z",
    "author_association": "MEMBER",
    "body": "I will add listtransaction test soon.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381270099/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381364350",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12983#issuecomment-381364350",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12983",
    "id": 381364350,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTM2NDM1MA==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-14T22:12:02Z",
    "updated_at": "2018-04-14T22:30:06Z",
    "author_association": "MEMBER",
    "body": "pushed a test that covered a corner case this fixes\r\n\r\nI realize the test itself carries a comment describing yet another corner case I've stumbled on that doesn't have any super easy fix. For the purposes of the testing what we care about I just set `keypool=2` for a single node near the end of the test, but I could also just have the entire test with this setting, as it changes nothing about the overarching tests in place.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381364350/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381906265",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12983#issuecomment-381906265",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12983",
    "id": 381906265,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTkwNjI2NQ==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-17T08:52:16Z",
    "updated_at": "2018-04-17T08:52:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "utACK 843e07cd5ffb4c9f8d73ef0e2aeed03303122a5b\r\nSeems to not create any performance impacts.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381906265/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/386468510",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12983#issuecomment-386468510",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12983",
    "id": 386468510,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjQ2ODUxMA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-03T23:39:51Z",
    "updated_at": "2018-05-03T23:39:51Z",
    "author_association": "MEMBER",
    "body": "I'm afraid this is not sufficient. It's possible to import change keys/addresses using `importmulti` (see the \"internal\" field); these aren't identified by having a change-like keypath. Furthermore, this approach will become even less reliable if it's possible to upgrade from pre-hd or pre-hdsplit wallets, as the old keys should remain being treated as change.\r\n\r\nYou could use being present in a change-like key path as a shortcut still and fall back to the other mechanism otherwise, but I doubt that's very useful.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/386468510/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/386485701",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12983#issuecomment-386485701",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12983",
    "id": 386485701,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjQ4NTcwMQ==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-04T01:39:07Z",
    "updated_at": "2018-05-04T01:39:07Z",
    "author_association": "MEMBER",
    "body": "@sipa actually that suggestion is just fine for my needs, even if you aren't too excited about it.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/386485701/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/387493460",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12983#issuecomment-387493460",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12983",
    "id": 387493460,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzQ5MzQ2MA==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-08T18:13:44Z",
    "updated_at": "2018-05-08T18:13:44Z",
    "author_association": "MEMBER",
    "body": "oh hmm, I see why now. I'll just carry it downstream for now.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/387493460/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181998293",
    "pull_request_review_id": 112718999,
    "id": 181998293,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTk5ODI5Mw==",
    "diff_hunk": "@@ -1327,22 +1327,31 @@ CAmount CWallet::GetCredit(const CTxOut& txout, const isminefilter& filter) cons\n \n bool CWallet::IsChange(const CTxOut& txout) const\n {\n-    // TODO: fix handling of 'change' outputs. The assumption is that any\n-    // payment to a script that is ours, but is not in the address book\n-    // is change. That assumption is likely to break when we implement multisignature\n-    // wallets that return change back into a multi-signature-protected address;\n-    // a better way of identifying which outputs are 'the send' and which are\n-    // 'the change' will need to be implemented (maybe extend CWalletTx to remember\n-    // which output, if any, was change).\n     if (::IsMine(*this, txout.scriptPubKey))\n     {\n-        CTxDestination address;\n-        if (!ExtractDestination(txout.scriptPubKey, address))\n+        CTxDestination dest;\n+        if (!ExtractDestination(txout.scriptPubKey, dest))\n             return true;\n \n         LOCK(cs_wallet);\n-        if (!mapAddressBook.count(address))\n-            return true;\n+        // HD Split assumes keypath of m/.../1(')/k\n+        if (CanSupportFeature(FEATURE_HD_SPLIT)) {\n+            CKeyID key_id = GetKeyForDestination(*this, dest);\n+            if (!key_id.IsNull()) {\n+                auto it = mapKeyMetadata.find(key_id);\n+                if (it != mapKeyMetadata.end()) {\n+                    // Check for path\n+                    if (it->second.hdKeypath.find(\"m/0'/1'/\") != std::string::npos) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 29,
    "commit_id": "10b18f48d40d1f7f597914151f630cc237cd1908",
    "original_commit_id": "843e07cd5ffb4c9f8d73ef0e2aeed03303122a5b",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Not for this PR, but we should probably factor out the static key path strings... maybe add a `IsChangeKeypath()`.",
    "created_at": "2018-04-17T08:51:29Z",
    "updated_at": "2018-05-08T16:21:42Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12983#discussion_r181998293",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12983",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181998293"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12983#discussion_r181998293"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12983"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181998293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1344,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/182085017",
    "pull_request_review_id": 112825283,
    "id": 182085017,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MjA4NTAxNw==",
    "diff_hunk": "@@ -1327,22 +1327,31 @@ CAmount CWallet::GetCredit(const CTxOut& txout, const isminefilter& filter) cons\n \n bool CWallet::IsChange(const CTxOut& txout) const\n {\n-    // TODO: fix handling of 'change' outputs. The assumption is that any\n-    // payment to a script that is ours, but is not in the address book\n-    // is change. That assumption is likely to break when we implement multisignature\n-    // wallets that return change back into a multi-signature-protected address;\n-    // a better way of identifying which outputs are 'the send' and which are\n-    // 'the change' will need to be implemented (maybe extend CWalletTx to remember\n-    // which output, if any, was change).\n     if (::IsMine(*this, txout.scriptPubKey))\n     {\n-        CTxDestination address;\n-        if (!ExtractDestination(txout.scriptPubKey, address))\n+        CTxDestination dest;\n+        if (!ExtractDestination(txout.scriptPubKey, dest))\n             return true;\n \n         LOCK(cs_wallet);\n-        if (!mapAddressBook.count(address))\n-            return true;\n+        // HD Split assumes keypath of m/.../1(')/k\n+        if (CanSupportFeature(FEATURE_HD_SPLIT)) {\n+            CKeyID key_id = GetKeyForDestination(*this, dest);\n+            if (!key_id.IsNull()) {\n+                auto it = mapKeyMetadata.find(key_id);\n+                if (it != mapKeyMetadata.end()) {\n+                    // Check for path\n+                    if (it->second.hdKeypath.find(\"m/0'/1'/\") != std::string::npos) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 29,
    "commit_id": "10b18f48d40d1f7f597914151f630cc237cd1908",
    "original_commit_id": "843e07cd5ffb4c9f8d73ef0e2aeed03303122a5b",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, I think we should be more systematic about our keypath string handling; would make it easier for people like me with various wallet forks and for Core as we move forward with additional derivation features.",
    "created_at": "2018-04-17T14:06:17Z",
    "updated_at": "2018-05-08T16:21:42Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12983#discussion_r182085017",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12983",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/182085017"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12983#discussion_r182085017"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12983"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/182085017/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1344,
    "side": "RIGHT",
    "in_reply_to_id": 181998293
  }
]