[
  {
    "sha": "bcab47bc1b2bfdd29f8b89f8a211755299938aea",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiY2FiNDdiYzFiMmJmZGQyOWY4Yjg5ZjhhMjExNzU1Mjk5OTM4YWVh",
    "commit": {
      "author": {
        "name": "Kevin Pan",
        "email": "bit.kevin@gmail.com",
        "date": "2018-03-16T05:40:50Z"
      },
      "committer": {
        "name": "Kevin Pan",
        "email": "bit.kevin@gmail.com",
        "date": "2018-03-21T03:57:57Z"
      },
      "message": "use base58 map instead of strchr()",
      "tree": {
        "sha": "fc38e72e16bf81f38584c8dba718270e4bfc009c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fc38e72e16bf81f38584c8dba718270e4bfc009c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bcab47bc1b2bfdd29f8b89f8a211755299938aea",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bcab47bc1b2bfdd29f8b89f8a211755299938aea",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/bcab47bc1b2bfdd29f8b89f8a211755299938aea",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bcab47bc1b2bfdd29f8b89f8a211755299938aea/comments",
    "author": {
      "login": "bitkevin",
      "id": 514951,
      "node_id": "MDQ6VXNlcjUxNDk1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/514951?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bitkevin",
      "html_url": "https://github.com/bitkevin",
      "followers_url": "https://api.github.com/users/bitkevin/followers",
      "following_url": "https://api.github.com/users/bitkevin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bitkevin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bitkevin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bitkevin/subscriptions",
      "organizations_url": "https://api.github.com/users/bitkevin/orgs",
      "repos_url": "https://api.github.com/users/bitkevin/repos",
      "events_url": "https://api.github.com/users/bitkevin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bitkevin/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "bitkevin",
      "id": 514951,
      "node_id": "MDQ6VXNlcjUxNDk1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/514951?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bitkevin",
      "html_url": "https://github.com/bitkevin",
      "followers_url": "https://api.github.com/users/bitkevin/followers",
      "following_url": "https://api.github.com/users/bitkevin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bitkevin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bitkevin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bitkevin/subscriptions",
      "organizations_url": "https://api.github.com/users/bitkevin/orgs",
      "repos_url": "https://api.github.com/users/bitkevin/repos",
      "events_url": "https://api.github.com/users/bitkevin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bitkevin/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7be9a9a570c1140048f8781ced1111e1d930e517",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7be9a9a570c1140048f8781ced1111e1d930e517",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7be9a9a570c1140048f8781ced1111e1d930e517"
      }
    ],
    "stats": {
      "total": 29,
      "additions": 24,
      "deletions": 5
    },
    "files": [
      {
        "sha": "feec2d4e052d3098c76026495388bc0dd57ff48c",
        "filename": "src/base58.cpp",
        "status": "modified",
        "additions": 21,
        "deletions": 4,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/bcab47bc1b2bfdd29f8b89f8a211755299938aea/src/base58.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/bcab47bc1b2bfdd29f8b89f8a211755299938aea/src/base58.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/base58.cpp?ref=bcab47bc1b2bfdd29f8b89f8a211755299938aea",
        "patch": "@@ -12,6 +12,24 @@\n \n /** All alphanumeric characters except for \"0\", \"I\", \"O\", and \"l\" */\n static const char* pszBase58 = \"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\";\n+static const int8_t mapBase58[256] = {\n+    -1,-1,-1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1,-1,-1,\n+    -1,-1,-1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1,-1,-1,\n+    -1,-1,-1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1,-1,-1,\n+    -1, 0, 1, 2, 3, 4, 5, 6,  7, 8,-1,-1,-1,-1,-1,-1,\n+    -1, 9,10,11,12,13,14,15, 16,-1,17,18,19,20,21,-1,\n+    22,23,24,25,26,27,28,29, 30,31,32,-1,-1,-1,-1,-1,\n+    -1,33,34,35,36,37,38,39, 40,41,42,43,-1,44,45,46,\n+    47,48,49,50,51,52,53,54, 55,56,57,-1,-1,-1,-1,-1,\n+    -1,-1,-1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1,-1,-1,\n+    -1,-1,-1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1,-1,-1,\n+    -1,-1,-1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1,-1,-1,\n+    -1,-1,-1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1,-1,-1,\n+    -1,-1,-1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1,-1,-1,\n+    -1,-1,-1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1,-1,-1,\n+    -1,-1,-1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1,-1,-1,\n+    -1,-1,-1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1,-1,-1,\n+};\n \n bool DecodeBase58(const char* psz, std::vector<unsigned char>& vch)\n {\n@@ -29,13 +47,12 @@ bool DecodeBase58(const char* psz, std::vector<unsigned char>& vch)\n     int size = strlen(psz) * 733 /1000 + 1; // log(58) / log(256), rounded up.\n     std::vector<unsigned char> b256(size);\n     // Process the characters.\n+    static_assert(sizeof(mapBase58)/sizeof(mapBase58[0]) == 256, \"mapBase58.size() should be 256\"); // guarantee not out of range\n     while (*psz && !isspace(*psz)) {\n         // Decode base58 character\n-        const char* ch = strchr(pszBase58, *psz);\n-        if (ch == nullptr)\n+        int carry = mapBase58[(uint8_t)*psz];\n+        if (carry == -1)  // Invalid b58 character\n             return false;\n-        // Apply \"b256 = b256 * 58 + ch\".\n-        int carry = ch - pszBase58;\n         int i = 0;\n         for (std::vector<unsigned char>::reverse_iterator it = b256.rbegin(); (carry != 0 || i < length) && (it != b256.rend()); ++it, ++i) {\n             carry += 58 * (*it);"
      },
      {
        "sha": "1a4bd7f458418d0236afb99d51c953c60afff8bb",
        "filename": "src/test/data/base58_encode_decode.json",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/bcab47bc1b2bfdd29f8b89f8a211755299938aea/src/test/data/base58_encode_decode.json",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/bcab47bc1b2bfdd29f8b89f8a211755299938aea/src/test/data/base58_encode_decode.json",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/data/base58_encode_decode.json?ref=bcab47bc1b2bfdd29f8b89f8a211755299938aea",
        "patch": "@@ -10,5 +10,7 @@\n [\"572e4794\", \"3EFU7m\"],\n [\"ecac89cad93923c02321\", \"EJDM8drfXA6uyA\"],\n [\"10c8511e\", \"Rt5zm\"],\n-[\"00000000000000000000\", \"1111111111\"]\n+[\"00000000000000000000\", \"1111111111\"],\n+[\"000111d38e5fc9071ffcd20b4a763cc9ae4f252bb4e48fd66a835e252ada93ff480d6dd43dc62a641155a5\", \"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\"],\n+[\"000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f404142434445464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f707172737475767778797a7b7c7d7e7f808182838485868788898a8b8c8d8e8f909192939495969798999a9b9c9d9e9fa0a1a2a3a4a5a6a7a8a9aaabacadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff\", \"1cWB5HCBdLjAuqGGReWE3R3CguuwSjw6RHn39s2yuDRTS5NsBgNiFpWgAnEx6VQi8csexkgYw3mdYrMHr8x9i7aEwP8kZ7vccXWqKDvGv3u1GxFKPuAkn8JCPPGDMf3vMMnbzm6Nh9zh1gcNsMvH3ZNLmP5fSG6DGbbi2tuwMWPthr4boWwCxf7ewSgNQeacyozhKDDQQ1qL5fQFUW52QKUZDZ5fw3KXNQJMcNTcaB723LchjeKun7MuGW5qyCBZYzA1KjofN1gYBV3NqyhQJ3Ns746GNuf9N2pQPmHz4xpnSrrfCvy6TVVz5d4PdrjeshsWQwpZsZGzvbdAdN8MKV5QsBDY\"]\n ]"
      }
    ]
  }
]