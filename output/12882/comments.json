[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381512869",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-381512869",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 381512869,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTUxMjg2OQ==",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?u=a0e0040aacd7d4f0787481e8ac30b494fa429e11&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-16T07:59:05Z",
    "updated_at": "2018-04-16T07:59:05Z",
    "author_association": "MEMBER",
    "body": "@practicalswift Can you include some more information about recreating this? I've done a naive:\r\n```\r\n./autogen.sh && ./configure --with-sanitizers=thread && make check -j6\r\n```\r\n(macOS 10.13.4 with XCode 9.3) and am having trouble recreating the issue.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381512869/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381530619",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-381530619",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 381530619,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTUzMDYxOQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-16T09:04:43Z",
    "updated_at": "2018-04-16T09:19:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "@fanquake I just verified using clang version 7.0.0 (trunk) under Linux using the following commands:\r\n\r\n```\r\n$ git clone https://github.com/bitcoin/bitcoin\r\n$ cd bitcoin/\r\n$ ./autogen.sh\r\n$ CC=clang-7 CXX=clang++-7 ./configure --disable-asm --enable-debug --with-sanitizers=thread --disable-wallet\r\n$ make check\r\n\u2026\r\nSUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (/root/repro/bitcoin/src/test/test_bitcoin+0xc5897) in pthread_mutex_lock\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381530619/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381722069",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-381722069",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 381722069,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTcyMjA2OQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-16T19:32:08Z",
    "updated_at": "2018-04-16T19:32:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sipa As a fellow friend of the sanitizers (#9743, #9512), would you mind reviewing this one? :-)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381722069/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381730803",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-381730803",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 381730803,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTczMDgwMw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-16T20:02:03Z",
    "updated_at": "2018-04-16T20:02:03Z",
    "author_association": "MEMBER",
    "body": "It could help reviewers if you explained why it is a deadlock in the OP and then also describe why your patch fixes it.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381730803/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381739345",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-381739345",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 381739345,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTczOTM0NQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-16T20:31:57Z",
    "updated_at": "2018-04-16T20:37:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MarcoFalke Ah, sorry: the reason for the potential deadlock warning (lock-order-inversion) is simply that the lock order between `cs_main` and `foo->cs_sendProcessing` differed between tests prior to this commit.\r\n\r\nAfter this commit the following lock order is used:\r\n\r\n```\r\n1. LOCK(cs_main);\r\n2. LOCK(foo->cs_sendProcessing);\r\n```\r\n\r\nPrior to this commit the following lock order was also used:\r\n\r\n```\r\n1. LOCK(foo->cs_sendProcessing);\r\n2. LOCK(cs_main);\r\n```\r\n\r\nThis is part of the `-fsanitize=thread` output:\r\n\r\n```\r\nWARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=20357)\r\n  Cycle in lock order graph: M6554537 (0x55cf759864f8) => M453033967624932984 (0x000000000000) => M6554537\r\n\r\n  Mutex M453033967624932984 acquired here while holding mutex M6554537 in main thread:\r\n  \u2026\r\n    #8 DoS_tests::outbound_slow_chain_eviction::test_method() /\u2026/bitcoin/src/test/DoS_tests.cpp:74:5 (test_bitcoin+0x376064)\r\n    #9 DoS_tests::outbound_slow_chain_eviction_invoker() /\u2026/bitcoin/src/test/DoS_tests.cpp:55:1 (test_bitcoin+0x375782)\r\n  \u2026\r\n  Mutex M6554537 acquired here while holding mutex M453033967624932984 in main thread:\r\n  \u2026\r\n    #8 PeerLogicValidation::InitializeNode(CNode*) /\u2026/bitcoin/src/net_processing.cpp:581:9 (test_bitcoin+0x8b955c)\r\n    #9 DoS_tests::DoS_banning::test_method() /\u2026/bitcoin/src/test/DoS_tests.cpp:201:16 (test_bitcoin+0x379a18)\r\n    #10 DoS_tests::DoS_banning_invoker() /\u2026/bitcoin/src/test/DoS_tests.cpp:178:1 (test_bitcoin+0x378e42)\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381739345/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381843635",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-381843635",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 381843635,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTg0MzYzNQ==",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?u=a0e0040aacd7d4f0787481e8ac30b494fa429e11&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-17T05:08:31Z",
    "updated_at": "2018-04-17T05:08:31Z",
    "author_association": "MEMBER",
    "body": "Thanks @practicalswift.\r\nI've recreated the potential deadlock on Ubuntu using clang 6.0.0-1ubuntu2 (tags/RELEASE_600/final):\r\n```\r\nRunning tests: DoS_tests from test/DoS_tests.cpp\r\nRunning 6 test cases...\r\nEntering test module \"Bitcoin Test Suite\"\r\ntest/DoS_tests.cpp(45): Entering test suite \"DoS_tests\"\r\ntest/DoS_tests.cpp(55): Entering test case \"outbound_slow_chain_eviction\"\r\ntest/DoS_tests.cpp(55): Leaving test case \"outbound_slow_chain_eviction\"; testing time: 320057us\r\ntest/DoS_tests.cpp(109): Entering test case \"stale_tip_peer_management\"\r\ntest/DoS_tests.cpp(109): Leaving test case \"stale_tip_peer_management\"; testing time: 254718us\r\ntest/DoS_tests.cpp(178): Entering test case \"DoS_banning\"\r\n==================\r\nWARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=14733)\r\n  Cycle in lock order graph: M131611 (0x556f72060500) => M131679 (0x7ffe31689738) => M131611\r\n\r\n  Mutex M131679 acquired here while holding mutex M131611 in main thread:\r\n    #0 pthread_mutex_lock ??:? (test_bitcoin+0xcb457)\r\n    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/x86_64-linux-gnu/c++/8.0.1/bits/gthr-default.h:748 (test_bitcoin+0x158dc3)\r\n    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/x86_64-linux-gnu/c++/8.0.1/bits/gthr-default.h:810 (test_bitcoin+0x158d45)\r\n    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/mutex:107 (test_bitcoin+0x15e415)\r\n    #4 AnnotatedMixin<std::recursive_mutex>::lock() /home/ubuntu/bitcoin/src/./sync.h:59 (test_bitcoin+0x15e395)\r\n    #5 std::unique_lock<CCriticalSection>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/bits/std_mutex.h:267 (test_bitcoin+0x15e2fe)\r\n    #6 CCriticalBlock::Enter(char const*, char const*, int) /home/ubuntu/bitcoin/src/./sync.h:128 (test_bitcoin+0x15de07)\r\n    #7 CCriticalBlock /home/ubuntu/bitcoin/src/./sync.h:149 (test_bitcoin+0x1597c7)\r\n    #8 DoS_tests::outbound_slow_chain_eviction::test_method() /home/ubuntu/bitcoin/src/test/DoS_tests.cpp:74 (test_bitcoin+0x3a90a3)\r\n    #9 DoS_tests::outbound_slow_chain_eviction_invoker() /home/ubuntu/bitcoin/src/test/DoS_tests.cpp:55 (test_bitcoin+0x3a863e)\r\n    #10 boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) /usr/include/boost/function/function_template.hpp:118 (test_bitcoin+0x1dde4a)\r\n    #11 boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) ??:? (libboost_unit_test_framework.so.1.65.1+0x4b2cd)\r\n    #12 __libc_start_main ??:? (libc.so.6+0x21b96)\r\n\r\n    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message\r\n\r\n  Mutex M131611 acquired here while holding mutex M131679 in main thread:\r\n    #0 pthread_mutex_lock ??:? (test_bitcoin+0xcb457)\r\n    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/x86_64-linux-gnu/c++/8.0.1/bits/gthr-default.h:748 (test_bitcoin+0x158dc3)\r\n    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/x86_64-linux-gnu/c++/8.0.1/bits/gthr-default.h:810 (test_bitcoin+0x158d45)\r\n    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/mutex:107 (test_bitcoin+0x15e415)\r\n    #4 AnnotatedMixin<std::recursive_mutex>::lock() /home/ubuntu/bitcoin/src/./sync.h:59 (test_bitcoin+0x15e395)\r\n    #5 std::unique_lock<CCriticalSection>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/bits/std_mutex.h:267 (test_bitcoin+0x15e2fe)\r\n    #6 CCriticalBlock::Enter(char const*, char const*, int) /home/ubuntu/bitcoin/src/./sync.h:128 (test_bitcoin+0x15de07)\r\n    #7 CCriticalBlock /home/ubuntu/bitcoin/src/./sync.h:149 (test_bitcoin+0x1597c7)\r\n    #8 PeerLogicValidation::InitializeNode(CNode*) /home/ubuntu/bitcoin/src/net_processing.cpp:583 (test_bitcoin+0x92b76c)\r\n    #9 DoS_tests::DoS_banning::test_method() /home/ubuntu/bitcoin/src/test/DoS_tests.cpp:201 (test_bitcoin+0x3acf87)\r\n    #10 DoS_tests::DoS_banning_invoker() /home/ubuntu/bitcoin/src/test/DoS_tests.cpp:178 (test_bitcoin+0x3ac22e)\r\n    #11 boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) /usr/include/boost/function/function_template.hpp:118 (test_bitcoin+0x1dde4a)\r\n    #12 boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) ??:? (libboost_unit_test_framework.so.1.65.1+0x4b2cd)\r\n    #13 __libc_start_main ??:? (libc.so.6+0x21b96)\r\n\r\nSUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) ??:? in pthread_mutex_lock\r\n==================\r\n==================\r\nWARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=14733)\r\n  Cycle in lock order graph: M131611 (0x556f72060500) => M131679 (0x7ffe31689738) => M131611\r\n\r\n  Mutex M131679 acquired here while holding mutex M131611 in main thread:\r\n    #0 pthread_mutex_lock ??:? (test_bitcoin+0xcb457)\r\n    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/x86_64-linux-gnu/c++/8.0.1/bits/gthr-default.h:748 (test_bitcoin+0x158dc3)\r\n    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/x86_64-linux-gnu/c++/8.0.1/bits/gthr-default.h:810 (test_bitcoin+0x158d45)\r\n    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/mutex:107 (test_bitcoin+0x15e415)\r\n    #4 AnnotatedMixin<std::recursive_mutex>::lock() /home/ubuntu/bitcoin/src/./sync.h:59 (test_bitcoin+0x15e395)\r\n    #5 std::unique_lock<CCriticalSection>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/bits/std_mutex.h:267 (test_bitcoin+0x15e2fe)\r\n    #6 CCriticalBlock::Enter(char const*, char const*, int) /home/ubuntu/bitcoin/src/./sync.h:128 (test_bitcoin+0x15de07)\r\n    #7 CCriticalBlock /home/ubuntu/bitcoin/src/./sync.h:149 (test_bitcoin+0x1597c7)\r\n    #8 DoS_tests::outbound_slow_chain_eviction::test_method() /home/ubuntu/bitcoin/src/test/DoS_tests.cpp:74 (test_bitcoin+0x3a90a3)\r\n    #9 DoS_tests::outbound_slow_chain_eviction_invoker() /home/ubuntu/bitcoin/src/test/DoS_tests.cpp:55 (test_bitcoin+0x3a863e)\r\n    #10 boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) /usr/include/boost/function/function_template.hpp:118 (test_bitcoin+0x1dde4a)\r\n    #11 boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) ??:? (libboost_unit_test_framework.so.1.65.1+0x4b2cd)\r\n    #12 __libc_start_main ??:? (libc.so.6+0x21b96)\r\n\r\n    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message\r\n\r\n  Mutex M131611 acquired here while holding mutex M131679 in main thread:\r\n    #0 pthread_mutex_lock ??:? (test_bitcoin+0xcb457)\r\n    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/x86_64-linux-gnu/c++/8.0.1/bits/gthr-default.h:748 (test_bitcoin+0x158dc3)\r\n    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/x86_64-linux-gnu/c++/8.0.1/bits/gthr-default.h:810 (test_bitcoin+0x158d45)\r\n    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/mutex:107 (test_bitcoin+0x15e415)\r\n    #4 AnnotatedMixin<std::recursive_mutex>::lock() /home/ubuntu/bitcoin/src/./sync.h:59 (test_bitcoin+0x15e395)\r\n    #5 std::unique_lock<CCriticalSection>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/bits/std_mutex.h:267 (test_bitcoin+0x15e2fe)\r\n    #6 CCriticalBlock::Enter(char const*, char const*, int) /home/ubuntu/bitcoin/src/./sync.h:128 (test_bitcoin+0x15de07)\r\n    #7 CCriticalBlock /home/ubuntu/bitcoin/src/./sync.h:149 (test_bitcoin+0x1597c7)\r\n    #8 PeerLogicValidation::InitializeNode(CNode*) /home/ubuntu/bitcoin/src/net_processing.cpp:583 (test_bitcoin+0x92b76c)\r\n    #9 DoS_tests::DoS_banning::test_method() /home/ubuntu/bitcoin/src/test/DoS_tests.cpp:201 (test_bitcoin+0x3acf87)\r\n    #10 DoS_tests::DoS_banning_invoker() /home/ubuntu/bitcoin/src/test/DoS_tests.cpp:178 (test_bitcoin+0x3ac22e)\r\n    #11 boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) /usr/include/boost/function/function_template.hpp:118 (test_bitcoin+0x1dde4a)\r\n    #12 boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) ??:? (libboost_unit_test_framework.so.1.65.1+0x4b2cd)\r\n    #13 __libc_start_main ??:? (libc.so.6+0x21b96)\r\n\r\nSUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) ??:? in pthread_mutex_lock\r\n==================\r\ntest/DoS_tests.cpp(178): Leaving test case \"DoS_banning\"; testing time: 148936us\r\ntest/DoS_tests.cpp(224): Entering test case \"DoS_banscore\"\r\ntest/DoS_tests.cpp(224): Leaving test case \"DoS_banscore\"; testing time: 117896us\r\ntest/DoS_tests.cpp(261): Entering test case \"DoS_bantime\"\r\ntest/DoS_tests.cpp(261): Leaving test case \"DoS_bantime\"; testing time: 109843us\r\ntest/DoS_tests.cpp(304): Entering test case \"DoS_mapOrphans\"\r\ntest/DoS_tests.cpp(304): Leaving test case \"DoS_mapOrphans\"; testing time: 2757430us\r\ntest/DoS_tests.cpp(45): Leaving test suite \"DoS_tests\"; testing time: 3709153us\r\nLeaving test module \"Bitcoin Test Suite\"; testing time: 3709218us\r\n\r\n*** No errors detected\r\nThreadSanitizer: reported 2 warnings\r\n```\r\nCan confirm that this patch make the warning disappear. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381843635/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381990661",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-381990661",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 381990661,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTk5MDY2MQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-17T13:23:48Z",
    "updated_at": "2018-04-17T13:23:48Z",
    "author_association": "MEMBER",
    "body": "So what exactly needs `cs_sendProcessing` and why is it not scoped on that?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381990661/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382002331",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-382002331",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 382002331,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjAwMjMzMQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-17T13:58:01Z",
    "updated_at": "2018-04-17T13:58:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MarcoFalke `SendMessages(\u2026)` requires holding `cs_sendProcessing`, right?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382002331/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382006441",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-382006441",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 382006441,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjAwNjQ0MQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-17T14:10:04Z",
    "updated_at": "2018-04-17T14:10:04Z",
    "author_association": "MEMBER",
    "body": "Can't vouch for that, but it seems so.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382006441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382509922",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-382509922",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 382509922,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjUwOTkyMg==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-18T19:57:36Z",
    "updated_at": "2018-04-18T19:57:36Z",
    "author_association": "MEMBER",
    "body": "@practicalswift Mind to update according to my suggestion?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382509922/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382548861",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-382548861",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 382548861,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjU0ODg2MQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-18T22:27:02Z",
    "updated_at": "2018-04-18T22:30:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MarcoFalke Do you mean with more narrowly scoped locks? Something like this?\r\n\r\n```diff\r\ndiff --git a/src/net_processing.h b/src/net_processing.h\r\nindex 195d0d2..6802887 100644\r\n--- a/src/net_processing.h\r\n+++ b/src/net_processing.h\r\n@@ -72,7 +72,7 @@ public:\r\n     * @param[in]   interrupt       Interrupt condition for processing threads\r\n     * @return                      True if there is more work to be done\r\n     */\r\n-    bool SendMessages(CNode* pto, std::atomic<bool>& interrupt) override;\r\n+    bool SendMessages(CNode* pto, std::atomic<bool>& interrupt) override EXCLUSIVE_LOCKS_REQUIRED(pto->cs_sendProcessing);\r\n\r\n     /** Consider evicting an outbound peer based on the amount of time they've been behind our tip */\r\n     void ConsiderEviction(CNode *pto, int64_t time_in_seconds);\r\ndiff --git a/src/test/DoS_tests.cpp b/src/test/DoS_tests.cpp\r\nindex abc31e6..3d1ac7a 100644\r\n--- a/src/test/DoS_tests.cpp\r\n+++ b/src/test/DoS_tests.cpp\r\n@@ -66,25 +66,40 @@ BOOST_AUTO_TEST_CASE(outbound_slow_chain_eviction)\r\n     dummyNode1.fSuccessfullyConnected = true;\r\n\r\n     // This test requires that we have a chain with non-zero work.\r\n-    LOCK(cs_main);\r\n-    BOOST_CHECK(chainActive.Tip() != nullptr);\r\n-    BOOST_CHECK(chainActive.Tip()->nChainWork > 0);\r\n+    {\r\n+        LOCK(cs_main);\r\n+        BOOST_CHECK(chainActive.Tip() != nullptr);\r\n+        BOOST_CHECK(chainActive.Tip()->nChainWork > 0);\r\n+    }\r\n\r\n     // Test starts here\r\n-    LOCK(dummyNode1.cs_sendProcessing);\r\n-    peerLogic->SendMessages(&dummyNode1, interruptDummy); // should result in getheaders\r\n-    LOCK(dummyNode1.cs_vSend);\r\n-    BOOST_CHECK(dummyNode1.vSendMsg.size() > 0);\r\n-    dummyNode1.vSendMsg.clear();\r\n+    {\r\n+        LOCK2(cs_main, dummyNode1.cs_sendProcessing);\r\n+        peerLogic->SendMessages(&dummyNode1, interruptDummy); // should result in getheaders\r\n+    }\r\n+    {\r\n+        LOCK2(cs_main, dummyNode1.cs_vSend);\r\n+        BOOST_CHECK(dummyNode1.vSendMsg.size() > 0);\r\n+        dummyNode1.vSendMsg.clear();\r\n+    }\r\n\r\n     int64_t nStartTime = GetTime();\r\n     // Wait 21 minutes\r\n     SetMockTime(nStartTime+21*60);\r\n-    peerLogic->SendMessages(&dummyNode1, interruptDummy); // should result in getheaders\r\n-    BOOST_CHECK(dummyNode1.vSendMsg.size() > 0);\r\n+    {\r\n+        LOCK2(cs_main, dummyNode1.cs_sendProcessing);\r\n+        peerLogic->SendMessages(&dummyNode1, interruptDummy); // should result in getheaders\r\n+    }\r\n+    {\r\n+        LOCK2(cs_main, dummyNode1.cs_vSend);\r\n+        BOOST_CHECK(dummyNode1.vSendMsg.size() > 0);\r\n+    }\r\n     // Wait 3 more minutes\r\n     SetMockTime(nStartTime+24*60);\r\n-    peerLogic->SendMessages(&dummyNode1, interruptDummy); // should result in disconnect\r\n+    {\r\n+        LOCK2(cs_main, dummyNode1.cs_sendProcessing);\r\n+        peerLogic->SendMessages(&dummyNode1, interruptDummy); // should result in disconnect\r\n+    }\r\n     BOOST_CHECK(dummyNode1.fDisconnect == true);\r\n     SetMockTime(0);\r\n\r\n@@ -190,8 +205,10 @@ BOOST_AUTO_TEST_CASE(DoS_banning)\r\n         LOCK(cs_main);\r\n         Misbehaving(dummyNode1.GetId(), 100); // Should get banned\r\n     }\r\n-    LOCK(dummyNode1.cs_sendProcessing);\r\n-    peerLogic->SendMessages(&dummyNode1, interruptDummy);\r\n+    {\r\n+        LOCK2(cs_main, dummyNode1.cs_sendProcessing);\r\n+        peerLogic->SendMessages(&dummyNode1, interruptDummy);\r\n+    }\r\n     BOOST_CHECK(connman->IsBanned(addr1));\r\n     BOOST_CHECK(!connman->IsBanned(ip(0xa0b0c001|0x0000ff00))); // Different IP, not banned\r\n\r\n@@ -205,15 +222,20 @@ BOOST_AUTO_TEST_CASE(DoS_banning)\r\n         LOCK(cs_main);\r\n         Misbehaving(dummyNode2.GetId(), 50);\r\n     }\r\n-    LOCK(dummyNode2.cs_sendProcessing);\r\n-    peerLogic->SendMessages(&dummyNode2, interruptDummy);\r\n+    {\r\n+        LOCK2(cs_main, dummyNode2.cs_sendProcessing);\r\n+        peerLogic->SendMessages(&dummyNode2, interruptDummy);\r\n+    }\r\n     BOOST_CHECK(!connman->IsBanned(addr2)); // 2 not banned yet...\r\n     BOOST_CHECK(connman->IsBanned(addr1));  // ... but 1 still should be\r\n     {\r\n         LOCK(cs_main);\r\n         Misbehaving(dummyNode2.GetId(), 50);\r\n     }\r\n-    peerLogic->SendMessages(&dummyNode2, interruptDummy);\r\n+    {\r\n+        LOCK2(cs_main, dummyNode2.cs_sendProcessing);\r\n+        peerLogic->SendMessages(&dummyNode2, interruptDummy);\r\n+    }\r\n     BOOST_CHECK(connman->IsBanned(addr2));\r\n\r\n     bool dummy;\r\n@@ -237,20 +259,28 @@ BOOST_AUTO_TEST_CASE(DoS_banscore)\r\n         LOCK(cs_main);\r\n         Misbehaving(dummyNode1.GetId(), 100);\r\n     }\r\n-    LOCK(dummyNode1.cs_sendProcessing);\r\n-    peerLogic->SendMessages(&dummyNode1, interruptDummy);\r\n+    {\r\n+        LOCK2(cs_main, dummyNode1.cs_sendProcessing);\r\n+        peerLogic->SendMessages(&dummyNode1, interruptDummy);\r\n+    }\r\n     BOOST_CHECK(!connman->IsBanned(addr1));\r\n     {\r\n         LOCK(cs_main);\r\n         Misbehaving(dummyNode1.GetId(), 10);\r\n     }\r\n-    peerLogic->SendMessages(&dummyNode1, interruptDummy);\r\n+    {\r\n+        LOCK2(cs_main, dummyNode1.cs_sendProcessing);\r\n+        peerLogic->SendMessages(&dummyNode1, interruptDummy);\r\n+    }\r\n     BOOST_CHECK(!connman->IsBanned(addr1));\r\n     {\r\n         LOCK(cs_main);\r\n         Misbehaving(dummyNode1.GetId(), 1);\r\n     }\r\n-    peerLogic->SendMessages(&dummyNode1, interruptDummy);\r\n+    {\r\n+        LOCK2(cs_main, dummyNode1.cs_sendProcessing);\r\n+        peerLogic->SendMessages(&dummyNode1, interruptDummy);\r\n+    }\r\n     BOOST_CHECK(connman->IsBanned(addr1));\r\n     gArgs.ForceSetArg(\"-banscore\", std::to_string(DEFAULT_BANSCORE_THRESHOLD));\r\n\r\n@@ -277,8 +307,10 @@ BOOST_AUTO_TEST_CASE(DoS_bantime)\r\n         LOCK(cs_main);\r\n         Misbehaving(dummyNode.GetId(), 100);\r\n     }\r\n-    LOCK(dummyNode.cs_sendProcessing);\r\n-    peerLogic->SendMessages(&dummyNode, interruptDummy);\r\n+    {\r\n+        LOCK2(cs_main, dummyNode.cs_sendProcessing);\r\n+        peerLogic->SendMessages(&dummyNode, interruptDummy);\r\n+    }\r\n     BOOST_CHECK(connman->IsBanned(addr));\r\n\r\n     SetMockTime(nStartTime+60*60);\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382548861/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382767812",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-382767812",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 382767812,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mjc2NzgxMg==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-19T14:56:48Z",
    "updated_at": "2018-04-19T14:56:48Z",
    "author_association": "MEMBER",
    "body": "@practicalswift Looks very verbose, but fine to me. Shouldn't hurt to document the locking assumtions in tests?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382767812/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382770649",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-382770649",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 382770649,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mjc3MDY0OQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-19T15:04:35Z",
    "updated_at": "2018-04-19T15:05:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MarcoFalke Do you have an example on how to document the locking assumption in the tests?\r\n\r\nThat is beyond the suggested documentation in form of the annotation:\r\n\r\n```\r\nbool SendMessages(CNode* pto, std::atomic<bool>& interrupt) override \r\n    EXCLUSIVE_LOCKS_REQUIRED(pto->cs_sendProcessing);\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382770649/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382771150",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-382771150",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 382771150,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mjc3MTE1MA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-19T15:05:55Z",
    "updated_at": "2018-04-19T15:05:55Z",
    "author_association": "MEMBER",
    "body": "I think your suggested diff is fine",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382771150/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382774521",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-382774521",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 382774521,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mjc3NDUyMQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-19T15:15:46Z",
    "updated_at": "2018-04-19T15:15:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MarcoFalke Applied. Please review :-)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382774521/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382802716",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-382802716",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 382802716,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjgwMjcxNg==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-19T16:41:37Z",
    "updated_at": "2018-04-19T16:41:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MarcoFalke Thanks! Please review updated version :-)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382802716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382880272",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-382880272",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 382880272,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mjg4MDI3Mg==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-19T21:04:32Z",
    "updated_at": "2018-04-19T21:04:32Z",
    "author_association": "MEMBER",
    "body": "utACK 640523f77882c655ade8373eea1062691bf72b98",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382880272/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/388815843",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-388815843",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 388815843,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODgxNTg0Mw==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-14T13:27:16Z",
    "updated_at": "2018-05-14T13:27:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "@promag @laanwj @fanquake Would you mind reviewing? :-)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/388815843/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/396659322",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-396659322",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 396659322,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjY1OTMyMg==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-12T16:51:50Z",
    "updated_at": "2018-06-12T16:51:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/396659322/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/396710549",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-396710549",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 396710549,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjcxMDU0OQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-12T19:46:13Z",
    "updated_at": "2018-06-12T19:46:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased! Please re-review :-)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/396710549/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400523367",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-400523367",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 400523367,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMDUyMzM2Nw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-27T02:32:20Z",
    "updated_at": "2018-06-27T02:32:20Z",
    "author_association": "MEMBER",
    "body": "utACK 9fdf05d70cac4a62d1aeeb4299e2c3a9a866f8af",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400523367/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400623690",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-400623690",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 400623690,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMDYyMzY5MA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-27T10:30:23Z",
    "updated_at": "2018-06-27T10:30:23Z",
    "author_association": "MEMBER",
    "body": "utACK 9fdf05d70cac4a62d1aeeb4299e2c3a9a866f8af",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400623690/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/405025055",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#issuecomment-405025055",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12882",
    "id": 405025055,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTAyNTA1NQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-14T13:52:04Z",
    "updated_at": "2018-07-14T13:52:04Z",
    "author_association": "MEMBER",
    "body": "Can we enable this in travis, so it wouldn't happen again, please?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/405025055/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/182805847",
    "pull_request_review_id": 113679886,
    "id": 182805847,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MjgwNTg0Nw==",
    "diff_hunk": "@@ -190,8 +206,10 @@ BOOST_AUTO_TEST_CASE(DoS_banning)\n         LOCK(cs_main);\n         Misbehaving(dummyNode1.GetId(), 100); // Should get banned\n     }\n-    LOCK(dummyNode1.cs_sendProcessing);\n-    peerLogic->SendMessages(&dummyNode1, interruptDummy);\n+    {\n+        LOCK2(cs_main, dummyNode1.cs_sendProcessing);",
    "path": "src/test/DoS_tests.cpp",
    "position": null,
    "original_position": 67,
    "commit_id": "9fdf05d70cac4a62d1aeeb4299e2c3a9a866f8af",
    "original_commit_id": "8043568a24e17063814126cbc513c7f992f211e3",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: Seems you already locked `cs_main` in the first line of the test case, so a `LOCK(dummyNode1.cs_sendProcessing);` should suffice",
    "created_at": "2018-04-19T16:21:58Z",
    "updated_at": "2018-06-12T19:45:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#discussion_r182805847",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12882",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/182805847"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12882#discussion_r182805847"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12882"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/182805847/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 209,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/182973333",
    "pull_request_review_id": 113881956,
    "id": 182973333,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4Mjk3MzMzMw==",
    "diff_hunk": "@@ -190,8 +206,10 @@ BOOST_AUTO_TEST_CASE(DoS_banning)\n         LOCK(cs_main);\n         Misbehaving(dummyNode1.GetId(), 100); // Should get banned\n     }\n-    LOCK(dummyNode1.cs_sendProcessing);\n-    peerLogic->SendMessages(&dummyNode1, interruptDummy);\n+    {\n+        LOCK2(cs_main, dummyNode1.cs_sendProcessing);",
    "path": "src/test/DoS_tests.cpp",
    "position": null,
    "original_position": 67,
    "commit_id": "9fdf05d70cac4a62d1aeeb4299e2c3a9a866f8af",
    "original_commit_id": "8043568a24e17063814126cbc513c7f992f211e3",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed!",
    "created_at": "2018-04-20T08:00:40Z",
    "updated_at": "2018-06-12T19:45:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12882#discussion_r182973333",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12882",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/182973333"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12882#discussion_r182973333"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12882"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/182973333/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 209,
    "side": "RIGHT",
    "in_reply_to_id": 182805847
  }
]