[
  {
    "sha": "6bb54708e6457f21596793a7149dc6dfea1dc871",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2YmI1NDcwOGU2NDU3ZjIxNTk2NzkzYTcxNDlkYzZkZmVhMWRjODcx",
    "commit": {
      "author": {
        "name": "nthumann",
        "email": "me@n-thumann.de",
        "date": "2021-08-04T10:07:31Z"
      },
      "committer": {
        "name": "nthumann",
        "email": "me@n-thumann.de",
        "date": "2021-08-04T10:24:53Z"
      },
      "message": "util: Check if specified config file cannot be opened",
      "tree": {
        "sha": "3d4c34529bc3034504d505be52b807c18900584a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3d4c34529bc3034504d505be52b807c18900584a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6bb54708e6457f21596793a7149dc6dfea1dc871",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEECpbFYxDyKGvEvGXoka4m9S3lS3YFAmEKavsACgkQka4m9S3l\nS3azERAAxL+EutgVws5Pbzru1sfEB54/8TToBAP8QiBGnjMGovjfHyEc9lYjA1hd\nsAyLPvoBnVaSA8uxMHsokjI1S4k4xW2qrJGVtoa2tLsM5/kdRn2rf3f+4ujMXQ9m\nrkynJ8c/Sjw/Vtapfibj986fkKCZu0hwIso3KlyzHlR2tM9EhF2Q+FkDboiaudTJ\nSCJCIwMcDXO5V92bHmug1BbvycVPsxoYcxzG4DtpmOUSS/RpXMj+DFr/xWjF21EF\neV92RC95YxzURjatYhoCzohtlFhFLTAMzMAY5kL0GWQfpVxvo6n2kVetpmbu0xw4\n9Xpekpb7TAsRckxPwjljU6kQMTmHe7zF49NIhx6KY8BHXmAf/T81UxaMLXAmD/Gv\nAOQ/KX5KUGx1LBr7vOtAfkeZ0j2PSn7cLoeSQvXVJKVLKJsWl6q/vjLQOxkQ7kQM\nCZNJe4up9lXvjnS6RtXys8qmBICziah7Zkn7kzjiA7R+sXVzmy3FEgajXVRmEKcA\nvA6dG8PboBQyuAPm371jXsXAsfXfjL+cV6z2ufS4Vu6nr9CpsiC2sh9BgEbYkSR4\nPJ26+m1OisehbfxUxhx5D3ubkgWnFYo4E5/FJO1uj+AUQfJTfjiN+HLmIuOLH3eX\ncsZbB47tRHvKZRq5LzFYlcuCy9zZv4yd7xMfiS/QmohhTLUBKDA=\n=Nv3L\n-----END PGP SIGNATURE-----",
        "payload": "tree 3d4c34529bc3034504d505be52b807c18900584a\nparent eaf09bda4ab21f79f89822d2c6fa3d7a3ce57b0d\nauthor nthumann <me@n-thumann.de> 1628071651 +0200\ncommitter nthumann <me@n-thumann.de> 1628072693 +0200\n\nutil: Check if specified config file cannot be opened\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6bb54708e6457f21596793a7149dc6dfea1dc871",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6bb54708e6457f21596793a7149dc6dfea1dc871",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6bb54708e6457f21596793a7149dc6dfea1dc871/comments",
    "author": {
      "login": "n-thumann",
      "id": 46975855,
      "node_id": "MDQ6VXNlcjQ2OTc1ODU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/46975855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/n-thumann",
      "html_url": "https://github.com/n-thumann",
      "followers_url": "https://api.github.com/users/n-thumann/followers",
      "following_url": "https://api.github.com/users/n-thumann/following{/other_user}",
      "gists_url": "https://api.github.com/users/n-thumann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/n-thumann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/n-thumann/subscriptions",
      "organizations_url": "https://api.github.com/users/n-thumann/orgs",
      "repos_url": "https://api.github.com/users/n-thumann/repos",
      "events_url": "https://api.github.com/users/n-thumann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/n-thumann/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "n-thumann",
      "id": 46975855,
      "node_id": "MDQ6VXNlcjQ2OTc1ODU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/46975855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/n-thumann",
      "html_url": "https://github.com/n-thumann",
      "followers_url": "https://api.github.com/users/n-thumann/followers",
      "following_url": "https://api.github.com/users/n-thumann/following{/other_user}",
      "gists_url": "https://api.github.com/users/n-thumann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/n-thumann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/n-thumann/subscriptions",
      "organizations_url": "https://api.github.com/users/n-thumann/orgs",
      "repos_url": "https://api.github.com/users/n-thumann/repos",
      "events_url": "https://api.github.com/users/n-thumann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/n-thumann/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "eaf09bda4ab21f79f89822d2c6fa3d7a3ce57b0d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/eaf09bda4ab21f79f89822d2c6fa3d7a3ce57b0d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/eaf09bda4ab21f79f89822d2c6fa3d7a3ce57b0d"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 5,
      "deletions": 0
    },
    "files": [
      {
        "sha": "85a23731a2e300214007b754e61f754701317ebb",
        "filename": "src/util/system.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6bb54708e6457f21596793a7149dc6dfea1dc871/src/util/system.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6bb54708e6457f21596793a7149dc6dfea1dc871/src/util/system.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/system.cpp?ref=6bb54708e6457f21596793a7149dc6dfea1dc871",
        "patch": "@@ -904,6 +904,11 @@ bool ArgsManager::ReadConfigFiles(std::string& error, bool ignore_invalid_keys)\n     const std::string confPath = GetArg(\"-conf\", BITCOIN_CONF_FILENAME);\n     fsbridge::ifstream stream(GetConfigFile(confPath));\n \n+    // not ok to have a config file specified that cannot be opened\n+    if (IsArgSet(\"-conf\") && !stream.good()) {\n+        error = strprintf(\"specified config file \\\"%s\\\" could not be opened.\", confPath);\n+        return false;\n+    }\n     // ok to not have a config file\n     if (stream.good()) {\n         if (!ReadConfigStream(stream, confPath, error, ignore_invalid_keys)) {"
      }
    ]
  },
  {
    "sha": "127b4608e9dbb8217c74c9332e82fcec8c326fa8",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxMjdiNDYwOGU5ZGJiODIxN2M3NGM5MzMyZTgyZmNlYzhjMzI2ZmE4",
    "commit": {
      "author": {
        "name": "nthumann",
        "email": "me@n-thumann.de",
        "date": "2021-08-04T10:24:40Z"
      },
      "committer": {
        "name": "nthumann",
        "email": "me@n-thumann.de",
        "date": "2021-08-04T12:54:05Z"
      },
      "message": "test: Check if specified config file cannot be opened",
      "tree": {
        "sha": "cc52eaa09a38765f10c2e424fb8e08bb83694b40",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cc52eaa09a38765f10c2e424fb8e08bb83694b40"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/127b4608e9dbb8217c74c9332e82fcec8c326fa8",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEECpbFYxDyKGvEvGXoka4m9S3lS3YFAmEKje0ACgkQka4m9S3l\nS3YiQg//dGNPPZ2gRFl3sAay2qepMZUeHK3AkTzIYvL6M2OnmOZNiRFNUaTziAgU\nKhLy6d08H0nSdMtmCjg2x741U1z1R1kQKmW5xxqXoK2PxuBmVpZYc96OQs2EgtUb\nkvcicV9hWMqNld7JlY8MUn7WFxgRnmOMFAbydOK8hJ4rZVofZCdpoxrNCksNIIVo\nn8GGCekzxNiCZXB1RbwKPRbiWa9n1VIp9p2PHSseWDNTQsm46QKEuh9A43HDZmOp\nbE/rk2BImbiQqMrOsy9RJR8/xI6Rtn4lb2yptRn+hTg5wGrME6RIMm7ZCW20Ma/I\nQNaODMIrFCqrKVEKfAAerNJX87/dgJvz/1ahhsGN5eTOSvQSCjEE2L18SZxyQrnZ\nkW0kvQyrjncNr06w7kBkgi70KPdIEtxToV3NDO7liAqWkpXadWym+rlKa4J6bS7d\n+ic11NFv7vR6BcjZEFVtnbKK8ZMqZAa5UmTF7J52oIQUdZXYUEusa+LO2rxJ0uRM\nKHgyLu+hVCXa4t8Z+qlyEoQU/vcfLF+JWAyMtwbNTjCDxCVV4doerJJpN3IB7gBI\nIgYc/pMDVHcWNh4/oBAfBGLyPfV7W4CZj8oLtym9Eu5xeiOX6QjiqZQ3AZg1Wn5/\n3fIPozK5cawMMm65xhoukvQ84DR8nRVmWJVAlzd85xiwLCFiFTQ=\n=KFos\n-----END PGP SIGNATURE-----",
        "payload": "tree cc52eaa09a38765f10c2e424fb8e08bb83694b40\nparent 6bb54708e6457f21596793a7149dc6dfea1dc871\nauthor nthumann <me@n-thumann.de> 1628072680 +0200\ncommitter nthumann <me@n-thumann.de> 1628081645 +0200\n\ntest: Check if specified config file cannot be opened\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/127b4608e9dbb8217c74c9332e82fcec8c326fa8",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/127b4608e9dbb8217c74c9332e82fcec8c326fa8",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/127b4608e9dbb8217c74c9332e82fcec8c326fa8/comments",
    "author": {
      "login": "n-thumann",
      "id": 46975855,
      "node_id": "MDQ6VXNlcjQ2OTc1ODU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/46975855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/n-thumann",
      "html_url": "https://github.com/n-thumann",
      "followers_url": "https://api.github.com/users/n-thumann/followers",
      "following_url": "https://api.github.com/users/n-thumann/following{/other_user}",
      "gists_url": "https://api.github.com/users/n-thumann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/n-thumann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/n-thumann/subscriptions",
      "organizations_url": "https://api.github.com/users/n-thumann/orgs",
      "repos_url": "https://api.github.com/users/n-thumann/repos",
      "events_url": "https://api.github.com/users/n-thumann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/n-thumann/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "n-thumann",
      "id": 46975855,
      "node_id": "MDQ6VXNlcjQ2OTc1ODU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/46975855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/n-thumann",
      "html_url": "https://github.com/n-thumann",
      "followers_url": "https://api.github.com/users/n-thumann/followers",
      "following_url": "https://api.github.com/users/n-thumann/following{/other_user}",
      "gists_url": "https://api.github.com/users/n-thumann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/n-thumann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/n-thumann/subscriptions",
      "organizations_url": "https://api.github.com/users/n-thumann/orgs",
      "repos_url": "https://api.github.com/users/n-thumann/repos",
      "events_url": "https://api.github.com/users/n-thumann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/n-thumann/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6bb54708e6457f21596793a7149dc6dfea1dc871",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6bb54708e6457f21596793a7149dc6dfea1dc871",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6bb54708e6457f21596793a7149dc6dfea1dc871"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 4,
      "deletions": 0
    },
    "files": [
      {
        "sha": "9e99cd549d586d3a9328bdf10d0ceb21b00ef299",
        "filename": "test/functional/feature_config_args.py",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/127b4608e9dbb8217c74c9332e82fcec8c326fa8/test/functional/feature_config_args.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/127b4608e9dbb8217c74c9332e82fcec8c326fa8/test/functional/feature_config_args.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_config_args.py?ref=127b4608e9dbb8217c74c9332e82fcec8c326fa8",
        "patch": "@@ -248,6 +248,10 @@ def run_test(self):\n \n         self.nodes[0].assert_start_raises_init_error(['-conf=' + conf_file], 'Error: Error reading configuration file: specified data directory \"' + new_data_dir + '\" does not exist.')\n \n+        # Check that an explicitly specified config file that cannot be opened fails\n+        none_existent_conf_file = os.path.join(default_data_dir, \"none_existent_bitcoin.conf\")\n+        self.nodes[0].assert_start_raises_init_error(['-conf=' + none_existent_conf_file], 'Error: Error reading configuration file: specified config file \"' + none_existent_conf_file + '\" could not be opened.')\n+\n         # Create the directory and ensure the config file now works\n         os.mkdir(new_data_dir)\n         self.start_node(0, ['-conf='+conf_file])"
      }
    ]
  }
]