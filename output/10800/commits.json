[
  {
    "sha": "182736895ba9e8aa5719aae1604093fb2bd752d0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxODI3MzY4OTViYTllOGFhNTcxOWFhZTE2MDQwOTNmYjJiZDc1MmQw",
    "commit": {
      "author": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2017-07-11T22:49:57Z"
      },
      "committer": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2017-07-12T04:44:56Z"
      },
      "message": "lto: workaround for boost issue\n\nI'm not sure what the root cause of the issue is yet, but defining a\nboost::filesystem::path at global scope breaks linking with lto. The issue is\neither:\n- Some non-obvious ODR violation\n- A bug or UB in gcc's handling of where to put the symbol for the inlined dtor\n- Same as above, but for ld at link time\n\nPresumably this is caused by the fact that boost::filesystem::path contains a\nfew methods which use static instances of a path object,\n\nThe work-around is to use a static string instead.",
      "tree": {
        "sha": "546bdc031040a9eea8450ea0c4ba89f4d0a0a048",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/546bdc031040a9eea8450ea0c4ba89f4d0a0a048"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/182736895ba9e8aa5719aae1604093fb2bd752d0",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/182736895ba9e8aa5719aae1604093fb2bd752d0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/182736895ba9e8aa5719aae1604093fb2bd752d0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/182736895ba9e8aa5719aae1604093fb2bd752d0/comments",
    "author": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ca4c545cc7e8c06bc8d9d4db1dd2d8f5fe011902",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ca4c545cc7e8c06bc8d9d4db1dd2d8f5fe011902",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ca4c545cc7e8c06bc8d9d4db1dd2d8f5fe011902"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 7,
      "deletions": 7
    },
    "files": [
      {
        "sha": "6d1843fa9e3233de1fd7cd57152984aef76f5d9e",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/182736895ba9e8aa5719aae1604093fb2bd752d0/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/182736895ba9e8aa5719aae1604093fb2bd752d0/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=182736895ba9e8aa5719aae1604093fb2bd752d0",
        "patch": "@@ -548,16 +548,16 @@ fs::path GetDefaultDataDir()\n #endif\n }\n \n-static fs::path pathCached;\n-static fs::path pathCachedNetSpecific;\n+static fs::path::string_type pathCached;\n+static fs::path::string_type pathCachedNetSpecific;\n static CCriticalSection csPathCached;\n \n-const fs::path &GetDataDir(bool fNetSpecific)\n+fs::path GetDataDir(bool fNetSpecific)\n {\n \n     LOCK(csPathCached);\n \n-    fs::path &path = fNetSpecific ? pathCachedNetSpecific : pathCached;\n+    fs::path path = fNetSpecific ? pathCachedNetSpecific : pathCached;\n \n     // This can be called during exceptions by LogPrintf(), so we cache the\n     // value so we don't have to do memory allocations after that.\n@@ -585,8 +585,8 @@ void ClearDatadirCache()\n {\n     LOCK(csPathCached);\n \n-    pathCached = fs::path();\n-    pathCachedNetSpecific = fs::path();\n+    pathCached = fs::path().native();\n+    pathCachedNetSpecific = fs::path().native();\n }\n \n fs::path GetConfigFile(const std::string& confPath)"
      },
      {
        "sha": "ca88089daad19374b7567cb45dad764d6ed8ae41",
        "filename": "src/util.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/182736895ba9e8aa5719aae1604093fb2bd752d0/src/util.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/182736895ba9e8aa5719aae1604093fb2bd752d0/src/util.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.h?ref=182736895ba9e8aa5719aae1604093fb2bd752d0",
        "patch": "@@ -169,7 +169,7 @@ void AllocateFileRange(FILE *file, unsigned int offset, unsigned int length);\n bool RenameOver(fs::path src, fs::path dest);\n bool TryCreateDirectories(const fs::path& p);\n fs::path GetDefaultDataDir();\n-const fs::path &GetDataDir(bool fNetSpecific = true);\n+fs::path GetDataDir(bool fNetSpecific = true);\n void ClearDatadirCache();\n fs::path GetConfigFile(const std::string& confPath);\n #ifndef WIN32"
      }
    ]
  },
  {
    "sha": "e05d1c2030299212311ffa61c6c577c29180baab",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplMDVkMWMyMDMwMjk5MjEyMzExZmZhNjFjNmM1NzdjMjkxODBiYWFi",
    "commit": {
      "author": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2017-07-11T23:58:42Z"
      },
      "committer": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2017-07-12T04:52:45Z"
      },
      "message": "lto: add --enable-lto option\n\nNote that for gcc, AR and RANLIB may need to be manually set to gcc-ar and\ngcc-ranlib respectively.\n\nDepending on how much trouble this causes, we may need to attempt to set these.",
      "tree": {
        "sha": "e7d1409f17d33b27b4f0a937c624bc4d0b81bc5d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e7d1409f17d33b27b4f0a937c624bc4d0b81bc5d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e05d1c2030299212311ffa61c6c577c29180baab",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e05d1c2030299212311ffa61c6c577c29180baab",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e05d1c2030299212311ffa61c6c577c29180baab",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e05d1c2030299212311ffa61c6c577c29180baab/comments",
    "author": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "182736895ba9e8aa5719aae1604093fb2bd752d0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/182736895ba9e8aa5719aae1604093fb2bd752d0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/182736895ba9e8aa5719aae1604093fb2bd752d0"
      }
    ],
    "stats": {
      "total": 18,
      "additions": 16,
      "deletions": 2
    },
    "files": [
      {
        "sha": "b48bcfde21db0859c3d00c3605cfed88671c4e30",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e05d1c2030299212311ffa61c6c577c29180baab/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e05d1c2030299212311ffa61c6c577c29180baab/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=e05d1c2030299212311ffa61c6c577c29180baab",
        "patch": "@@ -205,6 +205,12 @@ AC_ARG_ENABLE([werror],\n     [enable_werror=$enableval],\n     [enable_werror=no])\n \n+AC_ARG_ENABLE([lto],\n+    [AS_HELP_STRING([--enable-lto],\n+                    [enable link-time-optimization (default is no)])],\n+    [enable_lto=$enableval],\n+    [enable_lto=no])\n+\n AC_LANG_PUSH([C++])\n AX_CHECK_COMPILE_FLAG([-Werror],[CXXFLAG_WERROR=\"-Werror\"],[CXXFLAG_WERROR=\"\"])\n \n@@ -219,6 +225,12 @@ if test \"x$enable_debug\" = xyes; then\n     fi\n fi\n \n+if test \"x$enable_lto\" = \"xyes\"; then\n+  AX_CHECK_COMPILE_FLAG([-flto],[LTO_CXXFLAGS=\"$LTO_CXXFLAGS -flto\"],[AC_MSG_ERROR(compile failed with -flto)],[[$CXXFLAG_WERROR]])\n+  AX_CHECK_COMPILE_FLAG([$LTO_CXXFLAGS -fno-fat-lto-objects],[LTO_CXXFLAGS=\"$LTO_CXXFLAGS -fno-fat-lto-objects\"],,[[$CXXFLAG_WERROR]])\n+  AX_CHECK_LINK_FLAG([-flto],[LTO_LDFLAGS=\"$LTO_LDFLAGS -flto\"],[AC_MSG_ERROR(link failed with -flto)],[[$CXXFLAG_WERROR]])\n+fi\n+\n ERROR_CXXFLAGS=\n if test \"x$enable_werror\" = \"xyes\"; then\n   if test \"x$CXXFLAG_WERROR\" = \"x\"; then\n@@ -1159,6 +1171,8 @@ AC_SUBST(BITCOIN_CLI_NAME)\n AC_SUBST(BITCOIN_TX_NAME)\n \n AC_SUBST(RELDFLAGS)\n+AC_SUBST(LTO_CXXFLAGS)\n+AC_SUBST(LTO_LDFLAGS)\n AC_SUBST(ERROR_CXXFLAGS)\n AC_SUBST(HARDENED_CXXFLAGS)\n AC_SUBST(HARDENED_CPPFLAGS)"
      },
      {
        "sha": "386a57e9b18b6a753a871107767d796d3e6b8cdf",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e05d1c2030299212311ffa61c6c577c29180baab/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e05d1c2030299212311ffa61c6c577c29180baab/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=e05d1c2030299212311ffa61c6c577c29180baab",
        "patch": "@@ -4,8 +4,8 @@\n \n DIST_SUBDIRS = secp256k1 univalue\n \n-AM_LDFLAGS = $(PTHREAD_CFLAGS) $(LIBTOOL_LDFLAGS) $(HARDENED_LDFLAGS)\n-AM_CXXFLAGS = $(HARDENED_CXXFLAGS) $(ERROR_CXXFLAGS)\n+AM_LDFLAGS = $(PTHREAD_CFLAGS) $(LIBTOOL_LDFLAGS) $(HARDENED_LDFLAGS) $(LTO_LDFLAGS)\n+AM_CXXFLAGS = $(HARDENED_CXXFLAGS) $(ERROR_CXXFLAGS) $(LTO_CXXFLAGS)\n AM_CPPFLAGS = $(HARDENED_CPPFLAGS)\n EXTRA_LIBRARIES =\n "
      }
    ]
  }
]