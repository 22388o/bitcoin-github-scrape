[
  {
    "sha": "2b18fd2242a589988fbb68205dae4afa0b8b3d34",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyYjE4ZmQyMjQyYTU4OTk4OGZiYjY4MjA1ZGFlNGFmYTBiOGIzZDM0",
    "commit": {
      "author": {
        "name": "Kristaps Kaupe",
        "email": "kristaps@blogiem.lv",
        "date": "2020-01-26T20:19:39Z"
      },
      "committer": {
        "name": "Kristaps Kaupe",
        "email": "kristaps@blogiem.lv",
        "date": "2020-04-16T16:06:58Z"
      },
      "message": "Disable unavailable context menu items in transactions tab",
      "tree": {
        "sha": "381bfe874e204afe479d30873a06e94750132c36",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/381bfe874e204afe479d30873a06e94750132c36"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2b18fd2242a589988fbb68205dae4afa0b8b3d34",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEv2Dflk+I3YgXQImi1HsbQjK1VDcFAl6YgqUACgkQ1HsbQjK1\nVDfDIg//dlPNuY1ugjlC3NhJthHz7GKfQY4OjsC/K1cDBv94wv/kj4H1tGpZuP9E\nSDARo7MTNdG/FEIzGVuJKwoGWJ9db0Aw3/TuAKWUTd4asxw8jGOsN4t8wwr++tds\n+ZAHt8DpsgTKgKu7wmIjth2lV0edU51Z6GzgnbOeavDOqS18tb06Wu9Fk2ukMRco\nLyUoTz1gnrt0G3BGaQn3Bq6pFeY3raV5w00rV1hHN2rI5kuvN0ObhAW6yEUPQ0up\nDaaFW8MiTZh1K85gqIQlRndLk9TiL3B7MpjhmxfJm05vGO05I1WYW40nV34oSQZE\n6s8kAjaGUjMUD+Cz7typKoJNCtDWiHB/1dFk1wVVQeC/gzOzXQ8OkpcHjyOWBKev\n0lzdYw2oCjJGk/5ZbrRNWJRLepj3kua+dTTBPkzzvwDqNhd1/eX6p5dqkpjCcsBI\nnG7OE1SUINAGuMBkcIqUeOHwurSIbomBGf51XNpJcu4u32Vaz2jPCvDsbAH6aXxA\nXzjubYHTcZHceQyU3ykVpSkVQDbCN4DgZ6GeHYjza8PugNTd2hc08waShwaBxcpO\n1G/wmd6A7HVnqoXBiKH6sMjcznb47cHO4ECJvMc7cZ/O7cj84jCnxTR7z98uRb0o\ncWZRYDQYlux72TY3d/BNxb6QDj38x+H/wqf8Nq6Qh3U1bIQcD4Q=\n=s5qB\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIPXAeBw3wbwv1xgTODptYduHQW9IF0xWZ5eRFKZbRi9dCP/wEAvuFbehibrF\nQ69ni7diSIAI8QRemIKq8AipeeXljSXLCwCD3+MNLvkMjikoaHR0cHM6Ly9maW5u\nZXkuY2FsZW5kYXIuZXRlcm5pdHl3YWxsLmNvbf/wEB0guLyeocRV0fbcOsI7OtcI\n8CAirCYTpbLVns+8zjCp0UsQEwBELREsipUYXmVe+4xEygjxBF6YgqrwCAs9WieU\nFstxAIPf4w0u+QyOIyJodHRwczovL2J0Yy5jYWxlbmRhci5jYXRhbGxheHkuY29t\n//AQjH4eXe9FN/uxG7XM9jVbywjxBF6YgqrwCBtHjmxvgI29AIPf4w0u+QyOLi1o\ndHRwczovL2FsaWNlLmJ0Yy5jYWxlbmRhci5vcGVudGltZXN0YW1wcy5vcmfwEMWN\nDixpUOZzGsOsiqQ+POYI8QRemIKq8Ag+HBMbWGOwSwCD3+MNLvkMjiwraHR0cHM6\nLy9ib2IuYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9yZw==\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree 381bfe874e204afe479d30873a06e94750132c36\nparent fe3b58b95955644f5b8e1cd9080d414378f14755\nauthor Kristaps Kaupe <kristaps@blogiem.lv> 1580069979 +0200\ncommitter Kristaps Kaupe <kristaps@blogiem.lv> 1587053218 +0300\n\nDisable unavailable context menu items in transactions tab\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2b18fd2242a589988fbb68205dae4afa0b8b3d34",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2b18fd2242a589988fbb68205dae4afa0b8b3d34",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2b18fd2242a589988fbb68205dae4afa0b8b3d34/comments",
    "author": {
      "login": "kristapsk",
      "id": 4500994,
      "node_id": "MDQ6VXNlcjQ1MDA5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4500994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kristapsk",
      "html_url": "https://github.com/kristapsk",
      "followers_url": "https://api.github.com/users/kristapsk/followers",
      "following_url": "https://api.github.com/users/kristapsk/following{/other_user}",
      "gists_url": "https://api.github.com/users/kristapsk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kristapsk/subscriptions",
      "organizations_url": "https://api.github.com/users/kristapsk/orgs",
      "repos_url": "https://api.github.com/users/kristapsk/repos",
      "events_url": "https://api.github.com/users/kristapsk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kristapsk/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kristapsk",
      "id": 4500994,
      "node_id": "MDQ6VXNlcjQ1MDA5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4500994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kristapsk",
      "html_url": "https://github.com/kristapsk",
      "followers_url": "https://api.github.com/users/kristapsk/followers",
      "following_url": "https://api.github.com/users/kristapsk/following{/other_user}",
      "gists_url": "https://api.github.com/users/kristapsk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kristapsk/subscriptions",
      "organizations_url": "https://api.github.com/users/kristapsk/orgs",
      "repos_url": "https://api.github.com/users/kristapsk/repos",
      "events_url": "https://api.github.com/users/kristapsk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kristapsk/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fe3b58b95955644f5b8e1cd9080d414378f14755",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fe3b58b95955644f5b8e1cd9080d414378f14755",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fe3b58b95955644f5b8e1cd9080d414378f14755"
      }
    ],
    "stats": {
      "total": 45,
      "additions": 31,
      "deletions": 14
    },
    "files": [
      {
        "sha": "a7190d3dd1a178692a0f25e67b750efdcce3865f",
        "filename": "src/qt/guiutil.cpp",
        "status": "modified",
        "additions": 9,
        "deletions": 2,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2b18fd2242a589988fbb68205dae4afa0b8b3d34/src/qt/guiutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2b18fd2242a589988fbb68205dae4afa0b8b3d34/src/qt/guiutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.cpp?ref=2b18fd2242a589988fbb68205dae4afa0b8b3d34",
        "patch": "@@ -230,7 +230,7 @@ QString HtmlEscape(const std::string& str, bool fMultiLine)\n     return HtmlEscape(QString::fromStdString(str), fMultiLine);\n }\n \n-void copyEntryData(QAbstractItemView *view, int column, int role)\n+void copyEntryData(const QAbstractItemView *view, int column, int role)\n {\n     if(!view || !view->selectionModel())\n         return;\n@@ -243,13 +243,20 @@ void copyEntryData(QAbstractItemView *view, int column, int role)\n     }\n }\n \n-QList<QModelIndex> getEntryData(QAbstractItemView *view, int column)\n+QList<QModelIndex> getEntryData(const QAbstractItemView *view, int column)\n {\n     if(!view || !view->selectionModel())\n         return QList<QModelIndex>();\n     return view->selectionModel()->selectedRows(column);\n }\n \n+bool hasEntryData(const QAbstractItemView *view, int column, int role)\n+{\n+    QModelIndexList selection = getEntryData(view, column);\n+    if (selection.isEmpty()) return false;\n+    return !selection.at(0).data(role).toString().isEmpty();\n+}\n+\n QString getDefaultDataDirectory()\n {\n     return boostPathToQString(GetDefaultDataDir());"
      },
      {
        "sha": "30c98a31d63e3f2ceea99668816ef994d13b743c",
        "filename": "src/qt/guiutil.h",
        "status": "modified",
        "additions": 9,
        "deletions": 2,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2b18fd2242a589988fbb68205dae4afa0b8b3d34/src/qt/guiutil.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2b18fd2242a589988fbb68205dae4afa0b8b3d34/src/qt/guiutil.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.h?ref=2b18fd2242a589988fbb68205dae4afa0b8b3d34",
        "patch": "@@ -68,14 +68,21 @@ namespace GUIUtil\n        @param[in] role    Data role to extract from the model\n        @see  TransactionView::copyLabel, TransactionView::copyAmount, TransactionView::copyAddress\n      */\n-    void copyEntryData(QAbstractItemView *view, int column, int role=Qt::EditRole);\n+    void copyEntryData(const QAbstractItemView *view, int column, int role=Qt::EditRole);\n \n     /** Return a field of the currently selected entry as a QString. Does nothing if nothing\n         is selected.\n        @param[in] column  Data column to extract from the model\n        @see  TransactionView::copyLabel, TransactionView::copyAmount, TransactionView::copyAddress\n      */\n-    QList<QModelIndex> getEntryData(QAbstractItemView *view, int column);\n+    QList<QModelIndex> getEntryData(const QAbstractItemView *view, int column);\n+\n+    /** Returns true if the specified field of the currently selected view entry is not empty.\n+       @param[in] column  Data column to extract from the model\n+       @param[in] role    Data role to extract from the model\n+       @see  TransactionView::contextualMenu\n+     */\n+    bool hasEntryData(const QAbstractItemView *view, int column, int role);\n \n     void setClipboard(const QString& str);\n "
      },
      {
        "sha": "27ec0de98c8e20815d6fab9a2322bea0eeec7c09",
        "filename": "src/qt/transactionview.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 4,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2b18fd2242a589988fbb68205dae4afa0b8b3d34/src/qt/transactionview.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2b18fd2242a589988fbb68205dae4afa0b8b3d34/src/qt/transactionview.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionview.cpp?ref=2b18fd2242a589988fbb68205dae4afa0b8b3d34",
        "patch": "@@ -36,8 +36,7 @@\n #include <QVBoxLayout>\n \n TransactionView::TransactionView(const PlatformStyle *platformStyle, QWidget *parent) :\n-    QWidget(parent), model(nullptr), transactionProxyModel(nullptr),\n-    transactionView(nullptr), abandonAction(nullptr), bumpFeeAction(nullptr), columnResizingFixer(nullptr)\n+    QWidget(parent)\n {\n     // Build filter row\n     setContentsMargins(0,0,0,0);\n@@ -152,8 +151,8 @@ TransactionView::TransactionView(const PlatformStyle *platformStyle, QWidget *pa\n     abandonAction = new QAction(tr(\"Abandon transaction\"), this);\n     bumpFeeAction = new QAction(tr(\"Increase transaction fee\"), this);\n     bumpFeeAction->setObjectName(\"bumpFeeAction\");\n-    QAction *copyAddressAction = new QAction(tr(\"Copy address\"), this);\n-    QAction *copyLabelAction = new QAction(tr(\"Copy label\"), this);\n+    copyAddressAction = new QAction(tr(\"Copy address\"), this);\n+    copyLabelAction = new QAction(tr(\"Copy label\"), this);\n     QAction *copyAmountAction = new QAction(tr(\"Copy amount\"), this);\n     QAction *copyTxIDAction = new QAction(tr(\"Copy transaction ID\"), this);\n     QAction *copyTxHexAction = new QAction(tr(\"Copy raw transaction\"), this);\n@@ -395,6 +394,8 @@ void TransactionView::contextualMenu(const QPoint &point)\n     hash.SetHex(selection.at(0).data(TransactionTableModel::TxHashRole).toString().toStdString());\n     abandonAction->setEnabled(model->wallet().transactionCanBeAbandoned(hash));\n     bumpFeeAction->setEnabled(model->wallet().transactionCanBeBumped(hash));\n+    copyAddressAction->setEnabled(GUIUtil::hasEntryData(transactionView, 0, TransactionTableModel::AddressRole));\n+    copyLabelAction->setEnabled(GUIUtil::hasEntryData(transactionView, 0, TransactionTableModel::LabelRole));\n \n     if(index.isValid())\n     {"
      },
      {
        "sha": "77c28ba1bf1e9c3bcbe57d68d42ef25152c3528b",
        "filename": "src/qt/transactionview.h",
        "status": "modified",
        "additions": 8,
        "deletions": 6,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2b18fd2242a589988fbb68205dae4afa0b8b3d34/src/qt/transactionview.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2b18fd2242a589988fbb68205dae4afa0b8b3d34/src/qt/transactionview.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionview.h?ref=2b18fd2242a589988fbb68205dae4afa0b8b3d34",
        "patch": "@@ -60,9 +60,9 @@ class TransactionView : public QWidget\n     };\n \n private:\n-    WalletModel *model;\n-    TransactionFilterProxy *transactionProxyModel;\n-    QTableView *transactionView;\n+    WalletModel *model{nullptr};\n+    TransactionFilterProxy *transactionProxyModel{nullptr};\n+    QTableView *transactionView{nullptr};\n \n     QComboBox *dateWidget;\n     QComboBox *typeWidget;\n@@ -75,12 +75,14 @@ class TransactionView : public QWidget\n     QFrame *dateRangeWidget;\n     QDateTimeEdit *dateFrom;\n     QDateTimeEdit *dateTo;\n-    QAction *abandonAction;\n-    QAction *bumpFeeAction;\n+    QAction *abandonAction{nullptr};\n+    QAction *bumpFeeAction{nullptr};\n+    QAction *copyAddressAction{nullptr};\n+    QAction *copyLabelAction{nullptr};\n \n     QWidget *createDateRangeWidget();\n \n-    GUIUtil::TableViewLastColumnResizingFixer *columnResizingFixer;\n+    GUIUtil::TableViewLastColumnResizingFixer *columnResizingFixer{nullptr};\n \n     virtual void resizeEvent(QResizeEvent* event);\n "
      }
    ]
  }
]