laanwj,2016-07-23T15:23:57Z,This probably overlaps a lot with @theuni's net code overhaul.\n,https://github.com/bitcoin/bitcoin/pull/8394#issuecomment-234723837,234723837,
UdjinM6,2016-07-23T17:17:41Z,Addressed test issue and changed `SplitHostPort` to return bool and fail if port is 0 or negative. Also added checks to `SplitHostPort` calls to further reassure that ports provided in strings are legit.\n,https://github.com/bitcoin/bitcoin/pull/8394#issuecomment-234729486,234729486,
theuni,2016-07-27T18:41:59Z,"yes, this conflicts somewhat, mostly in net/netbase. I can deal with that though.\n\nMore concerning though is the lack over overflow handling on input in a few places. For example:\n\n```\nuint16_t port = GetArg(""-rpcport"", BaseParams().RPCPort());\n```\n\nwhat will ""-rpcport=65537"" do?\n\nI see a few of those, though admittedly some of them likely already exist. Also looks like a few are fixed, ",https://github.com/bitcoin/bitcoin/pull/8394#issuecomment-235680327,235680327,
UdjinM6,2016-07-27T23:10:03Z,"Thanks for the review @theuni !\nIf that starts to overlap with your work too much, just tell me - I'm completely fine with closing this PR in favor of your more global work especially if this PR brings some pain in conflicts resolving and such. I would be glad if you any parts of this PR would be useful for your work in some way though.\n\nMeanwhile:\n- addressed `GetArg` inputs\n- added test cas",https://github.com/bitcoin/bitcoin/pull/8394#issuecomment-235749248,235749248,
theuni,2016-08-05T22:10:43Z,"@UdjinM6 by ""parts coming over the net"", i meant serialized addresses coming from net messages (version, addr, etc). Looks like that's already taken care of.\n\nConcept ACK, and quick review ACK, but It'd be nice to get #8128 in first.\n",https://github.com/bitcoin/bitcoin/pull/8394#issuecomment-237977934,237977934,
MarcoFalke,2016-08-18T16:57:49Z,Needs rebase after #8128 \n,https://github.com/bitcoin/bitcoin/pull/8394#issuecomment-240787354,240787354,
UdjinM6,2016-08-19T04:47:47Z,Rebased and (re)added fixes to new code and to code which was moved in #8128.\n,https://github.com/bitcoin/bitcoin/pull/8394#issuecomment-240927071,240927071,
laanwj,2016-08-19T09:00:28Z,"To be honest, I'm not entirely convinced that merging this is worth the risk (smaller integers are easier to overflow, for example).\nThere's a huge number of changes but no user-facing improvement.\n",https://github.com/bitcoin/bitcoin/pull/8394#issuecomment-240965991,240965991,
MarcoFalke,2016-08-19T09:29:28Z,"@laanwj Agree that there are a lot of changes, but I think in the long run we should make sure that arguments are parsed correctly and sanitized. I think this pull improves parsing of port numbers passed in by users.\n",https://github.com/bitcoin/bitcoin/pull/8394#issuecomment-240972068,240972068,
laanwj,2016-08-19T10:12:52Z,"Improving _parsing_ is a good thing, if we can factor that out I'd have no problem with it.\n",https://github.com/bitcoin/bitcoin/pull/8394#issuecomment-240981189,240981189,
laanwj,2016-10-18T18:47:23Z,Closing this for now.\n,https://github.com/bitcoin/bitcoin/pull/8394#issuecomment-254602200,254602200,
laanwj,2016-07-23T15:22:31Z,"This needs a larger type because it can be -1, which is not equal to 65535.\n",https://github.com/bitcoin/bitcoin/pull/8394#discussion_r71973644,71973644,src/test/netbase_tests.cpp
UdjinM6,2016-07-23T17:13:26Z,True! Changed to use 0 instead.\n,https://github.com/bitcoin/bitcoin/pull/8394#discussion_r71975174,71975174,src/test/netbase_tests.cpp
MarcoFalke,2016-08-19T08:15:38Z,Nit: GetArg returns `int64_t`. I think the goal of the pull was not to cast without check?\n,https://github.com/bitcoin/bitcoin/pull/8394#discussion_r75443324,75443324,src/bitcoin-cli.cpp
MarcoFalke,2016-08-19T08:22:44Z,"Nit: Can you use `!IsValidPort()`, after changing the type of the arg of IsValidPort to int64_t?\n",https://github.com/bitcoin/bitcoin/pull/8394#discussion_r75444101,75444101,src/bitcoin-cli.cpp
MarcoFalke,2016-08-19T08:25:42Z,Nit: I think this is too much handholding for developers. I don't see the benefit considering that this will cause unneeded conflicts with other open pulls such as #8542\n,https://github.com/bitcoin/bitcoin/pull/8394#discussion_r75444411,75444411,src/net.cpp
MarcoFalke,2016-08-19T08:27:03Z,"Nit: Same here. I don't think this is worth the diff. You already changed the interface of `ResolveService()`, which should be enough, imo.\n",https://github.com/bitcoin/bitcoin/pull/8394#discussion_r75444544,75444544,src/test/addrman_tests.cpp
UdjinM6,2016-08-19T09:10:44Z,"Agree, will fix\n",https://github.com/bitcoin/bitcoin/pull/8394#discussion_r75449943,75449943,src/bitcoin-cli.cpp
UdjinM6,2016-08-19T09:20:59Z,That would require:\n1. include netbase.h\n2. move IsValidPort definition to netbase.h\nNot sure it worth it tbh.\n,https://github.com/bitcoin/bitcoin/pull/8394#discussion_r75451178,75451178,src/bitcoin-cli.cpp
