paveljanik,2015-11-13T15:59:53Z,"What kind of invalid settings is it? Do we save invalid values or values become invalid by time or by other reasons? Do you have an example?\nIf we can print ""invalid proxy or something"", we can also open the relevant dialog setting the proxy and allow the user to fix it. No?\n",https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156472793,156472793,
paveljanik,2015-11-13T16:01:49Z,Otherwise we have to document this for users so they can find it. But I think it is cleaner to prevent it to happen.\n,https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156473278,156473278,
jonasschnelli,2015-11-13T16:15:41Z,"I think having a way of resetting the qt settings is nice, although i agree with @paveljanik that it should not be possible to ""save"" a invalid proxy over the GUI settings panel.\n\nYou can test it yourself by setting a proxy in the GUI settings panel with the IP ""0.0.0.0"" (port doesn't matter).\n\nOpen the settings window and allow the user to change it, would be a invasive change to the startup ",https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156476706,156476706,
laanwj,2015-11-13T16:15:52Z,"> What kind of invalid settings is it? Do we save invalid values or values become invalid by time or by other reasons? Do you have an example?\n\nSee #6749. \nIt's not supposed to happen, but it can happen that the settings in the QSettings are - somehow - unparseable or corrupted. Passing a command line option may be somewhat easier than directing the user to find the settings in regedit.\n",https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156476774,156476774,
paveljanik,2015-11-13T16:22:44Z,"I do not want the user to be redirected to `regedit` ;-) I think he should end up in _our_ dialog for setting the ""corrupted"" proxy setting in this case.\n\nBut anyway, having this option is good anyway, lets document it :-)\n",https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156478455,156478455,
laanwj,2015-11-14T09:02:32Z,"Well yes, a corrupted proxy setting should result in a warning, not a fatal error.\n\nBut I suspect that's only one of the things that can go wrong. Having a 'reset to factory settings' can never hurt.\n",https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156672680,156672680,
laanwj,2015-11-14T10:28:31Z,"> Well yes, a corrupted proxy setting should result in a warning, not a fatal error.\n\nThinking about this a bit I'm not sure. It makes sense to have this fatal. Or at least have it disable _all_ networking.\nSay you set up a proxy to hide your identify.\nIt happens to be detected as corrupted (for some reason).\nThen the last thing you want is to _disable_ it, one such leak can ruin everything.\",https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156681510,156681510,
paveljanik,2015-11-14T10:32:28Z,"Yes, proxy setting is very sensible (this is why I asked for other examples, because I have heard - and read in #6749 - only about proxy setting so far).\n",https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156682129,156682129,
jonasschnelli,2015-11-14T11:31:10Z,"I agree, the proxy setting is very sensible. A better approach would be to check the proxy when entering an IP in the QT settings panel. We shouldn't allow a invalid proxy so it would never lead to a startup error.\n",https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156688573,156688573,
paveljanik,2015-11-14T11:49:14Z,"Jonas: the setting can be invalidated by time, network issues etc...\n",https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156690069,156690069,
paveljanik,2015-11-14T11:49:33Z,Or it can even be an attack.\n,https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156690076,156690076,
MarcoFalke,2015-11-14T17:10:33Z,"> It makes sense to have this fatal.\n\nThere is more than just fatal and warning. Couldn't we do a prompt with something like\n\n```\nProblem with $[invalid qt setting]\nButton(""Stop Bitcoin Core"")     Button(""Reset $[invalid qt setting]"")\n```\n\n?\n",https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156720402,156720402,
jonasschnelli,2015-11-14T18:57:08Z,Hmm.. the only check where a invalid proxy can lead to a app startup error & termination is `CAddress.isValid()` (https://github.com/bitcoin/bitcoin/blob/master/src/init.cpp#L1117). I think changes in the local network or somehow something that influents the local time can't raise a startup issue like #6749. A invalid proxy address can be detected and rejected shortly before storing to the QSettin,https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156734027,156734027,
MarcoFalke,2015-11-14T19:00:45Z,"Yes, this PR is useful, but you shouldn't call it ""Fixes #6749.""\n",https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156734189,156734189,
jonasschnelli,2015-11-16T08:00:50Z,Added a `HelpMessageOpt` for `-resetguisettings`.\n,https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156950728,156950728,
jonasschnelli,2015-11-16T08:01:46Z,"@MarcoFalke: right. It doesn't fix #6749, i'll just changes the PR description. Will work on a additional fix.\n",https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-156950839,156950839,
paveljanik,2015-11-18T20:48:46Z,`-help` looks like this now:\n\n```\n  -min\n       Start minimized\n...\n  -resetguisettings\n       Reset all settings changes made over the GUI (default: 0)\n```\n\nWhat about removing `(default: 0)` completely?\n,https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-157859157,157859157,
jonasschnelli,2015-11-18T20:51:41Z,Yes. The `default: 0` is somehow useless. Just removed it over a amend force push.\n,https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-157859838,157859838,
paveljanik,2015-11-18T20:57:47Z,ACK\n\nThanks!\n,https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-157861288,157861288,
MarcoFalke,2015-11-19T11:22:24Z,Concept ACK\n,https://github.com/bitcoin/bitcoin/pull/7006#issuecomment-158027208,158027208,
