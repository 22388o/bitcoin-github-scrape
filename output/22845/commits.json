[
  {
    "sha": "3ec633ef1a99d3a71c19ab5563a82bc275659d2e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozZWM2MzNlZjFhOTlkM2E3MWMxOWFiNTU2M2E4MmJjMjc1NjU5ZDJl",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-08-31T12:36:01Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-09-10T01:20:35Z"
      },
      "message": "build: improve check for ::(w)system\n\n`AC_DEFINE()` takes `HAVE_STD__SYSTEM || HAVE_WSYSTEM` literally, meaning you\nend up with the following in bitcoin-config.h:\n```cpp\n/* std::system or ::wsystem */\n#define HAVE_SYSTEM HAVE_STD__SYSTEM || HAVE_WSYSTEM\n```\n\nThis works for the preprocessor, because `HAVE_SYSTEM`, is defined, just unusually.\nRemove this in favor of defining `HAVE_SYSTEM` to 1 in either case, given we\ndon't actually use `HAVE_STD__SYSTEM` or `HAVE_WSYSTEM`. We just use ::system if\nwe aren't building for Windows.",
      "tree": {
        "sha": "1d7d214e3f9f6ba7d173e708ee48f0d1c9c6b5ce",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1d7d214e3f9f6ba7d173e708ee48f0d1c9c6b5ce"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3ec633ef1a99d3a71c19ab5563a82bc275659d2e",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAmE6suMACgkQLuufXMCV\nJsHTYw//bVzW3IsJ3SOlbUCXjALFl20ncixcrSqF8jFOx2xfuK2j0CpKTWRt1Bif\nw+q/2Qx11GI8jShVIxB2Ts8/FxPDJ/VLbreJILX+eHgbaHbGLfK2Tm3bDGGpD0Du\nG7/Qd4O8Vn2PzOA/f9dEuFo6mifeyU6KvkNsZMguBI5Rb5xNayZdO6jWDaMI1JN2\nuNoJMKEuIJHzNZr+eI7X4VknKLmbHQ8Wp8CRNCKJ6B7f/nkZPgJyVWJfivDHFG5G\n4f1Sxz7lsjl1zTdglQ4JVQlAWpQI3d++PenXpJpTfzuZNItQfxgNCnQaV3Qt48Fh\nw/BfVmKi4k+AWhZ5fxe0yPU3z+nzC1k3vfLxa5240AU9RaS7BPNHff/nNsbHbykh\n/HFggIxAxUU7N9+YOEgU6+UXNhVHQYQN4PaoZ4o6+83j3O5eZa8dJLt0f8oGTIj0\nt7wLrv7EvqrUeGaFz7Yu7ZmQNeOzhqe1MPiG8FUb55336EoWrcyXkAG0bLzUIFTH\n78cDQGbTO4nfpm+d1d1yJ0g0LXBY8/zbO6wSARBtE4MTIMOoFxwGRumz1fQp/H3E\n5QCOkUOVAYx70IB6IM6WLZBj3DvIxsrBwxxprupvynjXlDyFaUcS3KNoaFSh5Jpc\n1GEbvlJIGp6cFP8u5amUYlNQTKVxk7lu0XYP+gVkIWn4ubxz12c=\n=+nZR\n-----END PGP SIGNATURE-----",
        "payload": "tree 1d7d214e3f9f6ba7d173e708ee48f0d1c9c6b5ce\nparent d2dd1697cee9d6d0f13f9cb351bce84eaa4a72b4\nauthor fanquake <fanquake@gmail.com> 1630413361 +0800\ncommitter fanquake <fanquake@gmail.com> 1631236835 +0800\n\nbuild: improve check for ::(w)system\n\n`AC_DEFINE()` takes `HAVE_STD__SYSTEM || HAVE_WSYSTEM` literally, meaning you\nend up with the following in bitcoin-config.h:\n```cpp\n/* std::system or ::wsystem */\n#define HAVE_SYSTEM HAVE_STD__SYSTEM || HAVE_WSYSTEM\n```\n\nThis works for the preprocessor, because `HAVE_SYSTEM`, is defined, just unusually.\nRemove this in favor of defining `HAVE_SYSTEM` to 1 in either case, given we\ndon't actually use `HAVE_STD__SYSTEM` or `HAVE_WSYSTEM`. We just use ::system if\nwe aren't building for Windows.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3ec633ef1a99d3a71c19ab5563a82bc275659d2e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3ec633ef1a99d3a71c19ab5563a82bc275659d2e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3ec633ef1a99d3a71c19ab5563a82bc275659d2e/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d2dd1697cee9d6d0f13f9cb351bce84eaa4a72b4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d2dd1697cee9d6d0f13f9cb351bce84eaa4a72b4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d2dd1697cee9d6d0f13f9cb351bce84eaa4a72b4"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 6,
      "deletions": 3
    },
    "files": [
      {
        "sha": "da5b3f36272bb03a9a0782d2b0e80de45e3ddc71",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 6,
        "deletions": 3,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3ec633ef1a99d3a71c19ab5563a82bc275659d2e/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3ec633ef1a99d3a71c19ab5563a82bc275659d2e/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=3ec633ef1a99d3a71c19ab5563a82bc275659d2e",
        "patch": "@@ -1245,13 +1245,14 @@ AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n  [ AC_MSG_RESULT(no); HAVE_WEAK_GETAUXVAL=0 ]\n )\n \n+have_any_system=no\n AC_MSG_CHECKING([for std::system])\n AC_LINK_IFELSE(\n     [ AC_LANG_PROGRAM(\n         [[ #include <cstdlib> ]],\n         [[ int nErr = std::system(\"\"); ]]\n     )],\n-    [ AC_MSG_RESULT(yes); AC_DEFINE(HAVE_STD__SYSTEM, 1, Define to 1 if std::system is available.)],\n+    [ AC_MSG_RESULT(yes); have_any_system=yes],\n     [ AC_MSG_RESULT(no) ]\n )\n \n@@ -1261,11 +1262,13 @@ AC_LINK_IFELSE(\n         [[ ]],\n         [[ int nErr = ::_wsystem(\"\"); ]]\n     )],\n-    [ AC_MSG_RESULT(yes); AC_DEFINE(HAVE_WSYSTEM, 1, Define to 1 if ::wsystem is available.)],\n+    [ AC_MSG_RESULT(yes); have_any_system=yes],\n     [ AC_MSG_RESULT(no) ]\n )\n \n-AC_DEFINE([HAVE_SYSTEM], [HAVE_STD__SYSTEM || HAVE_WSYSTEM], [std::system or ::wsystem])\n+if test \"x$have_any_system\" != \"xno\"; then\n+  AC_DEFINE(HAVE_SYSTEM, 1, Define to 1 if std::system or ::wsystem is available.)\n+fi\n \n LEVELDB_CPPFLAGS=\n LIBLEVELDB="
      }
    ]
  }
]