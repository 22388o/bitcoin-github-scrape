sipa,2017-07-19T00:05:16Z,"@eklitzke Thanks for your contribution! I think your patch is pretty much acceptable as-is. Since the (new) `fRequestShutdown` is static and very localized, I would argue to convert it to a non-atomic in one go.\n\nAs you're pretty much rewriting all uses of these variables anyway, I think you could adapt them to the new coding style guidelines too (e.g. `g_cs_shutdown`, `g_shutdown_condition`, ",https://github.com/bitcoin/bitcoin/pull/10873#issuecomment-316233903,316233903,
jonasschnelli,2017-07-19T08:18:43Z,Concept ACK.,https://github.com/bitcoin/bitcoin/pull/10873#issuecomment-316308921,316308921,
laanwj,2017-11-09T12:21:43Z,Needs update for code review comments (and rebase),https://github.com/bitcoin/bitcoin/pull/10873#issuecomment-343138548,343138548,
MarcoFalke,2017-11-09T20:07:10Z,"This is up for grabs, it seems",https://github.com/bitcoin/bitcoin/pull/10873#issuecomment-343275853,343275853,
laanwj,2017-11-14T08:13:16Z,"I'm closing it for now, then. The UNIX signals + pthread issue is not trivial to resolve. Instead of a condition variable to synchronize you could use a file descriptor pair in a specific way that is allowed in a signal handler on any platform. I'm not up to date on the specifics, though.\n\nLet me know if you want to work on this again @eklitzke then we'll reopen.\n",https://github.com/bitcoin/bitcoin/pull/10873#issuecomment-344178097,344178097,
laanwj,2017-07-19T14:21:17Z,"Unfortunately, a UNIX signal handler is not allowed to do anything besides set a flag. There is (on linux, but this differs per OS) a limited number of system calls that can be used, but this does not include POSIX threads stuff (see `man 7 signal`, `Async-signal-safe functions`).\n\nThis is the only reason why we still have the polling.\n\nThis SO answer might be useful: https://stackoverflow",https://github.com/bitcoin/bitcoin/pull/10873#discussion_r128260159,128260159,src/init.cpp
promag,2017-07-19T14:32:16Z,"Nit, new line for `{`.",https://github.com/bitcoin/bitcoin/pull/10873#discussion_r128263713,128263713,src/init.cpp
promag,2017-07-19T14:42:08Z,"Add something like\n```cpp\nif (g_request_shutdown == value) {\n  // log something\n  return;\n}\n```",https://github.com/bitcoin/bitcoin/pull/10873#discussion_r128266922,128266922,src/init.cpp
