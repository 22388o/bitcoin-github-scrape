jnewbery,2020-10-05 15:49:36,Can you add a motivation to the PR description please? :),https://github.com/bitcoin/bitcoin/pull/20083#issuecomment-703719928,703719928,
DrahtBot,2020-12-17 04:13:24,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20676 (Replace m_tx_relay/nullptr checks in net_processing.cpp by sdaftuar)\n\nIf you consider this pull request importan",https://github.com/bitcoin/bitcoin/pull/20083#issuecomment-747193122,747193122,
MarcoFalke,2020-12-17 10:43:32,"Sorry, this was opened accidentally (not ready yet)",https://github.com/bitcoin/bitcoin/pull/20083#issuecomment-747360630,747360630,
Xekyo,2020-10-05 15:32:16,"This behavior seems to have previously triggered log messages `too-large bloom filter` or  `bad filteradd message`. I see that in other instances of `pfrom.fDisconect` it seems to be often preceded by log messages, e.g. `LogPrintf(""Disconnecting outbound peer %d -- headers chain has insufficient work\n"", pfrom.GetId());`.\n\nShould there be a log message here for the disconnect as well?",https://github.com/bitcoin/bitcoin/pull/20083#discussion_r499687795,499687795,src/net_processing.cpp
jnewbery,2020-12-17 08:42:53,"I think it's a good idea to log to the NET category whenever net_processing disconnects a peer.\n\nPerhaps we should make this into a function `CConnman::DisconnectPeer(CNode& peer, std::string msg)` and require a log message.",https://github.com/bitcoin/bitcoin/pull/20083#discussion_r544907981,544907981,src/net_processing.cpp
jnewbery,2020-12-17 08:45:07,"Should we also disconnect if `pfrom.m_tx_relay == nullptr`? That means this is a block-relay-only connection that we opened and the peer has asked us to load a bloom filter. Disconnecting seems like the polite thing to do.\n\nMaybe out of scope for this PR.",https://github.com/bitcoin/bitcoin/pull/20083#discussion_r544909388,544909388,src/net_processing.cpp
jnewbery,2020-12-17 08:47:55,Maybe not required now that the connection gets reset in the previous test?,https://github.com/bitcoin/bitcoin/pull/20083#discussion_r544911141,544911141,test/functional/p2p_filter.py
jnewbery,2020-12-17 08:49:15,Maybe change the word misbehavior here to avoid ambiguity with the function in net_processing.,https://github.com/bitcoin/bitcoin/pull/20083#discussion_r544911955,544911955,test/functional/p2p_filter.py
jnewbery,2020-12-17 08:50:06,"I like this function, and think it could be generally useful in other tests, but the name is slightly confusing for me, since it doesn't indicate that we'll also reconnect.",https://github.com/bitcoin/bitcoin/pull/20083#discussion_r544912515,544912515,test/functional/p2p_filter.py
jnewbery,2020-12-17 11:34:38,"Actually this is impossible, since we'll never advertise `NODE_BLOOM` for outbound peers.",https://github.com/bitcoin/bitcoin/pull/20083#discussion_r545021081,545021081,src/net_processing.cpp
