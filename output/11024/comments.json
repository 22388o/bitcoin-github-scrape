[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321616451",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11024#issuecomment-321616451",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11024",
    "id": 321616451,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTYxNjQ1MQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-10T17:16:48Z",
    "updated_at": "2017-08-10T17:21:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "**Note to reviewers:** Let me know if this cleanup is better placed somewhere else (i.e. outside of `OldDecrypt(\u2026)` to avoid doing it more than once). One alternative would be to put it in `~BasicTestingSetup()`, but then it'll run for unrelated tests as well.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321616451/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321689810",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11024#issuecomment-321689810",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11024",
    "id": 321689810,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTY4OTgxMA==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-10T22:23:54Z",
    "updated_at": "2017-08-10T22:23:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "Alternatively we could drop this test. I think it's served its purpose now (our implementation is fine even across many systems) and hopefully OpenSSL will not be required to build without the GUI in 0.16.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321689810/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321696030",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11024#issuecomment-321696030",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11024",
    "id": 321696030,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTY5NjAzMA==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-10T23:00:46Z",
    "updated_at": "2017-08-10T23:00:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sipa @theuni ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321696030/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321696351",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11024#issuecomment-321696351",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11024",
    "id": 321696351,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTY5NjM1MQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-10T23:02:53Z",
    "updated_at": "2017-08-10T23:02:53Z",
    "author_association": "MEMBER",
    "body": "I'd rather just get rid of OpenSSL... we're very close to the point that it doesn't have much added benefit over our internal RNG.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321696351/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321753369",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11024#issuecomment-321753369",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11024",
    "id": 321753369,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTc1MzM2OQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-11T08:08:28Z",
    "updated_at": "2017-08-11T08:08:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "@gmaxwell I've now added a commit that removes `Old{SetKeyFromPassphrase,Encrypt,Decrypt}`. Is that in accordance with your suggestion? :-)\r\n\r\nLet me know if it looks good and I'll squash it into one commit.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321753369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321855625",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11024#issuecomment-321855625",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11024",
    "id": 321855625,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTg1NTYyNQ==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-11T16:15:14Z",
    "updated_at": "2017-08-11T16:15:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks good to me.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321855625/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321870539",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11024#issuecomment-321870539",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11024",
    "id": 321870539,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTg3MDUzOQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-11T17:21:08Z",
    "updated_at": "2017-08-11T17:21:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Squashed into one commit. Please review :-)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321870539/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322228981",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11024#issuecomment-322228981",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11024",
    "id": 322228981,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjIyODk4MQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-14T15:52:22Z",
    "updated_at": "2017-08-14T15:52:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased!",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322228981/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322914155",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11024#issuecomment-322914155",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11024",
    "id": 322914155,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjkxNDE1NQ==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-16T22:11:55Z",
    "updated_at": "2017-08-16T22:11:55Z",
    "author_association": "MEMBER",
    "body": "I have no issue with removing the old comparisons, as I think it's safe to say by now that our implementation lines up well enough with the old openssl one.\r\n\r\nHowever, I don't think it'd be a terrible idea to snapshot our _current_ implementation and compare against that. That way future changes are checked against something.\r\n\r\nI suppose that's really not necessary until those future changes exist, though.\r\n\r\nutACK.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322914155/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324350670",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11024#issuecomment-324350670",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11024",
    "id": 324350670,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDM1MDY3MA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-23T14:25:09Z",
    "updated_at": "2017-08-23T14:25:09Z",
    "author_association": "MEMBER",
    "body": "post-merge utACK a897d0e37a02d29907c3a3f0f6536a26a155751d",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324350670/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132537260",
    "pull_request_review_id": 55629781,
    "id": 132537260,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMjUzNzI2MA==",
    "diff_hunk": "@@ -80,8 +81,8 @@ bool OldDecrypt(const std::vector<unsigned char>& vchCiphertext, CKeyingMaterial\n     if (fOk) fOk = EVP_DecryptUpdate(ctx, &vchPlaintext[0], &nPLen, &vchCiphertext[0], nLen) != 0;\n     if (fOk) fOk = EVP_DecryptFinal_ex(ctx, (&vchPlaintext[0]) + nPLen, &nFLen) != 0;\n     EVP_CIPHER_CTX_cleanup(ctx);\n-\n     EVP_CIPHER_CTX_free(ctx);\n+    ERR_remove_thread_state(nullptr);",
    "path": "src/wallet/test/crypto_tests.cpp",
    "position": null,
    "original_position": 14,
    "commit_id": "a897d0e37a02d29907c3a3f0f6536a26a155751d",
    "original_commit_id": "b3afb6242ec64b7c1f161ff6125b6c1faa801652",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'm not sure I understand this. OpenSSL API is confusing, where is the symmetric \"create\" for this remove/free?\r\nSurprised that this needs `ERR_*` just to deallocate a structure that comes out of the blue.\r\nIs this related to cleanup in `~CInit()` in util.cpp?\r\n",
    "created_at": "2017-08-10T18:49:12Z",
    "updated_at": "2017-08-14T15:52:12Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11024#discussion_r132537260",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11024",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132537260"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11024#discussion_r132537260"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11024"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132537260/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 85,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132566921",
    "pull_request_review_id": 55664107,
    "id": 132566921,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMjU2NjkyMQ==",
    "diff_hunk": "@@ -80,8 +81,8 @@ bool OldDecrypt(const std::vector<unsigned char>& vchCiphertext, CKeyingMaterial\n     if (fOk) fOk = EVP_DecryptUpdate(ctx, &vchPlaintext[0], &nPLen, &vchCiphertext[0], nLen) != 0;\n     if (fOk) fOk = EVP_DecryptFinal_ex(ctx, (&vchPlaintext[0]) + nPLen, &nFLen) != 0;\n     EVP_CIPHER_CTX_cleanup(ctx);\n-\n     EVP_CIPHER_CTX_free(ctx);\n+    ERR_remove_thread_state(nullptr);",
    "path": "src/wallet/test/crypto_tests.cpp",
    "position": null,
    "original_position": 14,
    "commit_id": "a897d0e37a02d29907c3a3f0f6536a26a155751d",
    "original_commit_id": "b3afb6242ec64b7c1f161ff6125b6c1faa801652",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, the OpenSSL API is full of surprises! :-)\r\n\r\nThis is my understanding:\r\n\r\n`OldDecrypt(\u2026)` (in `crypto_tests.cpp`) [calls OpenSSL's `EVP_DecryptFinal_ex(\u2026)`](https://github.com/practicalswift/bitcoin/blob/b3afb6242ec64b7c1f161ff6125b6c1faa801652/src/wallet/test/crypto_tests.cpp#L82).\r\n\r\nIf `EVP_DecryptFinal_ex(\u2026)` encounters any errors [then `EVPerr(\u2026)` is called](https://github.com/openssl/openssl/blob/64846096b18340b9a39ddd29a7a0e23c56f22959/crypto/evp/evp_enc.c#L515-L516).\r\n\r\n[EVPerr(\u2026) is defined](https://github.com/openssl/openssl/blob/354ab3653c0f9a218d91d4e5679c738896253d26/include/openssl/err.h#L103) as:\r\n\r\n```\r\n#define EVPerr(f,r)  ERR_PUT_error(ERR_LIB_EVP,(f),(r),OPENSSL_FILE,OPENSSL_LINE)\r\n```\r\n\r\n[`ERR_PUT_error(\u2026)`](https://github.com/openssl/openssl/blob/354ab3653c0f9a218d91d4e5679c738896253d26/crypto/err/err.c#L368-L403) stores stores the errors in a thread local error queue for which the allocations are made using [`OPENSSL_zalloc(\u2026)` in `ERR_get_state(\u2026)`](https://github.com/openssl/openssl/blob/354ab3653c0f9a218d91d4e5679c738896253d26/crypto/err/err.c#L682-L707).",
    "created_at": "2017-08-10T21:02:24Z",
    "updated_at": "2017-08-14T15:52:12Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11024#discussion_r132566921",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11024",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132566921"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11024#discussion_r132566921"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11024"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132566921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 85,
    "side": "RIGHT",
    "in_reply_to_id": 132537260
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132576551",
    "pull_request_review_id": 55674553,
    "id": 132576551,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMjU3NjU1MQ==",
    "diff_hunk": "@@ -80,8 +81,8 @@ bool OldDecrypt(const std::vector<unsigned char>& vchCiphertext, CKeyingMaterial\n     if (fOk) fOk = EVP_DecryptUpdate(ctx, &vchPlaintext[0], &nPLen, &vchCiphertext[0], nLen) != 0;\n     if (fOk) fOk = EVP_DecryptFinal_ex(ctx, (&vchPlaintext[0]) + nPLen, &nFLen) != 0;\n     EVP_CIPHER_CTX_cleanup(ctx);\n-\n     EVP_CIPHER_CTX_free(ctx);\n+    ERR_remove_thread_state(nullptr);",
    "path": "src/wallet/test/crypto_tests.cpp",
    "position": null,
    "original_position": 14,
    "commit_id": "a897d0e37a02d29907c3a3f0f6536a26a155751d",
    "original_commit_id": "b3afb6242ec64b7c1f161ff6125b6c1faa801652",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`ERR_remove_thread_state(nullptr)` must be run for each thread as I've understood it, so I don't think putting it in `~CInit()` would be the right thing to do?",
    "created_at": "2017-08-10T21:47:40Z",
    "updated_at": "2017-08-14T15:52:12Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11024#discussion_r132576551",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11024",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132576551"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11024#discussion_r132576551"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11024"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132576551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 85,
    "side": "RIGHT",
    "in_reply_to_id": 132537260
  }
]