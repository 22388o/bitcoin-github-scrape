[
  {
    "sha": "827b1b61c97ecc6d058fdbd23fb403be54e20f11",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4MjdiMWI2MWM5N2VjYzZkMDU4ZmRiZDIzZmI0MDNiZTU0ZTIwZjEx",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2020-05-06T13:37:02Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2020-11-13T13:57:49Z"
      },
      "message": "build: Abstract release tarball generation to a utility script make_release_tarball",
      "tree": {
        "sha": "387afcc6a495b3ea57ca57850dffcd4c23a54e04",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/387afcc6a495b3ea57ca57850dffcd4c23a54e04"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/827b1b61c97ecc6d058fdbd23fb403be54e20f11",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/827b1b61c97ecc6d058fdbd23fb403be54e20f11",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/827b1b61c97ecc6d058fdbd23fb403be54e20f11",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/827b1b61c97ecc6d058fdbd23fb403be54e20f11/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0bd4929cd00e91bf4137f43b097cd62f72f503e4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0bd4929cd00e91bf4137f43b097cd62f72f503e4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0bd4929cd00e91bf4137f43b097cd62f72f503e4"
      }
    ],
    "stats": {
      "total": 18,
      "additions": 14,
      "deletions": 4
    },
    "files": [
      {
        "sha": "adda286fea75032530f91aee966afa4be2955177",
        "filename": "contrib/gitian-descriptors/gitian-linux.yml",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/827b1b61c97ecc6d058fdbd23fb403be54e20f11/contrib/gitian-descriptors/gitian-linux.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/827b1b61c97ecc6d058fdbd23fb403be54e20f11/contrib/gitian-descriptors/gitian-linux.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-linux.yml?ref=827b1b61c97ecc6d058fdbd23fb403be54e20f11",
        "patch": "@@ -112,7 +112,7 @@ script: |\n \n   # Create the source tarball\n   mkdir -p \"$(dirname \"$GIT_ARCHIVE\")\"\n-  git archive --prefix=\"${DISTNAME}/\" --output=\"$GIT_ARCHIVE\" HEAD\n+  contrib/gitian-descriptors/make_release_tarball \"${GIT_ARCHIVE}\"\n \n   ORIGPATH=\"$PATH\"\n   # Extract the git archive into a dir for each host and build"
      },
      {
        "sha": "6493fb7f16f8b0259aeffcdd8e12b85622ed808a",
        "filename": "contrib/gitian-descriptors/gitian-osx.yml",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/827b1b61c97ecc6d058fdbd23fb403be54e20f11/contrib/gitian-descriptors/gitian-osx.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/827b1b61c97ecc6d058fdbd23fb403be54e20f11/contrib/gitian-descriptors/gitian-osx.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-osx.yml?ref=827b1b61c97ecc6d058fdbd23fb403be54e20f11",
        "patch": "@@ -111,7 +111,7 @@ script: |\n \n   # Create the source tarball\n   mkdir -p \"$(dirname \"$GIT_ARCHIVE\")\"\n-  git archive --prefix=\"${DISTNAME}/\" --output=\"$GIT_ARCHIVE\" HEAD\n+  contrib/gitian-descriptors/make_release_tarball \"${GIT_ARCHIVE}\"\n \n   ORIGPATH=\"$PATH\"\n   # Extract the git archive into a dir for each host and build"
      },
      {
        "sha": "c82a4a8c9a85a190f325651fe0693726db6d55fd",
        "filename": "contrib/gitian-descriptors/gitian-win.yml",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/827b1b61c97ecc6d058fdbd23fb403be54e20f11/contrib/gitian-descriptors/gitian-win.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/827b1b61c97ecc6d058fdbd23fb403be54e20f11/contrib/gitian-descriptors/gitian-win.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-win.yml?ref=827b1b61c97ecc6d058fdbd23fb403be54e20f11",
        "patch": "@@ -116,7 +116,7 @@ script: |\n \n   # Create the source tarball\n   mkdir -p \"$(dirname \"$GIT_ARCHIVE\")\"\n-  git archive --prefix=\"${DISTNAME}/\" --output=\"$GIT_ARCHIVE\" HEAD\n+  contrib/gitian-descriptors/make_release_tarball \"${GIT_ARCHIVE}\"\n \n   ORIGPATH=\"$PATH\"\n   # Extract the git archive into a dir for each host and build"
      },
      {
        "sha": "e06836dfa736e54b7cc25385031d7ecf0430b057",
        "filename": "contrib/gitian-descriptors/make_release_tarball",
        "status": "added",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/827b1b61c97ecc6d058fdbd23fb403be54e20f11/contrib/gitian-descriptors/make_release_tarball",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/827b1b61c97ecc6d058fdbd23fb403be54e20f11/contrib/gitian-descriptors/make_release_tarball",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/make_release_tarball?ref=827b1b61c97ecc6d058fdbd23fb403be54e20f11",
        "patch": "@@ -0,0 +1,10 @@\n+#!/bin/sh\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# A helper script to generate source release tarball\n+\n+GIT_ARCHIVE=\"$1\"\n+. \"`dirname \"$0\"`/assign_DISTNAME\"\n+git archive --prefix=\"${DISTNAME}/\" --output=\"${GIT_ARCHIVE}\" HEAD"
      },
      {
        "sha": "2464da3b1bdb668b414eba86e7873105ac703f3c",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/827b1b61c97ecc6d058fdbd23fb403be54e20f11/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/827b1b61c97ecc6d058fdbd23fb403be54e20f11/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=827b1b61c97ecc6d058fdbd23fb403be54e20f11",
        "patch": "@@ -158,7 +158,7 @@ GIT_ARCHIVE=\"${OUTDIR}/src/${DISTNAME}.tar.gz\"\n # Create the source tarball if not already there\n if [ ! -e \"$GIT_ARCHIVE\" ]; then\n     mkdir -p \"$(dirname \"$GIT_ARCHIVE\")\"\n-    git archive --prefix=\"${DISTNAME}/\" --output=\"$GIT_ARCHIVE\" HEAD\n+    contrib/gitian-descriptors/make_release_tarball \"${GIT_ARCHIVE}\"\n fi\n \n ###########################"
      }
    ]
  },
  {
    "sha": "1a606ef885fd0701a7f2b8a0040723826fd2876a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxYTYwNmVmODg1ZmQwNzAxYTdmMmI4YTAwNDA3MjM4MjZmZDI4NzZh",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2020-04-29T00:23:13Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2020-11-13T13:57:53Z"
      },
      "message": "build: Run autogen & distclean when generating source tarball",
      "tree": {
        "sha": "4ad87aa38333f43ef5658117be79d2ea335f9dea",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4ad87aa38333f43ef5658117be79d2ea335f9dea"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1a606ef885fd0701a7f2b8a0040723826fd2876a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1a606ef885fd0701a7f2b8a0040723826fd2876a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1a606ef885fd0701a7f2b8a0040723826fd2876a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1a606ef885fd0701a7f2b8a0040723826fd2876a/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "827b1b61c97ecc6d058fdbd23fb403be54e20f11",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/827b1b61c97ecc6d058fdbd23fb403be54e20f11",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/827b1b61c97ecc6d058fdbd23fb403be54e20f11"
      }
    ],
    "stats": {
      "total": 43,
      "additions": 34,
      "deletions": 9
    },
    "files": [
      {
        "sha": "3ac7bcddad2ce3e73b92a03bc529e56a007d4547",
        "filename": "contrib/gitian-descriptors/gitian-linux.yml",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1a606ef885fd0701a7f2b8a0040723826fd2876a/contrib/gitian-descriptors/gitian-linux.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1a606ef885fd0701a7f2b8a0040723826fd2876a/contrib/gitian-descriptors/gitian-linux.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-linux.yml?ref=1a606ef885fd0701a7f2b8a0040723826fd2876a",
        "patch": "@@ -110,8 +110,10 @@ script: |\n \n   GIT_ARCHIVE=\"${OUTDIR}/src/${DISTNAME}.tar.gz\"\n \n-  # Create the source tarball\n+  # Create the release tarball using (arbitrarily) the first host\n   mkdir -p \"$(dirname \"$GIT_ARCHIVE\")\"\n+  CONFIG_SITE=\"${BASEPREFIX}/${HOSTS/ */}/share/config.site\" \\\n+  REFERENCE_DATETIME=\"${REFERENCE_DATETIME}\" \\\n   contrib/gitian-descriptors/make_release_tarball \"${GIT_ARCHIVE}\"\n \n   ORIGPATH=\"$PATH\"\n@@ -131,7 +133,6 @@ script: |\n     mkdir -p ${INSTALLPATH}\n     tar --strip-components=1 -xf \"${GIT_ARCHIVE}\"\n \n-    ./autogen.sh\n     CONFIG_SITE=${BASEPREFIX}/${i}/share/config.site ./configure --prefix=/ --disable-ccache --disable-maintainer-mode --disable-dependency-tracking ${CONFIGFLAGS} CFLAGS=\"${HOST_CFLAGS}\" CXXFLAGS=\"${HOST_CXXFLAGS}\" LDFLAGS=\"${HOST_LDFLAGS}\"\n     make ${MAKEOPTS}\n     make ${MAKEOPTS} -C src check-security"
      },
      {
        "sha": "60c01eb8df84b88bc76416716920e6422879acf1",
        "filename": "contrib/gitian-descriptors/gitian-osx.yml",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1a606ef885fd0701a7f2b8a0040723826fd2876a/contrib/gitian-descriptors/gitian-osx.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1a606ef885fd0701a7f2b8a0040723826fd2876a/contrib/gitian-descriptors/gitian-osx.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-osx.yml?ref=1a606ef885fd0701a7f2b8a0040723826fd2876a",
        "patch": "@@ -109,8 +109,10 @@ script: |\n \n   GIT_ARCHIVE=\"${OUTDIR}/src/${DISTNAME}.tar.gz\"\n \n-  # Create the source tarball\n+  # Create the release tarball using (arbitrarily) the first host\n   mkdir -p \"$(dirname \"$GIT_ARCHIVE\")\"\n+  CONFIG_SITE=\"${BASEPREFIX}/${HOSTS/ */}/share/config.site\" \\\n+  REFERENCE_DATETIME=\"${REFERENCE_DATETIME}\" \\\n   contrib/gitian-descriptors/make_release_tarball \"${GIT_ARCHIVE}\"\n \n   ORIGPATH=\"$PATH\"\n@@ -123,7 +125,6 @@ script: |\n     mkdir -p ${INSTALLPATH}\n     tar --strip-components=1 -xf \"${GIT_ARCHIVE}\"\n \n-    ./autogen.sh\n     CONFIG_SITE=${BASEPREFIX}/${i}/share/config.site ./configure --prefix=/ --disable-ccache --disable-maintainer-mode --disable-dependency-tracking ${CONFIGFLAGS}\n     make ${MAKEOPTS}\n     make ${MAKEOPTS} -C src check-security"
      },
      {
        "sha": "75533975b092240d0cf6b1caaa9ba2c43de6c885",
        "filename": "contrib/gitian-descriptors/gitian-win.yml",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1a606ef885fd0701a7f2b8a0040723826fd2876a/contrib/gitian-descriptors/gitian-win.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1a606ef885fd0701a7f2b8a0040723826fd2876a/contrib/gitian-descriptors/gitian-win.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-win.yml?ref=1a606ef885fd0701a7f2b8a0040723826fd2876a",
        "patch": "@@ -114,8 +114,10 @@ script: |\n \n   GIT_ARCHIVE=\"${OUTDIR}/src/${DISTNAME}.tar.gz\"\n \n-  # Create the source tarball\n+  # Create the release tarball using (arbitrarily) the first host\n   mkdir -p \"$(dirname \"$GIT_ARCHIVE\")\"\n+  CONFIG_SITE=\"${BASEPREFIX}/${HOSTS/ */}/share/config.site\" \\\n+  REFERENCE_DATETIME=\"${REFERENCE_DATETIME}\" \\\n   contrib/gitian-descriptors/make_release_tarball \"${GIT_ARCHIVE}\"\n \n   ORIGPATH=\"$PATH\"\n@@ -128,7 +130,6 @@ script: |\n     mkdir -p ${INSTALLPATH}\n     tar --strip-components=1 -xf \"${GIT_ARCHIVE}\"\n \n-    ./autogen.sh\n     CONFIG_SITE=${BASEPREFIX}/${i}/share/config.site ./configure --prefix=/ --disable-ccache --disable-maintainer-mode --disable-dependency-tracking ${CONFIGFLAGS} CFLAGS=\"${HOST_CFLAGS}\" CXXFLAGS=\"${HOST_CXXFLAGS}\"\n     make ${MAKEOPTS}\n     make ${MAKEOPTS} -C src check-security"
      },
      {
        "sha": "a3c4e824e756e85fdd72f307572dffc62ccc7281",
        "filename": "contrib/gitian-descriptors/make_release_tarball",
        "status": "modified",
        "additions": 24,
        "deletions": 1,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1a606ef885fd0701a7f2b8a0040723826fd2876a/contrib/gitian-descriptors/make_release_tarball",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1a606ef885fd0701a7f2b8a0040723826fd2876a/contrib/gitian-descriptors/make_release_tarball",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/make_release_tarball?ref=1a606ef885fd0701a7f2b8a0040723826fd2876a",
        "patch": "@@ -5,6 +5,29 @@\n #\n # A helper script to generate source release tarball\n \n+set -e\n+\n GIT_ARCHIVE=\"$1\"\n . \"`dirname \"$0\"`/assign_DISTNAME\"\n-git archive --prefix=\"${DISTNAME}/\" --output=\"${GIT_ARCHIVE}\" HEAD\n+\n+git archive --prefix=\"${DISTNAME}/\" HEAD | tar -xp\n+cd \"${DISTNAME}\"\n+\n+./autogen.sh\n+./configure --prefix=/ --disable-ccache --disable-maintainer-mode --disable-dependency-tracking\n+make distclean\n+\n+cd ..\n+tar \\\n+  --format=ustar \\\n+  --exclude autom4te.cache \\\n+  --exclude .deps \\\n+  --exclude .git \\\n+  --sort=name \\\n+  --mode='u+rw,go+r-w,a+X' --owner=0 --group=0 \\\n+  --mtime=\"${REFERENCE_DATETIME}\" \\\n+  -c \"${DISTNAME}\" | \\\n+  gzip -9n \\\n+  >\"${GIT_ARCHIVE}\"\n+\n+rm -r \"${DISTNAME}\""
      },
      {
        "sha": "cc4cea6b47a3fb3a23473c11ca242e89e0632939",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1a606ef885fd0701a7f2b8a0040723826fd2876a/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1a606ef885fd0701a7f2b8a0040723826fd2876a/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=1a606ef885fd0701a7f2b8a0040723826fd2876a",
        "patch": "@@ -158,6 +158,7 @@ GIT_ARCHIVE=\"${OUTDIR}/src/${DISTNAME}.tar.gz\"\n # Create the source tarball if not already there\n if [ ! -e \"$GIT_ARCHIVE\" ]; then\n     mkdir -p \"$(dirname \"$GIT_ARCHIVE\")\"\n+    CONFIG_SITE=\"${BASEPREFIX}/${HOST}/share/config.site\" \\\n     contrib/gitian-descriptors/make_release_tarball \"${GIT_ARCHIVE}\"\n fi\n \n@@ -195,8 +196,6 @@ export PATH=\"${BASEPREFIX}/${HOST}/native/bin:${PATH}\"\n     # Extract the source tarball\n     tar --strip-components=1 -xf \"${GIT_ARCHIVE}\"\n \n-    ./autogen.sh\n-\n     # Configure this DISTSRC for $HOST\n     # shellcheck disable=SC2086\n     env CONFIG_SITE=\"${BASEPREFIX}/${HOST}/share/config.site\" \\"
      }
    ]
  },
  {
    "sha": "4ea29f2e880f448487cf1d690d5b25f148706c00",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0ZWEyOWYyZTg4MGY0NDg0ODdjZjFkNjkwZDViMjVmMTQ4NzA2YzAw",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2016-02-12T05:36:55Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2020-11-13T14:03:28Z"
      },
      "message": "Bugfix: Only use git for build info if the repository is actually the right one\n\nOriginal-Github-Pull: #7522\nRebased-From: e98e3dde6a976a2c8f266ee963d6931fd4b37262 e98e3dde6a976a2c8f266ee963d6931fd4b37262",
      "tree": {
        "sha": "d03929e582526c839a1e804262133b69ffba0492",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d03929e582526c839a1e804262133b69ffba0492"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4ea29f2e880f448487cf1d690d5b25f148706c00",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4ea29f2e880f448487cf1d690d5b25f148706c00",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/4ea29f2e880f448487cf1d690d5b25f148706c00",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4ea29f2e880f448487cf1d690d5b25f148706c00/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1a606ef885fd0701a7f2b8a0040723826fd2876a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1a606ef885fd0701a7f2b8a0040723826fd2876a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1a606ef885fd0701a7f2b8a0040723826fd2876a"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 6,
      "deletions": 1
    },
    "files": [
      {
        "sha": "33659b967fe65eb6b7a569ae8d74d6eab44e9549",
        "filename": "share/genbuild.sh",
        "status": "modified",
        "additions": 6,
        "deletions": 1,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4ea29f2e880f448487cf1d690d5b25f148706c00/share/genbuild.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4ea29f2e880f448487cf1d690d5b25f148706c00/share/genbuild.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/share/genbuild.sh?ref=4ea29f2e880f448487cf1d690d5b25f148706c00",
        "patch": "@@ -18,9 +18,14 @@ else\n     exit 1\n fi\n \n+# This checks that we are actually part of the intended git repository, and not just getting info about some unrelated git repository that the code happens to be in a directory under\n+git_check_in_repo() {\n+    ! { git status --porcelain -uall --ignored \"$@\" 2>/dev/null || echo '??'; } | grep -q '?'\n+}\n+\n GIT_TAG=\"\"\n GIT_COMMIT=\"\"\n-if [ \"${BITCOIN_GENBUILD_NO_GIT}\" != \"1\" ] && [ -e \"$(command -v git)\" ] && [ \"$(git rev-parse --is-inside-work-tree 2>/dev/null)\" = \"true\" ]; then\n+if [ \"${BITCOIN_GENBUILD_NO_GIT}\" != \"1\" ] && [ -e \"$(command -v git)\" ] && [ \"$(git rev-parse --is-inside-work-tree 2>/dev/null)\" = \"true\" ] && git_check_in_repo share/genbuild.sh; then\n     # clean 'dirty' status of touched files that haven't been modified\n     git diff >/dev/null 2>/dev/null\n "
      }
    ]
  },
  {
    "sha": "e09ae1176bc8953f4c8a2c94bbd37e5826984f8a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplMDlhZTExNzZiYzg5NTNmNGM4YTJjOTRiYmQzN2U1ODI2OTg0Zjhh",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2020-05-07T01:46:47Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2020-11-13T14:03:29Z"
      },
      "message": "build: Include tag name in release tarball for build.h",
      "tree": {
        "sha": "7bdf9f28f7ebcb9d080058127f20af73d2f25db2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7bdf9f28f7ebcb9d080058127f20af73d2f25db2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e09ae1176bc8953f4c8a2c94bbd37e5826984f8a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e09ae1176bc8953f4c8a2c94bbd37e5826984f8a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e09ae1176bc8953f4c8a2c94bbd37e5826984f8a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e09ae1176bc8953f4c8a2c94bbd37e5826984f8a/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4ea29f2e880f448487cf1d690d5b25f148706c00",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4ea29f2e880f448487cf1d690d5b25f148706c00",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4ea29f2e880f448487cf1d690d5b25f148706c00"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 8,
      "deletions": 1
    },
    "files": [
      {
        "sha": "9c348c270dc949bdd34dd3b9e664010ec0189aab",
        "filename": "contrib/gitian-descriptors/make_release_tarball",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e09ae1176bc8953f4c8a2c94bbd37e5826984f8a/contrib/gitian-descriptors/make_release_tarball",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e09ae1176bc8953f4c8a2c94bbd37e5826984f8a/contrib/gitian-descriptors/make_release_tarball",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/make_release_tarball?ref=e09ae1176bc8953f4c8a2c94bbd37e5826984f8a",
        "patch": "@@ -11,6 +11,11 @@ GIT_ARCHIVE=\"$1\"\n . \"`dirname \"$0\"`/assign_DISTNAME\"\n \n git archive --prefix=\"${DISTNAME}/\" HEAD | tar -xp\n+\n+# Generate correct build info file from git, before we lose git\n+GIT_BUILD_INFO=\"$(share/genbuild.sh /dev/stdout)\"\n+sed 's/\\/\\/ No build information available/'\"${GIT_BUILD_INFO}\"'/' -i \"${DISTNAME}/share/genbuild.sh\"\n+\n cd \"${DISTNAME}\"\n \n ./autogen.sh"
      },
      {
        "sha": "60c8cf4984fd51cfbc5adcbedc1e49243d6c7395",
        "filename": "share/genbuild.sh",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e09ae1176bc8953f4c8a2c94bbd37e5826984f8a/share/genbuild.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e09ae1176bc8953f4c8a2c94bbd37e5826984f8a/share/genbuild.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/share/genbuild.sh?ref=e09ae1176bc8953f4c8a2c94bbd37e5826984f8a",
        "patch": "@@ -45,7 +45,9 @@ if [ -n \"$GIT_TAG\" ]; then\n elif [ -n \"$GIT_COMMIT\" ]; then\n     NEWINFO=\"#define BUILD_GIT_COMMIT \\\"$GIT_COMMIT\\\"\"\n else\n-    NEWINFO=\"// No build information available\"\n+    # NOTE: The NEWINFO line below this comment gets replaced by a string-match in contrib/gitian-descriptors/make_release_tarball\n+    # If changing it, update the script too!\n+    NEWINFO='// No build information available'\n fi\n \n # only update build.h if necessary"
      }
    ]
  }
]