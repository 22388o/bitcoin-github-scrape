jnewbery,2020-07-24 15:47:34,This is the next PR in the #19398 sequence to move application data into net_processing.,https://github.com/bitcoin/bitcoin/pull/19583#issuecomment-663604274,663604274,
jnewbery,2020-07-25 14:53:14,"Thanks for the quick review @jonatack \n\n> I think the last two commits touching Misbehaving() can be squashed; \n\nDone",https://github.com/bitcoin/bitcoin/pull/19583#issuecomment-663864298,663864298,
jonatack,2020-07-25 16:06:39,"ACK a8865f8\n",https://github.com/bitcoin/bitcoin/pull/19583#issuecomment-663871887,663871887,
jnewbery,2020-07-26 13:33:31,"Thanks for the review @promag!\n\n> Dunno if this breaks some existing log parser, but it's an easy fix, unless it needs the peer IP.\n\nWe shouldn't be logging the peer IP inside net processing, and the I believe the only other place we do is during the version handshake. See https://github.com/bitcoin/bitcoin/pull/19472#discussion_r453060447.",https://github.com/bitcoin/bitcoin/pull/19583#issuecomment-663988697,663988697,
hebasto,2020-07-27 17:48:40,Concept ACK.,https://github.com/bitcoin/bitcoin/pull/19583#issuecomment-664543650,664543650,
Saibato,2020-07-24 15:50:03,"assert ?,==  DoS  ? ",https://github.com/bitcoin/bitcoin/pull/19583#discussion_r460138262,460138262,src/net_processing.cpp
jonatack,2020-07-25 12:50:35,"dd9b305 whitespace linter needs appeasing (rm space at EOL)\n```suggestion\n        // We never disconnect or discourage peers for bad behavior if they have the NOBAN permission flag\n```\n",https://github.com/bitcoin/bitcoin/pull/19583#discussion_r460402141,460402141,src/net_processing.cpp
jonatack,2020-07-25 12:52:02,"am reviewing anyway, so can wait on this until the review, if you like",https://github.com/bitcoin/bitcoin/pull/19583#discussion_r460402263,460402263,src/net_processing.cpp
jonatack,2020-07-25 13:11:26,"2d4e694 the log message might be more clear for users if s/unconnecting/non-connecting/...yes, in the codebase it is called unconnecting...but nicely enough, anyone grepping for ""non-connecting"" will see this line as the only result and link it immediately to `nUnconnectingHeaders`",https://github.com/bitcoin/bitcoin/pull/19583#discussion_r460403749,460403749,src/net_processing.cpp
jonatack,2020-07-25 13:25:12,"(Maybe just me, but ""unconnecting"" strikes me as confusing naming; it suggests disconnection when we are really talking about invalid or non-connecting header messages, unless I am misreading the code in `ProcessHeadersMessage()` in net_processing.cpp and `CBlockIndex* LookupBlockIndex` in validation.cpp.)",https://github.com/bitcoin/bitcoin/pull/19583#discussion_r460404881,460404881,src/net_processing.cpp
jnewbery,2020-07-25 14:51:15,Agree that unconnecting sounds more like a verb than an adjective. I've changed this to non-connecting.,https://github.com/bitcoin/bitcoin/pull/19583#discussion_r460412195,460412195,src/net_processing.cpp
jnewbery,2020-07-25 14:51:21,Fixed,https://github.com/bitcoin/bitcoin/pull/19583#discussion_r460412203,460412203,src/net_processing.cpp
promag,2020-07-26 10:24:58,"I've verified all callers, this is is correct.",https://github.com/bitcoin/bitcoin/pull/19583#discussion_r460508846,460508846,src/net_processing.cpp
Saibato,2020-07-26 18:07:23,"> I've verified all callers, this is is correct.\n\nWhile this is true,\nif you assert on a const that gives the cpu regs a lot of control power, imho. \n",https://github.com/bitcoin/bitcoin/pull/19583#discussion_r460556601,460556601,src/net_processing.cpp
sipa,2020-07-26 18:08:55,@saibato I have no clue what you're trying to say here.,https://github.com/bitcoin/bitcoin/pull/19583#discussion_r460556735,460556735,src/net_processing.cpp
Saibato,2020-07-26 18:12:58,"we changed  howmuch to const int , and then we assert, i saw such things optimized to regs. and the cpu is not always in your control and here we are at a net sanity check that should not be hookable.imho.  \n\n",https://github.com/bitcoin/bitcoin/pull/19583#discussion_r460557130,460557130,src/net_processing.cpp
sipa,2020-07-26 18:50:07,@saibato Please stop spewing gibberish.,https://github.com/bitcoin/bitcoin/pull/19583#discussion_r460560658,460560658,src/net_processing.cpp
troygiorshev,2020-07-27 18:29:30,"Bugs me that I can't find a way to check this at compile time (like `static_assert`), being that we're always giving this parameter an integer literal :/",https://github.com/bitcoin/bitcoin/pull/19583#discussion_r461086716,461086716,src/net_processing.cpp
sipa,2020-07-27 19:45:07,"If you make it a templated function, you can pass in howmuch as a template parameter, enabling static_asserts on it. That may be a bit overkill, though.",https://github.com/bitcoin/bitcoin/pull/19583#discussion_r461127103,461127103,src/net_processing.cpp
jnewbery,2020-07-27 21:27:56,"> That may be a bit overkill, though.\n\nAnd also would cause bloat in the built executable.\n\nIt's easy enough to grep all instances of Misbehaving. We don't need to automate everything :)",https://github.com/bitcoin/bitcoin/pull/19583#discussion_r461180680,461180680,src/net_processing.cpp
