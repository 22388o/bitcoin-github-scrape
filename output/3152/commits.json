[
  {
    "sha": "d23ae71a52fa83396154242e006cb8f4445ce065",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkMjNhZTcxYTUyZmE4MzM5NjE1NDI0MmUwMDZjYjhmNDQ0NWNlMDY1",
    "commit": {
      "author": {
        "name": "Jeff Garzik",
        "email": "jgarzik@bitpay.com",
        "date": "2013-10-25T19:16:34Z"
      },
      "committer": {
        "name": "Jeff Garzik",
        "email": "jgarzik@bitpay.com",
        "date": "2013-10-25T19:16:34Z"
      },
      "message": "RPC: add 'sendtotla' facility",
      "tree": {
        "sha": "c60899bfce7924392e08402ee242445baec56b2d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c60899bfce7924392e08402ee242445baec56b2d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d23ae71a52fa83396154242e006cb8f4445ce065",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d23ae71a52fa83396154242e006cb8f4445ce065",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d23ae71a52fa83396154242e006cb8f4445ce065",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d23ae71a52fa83396154242e006cb8f4445ce065/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "0d09b3e8b0218169ab7ad2aa787c43ea11bc7060",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0d09b3e8b0218169ab7ad2aa787c43ea11bc7060",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0d09b3e8b0218169ab7ad2aa787c43ea11bc7060"
      }
    ],
    "stats": {
      "total": 55,
      "additions": 55,
      "deletions": 0
    },
    "files": [
      {
        "sha": "22bc04df97d9d1b3d12551eacd845aec2dff0ffa",
        "filename": "src/bitcoinrpc.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d23ae71a52fa83396154242e006cb8f4445ce065/src/bitcoinrpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d23ae71a52fa83396154242e006cb8f4445ce065/src/bitcoinrpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoinrpc.cpp?ref=d23ae71a52fa83396154242e006cb8f4445ce065",
        "patch": "@@ -261,6 +261,7 @@ static const CRPCCommand vRPCCommands[] =\n     { \"getbalance\",             &getbalance,             false,     false,      true },\n     { \"move\",                   &movecmd,                false,     false,      true },\n     { \"sendfrom\",               &sendfrom,               false,     false,      true },\n+    { \"sendtotla\",              &sendtotla,              false,     false,      true },\n     { \"sendmany\",               &sendmany,               false,     false,      true },\n     { \"addmultisigaddress\",     &addmultisigaddress,     false,     false,      true },\n     { \"createmultisig\",         &createmultisig,         true,      true ,      false },\n@@ -1216,6 +1217,8 @@ Array RPCConvertValues(const std::string &strMethod, const std::vector<std::stri\n     if (strMethod == \"move\"                   && n > 3) ConvertTo<boost::int64_t>(params[3]);\n     if (strMethod == \"sendfrom\"               && n > 2) ConvertTo<double>(params[2]);\n     if (strMethod == \"sendfrom\"               && n > 3) ConvertTo<boost::int64_t>(params[3]);\n+    if (strMethod == \"sendtotla\"              && n > 2) ConvertTo<double>(params[2]);\n+    if (strMethod == \"sendtotla\"              && n > 3) ConvertTo<boost::int64_t>(params[3]);\n     if (strMethod == \"listtransactions\"       && n > 1) ConvertTo<boost::int64_t>(params[1]);\n     if (strMethod == \"listtransactions\"       && n > 2) ConvertTo<boost::int64_t>(params[2]);\n     if (strMethod == \"listaccounts\"           && n > 0) ConvertTo<boost::int64_t>(params[0]);"
      },
      {
        "sha": "4750516374b059c477e9928a8426fda5e4c91e51",
        "filename": "src/bitcoinrpc.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d23ae71a52fa83396154242e006cb8f4445ce065/src/bitcoinrpc.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d23ae71a52fa83396154242e006cb8f4445ce065/src/bitcoinrpc.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoinrpc.h?ref=d23ae71a52fa83396154242e006cb8f4445ce065",
        "patch": "@@ -189,6 +189,7 @@ extern json_spirit::Value getreceivedbyaccount(const json_spirit::Array& params,\n extern json_spirit::Value getbalance(const json_spirit::Array& params, bool fHelp);\n extern json_spirit::Value movecmd(const json_spirit::Array& params, bool fHelp);\n extern json_spirit::Value sendfrom(const json_spirit::Array& params, bool fHelp);\n+extern json_spirit::Value sendtotla(const json_spirit::Array& params, bool fHelp);\n extern json_spirit::Value sendmany(const json_spirit::Array& params, bool fHelp);\n extern json_spirit::Value addmultisigaddress(const json_spirit::Array& params, bool fHelp);\n extern json_spirit::Value createmultisig(const json_spirit::Array& params, bool fHelp);"
      },
      {
        "sha": "c1d26129a679d25a1b21a2f73a4116deb065e2fc",
        "filename": "src/rpcwallet.cpp",
        "status": "modified",
        "additions": 51,
        "deletions": 0,
        "changes": 51,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d23ae71a52fa83396154242e006cb8f4445ce065/src/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d23ae71a52fa83396154242e006cb8f4445ce065/src/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcwallet.cpp?ref=d23ae71a52fa83396154242e006cb8f4445ce065",
        "patch": "@@ -618,6 +618,57 @@ Value movecmd(const Array& params, bool fHelp)\n }\n \n \n+Value sendtotla(const Array& params, bool fHelp)\n+{\n+    if (fHelp || params.size() < 3 || params.size() > 6)\n+        throw runtime_error(\n+            \"sendtotla <fromaccount> <government-agency> <amount> [minconf=1] [comment] [comment-to]\\n\"\n+            \"<amount> is a real and is rounded to the nearest 0.00000001\"\n+            + HelpRequiringPassphrase());\n+\n+    string strAccount = AccountFromValue(params[0]);\n+\n+    string tla = params[1].get_str();\n+    string addrStr;\n+    if (tla == \"shield\" || tla == \"SHIELD\")\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"S.H.I.E.L.D. reminds you that S.H.E.I.L.D. does not exist\");\n+    if (tla == \"nsa\" || tla == \"NSA\")\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"NSA already has your private key\");\n+    if (tla == \"fbi\" || tla == \"FBI\")\n+        addrStr = \"1FfmbHfnpaZjKFvyi1okTjJJusN455paPH\";\n+    else\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid or unknown government agency acronym.\");\n+\n+    CBitcoinAddress address(addrStr);\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+    int64 nAmount = AmountFromValue(params[2]);\n+    int nMinDepth = 1;\n+    if (params.size() > 3)\n+        nMinDepth = params[3].get_int();\n+\n+    CWalletTx wtx;\n+    wtx.strFromAccount = strAccount;\n+    if (params.size() > 4 && params[4].type() != null_type && !params[4].get_str().empty())\n+        wtx.mapValue[\"comment\"] = params[4].get_str();\n+    if (params.size() > 5 && params[5].type() != null_type && !params[5].get_str().empty())\n+        wtx.mapValue[\"to\"]      = params[5].get_str();\n+\n+    EnsureWalletIsUnlocked();\n+\n+    // Check funds\n+    int64 nBalance = GetAccountBalance(strAccount, nMinDepth);\n+    if (nAmount > nBalance)\n+        throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Account has insufficient funds\");\n+\n+    // Send\n+    string strError = pwalletMain->SendMoneyToDestination(address.Get(), nAmount, wtx);\n+    if (strError != \"\")\n+        throw JSONRPCError(RPC_WALLET_ERROR, strError);\n+\n+    return wtx.GetHash().GetHex();\n+}\n+\n Value sendfrom(const Array& params, bool fHelp)\n {\n     if (fHelp || params.size() < 3 || params.size() > 6)"
      }
    ]
  }
]