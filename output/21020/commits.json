[
  {
    "sha": "8746338abd7c0a8dab99de2b85cd563eb34028dd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4NzQ2MzM4YWJkN2MwYThkYWI5OWRlMmI4NWNkNTYzZWIzNDAyOGRk",
    "commit": {
      "author": {
        "name": "Sagar Tiwari",
        "email": "fctorial@gmail.com",
        "date": "2021-01-28T07:26:53Z"
      },
      "committer": {
        "name": "Sagar Tiwari",
        "email": "fctorial@gmail.com",
        "date": "2021-01-28T07:43:01Z"
      },
      "message": "implemented",
      "tree": {
        "sha": "89846cbe4d15db2d56e878b55cb87e78195475eb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/89846cbe4d15db2d56e878b55cb87e78195475eb"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8746338abd7c0a8dab99de2b85cd563eb34028dd",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8746338abd7c0a8dab99de2b85cd563eb34028dd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8746338abd7c0a8dab99de2b85cd563eb34028dd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8746338abd7c0a8dab99de2b85cd563eb34028dd/comments",
    "author": {
      "login": "fctorial",
      "id": 58381615,
      "node_id": "MDQ6VXNlcjU4MzgxNjE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/58381615?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fctorial",
      "html_url": "https://github.com/fctorial",
      "followers_url": "https://api.github.com/users/fctorial/followers",
      "following_url": "https://api.github.com/users/fctorial/following{/other_user}",
      "gists_url": "https://api.github.com/users/fctorial/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fctorial/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fctorial/subscriptions",
      "organizations_url": "https://api.github.com/users/fctorial/orgs",
      "repos_url": "https://api.github.com/users/fctorial/repos",
      "events_url": "https://api.github.com/users/fctorial/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fctorial/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fctorial",
      "id": 58381615,
      "node_id": "MDQ6VXNlcjU4MzgxNjE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/58381615?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fctorial",
      "html_url": "https://github.com/fctorial",
      "followers_url": "https://api.github.com/users/fctorial/followers",
      "following_url": "https://api.github.com/users/fctorial/following{/other_user}",
      "gists_url": "https://api.github.com/users/fctorial/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fctorial/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fctorial/subscriptions",
      "organizations_url": "https://api.github.com/users/fctorial/orgs",
      "repos_url": "https://api.github.com/users/fctorial/repos",
      "events_url": "https://api.github.com/users/fctorial/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fctorial/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9deba2de764f0043061d68cc3b984b9df67cf23b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9deba2de764f0043061d68cc3b984b9df67cf23b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9deba2de764f0043061d68cc3b984b9df67cf23b"
      }
    ],
    "stats": {
      "total": 38,
      "additions": 37,
      "deletions": 1
    },
    "files": [
      {
        "sha": "5b682c0a03a02a947921186c923f4b327fff8575",
        "filename": "test/lint/commit-script-check.sh",
        "status": "modified",
        "additions": 37,
        "deletions": 1,
        "changes": 38,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8746338abd7c0a8dab99de2b85cd563eb34028dd/test/lint/commit-script-check.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8746338abd7c0a8dab99de2b85cd563eb34028dd/test/lint/commit-script-check.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/lint/commit-script-check.sh?ref=8746338abd7c0a8dab99de2b85cd563eb34028dd",
        "patch": "@@ -1,4 +1,4 @@\n-#!/bin/sh\n+#!/usr/bin/env bash\n # Copyright (c) 2017-2020 The Bitcoin Core developers\n # Distributed under the MIT software license, see the accompanying\n # file COPYING or http://www.opensource.org/licenses/mit-license.php.\n@@ -17,6 +17,38 @@ if test \"x$1\" = \"x\"; then\n     exit 1\n fi\n \n+function verify_script () {\n+  local SCRIPT=$1\n+  # use file to trigger error since pipe commands are executed in subshell (can't use vars)\n+  local FLAG_FILE=/tmp/CSC_ERROR_$$\n+  (\n+  export PATH='/invalid'\n+  # ignore commands other than 'sed'\n+  function command_not_found_handle () {\n+    return 0;\n+  }\n+  # check for \"-i ''\" args being passed to sed\n+  function sed () {\n+    local i=1\n+    local n=$(( $# + 1 ))\n+    while [ $i -lt $n ]; do\n+      local j=$(( i + 1 ))\n+      if [[ ${!i} == \"-i\" ]] && [[ ${!j} == \"\" ]]; then\n+        echo '' > $FLAG_FILE\n+      fi\n+      i=$(( i + 1 ))\n+    done\n+  }\n+  eval $SCRIPT\n+  )\n+  if [ -e $FLAG_FILE ]; then\n+    rm $FLAG_FILE\n+    return 0\n+  else\n+    return 1\n+  fi\n+}\n+\n RET=0\n PREV_BRANCH=$(git name-rev --name-only HEAD)\n PREV_HEAD=$(git rev-parse HEAD)\n@@ -28,7 +60,11 @@ for commit in $(git rev-list --reverse $1); do\n             echo \"Error: missing script for: $commit\"\n             echo \"Failed\"\n             RET=1\n+        elif verify_script \"$SCRIPT\"; then\n+            echo ERROR: You are using BSD sed syntax \\(\"sed -i ''\"\\) which is incompatible with GNU sed\n+            RET=1\n         else\n+            verify_script \"$SCRIPT\"\n             echo \"Running script for: $commit\"\n             echo \"$SCRIPT\"\n             (eval \"$SCRIPT\")"
      }
    ]
  },
  {
    "sha": "3fa487b42444350ad28705f74013a5ee7bcfe9e5",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozZmE0ODdiNDI0NDQzNTBhZDI4NzA1Zjc0MDEzYTVlZTdiY2ZlOWU1",
    "commit": {
      "author": {
        "name": "Sagar Tiwari",
        "email": "fctorial@gmail.com",
        "date": "2021-01-28T08:54:13Z"
      },
      "committer": {
        "name": "Sagar Tiwari",
        "email": "fctorial@gmail.com",
        "date": "2021-01-28T09:03:06Z"
      },
      "message": "updated check",
      "tree": {
        "sha": "f695bec2021c2af92e7e056778eee254d9d69c63",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f695bec2021c2af92e7e056778eee254d9d69c63"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3fa487b42444350ad28705f74013a5ee7bcfe9e5",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3fa487b42444350ad28705f74013a5ee7bcfe9e5",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3fa487b42444350ad28705f74013a5ee7bcfe9e5",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3fa487b42444350ad28705f74013a5ee7bcfe9e5/comments",
    "author": {
      "login": "fctorial",
      "id": 58381615,
      "node_id": "MDQ6VXNlcjU4MzgxNjE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/58381615?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fctorial",
      "html_url": "https://github.com/fctorial",
      "followers_url": "https://api.github.com/users/fctorial/followers",
      "following_url": "https://api.github.com/users/fctorial/following{/other_user}",
      "gists_url": "https://api.github.com/users/fctorial/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fctorial/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fctorial/subscriptions",
      "organizations_url": "https://api.github.com/users/fctorial/orgs",
      "repos_url": "https://api.github.com/users/fctorial/repos",
      "events_url": "https://api.github.com/users/fctorial/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fctorial/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fctorial",
      "id": 58381615,
      "node_id": "MDQ6VXNlcjU4MzgxNjE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/58381615?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fctorial",
      "html_url": "https://github.com/fctorial",
      "followers_url": "https://api.github.com/users/fctorial/followers",
      "following_url": "https://api.github.com/users/fctorial/following{/other_user}",
      "gists_url": "https://api.github.com/users/fctorial/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fctorial/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fctorial/subscriptions",
      "organizations_url": "https://api.github.com/users/fctorial/orgs",
      "repos_url": "https://api.github.com/users/fctorial/repos",
      "events_url": "https://api.github.com/users/fctorial/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fctorial/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8746338abd7c0a8dab99de2b85cd563eb34028dd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8746338abd7c0a8dab99de2b85cd563eb34028dd",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8746338abd7c0a8dab99de2b85cd563eb34028dd"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 6,
      "deletions": 4
    },
    "files": [
      {
        "sha": "cf6e1222f990f042cadfe7bebe2a7c96c4f39740",
        "filename": "test/lint/commit-script-check.sh",
        "status": "modified",
        "additions": 6,
        "deletions": 4,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3fa487b42444350ad28705f74013a5ee7bcfe9e5/test/lint/commit-script-check.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3fa487b42444350ad28705f74013a5ee7bcfe9e5/test/lint/commit-script-check.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/lint/commit-script-check.sh?ref=3fa487b42444350ad28705f74013a5ee7bcfe9e5",
        "patch": "@@ -27,14 +27,16 @@ function verify_script () {\n   function command_not_found_handle () {\n     return 0;\n   }\n-  # check for \"-i ''\" args being passed to sed\n+  # check for \"-i\" args being passed to sed\n   function sed () {\n     local i=1\n     local n=$(( $# + 1 ))\n     while [ $i -lt $n ]; do\n       local j=$(( i + 1 ))\n-      if [[ ${!i} == \"-i\" ]] && [[ ${!j} == \"\" ]]; then\n-        echo '' > $FLAG_FILE\n+      if [[ ${!i} == \"-i\" ]]; then\n+        if [[ ${!j} == \"\" ]] || [[ -e ${!j} ]]; then\n+          echo '' > $FLAG_FILE\n+        fi\n       fi\n       i=$(( i + 1 ))\n     done\n@@ -61,7 +63,7 @@ for commit in $(git rev-list --reverse $1); do\n             echo \"Failed\"\n             RET=1\n         elif verify_script \"$SCRIPT\"; then\n-            echo ERROR: You are using BSD sed syntax \\(\"sed -i ''\"\\) which is incompatible with GNU sed\n+            echo ERROR: You are using BSD sed syntax for \"-i\" option, which is incompatible with GNU sed\n             RET=1\n         else\n             verify_script \"$SCRIPT\""
      }
    ]
  }
]