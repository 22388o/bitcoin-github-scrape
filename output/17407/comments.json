[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551306580",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-551306580",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
    "id": 551306580,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTMwNjU4MA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-07T23:03:37Z",
    "updated_at": "2019-11-07T23:03:37Z",
    "author_association": "MEMBER",
    "body": "> Going further in this direction, what would be the next steps ? Passing a mempool pointer to g_chainstate ?\r\n\r\ngood question. I have decided against that to not interwind chainstate (consensus) with mempool (policy). Otherwise this should be a member function: `CChainState::GetMempool`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551306580/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551309887",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-551309887",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
    "id": 551309887,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTMwOTg4Nw==",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-07T23:15:07Z",
    "updated_at": "2019-11-07T23:15:07Z",
    "author_association": "MEMBER",
    "body": "> I have decided against that to not interwind chainstate (consensus) with mempool (policy)\r\n\r\nThat means keeping `::mempool` as a global on the long-term? Anyway better to process incrementally, curious of your next PRs on this.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551309887/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551311633",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-551311633",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
    "id": 551311633,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTMxMTYzMw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-07T23:21:08Z",
    "updated_at": "2019-11-07T23:21:08Z",
    "author_association": "MEMBER",
    "body": "> That means keeping ::mempool as a global on the long-term? Anyway better to process incrementally, curious of your next PRs on this.\r\n\r\nYes, but it will become `Optional<CTxMemPool>` (or similar)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551311633/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551363596",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-551363596",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
    "id": 551363596,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTM2MzU5Ng==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T03:00:28Z",
    "updated_at": "2019-11-08T03:34:59Z",
    "author_association": "MEMBER",
    "body": "> Currently the mempool is a global that is initialized before the main function.\r\n\r\nThis PR doesn't appear to change that, but it sounds like this is the first step in some larger changes. Perhaps you could link to a branch that illustrates what you're planning to do next.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551363596/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551364928",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-551364928",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
    "id": 551364928,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTM2NDkyOA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T03:06:59Z",
    "updated_at": "2019-11-08T03:06:59Z",
    "author_association": "MEMBER",
    "body": "Ok, will upload my branches tomorrow",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551364928/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551895529",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-551895529",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
    "id": 551895529,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTg5NTUyOQ==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T16:28:30Z",
    "updated_at": "2019-11-08T22:00:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551895529/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551926300",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-551926300",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
    "id": 551926300,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTkyNjMwMA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T17:51:00Z",
    "updated_at": "2019-11-08T17:51:00Z",
    "author_association": "MEMBER",
    "body": "Ok, added some more documentation about future code design in the first commit",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551926300/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554074903",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-554074903",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
    "id": 554074903,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDA3NDkwMw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-14T20:53:57Z",
    "updated_at": "2019-11-14T20:53:57Z",
    "author_association": "MEMBER",
    "body": "Addressed @ryanofsky feedback",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554074903/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554114146",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-554114146",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
    "id": 554114146,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDExNDE0Ng==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-14T22:37:48Z",
    "updated_at": "2019-11-14T22:37:48Z",
    "author_association": "MEMBER",
    "body": "Concept ACK. Can you update the PR description, which makes it sound like this PR changes mempool from being a global that is initialized before `main`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554114146/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554350684",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-554350684",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
    "id": 554350684,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDM1MDY4NA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-15T13:02:16Z",
    "updated_at": "2019-11-15T13:02:16Z",
    "author_association": "MEMBER",
    "body": "Updated OP as requested by @jnewbery ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554350684/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554363367",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-554363367",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
    "id": 554363367,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDM2MzM2Nw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-15T13:44:00Z",
    "updated_at": "2019-11-15T13:44:00Z",
    "author_association": "MEMBER",
    "body": "> Could be done either here or in a separate PR depending on how complicated it is.\r\n\r\nNot complicated, but not a scripted-diff either. Maybe it could be combined with https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346488421, but that sounded more complicated to me.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554363367/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554472097",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-554472097",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
    "id": 554472097,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDQ3MjA5Nw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-15T18:19:51Z",
    "updated_at": "2019-11-15T18:19:51Z",
    "author_association": "MEMBER",
    "body": "> Is there a reason we can't make mempool a unique ptr in NodeContext?\r\n\r\nYes, the memory is not yet managed in `NodeContext`. The mempool is created before `main`, and the NodeContext is only created after main.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554472097/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554483727",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-554483727",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
    "id": 554483727,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDQ4MzcyNw==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-15T18:52:33Z",
    "updated_at": "2019-11-15T18:52:33Z",
    "author_association": "MEMBER",
    "body": "utACK fa538813b1c382cf135cbf2a0cc3fa01f36964d8\r\n\r\nLooking forward to mempool being a unique ptr managed by `NodeContext` in a future PR.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554483727/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343916849",
    "pull_request_review_id": 313691267,
    "id": 343916849,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzkxNjg0OQ==",
    "diff_hunk": "@@ -518,7 +518,9 @@ static UniValue getrawmempool(const JSONRPCRequest& request)\n     if (!request.params[0].isNull())\n         fVerbose = request.params[0].get_bool();\n \n-    return MempoolToJSON(::mempool, fVerbose);\n+    const CTxMemPool* tx_pool = MempoolInstance();\n+    CHECK_NONFATAL(tx_pool);",
    "path": "src/rpc/blockchain.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "ae73b972231084303ef436338786fac916209be7",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Due to RPC requests only being served after `SetRPCWarmupFinished` even after mempool is switched to a struct initialized during init sequence, it shouldn't never be null (but better to be secure if we refactor our init logic)",
    "created_at": "2019-11-07T22:53:02Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343916849",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343916849"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343916849"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343916849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 522,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343920529",
    "pull_request_review_id": 313695846,
    "id": 343920529,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzkyMDUyOQ==",
    "diff_hunk": "@@ -518,7 +518,9 @@ static UniValue getrawmempool(const JSONRPCRequest& request)\n     if (!request.params[0].isNull())\n         fVerbose = request.params[0].get_bool();\n \n-    return MempoolToJSON(::mempool, fVerbose);\n+    const CTxMemPool* tx_pool = MempoolInstance();\n+    CHECK_NONFATAL(tx_pool);",
    "path": "src/rpc/blockchain.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "ae73b972231084303ef436338786fac916209be7",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, obviously this should be adjusted when the mempool is truly optional. However I don't see the reason to add dead code right now.",
    "created_at": "2019-11-07T23:04:40Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343920529",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343920529"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343920529"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343920529/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 522,
    "side": "RIGHT",
    "in_reply_to_id": 343916849
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343922507",
    "pull_request_review_id": 313698437,
    "id": 343922507,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzkyMjUwNw==",
    "diff_hunk": "@@ -518,7 +518,9 @@ static UniValue getrawmempool(const JSONRPCRequest& request)\n     if (!request.params[0].isNull())\n         fVerbose = request.params[0].get_bool();\n \n-    return MempoolToJSON(::mempool, fVerbose);\n+    const CTxMemPool* tx_pool = MempoolInstance();\n+    CHECK_NONFATAL(tx_pool);",
    "path": "src/rpc/blockchain.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "ae73b972231084303ef436338786fac916209be7",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "My point was more currently the `CHECK_FATAL` is useless because RPC server accepting requests is the last thing in our init sequence. `CHECK_FATAL` hitting  would be a glaring logic error.",
    "created_at": "2019-11-07T23:11:26Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343922507",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343922507"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343922507"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343922507/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 522,
    "side": "RIGHT",
    "in_reply_to_id": 343916849
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343924679",
    "pull_request_review_id": 313701191,
    "id": 343924679,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzkyNDY3OQ==",
    "diff_hunk": "@@ -518,7 +518,9 @@ static UniValue getrawmempool(const JSONRPCRequest& request)\n     if (!request.params[0].isNull())\n         fVerbose = request.params[0].get_bool();\n \n-    return MempoolToJSON(::mempool, fVerbose);\n+    const CTxMemPool* tx_pool = MempoolInstance();\n+    CHECK_NONFATAL(tx_pool);",
    "path": "src/rpc/blockchain.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "ae73b972231084303ef436338786fac916209be7",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> CHECK_FATAL is useless\r\n\r\nCHECK_NONFATAL is not useless. Its exact use case it to be used when the condition is assumed to be always true. This is the case here. See https://dev.visucore.com/bitcoin/doxygen/check_8h.html#a46a3e27097aa5e94bbf62075bad7016f\r\n\r\nI plan to introduce a `-nomempool` command line option, which makes the mempool go away (optional). When I fail to update this line of code, it will turn into a logic error and will properly throw a bug report.",
    "created_at": "2019-11-07T23:19:07Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343924679",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343924679"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343924679"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343924679/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 522,
    "side": "RIGHT",
    "in_reply_to_id": 343916849
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343960086",
    "pull_request_review_id": 313745470,
    "id": 343960086,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0Mzk2MDA4Ng==",
    "diff_hunk": "@@ -132,6 +132,10 @@ CTxMemPool mempool(&feeEstimator);\n /** Constant stuff for coinbase transactions we create: */\n CScript COINBASE_FLAGS;\n \n+CTxMemPool* MempoolInstance()\n+{\n+    return &::mempool;\n+}",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 7,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "ae73b972231084303ef436338786fac916209be7",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "If this function is supposed to replace uses of ::mempool in existing code, I think it'd be better to return a reference:\r\n\r\n```c++\r\nCTxMemPool& MempoolInstance()\r\n{\r\n    return ::mempool;\r\n}\r\n```\r\n\r\nnow and change it to:\r\n\r\n```c++\r\nCTxMemPool& MempoolInstance()\r\n{\r\n    CHECK_NONFATAL(::g_mempool);\r\n    return *::g_mempool;\r\n}\r\n```\r\n\r\nin the future when mempool is replaced by an optional or unique_ptr or similar.\r\n\r\nUsing a reference instead of a pointer for existing code is better because it won't burden the code with checking for nulls.\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/17407/files#issue-338259412\r\n\r\n> Finally, in the future someone might want to run a consensus-only full node\"\r\n\r\nIf new code is going to be added or existing code is going to be changed that expects the mempool to be null, this code could probably just access `g_mempool` directly instead of using the helper function. Or you could add different helper functions `CTxMemPool* OptionalMempoolInstance()` or `bool MempoolEnabled()` if referencing the global is a problem.",
    "created_at": "2019-11-08T01:56:14Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343960086",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343960086"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343960086"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343960086/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 135,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 138,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343963050",
    "pull_request_review_id": 313749191,
    "id": 343963050,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0Mzk2MzA1MA==",
    "diff_hunk": "@@ -132,6 +132,10 @@ CTxMemPool mempool(&feeEstimator);\n /** Constant stuff for coinbase transactions we create: */\n CScript COINBASE_FLAGS;\n \n+CTxMemPool* MempoolInstance()\n+{\n+    return &::mempool;\n+}",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 7,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "ae73b972231084303ef436338786fac916209be7",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> If this function is supposed to replace uses of ::mempool in existing code, I think it'd be better to return a reference:\r\n\r\nIt is *not* supposed to replace ::mempool in existing code. It is supposed to be what you refer to as \"different helper function\". I am happy to rename it to `OptionalMempoolInstance`, but I think that that is a bit too verbose.",
    "created_at": "2019-11-08T02:11:52Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343963050",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343963050"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343963050"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343963050/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 135,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 138,
    "side": "RIGHT",
    "in_reply_to_id": 343960086
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343969798",
    "pull_request_review_id": 313757717,
    "id": 343969798,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0Mzk2OTc5OA==",
    "diff_hunk": "@@ -132,6 +132,10 @@ CTxMemPool mempool(&feeEstimator);\n /** Constant stuff for coinbase transactions we create: */\n CScript COINBASE_FLAGS;\n \n+CTxMemPool* MempoolInstance()\n+{\n+    return &::mempool;\n+}",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 7,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "ae73b972231084303ef436338786fac916209be7",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Unclear what the next steps are here. It's hard to see how a function that doesn't log or check anything but just returns a pointer to a global could be useful, but it'd help if you could describe more literally how the function and global and function calls will change in the future.",
    "created_at": "2019-11-08T02:48:56Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343969798",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343969798"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343969798"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343969798/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 135,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 138,
    "side": "RIGHT",
    "in_reply_to_id": 343960086
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346488421",
    "pull_request_review_id": 317184773,
    "id": 346488421,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjQ4ODQyMQ==",
    "diff_hunk": "@@ -53,6 +54,14 @@ static Mutex cs_blockchange;\n static std::condition_variable cond_blockchange;\n static CUpdatedBlock latestblock;\n \n+CTxMemPool& EnsureMemPool()",
    "path": "src/rpc/blockchain.cpp",
    "position": 12,
    "original_position": 12,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "fa5329abb91ec4876f61967848901c6805ab5503",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"node: Add reference to mempool in NodeContext\" (fa5329abb91ec4876f61967848901c6805ab5503)\r\n\r\nThis looks good. It would be nice in the future to have similar functions for connman and banman in [`rpc/net.cpp`](https://github.com/bitcoin/bitcoin/blob/master/src/rpc/net.cpp) to minimize uses of `g_rpc_node`, and help that global go away at some point.\r\n\r\n(Maybe relevant:  One way `g_rpc_node` might go away is adding a `std::any context` member to `JSONRPCRequest` assigned to the node context, and having functions like `EnsureMempool` take `request` arguments and pull the context from the request.)",
    "created_at": "2019-11-14T18:56:01Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346488421",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346488421"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346488421"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346488421/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 57,
    "original_line": 57,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346489583",
    "pull_request_review_id": 317184773,
    "id": 346489583,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjQ4OTU4Mw==",
    "diff_hunk": "@@ -53,6 +54,14 @@ static Mutex cs_blockchange;\n static std::condition_variable cond_blockchange;\n static CUpdatedBlock latestblock;\n \n+CTxMemPool& EnsureMemPool()\n+{\n+    if (!g_rpc_node->mempool) {",
    "path": "src/rpc/blockchain.cpp",
    "position": 15,
    "original_position": 14,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "fa5329abb91ec4876f61967848901c6805ab5503",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"node: Add reference to mempool in NodeContext\" (fa5329abb91ec4876f61967848901c6805ab5503)\r\n\r\nCould also check g_rpc_node is not null, maybe using assert",
    "created_at": "2019-11-14T18:58:13Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346489583",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346489583"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346489583"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346489583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 60,
    "original_line": 60,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346493149",
    "pull_request_review_id": 317184773,
    "id": 346493149,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjQ5MzE0OQ==",
    "diff_hunk": "@@ -63,6 +63,9 @@ enum RPCErrorCode\n     RPC_CLIENT_INVALID_IP_OR_SUBNET = -30, //!< Invalid IP/Subnet\n     RPC_CLIENT_P2P_DISABLED         = -31, //!< No valid connection manager instance found\n \n+    //! Chain errors\n+    RPC_CLIENT_TX_POOL_DISABLED     = -33, //!< No transaction pool instance found",
    "path": "src/rpc/protocol.h",
    "position": null,
    "original_position": 5,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "fa5329abb91ec4876f61967848901c6805ab5503",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"node: Add reference to mempool in NodeContext\" (fa5329abb91ec4876f61967848901c6805ab5503)\r\n\r\nWould it be clearer to refer to the mempool instead of the tx pool or transaction pool? (I don't actually know, I'm just used to mempool over transaction pool.)",
    "created_at": "2019-11-14T19:05:46Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346493149",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346493149"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346493149"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346493149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 67,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346497982",
    "pull_request_review_id": 317184773,
    "id": 346497982,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjQ5Nzk4Mg==",
    "diff_hunk": "@@ -203,6 +197,11 @@ static void TestPackageSelection(const CChainParams& chainparams, const CScript&\n // NOTE: These tests rely on CreateNewBlock doing its own self-validation!\n BOOST_AUTO_TEST_CASE(CreateNewBlock_validity)\n {\n+    const auto TestSequenceLocks = [this](const CTransaction& tx, int flags) {",
    "path": "src/test/miner_tests.cpp",
    "position": null,
    "original_position": 17,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "fa19ddc2bf8ee8f1ce621611a90f8b9e380b1517",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"test: Replace recursive lock with AssertLockHeld\" (fa19ddc2bf8ee8f1ce621611a90f8b9e380b1517)\r\n\r\nInstead of `TestSequenceLocks` being a lambda and `TestPackageSelection` in fafe3d88d34f04c798d000ca0b315830d63a80eb taking an unconventionally named `m_node` argument, I think it might be better if both were test fixture methods:\r\n\r\n```c++\r\nclass MinerTest : public TestingSetup\r\n{\r\n    bool TestSequenceLocks(...);\r\n    void TestPackageSelection(...);\r\n};\r\n\r\nbool MinerTest::TestSequenceLocks(...) {...}\r\nvoid MinerTest::TestPackageSelection(...) {...}\r\n\r\nBOOST_FIXTURE_TEST_CASE(CreateNewBlock_validity, MinerTest) { ... }\r\n```\r\n\r\nThis should make the diffs here smaller and scripted diff simpler because `TestSequenceLocks` wouldn't need to move and `TestPackageSelection` arguments wouldn't have to change.",
    "created_at": "2019-11-14T19:15:35Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346497982",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346497982"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346497982"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346497982/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 200,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346539606",
    "pull_request_review_id": 317251787,
    "id": 346539606,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjUzOTYwNg==",
    "diff_hunk": "@@ -53,6 +54,14 @@ static Mutex cs_blockchange;\n static std::condition_variable cond_blockchange;\n static CUpdatedBlock latestblock;\n \n+CTxMemPool& EnsureMemPool()",
    "path": "src/rpc/blockchain.cpp",
    "position": 12,
    "original_position": 12,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "fa5329abb91ec4876f61967848901c6805ab5503",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Sounds like a nice follow-up pull request",
    "created_at": "2019-11-14T20:51:58Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346539606",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346539606"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346539606"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346539606/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 57,
    "original_line": 57,
    "side": "RIGHT",
    "in_reply_to_id": 346488421
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346539722",
    "pull_request_review_id": 317251934,
    "id": 346539722,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjUzOTcyMg==",
    "diff_hunk": "@@ -53,6 +54,14 @@ static Mutex cs_blockchange;\n static std::condition_variable cond_blockchange;\n static CUpdatedBlock latestblock;\n \n+CTxMemPool& EnsureMemPool()\n+{\n+    if (!g_rpc_node->mempool) {",
    "path": "src/rpc/blockchain.cpp",
    "position": 15,
    "original_position": 14,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "fa5329abb91ec4876f61967848901c6805ab5503",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done. added assert",
    "created_at": "2019-11-14T20:52:13Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346539722",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346539722"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346539722"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346539722/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 60,
    "original_line": 60,
    "side": "RIGHT",
    "in_reply_to_id": 346489583
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346540138",
    "pull_request_review_id": 317252505,
    "id": 346540138,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjU0MDEzOA==",
    "diff_hunk": "@@ -63,6 +63,9 @@ enum RPCErrorCode\n     RPC_CLIENT_INVALID_IP_OR_SUBNET = -30, //!< Invalid IP/Subnet\n     RPC_CLIENT_P2P_DISABLED         = -31, //!< No valid connection manager instance found\n \n+    //! Chain errors\n+    RPC_CLIENT_TX_POOL_DISABLED     = -33, //!< No transaction pool instance found",
    "path": "src/rpc/protocol.h",
    "position": null,
    "original_position": 5,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "fa5329abb91ec4876f61967848901c6805ab5503",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done. Renamed TX_POOL to MEMPOOL",
    "created_at": "2019-11-14T20:53:07Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346540138",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346540138"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346540138"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346540138/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 67,
    "side": "RIGHT",
    "in_reply_to_id": 346493149
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346540308",
    "pull_request_review_id": 317252700,
    "id": 346540308,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjU0MDMwOA==",
    "diff_hunk": "@@ -203,6 +197,11 @@ static void TestPackageSelection(const CChainParams& chainparams, const CScript&\n // NOTE: These tests rely on CreateNewBlock doing its own self-validation!\n BOOST_AUTO_TEST_CASE(CreateNewBlock_validity)\n {\n+    const auto TestSequenceLocks = [this](const CTransaction& tx, int flags) {",
    "path": "src/test/miner_tests.cpp",
    "position": null,
    "original_position": 17,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "fa19ddc2bf8ee8f1ce621611a90f8b9e380b1517",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed, I think",
    "created_at": "2019-11-14T20:53:30Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346540308",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346540308"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346540308"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346540308/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 200,
    "side": "RIGHT",
    "in_reply_to_id": 346497982
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346939228",
    "pull_request_review_id": 317772976,
    "id": 346939228,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjkzOTIyOA==",
    "diff_hunk": "@@ -53,6 +54,15 @@ static Mutex cs_blockchange;\n static std::condition_variable cond_blockchange;\n static CUpdatedBlock latestblock;\n \n+CTxMemPool& EnsureMemPool()\n+{\n+    CHECK_NONFATAL(g_rpc_node);\n+    if (!g_rpc_node->mempool) {\n+        throw JSONRPCError(RPC_CLIENT_MEMPOOL_DISABLED, \"Transaction pool disabled or instance not found\");",
    "path": "src/rpc/blockchain.cpp",
    "position": null,
    "original_position": 16,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Please use the name \"mempool\". I've never heard anyone refer to it as a 'transaction pool'",
    "created_at": "2019-11-15T17:49:34Z",
    "updated_at": "2019-11-15T18:40:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346939228",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346939228"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346939228"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346939228/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 61,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346958843",
    "pull_request_review_id": 317798848,
    "id": 346958843,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0Njk1ODg0Mw==",
    "diff_hunk": "@@ -53,6 +54,15 @@ static Mutex cs_blockchange;\n static std::condition_variable cond_blockchange;\n static CUpdatedBlock latestblock;\n \n+CTxMemPool& EnsureMemPool()\n+{\n+    CHECK_NONFATAL(g_rpc_node);\n+    if (!g_rpc_node->mempool) {\n+        throw JSONRPCError(RPC_CLIENT_MEMPOOL_DISABLED, \"Transaction pool disabled or instance not found\");",
    "path": "src/rpc/blockchain.cpp",
    "position": null,
    "original_position": 16,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done. Removed \"transaction pool\"",
    "created_at": "2019-11-15T18:41:09Z",
    "updated_at": "2019-11-15T18:41:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346958843",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346958843"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346958843"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346958843/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 61,
    "side": "RIGHT",
    "in_reply_to_id": 346939228
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347500524",
    "pull_request_review_id": 318489357,
    "id": 347500524,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzUwMDUyNA==",
    "diff_hunk": "@@ -63,6 +63,9 @@ enum RPCErrorCode\n     RPC_CLIENT_INVALID_IP_OR_SUBNET = -30, //!< Invalid IP/Subnet\n     RPC_CLIENT_P2P_DISABLED         = -31, //!< No valid connection manager instance found\n \n+    //! Chain errors",
    "path": "src/rpc/protocol.h",
    "position": 4,
    "original_position": 4,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "fac07f2038a3ccd5edadc6e6122c02fa30e697bd",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: I think this change dissociate further chain from mempool, so may qualify better as a mempool error.",
    "created_at": "2019-11-18T17:06:06Z",
    "updated_at": "2019-11-18T17:44:01Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r347500524",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347500524"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r347500524"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347500524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 66,
    "original_line": 66,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/348507286",
    "pull_request_review_id": 319873626,
    "id": 348507286,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0ODUwNzI4Ng==",
    "diff_hunk": "@@ -63,6 +63,9 @@ enum RPCErrorCode\n     RPC_CLIENT_INVALID_IP_OR_SUBNET = -30, //!< Invalid IP/Subnet\n     RPC_CLIENT_P2P_DISABLED         = -31, //!< No valid connection manager instance found\n \n+    //! Chain errors",
    "path": "src/rpc/protocol.h",
    "position": 4,
    "original_position": 4,
    "commit_id": "fa538813b1c382cf135cbf2a0cc3fa01f36964d8",
    "original_commit_id": "fac07f2038a3ccd5edadc6e6122c02fa30e697bd",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think it is fine to keep as is, as mempool and chain are closely related. Also, I'd rather not invalidate ACKs over this.",
    "created_at": "2019-11-20T14:20:36Z",
    "updated_at": "2019-11-20T14:20:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r348507286",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/348507286"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r348507286"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/348507286/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 66,
    "original_line": 66,
    "side": "RIGHT",
    "in_reply_to_id": 347500524
  }
]