[
  {
    "sha": "461e547877da0c04db69e067c923cc4540aab03a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0NjFlNTQ3ODc3ZGEwYzA0ZGI2OWUwNjdjOTIzY2M0NTQwYWFiMDNh",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2019-11-18T14:58:10Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2019-11-18T15:22:08Z"
      },
      "message": "doc: correct random.h docs after #17270",
      "tree": {
        "sha": "9fc7a9230c7dac91475ac98b91f614f6d4a9c1f5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9fc7a9230c7dac91475ac98b91f614f6d4a9c1f5"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/461e547877da0c04db69e067c923cc4540aab03a",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAl3StyMACgkQLuufXMCV\nJsGvVhAAradxTXo6vhrvwNrwYRtMETrNbuj+mr4zYL1gWs2OnHLH1m7gP6Vekja/\nVJLkM9D8ghSm2Ah3KUVl9ITPLqdHuznT/tiyYsrCk+Xt2G9e3lo0BqTHgsueO98Q\nk5MS+pMJd3Sz1m5MTKYub4f9dXNOc5oTJVlH3Fu0vpK3OZ1peyCiR731nUvC1SRm\nmfUMbJO4GDxRVa1n0iNhAUWrinqcEmOzk53sNT/yqGAnmwe2oCvIULxcQpettqD2\nHo3V9z/6W+8CT2Ltg9EAU26vgtzGpvmIiUkMqr8yaR7tJ78lOPv1ASiYf8pASi2e\n8RnKnnbSr57u3DKSIB3iHt7PgZiAyYqvEsRa5tA2d3xPDoZsR4HeAiJkYuzdEZeH\nd241Hy920N+91Mqw4JysmZVPqoC2kojjEUjAe5IFo68WHa0LR2C232Dq5YqSMUpf\nQumzdjPm1IRlZ1RNSeurnDoch0atjRC2AX1nQplJMy0JZ+hIJSWLE1NPgV12yEAW\nATuN2lEEqQOCXhhJ8MLFAv09nwKxFkhgVi7a+wWrmY3uCKcZHHGREWTs+tkU892O\nRGGFKQXD1tCFF45ND3udmhPYyzNh6jnbRtmtKQAT8eJN06m6/2X7lQ22g0nIE3/D\nPbpEQPq4OHTsw5zg7J7g8jCVUq360nOZGEw6WnSzf+NqSCBrRbQ=\n=FXWV\n-----END PGP SIGNATURE-----",
        "payload": "tree 9fc7a9230c7dac91475ac98b91f614f6d4a9c1f5\nparent 6fde676f647e3b43cf0f5b242a00896f361ea385\nauthor fanquake <fanquake@gmail.com> 1574089090 -0500\ncommitter fanquake <fanquake@gmail.com> 1574090528 -0500\n\ndoc: correct random.h docs after #17270\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/461e547877da0c04db69e067c923cc4540aab03a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/461e547877da0c04db69e067c923cc4540aab03a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/461e547877da0c04db69e067c923cc4540aab03a/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6fde676f647e3b43cf0f5b242a00896f361ea385",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6fde676f647e3b43cf0f5b242a00896f361ea385",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6fde676f647e3b43cf0f5b242a00896f361ea385"
      }
    ],
    "stats": {
      "total": 16,
      "additions": 8,
      "deletions": 8
    },
    "files": [
      {
        "sha": "c78a34ea45e89b729b95533a94c4ca3463d051e3",
        "filename": "src/random.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/461e547877da0c04db69e067c923cc4540aab03a/src/random.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/461e547877da0c04db69e067c923cc4540aab03a/src/random.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/random.cpp?ref=461e547877da0c04db69e067c923cc4540aab03a",
        "patch": "@@ -182,7 +182,7 @@ static uint64_t GetRdSeed() noexcept\n /* Access to other hardware random number generators could be added here later,\n  * assuming it is sufficiently fast (in the order of a few hundred CPU cycles).\n  * Slower sources should probably be invoked separately, and/or only from\n- * RandAddSeedSleep (which is called during idle background operation).\n+ * RandAddPeriodic (which is called once a minute).\n  */\n static void InitHardwareRand() {}\n static void ReportHardwareRand() {}"
      },
      {
        "sha": "76b3493c5dcf5f0406b725ea4f3ae971b4e173be",
        "filename": "src/random.h",
        "status": "modified",
        "additions": 7,
        "deletions": 7,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/461e547877da0c04db69e067c923cc4540aab03a/src/random.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/461e547877da0c04db69e067c923cc4540aab03a/src/random.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/random.h?ref=461e547877da0c04db69e067c923cc4540aab03a",
        "patch": "@@ -41,17 +41,17 @@\n  *   These entropy sources are slower, but designed to make sure the RNG state contains\n  *   fresh data that is unpredictable to attackers.\n  *\n- * - RandAddSeedSleep() seeds everything that fast seeding includes, but additionally:\n- *   - A high-precision timestamp before and after sleeping 1ms.\n- *   - (On Windows) Once every 10 minutes, performance monitoring data from the OS.\n- -   - Once every minute, strengthen the entropy for 10 ms using repeated SHA512.\n- *   These just exploit the fact the system is idle to improve the quality of the RNG\n- *   slightly.\n+ * - RandAddPeriodic() seeds everything that fast seeding includes, but additionally:\n+ *   - A high-precision timestamp\n+ *   - Dynamic environment data (performance monitoring, ...)\n+ *   - Strengthen the entropy for 10 ms using repeated SHA512.\n+ *   This is run once every minute.\n  *\n  * On first use of the RNG (regardless of what function is called first), all entropy\n  * sources used in the 'slow' seeder are included, but also:\n  * - 256 bits from the hardware RNG (rdseed or rdrand) when available.\n- * - (On Windows) Performance monitoring data from the OS.\n+ * - Dynamic environment data (performance monitoring, ...)\n+ * - Static environment data\n  * - Strengthen the entropy for 100 ms using repeated SHA512.\n  *\n  * When mixing in new entropy, H = SHA512(entropy || old_rng_state) is computed, and"
      }
    ]
  },
  {
    "sha": "55b2cb199c276781b6daa5438af2da57dea3ac52",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1NWIyY2IxOTljMjc2NzgxYjZkYWE1NDM4YWYyZGE1N2RlYTNhYzUy",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2019-11-18T15:21:28Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2019-11-18T15:22:17Z"
      },
      "message": "random: mark RandAddPeriodic and SeedPeriodic as noexcept\n\nThe usage of MilliSleep() in SeedPeriodic (previously SeedSleep) was\nremoved in #17270, meaning it, and its users can now be marked noexcept.",
      "tree": {
        "sha": "9569dd0449461ac6ffa5cd3b05d3bf5a07b0cc43",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9569dd0449461ac6ffa5cd3b05d3bf5a07b0cc43"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/55b2cb199c276781b6daa5438af2da57dea3ac52",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAl3StykACgkQLuufXMCV\nJsEkQw//YQ9iK5MVMuu+wIXqpnfmPaRFCOlrIy2exZDuf4aTAHXpRsxKBS2UcCuj\nkNRZfuwcP8ux9nkf2KovWB4iQMp+jBG2DixSlOuT1t8MHCj8ULml9sbYT6gRsrGw\nkOBdvuUVoFVS7vo/FqLS/D8DV4edrSx43dnR+t3gKnDb/unaEm0BUN8titQaErIP\nz5aJa8JQFcVab701gLsefqIoIbGM67Qt/80XzR8gNb0sjisbuVZRmkv7l2TQCUBU\nC6rpmBTmTZOYQyTD7o2MTYS69NLOQ7Zoru5s5Q9QpXUTNWGw9PccRqtJBaVRhdTt\n4QHO5T6cwszKoBe4Md9L9WhA7PVh3q29znjSY7sW5H4+GAdTCbENAqadTwfa+Y7q\nPWRP6hF3KoxhPmMloSyG6U/StGUFSxclBO/ZikCy8Fu115ePo77wLI6RlrMUQeQR\nsEm5UwTggCsWacjhn9+7sgMJi+5z6bLgwDgerFBrcNO4ZjSnEVYte46vPTlRUVH7\ns/s/YwaoH+VYf1wwz0LOs1DczIWEnId0JKiLYsNOy13Fze7xcU3te7J9qaCi5FB1\np/NiWJQTFJzcWYEdvBGv1ezGULyWF3g+0I9oxK7E9Ju2TFW4qBTFyuYoplRV0hMs\n3ZnhEweLEzs9F/qA/yQtCJPNmiywFqnaxImqBZJKyFtOhIyZ4Aw=\n=kiFS\n-----END PGP SIGNATURE-----",
        "payload": "tree 9569dd0449461ac6ffa5cd3b05d3bf5a07b0cc43\nparent 461e547877da0c04db69e067c923cc4540aab03a\nauthor fanquake <fanquake@gmail.com> 1574090488 -0500\ncommitter fanquake <fanquake@gmail.com> 1574090537 -0500\n\nrandom: mark RandAddPeriodic and SeedPeriodic as noexcept\n\nThe usage of MilliSleep() in SeedPeriodic (previously SeedSleep) was\nremoved in #17270, meaning it, and its users can now be marked noexcept.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/55b2cb199c276781b6daa5438af2da57dea3ac52",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/55b2cb199c276781b6daa5438af2da57dea3ac52",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/55b2cb199c276781b6daa5438af2da57dea3ac52/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "461e547877da0c04db69e067c923cc4540aab03a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/461e547877da0c04db69e067c923cc4540aab03a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/461e547877da0c04db69e067c923cc4540aab03a"
      }
    ],
    "stats": {
      "total": 18,
      "additions": 4,
      "deletions": 14
    },
    "files": [
      {
        "sha": "8c33e1260bd2960f17fe729990cd07ed3a6fceb9",
        "filename": "src/random.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 13,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/55b2cb199c276781b6daa5438af2da57dea3ac52/src/random.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/55b2cb199c276781b6daa5438af2da57dea3ac52/src/random.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/random.cpp?ref=55b2cb199c276781b6daa5438af2da57dea3ac52",
        "patch": "@@ -450,17 +450,7 @@ void LockingCallbackOpenSSL(int mode, int i, const char* file, int line) NO_THRE\n \n /* A note on the use of noexcept in the seeding functions below:\n  *\n- * None of the RNG code should ever throw any exception, with the sole exception\n- * of MilliSleep in SeedSleep, which can (and does) support interruptions which\n- * cause a boost::thread_interrupted to be thrown.\n- *\n- * This means that SeedSleep, and all functions that invoke it are throwing.\n- * However, we know that GetRandBytes() and GetStrongRandBytes() never trigger\n- * this sleeping logic, so they are noexcept. The same is true for all the\n- * GetRand*() functions that use GetRandBytes() indirectly.\n- *\n- * TODO: After moving away from interruptible boost-based thread management,\n- * everything can become noexcept here.\n+ * None of the RNG code should ever throw any exception.\n  */\n \n static void SeedTimestamp(CSHA512& hasher) noexcept\n@@ -516,7 +506,7 @@ static void SeedStrengthen(CSHA512& hasher, RNGState& rng, int microseconds) noe\n     Strengthen(strengthen_seed, microseconds, hasher);\n }\n \n-static void SeedPeriodic(CSHA512& hasher, RNGState& rng)\n+static void SeedPeriodic(CSHA512& hasher, RNGState& rng) noexcept\n {\n     // Everything that the 'fast' seeder includes\n     SeedFast(hasher);\n@@ -598,7 +588,7 @@ static void ProcRand(unsigned char* out, int num, RNGLevel level)\n \n void GetRandBytes(unsigned char* buf, int num) noexcept { ProcRand(buf, num, RNGLevel::FAST); }\n void GetStrongRandBytes(unsigned char* buf, int num) noexcept { ProcRand(buf, num, RNGLevel::SLOW); }\n-void RandAddPeriodic() { ProcRand(nullptr, 0, RNGLevel::PERIODIC); }\n+void RandAddPeriodic() noexcept { ProcRand(nullptr, 0, RNGLevel::PERIODIC); }\n \n bool g_mock_deterministic_tests{false};\n "
      },
      {
        "sha": "8af616f8ea4b3013480f50e3f8a51b18220dce8b",
        "filename": "src/random.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/55b2cb199c276781b6daa5438af2da57dea3ac52/src/random.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/55b2cb199c276781b6daa5438af2da57dea3ac52/src/random.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/random.h?ref=55b2cb199c276781b6daa5438af2da57dea3ac52",
        "patch": "@@ -88,7 +88,7 @@ void GetStrongRandBytes(unsigned char* buf, int num) noexcept;\n  *\n  * Thread-safe.\n  */\n-void RandAddPeriodic();\n+void RandAddPeriodic() noexcept;\n \n /**\n  * Fast randomness source. This is seeded once with secure random data, but"
      }
    ]
  }
]