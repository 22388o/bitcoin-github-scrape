practicalswift,2019-10-23 21:14:25,"Concept ACK\n\nDiversity in testing is good",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-545639170,545639170,
MarcoFalke,2019-10-23 21:15:25,"Even though it shouldn't fail, this fails with\n\n```\n/bin/bash: /home/travis/build/bitcoin/bitcoin/depends/arm-linux-gnueabihf/share/../native/bin/uic: cannot execute binary file: Exec format error\n```\n\nI might try to debug this locally some day...",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-545639534,545639534,
laanwj,2019-10-24 11:31:16,"Concept ACK\n\nI think the error has to do with using the output of cross-compilation for normal compilation; the ""native"" uic will be x86-64, the expected build platform.",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-545875719,545875719,
MarcoFalke,2019-10-24 12:22:58,"Oh, so we can't cross compile on arm64 to other arches?",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-545892498,545892498,
laanwj,2019-10-24 17:15:34,"> Oh, so we can't cross compile on arm64 to other arches?\n\nThere is no conceptual reason why not, but maybe not with how depends are set up right now. Not sure.\n\nBut I think I misunderstand what is happening. I thought the cross compile was from x86 to armhf. Is it cross-compiling from arm64 to armhf?\n\n(I didn't think so because I assumed you don't get the `Exec format error` between d",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-546016058,546016058,
MarcoFalke,2019-10-24 17:37:06,"travis offers arm64 (== aarch64 ) machines, so the cross compilation is on a arm64 host to an arm32 guest",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-546024217,546024217,
laanwj,2019-10-24 22:10:18,"So we're sure it's not using cached `arm-linux-gnueabihf` depends that have been built on x86-64? I can't think of any explanation why the native tools like `uic` (which are by definition not cross-compiled, but built with the native C++ compiler, so that they can be part of the build processs) would be the wrong architecture.",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-546123636,546123636,
MarcoFalke,2019-10-24 22:28:00,Good point. The depends cache is not invalidated when the compiler changes,https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-546128065,546128065,
laanwj,2019-10-25 09:52:47,"Looks like it finishes the build now, but the testing stage cannot find the binariesâ€¦ strange",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-546287345,546287345,
laanwj,2019-10-27 10:29:28,"I think I get the reason for this: you are executing ARM32 executables on ARM64 without dynamic linker and glibc installed. Missing the ELF interpreter will give the same ""not found"" error as missing the executable itself.\n\nI think this is package `libc6:armhf`.\n```\nodroid@odroid64:~$ dpkg -S /lib/ld-linux-armhf.so.3\nlibc6:armhf: /lib/ld-linux-armhf.so.3\n```\n",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-546681371,546681371,
MarcoFalke,2019-10-28 16:50:56,Added `libc6-armhf-armel-cross` to the install packages,https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-547040559,547040559,
laanwj,2019-10-28 19:53:08,"I think that's the old package naming. It should work though.\n\n> bionic (18.04LTS) (devel): Dummy package to get libc6:armhf installed [universe]\n> 2.27-3ubuntu1cross1: all \n",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-547117619,547117619,
MarcoFalke,2019-10-28 20:19:35,"It fails locally and on travis:\n\n```\n$ sudo apt install libc6-dev-armhf-armel-cross && make check -j 2\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nlibc6-dev-armhf-armel-cross is already the newest version (2.27-3ubuntu1cross1.1).\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\nMaking check in src\nmake[1]: Entering dire",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-547127907,547127907,
laanwj,2019-10-28 20:32:57,What is the output of `readelf -a test/test_bitcoin | grep interpreter`? does that file exist?,https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-547133322,547133322,
MarcoFalke,2019-10-28 20:46:28,"```\n$ readelf -a src/test/test_bitcoin | grep interpreter\n      [Requesting program interpreter: /lib/ld-linux-armhf.so.3]\n0x59004c <_ZNK5boost7runtime17value_interpreterIbLb0EE9interpretENS_9unit_test13basic_cstringIKcEES6_>: @0x9c7a78\n0x5957bc <_ZNK5boost7runtime17value_interpreterIjLb0EE9interpretENS_9unit_test13basic_cstringIKcEES6_>: @0x9c807c\n0x595dc0 <_ZNK5boost7runtime17value_int",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-547138522,547138522,
laanwj,2019-10-30 11:18:44,"It really needs to be in `/lib` for multi-arch to work.\n\nCan you try:\n```\ndpkg --add-architecture armhf\napt-get update\napt-get install libc6:armhf\n```",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-547853215,547853215,
MarcoFalke,2019-10-30 18:27:05,"I feel dumb for not trying that, but then I remember that it didn't work locally:\n\n\n```\n# dpkg --add-architecture armhf\nroot@729a87425702:/# apt update\nHit:1 http://security.ubuntu.com/ubuntu bionic-security InRelease\nHit:2 http://archive.ubuntu.com/ubuntu bionic InRelease\nHit:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease\nIgn:4 http://security.ubuntu.com/ubuntu bion",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-548050909,548050909,
laanwj,2019-10-30 18:29:48,"I'm confused; \n```\nroot@odroid64:~# cat /etc/lsb-release \nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=18.04\nDISTRIB_CODENAME=bionic\nDISTRIB_DESCRIPTION=""Ubuntu 18.04.3 LTS""\n\nroot@odroid64:~# apt update\nHit:1 http://ports.ubuntu.com/ubuntu-ports bionic InRelease\nHit:2 http://deb.odroid.in/c2 bionic InRelease                          \nGet:3 http://ports.ubuntu.com/ubuntu-ports bionic-upd",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-548052082,548052082,
MarcoFalke,2019-10-30 18:34:45,"Oh, I was running the `dpkg --add-architecture armhf` on x86_64 locally. Does that make it not work?\n\nEither way. Looks like on travis and the odroid c2 it worked. Let's hope it runs the tests now :pray: ",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-548054220,548054220,
laanwj,2019-10-30 18:38:21,"> Oh, I was running the dpkg --add-architecture armhf on x86_64 locally. Does that make it not work?\n\nI'm not sure. I think it *in principle* it should be possible to install armhf as additional architecture on x86 (using qemu-user to execute things), but it's a much less-traveled path than armhf on aarch64. You might have to mess around with apt configuration.\n",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-548055808,548055808,
MarcoFalke,2019-11-01 00:41:59,@laanwj Thanks for the help. Passes locally and on travis. This is ready for review now!,https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-548623032,548623032,
laanwj,2019-11-02 16:04:45,"Thanks for seeing this through!\n\nLGTM ACK facc0da63a8fa4bd6fc2782cbe92eb9f920f2256",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-549056982,549056982,
practicalswift,2019-11-02 17:33:55,"ACK facc0da63a8fa4bd6fc2782cbe92eb9f920f2256 -- diff looks correct and Travis seems happy\n\nThanks for working on this!",https://github.com/bitcoin/bitcoin/pull/17233#issuecomment-549064856,549064856,
