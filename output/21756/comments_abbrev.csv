laanwj,2021-04-22 20:37:54,Concept ACK,https://github.com/bitcoin/bitcoin/pull/21756#issuecomment-825168444,825168444,
shobitb,2021-05-17 03:03:00,"ACK c10f27fdb2d335954dd1017ce6d5800159427374\n\nI've reviewed the code and it looks good.  Also ran unit tests and `make check` completes successfully.",https://github.com/bitcoin/bitcoin/pull/21756#issuecomment-841947489,841947489,
practicalswift,2021-05-17 08:27:22,@shobitb Thanks a lot for reviewing! I think you might have gotten the commit id wrong when ACK:ing. The last commit id in the sequence of commits is the one used when ACK:ing a PR assuming one ACK:s the entire PR and not just a subset of it :),https://github.com/bitcoin/bitcoin/pull/21756#issuecomment-842128786,842128786,
laanwj,2021-05-17 11:06:00,"Code review ACK 54548bae8004a8f49d73bd29aeca8b41894214c4\nIt at first surprised me that there are no tests for `IPv6ToString`. However there are for the higher-level functions. As this passes the CNetAddr ToString tests, I think this is covered sufficiently.\n",https://github.com/bitcoin/bitcoin/pull/21756#issuecomment-842233107,842233107,
jonatack,2021-05-18 06:29:21,"According to https://github.com/bitcoin/bitcoin/issues/21982#issuecomment-842325937, no longer returning scoped ids was an intentional part of this PR. Maybe that wasn't obvious to reviewers. After test coverage was removed by #21689, no other tests signalled the change.\n\nIt would be good to be more explicit in the PR description regarding why make the change, and straightforward about what su",https://github.com/bitcoin/bitcoin/pull/21756#issuecomment-842886159,842886159,
vasild,2021-05-18 08:50:12,"There seems to be two ""functionalities"" being discussed together, it took me some time to figure it out:\n\n1. The functionality of IPv6 scope id, introduced in https://github.com/bitcoin/bitcoin/pull/7570. That is still working, has not been removed.\n2. The printout of such IPv6 addresses - before we used the system `getnameinfo()` which included `%zoneid` (on all or most platforms). Now we r",https://github.com/bitcoin/bitcoin/pull/21756#issuecomment-842983405,842983405,
practicalswift,2021-05-18 09:40:12,"@vasild \n\nExactly. Thanks for bringing some sense to this.\n\nWhat this entire discussion boils down to is if the expectation is that `CNetAddr::ToStringIP()` should print the IPv6 _address_ or the IPv6 _socket address_:\n* IPv6 address ([std::net::Ipv6Addr](https://doc.rust-lang.org/std/net/struct.Ipv6Addr.html)): _""IPv6 addresses are defined as 128-bit integers in IETF RFC 4291. They are ",https://github.com/bitcoin/bitcoin/pull/21756#issuecomment-843019946,843019946,
jonatack,2021-05-18 11:07:49,"Indeed. What does not make sense to me is why this PR was not upfront about this, nor the reasons that were given to have the only test coverage removed willy-nilly allowing this to be changed without tests warning about it, nor why we should break user space to follow the rustlang version without discussion. If those questions do not make sense, then I apologize. ",https://github.com/bitcoin/bitcoin/pull/21756#issuecomment-843077269,843077269,
jonatack,2021-05-18 11:23:15,"The comment I referred to above in https://github.com/bitcoin/bitcoin/issues/21982#issuecomment-842325937:\n\n> If you by ""functionality"" mean not appending an unwanted %zone_index string to CNetAddr::ToString(), then yes that non-appending of an unwanted string is obviously intentional. The new implementation of IPv6ToString (which is called from CNetAddr::ToString) follows Rust's std::net::Ipv",https://github.com/bitcoin/bitcoin/pull/21756#issuecomment-843086021,843086021,
vasild,2021-05-18 12:06:04,It should be easy to append `%zoneid` like @laanwj [suggests](https://github.com/bitcoin/bitcoin/pull/21756#discussion_r633592556)?,https://github.com/bitcoin/bitcoin/pull/21756#issuecomment-843111914,843111914,
jonatack,2021-05-18 12:23:38,> It should be easy to append `%zoneid` like @laanwj [suggests](https://github.com/bitcoin/bitcoin/pull/21756#discussion_r633592556)?\n\n#21985,https://github.com/bitcoin/bitcoin/pull/21756#issuecomment-843126068,843126068,
jonatack,2021-05-17 11:52:30,"Was removing link-local scoped id functionality an intended consequence of this PR?\n",https://github.com/bitcoin/bitcoin/pull/21756#discussion_r633464073,633464073,src/netaddress.cpp
practicalswift,2021-05-17 13:30:11,https://github.com/bitcoin/bitcoin/issues/21982#issuecomment-842325937,https://github.com/bitcoin/bitcoin/pull/21756#discussion_r633531604,633531604,src/netaddress.cpp
laanwj,2021-05-17 14:41:11,If we want to restore that functionality we could pass `m_scope_id` to `IPv6ToString` and append it if non-zero.,https://github.com/bitcoin/bitcoin/pull/21756#discussion_r633592556,633592556,src/netaddress.cpp
