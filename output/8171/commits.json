[
  {
    "sha": "6fa950a57334e93e70d806532ee517cbd75a2338",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ZmE5NTBhNTczMzRlOTNlNzBkODA2NTMyZWU1MTdjYmQ3NWEyMzM4",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-06-08T13:34:25Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-06-08T13:43:28Z"
      },
      "message": "[RPC] Fix createrawtx sequence number unsigned int parsing",
      "tree": {
        "sha": "9a15b57f8c29ba284504d56cd4c6bbf67c59b134",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9a15b57f8c29ba284504d56cd4c6bbf67c59b134"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6fa950a57334e93e70d806532ee517cbd75a2338",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJXWCEBAAoJECnUvLZBb1PsGFcP/AuMplLTdC0mbKRt0rxQH848\nyOd/jel5eQ2J16c/i9aKVlJqDwdKj+Mjb4C6uIKDnLlXo+CUS2GSnI1hBiLf/PSU\nrazZyyossMMBymJq6dn1ZQTgDyoiELrqyzuELNYoB0ZADKs3YNSZwBC61PZpOj5x\n368T32WUIBcAi0TcN1titX5a6PmbtEgOhGdreCocs0IonYcaSREQltOmiEXoLzyE\n6OzkM4u9KPWQFAcU7FuFHbm1A9n+BqcUiPNY8ykxTZvhXexZasq0jQwofF+Fz/+S\nvPAOWn7KDXWUVlwY3aaX8hhxstgW9pLtesW9E5meuBN8E7OtUFTAU3M2YvPIaBUv\nyH7HC6pK4+10A5b4I7libm+cOafJo2TOE0wzkP4FawK5TkzSw5Bp5c0BKq5ne0Gn\nCBaYk3NaJOsRhd8dPoxjlZ0VU9dZjlWJn8enNivOOYogEQFtu2Xa5LxKW9VvjnJy\ntjDunonLUC8QALrDMVFzQFLwgNim1IOetgApFWSgZteLxnTVS7lcR3zqwaAdp/jU\nV8CZ1gCyItnaAfQZ6C1ZiGr3aOi42vFC+L4qI/EcW2TUwjpggoTEr0W7wbxl510a\nV69uYKvLFR38KcDczv7MdVjiH/IDNbUROsDXomGpYAaJeQ6m3ySpGPRP3OR1mLZP\nYahOJETlwXLXJ3xcZJc1\n=mdcm\n-----END PGP SIGNATURE-----",
        "payload": "tree 9a15b57f8c29ba284504d56cd4c6bbf67c59b134\nparent 6a034ed89891e4f23eeaccba928731f32c8e2057\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1465392865 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1465393408 +0200\n\n[RPC] Fix createrawtx sequence number unsigned int parsing\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6fa950a57334e93e70d806532ee517cbd75a2338",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6fa950a57334e93e70d806532ee517cbd75a2338",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6fa950a57334e93e70d806532ee517cbd75a2338/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6a034ed89891e4f23eeaccba928731f32c8e2057",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6a034ed89891e4f23eeaccba928731f32c8e2057",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6a034ed89891e4f23eeaccba928731f32c8e2057"
      }
    ],
    "stats": {
      "total": 23,
      "additions": 21,
      "deletions": 2
    },
    "files": [
      {
        "sha": "ab6d2e8def14891f25d607f8214540cd5263d47c",
        "filename": "qa/rpc-tests/rawtransactions.py",
        "status": "modified",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6fa950a57334e93e70d806532ee517cbd75a2338/qa/rpc-tests/rawtransactions.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6fa950a57334e93e70d806532ee517cbd75a2338/qa/rpc-tests/rawtransactions.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/rawtransactions.py?ref=6fa950a57334e93e70d806532ee517cbd75a2338",
        "patch": "@@ -143,6 +143,20 @@ def run_test(self):\n         rawtx   = self.nodes[0].createrawtransaction(inputs, outputs)\n         decrawtx= self.nodes[0].decoderawtransaction(rawtx)\n         assert_equal(decrawtx['vin'][0]['sequence'], 1000)\n+        \n+        inputs  = [ {'txid' : \"1d1d4e24ed99057e84c3f80fd8fbec79ed9e1acee37da269356ecea000000000\", 'vout' : 1, 'sequence' : -1}]\n+        outputs = { self.nodes[0].getnewaddress() : 1 }\n+        assert_raises(JSONRPCException, self.nodes[0].createrawtransaction, inputs, outputs)\n+        \n+        inputs  = [ {'txid' : \"1d1d4e24ed99057e84c3f80fd8fbec79ed9e1acee37da269356ecea000000000\", 'vout' : 1, 'sequence' : 4294967296}]\n+        outputs = { self.nodes[0].getnewaddress() : 1 }\n+        assert_raises(JSONRPCException, self.nodes[0].createrawtransaction, inputs, outputs)\n+        \n+        inputs  = [ {'txid' : \"1d1d4e24ed99057e84c3f80fd8fbec79ed9e1acee37da269356ecea000000000\", 'vout' : 1, 'sequence' : 4294967294}]\n+        outputs = { self.nodes[0].getnewaddress() : 1 }\n+        rawtx   = self.nodes[0].createrawtransaction(inputs, outputs)\n+        decrawtx= self.nodes[0].decoderawtransaction(rawtx)\n+        assert_equal(decrawtx['vin'][0]['sequence'], 4294967294)\n \n if __name__ == '__main__':\n     RawTransactionsTest().main()"
      },
      {
        "sha": "9723e394d6509869b58cef533cadc9cbaf1b9794",
        "filename": "src/rpc/rawtransaction.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 2,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6fa950a57334e93e70d806532ee517cbd75a2338/src/rpc/rawtransaction.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6fa950a57334e93e70d806532ee517cbd75a2338/src/rpc/rawtransaction.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/rawtransaction.cpp?ref=6fa950a57334e93e70d806532ee517cbd75a2338",
        "patch": "@@ -388,8 +388,13 @@ UniValue createrawtransaction(const UniValue& params, bool fHelp)\n \n         // set the sequence number if passed in the parameters object\n         const UniValue& sequenceObj = find_value(o, \"sequence\");\n-        if (sequenceObj.isNum())\n-            nSequence = sequenceObj.get_int();\n+        if (sequenceObj.isNum()) {\n+            int64_t seqNr64 = sequenceObj.get_int64();\n+            if (seqNr64 < 0 || seqNr64 > std::numeric_limits<uint32_t>::max())\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, sequence number is out of range\");\n+            else\n+                nSequence = (uint32_t)seqNr64;\n+        }\n \n         CTxIn in(COutPoint(txid, nOutput), CScript(), nSequence);\n "
      }
    ]
  }
]