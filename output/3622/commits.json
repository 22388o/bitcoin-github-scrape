[
  {
    "sha": "aa9348563c88b984d9c42c41aa5d227145c8ac4b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphYTkzNDg1NjNjODhiOTg0ZDljNDJjNDFhYTVkMjI3MTQ1YzhhYzRi",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2014-02-03T21:22:07Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2014-02-06T18:37:16Z"
      },
      "message": "gitian: Make linux build of OpenSSL deterministic\n\nOpenSSL was embedding a timestamp causing its build to be\nnon-deterministic.\nChange deps-linux to be deterministic by using FAKETIME\nas needed and disabling it when it gets in the way.",
      "tree": {
        "sha": "e3b10c8a1b727ee286077e2c37d08628d0c80e76",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e3b10c8a1b727ee286077e2c37d08628d0c80e76"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aa9348563c88b984d9c42c41aa5d227145c8ac4b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aa9348563c88b984d9c42c41aa5d227145c8ac4b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/aa9348563c88b984d9c42c41aa5d227145c8ac4b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aa9348563c88b984d9c42c41aa5d227145c8ac4b/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "23617fd01de071738e4a0f9f9fb9b19222b2acf4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/23617fd01de071738e4a0f9f9fb9b19222b2acf4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/23617fd01de071738e4a0f9f9fb9b19222b2acf4"
      }
    ],
    "stats": {
      "total": 28,
      "additions": 21,
      "deletions": 7
    },
    "files": [
      {
        "sha": "fc624d899654598bad61c6d7cc3aeea3d6bb9308",
        "filename": "contrib/gitian-descriptors/deps-linux.yml",
        "status": "modified",
        "additions": 18,
        "deletions": 4,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aa9348563c88b984d9c42c41aa5d227145c8ac4b/contrib/gitian-descriptors/deps-linux.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aa9348563c88b984d9c42c41aa5d227145c8ac4b/contrib/gitian-descriptors/deps-linux.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/deps-linux.yml?ref=aa9348563c88b984d9c42c41aa5d227145c8ac4b",
        "patch": "@@ -24,6 +24,9 @@ files:\n script: |\n   STAGING=\"$HOME/install\"\n   OPTFLAGS='-O2'\n+  export LD_PRELOAD=/usr/lib/faketime/libfaketime.so.1\n+  export FAKETIME=$REFERENCE_DATETIME\n+  export TZ=UTC\n   export LIBRARY_PATH=\"$STAGING/lib\"\n   # Integrity Check\n   echo \"f74f15e8c8ff11aa3d5bb5f276d202ec18d7246e95f961db76054199c69c1ae3  openssl-1.0.1e.tar.gz\"  | sha256sum -c\n@@ -37,6 +40,7 @@ script: |\n   cd openssl-1.0.1e\n   #   need -fPIC to avoid relocation error in 64 bit builds\n   ./config no-shared no-zlib no-dso no-krb5 --openssldir=$STAGING -fPIC\n+  #   need to build OpenSSL with faketime because a timestamp is embedded into cversion.o\n   make\n   make install_sw\n   cd ..\n@@ -48,28 +52,38 @@ script: |\n   rm -f $STAGING/lib/libminiupnpc.so* # no way to skip shared lib build\n   cd ..\n   #\n-  tar xjfm qrencode-3.4.3.tar.bz2\n+  tar xjf qrencode-3.4.3.tar.bz2\n   cd qrencode-3.4.3\n+  unset FAKETIME # unset fake time during configure, as it does some clock sanity tests\n   #   need --with-pic to avoid relocation error in 64 bit builds\n-  ./configure --prefix=$STAGING --enable-static --disable-shared --with-pic --without-tools --disable-maintainer-mode --disable-dependency-tracking\n+  ./configure --prefix=$STAGING --enable-static --disable-shared --with-pic --without-tools --disable-dependency-tracking --without-zlib\n+  # Workaround to prevent re-configuring by make; make all files have a date in the past\n+  find . -print0 | xargs -r0 touch -t 200001010000\n+  export FAKETIME=$REFERENCE_DATETIME\n   make $MAKEOPTS install\n   cd ..\n   #\n-  tar xjfm protobuf-2.5.0.tar.bz2\n+  tar xjf protobuf-2.5.0.tar.bz2\n   cd protobuf-2.5.0\n   mkdir -p $STAGING/host/bin\n+  unset FAKETIME # unset fake time during configure, as it does some clock sanity tests\n   #   need --with-pic to avoid relocation error in 64 bit builds\n   ./configure --prefix=$STAGING --bindir=$STAGING/host/bin --enable-static --disable-shared --with-pic\n+  # Workaround to prevent re-configuring by make; make all files have a date in the past\n+  find . -print0 | xargs -r0 touch -t 200001010000\n+  export FAKETIME=$REFERENCE_DATETIME\n   make $MAKEOPTS install\n   cd ..\n   #\n   tar xzf db-4.8.30.NC.tar.gz\n   cd db-4.8.30.NC/build_unix\n   #   need --with-pic to avoid relocation error in 64 bit builds\n   ../dist/configure --prefix=$STAGING --enable-cxx --disable-shared --with-pic\n+  # Workaround to prevent re-configuring by make; make all files have a date in the past\n+  find . -print0 | xargs -r0 touch -t 200001010000\n   make $MAKEOPTS library_build\n   make install_lib install_include\n   cd ../..\n   #\n   cd $STAGING\n-  zip -r $OUTDIR/bitcoin-deps-linux${GBUILD_BITS}-gitian-r2.zip include lib bin host\n+  find include lib bin host -type f | sort | zip -X@ $OUTDIR/bitcoin-deps-linux${GBUILD_BITS}-gitian-r3.zip"
      },
      {
        "sha": "76361928004fbd87bebe562a0038a32051fe318a",
        "filename": "contrib/gitian-descriptors/gitian-linux.yml",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aa9348563c88b984d9c42c41aa5d227145c8ac4b/contrib/gitian-descriptors/gitian-linux.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aa9348563c88b984d9c42c41aa5d227145c8ac4b/contrib/gitian-descriptors/gitian-linux.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-linux.yml?ref=aa9348563c88b984d9c42c41aa5d227145c8ac4b",
        "patch": "@@ -21,8 +21,8 @@ remotes:\n - \"url\": \"https://github.com/bitcoin/bitcoin.git\"\n   \"dir\": \"bitcoin\"\n files:\n-- \"bitcoin-deps-linux32-gitian-r2.zip\"\n-- \"bitcoin-deps-linux64-gitian-r2.zip\"\n+- \"bitcoin-deps-linux32-gitian-r3.zip\"\n+- \"bitcoin-deps-linux64-gitian-r3.zip\"\n - \"boost-linux32-1.55.0-gitian-r1.zip\"\n - \"boost-linux64-1.55.0-gitian-r1.zip\"\n script: |\n@@ -34,7 +34,7 @@ script: |\n   #\n   mkdir -p $STAGING\n   cd $STAGING\n-  unzip ../build/bitcoin-deps-linux${GBUILD_BITS}-gitian-r2.zip\n+  unzip ../build/bitcoin-deps-linux${GBUILD_BITS}-gitian-r3.zip\n   unzip ../build/boost-linux${GBUILD_BITS}-1.55.0-gitian-r1.zip\n   cd ../build\n   #"
      }
    ]
  },
  {
    "sha": "aabcd11ba69022c6ae24c36d56e107b530fee8ad",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphYWJjZDExYmE2OTAyMmM2YWUyNGMzNmQ1NmUxMDdiNTMwZmVlOGFk",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2014-02-04T10:55:19Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2014-02-06T18:37:17Z"
      },
      "message": "gitian: Make linux boost dependency completely deterministic\n\nIt appears that the output was different every time.\n\nThis doesn't affect the final bitcoind/bitcoin-qt, but is confusing\nnevertheless.\n\nFix it by using FAKETIME and zipping files in deterministic order.",
      "tree": {
        "sha": "3c7e45f7fae72344e9b6c12746a4a3f971d09423",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3c7e45f7fae72344e9b6c12746a4a3f971d09423"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aabcd11ba69022c6ae24c36d56e107b530fee8ad",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aabcd11ba69022c6ae24c36d56e107b530fee8ad",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/aabcd11ba69022c6ae24c36d56e107b530fee8ad",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aabcd11ba69022c6ae24c36d56e107b530fee8ad/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "aa9348563c88b984d9c42c41aa5d227145c8ac4b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aa9348563c88b984d9c42c41aa5d227145c8ac4b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/aa9348563c88b984d9c42c41aa5d227145c8ac4b"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 7,
      "deletions": 6
    },
    "files": [
      {
        "sha": "d752a906a22c43886a57983d73a6ed60ca461b11",
        "filename": "contrib/gitian-descriptors/boost-linux.yml",
        "status": "modified",
        "additions": 5,
        "deletions": 4,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aabcd11ba69022c6ae24c36d56e107b530fee8ad/contrib/gitian-descriptors/boost-linux.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aabcd11ba69022c6ae24c36d56e107b530fee8ad/contrib/gitian-descriptors/boost-linux.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/boost-linux.yml?ref=aabcd11ba69022c6ae24c36d56e107b530fee8ad",
        "patch": "@@ -20,11 +20,14 @@ files:\n script: |\n   STAGING=\"$HOME/install\"\n   export LIBRARY_PATH=\"$STAGING/lib\"\n+  export LD_PRELOAD=/usr/lib/faketime/libfaketime.so.1\n+  export FAKETIME=$REFERENCE_DATETIME\n+  export TZ=UTC\n   # Input Integrity Check\n   echo \"fff00023dd79486d444c8e29922f4072e1d451fc5a4d2b6075852ead7f2b7b52  boost_1_55_0.tar.bz2\" | shasum -c\n \n   mkdir -p \"$STAGING\"\n-  tar xjf boost_1_55_0.tar.bz2\n+  tar --warning=no-timestamp -xjf boost_1_55_0.tar.bz2\n   cd boost_1_55_0\n   GCCVERSION=$(g++ -E -dM $(mktemp --suffix=.h) | grep __VERSION__ | cut -d ' ' -f 3 | cut -d '\"' -f 2)\n   # note: bjam with -d+2 reveals that -O3 is implied by default, no need to provide it in cxxflags\n@@ -38,6 +41,4 @@ script: |\n   ./bjam toolset=gcc threadapi=pthread threading=multi variant=release link=static runtime-link=shared --user-config=user-config.jam --without-mpi --without-python -sNO_BZIP2=1 --layout=tagged --build-type=complete --prefix=\"$STAGING\" $MAKEOPTS install\n \n   cd \"$STAGING\"\n-  export LD_PRELOAD=/usr/lib/faketime/libfaketime.so.1\n-  export FAKETIME=$REFERENCE_DATETIME\n-  zip -r $OUTDIR/boost-linux${GBUILD_BITS}-1.55.0-gitian-r1.zip *\n+  find -type f | sort | zip -X@ $OUTDIR/boost-linux${GBUILD_BITS}-1.55.0-gitian-r1.zip"
      },
      {
        "sha": "858566145889a9b0606f8c026ece588f2756b4c7",
        "filename": "contrib/gitian-descriptors/deps-linux.yml",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aabcd11ba69022c6ae24c36d56e107b530fee8ad/contrib/gitian-descriptors/deps-linux.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aabcd11ba69022c6ae24c36d56e107b530fee8ad/contrib/gitian-descriptors/deps-linux.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/deps-linux.yml?ref=aabcd11ba69022c6ae24c36d56e107b530fee8ad",
        "patch": "@@ -56,7 +56,7 @@ script: |\n   cd qrencode-3.4.3\n   unset FAKETIME # unset fake time during configure, as it does some clock sanity tests\n   #   need --with-pic to avoid relocation error in 64 bit builds\n-  ./configure --prefix=$STAGING --enable-static --disable-shared --with-pic --without-tools --disable-dependency-tracking --without-zlib\n+  ./configure --prefix=$STAGING --enable-static --disable-shared --with-pic --without-tools --disable-dependency-tracking\n   # Workaround to prevent re-configuring by make; make all files have a date in the past\n   find . -print0 | xargs -r0 touch -t 200001010000\n   export FAKETIME=$REFERENCE_DATETIME\n@@ -68,7 +68,7 @@ script: |\n   mkdir -p $STAGING/host/bin\n   unset FAKETIME # unset fake time during configure, as it does some clock sanity tests\n   #   need --with-pic to avoid relocation error in 64 bit builds\n-  ./configure --prefix=$STAGING --bindir=$STAGING/host/bin --enable-static --disable-shared --with-pic\n+  ./configure --prefix=$STAGING --bindir=$STAGING/host/bin --enable-static --disable-shared --with-pic --without-zlib\n   # Workaround to prevent re-configuring by make; make all files have a date in the past\n   find . -print0 | xargs -r0 touch -t 200001010000\n   export FAKETIME=$REFERENCE_DATETIME"
      }
    ]
  },
  {
    "sha": "1552145ae56bf12f3deaef1cdd8a78b2e923a80e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxNTUyMTQ1YWU1NmJmMTJmM2RlYWVmMWNkZDhhNzhiMmU5MjNhODBl",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2014-02-05T15:44:58Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2014-02-10T09:01:06Z"
      },
      "message": "gitian: Sort generated source distribution archive\n\nSort the filenames in the resulting tar, normalize the time/date\nand user/group information.",
      "tree": {
        "sha": "d8dfcebb86d40973d9c4d668e79ccfcaa7d9640c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d8dfcebb86d40973d9c4d668e79ccfcaa7d9640c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1552145ae56bf12f3deaef1cdd8a78b2e923a80e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1552145ae56bf12f3deaef1cdd8a78b2e923a80e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1552145ae56bf12f3deaef1cdd8a78b2e923a80e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1552145ae56bf12f3deaef1cdd8a78b2e923a80e/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "aabcd11ba69022c6ae24c36d56e107b530fee8ad",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aabcd11ba69022c6ae24c36d56e107b530fee8ad",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/aabcd11ba69022c6ae24c36d56e107b530fee8ad"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 10,
      "deletions": 3
    },
    "files": [
      {
        "sha": "bf355fd828984114947b80b71f8ee839080b0698",
        "filename": "contrib/gitian-descriptors/gitian-linux.yml",
        "status": "modified",
        "additions": 10,
        "deletions": 3,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1552145ae56bf12f3deaef1cdd8a78b2e923a80e/contrib/gitian-descriptors/gitian-linux.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1552145ae56bf12f3deaef1cdd8a78b2e923a80e/contrib/gitian-descriptors/gitian-linux.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-linux.yml?ref=1552145ae56bf12f3deaef1cdd8a78b2e923a80e",
        "patch": "@@ -29,6 +29,8 @@ script: |\n   STAGING=\"$HOME/install\"\n   OPTFLAGS='-O2'\n   BINDIR=\"${OUTDIR}/bin/${GBUILD_BITS}\" # 32/64 bit build specific output directory\n+  TEMPDIR=\"$HOME/tempdir\"\n+  export TZ=UTC\n   export LIBRARY_PATH=\"$STAGING/lib\"\n   mkdir -p ${BINDIR}\n   #\n@@ -39,15 +41,20 @@ script: |\n   cd ../build\n   #\n   cd bitcoin\n-  export TAR_OPTIONS=--mtime=`echo $REFERENCE_DATETIME | awk '{ print $1 }'`\n   ./autogen.sh\n   ./configure --prefix=$STAGING --bindir=$BINDIR --with-protoc-bindir=$STAGING/host/bin --with-boost=$STAGING --disable-maintainer-mode --disable-dependency-tracking PKG_CONFIG_PATH=\"$STAGING/lib/pkgconfig\" CPPFLAGS=\"-I$STAGING/include ${OPTFLAGS}\" LDFLAGS=\"-L$STAGING/lib ${OPTFLAGS}\" CXXFLAGS=\"-frandom-seed=bitcoin ${OPTFLAGS}\" BOOST_CHRONO_EXTRALIBS=\"-lrt\"\n   make dist\n+  DISTNAME=`echo bitcoin-*.tar.gz`\n   mkdir -p distsrc\n   cd distsrc\n-  tar --strip-components=1 -xf ../bitcoin-*.tar.*\n+  tar --strip-components=1 -xf ../$DISTNAME\n   ./configure --prefix=$STAGING --bindir=$BINDIR --with-protoc-bindir=$STAGING/host/bin --with-boost=$STAGING --disable-maintainer-mode --disable-dependency-tracking PKG_CONFIG_PATH=\"$STAGING/lib/pkgconfig\" CPPFLAGS=\"-I$STAGING/include ${OPTFLAGS}\" LDFLAGS=\"-L$STAGING/lib ${OPTFLAGS}\" CXXFLAGS=\"-frandom-seed=bitcoin ${OPTFLAGS}\" BOOST_CHRONO_EXTRALIBS=\"-lrt\"\n   make $MAKEOPTS\n   make $MAKEOPTS install-strip\n+  \n+  # sort distribution tar file and normalize user/group/mtime information for deterministic output\n   mkdir -p $OUTDIR/src\n-  cp ../bitcoin-*.tar.* $OUTDIR/src\n+  rm -rf $TEMPDIR\n+  mkdir -p $TEMPDIR\n+  cd $TEMPDIR\n+  tar -xvf $HOME/build/bitcoin/$DISTNAME | sort | tar --no-recursion -cT /dev/stdin --mode='u+rw,go+r-w,a+X' --owner=0 --group=0 --mtime=\"$REFERENCE_DATETIME\" | gzip -n > $OUTDIR/src/$DISTNAME"
      }
    ]
  },
  {
    "sha": "c13a13efec0051e1fe84749c36c6676dc6e267af",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjMTNhMTNlZmVjMDA1MWUxZmU4NDc0OWMzNmM2Njc2ZGM2ZTI2N2Fm",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2014-02-06T10:57:45Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2014-02-10T15:20:13Z"
      },
      "message": "gitian: add -D flag to ar for deterministic output for linux deps\n\nar -D: Operate in deterministic mode. When adding files and the archive\nindex use zero for UIDs, GIDs, timestamps, and use consistent file modes\nfor all files.  When this option is used, if ar is used with identical\noptions and identical input files, multiple runs will create identical\noutput files regardless of the input files' owners, groups, file modes,\nor modification times.",
      "tree": {
        "sha": "3ec85247e392de8a0802a4072a7acbefed619649",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3ec85247e392de8a0802a4072a7acbefed619649"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c13a13efec0051e1fe84749c36c6676dc6e267af",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c13a13efec0051e1fe84749c36c6676dc6e267af",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c13a13efec0051e1fe84749c36c6676dc6e267af",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c13a13efec0051e1fe84749c36c6676dc6e267af/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1552145ae56bf12f3deaef1cdd8a78b2e923a80e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1552145ae56bf12f3deaef1cdd8a78b2e923a80e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1552145ae56bf12f3deaef1cdd8a78b2e923a80e"
      }
    ],
    "stats": {
      "total": 25,
      "additions": 22,
      "deletions": 3
    },
    "files": [
      {
        "sha": "a538ff30a8f399599fcc54a69f1a04a4d9fa9ae3",
        "filename": "contrib/gitian-descriptors/boost-linux.yml",
        "status": "modified",
        "additions": 12,
        "deletions": 2,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c13a13efec0051e1fe84749c36c6676dc6e267af/contrib/gitian-descriptors/boost-linux.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c13a13efec0051e1fe84749c36c6676dc6e267af/contrib/gitian-descriptors/boost-linux.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/boost-linux.yml?ref=c13a13efec0051e1fe84749c36c6676dc6e267af",
        "patch": "@@ -19,6 +19,7 @@ files:\n - \"boost_1_55_0.tar.bz2\"\n script: |\n   STAGING=\"$HOME/install\"\n+  TEMPDIR=\"$HOME/tmp\"\n   export LIBRARY_PATH=\"$STAGING/lib\"\n   export LD_PRELOAD=/usr/lib/faketime/libfaketime.so.1\n   export FAKETIME=$REFERENCE_DATETIME\n@@ -38,7 +39,16 @@ script: |\n \n   ./bootstrap.sh --without-icu\n \n-  ./bjam toolset=gcc threadapi=pthread threading=multi variant=release link=static runtime-link=shared --user-config=user-config.jam --without-mpi --without-python -sNO_BZIP2=1 --layout=tagged --build-type=complete --prefix=\"$STAGING\" $MAKEOPTS install\n+  ./bjam toolset=gcc threadapi=pthread threading=multi variant=release link=static runtime-link=shared --user-config=user-config.jam --without-mpi --without-python -sNO_BZIP2=1 --layout=tagged --build-type=complete --prefix=\"$STAGING\" $MAKEOPTS -d+2 install\n \n+  # post-process all generated libraries to be deterministic\n+  # extract them to a temporary directory then re-build them deterministically\n+  for LIB in $(find $STAGING -name \\*.a); do\n+    rm -rf $TEMPDIR && mkdir $TEMPDIR && cd $TEMPDIR\n+    ar xv $LIB | cut -b5- > /tmp/list.txt\n+    rm $LIB\n+    ar crsD $LIB $(cat /tmp/list.txt)\n+  done\n+  #\n   cd \"$STAGING\"\n-  find -type f | sort | zip -X@ $OUTDIR/boost-linux${GBUILD_BITS}-1.55.0-gitian-r1.zip\n+  find | sort | zip -X@ $OUTDIR/boost-linux${GBUILD_BITS}-1.55.0-gitian-r1.zip"
      },
      {
        "sha": "908f9321a4a196964e4e78c14e4f6f705c9b70f4",
        "filename": "contrib/gitian-descriptors/deps-linux.yml",
        "status": "modified",
        "additions": 10,
        "deletions": 1,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c13a13efec0051e1fe84749c36c6676dc6e267af/contrib/gitian-descriptors/deps-linux.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c13a13efec0051e1fe84749c36c6676dc6e267af/contrib/gitian-descriptors/deps-linux.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/deps-linux.yml?ref=c13a13efec0051e1fe84749c36c6676dc6e267af",
        "patch": "@@ -23,6 +23,7 @@ files:\n - \"db-4.8.30.NC.tar.gz\"\n script: |\n   STAGING=\"$HOME/install\"\n+  TEMPDIR=\"$HOME/tmp\"\n   OPTFLAGS='-O2'\n   export LD_PRELOAD=/usr/lib/faketime/libfaketime.so.1\n   export FAKETIME=$REFERENCE_DATETIME\n@@ -84,6 +85,14 @@ script: |\n   make $MAKEOPTS library_build\n   make install_lib install_include\n   cd ../..\n+  # post-process all generated libraries to be deterministic\n+  # extract them to a temporary directory then re-build them deterministically\n+  for LIB in $(find $STAGING -name \\*.a); do\n+    rm -rf $TEMPDIR && mkdir $TEMPDIR && cd $TEMPDIR\n+    ar xv $LIB | cut -b5- > /tmp/list.txt\n+    rm $LIB\n+    ar crsD $LIB $(cat /tmp/list.txt)\n+  done\n   #\n   cd $STAGING\n-  find include lib bin host -type f | sort | zip -X@ $OUTDIR/bitcoin-deps-linux${GBUILD_BITS}-gitian-r3.zip\n+  find include lib bin host | sort | zip -X@ $OUTDIR/bitcoin-deps-linux${GBUILD_BITS}-gitian-r3.zip"
      }
    ]
  }
]