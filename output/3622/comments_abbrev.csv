laanwj,2014-02-04T12:51:01Z,"~~Shit, I'm getting different (but deterministic) outputs for boost with KVM.~~\n\n```\n[snip]\n```\n\n~~Looks like an ordering difference within the .zip. The files themselves are exactly the same. Getting exactly matching intermediate outputs will be difficult.~~\n\n~~In any case ordering of files within the zip shouldn't affect determinism of the end result.~~\n\n~~But let's see if we can get z",https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34056057,34056057,
gavinandresen,2014-02-04T15:31:11Z,"With this pull, my boost builds using VirtualBox do not match:\n\n```\ne63b19db6efc3075a59f8dd152e28dbc602aa4baaea1cf696222a7f0ae1f63ae  boost-linux32-1.55.0-gitian-r1.zip\n80ca140ba009221a54c829d5cc2e68c71f5eac638df5866be95079070d4408cb  boost-linux64-1.55.0-gitian-r1.zip\n```\n\nI'll run again and see if I get a self-match.\n",https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34070848,34070848,
laanwj,2014-02-04T15:48:56Z,"Ouch, can you send me one of those files, I'd like to check what the difference is.\n",https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34072859,34072859,
gavinandresen,2014-02-04T16:02:26Z,"I do get a self-match rebuilding boost.\n\nUploaded to https://bitcoincore.org/~gavin/boost-linux32-1.55.0-gitian-r1.zip\n\nMy bitcoin-deps checksums don't match yours, either:\n\n```\n840fd30788e64e58d2961b25fd93bfafc035a3ba66faaf2a2d1c1e666c40b459  bitcoin-deps-linux32-gitian-r3.zip\n59462e03bb085dceb68c87177f27358dcd7e08929e0872cad4e01ed5c8383911  bitcoin-deps-linux64-gitian-r3.zip\n```\n\nI up",https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34074479,34074479,
laanwj,2014-02-04T16:29:40Z,"The difference seems to concern timezones. \n\nunzip -l on your .zips shows:\n\n```\n   ... 2011-01-30 06:00   lib/libboost_wserialization-mt.a\n```\n\nAnd on mine:\n\n```\n   ...  2011-01-30 01:00   lib/libboost_wserialization-mt-s.a\n```\n\nAll the .ymls export TZ=UTC, but that may not be enough.\n",https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34077712,34077712,
gavinandresen,2014-02-04T16:33:58Z,Ah!  Darn timezones... I'll reset my VirtualBox base images so they are UTC and build again after lunch.\n,https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34078263,34078263,
laanwj,2014-02-04T16:58:10Z,The Boost linux depenendency was actually missing TZ=UTC. Should be better now.\n\nI'm seeing a stranger difference in the bitcoin-deps:\n\n```\nBinary files mine/bitcoin-deps/host/bin/protoc and gavin/bitcoin-deps/host/bin/protoc differ\nOnly in gavin/bitcoin-deps/include/google/protobuf/io: gzip_stream.h\nBinary files mine/bitcoin-deps/lib/libprotobuf.a and gavin/bitcoin-deps/lib/libprotobuf.a d,https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34081109,34081109,
laanwj,2014-02-04T17:03:24Z,I added `--without--zlib` to the build options for protobuf. Hopefully this is enough to equalize the builds.\n,https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34081679,34081679,
gavinandresen,2014-02-04T19:27:19Z,"Building with these fixes (and VMs set to UTC) now.  FYI: I setup my VirtualBox base image VMs with all the packages needed already installed, so they are not constantly re-downloaded-- that would explain why my protoc was linking against a system zlib.\n",https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34096892,34096892,
gavinandresen,2014-02-04T22:47:34Z,"I rebuilt my VirtualBox VMs using vagrant (INSANELY COOL, by the way).\n\n... and they match my old VMs, but not @laanwj \n\n```\n56f6752c9df169f98c3dd970beaed9026dfb0e2beb7bffb0d655a87746eba326  boost-linux32-1.55.0-gitian-r1.zip\n1964ae04273e69c06d8ef93caf9a8967e86e6b5b03f008e6bb7f7aa16d29986a  boost-linux64-1.55.0-gitian-r1.zip\n840fd30788e64e58d2961b25fd93bfafc035a3ba66faaf2a2d1c1e666c40b459  ",https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34117117,34117117,
gavinandresen,2014-02-05T00:18:41Z,Linux gitian build checksums:\n\n```\n20b208827262ad4a4afb2419e60bf27c16e96406e3df518f77d56771e22ab13f  bin/32/bitcoin-cli\n9c30a979a2282e8326a2bec06352a3bf67f141c019d833bd1039d5de7e37cdae  bin/32/bitcoin-qt\n4c98b5904854b0616938f53dbb682559b4f583ff3aea18353cf86725013c1cc7  bin/32/bitcoind\n557671b4ae41fb4561d83360e9da917a5b29a1c315fcf470d16230e4a5e64548  bin/32/test_bitcoin\n9c364ebb6ccad2c0944eb,https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34124436,34124436,
laanwj,2014-02-05T07:32:23Z,"Seemingly the TZ=UTC change to boost did change something as boost-linux\* do not match your previous builds. But they still don't match. Can you upload the boost files so I can check the difference?\n\nRegarding bitcoin-deps: Oops, i passed the `--without-zlib` to the wrong configure. Should be better now.\n\nI'll build the final output and see if they match.\n",https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34143425,34143425,
laanwj,2014-02-05T11:50:38Z,@michagogo can you have a try at re-building linux gitian with this commit?\nI'm also interested in the intermediate outputs.\nIf they don't match with the OP can you upload them or send them to me?\n,https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34159013,34159013,
gavinandresen,2014-02-05T12:18:17Z,"I'm traveling, can't upload or gitian build until I'm back in two days. \n",https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34160739,34160739,
laanwj,2014-02-05T12:19:48Z,"Understood, have a good trip, hopefully someone else can help replicating results.\n",https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34160828,34160828,
laanwj,2014-02-05T13:52:47Z,Matches @michagogo's result here: http://paste.ubuntu.com/6879066/ APART from src/bitcoin-0.9.0.tar.gz\nWell at least the binaries are deterministic.\n,https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34169674,34169674,
laanwj,2014-02-05T17:28:21Z,"I've also added steps to make the source  .tar.gz deterministic. The output here is:\n\n```\nf3ca4ba934e056d5dedd5946735518baeea48f935f856d2f5579be39df749e0e  src/bitcoin-0.9.0.tar.gz\n```\n\nEdit: also added permission normalization now: `--mode='u+rw,go+r-w,a+X'`\nEdit.2: Needed gzip -n to avoid gzip embedding a timestamp\n",https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34214281,34214281,
laanwj,2014-02-06T14:55:13Z,"Ok, the generated .a's should be deterministic now. Umask and user/group should no longer make a difference.\n",https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34329790,34329790,
BitcoinPullTester,2014-02-10T15:49:14Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/c13a13efec0051e1fe84749c36c6676dc6e267af for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/3622#issuecomment-34646581,34646581,
