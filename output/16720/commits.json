[
  {
    "sha": "0bb33b5348dbddd65b88a7f00449c965562355d3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowYmIzM2I1MzQ4ZGJkZGQ2NWI4OGE3ZjAwNDQ5Yzk2NTU2MjM1NWQz",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2019-08-25T10:13:39Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2019-08-31T09:25:34Z"
      },
      "message": "qt: Replace objc_msgSend with native syntax",
      "tree": {
        "sha": "28696ebb76f16efe4191cbb691390da33d979668",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/28696ebb76f16efe4191cbb691390da33d979668"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0bb33b5348dbddd65b88a7f00449c965562355d3",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAl1qPRIACgkQQQEIES5+\nqB8xwA/+J7F0/+csdiA0jUoVu5697lsPlnTOFCOgBSARNgqsDuMZxcqqfgMot4nl\nKiKf8xuvCOBj7uG7xIqImh+YnGrvy/CngI+fZka582NiTlTNu+aIhhlh6SM9A0cq\n/aNKR+JJIM6uvdT/E4FWOhmSVH8h2s0nyxybfLQhS9UdD548zwwRwsEc6cIgxrMj\nFTrwnfKeujNu6Tt+KDNAXNgOIaDnjtBraPJqGglv+iRS8wp8tB60zpgJlNcwfe53\nqme0MteIRNn/qWhVJt5NUdDiW193Zj6/4yL5tVCeSetV96ASiQ6x51NFB+4ByULZ\nMY4lY37mHWBGLeEMEcsSIUXNHgBwL6u65+NsY6bRJWrVnA6BJCYnN66+6MXIhJcN\neSUOTp3ne7s1vMvti0RPW4nOq5Gq61FTHrSC+SBZwQ/fLlAEoEOZFVkbPNs/j4Tl\nfUnCOszS1e3O8JhzCe1sh63EAp1UwUteyhPxx8xB7h2gL2tFIiBRnPneHXNIVX2s\nJw47TRnKjYYjbeRkuNhcRVf3r0jw8mYfLwf+PgVVhAOx2TZSX210oKeay0Kw4GI/\nYFZaZLPRJ1UGlN1W6nH/iCeXe4ir0Ft+Idhya98jzeDSe8YWrJtZ1soBK20Hf532\nLcX7/eJVOgjzoVFuPIYOYHM4HN1taeLzOGBzcxHuiCigE/uMQT4=\n=NYwR\n-----END PGP SIGNATURE-----",
        "payload": "tree 28696ebb76f16efe4191cbb691390da33d979668\nparent db67101c748c208cced8e9b76a66d57cd48fbf6e\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1566728019 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1567243534 +0300\n\nqt: Replace objc_msgSend with native syntax\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0bb33b5348dbddd65b88a7f00449c965562355d3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0bb33b5348dbddd65b88a7f00449c965562355d3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0bb33b5348dbddd65b88a7f00449c965562355d3/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "db67101c748c208cced8e9b76a66d57cd48fbf6e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/db67101c748c208cced8e9b76a66d57cd48fbf6e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/db67101c748c208cced8e9b76a66d57cd48fbf6e"
      }
    ],
    "stats": {
      "total": 31,
      "additions": 18,
      "deletions": 13
    },
    "files": [
      {
        "sha": "97974d0f1464f8d7627c2d0b7b1d5bec3c9d52c6",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0bb33b5348dbddd65b88a7f00449c965562355d3/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0bb33b5348dbddd65b88a7f00449c965562355d3/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=0bb33b5348dbddd65b88a7f00449c965562355d3",
        "patch": "@@ -585,7 +585,7 @@ case $host in\n      fi\n \n      AX_CHECK_LINK_FLAG([[-Wl,-headerpad_max_install_names]], [LDFLAGS=\"$LDFLAGS -Wl,-headerpad_max_install_names\"])\n-     CPPFLAGS=\"$CPPFLAGS -DMAC_OSX\"\n+     CPPFLAGS=\"$CPPFLAGS -DMAC_OSX -DOBJC_OLD_DISPATCH_PROTOTYPES=0\"\n      OBJCXXFLAGS=\"$CXXFLAGS\"\n      ;;\n    *android*)"
      },
      {
        "sha": "e3f6386705fca3b6aea94d2b29e0bd7ce1730e9d",
        "filename": "src/qt/guiutil.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 5,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0bb33b5348dbddd65b88a7f00449c965562355d3/src/qt/guiutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0bb33b5348dbddd65b88a7f00449c965562355d3/src/qt/guiutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.cpp?ref=0bb33b5348dbddd65b88a7f00449c965562355d3",
        "patch": "@@ -58,9 +58,10 @@\n #pragma GCC diagnostic push\n #pragma GCC diagnostic ignored \"-Wdeprecated-declarations\"\n \n-#include <objc/objc-runtime.h>\n #include <CoreServices/CoreServices.h>\n #include <QProcess>\n+\n+void ForceActivation();\n #endif\n \n namespace GUIUtil {\n@@ -360,10 +361,7 @@ bool isObscured(QWidget *w)\n void bringToFront(QWidget* w)\n {\n #ifdef Q_OS_MAC\n-    // Force application activation on macOS. With Qt 5.4 this is required when\n-    // an action in the dock menu is triggered.\n-    id app = objc_msgSend((id) objc_getClass(\"NSApplication\"), sel_registerName(\"sharedApplication\"));\n-    objc_msgSend(app, sel_registerName(\"activateIgnoringOtherApps:\"), YES);\n+    ForceActivation();\n #endif\n \n     if (w) {"
      },
      {
        "sha": "5eb23c76e6784a4443d5b5cf606be5099fcec43f",
        "filename": "src/qt/macdockiconhandler.mm",
        "status": "modified",
        "additions": 14,
        "deletions": 7,
        "changes": 21,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0bb33b5348dbddd65b88a7f00449c965562355d3/src/qt/macdockiconhandler.mm",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0bb33b5348dbddd65b88a7f00449c965562355d3/src/qt/macdockiconhandler.mm",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/macdockiconhandler.mm?ref=0bb33b5348dbddd65b88a7f00449c965562355d3",
        "patch": "@@ -1,12 +1,11 @@\n-// Copyright (c) 2011-2018 The Bitcoin Core developers\n+// Copyright (c) 2011-2019 The Bitcoin Core developers\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n #include \"macdockiconhandler.h\"\n \n-#undef slots\n-#include <objc/objc.h>\n-#include <objc/message.h>\n+#include <AppKit/AppKit.h>\n+#include <objc/runtime.h>\n \n static MacDockIconHandler *s_instance = nullptr;\n \n@@ -21,9 +20,7 @@ bool dockClickHandler(id self, SEL _cmd, ...) {\n }\n \n void setupDockClickHandler() {\n-    id app = objc_msgSend((id)objc_getClass(\"NSApplication\"), sel_registerName(\"sharedApplication\"));\n-    id delegate = objc_msgSend(app, sel_registerName(\"delegate\"));\n-    Class delClass = (Class)objc_msgSend(delegate, sel_registerName(\"class\"));\n+    Class delClass = (Class)[[[NSApplication sharedApplication] delegate] class];\n     SEL shouldHandle = sel_registerName(\"applicationShouldHandleReopen:hasVisibleWindows:\");\n     class_replaceMethod(delClass, shouldHandle, (IMP)dockClickHandler, \"B@:\");\n }\n@@ -44,3 +41,13 @@ void setupDockClickHandler() {\n {\n     delete s_instance;\n }\n+\n+/**\n+ * Force application activation on macOS. With Qt 5.5.1 this is required when\n+ * an action in the Dock menu is triggered.\n+ * TODO: Define a Qt version where it's no-longer necessary.\n+ */\n+void ForceActivation()\n+{\n+    [[NSApplication sharedApplication] activateIgnoringOtherApps:YES];\n+}"
      }
    ]
  }
]