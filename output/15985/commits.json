[
  {
    "sha": "58e291cfad12fa85af87d093acfa7b44702e3521",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1OGUyOTFjZmFkMTJmYTg1YWY4N2QwOTNhY2ZhN2I0NDcwMmUzNTIx",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2019-05-08T20:29:44Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-06-02T08:19:30Z"
      },
      "message": "Add test for GCC bug 90348",
      "tree": {
        "sha": "9e75e69ca62c51f3b57f090cc071bda650f992d3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9e75e69ca62c51f3b57f090cc071bda650f992d3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/58e291cfad12fa85af87d093acfa7b44702e3521",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/58e291cfad12fa85af87d093acfa7b44702e3521",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/58e291cfad12fa85af87d093acfa7b44702e3521",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/58e291cfad12fa85af87d093acfa7b44702e3521/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "faf38bc056e523485520f98f3f725c583a3b89bf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faf38bc056e523485520f98f3f725c583a3b89bf",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/faf38bc056e523485520f98f3f725c583a3b89bf"
      }
    ],
    "stats": {
      "total": 44,
      "additions": 44,
      "deletions": 0
    },
    "files": [
      {
        "sha": "c9c029818e0a5f88247f69335b6c7dfa50da9bfa",
        "filename": "src/Makefile.test.include",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/58e291cfad12fa85af87d093acfa7b44702e3521/src/Makefile.test.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/58e291cfad12fa85af87d093acfa7b44702e3521/src/Makefile.test.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.test.include?ref=58e291cfad12fa85af87d093acfa7b44702e3521",
        "patch": "@@ -97,6 +97,7 @@ BITCOIN_TESTS =\\\n   test/bswap_tests.cpp \\\n   test/checkqueue_tests.cpp \\\n   test/coins_tests.cpp \\\n+  test/compilerbug_tests.cpp \\\n   test/compress_tests.cpp \\\n   test/crypto_tests.cpp \\\n   test/cuckoocache_tests.cpp \\"
      },
      {
        "sha": "74e1eac3ea149c7029bca1f1822e11f86a9b0903",
        "filename": "src/test/compilerbug_tests.cpp",
        "status": "added",
        "additions": 43,
        "deletions": 0,
        "changes": 43,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/58e291cfad12fa85af87d093acfa7b44702e3521/src/test/compilerbug_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/58e291cfad12fa85af87d093acfa7b44702e3521/src/test/compilerbug_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/compilerbug_tests.cpp?ref=58e291cfad12fa85af87d093acfa7b44702e3521",
        "patch": "@@ -0,0 +1,43 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <test/setup_common.h>\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_FIXTURE_TEST_SUITE(compilerbug_tests, BasicTestingSetup)\n+\n+#if defined(__GNUC__)\n+// This block will also be built under clang, which is fine (as it supports noinline)\n+void __attribute__ ((noinline)) set_one(unsigned char* ptr)\n+{\n+    *ptr = 1;\n+}\n+\n+int __attribute__ ((noinline)) check_zero(unsigned char const* in, unsigned int len)\n+{\n+    for (unsigned int i = 0; i < len; ++i) {\n+        if (in[i] != 0) return 0;\n+    }\n+    return 1;\n+}\n+\n+void set_one_on_stack() {\n+    unsigned char buf[1];\n+    set_one(buf);\n+}\n+\n+BOOST_AUTO_TEST_CASE(gccbug_90348) {\n+    // Test for GCC bug 90348. See https://gcc.gnu.org/bugzilla/show_bug.cgi?id=90348\n+    for (int i = 0; i <= 4; ++i) {\n+        unsigned char in[4];\n+        for (int j = 0; j < i; ++j) {\n+            in[j] = 0;\n+            set_one_on_stack(); // Apparently modifies in[0]\n+        }\n+        BOOST_CHECK(check_zero(in, i));\n+    }\n+}\n+#endif\n+\n+BOOST_AUTO_TEST_SUITE_END()"
      }
    ]
  }
]