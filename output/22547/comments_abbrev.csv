klementtan,2021-07-25 16:29:33,"Also address #17314 \n\n> Alternative, more human-friendly, format besides JSON? Colors, progress bars 😄?",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-886226147,886226147,
hebasto,2021-07-25 16:32:32,"> **Motivation**: Improve user-friendliness of `-getinfo`\n\nNot sure if `bitcoin-cli` is dedicated to casual users.",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-886226520,886226520,
klementtan,2021-07-25 18:31:09,"> Not sure if bitcoin-cli is dedicated to casual users.\n\n@hebasto thanks for the feedback! I can see where you are coming from but from #17314 I was under the impression that we want to make `bitcoin-cli` more friendly to casual users. Will be happy to close this PR if this additional feature is deemed unnecessary. \n\n> Now that getinfo is no longer part of the RPC API, and client-side impl",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-886240672,886240672,
prayank23,2021-07-25 20:41:19,Concept ACK. Will try today.,https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-886255082,886255082,
theStack,2021-07-27 12:55:51,"Concept ACK\n\nSince _""getinfo is no longer part of the RPC API, and client-side implementation is not subject to API stability""_ (quoting the description in #17314) , its output is meant only to be consumed by humans (""the eye""), not for machines and hence using it ever in a script would obviously be a bad idea that shouldn't be encouraged. For those purposes we have the RPC API.\n\nI think C",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-887488172,887488172,
jonatack,2021-07-27 12:56:51,"No opinion yet about this change. Just mentioning that there is a distinction between client-side CLI commands and the server-side RPC API. IIRC part of the point of the client-side CLI, along with aggregating multiple RPC calls in some cases, is to be human-friendly and freer of API constraints. We warn about software depending on the client-side CLI (for stability it should use the RPC API inste",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-887488881,887488881,
jarolrod,2021-07-27 15:33:44,"Thanks @theStack @jonatack, retracted my NACK",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-887614662,887614662,
Zero-1729,2021-07-27 18:36:15,"Concept ACK, nice UX addition for the CLI.\n\nEspecially neat with `watch -n 1 bitcoin-cli -getinfo` as @theStack [mentioned above](https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-887488172).",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-887740644,887740644,
jonatack,2021-07-28 08:56:33,"Ok, I tested and TBH find it distracting, somewhat blinding with the large patch of white, and inaccurate.  It just adds noise here.  Might make more sense in the GUI.  If you do keep it, maybe a muted grey instead and not displayed if > 99%.",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-888137617,888137617,
klementtan,2021-07-28 14:08:55,"Thanks, reviewers for the feedback and insights!\n\nIt seems there is a mixed response to this feature. I will leave this PR open for a few more days to get more feedback and close it afterward if there is still no strong demand for it.\n\n> If you do keep it, maybe a muted grey instead and not displayed if > 99%.\n\n@jonatack thanks for the suggestion! Implemented it in e75ee3e to a94d991 ",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-888340048,888340048,
prayank23,2021-07-28 16:10:30,"> Progress bar will only be displayed when verification progress < 99%\nChange filled bar to make it less blinding\n\nNo progress bar for >= 99% verification makes sense. \n\n```diff\n-\u2588\n+\u2592\n```\nNew Unicode for COMPLETE BAR looks good.\n\nTested with command: `watch -c -t -n 1 bitcoin-cli -getinfo` (Don't see colors using `watch` but the progress bar and other things LGTM.\",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-888436243,888436243,
klementtan,2021-07-31 10:50:47,@prayank23 Thanks for testing it! I think you're not seeing colour because your stdout is not connected to the terminal. You can get colour if you set `-color=always`,https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-890329348,890329348,
jonatack,2021-07-31 17:27:00,This seems to be a nice improvement over the last version.  Some code review feedback here: https://github.com/jonatack/bitcoin/commit/b640049,https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-890379177,890379177,
Zero-1729,2021-07-31 18:12:42,"tACK a94d99199f17c667ba76fdb77c48ce6136afa81f\n\nNice update. However, @klementtan I'd strongly suggest adding @jonatack's [suggestions](https://github.com/jonatack/bitcoin/commit/b640049). For example, I just noticed the lack of space between the progress bar and the percentage value. Additionally, I think the other suggestions there would greatly help readability and simplify future code revie",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-890385158,890385158,
prayank23,2021-08-01 19:53:40,"crACK https://github.com/bitcoin/bitcoin/commit/71c1556f1476abb61f3faca239e2f2eb857b72cb. Will test this week.\n\nChanges that I see since last review:\n\n1. Changed `GetProgressBar()` function from static to void. Reason is explained by @jonatack in this [comment](https://github.com/jonatack/bitcoin/commit/b640049#r54238126) \n\n```diff\n-static std::string GetProgressBar(const double prog",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-890576609,890576609,
klementtan,2021-08-01 20:14:00,"a94d991 ... dba61d0\n- Added whitespace between the progress bar and percentage \n- Used suggestions in jonatack@b640049\n\n> Note: I also wasn't getting color from watch --color -n 1 so I prefixed bitcoin-cli -getinfo with unbuffer (from the expect package) to get it working.\n\n@Zero-1729 Thanks for testing! I think you will need to use `watch -c -t -n 1  ./src/bitcoin-cli -signet -color=a",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-890579463,890579463,
prayank23,2021-08-02 02:18:59,"> @prayank23 Thanks for testing it! I think you're not seeing colour because your stdout is not connected to the terminal. You can get colour if you set -color=always\n\nYes this works. I forgot the option that you added in last PR.\n\n`watch -c -t -n 1 bitcoin-cli -getinfo color=always`\n\n<details>\n<summary><b>progress >= 0.99</b></summary>\n\n![image](https://user-images.githubusercon",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-890662061,890662061,
jonatack,2021-08-02 15:26:45,"> there is no reason to remove the `static` attribute from `GetProgressBar`; the function still only needs to be visible in the same compilation unit\n\nAgree!\n\n> the new interface implictely assumes now that the passed string is already empty, as it only appends to `progress_bar`\n\nIIUC this seems fine, insofar that one might want to append a progress bar to a result string that already ",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-891118050,891118050,
klementtan,2021-08-02 18:57:42,dba61d0 to b851a92: Add `static` attribute to `GetProgressBar`,https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-891256471,891256471,
prayank23,2021-08-02 21:35:15,"> there is no reason to remove the static attribute from GetProgressBar; the function still only needs to be visible in the same compilation unit\n\nAgree. It can be changed to [non-static](https://stackoverflow.com/a/41196173/13445963) if required later.\n\nreACK https://github.com/bitcoin/bitcoin/commit/b851a92c06cd1d6a40a5527ae39d60ae7fa33fb9",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-891350481,891350481,
klementtan,2021-08-15 09:38:41,"@ShaMan239 Thanks for the detailed review! 👍  \n\nI agree that this feature is definitely not essential but from the feedback of other reviewers, it seems that it would make the user experience of using bitcoin-cli better. \n\n> adding the progress bar as a suboption\n\nFor now, I am not really inclined towards adding that because it would make `-getinfo` more complicated than necessary but ",https://github.com/bitcoin/bitcoin/pull/22547#issuecomment-899023536,899023536,
prayank23,2021-07-26 01:24:42,"```suggestion\n    std::string progress_bar = """";\n    static constexpr double INCREMENT{0.05};\n    static const std::string COMPLETE_BAR{""\u2588""};\n    static const std::string INCOMPLETE_BAR{""\u2591""};\n\n    for (int i = 0; i < progress / INCREMENT; i++) {\n        progress_bar += COMPLETE_BAR;\n    }\n\n    for (int i = 0; i < (1 - progress) / INCREMENT; i++) {\n        progress_b",https://github.com/bitcoin/bitcoin/pull/22547#discussion_r676236474,676236474,src/bitcoin-cli.cpp
klementtan,2021-07-27 14:32:45,Done. Thanks 👍 ,https://github.com/bitcoin/bitcoin/pull/22547#discussion_r677510265,677510265,src/bitcoin-cli.cpp
jonatack,2021-08-01 19:37:36,"```suggestion\n * @param[out] progress_bar  String representation of the progress bar.\n```",https://github.com/bitcoin/bitcoin/pull/22547#discussion_r680555954,680555954,src/bitcoin-cli.cpp
