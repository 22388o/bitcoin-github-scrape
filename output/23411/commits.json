[
  {
    "sha": "fa0389e5b83bf5e3433c51a0b7a94b15ed203627",
    "node_id": "C_kwDOABII59oAKGZhMDM4OWU1YjgzYmY1ZTM0MzNjNTFhMGI3YTk0YjE1ZWQyMDM2Mjc",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-11-01T15:11:30Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-11-26T09:42:14Z"
      },
      "message": "style: Remove unused whitespace",
      "tree": {
        "sha": "a25fc75e9b712348ee88bda57877e6dc2bc15f01",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a25fc75e9b712348ee88bda57877e6dc2bc15f01"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa0389e5b83bf5e3433c51a0b7a94b15ed203627",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUjwuQv+JkofrmWUmiUDCfI6rdyUoRZk2/+BBsg0bdS2b7v6TXb6ds3i5XUO7XXn\nE8L6vMh21oUMUOQBt7hxcSnfgj+YgiR8qe5YYu2GpnwqMTytqnn2ELZKnEzi0fCN\nGTKzB6K3hRveDSdqkyHdQ/ttIX4eI2SI2Y9XIkgyapx+OLLXe9OZZ1K1/f1hhJbo\nEvoJk634LF8zK256B2i6pzjloCezbVoKUYLGvU4TZKMYcRzysqgHuDtbaR1upHYU\niwvhXuBPBigNWPVu9O6cZRYIxvM7zIFS32fQZZ+gO8y+7x2KZqsVQ/99ehwiqNeF\nXq/+U1Sqma9II+2hjSp0A0me5S2LLaTiRbIuz4fygEfDqHarN64ufQlxewrOAf6n\nQut7xTwAQo/AhwprBWfLl/4ptKL9WnfBW3hp45Obz5+g6WbLllbKXRSuu9jRrLwW\n91vSEdDmH2n9jrgtYZSWwaGDnQ1hbu/9aY88olvrDtp+1+EVIyBsKpH79EitZUZa\nsMEbcnbn\n=ofYq\n-----END PGP SIGNATURE-----",
        "payload": "tree a25fc75e9b712348ee88bda57877e6dc2bc15f01\nparent 16d698cdcf3c4ef34bae4ccd616d0ddc4a7165d4\nauthor MarcoFalke <falke.marco@gmail.com> 1635779490 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1637919734 +0100\n\nstyle: Remove unused whitespace\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa0389e5b83bf5e3433c51a0b7a94b15ed203627",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa0389e5b83bf5e3433c51a0b7a94b15ed203627",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa0389e5b83bf5e3433c51a0b7a94b15ed203627/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "16d698cdcf3c4ef34bae4ccd616d0ddc4a7165d4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/16d698cdcf3c4ef34bae4ccd616d0ddc4a7165d4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/16d698cdcf3c4ef34bae4ccd616d0ddc4a7165d4"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 3,
      "deletions": 5
    },
    "files": [
      {
        "sha": "639a5791728b0f5f23dac64887a6068958e7278d",
        "filename": "src/node/coinstats.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 4,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa0389e5b83bf5e3433c51a0b7a94b15ed203627/src/node/coinstats.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa0389e5b83bf5e3433c51a0b7a94b15ed203627/src/node/coinstats.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/node/coinstats.cpp?ref=fa0389e5b83bf5e3433c51a0b7a94b15ed203627",
        "patch": "@@ -95,10 +95,8 @@ static bool GetUTXOStats(CCoinsView* view, BlockManager& blockman, CCoinsStats&\n     assert(pcursor);\n \n     if (!pindex) {\n-        {\n-            LOCK(cs_main);\n-            pindex = blockman.LookupBlockIndex(view->GetBestBlock());\n-        }\n+        LOCK(cs_main);\n+        pindex = blockman.LookupBlockIndex(view->GetBestBlock());\n     }\n     stats.nHeight = Assert(pindex)->nHeight;\n     stats.hashBlock = pindex->GetBlockHash();"
      },
      {
        "sha": "bd0a5e6c0ce5ceba4c14ad5f30ce8a896cc75321",
        "filename": "src/rpc/blockchain.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa0389e5b83bf5e3433c51a0b7a94b15ed203627/src/rpc/blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa0389e5b83bf5e3433c51a0b7a94b15ed203627/src/rpc/blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.cpp?ref=fa0389e5b83bf5e3433c51a0b7a94b15ed203627",
        "patch": "@@ -1217,7 +1217,7 @@ static RPCHelpMan gettxoutsetinfo()\n             ret.pushKV(\"hash_serialized_2\", stats.hashSerialized.GetHex());\n         }\n         if (hash_type == CoinStatsHashType::MUHASH) {\n-              ret.pushKV(\"muhash\", stats.hashSerialized.GetHex());\n+            ret.pushKV(\"muhash\", stats.hashSerialized.GetHex());\n         }\n         ret.pushKV(\"total_amount\", ValueFromAmount(stats.nTotalAmount));\n         if (!stats.index_used) {"
      }
    ]
  },
  {
    "sha": "fa23e385dae2b1246bd8e2f6e75eda16cf1597f3",
    "node_id": "C_kwDOABII59oAKGZhMjNlMzg1ZGFlMmIxMjQ2YmQ4ZTJmNmU3NWVkYTE2Y2YxNTk3ZjM",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-11-02T09:59:27Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-11-26T09:42:53Z"
      },
      "message": "Add dev doc to CCoinsStats::m_hash_type and make it const",
      "tree": {
        "sha": "64612bcbf94ec1f67f539527a3a028c59491fe0b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/64612bcbf94ec1f67f539527a3a028c59491fe0b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa23e385dae2b1246bd8e2f6e75eda16cf1597f3",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUg8ogv+Nc80xAq/2yVtTO1i80EgiTluoFtR1aO6ZHD55HSzY4P1cFQIlxAsym5Y\n41erBa8cMK4yt1IC0qJqHWEWfy6F1bS9YTk25+VFpaFcoQBFHWhZDulTgyZBc1B8\nKZ2XWwbcScMrLtj0t5Cva7Y/GPkN5CXgMqqpE407K/RxFROXkvvekcRt8CmJL/5e\nCN5bGpIecfYMGbQZSSMHAIkP7StEnYo2j5ScKG9ir/wt0dlpknTZVd4Xnk3lQXwq\n1dzgXaj1Aq78i3lCISfJcyfON40banbtjgfwv43a51E+K0ILQBPsCSjPEefF/QKi\nqioDa7E3k/cs9Su1LSPPj7X7tDExmLetzvChowWJxkmjJEkTWLOxbFHhvxTAcQ1T\nmOYnT/Lk9vx+DpteijpzDj4AGjrm53cB7lUoDboghOtDSCFpgaUvvEdMBmci19zY\nD4X0LThf/fsFuyJ2MpjyvFxbL70qeY8TzuAjARfvqDRsLpCtTQKds7e5ZILMdSqv\nIb/EInJw\n=qd9T\n-----END PGP SIGNATURE-----",
        "payload": "tree 64612bcbf94ec1f67f539527a3a028c59491fe0b\nparent fa0389e5b83bf5e3433c51a0b7a94b15ed203627\nauthor MarcoFalke <falke.marco@gmail.com> 1635847167 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1637919773 +0100\n\nAdd dev doc to CCoinsStats::m_hash_type and make it const\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa23e385dae2b1246bd8e2f6e75eda16cf1597f3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa23e385dae2b1246bd8e2f6e75eda16cf1597f3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa23e385dae2b1246bd8e2f6e75eda16cf1597f3/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa0389e5b83bf5e3433c51a0b7a94b15ed203627",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa0389e5b83bf5e3433c51a0b7a94b15ed203627",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa0389e5b83bf5e3433c51a0b7a94b15ed203627"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 4,
      "deletions": 3
    },
    "files": [
      {
        "sha": "1d95417d4fd79d25a00f0bfbffa6479e57c72032",
        "filename": "src/node/coinstats.h",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa23e385dae2b1246bd8e2f6e75eda16cf1597f3/src/node/coinstats.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa23e385dae2b1246bd8e2f6e75eda16cf1597f3/src/node/coinstats.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/node/coinstats.h?ref=fa23e385dae2b1246bd8e2f6e75eda16cf1597f3",
        "patch": "@@ -24,9 +24,10 @@ enum class CoinStatsHashType {\n     NONE,\n };\n \n-struct CCoinsStats\n-{\n-    CoinStatsHashType m_hash_type;\n+struct CCoinsStats {\n+    //! Which hash type to use\n+    const CoinStatsHashType m_hash_type;\n+\n     int nHeight{0};\n     uint256 hashBlock{};\n     uint64_t nTransactions{0};"
      }
    ]
  },
  {
    "sha": "fa2b684e3aedbec89b8185fecf4fa656b04d4136",
    "node_id": "C_kwDOABII59oAKGZhMmI2ODRlM2FlZGJlYzg5YjgxODVmZWNmNGZhNjU2YjA0ZDQxMzY",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-11-02T08:41:48Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-11-26T09:43:25Z"
      },
      "message": "Move AdditionOverflow to util, Add CheckedAdd with unit tests",
      "tree": {
        "sha": "850897d9e6847f897e46d28b493531d174b041ed",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/850897d9e6847f897e46d28b493531d174b041ed"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa2b684e3aedbec89b8185fecf4fa656b04d4136",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUhlrAv9G09D/dUolVis4RfND/0EVzeKAlpMKnA+WX81+PQ1fPpE88XDrRc6DhLA\nfmPqsTqclwY88WTYJLvXFxBq/VkQYwztuzdiOvLyj0XvXFqR99+Edoc9VkBb7JS4\n5NYqLc8I/dyn/pvOqdwkktlM9pDGRnEVuQym54XteRo5+eOxBxLlN6Q0H9OE3Lyg\nsDaJCjOa0lXLn9we0Rx8cgvbXftODOSkGssjEDZLxYvpoqcjcLVS3Z8+JLSAlFOX\nyvLEgcmIkyWjc0al2adCGXpscFn3Rxs6EOENZ4i0ls+WJ3NPDulKCXI+GnwGmOKN\nCRYJ1juub2fiRhuxFFv2E1MzovBYaD5pKa9hWgqicHDMP+cFCatzuE4Vgu/kJNPh\nSNS99OGJhYdGdZ71lyAU+bviwKr9MiBDahCcm7GQC7BE6jqCQ5L+Wfw9vWvMoUvs\nzv1y1gGFGKYaKrkflVY/yVM5oChZEP0RlmMe3CN6WqWpl3l6uHNk40lxlJLqxTjH\n2YXa5zBc\n=+Dr/\n-----END PGP SIGNATURE-----",
        "payload": "tree 850897d9e6847f897e46d28b493531d174b041ed\nparent fa23e385dae2b1246bd8e2f6e75eda16cf1597f3\nauthor MarcoFalke <falke.marco@gmail.com> 1635842508 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1637919805 +0100\n\nMove AdditionOverflow to util, Add CheckedAdd with unit tests\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa2b684e3aedbec89b8185fecf4fa656b04d4136",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa2b684e3aedbec89b8185fecf4fa656b04d4136",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa2b684e3aedbec89b8185fecf4fa656b04d4136/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa23e385dae2b1246bd8e2f6e75eda16cf1597f3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa23e385dae2b1246bd8e2f6e75eda16cf1597f3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa23e385dae2b1246bd8e2f6e75eda16cf1597f3"
      }
    ],
    "stats": {
      "total": 83,
      "additions": 72,
      "deletions": 11
    },
    "files": [
      {
        "sha": "fa9b8a8564c12be47cf93e5385952d357fb28df2",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=fa2b684e3aedbec89b8185fecf4fa656b04d4136",
        "patch": "@@ -246,6 +246,7 @@ BITCOIN_CORE_H = \\\n   util/macros.h \\\n   util/message.h \\\n   util/moneystr.h \\\n+  util/overflow.h \\\n   util/overloaded.h \\\n   util/rbf.h \\\n   util/readwritefile.h \\"
      },
      {
        "sha": "cfad41659e1b8236c928eaef12c7a2c9a20ee2b5",
        "filename": "src/test/fuzz/addition_overflow.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/test/fuzz/addition_overflow.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/test/fuzz/addition_overflow.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/fuzz/addition_overflow.cpp?ref=fa2b684e3aedbec89b8185fecf4fa656b04d4136",
        "patch": "@@ -5,6 +5,7 @@\n #include <test/fuzz/FuzzedDataProvider.h>\n #include <test/fuzz/fuzz.h>\n #include <test/fuzz/util.h>\n+#include <util/overflow.h>\n \n #include <cstdint>\n #include <string>"
      },
      {
        "sha": "596614a71bf858d1159c0a18598aac79081d6e73",
        "filename": "src/test/fuzz/crypto_chacha20_poly1305_aead.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/test/fuzz/crypto_chacha20_poly1305_aead.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/test/fuzz/crypto_chacha20_poly1305_aead.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/fuzz/crypto_chacha20_poly1305_aead.cpp?ref=fa2b684e3aedbec89b8185fecf4fa656b04d4136",
        "patch": "@@ -7,6 +7,7 @@\n #include <test/fuzz/FuzzedDataProvider.h>\n #include <test/fuzz/fuzz.h>\n #include <test/fuzz/util.h>\n+#include <util/overflow.h>\n \n #include <cassert>\n #include <cstdint>"
      },
      {
        "sha": "6161c090f81f69cef5ff047d7129080344f43a17",
        "filename": "src/test/fuzz/integer.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/test/fuzz/integer.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/test/fuzz/integer.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/fuzz/integer.cpp?ref=fa2b684e3aedbec89b8185fecf4fa656b04d4136",
        "patch": "@@ -26,6 +26,7 @@\n #include <univalue.h>\n #include <util/check.h>\n #include <util/moneystr.h>\n+#include <util/overflow.h>\n #include <util/strencodings.h>\n #include <util/string.h>\n #include <util/system.h>"
      },
      {
        "sha": "0004d82d66b52691563e88342779d8e919950444",
        "filename": "src/test/fuzz/pow.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/test/fuzz/pow.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/test/fuzz/pow.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/fuzz/pow.cpp?ref=fa2b684e3aedbec89b8185fecf4fa656b04d4136",
        "patch": "@@ -9,6 +9,7 @@\n #include <test/fuzz/FuzzedDataProvider.h>\n #include <test/fuzz/fuzz.h>\n #include <test/fuzz/util.h>\n+#include <util/overflow.h>\n \n #include <cstdint>\n #include <optional>"
      },
      {
        "sha": "3034db34b496d11bb22dc54c0fe3e990e2bad1ca",
        "filename": "src/test/fuzz/util.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/test/fuzz/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/test/fuzz/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/fuzz/util.cpp?ref=fa2b684e3aedbec89b8185fecf4fa656b04d4136",
        "patch": "@@ -6,6 +6,7 @@\n #include <pubkey.h>\n #include <test/fuzz/util.h>\n #include <test/util/script.h>\n+#include <util/overflow.h>\n #include <util/rbf.h>\n #include <util/time.h>\n #include <version.h>"
      },
      {
        "sha": "64b0f31ed82cc27d675feaa0d96b5016d13e201c",
        "filename": "src/test/fuzz/util.h",
        "status": "modified",
        "additions": 0,
        "deletions": 11,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/test/fuzz/util.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/test/fuzz/util.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/fuzz/util.h?ref=fa2b684e3aedbec89b8185fecf4fa656b04d4136",
        "patch": "@@ -191,17 +191,6 @@ template <typename T>\n     }\n }\n \n-template <class T>\n-[[nodiscard]] bool AdditionOverflow(const T i, const T j) noexcept\n-{\n-    static_assert(std::is_integral<T>::value, \"Integral required.\");\n-    if (std::numeric_limits<T>::is_signed) {\n-        return (i > 0 && j > std::numeric_limits<T>::max() - i) ||\n-               (i < 0 && j < std::numeric_limits<T>::min() - i);\n-    }\n-    return std::numeric_limits<T>::max() - i < j;\n-}\n-\n [[nodiscard]] bool ContainsSpentInput(const CTransaction& tx, const CCoinsViewCache& inputs) noexcept;\n \n /**"
      },
      {
        "sha": "40907d1476ca81ca392438b05c49b3170c3fd940",
        "filename": "src/test/util_tests.cpp",
        "status": "modified",
        "additions": 35,
        "deletions": 0,
        "changes": 35,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/test/util_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/test/util_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/util_tests.cpp?ref=fa2b684e3aedbec89b8185fecf4fa656b04d4136",
        "patch": "@@ -15,6 +15,7 @@\n #include <util/getuniquepath.h>\n #include <util/message.h> // For MessageSign(), MessageVerify(), MESSAGE_MAGIC\n #include <util/moneystr.h>\n+#include <util/overflow.h>\n #include <util/spanparsing.h>\n #include <util/strencodings.h>\n #include <util/string.h>\n@@ -1465,6 +1466,40 @@ BOOST_AUTO_TEST_CASE(test_IsDigit)\n     BOOST_CHECK_EQUAL(IsDigit(9), false);\n }\n \n+/* Check for overflow */\n+template <typename T>\n+static bool TestAddMatrixOverflow()\n+{\n+    constexpr T MAXI{std::numeric_limits<T>::max()};\n+    assert(!CheckedAdd(T{1}, MAXI));\n+    assert(!CheckedAdd(MAXI, MAXI));\n+    assert(0 == CheckedAdd(T{0}, T{0}).value());\n+    assert(MAXI == CheckedAdd(T{0}, MAXI).value());\n+    assert(MAXI == CheckedAdd(T{1}, MAXI - 1).value());\n+    return true;\n+}\n+\n+/* Check for overflow or underflow */\n+template <typename T>\n+static bool TestAddMatrix()\n+{\n+    TestAddMatrixOverflow<T>();\n+    constexpr T MINI{std::numeric_limits<T>::min()};\n+    constexpr T MAXI{std::numeric_limits<T>::max()};\n+    assert(!CheckedAdd(T{-1}, MINI));\n+    assert(!CheckedAdd(MINI, MINI));\n+    assert(MINI == CheckedAdd(T{0}, MINI).value());\n+    assert(MINI == CheckedAdd(T{-1}, MINI + 1).value());\n+    assert(-1 == CheckedAdd(MINI, MAXI).value());\n+    return true;\n+}\n+\n+BOOST_AUTO_TEST_CASE(util_overflow)\n+{\n+    BOOST_CHECK(TestAddMatrixOverflow<unsigned>());\n+    BOOST_CHECK(TestAddMatrix<signed>());\n+}\n+\n BOOST_AUTO_TEST_CASE(test_ParseInt32)\n {\n     int32_t n;"
      },
      {
        "sha": "5982af8d0439b6d75cd54486b44f77f4068a9ca7",
        "filename": "src/util/overflow.h",
        "status": "added",
        "additions": 31,
        "deletions": 0,
        "changes": 31,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/util/overflow.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa2b684e3aedbec89b8185fecf4fa656b04d4136/src/util/overflow.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/overflow.h?ref=fa2b684e3aedbec89b8185fecf4fa656b04d4136",
        "patch": "@@ -0,0 +1,31 @@\n+// Copyright (c) 2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_OVERFLOW_H\n+#define BITCOIN_UTIL_OVERFLOW_H\n+\n+#include <limits>\n+#include <type_traits>\n+\n+template <class T>\n+[[nodiscard]] bool AdditionOverflow(const T i, const T j) noexcept\n+{\n+    static_assert(std::is_integral<T>::value, \"Integral required.\");\n+    if (std::numeric_limits<T>::is_signed) {\n+        return (i > 0 && j > std::numeric_limits<T>::max() - i) ||\n+               (i < 0 && j < std::numeric_limits<T>::min() - i);\n+    }\n+    return std::numeric_limits<T>::max() - i < j;\n+}\n+\n+template <class T>\n+[[nodiscard]] std::optional<T> CheckedAdd(const T i, const T j) noexcept\n+{\n+    if (AdditionOverflow(i, j)) {\n+        return std::nullopt;\n+    }\n+    return i + j;\n+}\n+\n+#endif // BITCOIN_UTIL_OVERFLOW_H"
      }
    ]
  },
  {
    "sha": "fa72733b12eac2fa038afb75c9463570b48ea34b",
    "node_id": "C_kwDOABII59oAKGZhNzI3MzNiMTJlYWMyZmEwMzhhZmI3NWM5NDYzNTcwYjQ4ZWEzNGI",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-11-01T15:59:59Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-11-26T09:43:33Z"
      },
      "message": "refactor: Avoid integer overflow in ApplyStats when activating snapshot",
      "tree": {
        "sha": "0f998b21b15925a8212d086fdee10b47372a4e6a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0f998b21b15925a8212d086fdee10b47372a4e6a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa72733b12eac2fa038afb75c9463570b48ea34b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUiKNgv+IK0sBGq54iV/4BTb0XukkR1pKvEfB0MW57TYmIXOiu8dqftekpPKhthe\nGyLC/1hSHZ6kMO3YWIyGx4ciFbIiP4NltfeH5PcU0oGnyG20xgW0LPHJ+aP6HCla\nhjdEuvEEHUURIKbOL1DD+1uZ96Ntiai3XXR4EjEsjy29+6EB0OETojTZvjVxbK4K\nTpAaqL2mZTAjMGpGmHsQ7Kyns2W90wI/4inmzpIcbgYUzvkjYyLGD9CCDGOn0sIT\neq66SMSaeK2Xsp83Emlaj+k2XS18r97+RpC1FzrInp3WDUxZqg38ACtlwmKf43RN\nhSvl7uyCdwnbrGiuM8Et0ReiqtMqz1G8RiIQ0wK2bAaSeoHAGwoOCqYmz13jfabR\natadTaNLoE3mHToVTlsY8s9hVLFY6BxnSCckL5oJUga6YXVNZzH+7pSiQxHhsfwf\nyCxHgT+GA0CvaxpraAJE+OxSdPaS3qx1VWgfmJtw0pOtrU8T/XvvTLGqPfojDJJf\nFEMXNGTq\n=UPWJ\n-----END PGP SIGNATURE-----",
        "payload": "tree 0f998b21b15925a8212d086fdee10b47372a4e6a\nparent fa2b684e3aedbec89b8185fecf4fa656b04d4136\nauthor MarcoFalke <falke.marco@gmail.com> 1635782399 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1637919813 +0100\n\nrefactor: Avoid integer overflow in ApplyStats when activating snapshot\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa72733b12eac2fa038afb75c9463570b48ea34b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa72733b12eac2fa038afb75c9463570b48ea34b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa72733b12eac2fa038afb75c9463570b48ea34b/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa2b684e3aedbec89b8185fecf4fa656b04d4136",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa2b684e3aedbec89b8185fecf4fa656b04d4136",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa2b684e3aedbec89b8185fecf4fa656b04d4136"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 9,
      "deletions": 4
    },
    "files": [
      {
        "sha": "e4ee0e674b73d27cf4040dd3f754944ec8677444",
        "filename": "src/index/coinstatsindex.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa72733b12eac2fa038afb75c9463570b48ea34b/src/index/coinstatsindex.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa72733b12eac2fa038afb75c9463570b48ea34b/src/index/coinstatsindex.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/index/coinstatsindex.cpp?ref=fa72733b12eac2fa038afb75c9463570b48ea34b",
        "patch": "@@ -321,7 +321,7 @@ bool CoinStatsIndex::LookUpStats(const CBlockIndex* block_index, CCoinsStats& co\n     coins_stats.hashSerialized = entry.muhash;\n     coins_stats.nTransactionOutputs = entry.transaction_output_count;\n     coins_stats.nBogoSize = entry.bogo_size;\n-    coins_stats.nTotalAmount = entry.total_amount;\n+    coins_stats.total_amount = entry.total_amount;\n     coins_stats.total_subsidy = entry.total_subsidy;\n     coins_stats.total_unspendable_amount = entry.total_unspendable_amount;\n     coins_stats.total_prevout_spent_amount = entry.total_prevout_spent_amount;"
      },
      {
        "sha": "eb21bbdba859fcf60ddf09157648b8d02796085c",
        "filename": "src/node/coinstats.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa72733b12eac2fa038afb75c9463570b48ea34b/src/node/coinstats.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa72733b12eac2fa038afb75c9463570b48ea34b/src/node/coinstats.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/node/coinstats.cpp?ref=fa72733b12eac2fa038afb75c9463570b48ea34b",
        "patch": "@@ -11,6 +11,7 @@\n #include <index/coinstatsindex.h>\n #include <serialize.h>\n #include <uint256.h>\n+#include <util/overflow.h>\n #include <util/system.h>\n #include <validation.h>\n \n@@ -82,7 +83,9 @@ static void ApplyStats(CCoinsStats& stats, const uint256& hash, const std::map<u\n     stats.nTransactions++;\n     for (auto it = outputs.begin(); it != outputs.end(); ++it) {\n         stats.nTransactionOutputs++;\n-        stats.nTotalAmount += it->second.out.nValue;\n+        if (stats.total_amount.has_value()) {\n+            stats.total_amount = CheckedAdd(*stats.total_amount, it->second.out.nValue);\n+        }\n         stats.nBogoSize += GetBogoSize(it->second.out.scriptPubKey);\n     }\n }"
      },
      {
        "sha": "2a8fbf5bc64330be9903fba288a7c1e36b29169c",
        "filename": "src/node/coinstats.h",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa72733b12eac2fa038afb75c9463570b48ea34b/src/node/coinstats.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa72733b12eac2fa038afb75c9463570b48ea34b/src/node/coinstats.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/node/coinstats.h?ref=fa72733b12eac2fa038afb75c9463570b48ea34b",
        "patch": "@@ -35,7 +35,8 @@ struct CCoinsStats {\n     uint64_t nBogoSize{0};\n     uint256 hashSerialized{};\n     uint64_t nDiskSize{0};\n-    CAmount nTotalAmount{0};\n+    //! The total amount, or nullopt if an overflow occurred calculating it\n+    std::optional<CAmount> total_amount{0};\n \n     //! The number of coins contained.\n     uint64_t coins_count{0};"
      },
      {
        "sha": "bb67f304cd48b738b1a19fc8259a6194ef5981aa",
        "filename": "src/rpc/blockchain.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa72733b12eac2fa038afb75c9463570b48ea34b/src/rpc/blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa72733b12eac2fa038afb75c9463570b48ea34b/src/rpc/blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.cpp?ref=fa72733b12eac2fa038afb75c9463570b48ea34b",
        "patch": "@@ -1219,7 +1219,8 @@ static RPCHelpMan gettxoutsetinfo()\n         if (hash_type == CoinStatsHashType::MUHASH) {\n             ret.pushKV(\"muhash\", stats.hashSerialized.GetHex());\n         }\n-        ret.pushKV(\"total_amount\", ValueFromAmount(stats.nTotalAmount));\n+        CHECK_NONFATAL(stats.total_amount);\n+        ret.pushKV(\"total_amount\", ValueFromAmount(stats.total_amount.value()));\n         if (!stats.index_used) {\n             ret.pushKV(\"transactions\", static_cast<int64_t>(stats.nTransactions));\n             ret.pushKV(\"disk_size\", stats.nDiskSize);"
      }
    ]
  }
]