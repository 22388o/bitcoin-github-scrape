DrahtBot,2019-07-01 09:17:36,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15134](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15134.html) (tests: Switch one of the Travis jobs to an ",https://github.com/bitcoin/bitcoin/pull/16320#issuecomment-507185778,507185778,
MarcoFalke,2019-07-01 13:35:16,"I think there is a value to non-deterministic tests, as long as their seed is known (e.g printed to stdout at the beginning of the test, or written to a file on failure, ...)",https://github.com/bitcoin/bitcoin/pull/16320#issuecomment-507267041,507267041,
sdaftuar,2019-07-01 18:42:22,"I also think that non-deterministic tests can be valuable; as an example, a non-deterministic functional test (`feature_dbcrash.py`) found a bug in the non-atomic utxo writes PR (#10148).  I doubt I would have found that bug without it.\n\nSo if this PR's intention is to move towards eliminating non-determinism as a tool in our testing, then I tend to concept NACK.",https://github.com/bitcoin/bitcoin/pull/16320#issuecomment-507379190,507379190,
practicalswift,2019-07-02 07:58:25,"@MarcoFalke @sdaftuar \n\nIt seems like I didn't properly communicate the goal of this PR :-)  Sorry about that.\n\nThe goal of this PR is to make sure line coverage-reports are deterministic.\n\nThis PR addresses #14343: ""coverage reports non-deterministic"" (opened by you @MarcoFalke :-))\n\nThe problem is described in MarcoFalke's issue:\n\n> Our unit tests and functional tests are non",https://github.com/bitcoin/bitcoin/pull/16320#issuecomment-507565847,507565847,
sdaftuar,2019-07-03 18:34:21,"I'm not familiar with the line coverage reports at all and don't really have a view there.  If we merged this PR, then in the future if someone wanted to write a unit test that was non-deterministic, what should they do if this linter fails?",https://github.com/bitcoin/bitcoin/pull/16320#issuecomment-508208915,508208915,
practicalswift,2019-07-03 21:06:26,"@sdaftuar If line coverage fluctuation in a test is *intentional* then one would simply add a suppression to `test_deterministic_coverage.sh` :-)\n\nThis PR is only meant to guard against _accidental_ introduction of _new_  tests which turns the line coverage number into a random process.\n\nMore concretely the situation I want to guard against is the following: line coverage is reported as 80",https://github.com/bitcoin/bitcoin/pull/16320#issuecomment-508255011,508255011,
sdaftuar,2019-07-04 15:33:56,"@practicalswift Thanks for clarifying that.\n\nI tend to think that test writers face too many hurdles and knowledge requirements about the repo (and figuring out how to deal with linters that provide unclear benefits when applied as a hard-and-fast rule, like this one would).  It's demoralizing to include a test for something and then have some unrelated script break for spurious reasons that r",https://github.com/bitcoin/bitcoin/pull/16320#issuecomment-508520861,508520861,
practicalswift,2019-07-04 15:49:34,"@MarcoFalke As the person who filed issue #14343 (""coverage reports non-deterministic"") which this PR tries to address: can you clarify your position?\n\nPersonally I kind of took it for granted that we want to know how suggested PR:s changes unit test line coverage. Assumptions are dangerous :-)\n\nIf the consensus opinion is that we are okay with the unit test line coverage sometimes being a",https://github.com/bitcoin/bitcoin/pull/16320#issuecomment-508524855,508524855,
fanquake,2019-07-05 02:30:09,"> Assumptions are dangerous :-)\n\nI'm more concerned about the potential for reduced input from high-quality, long term contributors due to the overhead of new scripts, lints, tools etc than I am about occasionally seeing a small variation in coverage output. So I'm in agreement with @sdaftuar here.",https://github.com/bitcoin/bitcoin/pull/16320#issuecomment-508609509,508609509,
MarcoFalke,2019-07-08 21:13:54,"I think it is nice to know whether a new test has stable line coverage, but it non-stable coverage shouldn't be blocking a merge. Especially, since it might not be trivial to make them stable (c.f. https://github.com/bitcoin/bitcoin/issues/14343#issuecomment-426940085)\n\nI guess I wouldn't mind if some of the linter were put behind the `allow_failures` travis flag.",https://github.com/bitcoin/bitcoin/pull/16320#issuecomment-509394406,509394406,
practicalswift,2019-07-09 16:50:06,@MarcoFalke Using `allow_failures` sounds like a very good idea. I'll investigate! :-),https://github.com/bitcoin/bitcoin/pull/16320#issuecomment-509720659,509720659,
