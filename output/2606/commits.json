[
  {
    "sha": "d605bc4cd13716fde9c34d79a01f4ee128f8814f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNjA1YmM0Y2QxMzcxNmZkZTljMzRkNzlhMDFmNGVlMTI4Zjg4MTRm",
    "commit": {
      "author": {
        "name": "Gavin Andresen",
        "email": "gavinandresen@gmail.com",
        "date": "2013-05-02T16:26:33Z"
      },
      "committer": {
        "name": "Gavin Andresen",
        "email": "gavinandresen@gmail.com",
        "date": "2013-05-02T16:26:33Z"
      },
      "message": "Exit cleanly if AppInit2 returns false\n\nBitcoin-Qt could core dump if application initialization failed in certain ways.\n\nI double-fixed this:\n1) qt/bitcoin.cpp now shuts down core threads cleanly if AppInit2 returns false\n2) init.cpp now exits before StartNode() if strErrors is set (no reason to StartNode if we're just going to exit immediately anyway).\n\nTested by triggering all of the various ways AppInit2 can fail, either by passing bogus command-line arguments or just recompiling tweaked code to simulate failure.\n\nThis is a partial fix for #2480",
      "tree": {
        "sha": "d6fe14f8a9654b4eaa5b4df69e02fb6820c12b95",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d6fe14f8a9654b4eaa5b4df69e02fb6820c12b95"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d605bc4cd13716fde9c34d79a01f4ee128f8814f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d605bc4cd13716fde9c34d79a01f4ee128f8814f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d605bc4cd13716fde9c34d79a01f4ee128f8814f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d605bc4cd13716fde9c34d79a01f4ee128f8814f/comments",
    "author": {
      "login": "gavinandresen",
      "id": 331997,
      "node_id": "MDQ6VXNlcjMzMTk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/331997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavinandresen",
      "html_url": "https://github.com/gavinandresen",
      "followers_url": "https://api.github.com/users/gavinandresen/followers",
      "following_url": "https://api.github.com/users/gavinandresen/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavinandresen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavinandresen/subscriptions",
      "organizations_url": "https://api.github.com/users/gavinandresen/orgs",
      "repos_url": "https://api.github.com/users/gavinandresen/repos",
      "events_url": "https://api.github.com/users/gavinandresen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavinandresen/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "gavinandresen",
      "id": 331997,
      "node_id": "MDQ6VXNlcjMzMTk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/331997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavinandresen",
      "html_url": "https://github.com/gavinandresen",
      "followers_url": "https://api.github.com/users/gavinandresen/followers",
      "following_url": "https://api.github.com/users/gavinandresen/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavinandresen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavinandresen/subscriptions",
      "organizations_url": "https://api.github.com/users/gavinandresen/orgs",
      "repos_url": "https://api.github.com/users/gavinandresen/repos",
      "events_url": "https://api.github.com/users/gavinandresen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavinandresen/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "eef2091fe9ee39ecd8e874c91d3ab0ff023c5356",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/eef2091fe9ee39ecd8e874c91d3ab0ff023c5356",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/eef2091fe9ee39ecd8e874c91d3ab0ff023c5356"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 6,
      "deletions": 3
    },
    "files": [
      {
        "sha": "c2259f1d76d08865a9e55dc86a1628e414b5d5a3",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d605bc4cd13716fde9c34d79a01f4ee128f8814f/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d605bc4cd13716fde9c34d79a01f4ee128f8814f/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=d605bc4cd13716fde9c34d79a01f4ee128f8814f",
        "patch": "@@ -1033,6 +1033,9 @@ bool AppInit2(boost::thread_group& threadGroup)\n     if (!CheckDiskSpace())\n         return false;\n \n+    if (!strErrors.str().empty())\n+        return InitError(strErrors.str());\n+\n     RandAddSeedPerfmon();\n \n     //// debug print\n@@ -1054,9 +1057,6 @@ bool AppInit2(boost::thread_group& threadGroup)\n \n     uiInterface.InitMessage(_(\"Done loading\"));\n \n-    if (!strErrors.str().empty())\n-        return InitError(strErrors.str());\n-\n      // Add wallet transactions that aren't already in a block to mapTransactions\n     pwalletMain->ReacceptWalletTransactions();\n "
      },
      {
        "sha": "a567eafd5cc98828f1ccfd08e11b0dd545f86adc",
        "filename": "src/qt/bitcoin.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d605bc4cd13716fde9c34d79a01f4ee128f8814f/src/qt/bitcoin.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d605bc4cd13716fde9c34d79a01f4ee128f8814f/src/qt/bitcoin.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoin.cpp?ref=d605bc4cd13716fde9c34d79a01f4ee128f8814f",
        "patch": "@@ -271,6 +271,9 @@ int main(int argc, char *argv[])\n         }\n         else\n         {\n+            threadGroup.interrupt_all();\n+            threadGroup.join_all();\n+            Shutdown();\n             return 1;\n         }\n     } catch (std::exception& e) {"
      }
    ]
  }
]