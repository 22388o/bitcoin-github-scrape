[
  {
    "sha": "2689c8fd7159f47248c5fc365463be8b0e8b039c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyNjg5YzhmZDcxNTlmNDcyNDhjNWZjMzY1NDYzYmU4YjBlOGIwMzlj",
    "commit": {
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2019-11-25T10:33:58Z"
      },
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2019-11-26T10:38:32Z"
      },
      "message": "[test] qt: add send screen balance test",
      "tree": {
        "sha": "bd48be43829a6460e80225732a98a2f00269d254",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bd48be43829a6460e80225732a98a2f00269d254"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2689c8fd7159f47248c5fc365463be8b0e8b039c",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAl3dAKgACgkQV/+b28ww\nEAntwA/+KSMZZFL4jUwjov2bcJPjmYY03V+1VWCaEJ68eKMOk/V5kps4vdzUkoQg\nN34Xb4yh/OTyojG01BMshtMClIjFsDcAnpHyDjsKwn+HYQ9UgcGZg8rqNDGEj1pA\nhEoklE7g83OdLfsQPjwPqINMHdW1qWuxqaym+OKMDS8Y4j4jiNLCGVDsSc2Mkl/r\nBhFxpM2IuE5JpXkCfHNaQ1FWXA6s6KrqgqCS1TtCRvEInqmupKlMPlXs3zmU38Te\njUgvY3qHdSFkXqP3Bbixr2uuIR7AhPSeB8QdL2/M/CJ1Dl2m1osb3E6QVfDQO3ss\nzpqTprBieSp6TWts7L24J+FtTSTHWKc7+mCDBX7BWaCdSLpjo+fUKYJsfNI8khiR\nFHD1bw+5+2VXyJE+yB27T7MJL3xDDcmlVStXVjcDtnW+q/lyYDPZdXrAhC2cIwoG\nENlOFdgnXm5XsvFv5GV82hl9Yf5X6O1F2pHLVChglpQRBR3RNBAfYklmnE8cFZXe\nTfTIQ6HKqU4V/Qj6HVnucbMKLlMbiHnpwtyJm1IWbiJIIwYkTguffO3kYztwNRW9\ny9Cy5djTSwzSWGTA3a1MBbymmCS3i+y+M37Uj4D7LqkQFXoYHi0J6JShVmz1hPhf\nWfzCU4ijWhEnnalNRsRUPPmEDc8rfrHfFSLvbAJt7y4Z0czsKho=\n=An1I\n-----END PGP SIGNATURE-----",
        "payload": "tree bd48be43829a6460e80225732a98a2f00269d254\nparent 0ee914ba9e5960763c7bb380b566ee481446f97a\nauthor Sjors Provoost <sjors@sprovoost.nl> 1574678038 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1574764712 +0100\n\n[test] qt: add send screen balance test\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2689c8fd7159f47248c5fc365463be8b0e8b039c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2689c8fd7159f47248c5fc365463be8b0e8b039c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2689c8fd7159f47248c5fc365463be8b0e8b039c/comments",
    "author": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0ee914ba9e5960763c7bb380b566ee481446f97a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0ee914ba9e5960763c7bb380b566ee481446f97a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0ee914ba9e5960763c7bb380b566ee481446f97a"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 10,
      "deletions": 0
    },
    "files": [
      {
        "sha": "dfd56511ea4060081e57a00ca5fadc90262ef7f6",
        "filename": "src/qt/test/wallettests.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2689c8fd7159f47248c5fc365463be8b0e8b039c/src/qt/test/wallettests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2689c8fd7159f47248c5fc365463be8b0e8b039c/src/qt/test/wallettests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/test/wallettests.cpp?ref=2689c8fd7159f47248c5fc365463be8b0e8b039c",
        "patch": "@@ -170,6 +170,16 @@ void TestGUI(interfaces::Node& node)\n     sendCoinsDialog.setModel(&walletModel);\n     transactionView.setModel(&walletModel);\n \n+    {\n+        // Check balance in send dialog\n+        QLabel* balanceLabel = sendCoinsDialog.findChild<QLabel*>(\"labelBalance\");\n+        QString balanceText = balanceLabel->text();\n+        int unit = walletModel.getOptionsModel()->getDisplayUnit();\n+        CAmount balance = walletModel.wallet().getBalance();\n+        QString balanceComparison = BitcoinUnits::formatWithUnit(unit, balance, false, BitcoinUnits::separatorAlways);\n+        QCOMPARE(balanceText, balanceComparison);\n+    }\n+\n     // Send two transactions, and verify they are added to transaction list.\n     TransactionTableModel* transactionTableModel = walletModel.getTransactionTableModel();\n     QCOMPARE(transactionTableModel->rowCount({}), 105);"
      }
    ]
  },
  {
    "sha": "4a96e459d733f1b6427221aaa1874ea00f79988a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0YTk2ZTQ1OWQ3MzNmMWI2NDI3MjIxYWFhMTg3NGVhMDBmNzk5ODhh",
    "commit": {
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2019-11-26T10:43:53Z"
      },
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2019-11-26T10:43:53Z"
      },
      "message": "[gui] send: show watch-only balance in send screen",
      "tree": {
        "sha": "80b260402be5309009074d4079e5883abbf9400d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/80b260402be5309009074d4079e5883abbf9400d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4a96e459d733f1b6427221aaa1874ea00f79988a",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAl3dAesACgkQV/+b28ww\nEAmKdg/+KNsUyxzb6a5xF4IU6UsD/KkQzVhmVIMru8Wi94oxMQz1SPrauQCfw3NR\ngP2p2A2kDyuzyTrx5V4ahaWIkW2kzyUaSq3lU+gfGHqeniNqNIFcGk+/MQIZLleM\neq4jOnZCDvkd0iwLqT4yZWaV8FKcFHUXJKkfiQvLQGRdONBXOmvJSJKY/YS2rngL\n+JhOrNMDTV+nTy71DBa4QsgEji3RH5GbDt+jdpt3iSvDQQWutc0/RLtjuU+27guH\nzBtOzMBRPOfXcLmHMkHRDIsZXnYPDowo0IVGfleN5yOcdLbQsDHBZ9Gs2Oqd0LD7\nBiV7B/IIPo7pTb0uP4NTg+JWPw63feetICWRE4zzLPMC7LEknz6SXvkY9a0RS9xG\nqWnOlC8ui/bRPTgOLWWD38/hL/mEHTFa5CboHZsP7nO6FUCKMvDl84GzmrPqL8TP\nRCwdXcVfABfkVTM6ci+f1dA7YSgQvj4qGQYoPyzMwdVGE0s8KdKK4whhk4w7gyZb\nKWSOo4UNiawd8JpK5EUTuQUGTuuzIO2rr/lHp2wCmPj9lnlDO849B9M2PTDUe8Fq\n66TJseEy5q59dha2eRf1wnf1L5BJrUdGUmOkT1BIcwgbskAX/a65Isj1w+hcbd/M\nCRawa+nVLBJfM1k3aIHGAmEplIokHe9N/J4t1EXM6G5FKkQUrus=\n=Xayq\n-----END PGP SIGNATURE-----",
        "payload": "tree 80b260402be5309009074d4079e5883abbf9400d\nparent 2689c8fd7159f47248c5fc365463be8b0e8b039c\nauthor Sjors Provoost <sjors@sprovoost.nl> 1574765033 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1574765033 +0100\n\n[gui] send: show watch-only balance in send screen\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4a96e459d733f1b6427221aaa1874ea00f79988a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/4a96e459d733f1b6427221aaa1874ea00f79988a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4a96e459d733f1b6427221aaa1874ea00f79988a/comments",
    "author": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2689c8fd7159f47248c5fc365463be8b0e8b039c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2689c8fd7159f47248c5fc365463be8b0e8b039c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2689c8fd7159f47248c5fc365463be8b0e8b039c"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 7,
      "deletions": 2
    },
    "files": [
      {
        "sha": "cfd4bf33d460d8ed43c17e0b267910c984255005",
        "filename": "src/qt/forms/sendcoinsdialog.ui",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4a96e459d733f1b6427221aaa1874ea00f79988a/src/qt/forms/sendcoinsdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4a96e459d733f1b6427221aaa1874ea00f79988a/src/qt/forms/sendcoinsdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/sendcoinsdialog.ui?ref=4a96e459d733f1b6427221aaa1874ea00f79988a",
        "patch": "@@ -1190,7 +1190,7 @@ Note:  Since the fee is calculated on a per-byte basis, a fee of \"100 satoshis p\n         <number>3</number>\n        </property>\n        <item>\n-        <widget class=\"QLabel\" name=\"label\">\n+        <widget class=\"QLabel\" name=\"labelBalanceName\">\n          <property name=\"sizePolicy\">\n           <sizepolicy hsizetype=\"Preferred\" vsizetype=\"Fixed\">\n            <horstretch>0</horstretch>"
      },
      {
        "sha": "f1ea3e23e5d5e893ee90f4763869257b0af6b08f",
        "filename": "src/qt/sendcoinsdialog.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 1,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4a96e459d733f1b6427221aaa1874ea00f79988a/src/qt/sendcoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4a96e459d733f1b6427221aaa1874ea00f79988a/src/qt/sendcoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.cpp?ref=4a96e459d733f1b6427221aaa1874ea00f79988a",
        "patch": "@@ -562,7 +562,12 @@ void SendCoinsDialog::setBalance(const interfaces::WalletBalances& balances)\n {\n     if(model && model->getOptionsModel())\n     {\n-        ui->labelBalance->setText(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(), balances.balance));\n+        CAmount balance = balances.balance;\n+        if (model->privateKeysDisabled()) {\n+            balance = balances.watch_only_balance;\n+            ui->labelBalanceName->setText(tr(\"Watch-only balance:\"));\n+        }\n+        ui->labelBalance->setText(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(), balance));\n     }\n }\n "
      }
    ]
  }
]