[
  {
    "sha": "fa1dce7329d3e74d46ab98b93772b1832a3f1819",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTFkY2U3MzI5ZDNlNzRkNDZhYjk4YjkzNzcyYjE4MzJhM2YxODE5",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-05-09T13:16:29Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-05-09T13:10:53Z"
      },
      "message": "net: Rename ::fRelayTxes to ::g_relay_txes\n\nThis helps to distinguish it from CNode::fRelayTxes and avoid bugs like\n425278d17bd0edf8a3a7cc81e55016f7fd8e7726",
      "tree": {
        "sha": "b04ef80afae5d50a27873e3829865d20fc4f085a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b04ef80afae5d50a27873e3829865d20fc4f085a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa1dce7329d3e74d46ab98b93772b1832a3f1819",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgXAAwAigkWOtFUxvdyUg5z7K32F7s/b0vDj8s9hcu28pQQ1zS8/+epyCrIyLip\nIZn22IgsbeOvja8m3AnG/Ta/dP1fqwMH1duNCnONznb0bHzgvbh6fYM2wwm2wRRC\n1nvR4V/u2gjkCY0lxE+YUl7L2IFJls7w95RokfHtpEtpcsKAxfcdVqoocINEjlwf\no5hqtvfJjzFSyKLE63OArX7Lox12bzc4P1Q1v36qj1MPbaw0KbhJAx77PSCWmLlu\n5yapHVCoJWWnoWveYfe0Z1vZIr8J9cglqBDJJIj3ZEYEwCFnCFnU8E6hYK5OU9/K\nuHOwZEFFKLqAd070Ft4Gn/QHfMbfM3pCYK8vVqXKTzph82sF+qNtlTeb427e51Dv\ni/Wo7rOHp4naM44z2PzdQVKjxa2RLHUeG+HwVoiHSWVq8fc6poo1z1dDQELxgbNJ\n7++UeHYQrJ7qgVszK1xJpmW3sCkTduHilhABvNZrAMlq2Ek4ODtykiQFYNx8DG0O\n5pUi1DnH\n=QGFr\n-----END PGP SIGNATURE-----",
        "payload": "tree b04ef80afae5d50a27873e3829865d20fc4f085a\nparent c459c5f70176928adcee4935813a2dbe7f4dbd51\nauthor MarcoFalke <falke.marco@gmail.com> 1557407789 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1557407453 -0400\n\nnet: Rename ::fRelayTxes to ::g_relay_txes\n\nThis helps to distinguish it from CNode::fRelayTxes and avoid bugs like\n425278d17bd0edf8a3a7cc81e55016f7fd8e7726\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa1dce7329d3e74d46ab98b93772b1832a3f1819",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa1dce7329d3e74d46ab98b93772b1832a3f1819",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa1dce7329d3e74d46ab98b93772b1832a3f1819/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c459c5f70176928adcee4935813a2dbe7f4dbd51",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c459c5f70176928adcee4935813a2dbe7f4dbd51",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c459c5f70176928adcee4935813a2dbe7f4dbd51"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 7,
      "deletions": 7
    },
    "files": [
      {
        "sha": "806b0e48b9631cae331d7f69b03651fc8612f895",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa1dce7329d3e74d46ab98b93772b1832a3f1819/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa1dce7329d3e74d46ab98b93772b1832a3f1819/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=fa1dce7329d3e74d46ab98b93772b1832a3f1819",
        "patch": "@@ -1426,7 +1426,7 @@ bool AppInitMain(InitInterfaces& interfaces)\n     // see Step 2: parameter interactions for more information about these\n     fListen = gArgs.GetBoolArg(\"-listen\", DEFAULT_LISTEN);\n     fDiscover = gArgs.GetBoolArg(\"-discover\", true);\n-    fRelayTxes = !gArgs.GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY);\n+    g_relay_txes = !gArgs.GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY);\n \n     for (const std::string& strAddr : gArgs.GetArgs(\"-externalip\")) {\n         CService addrLocal;"
      },
      {
        "sha": "3c6f5a05f37bde236e1d74f4202e75fba0d57cf5",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa1dce7329d3e74d46ab98b93772b1832a3f1819/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa1dce7329d3e74d46ab98b93772b1832a3f1819/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=fa1dce7329d3e74d46ab98b93772b1832a3f1819",
        "patch": "@@ -79,7 +79,7 @@ static const uint64_t RANDOMIZER_ID_LOCALHOSTNONCE = 0xd93e69e2bbfa5735ULL; // S\n //\n bool fDiscover = true;\n bool fListen = true;\n-bool fRelayTxes = true;\n+bool g_relay_txes = !DEFAULT_BLOCKSONLY;\n CCriticalSection cs_mapLocalHost;\n std::map<CNetAddr, LocalServiceInfo> mapLocalHost GUARDED_BY(cs_mapLocalHost);\n static bool vfLimited[NET_MAX] GUARDED_BY(cs_mapLocalHost) = {};"
      },
      {
        "sha": "37aaf1a63bca1426eceb71d03af4c3e1d49c57a3",
        "filename": "src/net.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa1dce7329d3e74d46ab98b93772b1832a3f1819/src/net.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa1dce7329d3e74d46ab98b93772b1832a3f1819/src/net.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.h?ref=fa1dce7329d3e74d46ab98b93772b1832a3f1819",
        "patch": "@@ -519,7 +519,7 @@ CAddress GetLocalAddress(const CNetAddr *paddrPeer, ServiceFlags nLocalServices)\n \n extern bool fDiscover;\n extern bool fListen;\n-extern bool fRelayTxes;\n+extern bool g_relay_txes;\n \n /** Subversion as sent to the P2P network in `version` messages */\n extern std::string strSubVersion;"
      },
      {
        "sha": "cb2b9f8c03481a0fb81bf497245e1b6a5037e4bb",
        "filename": "src/net_processing.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa1dce7329d3e74d46ab98b93772b1832a3f1819/src/net_processing.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa1dce7329d3e74d46ab98b93772b1832a3f1819/src/net_processing.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net_processing.cpp?ref=fa1dce7329d3e74d46ab98b93772b1832a3f1819",
        "patch": "@@ -422,7 +422,7 @@ static void PushNodeVersion(CNode *pnode, CConnman* connman, int64_t nTime)\n     CAddress addrMe = CAddress(CService(), nLocalNodeServices);\n \n     connman->PushMessage(pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime, addrYou, addrMe,\n-            nonce, strSubVersion, nNodeStartingHeight, ::fRelayTxes));\n+            nonce, strSubVersion, nNodeStartingHeight, ::g_relay_txes));\n \n     if (fLogIPs) {\n         LogPrint(BCLog::NET, \"send version message: version %d, blocks=%d, us=%s, them=%s, peer=%d\\n\", PROTOCOL_VERSION, nNodeStartingHeight, addrMe.ToString(), addrYou.ToString(), nodeid);\n@@ -2189,7 +2189,7 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n             return false;\n         }\n \n-        bool fBlocksOnly = !fRelayTxes;\n+        bool fBlocksOnly = !g_relay_txes;\n \n         // Allow whitelisted peers to send data other than blocks in blocks only mode if whitelistrelay is true\n         if (pfrom->fWhitelisted && gArgs.GetBoolArg(\"-whitelistrelay\", DEFAULT_WHITELISTRELAY))\n@@ -2445,7 +2445,7 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n     if (strCommand == NetMsgType::TX) {\n         // Stop processing the transaction early if\n         // We are in blocks only mode and peer is either not whitelisted or whitelistrelay is off\n-        if (!fRelayTxes && (!pfrom->fWhitelisted || !gArgs.GetBoolArg(\"-whitelistrelay\", DEFAULT_WHITELISTRELAY)))\n+        if (!g_relay_txes && (!pfrom->fWhitelisted || !gArgs.GetBoolArg(\"-whitelistrelay\", DEFAULT_WHITELISTRELAY)))\n         {\n             LogPrint(BCLog::NET, \"transaction sent in violation of protocol peer=%d\\n\", pfrom->GetId());\n             return true;"
      },
      {
        "sha": "e49c3e031fe65c3bb3f13437363d1d4ff130d966",
        "filename": "src/rpc/net.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa1dce7329d3e74d46ab98b93772b1832a3f1819/src/rpc/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa1dce7329d3e74d46ab98b93772b1832a3f1819/src/rpc/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/net.cpp?ref=fa1dce7329d3e74d46ab98b93772b1832a3f1819",
        "patch": "@@ -496,7 +496,7 @@ static UniValue getnetworkinfo(const JSONRPCRequest& request)\n     obj.pushKV(\"protocolversion\",PROTOCOL_VERSION);\n     if(g_connman)\n         obj.pushKV(\"localservices\", strprintf(\"%016x\", g_connman->GetLocalServices()));\n-    obj.pushKV(\"localrelay\",     fRelayTxes);\n+    obj.pushKV(\"localrelay\", g_relay_txes);\n     obj.pushKV(\"timeoffset\",    GetTimeOffset());\n     if (g_connman) {\n         obj.pushKV(\"networkactive\", g_connman->GetNetworkActive());"
      }
    ]
  },
  {
    "sha": "fa3872e7b4540857261aed948b94b6b2bfdbc3d1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTM4NzJlN2I0NTQwODU3MjYxYWVkOTQ4Yjk0YjZiMmJmZGJjM2Qx",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-05-09T14:36:53Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-05-10T11:29:54Z"
      },
      "message": "test: Format predicate source as multiline on error",
      "tree": {
        "sha": "6bbb02cb4f69fb82829752d6fbc7bad1ddbb071f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6bbb02cb4f69fb82829752d6fbc7bad1ddbb071f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa3872e7b4540857261aed948b94b6b2bfdbc3d1",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgniAv9E3Um0wuuGGka3N72lbmg3AlwoPs6LyYNi3OviJctukM6dhZOKNmzySDt\nArKHE4RxfR5nsKU3zAQ/sRl16Ip9g+/kbcljwp2EjYfLGEQ2D9EY8qoWOYCrXbIU\n0BlVq2kslZX9ckCIIua0IUv+p2vE+oDrtHTR4/9aC8XKMqR5CpoRa6p1jfaf9cQS\n6QSsAnF7x23lmNoRyP+RKF5ztXDygMlmzUisbD7ti7QCeFpZrF1bwy97O+wpYt8w\nzVbwqQhuh5EX26u2dbZq279JUF5SkbVIUxCLP8wRKKVckjm3kocJD2RDg/52H0O8\nGot4DzmCHoDm34S4ZvVo5mQCjWS3aC8L0VinTA0NTJ2n2zAnnf/KpjgRAMmXJfL4\nAzpGcY69dW7ZcZHwj29dnoNyEkJCFI1XAYTty0urVGjqjvIOn/yM1R82RlDJVsla\nejHKlyEjuhIFPu/WeLleRy0pfmKIWl34Qt+elTVeAqagVg5jI+cvSNZvfghKGBdR\nc7D9pSes\n=tgDx\n-----END PGP SIGNATURE-----",
        "payload": "tree 6bbb02cb4f69fb82829752d6fbc7bad1ddbb071f\nparent fa1dce7329d3e74d46ab98b93772b1832a3f1819\nauthor MarcoFalke <falke.marco@gmail.com> 1557412613 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1557487794 -0400\n\ntest: Format predicate source as multiline on error\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa3872e7b4540857261aed948b94b6b2bfdbc3d1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa3872e7b4540857261aed948b94b6b2bfdbc3d1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa3872e7b4540857261aed948b94b6b2bfdbc3d1/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa1dce7329d3e74d46ab98b93772b1832a3f1819",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa1dce7329d3e74d46ab98b93772b1832a3f1819",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa1dce7329d3e74d46ab98b93772b1832a3f1819"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "0583b423888ae25e86a67644ac169f7a0bfd2316",
        "filename": "test/functional/test_framework/util.py",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa3872e7b4540857261aed948b94b6b2bfdbc3d1/test/functional/test_framework/util.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa3872e7b4540857261aed948b94b6b2bfdbc3d1/test/functional/test_framework/util.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/util.py?ref=fa3872e7b4540857261aed948b94b6b2bfdbc3d1",
        "patch": "@@ -216,7 +216,7 @@ def wait_until(predicate, *, attempts=float('inf'), timeout=float('inf'), lock=N\n         time.sleep(0.05)\n \n     # Print the cause of the timeout\n-    predicate_source = inspect.getsourcelines(predicate)\n+    predicate_source = \"''''\\n\" + inspect.getsource(predicate) + \"'''\"\n     logger.error(\"wait_until() failed. Predicate: {}\".format(predicate_source))\n     if attempt >= attempts:\n         raise AssertionError(\"Predicate {} not true after {} attempts\".format(predicate_source, attempts))"
      }
    ]
  },
  {
    "sha": "fa320de79faaca2b088fcbe7f76701faa9bff236",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTMyMGRlNzlmYWFjYTJiMDg4ZmNiZTdmNzY3MDFmYWE5YmZmMjM2",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-05-09T14:42:56Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-05-13T14:44:42Z"
      },
      "message": "test: Add test for p2p_blocksonly",
      "tree": {
        "sha": "3f43f5c316901197825a260e0f12083cb6d90880",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3f43f5c316901197825a260e0f12083cb6d90880"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa320de79faaca2b088fcbe7f76701faa9bff236",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUhfOAwAgkdiSurXSMDjzpfrsgDY+bSbwCNCUfG2hO2Fxno6Y/ITjHe+fhcKjfS/\nLddtZYBVWz2WzGzY+QLMY0dmNflNn6io2xzEByK1QotyVf0oBh5aGkXNMYU6DfFF\nmbzM7MWUi7LlD9kAhdY/3y8zVgHatVcYk14de2hU9KhgNoGtu0Z1jDBb1wVLqWl3\nr5xZMGDaswGqH2J6rwI+CGXf4kwWPTwRAQ1t374YjeuWPWBKbV/5FWhUypzyyA05\nnNFgSVWvpW4lqCec+QtRyOcsUt0i9jvTNoLGoE113M+TuV9o87pjcOj8bEiC7yEq\nFM30OnuJv+Vyvah30hEJIuo4IKT11taLVeDbsrXCrX1BmrcFqjOcdMnrXbz8WZ7U\nDEWmRzxUZlXtwytQ4O/rISzGPGgeyeWme5k2y/WoKyxEvW5mwjEA+6/32YLY5GHZ\n0OOJnVfhtiWgdrXA6S2Wve0D8nUWHsTcpzB557seBb0o5t9tDuBiDPcNcHpGrs8R\nul65JVDg\n=7u0z\n-----END PGP SIGNATURE-----",
        "payload": "tree 3f43f5c316901197825a260e0f12083cb6d90880\nparent fa3872e7b4540857261aed948b94b6b2bfdbc3d1\nauthor MarcoFalke <falke.marco@gmail.com> 1557412976 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1557758682 -0400\n\ntest: Add test for p2p_blocksonly\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa320de79faaca2b088fcbe7f76701faa9bff236",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa320de79faaca2b088fcbe7f76701faa9bff236",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa320de79faaca2b088fcbe7f76701faa9bff236/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa3872e7b4540857261aed948b94b6b2bfdbc3d1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa3872e7b4540857261aed948b94b6b2bfdbc3d1",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa3872e7b4540857261aed948b94b6b2bfdbc3d1"
      }
    ],
    "stats": {
      "total": 67,
      "additions": 67,
      "deletions": 0
    },
    "files": [
      {
        "sha": "12cb06a4079aad15df04b43d9c713c086c0799ef",
        "filename": "test/functional/p2p_blocksonly.py",
        "status": "added",
        "additions": 58,
        "deletions": 0,
        "changes": 58,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa320de79faaca2b088fcbe7f76701faa9bff236/test/functional/p2p_blocksonly.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa320de79faaca2b088fcbe7f76701faa9bff236/test/functional/p2p_blocksonly.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/p2p_blocksonly.py?ref=fa320de79faaca2b088fcbe7f76701faa9bff236",
        "patch": "@@ -0,0 +1,58 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2019 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test p2p blocksonly\"\"\"\n+\n+from test_framework.messages import msg_tx, CTransaction, FromHex\n+from test_framework.mininode import P2PInterface\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+\n+class P2PBlocksOnly(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = False\n+        self.num_nodes = 1\n+        self.extra_args = [[\"-blocksonly\"]]\n+\n+    def run_test(self):\n+        self.nodes[0].add_p2p_connection(P2PInterface())\n+\n+        self.log.info('Check that txs from p2p are rejected')\n+        prevtx = self.nodes[0].getblock(self.nodes[0].getblockhash(1), 2)['tx'][0]\n+        rawtx = self.nodes[0].createrawtransaction(\n+            inputs=[{\n+                'txid': prevtx['txid'],\n+                'vout': 0\n+            }],\n+            outputs=[{\n+                self.nodes[0].get_deterministic_priv_key().address: 50 - 0.00125\n+            }],\n+        )\n+        sigtx = self.nodes[0].signrawtransactionwithkey(\n+            hexstring=rawtx,\n+            privkeys=[self.nodes[0].get_deterministic_priv_key().key],\n+            prevtxs=[{\n+                'txid': prevtx['txid'],\n+                'vout': 0,\n+                'scriptPubKey': prevtx['vout'][0]['scriptPubKey']['hex'],\n+            }],\n+        )['hex']\n+        assert_equal(self.nodes[0].getnetworkinfo()['localrelay'], False)\n+        with self.nodes[0].assert_debug_log(['transaction sent in violation of protocol peer=0']):\n+            self.nodes[0].p2p.send_message(msg_tx(FromHex(CTransaction(), sigtx)))\n+            self.nodes[0].p2p.sync_with_ping()\n+            assert_equal(self.nodes[0].getmempoolinfo()['size'], 0)\n+\n+        self.log.info('Check that txs from rpc are not rejected and relayed to other peers')\n+        assert_equal(self.nodes[0].getpeerinfo()[0]['relaytxes'], True)\n+        txid = self.nodes[0].testmempoolaccept([sigtx])[0]['txid']\n+        with self.nodes[0].assert_debug_log(['received getdata for: tx {} peer=0'.format(txid)]):\n+            self.nodes[0].sendrawtransaction(sigtx)\n+            self.nodes[0].p2p.wait_for_tx(txid)\n+            assert_equal(self.nodes[0].getmempoolinfo()['size'], 1)\n+\n+\n+if __name__ == '__main__':\n+    P2PBlocksOnly().main()"
      },
      {
        "sha": "cc3a4cc72a23d9ba5c40e423b024e7a1c9165eeb",
        "filename": "test/functional/test_framework/mininode.py",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa320de79faaca2b088fcbe7f76701faa9bff236/test/functional/test_framework/mininode.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa320de79faaca2b088fcbe7f76701faa9bff236/test/functional/test_framework/mininode.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/mininode.py?ref=fa320de79faaca2b088fcbe7f76701faa9bff236",
        "patch": "@@ -361,6 +361,14 @@ def wait_for_disconnect(self, timeout=60):\n \n     # Message receiving helper methods\n \n+    def wait_for_tx(self, txid, timeout=60):\n+        def test_function():\n+            if not self.last_message.get('tx'):\n+                return False\n+            return self.last_message['tx'].tx.rehash() == txid\n+\n+        wait_until(test_function, timeout=timeout, lock=mininode_lock)\n+\n     def wait_for_block(self, blockhash, timeout=60):\n         test_function = lambda: self.last_message.get(\"block\") and self.last_message[\"block\"].block.rehash() == blockhash\n         wait_until(test_function, timeout=timeout, lock=mininode_lock)"
      },
      {
        "sha": "eff61285884c211dc9a9db881b05dec7a5699eda",
        "filename": "test/functional/test_runner.py",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa320de79faaca2b088fcbe7f76701faa9bff236/test/functional/test_runner.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa320de79faaca2b088fcbe7f76701faa9bff236/test/functional/test_runner.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_runner.py?ref=fa320de79faaca2b088fcbe7f76701faa9bff236",
        "patch": "@@ -141,6 +141,7 @@\n     'rpc_net.py',\n     'wallet_keypool.py',\n     'p2p_mempool.py',\n+    'p2p_blocksonly.py',\n     'mining_prioritisetransaction.py',\n     'p2p_invalid_locator.py',\n     'p2p_invalid_block.py',"
      }
    ]
  },
  {
    "sha": "fa8ced32a60dea37ac169241cf9a1f708ef46c4b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYThjZWQzMmE2MGRlYTM3YWMxNjkyNDFjZjlhMWY3MDhlZjQ2YzRi",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-05-09T13:29:08Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-05-13T14:44:46Z"
      },
      "message": "doc: Mention blocksonly in reduce-traffic.md, unhide option",
      "tree": {
        "sha": "724f2dc13068ffbd105ebec29791323ab2620217",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/724f2dc13068ffbd105ebec29791323ab2620217"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa8ced32a60dea37ac169241cf9a1f708ef46c4b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgIlAwArFSyhX4miaP3os4ywT+0VvMMcNrg/gUO9pN49fbLFhmMPznZXgGqWjDw\ntiop7zRRjejohX0ax5mrv68YHHViJzH2L4pXlfgUiPgbKKI3AKDBAdnAjcWD2acG\nx1YmWsdYuF4FF6TDQLtLsceFEvqlYLqkoylQIbY50PiCzwzP530SCiBYHn8Oyvn1\n00ysA38wq4Zb8GvxuRTEEInCeqiF3aXncg5A94Up2bU9W5VLj3KXtu9lA60BcqyA\nU39mkyYCgD5Ilbi8Gk84qPDNm3Wdi+vuLkSwmuc8ZFyIBilV4jcFnONdx5x5Awu5\nUds/np+vyUdL0gCG3gqVs1AxqSozYydcMyUEM9QfftWU+R0mHG3opNl64xHHdgVS\nsNOe7kkQDb0XYNgHP1yxyH6kuFVVa7hhFH3y2IU6SX58pus1HKdhYIwTDkTD7Jvj\n7zzY/KyWa9NZf8RYF4XPOVFPesUGy1xkkQ2Ksq7BxTwIG1m9SXThZFnna1NiXmjK\nS5T/oPrA\n=bhVI\n-----END PGP SIGNATURE-----",
        "payload": "tree 724f2dc13068ffbd105ebec29791323ab2620217\nparent fa320de79faaca2b088fcbe7f76701faa9bff236\nauthor MarcoFalke <falke.marco@gmail.com> 1557408548 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1557758686 -0400\n\ndoc: Mention blocksonly in reduce-traffic.md, unhide option\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa8ced32a60dea37ac169241cf9a1f708ef46c4b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa8ced32a60dea37ac169241cf9a1f708ef46c4b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa8ced32a60dea37ac169241cf9a1f708ef46c4b/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa320de79faaca2b088fcbe7f76701faa9bff236",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa320de79faaca2b088fcbe7f76701faa9bff236",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa320de79faaca2b088fcbe7f76701faa9bff236"
      }
    ],
    "stats": {
      "total": 15,
      "additions": 14,
      "deletions": 1
    },
    "files": [
      {
        "sha": "5a71f62e0f8971c2e0f85f639a27c9096383334b",
        "filename": "doc/reduce-traffic.md",
        "status": "modified",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa8ced32a60dea37ac169241cf9a1f708ef46c4b/doc/reduce-traffic.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa8ced32a60dea37ac169241cf9a1f708ef46c4b/doc/reduce-traffic.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/reduce-traffic.md?ref=fa8ced32a60dea37ac169241cf9a1f708ef46c4b",
        "patch": "@@ -35,3 +35,16 @@ blocks and transactions to fewer nodes.\n Reducing the maximum connected nodes to a minimum could be desirable if traffic\n limits are tiny. Keep in mind that bitcoin's trustless model works best if you are\n connected to a handful of nodes.\n+\n+## 4. Turn off transaction relay (`-blocksonly`)\n+\n+Forwarding transactions to peers increases the P2P traffic. To only sync blocks\n+with other peers, you can disable transaction relay.\n+\n+Be reminded of the effects of this setting.\n+\n+- Fee estimation will no longer work.\n+- Not relaying other's transactions could hurt your privacy if used while a\n+  wallet is loaded or if you use the node to broadcast transactions.\n+- It makes block propagation slower because compact block relay can only be\n+  used when transaction relay is enabled."
      },
      {
        "sha": "3d825a29b605ba4295b922184656bf65e98e4afd",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa8ced32a60dea37ac169241cf9a1f708ef46c4b/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa8ced32a60dea37ac169241cf9a1f708ef46c4b/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=fa8ced32a60dea37ac169241cf9a1f708ef46c4b",
        "patch": "@@ -383,7 +383,7 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-blocksdir=<dir>\", \"Specify blocks directory (default: <datadir>/blocks)\", false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-blocknotify=<cmd>\", \"Execute command when the best block changes (%s in cmd is replaced by block hash)\", false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-blockreconstructionextratxn=<n>\", strprintf(\"Extra transactions to keep in memory for compact block reconstructions (default: %u)\", DEFAULT_BLOCK_RECONSTRUCTION_EXTRA_TXN), false, OptionsCategory::OPTIONS);\n-    gArgs.AddArg(\"-blocksonly\", strprintf(\"Whether to operate in a blocks only mode (default: %u)\", DEFAULT_BLOCKSONLY), true, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-blocksonly\", strprintf(\"Whether to reject transactions from network peers. Transactions from the wallet or RPC are not affected. (default: %u)\", DEFAULT_BLOCKSONLY), false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-conf=<file>\", strprintf(\"Specify configuration file. Relative paths will be prefixed by datadir location. (default: %s)\", BITCOIN_CONF_FILENAME), false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-datadir=<dir>\", \"Specify data directory\", false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-dbbatchsize\", strprintf(\"Maximum database write batch size in bytes (default: %u)\", nDefaultDbBatchSize), true, OptionsCategory::OPTIONS);"
      }
    ]
  }
]