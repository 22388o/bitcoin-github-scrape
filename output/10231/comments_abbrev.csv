TheBlueMatt,2017-04-19T16:34:26Z,Can the GUI instead cache the current best tip? This may help with @ryanofsky's process split as well.,https://github.com/bitcoin/bitcoin/pull/10231#issuecomment-295335296,295335296,
jonasschnelli,2017-04-19T16:34:55Z,@TheBlueMatt: Yes. @theuni recommended this on IRC and I'm currently changing it.,https://github.com/bitcoin/bitcoin/pull/10231#issuecomment-295335457,295335457,
jonasschnelli,2017-04-19T16:52:41Z,Moved the cache from the core validation logic to the GUI.,https://github.com/bitcoin/bitcoin/pull/10231#issuecomment-295342317,295342317,
gmaxwell,2017-04-19T17:29:26Z,What does the GUI use the header time/height for as opposed to the tip?,https://github.com/bitcoin/bitcoin/pull/10231#issuecomment-295356683,295356683,
jonasschnelli,2017-04-19T18:55:08Z,"Thanks @gmaxwell. Added the missing initialisation and switched to `-1` as indicator wether the cache is set or not.\n\n> What does the GUI use the header time/height for as opposed to the tip?\n\nThe only use case is to calculate the remaining blocks to download/validate (modal sync progress overlay).",https://github.com/bitcoin/bitcoin/pull/10231#issuecomment-295390307,295390307,
TheBlueMatt,2017-04-19T20:20:01Z,utACK ,https://github.com/bitcoin/bitcoin/pull/10231#issuecomment-295423725,295423725,
jonasschnelli,2017-04-20T07:55:53Z,"Followed @luke-jr's advice and re-set the method to `const` and declared the cache atomic's `mutable`.\nAlso, both caches are now getting set regardless of the called method. Yes, you could argue to have an explicit function to set the cache to avoid code duplication. But for two lines it's not worth in my opinion.\n\n@gmaxwell, @TheBlueMatt: thanks for a re-ack. :)",https://github.com/bitcoin/bitcoin/pull/10231#issuecomment-295618189,295618189,
laanwj,2017-04-20T11:41:00Z,"Less blocking of the gui on cs_main is always a good thing, thanks!\nutACK 4082fb0",https://github.com/bitcoin/bitcoin/pull/10231#issuecomment-295699524,295699524,
gmaxwell,2017-04-19T17:28:42Z,"Where is this initialized? -- these don't have static duration AFAICT.\n\nAlso is zero really the best value to use? -- it's in range, so it'll keep relocking again while there is no data there.",https://github.com/bitcoin/bitcoin/pull/10231#discussion_r112264964,112264964,src/qt/clientmodel.cpp
luke-jr,2017-04-19T19:07:36Z,"Maybe this should remain const, and declare the caches mutable?",https://github.com/bitcoin/bitcoin/pull/10231#discussion_r112288825,112288825,src/qt/clientmodel.cpp
luke-jr,2017-04-19T19:09:24Z,Would it make sense to populate both caches at once perhaps?,https://github.com/bitcoin/bitcoin/pull/10231#discussion_r112289189,112289189,src/qt/clientmodel.cpp
jonasschnelli,2017-04-19T19:11:00Z,Good idea.,https://github.com/bitcoin/bitcoin/pull/10231#discussion_r112289581,112289581,src/qt/clientmodel.cpp
