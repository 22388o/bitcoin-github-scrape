[
  {
    "sha": "7148f5e7d755fc2084f53fa22c0761d73c042fbd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3MTQ4ZjVlN2Q3NTVmYzIwODRmNTNmYTIyYzA3NjFkNzNjMDQyZmJk",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-04-19T16:45:11Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-04-19T18:54:18Z"
      },
      "message": "Reduce cs_main locks during modal overlay by adding an atomic cache",
      "tree": {
        "sha": "3046fb721da49cbf40e2d9ee7d5b665b6c00ed9b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3046fb721da49cbf40e2d9ee7d5b665b6c00ed9b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7148f5e7d755fc2084f53fa22c0761d73c042fbd",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlj3slsACgkQHrd2uwPH\nki0zNw//VQj853rJuGu3OcghkfqUHOMfGZM5L76qoNpdcW1pANnT9sn+qNFJfMno\nqDofxMM3U8B3/TLWTLZpGzA+iZle1TNy8lhDXDBQ+M9yns9atc7k+nHmt+TCZcAy\nUl4eTTHAS7kap90OonSVFZ8Cb2e8cpxHcIkDO4qNdkSjDi8HAyeUloUjNgw/kMVB\nHF9qKW1Bzwkol9DK3tnh4RdJZ37jH2urGU0aTgx9f4PTyZtRvjsPAa7pTaQMdT+I\nK96Fn0ygMyGuDP0gqVcgRjmuIDbsDdJ9sEJBC42cJhbj6hvMwTvkDejkLFAZL5Pe\nE9Kir6JggLN4TUcLvTcAlM2bIpb800W/9cMX9Mw1ptho1gXSppZYu3Ia7NANQIhT\n2wxAYs/4Pw18bcMMHK65dra6aG4X5cfOey1ILKbfLlbBlK/2l5jpdzTodHRRQCx4\nKcuDIjM7FXolg8e8kabETVSCb1CQSMkmRsXT198Oilqgh8tCQD5spPtZINaKQQBu\n4XWnmfDIT10qgVWmlbX22+2BiAR5dUh6HzjEfclCCsfjRuPCzzsOOXgRequ9Q4yJ\nuZfEsj96We2m5ZYY9wMtGsg30RFssQ+H/ftDYpgG750xadnZKMabnQE8Zot/5Uaa\nHcI2izPtSuL+JjXNAUKQdaDCNP3voSz/7ld31w9lPl14MlnA0YU=\n=JpAU\n-----END PGP SIGNATURE-----",
        "payload": "tree 3046fb721da49cbf40e2d9ee7d5b665b6c00ed9b\nparent c91ca0ace9bd62eea8158b92cfc53d6d219e37b7\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1492620311 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1492628058 +0200\n\nReduce cs_main locks during modal overlay by adding an atomic cache\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7148f5e7d755fc2084f53fa22c0761d73c042fbd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7148f5e7d755fc2084f53fa22c0761d73c042fbd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7148f5e7d755fc2084f53fa22c0761d73c042fbd/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c91ca0ace9bd62eea8158b92cfc53d6d219e37b7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c91ca0ace9bd62eea8158b92cfc53d6d219e37b7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c91ca0ace9bd62eea8158b92cfc53d6d219e37b7"
      }
    ],
    "stats": {
      "total": 43,
      "additions": 31,
      "deletions": 12
    },
    "files": [
      {
        "sha": "9a8af01a32dc3a4a351128834add4210c32e5eb6",
        "filename": "src/qt/clientmodel.cpp",
        "status": "modified",
        "additions": 25,
        "deletions": 10,
        "changes": 35,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7148f5e7d755fc2084f53fa22c0761d73c042fbd/src/qt/clientmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7148f5e7d755fc2084f53fa22c0761d73c042fbd/src/qt/clientmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/clientmodel.cpp?ref=7148f5e7d755fc2084f53fa22c0761d73c042fbd",
        "patch": "@@ -36,6 +36,8 @@ ClientModel::ClientModel(OptionsModel *_optionsModel, QObject *parent) :\n     banTableModel(0),\n     pollTimer(0)\n {\n+    cachedBestHeaderHeight = -1;\n+    cachedBestHeaderTime = -1;\n     peerTableModel = new PeerTableModel(this);\n     banTableModel = new BanTableModel(this);\n     pollTimer = new QTimer(this);\n@@ -72,20 +74,28 @@ int ClientModel::getNumBlocks() const\n     return chainActive.Height();\n }\n \n-int ClientModel::getHeaderTipHeight() const\n+int ClientModel::getHeaderTipHeight()\n {\n-    LOCK(cs_main);\n-    if (!pindexBestHeader)\n-        return 0;\n-    return pindexBestHeader->nHeight;\n+    if (cachedBestHeaderHeight == -1) {\n+        // make sure we initially populate the cache via a cs_main lock\n+        // otherwise we need to wait for a tip update\n+        LOCK(cs_main);\n+        if (pindexBestHeader) {\n+            cachedBestHeaderHeight = pindexBestHeader->nHeight;\n+        }\n+    }\n+    return cachedBestHeaderHeight;\n }\n \n-int64_t ClientModel::getHeaderTipTime() const\n+int64_t ClientModel::getHeaderTipTime()\n {\n-    LOCK(cs_main);\n-    if (!pindexBestHeader)\n-        return 0;\n-    return pindexBestHeader->GetBlockTime();\n+    if (cachedBestHeaderTime == -1) {\n+        LOCK(cs_main);\n+        if (pindexBestHeader) {\n+            cachedBestHeaderTime = pindexBestHeader->GetBlockTime();\n+        }\n+    }\n+    return cachedBestHeaderTime;\n }\n \n quint64 ClientModel::getTotalBytesRecv() const\n@@ -283,6 +293,11 @@ static void BlockTipChanged(ClientModel *clientmodel, bool initialSync, const CB\n \n     int64_t& nLastUpdateNotification = fHeader ? nLastHeaderTipUpdateNotification : nLastBlockTipUpdateNotification;\n \n+    if (fHeader) {\n+        // cache best headers time and height to reduce future cs_main locks\n+        clientmodel->cachedBestHeaderHeight = pIndex->nHeight;\n+        clientmodel->cachedBestHeaderTime = pIndex->GetBlockTime();\n+    }\n     // if we are in-sync, update the UI regardless of last update time\n     if (!initialSync || now - nLastUpdateNotification > MODEL_UPDATE_DELAY) {\n         //pass a async signal to the UI thread"
      },
      {
        "sha": "6f7077dad612db7579c90023ba9a5267d04de09f",
        "filename": "src/qt/clientmodel.h",
        "status": "modified",
        "additions": 6,
        "deletions": 2,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7148f5e7d755fc2084f53fa22c0761d73c042fbd/src/qt/clientmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7148f5e7d755fc2084f53fa22c0761d73c042fbd/src/qt/clientmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/clientmodel.h?ref=7148f5e7d755fc2084f53fa22c0761d73c042fbd",
        "patch": "@@ -51,8 +51,8 @@ class ClientModel : public QObject\n     //! Return number of connections, default is in- and outbound (total)\n     int getNumConnections(unsigned int flags = CONNECTIONS_ALL) const;\n     int getNumBlocks() const;\n-    int getHeaderTipHeight() const;\n-    int64_t getHeaderTipTime() const;\n+    int getHeaderTipHeight();\n+    int64_t getHeaderTipTime();\n     //! Return number of transactions in the mempool\n     long getMempoolSize() const;\n     //! Return the dynamic memory usage of the mempool\n@@ -81,6 +81,10 @@ class ClientModel : public QObject\n     QString formatClientStartupTime() const;\n     QString dataDir() const;\n \n+    // caches for the best header\n+    std::atomic<int> cachedBestHeaderHeight;\n+    std::atomic<int64_t> cachedBestHeaderTime;\n+\n private:\n     OptionsModel *optionsModel;\n     PeerTableModel *peerTableModel;"
      }
    ]
  },
  {
    "sha": "cf92bce526d11091b5b39f5d8dbddb972250062f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjZjkyYmNlNTI2ZDExMDkxYjViMzlmNWQ4ZGJkZGI5NzIyNTAwNjJm",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-04-19T18:54:30Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-04-19T18:54:30Z"
      },
      "message": "Update the remaining blocks left in modaloverlay at init.",
      "tree": {
        "sha": "99a407868511fc3df743a5c2e1eb816435f2c9f0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/99a407868511fc3df743a5c2e1eb816435f2c9f0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cf92bce526d11091b5b39f5d8dbddb972250062f",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIyBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlj3sn4ACgkQHrd2uwPH\nki0h+A/4vEzrLIw1ybJ2PiZGF8uU9kJiPV50csL/6diKVLYxZsgH0k10N9ZWe8Mw\nVVg/yobq/vfDjLFtH5x8QoMgjHypPSPRQHvHVnhf2nBhAej3TFhq7HBx+wj2x2Sz\n+vjwWqr/GEkhAk0pYyxAMTwireOqfW6ea+fU/5gZZ8kaEaDJq/FwZOJigwZDjMIR\n/I2VHWiJBH4zoK6JtvVZ5ph/JDw9tG5Z1WpW8VMBuZ/8KEaF+GvicBYLhU+bNNP4\n5KjWaWifNO4qorbOQmtNd62QZuK9WBgaUfYalf4E1He5NPTxqF/ohaO/LTXuyMCC\nTR78uddTKL+k+b2sou6nDUDbGLxnrCWdwaNeZ1GmqRBGjZdSVc/5cV+Z1jzm5MAR\nB2H2TmnSVCkkl4QliKR9cljMRpYbrKEv00T1XHOjXgELfvqOD8gTfDmNIeV2MdmH\nkxK9rGuzfVQgm6dHExPys404Crtn9domIvtFPYiIoeTj3qAYNNwDM9eqvkWT0t2t\niu75y2OwPhf8RfI5uYGzSyP+rcjyvnvYKX82FdBAK0/kDybvWsFPRdgs5ef0ROxt\n1m1Tz77Nvl9WXDeXyPPGOZI0O8Zn74rZpNZl+p0DLzR1TircDozKXg1jHb3+4PSt\nninjod0I7owhe75LralEXkfkXuGMW49r7fKTUjC6eddNwIaF2A==\n=dDV8\n-----END PGP SIGNATURE-----",
        "payload": "tree 99a407868511fc3df743a5c2e1eb816435f2c9f0\nparent 7148f5e7d755fc2084f53fa22c0761d73c042fbd\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1492628070 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1492628070 +0200\n\nUpdate the remaining blocks left in modaloverlay at init.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cf92bce526d11091b5b39f5d8dbddb972250062f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/cf92bce526d11091b5b39f5d8dbddb972250062f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cf92bce526d11091b5b39f5d8dbddb972250062f/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7148f5e7d755fc2084f53fa22c0761d73c042fbd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7148f5e7d755fc2084f53fa22c0761d73c042fbd",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7148f5e7d755fc2084f53fa22c0761d73c042fbd"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 1,
      "deletions": 2
    },
    "files": [
      {
        "sha": "5c26baef9e8ae89758bb109dfb4637d4dd38a75c",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/cf92bce526d11091b5b39f5d8dbddb972250062f/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/cf92bce526d11091b5b39f5d8dbddb972250062f/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=cf92bce526d11091b5b39f5d8dbddb972250062f",
        "patch": "@@ -478,6 +478,7 @@ void BitcoinGUI::setClientModel(ClientModel *_clientModel)\n         connect(_clientModel, SIGNAL(numConnectionsChanged(int)), this, SLOT(setNumConnections(int)));\n         connect(_clientModel, SIGNAL(networkActiveChanged(bool)), this, SLOT(setNetworkActive(bool)));\n \n+        modalOverlay->setKnownBestHeight(_clientModel->getHeaderTipHeight(), QDateTime::fromTime_t(_clientModel->getHeaderTipTime()));\n         setNumBlocks(_clientModel->getNumBlocks(), _clientModel->getLastBlockDate(), _clientModel->getVerificationProgress(NULL), false);\n         connect(_clientModel, SIGNAL(numBlocksChanged(int,QDateTime,double,bool)), this, SLOT(setNumBlocks(int,QDateTime,double,bool)));\n \n@@ -505,8 +506,6 @@ void BitcoinGUI::setClientModel(ClientModel *_clientModel)\n             // initialize the disable state of the tray icon with the current value in the model.\n             setTrayIconVisible(optionsModel->getHideTrayIcon());\n         }\n-\n-        modalOverlay->setKnownBestHeight(clientModel->getHeaderTipHeight(), QDateTime::fromTime_t(clientModel->getHeaderTipTime()));\n     } else {\n         // Disable possibility to show main window via action\n         toggleHideAction->setEnabled(false);"
      }
    ]
  },
  {
    "sha": "610a91719c89f9b52f2ae4a5bd039688fe11ffd7",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2MTBhOTE3MTljODlmOWI1MmYyYWU0YTViZDAzOTY4OGZlMTFmZmQ3",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-04-20T07:51:05Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-04-20T07:51:05Z"
      },
      "message": "Declare headers height/time cache mutable, re-set the methods const",
      "tree": {
        "sha": "9aaab2f07d500fc67bb1aa86fcc85322c6eab267",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9aaab2f07d500fc67bb1aa86fcc85322c6eab267"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/610a91719c89f9b52f2ae4a5bd039688fe11ffd7",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlj4aIcACgkQHrd2uwPH\nki1pGhAAnkc5SPQ/Hc8gewIu17kaJWW38YhjLYvm+Dbdz3KiIgGXi3irWJaKgAnt\n5xgmR1qx+guYOcYy02CaqoBYw8rfIsivfb4BLnoJ5wqZ9xX5YsprYNMEpBYBUDIU\n2mY5qxW+vfWx5tmIJluO5TjoMK18KqVzFxX6vQNOvdB1HZG6zJC9Y6GqG1MfxOfp\nZGoYFh3FuQmGSRzwPdxRRELgyH4QPvM//J2V/ZO3hjjzwolhVPyrGsOcxY7ZP17R\n+afOJ7mEPPcKuygvJxhW9mh9D++1fVJteRI5GT6WHo6Yv5Ye+JDS4xgMZcskqRuU\nuvetSEXlTT7+i5HbxztLH4k12zgc3jwdXI1cxru01Wswku5d0ZcpCVsfQdP9zNxw\n+LeQATvpaeqgXVahmBKm61pt97b4F9mDnEFFFc8LDpVQOEx5PiFrmd57WfLO4D0l\nntuLcdmsgag75MlyAQ29DWAQL0XnNnbgb1y/7nOgWGcMP0s5d/cIQEta8VEyUOBx\n5UBChjPHarmjImbCT7JSZfFtatx4P12cZxV1qUly+e4kbdiPmXwlGNpUxiHiPcOe\nJwJapdeE2Tosd1x5PkWc7ewkGnm0ZQkkM/Cuf1iXjDTLoY2z2CxqhuVyc1vlhP5l\nCBXvHyAzZfrLkc8ok2NNnmGTPkOyB3uTyTuIQ6GlHjXYuvrFJA4=\n=WwDR\n-----END PGP SIGNATURE-----",
        "payload": "tree 9aaab2f07d500fc67bb1aa86fcc85322c6eab267\nparent cf92bce526d11091b5b39f5d8dbddb972250062f\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1492674665 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1492674665 +0200\n\nDeclare headers height/time cache mutable, re-set the methods const\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/610a91719c89f9b52f2ae4a5bd039688fe11ffd7",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/610a91719c89f9b52f2ae4a5bd039688fe11ffd7",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/610a91719c89f9b52f2ae4a5bd039688fe11ffd7/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "cf92bce526d11091b5b39f5d8dbddb972250062f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cf92bce526d11091b5b39f5d8dbddb972250062f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/cf92bce526d11091b5b39f5d8dbddb972250062f"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 6,
      "deletions": 6
    },
    "files": [
      {
        "sha": "cbc6ca1296f32a990b8af56ccdb3cf9adbb2874a",
        "filename": "src/qt/clientmodel.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/610a91719c89f9b52f2ae4a5bd039688fe11ffd7/src/qt/clientmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/610a91719c89f9b52f2ae4a5bd039688fe11ffd7/src/qt/clientmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/clientmodel.cpp?ref=610a91719c89f9b52f2ae4a5bd039688fe11ffd7",
        "patch": "@@ -74,7 +74,7 @@ int ClientModel::getNumBlocks() const\n     return chainActive.Height();\n }\n \n-int ClientModel::getHeaderTipHeight()\n+int ClientModel::getHeaderTipHeight() const\n {\n     if (cachedBestHeaderHeight == -1) {\n         // make sure we initially populate the cache via a cs_main lock\n@@ -87,7 +87,7 @@ int ClientModel::getHeaderTipHeight()\n     return cachedBestHeaderHeight;\n }\n \n-int64_t ClientModel::getHeaderTipTime()\n+int64_t ClientModel::getHeaderTipTime() const\n {\n     if (cachedBestHeaderTime == -1) {\n         LOCK(cs_main);"
      },
      {
        "sha": "0e6b34fbfd290c3edf0e331d161c891ab2845083",
        "filename": "src/qt/clientmodel.h",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/610a91719c89f9b52f2ae4a5bd039688fe11ffd7/src/qt/clientmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/610a91719c89f9b52f2ae4a5bd039688fe11ffd7/src/qt/clientmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/clientmodel.h?ref=610a91719c89f9b52f2ae4a5bd039688fe11ffd7",
        "patch": "@@ -51,8 +51,8 @@ class ClientModel : public QObject\n     //! Return number of connections, default is in- and outbound (total)\n     int getNumConnections(unsigned int flags = CONNECTIONS_ALL) const;\n     int getNumBlocks() const;\n-    int getHeaderTipHeight();\n-    int64_t getHeaderTipTime();\n+    int getHeaderTipHeight() const;\n+    int64_t getHeaderTipTime() const;\n     //! Return number of transactions in the mempool\n     long getMempoolSize() const;\n     //! Return the dynamic memory usage of the mempool\n@@ -82,8 +82,8 @@ class ClientModel : public QObject\n     QString dataDir() const;\n \n     // caches for the best header\n-    std::atomic<int> cachedBestHeaderHeight;\n-    std::atomic<int64_t> cachedBestHeaderTime;\n+    mutable std::atomic<int> cachedBestHeaderHeight;\n+    mutable std::atomic<int64_t> cachedBestHeaderTime;\n \n private:\n     OptionsModel *optionsModel;"
      }
    ]
  },
  {
    "sha": "928d4a9ac596db35bf3b8a0c8857cd6e7f87aa2a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5MjhkNGE5YWM1OTZkYjM1YmYzYjhhMGM4ODU3Y2Q2ZTdmODdhYTJh",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-04-20T07:51:41Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-04-20T07:51:41Z"
      },
      "message": "Set both time/height header caches at the same time",
      "tree": {
        "sha": "a17580e8e138707cedf3762fcd0f4004ea995f10",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a17580e8e138707cedf3762fcd0f4004ea995f10"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/928d4a9ac596db35bf3b8a0c8857cd6e7f87aa2a",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlj4aKEACgkQHrd2uwPH\nki1RwA/7Blwv4gsVivA+yPX9mHjI8joVvXKF2/L76l7oMwOFFlNyfi1dAB/uzq8A\ni3o/vh8MPlhyLttNGi9/3xdQ6dyxkJYPpL3tMr9Rca1vPB/31eb0AoOcElmJsjnf\nzi+aqE39oBb2b8cmQNAEnG+AUw0Bq2LVT7FFUki6bCjOajI5SBPDmrWcMs8QVVqE\nwUIHdJVrbrMb3x+GxoWHi3p664JSyUKtH+yAU0TIoZGMnZC+OI33HhfyNWsR5rL6\nT+B64+UbAWACrAykTJFmcFeo/72BUERpWf2Jq3mmuhcyTNOeHgAeEoDS2U/uoi0D\nTxp0M8M/BHH3LdKIGWUzyCohn40j1G8csIL94lVx3xPmRX0wFcgef89tFvOOYjtM\nJ1cwFR1FM046OH6GUwnBf95kC0QJ7Pq8VnajD4rlJOIHg5wMSniOyrImuivwej6b\nrvisClXPuwT2vcJhU+Xalef9TsicokkXwNjGz65hieEUdEX37q2X5fmaGiZeNUBM\nS/CbQzWHPOl6AWD+wYGnJ5MgpX7tFiJRjuHB0q9Y9D7jzEAWCoJFOMSilopNzX6m\nU0pZHMD06H4iP6aSW24/SXufodWQQjgkvramaajxIFKLCZ4zLeyTkJBuIABTeF8i\n3ryRB9ynMlrbcvTaM+ef50sw9Nm/NyoID/4TGHkJK97vfW405uI=\n=umg4\n-----END PGP SIGNATURE-----",
        "payload": "tree a17580e8e138707cedf3762fcd0f4004ea995f10\nparent 610a91719c89f9b52f2ae4a5bd039688fe11ffd7\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1492674701 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1492674701 +0200\n\nSet both time/height header caches at the same time\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/928d4a9ac596db35bf3b8a0c8857cd6e7f87aa2a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/928d4a9ac596db35bf3b8a0c8857cd6e7f87aa2a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/928d4a9ac596db35bf3b8a0c8857cd6e7f87aa2a/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "610a91719c89f9b52f2ae4a5bd039688fe11ffd7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/610a91719c89f9b52f2ae4a5bd039688fe11ffd7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/610a91719c89f9b52f2ae4a5bd039688fe11ffd7"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 2,
      "deletions": 0
    },
    "files": [
      {
        "sha": "20d4687971e88f3a8b353173a7343527b6a301e0",
        "filename": "src/qt/clientmodel.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/928d4a9ac596db35bf3b8a0c8857cd6e7f87aa2a/src/qt/clientmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/928d4a9ac596db35bf3b8a0c8857cd6e7f87aa2a/src/qt/clientmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/clientmodel.cpp?ref=928d4a9ac596db35bf3b8a0c8857cd6e7f87aa2a",
        "patch": "@@ -82,6 +82,7 @@ int ClientModel::getHeaderTipHeight() const\n         LOCK(cs_main);\n         if (pindexBestHeader) {\n             cachedBestHeaderHeight = pindexBestHeader->nHeight;\n+            cachedBestHeaderTime = pindexBestHeader->GetBlockTime();\n         }\n     }\n     return cachedBestHeaderHeight;\n@@ -92,6 +93,7 @@ int64_t ClientModel::getHeaderTipTime() const\n     if (cachedBestHeaderTime == -1) {\n         LOCK(cs_main);\n         if (pindexBestHeader) {\n+            cachedBestHeaderHeight = pindexBestHeader->nHeight;\n             cachedBestHeaderTime = pindexBestHeader->GetBlockTime();\n         }\n     }"
      }
    ]
  },
  {
    "sha": "4082fb0003ca1992c34e9f4c75fba9db281f5fc0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0MDgyZmIwMDAzY2ExOTkyYzM0ZTlmNGM3NWZiYTlkYjI4MWY1ZmMw",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-04-20T11:29:12Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-04-20T11:29:12Z"
      },
      "message": "Add missing <atomic> header in clientmodel.h",
      "tree": {
        "sha": "49e21229debf94ee128f3a9751d5cc9e513ca6de",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/49e21229debf94ee128f3a9751d5cc9e513ca6de"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4082fb0003ca1992c34e9f4c75fba9db281f5fc0",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlj4m5EACgkQHrd2uwPH\nki20UBAAkZ02ouTPDHwOgbvVKt1RRib9GrrtsB6P6OD/Zb7LboqQ5VwPtYmC/DFt\nBTALrXwFzOyDjbq7uIWotmoihnHf+CqNLkklaYmC5qSHUYdF3V28Mj/l5xVXD0OK\n1LT2+6Tb3wxPB3K4W8Z93825wE5Smcyap0bkI+qTdefhdBeQsnwTmaBbSQqywHYp\nm/fsJ94mS+KaYGsHSiVSADdKlINisXlY2sax2l7+7KJufm3u8PdD3cvjb+wWBzy3\nauTyXwoXkzAyKk/LqM6DAsHTCL7n9YDjvwCWUbb0ipkp76sa7CkotmAVGqP7/JJT\nKVYMEYQDtIq7WCSCyl77hV17I3eF+8NS1rPbJr81oFcbmJo/bKgUR1oR1Jt3CdKn\nApZEchhp0lNV7jaxDu6z16rK5fWWGvwFq3/w9YZhRXADV9gC7vGQ/8X0veJ1t+XK\n01wOm+dbXGulbmZkYvv9RP5KSIVlBueZApzt3wfW3Xm/EdRa3hZbS66hLdkzQIZw\nUzpjLfy0/lIgVQQsmMF+BPb93MJRCwILhA4qH6l1676gYsMb1DqiQd9LHncwMzIL\nswITze7hHUY1ua6GjRtCzmPue4+2uuHHUtRJLzB4jKy/Xh3CkLRAnzO9Eu69hOBV\nu39m9ZLxlgZ6kzmXAPzAG3/nEM3/PJpuAfvzt+pg/GGvYhH1CnI=\n=f6T6\n-----END PGP SIGNATURE-----",
        "payload": "tree 49e21229debf94ee128f3a9751d5cc9e513ca6de\nparent 928d4a9ac596db35bf3b8a0c8857cd6e7f87aa2a\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1492687752 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1492687752 +0200\n\nAdd missing <atomic> header in clientmodel.h\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4082fb0003ca1992c34e9f4c75fba9db281f5fc0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/4082fb0003ca1992c34e9f4c75fba9db281f5fc0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4082fb0003ca1992c34e9f4c75fba9db281f5fc0/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "928d4a9ac596db35bf3b8a0c8857cd6e7f87aa2a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/928d4a9ac596db35bf3b8a0c8857cd6e7f87aa2a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/928d4a9ac596db35bf3b8a0c8857cd6e7f87aa2a"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 2,
      "deletions": 0
    },
    "files": [
      {
        "sha": "4c92e2144e32154b7683a4f3e9a29eeedd425a39",
        "filename": "src/qt/clientmodel.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4082fb0003ca1992c34e9f4c75fba9db281f5fc0/src/qt/clientmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4082fb0003ca1992c34e9f4c75fba9db281f5fc0/src/qt/clientmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/clientmodel.h?ref=4082fb0003ca1992c34e9f4c75fba9db281f5fc0",
        "patch": "@@ -8,6 +8,8 @@\n #include <QObject>\n #include <QDateTime>\n \n+#include <atomic>\n+\n class AddressTableModel;\n class BanTableModel;\n class OptionsModel;"
      }
    ]
  }
]