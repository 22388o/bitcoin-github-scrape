sipa,2015-11-04T23:23:50Z,@jonasschnelli @laanwj You may want to test this.\n,https://github.com/bitcoin/bitcoin/pull/6948#issuecomment-153902599,153902599,
laanwj,2015-11-05T08:20:52Z,I expect that this fixes the issue. #6923 seemed to be a case of a truncated undo file (there was a strangely-sized old undo file and a very small new one). Although I don't fully remember if it happened during `-reindex`. May well be the case.\n\nWill test.\n,https://github.com/bitcoin/bitcoin/pull/6948#issuecomment-153984934,153984934,
morcos,2015-11-05T15:21:19Z,"utACK\n\nWould an alternative option be to at the end of the reindex loop, go through and flush all the undo files.  It seems if you crash during a reindex, you don't care about the state of the undo files, its only if you were to crash after reindex before they were flushed that you would have a problem?\n\nSuch alternative option would potentially have problems in the event of new blocks being w",https://github.com/bitcoin/bitcoin/pull/6948#issuecomment-154091614,154091614,
jgarzik,2015-11-05T15:44:02Z,tested ACK\n,https://github.com/bitcoin/bitcoin/pull/6948#issuecomment-154097914,154097914,
jonasschnelli,2015-11-05T15:44:39Z,Tested ACK.\n,https://github.com/bitcoin/bitcoin/pull/6948#issuecomment-154098086,154098086,
laanwj,2015-11-05T21:33:33Z,"> It seems if you crash during a reindex, you don't care about the state of the undo file\n\nI don't understand your reasoning here. The point of this PR is to avoid corruption in the undo files when there is a crash during reindex. It can then pick up where it left off next time the application is launched.\n",https://github.com/bitcoin/bitcoin/pull/6948#issuecomment-154199149,154199149,
paveljanik,2015-11-06T07:59:38Z,This change brought a new compiler warning:\n\n```\nmain.cpp:2554:15: warning: comparison of integers of different signs: 'unsigned int' and 'int' [-Wsign-compare]\n    if (nFile != nLastBlockFile) {\n        ~~~~~ ^  ~~~~~~~~~~~~~~\n1 warning generated.\n```\n,https://github.com/bitcoin/bitcoin/pull/6948#issuecomment-154339527,154339527,
morcos,2015-11-05T15:10:49Z,So on a reindex this means undo files still won't be truncated I suppose?\n,https://github.com/bitcoin/bitcoin/pull/6948#discussion_r44021816,44021816,src/main.cpp
