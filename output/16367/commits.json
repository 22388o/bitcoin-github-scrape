[
  {
    "sha": "e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplNmU0NGVlZGQ1NmVjYWY1OWYzZmFiZjhlMDdhYjdkZWUwZGRiMWI2",
    "commit": {
      "author": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2019-07-10T17:46:31Z"
      },
      "committer": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2020-04-06T01:48:21Z"
      },
      "message": "Multiprocess build changes\n\nautotools and automake changes to support multiprocess execution.\n\nThis adds a new --enable-multiprocess flag, and build configuration code to\ndetect libraries needed for multiprocess support. The --enable-multiprocess\nflag builds new bitcoin-node and bitcoin-gui executables, which are updated in\nhttps://github.com/bitcoin/bitcoin/pull/10102 to communicate across processes.\nBut for now they are functionally equivalent to existing bitcoind and\nbitcoin-qt executables.",
      "tree": {
        "sha": "c75b388704bfbd7336a2840dd8f421c9785830fc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c75b388704bfbd7336a2840dd8f421c9785830fc"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6/comments",
    "author": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "516ebe8a62de1906f8be9c4a144ea5753678eb4f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/516ebe8a62de1906f8be9c4a144ea5753678eb4f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/516ebe8a62de1906f8be9c4a144ea5753678eb4f"
      }
    ],
    "stats": {
      "total": 199,
      "additions": 159,
      "deletions": 40
    },
    "files": [
      {
        "sha": "5b9ec1f355a5bdd15ca2c3d8e14708dbcba68577",
        "filename": ".gitignore",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6/.gitignore",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6/.gitignore",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/.gitignore?ref=e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6",
        "patch": "@@ -5,6 +5,8 @@\n src/bitcoin\n src/bitcoind\n src/bitcoin-cli\n+src/bitcoin-gui\n+src/bitcoin-node\n src/bitcoin-tx\n src/bitcoin-wallet\n src/test/fuzz"
      },
      {
        "sha": "caebe5e0b30681c8d297b7b3b847b4cce2eee2cc",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 63,
        "deletions": 0,
        "changes": 63,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6",
        "patch": "@@ -230,6 +230,24 @@ if test x$enable_bip70 != xno; then\n   AC_MSG_ERROR([BIP70 is no longer supported!])\n fi\n \n+AC_ARG_WITH([libmultiprocess],\n+  [AS_HELP_STRING([--with-libmultiprocess=yes|no|auto],\n+  [Build with libmultiprocess library. (default: auto, i.e. detect with pkg-config)])],\n+  [with_libmultiprocess=$withval],\n+  [with_libmultiprocess=auto])\n+\n+AC_ARG_WITH([mpgen],\n+  [AS_HELP_STRING([--with-mpgen=yes|no|auto|PREFIX],\n+  [Build with libmultiprocess codegen tool. Useful to specify different libmultiprocess host system library and build system codegen tool prefixes when cross-compiling (default is host system libmultiprocess prefix)])],\n+  [with_mpgen=$withval],\n+  [with_mpgen=auto])\n+\n+AC_ARG_ENABLE([multiprocess],\n+  [AS_HELP_STRING([--enable-multiprocess],\n+  [build multiprocess bitcoin-node, bitcoin-wallet, and bitcoin-gui executables in addition to monolithic bitcoind and bitcoin-qt executables. Requires libmultiprocess library. Experimental (default is no)])],\n+  [enable_multiprocess=$enableval],\n+  [enable_multiprocess=no])\n+\n AC_ARG_ENABLE(man,\n     [AS_HELP_STRING([--disable-man],\n                     [do not install man pages (default is to install)])],,\n@@ -1369,6 +1387,50 @@ AM_CONDITIONAL([EMBEDDED_UNIVALUE],[test x$need_bundled_univalue = xyes])\n AC_SUBST(UNIVALUE_CFLAGS)\n AC_SUBST(UNIVALUE_LIBS)\n \n+dnl libmultiprocess library check\n+\n+libmultiprocess_found=no\n+if test \"x$with_libmultiprocess\" = xyes || test \"x$with_libmultiprocess\" = xauto; then\n+  if test \"x$use_pkgconfig\" = xyes; then\n+    m4_ifdef([PKG_CHECK_MODULES], [PKG_CHECK_MODULES([LIBMULTIPROCESS], [libmultiprocess], [\n+       libmultiprocess_found=yes;\n+       libmultiprocess_prefix=`$PKG_CONFIG --variable=prefix libmultiprocess`;\n+    ], [true])])\n+  fi\n+elif test \"x$with_libmultiprocess\" != xno; then\n+  AC_MSG_ERROR([--with-libmultiprocess=$with_libmultiprocess value is not yes, auto, or no])\n+fi\n+AC_SUBST(LIBMULTIPROCESS_CFLAGS)\n+AC_SUBST(LIBMULTIPROCESS_LIBS)\n+\n+dnl Enable multiprocess check\n+\n+if test \"x$enable_multiprocess\" = xyes; then\n+  if test \"x$libmultiprocess_found\" != xyes; then\n+    AC_MSG_ERROR([--enable-multiprocess=yes option specified but libmultiprocess library was not found. May need to install libmultiprocess library, or specify install path with PKG_CONFIG_PATH environment variable. Running 'pkg-config --debug libmultiprocess' may be helpful for debugging.])\n+  fi\n+  build_multiprocess=yes\n+elif test \"x$enable_multiprocess\" = xauto; then\n+  build_multiprocess=$libmultiprocess_found\n+else\n+  build_multiprocess=no\n+fi\n+\n+AM_CONDITIONAL([BUILD_MULTIPROCESS],[test \"x$build_multiprocess\" = xyes])\n+AM_CONDITIONAL([BUILD_BITCOIN_NODE], [test \"x$build_multiprocess\" = xyes])\n+AM_CONDITIONAL([BUILD_BITCOIN_GUI], [test \"x$build_multiprocess\" = xyes])\n+\n+dnl codegen tools check\n+\n+if test x$build_multiprocess != xno; then\n+  if test \"x$with_mpgen\" = xyes || test \"x$with_mpgen\" = xauto; then\n+    MPGEN_PREFIX=\"$libmultiprocess_prefix\"\n+  elif test \"x$with_mpgen\" != xno; then\n+    MPGEN_PREFIX=\"$with_mpgen\";\n+  fi\n+  AC_SUBST(MPGEN_PREFIX)\n+fi\n+\n AC_MSG_CHECKING([whether to build bitcoind])\n AM_CONDITIONAL([BUILD_BITCOIND], [test x$build_bitcoind = xyes])\n AC_MSG_RESULT($build_bitcoind)\n@@ -1649,6 +1711,7 @@ esac\n \n echo\n echo \"Options used to compile and link:\"\n+echo \"  multiprocess  = $build_multiprocess\"\n echo \"  with wallet   = $enable_wallet\"\n echo \"  with gui / qt = $bitcoin_enable_qt\"\n if test x$bitcoin_enable_qt != xno; then"
      },
      {
        "sha": "d08e824b7b97be11882cb33423882566ea4da682",
        "filename": "doc/multiprocess.md",
        "status": "added",
        "additions": 34,
        "deletions": 0,
        "changes": 34,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6/doc/multiprocess.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6/doc/multiprocess.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/multiprocess.md?ref=e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6",
        "patch": "@@ -0,0 +1,34 @@\n+# Multiprocess Bitcoin\n+\n+On unix systems, the `--enable-multiprocess` build option can be passed to `./configure` to build new `bitcoin-node`, `bitcoin-wallet`, and `bitcoin-gui` executables alongside existing `bitcoind` and `bitcoin-qt` executables.\n+\n+`bitcoin-node` is a drop-in replacement for `bitcoind`, and `bitcoin-gui` is a drop-in replacement for `bitcoin-qt`, and there are no differences in use or external behavior between the new and old executables. But internally (after [#10102](https://github.com/bitcoin/bitcoin/pull/10102)), `bitcoin-gui` will spawn a `bitcoin-node` process to run P2P and RPC code, communicating with it across a socket pair, and `bitcoin-node` will spawn `bitcoin-wallet` to run wallet code, also communicating over a socket pair. This will let node, wallet, and GUI code run in separate address spaces for better isolation, and allow future improvements like being able to start and stop components independently on different machines and environments.\n+\n+## Next steps\n+\n+Specific next steps after [#10102](https://github.com/bitcoin/bitcoin/pull/10102) will be:\n+\n+- [ ] Adding `-ipcbind` and `-ipcconnect` options to `bitcoin-node`, `bitcoin-wallet`, and `bitcoin-gui` executables so they can listen and connect to TCP ports and unix socket paths. This will allow separate processes to be started and stopped any time and connect to each other.\n+- [ ] Adding `-server` and `-rpcbind` options to the `bitcoin-wallet` executable so wallet processes can handle RPC requests directly without going through the node.\n+- [ ] Supporting windows, not just unix systems. The existing socket code is already cross-platform, so the only windows-specific code that needs to be written is code spawning a process and passing a socket descriptor. This can be implemented with `CreateProcess` and `WSADuplicateSocket`. Example: https://memset.wordpress.com/2010/10/13/win32-api-passing-socket-with-ipc-method/.\n+- [ ] Adding sandbox features, restricting subprocess access to resources and data. See [https://eklitzke.org/multiprocess-bitcoin](https://eklitzke.org/multiprocess-bitcoin).\n+\n+## Debugging\n+\n+After [#10102](https://github.com/bitcoin/bitcoin/pull/10102), the `-debug=ipc` command line option can be used to see requests and responses between processes.\n+\n+## Installation\n+\n+The multiprocess feature requires [Cap'n Proto](https://capnproto.org/) and [libmultiprocess](https://github.com/chaincodelabs/libmultiprocess) as dependencies. A simple way to get starting using it without installing these dependencies manually is to use the [depends system](../depends) with the `MULTIPROCESS=1` [dependency option](../depends#dependency-options) passed to make:\n+\n+```\n+cd <BITCOIN_SOURCE_DIRECTORY>\n+make -C depends NO_QT=1 MULTIPROCESS=1\n+./configure --prefix=$PWD/depends/x86_64-pc-linux-gnu\n+make\n+src/bitcoin-node -regtest -printtoconsole -debug=ipc\n+```\n+\n+The configure script will pick up settings and library locations from the depends directory, so there is no need to pass `--enable-multiprocess` as a separate flag when using the depends system (it's controlled by the `MULTIPROCESS=1` option).\n+\n+Alternately, you can install [Cap'n Proto](https://capnproto.org/) and [libmultiprocess](https://github.com/chaincodelabs/libmultiprocess) packages on your system, and just run `./configure --enable-multiprocess` without using the depends system. The configure script will be able to locate the installed packages via [pkg-config](https://www.freedesktop.org/wiki/Software/pkg-config/). See [Installation](https://github.com/chaincodelabs/libmultiprocess#installation) section of the libmultiprocess readme for install steps. See [build-unix.md](build-unix.md) and [build-osx.md](build-osx.md) for information about installing dependencies in general."
      },
      {
        "sha": "acac00d24a5a15591329ff1709e42ad11d461378",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 29,
        "deletions": 28,
        "changes": 57,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6",
        "patch": "@@ -85,6 +85,10 @@ if BUILD_BITCOIND\n   bin_PROGRAMS += bitcoind\n endif\n \n+if BUILD_BITCOIN_NODE\n+  bin_PROGRAMS += bitcoin-node\n+endif\n+\n if BUILD_BITCOIN_CLI\n   bin_PROGRAMS += bitcoin-cli\n endif\n@@ -543,22 +547,22 @@ libbitcoin_cli_a_SOURCES = \\\n nodist_libbitcoin_util_a_SOURCES = $(srcdir)/obj/build.h\n #\n \n-# bitcoind binary #\n-bitcoind_SOURCES = bitcoind.cpp\n-bitcoind_CPPFLAGS = $(AM_CPPFLAGS) $(BITCOIN_INCLUDES)\n-bitcoind_CXXFLAGS = $(AM_CXXFLAGS) $(PIE_FLAGS)\n-bitcoind_LDFLAGS = $(RELDFLAGS) $(AM_LDFLAGS) $(LIBTOOL_APP_LDFLAGS)\n+# bitcoind & bitcoin-node binaries #\n+bitcoin_common_sources = bitcoind.cpp\n+bitcoin_common_cppflags = $(AM_CPPFLAGS) $(BITCOIN_INCLUDES)\n+bitcoin_common_cxxflags = $(AM_CXXFLAGS) $(PIE_FLAGS)\n+bitcoin_common_ldflags = $(RELDFLAGS) $(AM_LDFLAGS) $(LIBTOOL_APP_LDFLAGS)\n \n if TARGET_WINDOWS\n-bitcoind_SOURCES += bitcoind-res.rc\n+bitcoin_common_sources += bitcoind-res.rc\n endif\n \n-bitcoind_LDADD = \\\n+bitcoin_common_ldadd = \\\n   $(LIBBITCOIN_SERVER) \\\n   $(LIBBITCOIN_WALLET) \\\n   $(LIBBITCOIN_COMMON) \\\n-  $(LIBUNIVALUE) \\\n   $(LIBBITCOIN_UTIL) \\\n+  $(LIBUNIVALUE) \\\n   $(LIBBITCOIN_ZMQ) \\\n   $(LIBBITCOIN_CONSENSUS) \\\n   $(LIBBITCOIN_CRYPTO) \\\n@@ -567,7 +571,19 @@ bitcoind_LDADD = \\\n   $(LIBMEMENV) \\\n   $(LIBSECP256K1)\n \n-bitcoind_LDADD += $(BOOST_LIBS) $(BDB_LIBS) $(MINIUPNPC_LIBS) $(EVENT_PTHREADS_LIBS) $(EVENT_LIBS) $(ZMQ_LIBS)\n+bitcoin_common_ldadd += $(BOOST_LIBS) $(BDB_LIBS) $(MINIUPNPC_LIBS) $(EVENT_PTHREADS_LIBS) $(EVENT_LIBS) $(ZMQ_LIBS)\n+\n+bitcoind_SOURCES = $(bitcoin_common_sources)\n+bitcoind_CPPFLAGS = $(bitcoin_common_cppflags)\n+bitcoind_CXXFLAGS = $(bitcoin_common_cxxflags)\n+bitcoind_LDFLAGS = $(bitcoin_common_ldflags)\n+bitcoind_LDADD = $(bitcoin_common_ldadd)\n+\n+bitcoin_node_SOURCES = $(bitcoin_common_sources)\n+bitcoin_node_CPPFLAGS = $(bitcoin_common_cppflags)\n+bitcoin_node_CXXFLAGS = $(bitcoin_common_cxxflags)\n+bitcoin_node_LDFLAGS = $(bitcoin_common_ldflags)\n+bitcoin_node_LDADD = $(bitcoin_common_ldadd)\n \n # bitcoin-cli binary #\n bitcoin_cli_SOURCES = bitcoin-cli.cpp\n@@ -611,29 +627,14 @@ bitcoin_tx_LDADD += $(BOOST_LIBS)\n \n # bitcoin-wallet binary #\n bitcoin_wallet_SOURCES = bitcoin-wallet.cpp\n-bitcoin_wallet_CPPFLAGS = $(AM_CPPFLAGS) $(BITCOIN_INCLUDES)\n-bitcoin_wallet_CXXFLAGS = $(AM_CXXFLAGS) $(PIE_FLAGS)\n-bitcoin_wallet_LDFLAGS = $(RELDFLAGS) $(AM_LDFLAGS) $(LIBTOOL_APP_LDFLAGS)\n+bitcoin_wallet_CPPFLAGS = $(bitcoin_common_cppflags)\n+bitcoin_wallet_CXXFLAGS = $(bitcoin_common_cxxflags)\n+bitcoin_wallet_LDFLAGS = $(bitcoin_common_ldflags)\n+bitcoin_wallet_LDADD = $(LIBBITCOIN_WALLET_TOOL) $(bitcoin_common_ldadd)\n \n if TARGET_WINDOWS\n bitcoin_wallet_SOURCES += bitcoin-wallet-res.rc\n endif\n-\n-bitcoin_wallet_LDADD = \\\n-  $(LIBBITCOIN_WALLET_TOOL) \\\n-  $(LIBBITCOIN_WALLET) \\\n-  $(LIBBITCOIN_COMMON) \\\n-  $(LIBBITCOIN_CONSENSUS) \\\n-  $(LIBBITCOIN_UTIL) \\\n-  $(LIBBITCOIN_CRYPTO) \\\n-  $(LIBBITCOIN_ZMQ) \\\n-  $(LIBLEVELDB) \\\n-  $(LIBLEVELDB_SSE42) \\\n-  $(LIBMEMENV) \\\n-  $(LIBSECP256K1) \\\n-  $(LIBUNIVALUE)\n-\n-bitcoin_wallet_LDADD += $(BOOST_LIBS) $(BDB_LIBS) $(EVENT_PTHREADS_LIBS) $(EVENT_LIBS) $(MINIUPNPC_LIBS) $(ZMQ_LIBS)\n #\n \n # bitcoinconsensus library #"
      },
      {
        "sha": "83dd56f2f0cea29e1ac7bb7d965b2aad834faccd",
        "filename": "src/Makefile.qt.include",
        "status": "modified",
        "additions": 31,
        "deletions": 12,
        "changes": 43,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6/src/Makefile.qt.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6/src/Makefile.qt.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.qt.include?ref=e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6",
        "patch": "@@ -3,6 +3,11 @@\n # file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n bin_PROGRAMS += qt/bitcoin-qt\n+\n+if BUILD_BITCOIN_GUI\n+  bin_PROGRAMS += bitcoin-gui\n+endif\n+\n EXTRA_LIBRARIES += qt/libbitcoinqt.a\n \n # bitcoin qt core #\n@@ -294,29 +299,43 @@ QT_FORMS_H=$(join $(dir $(QT_FORMS_UI)),$(addprefix ui_, $(notdir $(QT_FORMS_UI:\n # Most files will depend on the forms and moc files as includes. Generate them\n # before anything else.\n $(QT_MOC): $(QT_FORMS_H)\n-$(qt_libbitcoinqt_a_OBJECTS) $(qt_bitcoin_qt_OBJECTS) : | $(QT_MOC)\n+$(qt_libbitcoinqt_a_OBJECTS) $(qt_bitcoin_qt_OBJECTS) $(bitcoin_gui_OBJECTS) : | $(QT_MOC)\n \n-# bitcoin-qt binary #\n-qt_bitcoin_qt_CPPFLAGS = $(AM_CPPFLAGS) $(BITCOIN_INCLUDES) $(BITCOIN_QT_INCLUDES) \\\n+# bitcoin-qt and bitcoin-gui binaries #\n+bitcoin_qt_common_cppflags = $(AM_CPPFLAGS) $(BITCOIN_INCLUDES) $(BITCOIN_QT_INCLUDES) \\\n   $(QT_INCLUDES) $(QR_CFLAGS)\n-qt_bitcoin_qt_CXXFLAGS = $(AM_CXXFLAGS) $(QT_PIE_FLAGS)\n+bitcoin_qt_common_cxxflags = $(AM_CXXFLAGS) $(QT_PIE_FLAGS)\n \n-qt_bitcoin_qt_SOURCES = qt/main.cpp\n+bitcoin_qt_common_sources = qt/main.cpp\n if TARGET_WINDOWS\n-  qt_bitcoin_qt_SOURCES += $(BITCOIN_RC)\n+  bitcoin_qt_common_sources += $(BITCOIN_RC)\n endif\n-qt_bitcoin_qt_LDADD = qt/libbitcoinqt.a $(LIBBITCOIN_SERVER)\n+bitcoin_qt_common_ldadd = qt/libbitcoinqt.a $(LIBBITCOIN_SERVER)\n if ENABLE_WALLET\n-qt_bitcoin_qt_LDADD += $(LIBBITCOIN_UTIL) $(LIBBITCOIN_WALLET)\n+bitcoin_qt_common_ldadd += $(LIBBITCOIN_UTIL) $(LIBBITCOIN_WALLET)\n endif\n if ENABLE_ZMQ\n-qt_bitcoin_qt_LDADD += $(LIBBITCOIN_ZMQ) $(ZMQ_LIBS)\n+bitcoin_qt_common_ldadd += $(LIBBITCOIN_ZMQ) $(ZMQ_LIBS)\n endif\n-qt_bitcoin_qt_LDADD += $(LIBBITCOIN_CLI) $(LIBBITCOIN_COMMON) $(LIBBITCOIN_UTIL) $(LIBBITCOIN_CONSENSUS) $(LIBBITCOIN_CRYPTO) $(LIBUNIVALUE) $(LIBLEVELDB) $(LIBLEVELDB_SSE42) $(LIBMEMENV) \\\n+bitcoin_qt_common_ldadd += $(LIBBITCOIN_CLI) $(LIBBITCOIN_COMMON) $(LIBBITCOIN_UTIL) $(LIBBITCOIN_CONSENSUS) $(LIBBITCOIN_CRYPTO) $(LIBUNIVALUE) $(LIBLEVELDB) $(LIBLEVELDB_SSE42) $(LIBMEMENV) \\\n   $(BOOST_LIBS) $(QT_LIBS) $(QT_DBUS_LIBS) $(QR_LIBS) $(BDB_LIBS) $(MINIUPNPC_LIBS) $(LIBSECP256K1) \\\n   $(EVENT_PTHREADS_LIBS) $(EVENT_LIBS)\n-qt_bitcoin_qt_LDFLAGS = $(RELDFLAGS) $(AM_LDFLAGS) $(QT_LDFLAGS) $(LIBTOOL_APP_LDFLAGS)\n-qt_bitcoin_qt_LIBTOOLFLAGS = $(AM_LIBTOOLFLAGS) --tag CXX\n+bitcoin_qt_common_ldflags = $(RELDFLAGS) $(AM_LDFLAGS) $(QT_LDFLAGS) $(LIBTOOL_APP_LDFLAGS)\n+bitcoin_qt_common_libtoolflags = $(AM_LIBTOOLFLAGS) --tag CXX\n+\n+qt_bitcoin_qt_CPPFLAGS = $(bitcoin_qt_common_cppflags)\n+qt_bitcoin_qt_CXXFLAGS = $(bitcoin_qt_common_cxxflags)\n+qt_bitcoin_qt_SOURCES = $(bitcoin_qt_common_sources)\n+qt_bitcoin_qt_LDADD = $(bitcoin_qt_common_ldadd)\n+qt_bitcoin_qt_LDFLAGS = $(bitcoin_qt_common_ldflags)\n+qt_bitcoin_qt_LIBTOOLFLAGS = $(bitcoin_qt_common_libtoolflags)\n+\n+bitcoin_gui_CPPFLAGS = $(bitcoin_qt_common_cppflags)\n+bitcoin_gui_CXXFLAGS = $(bitcoin_qt_common_cxxflags)\n+bitcoin_gui_SOURCES = $(bitcoin_qt_common_sources)\n+bitcoin_gui_LDADD = $(bitcoin_qt_common_ldadd)\n+bitcoin_gui_LDFLAGS = $(bitcoin_qt_common_ldflags)\n+bitcoin_gui_LIBTOOLFLAGS = $(bitcoin_qt_common_libtoolflags)\n \n #locale/foo.ts -> locale/foo.qm\n QT_QM=$(QT_TS:.ts=.qm)"
      }
    ]
  },
  {
    "sha": "d6306466626635e6fee44385e6a688c8dc118eb5",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNjMwNjQ2NjYyNjYzNWU2ZmVlNDQzODVlNmE2ODhjOGRjMTE4ZWI1",
    "commit": {
      "author": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2019-07-09T18:40:45Z"
      },
      "committer": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2020-04-06T01:48:21Z"
      },
      "message": "libmultiprocess depends build",
      "tree": {
        "sha": "b0c0f6fd60032aca20533b6e74bae01a54ff0f3f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b0c0f6fd60032aca20533b6e74bae01a54ff0f3f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d6306466626635e6fee44385e6a688c8dc118eb5",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d6306466626635e6fee44385e6a688c8dc118eb5",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d6306466626635e6fee44385e6a688c8dc118eb5",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d6306466626635e6fee44385e6a688c8dc118eb5/comments",
    "author": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e6e44eedd56ecaf59f3fabf8e07ab7dee0ddb1b6"
      }
    ],
    "stats": {
      "total": 106,
      "additions": 105,
      "deletions": 1
    },
    "files": [
      {
        "sha": "5ad82bb56a931af5c1af4fe889f5ec3569af4986",
        "filename": "depends/Makefile",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6306466626635e6fee44385e6a688c8dc118eb5/depends/Makefile",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6306466626635e6fee44385e6a688c8dc118eb5/depends/Makefile",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/Makefile?ref=d6306466626635e6fee44385e6a688c8dc118eb5",
        "patch": "@@ -13,6 +13,7 @@ NO_QR ?=\n NO_WALLET ?=\n NO_ZMQ ?=\n NO_UPNP ?=\n+MULTIPROCESS ?=\n FALLBACK_DOWNLOAD_PATH ?= https://bitcoincore.org/depends-sources\n \n BUILD = $(shell ./config.guess)\n@@ -107,6 +108,7 @@ qt_packages_$(NO_QT) = $(qt_packages) $(qt_$(host_os)_packages) $(qt_$(host_arch\n wallet_packages_$(NO_WALLET) = $(wallet_packages)\n upnp_packages_$(NO_UPNP) = $(upnp_packages)\n zmq_packages_$(NO_ZMQ) = $(zmq_packages)\n+multiprocess_packages_$(MULTIPROCESS) = $(multiprocess_packages)\n \n packages += $($(host_arch)_$(host_os)_packages) $($(host_os)_packages) $(qt_packages_) $(wallet_packages_) $(upnp_packages_)\n native_packages += $($(host_arch)_$(host_os)_native_packages) $($(host_os)_native_packages)\n@@ -115,6 +117,11 @@ ifneq ($(zmq_packages_),)\n packages += $(zmq_packages)\n endif\n \n+ifeq ($(multiprocess_packages_),)\n+packages += $(multiprocess_packages)\n+native_packages += $(multiprocess_native_packages)\n+endif\n+\n all_packages = $(packages) $(native_packages)\n \n meta_depends = Makefile funcs.mk builders/default.mk hosts/default.mk hosts/$(host_os).mk builders/$(build_os).mk\n@@ -155,6 +162,7 @@ $(host_prefix)/share/config.site : config.site.in $(host_prefix)/.stamp_$(final_\n             -e 's|@no_zmq@|$(NO_ZMQ)|' \\\n             -e 's|@no_wallet@|$(NO_WALLET)|' \\\n             -e 's|@no_upnp@|$(NO_UPNP)|' \\\n+            -e 's|@multiprocess@|$(MULTIPROCESS)|' \\\n             -e 's|@debug@|$(DEBUG)|' \\\n             $< > $@\n \t$(AT)touch $@"
      },
      {
        "sha": "c12ea8bcb3b6e2e4cdb3057d180f88d31fd29b79",
        "filename": "depends/README.md",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6306466626635e6fee44385e6a688c8dc118eb5/depends/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6306466626635e6fee44385e6a688c8dc118eb5/depends/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/README.md?ref=d6306466626635e6fee44385e6a688c8dc118eb5",
        "patch": "@@ -91,6 +91,7 @@ The following can be set when running make: make FOO=bar\n     NO_ZMQ: Don't download/build/cache packages needed for enabling zeromq\n     NO_WALLET: Don't download/build/cache libs needed to enable the wallet\n     NO_UPNP: Don't download/build/cache packages needed for enabling upnp\n+    MULTIPROCESS: build libmultiprocess (experimental, requires cmake)\n     DEBUG: disable some optimizations and enable more runtime checking\n     HOST_ID_SALT: Optional salt to use when generating host package ids\n     BUILD_ID_SALT: Optional salt to use when generating build package ids"
      },
      {
        "sha": "103aa0d2ff1a15e3a7fc6426b0bc247d6d5bc4d7",
        "filename": "depends/config.site.in",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6306466626635e6fee44385e6a688c8dc118eb5/depends/config.site.in",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6306466626635e6fee44385e6a688c8dc118eb5/depends/config.site.in",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/config.site.in?ref=d6306466626635e6fee44385e6a688c8dc118eb5",
        "patch": "@@ -16,6 +16,9 @@ fi\n if test -z $with_qt_bindir && test -z \"@no_qt@\"; then\n   with_qt_bindir=$depends_prefix/native/bin\n fi\n+if test -z $with_mpgen && test -n \"@multiprocess@\"; then\n+  with_mpgen=$depends_prefix/native\n+fi\n \n if test -z $with_qrencode && test -n \"@no_qr@\"; then\n   with_qrencode=no\n@@ -25,6 +28,10 @@ if test -z $enable_wallet && test -n \"@no_wallet@\"; then\n   enable_wallet=no\n fi\n \n+if test -z $enable_multiprocess && test -n \"@multiprocess@\"; then\n+  enable_multiprocess=yes\n+fi\n+\n if test -z $with_miniupnpc && test -n \"@no_upnp@\"; then\n   with_miniupnpc=no\n fi"
      },
      {
        "sha": "23ad9b1302e8958547fc50e5f3d031938ab8714a",
        "filename": "depends/funcs.mk",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6306466626635e6fee44385e6a688c8dc118eb5/depends/funcs.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6306466626635e6fee44385e6a688c8dc118eb5/depends/funcs.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/funcs.mk?ref=d6306466626635e6fee44385e6a688c8dc118eb5",
        "patch": "@@ -130,6 +130,7 @@ $(1)_config_env+=$($(1)_config_env_$(host_arch)_$(host_os)) $($(1)_config_env_$(\n \n $(1)_config_env+=PKG_CONFIG_LIBDIR=$($($(1)_type)_prefix)/lib/pkgconfig\n $(1)_config_env+=PKG_CONFIG_PATH=$($($(1)_type)_prefix)/share/pkgconfig\n+$(1)_config_env+=CMAKE_MODULE_PATH=$($($(1)_type)_prefix)/lib/cmake\n $(1)_config_env+=PATH=$(build_prefix)/bin:$(PATH)\n $(1)_build_env+=PATH=$(build_prefix)/bin:$(PATH)\n $(1)_stage_env+=PATH=$(build_prefix)/bin:$(PATH)"
      },
      {
        "sha": "970c81041eae289d42ca140bf1452a958a6c3625",
        "filename": "depends/packages/boost.mk",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages/boost.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages/boost.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/boost.mk?ref=d6306466626635e6fee44385e6a688c8dc118eb5",
        "patch": "@@ -1,7 +1,7 @@\n package=boost\n $(package)_version=1_70_0\n $(package)_download_path=https://dl.bintray.com/boostorg/release/1.70.0/source/\n-$(package)_file_name=$(package)_$($(package)_version).tar.bz2\n+$(package)_file_name=boost_$($(package)_version).tar.bz2\n $(package)_sha256_hash=430ae8354789de4fd19ee52f3b1f739e1fba576f0aded0897c3c2bc00fb38778\n \n define $(package)_set_vars"
      },
      {
        "sha": "360cedd63fe25ce3bf7df6fe6bd4e6a1a5ca2c85",
        "filename": "depends/packages/capnp.mk",
        "status": "added",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages/capnp.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages/capnp.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/capnp.mk?ref=d6306466626635e6fee44385e6a688c8dc118eb5",
        "patch": "@@ -0,0 +1,17 @@\n+package=capnp\n+$(package)_version=$(native_$(package)_version)\n+$(package)_download_path=$(native_$(package)_download_path)\n+$(package)_file_name=$(native_$(package)_file_name)\n+$(package)_sha256_hash=$(native_$(package)_sha256_hash)\n+\n+define $(package)_config_cmds\n+  $($(package)_autoconf)\n+endef\n+\n+define $(package)_build_cmds\n+  $(MAKE)\n+endef\n+\n+define $(package)_stage_cmds\n+  $(MAKE) DESTDIR=$($(package)_staging_dir) install\n+endef"
      },
      {
        "sha": "91798f676ad2da40b8833369798c3a5095ba49b3",
        "filename": "depends/packages/libmultiprocess.mk",
        "status": "added",
        "additions": 18,
        "deletions": 0,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages/libmultiprocess.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages/libmultiprocess.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/libmultiprocess.mk?ref=d6306466626635e6fee44385e6a688c8dc118eb5",
        "patch": "@@ -0,0 +1,18 @@\n+package=libmultiprocess\n+$(package)_version=$(native_$(package)_version)\n+$(package)_download_path=$(native_$(package)_download_path)\n+$(package)_file_name=$(native_$(package)_file_name)\n+$(package)_sha256_hash=$(native_$(package)_sha256_hash)\n+$(package)_dependencies=native_$(package) boost capnp\n+\n+define $(package)_config_cmds\n+  cmake -DCMAKE_INSTALL_PREFIX=$($($(package)_type)_prefix)\n+endef\n+\n+define $(package)_build_cmds\n+  $(MAKE)\n+endef\n+\n+define $(package)_stage_cmds\n+  $(MAKE) DESTDIR=$($(package)_staging_dir) install\n+endef"
      },
      {
        "sha": "b9e6253772da9ffbe36e55f28a3268577cd0a6f7",
        "filename": "depends/packages/native_boost.mk",
        "status": "added",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages/native_boost.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages/native_boost.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/native_boost.mk?ref=d6306466626635e6fee44385e6a688c8dc118eb5",
        "patch": "@@ -0,0 +1,13 @@\n+package=native_boost\n+$(package)_version=$(boost_version)\n+$(package)_download_path=$(boost_download_path)\n+$(package)_file_name=$(boost_file_name)\n+$(package)_sha256_hash=$(boost_sha256_hash)\n+\n+define $(package)_config_cmds\n+  ./bootstrap.sh --prefix=$($($(package)_type)_prefix) --with-libraries=headers\n+endef\n+\n+define $(package)_stage_cmds\n+  ./b2 -d0 --prefix=$($(package)_staging_prefix_dir) install\n+endef"
      },
      {
        "sha": "ed5a6deee2fdbfbd658ddff8d5aa5c129860bf6f",
        "filename": "depends/packages/native_capnp.mk",
        "status": "added",
        "additions": 18,
        "deletions": 0,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages/native_capnp.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages/native_capnp.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/native_capnp.mk?ref=d6306466626635e6fee44385e6a688c8dc118eb5",
        "patch": "@@ -0,0 +1,18 @@\n+package=native_capnp\n+$(package)_version=0.7.0\n+$(package)_download_path=https://capnproto.org/\n+$(package)_download_file=capnproto-c++-$($(package)_version).tar.gz\n+$(package)_file_name=capnproto-cxx-$($(package)_version).tar.gz\n+$(package)_sha256_hash=c9a4c0bd88123064d483ab46ecee777f14d933359e23bff6fb4f4dbd28b4cd41\n+\n+define $(package)_config_cmds\n+  $($(package)_autoconf)\n+endef\n+\n+define $(package)_build_cmds\n+  $(MAKE)\n+endef\n+\n+define $(package)_stage_cmds\n+  $(MAKE) DESTDIR=$($(package)_staging_dir) install\n+endef"
      },
      {
        "sha": "94da1377a3c0b6f8a471ba801db0cfc938012323",
        "filename": "depends/packages/native_libmultiprocess.mk",
        "status": "added",
        "additions": 18,
        "deletions": 0,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages/native_libmultiprocess.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages/native_libmultiprocess.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/native_libmultiprocess.mk?ref=d6306466626635e6fee44385e6a688c8dc118eb5",
        "patch": "@@ -0,0 +1,18 @@\n+package=native_libmultiprocess\n+$(package)_version=1d630f536d43d1fdba028f2cfccf49bc27da92db\n+$(package)_download_path=https://github.com/chaincodelabs/libmultiprocess/archive\n+$(package)_file_name=$($(package)_version).tar.gz\n+$(package)_sha256_hash=f43183ccf59fa7596d113e56518563673f5823a721974b4058d8778ef53bd476\n+$(package)_dependencies=native_boost native_capnp\n+\n+define $(package)_config_cmds\n+  cmake -DCMAKE_INSTALL_PREFIX=$($($(package)_type)_prefix)\n+endef\n+\n+define $(package)_build_cmds\n+  $(MAKE)\n+endef\n+\n+define $(package)_stage_cmds\n+  $(MAKE) DESTDIR=$($(package)_staging_dir) install\n+endef"
      },
      {
        "sha": "9c56d3e978398ceec27655838842d3169b1ddeeb",
        "filename": "depends/packages/packages.mk",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages/packages.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages/packages.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/packages.mk?ref=d6306466626635e6fee44385e6a688c8dc118eb5",
        "patch": "@@ -16,6 +16,9 @@ zmq_packages=zeromq\n \n upnp_packages=miniupnpc\n \n+multiprocess_packages = libmultiprocess capnp\n+multiprocess_native_packages = native_libmultiprocess native_boost native_capnp\n+\n darwin_native_packages = native_biplist native_ds_store native_mac_alias\n \n ifneq ($(build_os),darwin)"
      }
    ]
  },
  {
    "sha": "787f40668dc15980c3d6de028d7950c08175d84a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3ODdmNDA2NjhkYzE1OTgwYzNkNmRlMDI4ZDc5NTBjMDgxNzVkODRh",
    "commit": {
      "author": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2019-07-09T18:28:16Z"
      },
      "committer": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2020-04-06T01:48:21Z"
      },
      "message": "Set LD_LIBRARY_PATH consistently in travis tests\n\nRemove inconsistency between functional and unit test environments and make it\npossible to substitute bitcoin-qt and bitcoin-node in place of bitcoind in\npython tests, or to link bitcoind against shared libraries.",
      "tree": {
        "sha": "78aee6b10fc440a283482d171c3e3fcffd5115af",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/78aee6b10fc440a283482d171c3e3fcffd5115af"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/787f40668dc15980c3d6de028d7950c08175d84a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/787f40668dc15980c3d6de028d7950c08175d84a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/787f40668dc15980c3d6de028d7950c08175d84a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/787f40668dc15980c3d6de028d7950c08175d84a/comments",
    "author": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d6306466626635e6fee44385e6a688c8dc118eb5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d6306466626635e6fee44385e6a688c8dc118eb5",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d6306466626635e6fee44385e6a688c8dc118eb5"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "9b2f0d91ec0a98b6f30224f6577c7947cb810d79",
        "filename": "ci/test/06_script_b.sh",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/787f40668dc15980c3d6de028d7950c08175d84a/ci/test/06_script_b.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/787f40668dc15980c3d6de028d7950c08175d84a/ci/test/06_script_b.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/06_script_b.sh?ref=787f40668dc15980c3d6de028d7950c08175d84a",
        "patch": "@@ -30,12 +30,12 @@ fi\n \n if [ \"$RUN_FUNCTIONAL_TESTS\" = \"true\" ]; then\n   BEGIN_FOLD functional-tests\n-  DOCKER_EXEC test/functional/test_runner.py --ci $MAKEJOBS --tmpdirprefix \"${BASE_SCRATCH_DIR}/test_runner/\" --ansi --combinedlogslen=4000 ${TEST_RUNNER_EXTRA} --quiet --failfast\n+  DOCKER_EXEC LD_LIBRARY_PATH=$DEPENDS_DIR/$HOST/lib test/functional/test_runner.py --ci $MAKEJOBS --tmpdirprefix \"${BASE_SCRATCH_DIR}/test_runner/\" --ansi --combinedlogslen=4000 ${TEST_RUNNER_EXTRA} --quiet --failfast\n   END_FOLD\n fi\n \n if [ \"$RUN_FUZZ_TESTS\" = \"true\" ]; then\n   BEGIN_FOLD fuzz-tests\n-  DOCKER_EXEC test/fuzz/test_runner.py ${FUZZ_TESTS_CONFIG} -l DEBUG ${DIR_FUZZ_IN}\n+  DOCKER_EXEC LD_LIBRARY_PATH=$DEPENDS_DIR/$HOST/lib test/fuzz/test_runner.py ${FUZZ_TESTS_CONFIG} -l DEBUG ${DIR_FUZZ_IN}\n   END_FOLD\n fi"
      }
    ]
  },
  {
    "sha": "d54f64c6c700be0604190f52c84fc5f1cdd9f02f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNTRmNjRjNmM3MDBiZTA2MDQxOTBmNTJjODRmYzVmMWNkZDlmMDJm",
    "commit": {
      "author": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2019-07-09T18:27:39Z"
      },
      "committer": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2020-04-06T01:48:21Z"
      },
      "message": "Add multiprocess travis configuration",
      "tree": {
        "sha": "6a287929693b624c3071bd9b4d789fd74b8026f3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6a287929693b624c3071bd9b4d789fd74b8026f3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d54f64c6c700be0604190f52c84fc5f1cdd9f02f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d54f64c6c700be0604190f52c84fc5f1cdd9f02f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d54f64c6c700be0604190f52c84fc5f1cdd9f02f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d54f64c6c700be0604190f52c84fc5f1cdd9f02f/comments",
    "author": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "787f40668dc15980c3d6de028d7950c08175d84a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/787f40668dc15980c3d6de028d7950c08175d84a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/787f40668dc15980c3d6de028d7950c08175d84a"
      }
    ],
    "stats": {
      "total": 21,
      "additions": 20,
      "deletions": 1
    },
    "files": [
      {
        "sha": "f2cd7c11780e3e835392d72597ed2de0b33daf7b",
        "filename": ".travis.yml",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d54f64c6c700be0604190f52c84fc5f1cdd9f02f/.travis.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d54f64c6c700be0604190f52c84fc5f1cdd9f02f/.travis.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/.travis.yml?ref=d54f64c6c700be0604190f52c84fc5f1cdd9f02f",
        "patch": "@@ -141,6 +141,11 @@ jobs:\n       env: >-\n         FILE_ENV=\"./ci/test/00_setup_env_native_fuzz_with_valgrind.sh\"\n \n+    - stage: test\n+      name: 'x86_64 Linux [GOAL: install]  [bionic]  [multiprocess]'\n+      env: >-\n+        FILE_ENV=\"./ci/test/00_setup_env_native_multiprocess.sh\"\n+\n     - stage: test\n       name: 'x86_64 Linux  [GOAL: install]  [bionic]  [no wallet]'\n       env: >-"
      },
      {
        "sha": "0fc989085c9f80b65a5ca1309a85cb1b33a05cb2",
        "filename": "ci/test/00_setup_env_native_multiprocess.sh",
        "status": "added",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d54f64c6c700be0604190f52c84fc5f1cdd9f02f/ci/test/00_setup_env_native_multiprocess.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d54f64c6c700be0604190f52c84fc5f1cdd9f02f/ci/test/00_setup_env_native_multiprocess.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/00_setup_env_native_multiprocess.sh?ref=d54f64c6c700be0604190f52c84fc5f1cdd9f02f",
        "patch": "@@ -0,0 +1,14 @@\n+#!/usr/bin/env bash\n+#\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+export LC_ALL=C.UTF-8\n+\n+export CONTAINER_NAME=ci_native_multiprocess\n+export PACKAGES=\"cmake python3\"\n+export DEP_OPTS=\"MULTIPROCESS=1\"\n+export GOAL=\"install\"\n+export BITCOIN_CONFIG=\"\"\n+export TEST_RUNNER_ENV=\"BITCOIND=bitcoin-node\""
      },
      {
        "sha": "2dbfdc0bdbdce5e424965e68c0fc4c65e79a29b0",
        "filename": "ci/test/06_script_b.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d54f64c6c700be0604190f52c84fc5f1cdd9f02f/ci/test/06_script_b.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d54f64c6c700be0604190f52c84fc5f1cdd9f02f/ci/test/06_script_b.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/06_script_b.sh?ref=d54f64c6c700be0604190f52c84fc5f1cdd9f02f",
        "patch": "@@ -30,7 +30,7 @@ fi\n \n if [ \"$RUN_FUNCTIONAL_TESTS\" = \"true\" ]; then\n   BEGIN_FOLD functional-tests\n-  DOCKER_EXEC LD_LIBRARY_PATH=$DEPENDS_DIR/$HOST/lib test/functional/test_runner.py --ci $MAKEJOBS --tmpdirprefix \"${BASE_SCRATCH_DIR}/test_runner/\" --ansi --combinedlogslen=4000 ${TEST_RUNNER_EXTRA} --quiet --failfast\n+  DOCKER_EXEC LD_LIBRARY_PATH=$DEPENDS_DIR/$HOST/lib ${TEST_RUNNER_ENV} test/functional/test_runner.py --ci $MAKEJOBS --tmpdirprefix \"${BASE_SCRATCH_DIR}/test_runner/\" --ansi --combinedlogslen=4000 ${TEST_RUNNER_EXTRA} --quiet --failfast\n   END_FOLD\n fi\n "
      }
    ]
  },
  {
    "sha": "b919efadff3d0393f4a8c3c1dc735f7ac5c665bb",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiOTE5ZWZhZGZmM2QwMzkzZjRhOGMzYzFkYzczNWY3YWM1YzY2NWJi",
    "commit": {
      "author": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2020-03-04T15:56:07Z"
      },
      "committer": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2020-04-06T01:48:21Z"
      },
      "message": "depends: Use default macos clang compiler\n\nSuggested by Cory Fields <cory-nospam-@coryfields.com>\nhttps://github.com/bitcoin/bitcoin/pull/16367#issuecomment-595393546\nas alternate workaround for problem described\nhttps://github.com/bitcoin/bitcoin/pull/16367#issuecomment-594600985",
      "tree": {
        "sha": "675b28a4f9485326a5af06aebc29c087a8ec1d15",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/675b28a4f9485326a5af06aebc29c087a8ec1d15"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b919efadff3d0393f4a8c3c1dc735f7ac5c665bb",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b919efadff3d0393f4a8c3c1dc735f7ac5c665bb",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b919efadff3d0393f4a8c3c1dc735f7ac5c665bb",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b919efadff3d0393f4a8c3c1dc735f7ac5c665bb/comments",
    "author": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d54f64c6c700be0604190f52c84fc5f1cdd9f02f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d54f64c6c700be0604190f52c84fc5f1cdd9f02f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d54f64c6c700be0604190f52c84fc5f1cdd9f02f"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "9513b6c21c65621d708eb26f8e8fa3d953ae5a48",
        "filename": "depends/builders/darwin.mk",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b919efadff3d0393f4a8c3c1dc735f7ac5c665bb/depends/builders/darwin.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b919efadff3d0393f4a8c3c1dc735f7ac5c665bb/depends/builders/darwin.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/builders/darwin.mk?ref=b919efadff3d0393f4a8c3c1dc735f7ac5c665bb",
        "patch": "@@ -1,5 +1,5 @@\n-build_darwin_CC:=$(shell xcrun -f clang)\n-build_darwin_CXX:=$(shell xcrun -f clang++)\n+build_darwin_CC:=clang\n+build_darwin_CXX:=clang++\n build_darwin_AR:=$(shell xcrun -f ar)\n build_darwin_RANLIB:=$(shell xcrun -f ranlib)\n build_darwin_STRIP:=$(shell xcrun -f strip)"
      }
    ]
  }
]