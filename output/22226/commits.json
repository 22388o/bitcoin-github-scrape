[
  {
    "sha": "12313382e60c84f106127566d004c03384ca5abf",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxMjMxMzM4MmU2MGM4NGYxMDYxMjc1NjZkMDA0YzAzMzg0Y2E1YWJm",
    "commit": {
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2021-06-11T18:02:51Z"
      },
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2021-09-16T22:02:55Z"
      },
      "message": "doc: test: unittest segfault gdb\n\nFeedback from Jon Atack and Marco Falke.",
      "tree": {
        "sha": "1c7f007e0b573ee819f356554fbf68b7eba5f04d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1c7f007e0b573ee819f356554fbf68b7eba5f04d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/12313382e60c84f106127566d004c03384ca5abf",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEGNRVI1NPYuZCSIrGepNdrbLETwUFAmFDvxIACgkQepNdrbLE\nTwUZbA//e4oaLsoYLL75cnjJxDuppPK+1xwiEIQ8f98alYTkjG5WIpEdsfMM3s1O\n5dYQdGuZbRydRTn3SHvC10EtebiB112JB2O6+e6e1dyQjxyM9pl9oi956VHZuulC\nnTox9nonyb0EoVcZCHAGY+PSwBBUrTI7VnFKRnKD+tIr98RLUfQ6DaG3T9hBUs2/\nK/qO2byM8FMq5PV3yu8TPoZV1SJxtxjzE0fqm42N7MSbozf1ZpX/X8567I/V/KtJ\nYeSIuJ0QblnH73q6cWzrGgG5hYxTWojdeNFtsIfhgW/2aH5uhZLVC9tuNELiodH0\nyC0188sI/TsFAiLLcjExRyaLvuYktMzHuMRDVXKkxk1MjfO7145nJTbRy0xc9J4k\nxgHJNUmx3bz/sKrbUSS5uHSovfB5KJeOUHnJikBzG3yyKOZccHORu5NXmosI1z74\nH46dhYhZzLiguywYQbsQN9fryKdOu4b4sAskns4/b+3AWSqFeYcijRvSsh5w3dg/\nEUm2CKF/pnWlnY9MVpT2s0uTBcE8tBDz+Ppuu3ApCH2ADPt3J4zFVEdssVc07D6b\npPdKMVOqpXKe1dhXvU6LKXTjDCi2NTjiLIKnCs3ENtEgLqeWV+EjNvyQqBQB84NY\ngrrcAvX9rjVnELP0W2Qu5Xn1wP8pKV2Sjpy4FQYELiZkKScj4kw=\n=OyWx\n-----END PGP SIGNATURE-----",
        "payload": "tree 1c7f007e0b573ee819f356554fbf68b7eba5f04d\nparent f66eceaecf464bfab5e19f3ca8fe680d8a6aa2e1\nauthor James O'Beirne <james.obeirne@pm.me> 1623434571 -0400\ncommitter James O'Beirne <james.obeirne@pm.me> 1631829775 -0400\n\ndoc: test: unittest segfault gdb\n\nFeedback from Jon Atack and Marco Falke.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/12313382e60c84f106127566d004c03384ca5abf",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/12313382e60c84f106127566d004c03384ca5abf",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/12313382e60c84f106127566d004c03384ca5abf/comments",
    "author": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f66eceaecf464bfab5e19f3ca8fe680d8a6aa2e1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f66eceaecf464bfab5e19f3ca8fe680d8a6aa2e1",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f66eceaecf464bfab5e19f3ca8fe680d8a6aa2e1"
      }
    ],
    "stats": {
      "total": 26,
      "additions": 26,
      "deletions": 0
    },
    "files": [
      {
        "sha": "d03411c3eda99f29c7b110fc54c5a6d211715b57",
        "filename": "src/test/README.md",
        "status": "modified",
        "additions": 26,
        "deletions": 0,
        "changes": 26,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/12313382e60c84f106127566d004c03384ca5abf/src/test/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/12313382e60c84f106127566d004c03384ca5abf/src/test/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/README.md?ref=12313382e60c84f106127566d004c03384ca5abf",
        "patch": "@@ -74,3 +74,29 @@ start debugging, just like you would with any other program:\n ```bash\n gdb src/test/test_bitcoin\n ```\n+\n+#### Segmentation faults\n+\n+If you hit a segmentation fault during a test run, you can diagnose where the fault\n+is happening by running `gdb ./src/test/test_bitcoin` and then using the `bt` command\n+within gdb.\n+\n+Another tool that can be used to resolve segmentation faults is\n+[valgrind](https://valgrind.org/).\n+\n+If for whatever reason you want to produce a core dump file for this fault, you can do\n+that as well. By default, the boost test runner will intercept system errors and not\n+produce a core file. To bypass this, add `--catch_system_errors=no` to the\n+`test_bitcoin` arguments and ensure that your ulimits are set properly (e.g. `ulimit -c\n+unlimited`).\n+\n+Running the tests and hitting a segmentation fault should now produce a file called `core`\n+(on Linux platforms, the file name will likely depend on the contents of\n+`/proc/sys/kernel/core_pattern`).\n+\n+You can then explore the core dump using\n+``` bash\n+gdb src/test/test_bitcoin core\n+\n+(gbd) bt  # produce a backtrace for where a segfault occurred\n+```"
      }
    ]
  }
]