[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518219018",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#issuecomment-518219018",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16404",
    "id": 518219018,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxODIxOTAxOA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-05T12:44:42Z",
    "updated_at": "2019-08-05T12:44:42Z",
    "author_association": "MEMBER",
    "body": "ACK e11aa5a6f2683741567f0aaa08d3b198d219913f",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518219018/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521074876",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#issuecomment-521074876",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16404",
    "id": 521074876,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTA3NDg3Ng==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-14T02:07:59Z",
    "updated_at": "2019-08-19T01:48:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521074876/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/522372708",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#issuecomment-522372708",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16404",
    "id": 522372708,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjM3MjcwOA==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-19T00:26:19Z",
    "updated_at": "2019-08-19T00:26:19Z",
    "author_association": "MEMBER",
    "body": "Rebased.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/522372708/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/524618251",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#issuecomment-524618251",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16404",
    "id": 524618251,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNDYxODI1MQ==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-25T10:21:44Z",
    "updated_at": "2019-08-25T10:21:44Z",
    "author_association": "MEMBER",
    "body": "IMO this is ready to merge.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/524618251/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/524855471",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#issuecomment-524855471",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16404",
    "id": 524855471,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNDg1NTQ3MQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-26T13:14:24Z",
    "updated_at": "2019-08-26T13:14:24Z",
    "author_association": "MEMBER",
    "body": "Indeed. Thanks for the ping",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/524855471/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/525449503",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#issuecomment-525449503",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16404",
    "id": 525449503,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTQ0OTUwMw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-27T19:31:19Z",
    "updated_at": "2019-08-27T19:31:19Z",
    "author_association": "MEMBER",
    "body": "This test fails on travis",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/525449503/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/525495998",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#issuecomment-525495998",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16404",
    "id": 525495998,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTQ5NTk5OA==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-27T21:46:25Z",
    "updated_at": "2019-08-27T21:46:25Z",
    "author_association": "MEMBER",
    "body": "The test should run pretty fast, on my system around 1s:\r\n```\r\n2019-08-27T20:59:50.749000Z TestFramework (INFO): Test the getzmqnotifications RPC\r\n2019-08-27T20:59:51.603000Z TestFramework (INFO): Stopping nodes\r\n```\r\nBut on one travis failure it takes around 60s to fail:\r\n```\r\n2019-08-27T17:18:36.885000Z TestFramework (INFO): Test the getzmqnotifications RPC\r\n2019-08-27T17:19:37.373000Z TestFramework (ERROR): Unexpected exception caught during testing\r\n```\r\nand looking at the error:\r\n```\r\nzmq.error.Again: Resource temporarily unavailable\r\n```\r\nI assume the receive timeouts due to:\r\n```py\r\n        socket.set(zmq.RCVTIMEO, 60000)\r\n```\r\n\r\nI suspect it happens because by the time the message is published there is no subscriber connected - this is called a \"slow joiner\" in http://zguide.zeromq.org/py:all#sockets-and-patterns - and I think this happens because we are `restart_node` after `socket.connect`. I'll submit a PR to invert this order to see if it stops happening, otherwise we'll have to make sure the subscriber is ready before publishing messages.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/525495998/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310510854",
    "pull_request_review_id": 270648333,
    "id": 310510854,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDUxMDg1NA==",
    "diff_hunk": "@@ -43,66 +42,62 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_py3_zmq()\n         self.skip_if_no_bitcoind_zmq()\n \n-    def setup_nodes(self):\n+    def run_test(self):\n         import zmq\n+        self.ctx = zmq.Context()\n+        try:\n+            self.test_basic()\n+            self.test_reorg()\n+        finally:\n+            # Destroy the ZMQ context.\n+            self.log.debug(\"Destroying ZMQ context\")\n+            self.ctx.destroy(linger=None)\n \n-        # Initialize ZMQ context and socket.\n+    def test_basic(self):\n         # All messages are received in the same socket which means\n         # that this test fails if the publishing order changes.\n         # Note that the publishing order is not defined in the documentation and\n         # is subject to change.\n-        self.zmq_context = zmq.Context()\n-        socket = self.zmq_context.socket(zmq.SUB)\n+        import zmq",
    "path": "test/functional/interface_zmq.py",
    "position": 37,
    "original_position": 38,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "e11aa5a6f2683741567f0aaa08d3b198d219913f",
    "user": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Is it normal to import stuff in the middle of a file in python? Don't see it often. And you could remove the one below in `test_reorg` if you just moved this to top..",
    "created_at": "2019-08-05T09:19:43Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310510854",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310510854"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310510854"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310510854/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 60,
    "original_line": 60,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310514821",
    "pull_request_review_id": 270653271,
    "id": 310514821,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDUxNDgyMQ==",
    "diff_hunk": "@@ -43,66 +42,62 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_py3_zmq()\n         self.skip_if_no_bitcoind_zmq()\n \n-    def setup_nodes(self):\n+    def run_test(self):\n         import zmq\n+        self.ctx = zmq.Context()\n+        try:\n+            self.test_basic()\n+            self.test_reorg()\n+        finally:\n+            # Destroy the ZMQ context.\n+            self.log.debug(\"Destroying ZMQ context\")\n+            self.ctx.destroy(linger=None)\n \n-        # Initialize ZMQ context and socket.\n+    def test_basic(self):\n         # All messages are received in the same socket which means\n         # that this test fails if the publishing order changes.\n         # Note that the publishing order is not defined in the documentation and\n         # is subject to change.\n-        self.zmq_context = zmq.Context()\n-        socket = self.zmq_context.socket(zmq.SUB)\n+        import zmq",
    "path": "test/functional/interface_zmq.py",
    "position": 37,
    "original_position": 38,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "e11aa5a6f2683741567f0aaa08d3b198d219913f",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This was already the case.  It's like this to not break if zmq module is not available. See `skip_if_no_py3_zmq()` above.",
    "created_at": "2019-08-05T09:29:15Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310514821",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310514821"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310514821"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310514821/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 60,
    "original_line": 60,
    "side": "RIGHT",
    "in_reply_to_id": 310510854
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310518006",
    "pull_request_review_id": 270657149,
    "id": 310518006,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDUxODAwNg==",
    "diff_hunk": "@@ -43,66 +42,62 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_py3_zmq()\n         self.skip_if_no_bitcoind_zmq()\n \n-    def setup_nodes(self):\n+    def run_test(self):\n         import zmq\n+        self.ctx = zmq.Context()\n+        try:\n+            self.test_basic()\n+            self.test_reorg()\n+        finally:\n+            # Destroy the ZMQ context.\n+            self.log.debug(\"Destroying ZMQ context\")\n+            self.ctx.destroy(linger=None)\n \n-        # Initialize ZMQ context and socket.\n+    def test_basic(self):\n         # All messages are received in the same socket which means\n         # that this test fails if the publishing order changes.\n         # Note that the publishing order is not defined in the documentation and\n         # is subject to change.\n-        self.zmq_context = zmq.Context()\n-        socket = self.zmq_context.socket(zmq.SUB)\n+        import zmq",
    "path": "test/functional/interface_zmq.py",
    "position": 37,
    "original_position": 38,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "e11aa5a6f2683741567f0aaa08d3b198d219913f",
    "user": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ah, that makes sense..",
    "created_at": "2019-08-05T09:36:59Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310518006",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310518006"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310518006"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310518006/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 60,
    "original_line": 60,
    "side": "RIGHT",
    "in_reply_to_id": 310510854
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310588340",
    "pull_request_review_id": 270745827,
    "id": 310588340,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDU4ODM0MA==",
    "diff_hunk": "@@ -111,7 +111,9 @@ using other means such as firewalling.\n \n Note that when the block chain tip changes, a reorganisation may occur\n and just the tip will be notified. It is up to the subscriber to\n-retrieve the chain from the last known block to the new tip.\n+retrieve the chain from the last known block to the new tip. Also note\n+that no notification occurs if the tip was in the active chain - this\n+is the case after calling invalidateblock RPC.",
    "path": "doc/zmq.md",
    "position": 7,
    "original_position": 7,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "e11aa5a6f2683741567f0aaa08d3b198d219913f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`invalidateblock` is not for production purposes, so I'd rather not mention that here. At most I'd mention this in the invalidateblock rpc itself.",
    "created_at": "2019-08-05T12:52:17Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310588340",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310588340"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310588340"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310588340/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 116,
    "original_line": 116,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310588739",
    "pull_request_review_id": 270746334,
    "id": 310588739,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDU4ODczOQ==",
    "diff_hunk": "@@ -43,66 +42,62 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_py3_zmq()\n         self.skip_if_no_bitcoind_zmq()\n \n-    def setup_nodes(self):\n+    def run_test(self):\n         import zmq\n+        self.ctx = zmq.Context()\n+        try:\n+            self.test_basic()\n+            self.test_reorg()\n+        finally:\n+            # Destroy the ZMQ context.\n+            self.log.debug(\"Destroying ZMQ context\")\n+            self.ctx.destroy(linger=None)\n \n-        # Initialize ZMQ context and socket.\n+    def test_basic(self):\n         # All messages are received in the same socket which means\n         # that this test fails if the publishing order changes.\n         # Note that the publishing order is not defined in the documentation and\n         # is subject to change.\n-        self.zmq_context = zmq.Context()\n-        socket = self.zmq_context.socket(zmq.SUB)\n+        import zmq",
    "path": "test/functional/interface_zmq.py",
    "position": 37,
    "original_position": 38,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "e11aa5a6f2683741567f0aaa08d3b198d219913f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Can move the `import zmq` right after the line `skip_if_no_bitcoind_zmq`? :)",
    "created_at": "2019-08-05T12:53:10Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310588739",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310588739"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310588739"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310588739/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 60,
    "original_line": 60,
    "side": "RIGHT",
    "in_reply_to_id": 310510854
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310589608",
    "pull_request_review_id": 270747397,
    "id": 310589608,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDU4OTYwOA==",
    "diff_hunk": "@@ -111,7 +111,9 @@ using other means such as firewalling.\n \n Note that when the block chain tip changes, a reorganisation may occur\n and just the tip will be notified. It is up to the subscriber to\n-retrieve the chain from the last known block to the new tip.\n+retrieve the chain from the last known block to the new tip. Also note\n+that no notification occurs if the tip was in the active chain - this\n+is the case after calling invalidateblock RPC.",
    "path": "doc/zmq.md",
    "position": 7,
    "original_position": 7,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "e11aa5a6f2683741567f0aaa08d3b198d219913f",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good point, I'll improve `invalidateblock` help then.",
    "created_at": "2019-08-05T12:55:10Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310589608",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310589608"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310589608"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310589608/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 116,
    "original_line": 116,
    "side": "RIGHT",
    "in_reply_to_id": 310588340
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310589934",
    "pull_request_review_id": 270747799,
    "id": 310589934,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDU4OTkzNA==",
    "diff_hunk": "@@ -10,12 +10,11 @@\n from test_framework.messages import CTransaction\n from test_framework.util import (\n     assert_equal,\n+    connect_nodes,\n     hash256,\n )\n from io import BytesIO\n \n-ADDRESS = \"tcp://127.0.0.1:28332\"",
    "path": "test/functional/interface_zmq.py",
    "position": 8,
    "original_position": 9,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "be08278a3f7348a346b60421b2c929a86020a4db",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "in commit be08278a3f7348a346b60421b2c929a86020a4db\r\n\r\nWould be nice to give a rationale for this \"refactor\". Otherwise, I'd be NACK on this commit",
    "created_at": "2019-08-05T12:55:53Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310589934",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310589934"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310589934"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310589934/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 14,
    "original_line": 14,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310590062",
    "pull_request_review_id": 270747955,
    "id": 310590062,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDU5MDA2Mg==",
    "diff_hunk": "@@ -43,66 +42,62 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_py3_zmq()\n         self.skip_if_no_bitcoind_zmq()\n \n-    def setup_nodes(self):\n+    def run_test(self):\n         import zmq\n+        self.ctx = zmq.Context()\n+        try:\n+            self.test_basic()\n+            self.test_reorg()\n+        finally:\n+            # Destroy the ZMQ context.\n+            self.log.debug(\"Destroying ZMQ context\")\n+            self.ctx.destroy(linger=None)\n \n-        # Initialize ZMQ context and socket.\n+    def test_basic(self):\n         # All messages are received in the same socket which means\n         # that this test fails if the publishing order changes.\n         # Note that the publishing order is not defined in the documentation and\n         # is subject to change.\n-        self.zmq_context = zmq.Context()\n-        socket = self.zmq_context.socket(zmq.SUB)\n+        import zmq",
    "path": "test/functional/interface_zmq.py",
    "position": 37,
    "original_position": 38,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "e11aa5a6f2683741567f0aaa08d3b198d219913f",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Really? It's then available to other scopes? I'll try.",
    "created_at": "2019-08-05T12:56:09Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310590062",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310590062"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310590062"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310590062/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 60,
    "original_line": 60,
    "side": "RIGHT",
    "in_reply_to_id": 310510854
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310598581",
    "pull_request_review_id": 270758725,
    "id": 310598581,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDU5ODU4MQ==",
    "diff_hunk": "@@ -10,12 +10,11 @@\n from test_framework.messages import CTransaction\n from test_framework.util import (\n     assert_equal,\n+    connect_nodes,\n     hash256,\n )\n from io import BytesIO\n \n-ADDRESS = \"tcp://127.0.0.1:28332\"",
    "path": "test/functional/interface_zmq.py",
    "position": 8,
    "original_position": 9,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "be08278a3f7348a346b60421b2c929a86020a4db",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think this was moved into the specific test because the other test uses a different address, so there's no reason to share this globally",
    "created_at": "2019-08-05T13:16:06Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310598581",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310598581"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310598581"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310598581/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 14,
    "original_line": 14,
    "side": "LEFT",
    "in_reply_to_id": 310589934
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310599647",
    "pull_request_review_id": 270760146,
    "id": 310599647,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDU5OTY0Nw==",
    "diff_hunk": "@@ -10,12 +10,11 @@\n from test_framework.messages import CTransaction\n from test_framework.util import (\n     assert_equal,\n+    connect_nodes,\n     hash256,\n )\n from io import BytesIO\n \n-ADDRESS = \"tcp://127.0.0.1:28332\"",
    "path": "test/functional/interface_zmq.py",
    "position": 8,
    "original_position": 9,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "be08278a3f7348a346b60421b2c929a86020a4db",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, the refactor is to avoid state and constants across test cases.",
    "created_at": "2019-08-05T13:18:36Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310599647",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310599647"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310599647"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310599647/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 14,
    "original_line": 14,
    "side": "LEFT",
    "in_reply_to_id": 310589934
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310611402",
    "pull_request_review_id": 270775448,
    "id": 310611402,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDYxMTQwMg==",
    "diff_hunk": "@@ -10,12 +10,11 @@\n from test_framework.messages import CTransaction\n from test_framework.util import (\n     assert_equal,\n+    connect_nodes,\n     hash256,\n )\n from io import BytesIO\n \n-ADDRESS = \"tcp://127.0.0.1:28332\"",
    "path": "test/functional/interface_zmq.py",
    "position": 8,
    "original_position": 9,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "be08278a3f7348a346b60421b2c929a86020a4db",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Avoiding constants across test cases is not a goal in itself though. If you can share, say, constants for magic values that's good. Just in this specific case\u2026",
    "created_at": "2019-08-05T13:44:34Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310611402",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310611402"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310611402"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310611402/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 14,
    "original_line": 14,
    "side": "LEFT",
    "in_reply_to_id": 310589934
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310614921",
    "pull_request_review_id": 270779970,
    "id": 310614921,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDYxNDkyMQ==",
    "diff_hunk": "@@ -10,12 +10,11 @@\n from test_framework.messages import CTransaction\n from test_framework.util import (\n     assert_equal,\n+    connect_nodes,\n     hash256,\n )\n from io import BytesIO\n \n-ADDRESS = \"tcp://127.0.0.1:28332\"",
    "path": "test/functional/interface_zmq.py",
    "position": 8,
    "original_position": 9,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "be08278a3f7348a346b60421b2c929a86020a4db",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I mean that each test case needs a different address and I thought having a constant for each test is pointless, that's why I moved the value inline.\r\n\r\nBut I'll happily revert, the refactor is just to simplify the next commit - I'll add a rationale.",
    "created_at": "2019-08-05T13:52:00Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310614921",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310614921"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310614921"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310614921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 14,
    "original_line": 14,
    "side": "LEFT",
    "in_reply_to_id": 310589934
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310624361",
    "pull_request_review_id": 270792510,
    "id": 310624361,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDYyNDM2MQ==",
    "diff_hunk": "@@ -10,12 +10,11 @@\n from test_framework.messages import CTransaction\n from test_framework.util import (\n     assert_equal,\n+    connect_nodes,\n     hash256,\n )\n from io import BytesIO\n \n-ADDRESS = \"tcp://127.0.0.1:28332\"",
    "path": "test/functional/interface_zmq.py",
    "position": 8,
    "original_position": 9,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "be08278a3f7348a346b60421b2c929a86020a4db",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Sorry, didn't realize they were different addresses. ACK in that case.",
    "created_at": "2019-08-05T14:11:17Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310624361",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310624361"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310624361"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310624361/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 14,
    "original_line": 14,
    "side": "LEFT",
    "in_reply_to_id": 310589934
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310630984",
    "pull_request_review_id": 270801060,
    "id": 310630984,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDYzMDk4NA==",
    "diff_hunk": "@@ -43,66 +42,62 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_py3_zmq()\n         self.skip_if_no_bitcoind_zmq()\n \n-    def setup_nodes(self):\n+    def run_test(self):\n         import zmq\n+        self.ctx = zmq.Context()\n+        try:\n+            self.test_basic()\n+            self.test_reorg()\n+        finally:\n+            # Destroy the ZMQ context.\n+            self.log.debug(\"Destroying ZMQ context\")\n+            self.ctx.destroy(linger=None)\n \n-        # Initialize ZMQ context and socket.\n+    def test_basic(self):\n         # All messages are received in the same socket which means\n         # that this test fails if the publishing order changes.\n         # Note that the publishing order is not defined in the documentation and\n         # is subject to change.\n-        self.zmq_context = zmq.Context()\n-        socket = self.zmq_context.socket(zmq.SUB)\n+        import zmq",
    "path": "test/functional/interface_zmq.py",
    "position": 37,
    "original_position": 38,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "e11aa5a6f2683741567f0aaa08d3b198d219913f",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "If I remove import `zmq` and keep the one you said I get `NameError: name 'zmq' is not defined`.",
    "created_at": "2019-08-05T14:24:27Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310630984",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310630984"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310630984"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310630984/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 60,
    "original_line": 60,
    "side": "RIGHT",
    "in_reply_to_id": 310510854
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310631448",
    "pull_request_review_id": 270801674,
    "id": 310631448,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDYzMTQ0OA==",
    "diff_hunk": "@@ -10,12 +10,11 @@\n from test_framework.messages import CTransaction\n from test_framework.util import (\n     assert_equal,\n+    connect_nodes,\n     hash256,\n )\n from io import BytesIO\n \n-ADDRESS = \"tcp://127.0.0.1:28332\"",
    "path": "test/functional/interface_zmq.py",
    "position": 8,
    "original_position": 9,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "be08278a3f7348a346b60421b2c929a86020a4db",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Rationale added.",
    "created_at": "2019-08-05T14:25:22Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310631448",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310631448"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310631448"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310631448/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 14,
    "original_line": 14,
    "side": "LEFT",
    "in_reply_to_id": 310589934
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310631614",
    "pull_request_review_id": 270801896,
    "id": 310631614,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDYzMTYxNA==",
    "diff_hunk": "@@ -111,7 +111,9 @@ using other means such as firewalling.\n \n Note that when the block chain tip changes, a reorganisation may occur\n and just the tip will be notified. It is up to the subscriber to\n-retrieve the chain from the last known block to the new tip.\n+retrieve the chain from the last known block to the new tip. Also note\n+that no notification occurs if the tip was in the active chain - this\n+is the case after calling invalidateblock RPC.",
    "path": "doc/zmq.md",
    "position": 7,
    "original_position": 7,
    "commit_id": "abdfc5e89b687f73de4ab97e924c29cc27e71c15",
    "original_commit_id": "e11aa5a6f2683741567f0aaa08d3b198d219913f",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.",
    "created_at": "2019-08-05T14:25:39Z",
    "updated_at": "2019-08-19T00:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310631614",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310631614"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16404#discussion_r310631614"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16404"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310631614/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 116,
    "original_line": 116,
    "side": "RIGHT",
    "in_reply_to_id": 310588340
  }
]