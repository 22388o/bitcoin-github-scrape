luke-jr,2017-05-11T02:48:58Z,"IMO this isn't complete unless incoming transactions to dirty addresses (even before being used!) are hidden as well (or at least flagged in some visible manner).\n\nAlso, shouldn't rescanning be sufficient?",https://github.com/bitcoin/bitcoin/pull/10386#issuecomment-300667926,300667926,
kallewoof,2017-05-11T02:52:48Z,"@luke-jr: Maybe I am misunderstanding you, but incoming transactions are irrelevant. The only thing that matters is when you spend from an address. Each time you do, that address is marked dirty and any UTXOs pointing to it are automatically considered dirty in this implementation. Am I missing a case?\n\n> Also, shouldn't rescanning be sufficient?\n\nOops - yes, rescanning is sufficient. Upda",https://github.com/bitcoin/bitcoin/pull/10386#issuecomment-300668406,300668406,
gmaxwell,2017-05-18T10:09:43Z,"I support the goal, but:  If an address is paid 10 btc then 0.0001 btc  and then a transaction spends the latter, A would be dirty and the 10 BTC are stuck.  That seems sub-optimal.\n\nThe best idea I had to deal with that previously is that whenever you spend from A you make an effort to spend all payments to A or at least all non-dust payments to A.  Then the only time you get dirty funds is w",https://github.com/bitcoin/bitcoin/pull/10386#issuecomment-302361381,302361381,
kallewoof,2017-05-18T13:49:27Z,"You are able to spend by using the allowdirty flag in sendtoaddress, and you can always make a raw transaction yourself. The intention of this is to give expert users a way to plug the gaping security hole that exists in the system -- to make it intuitive and wonderful for the average user is not an aspiration at this point (as mentioned, in particular RPC commands need some work before this could",https://github.com/bitcoin/bitcoin/pull/10386#issuecomment-302409130,302409130,
kallewoof,2017-07-13T02:00:17Z,Rebased (and code became slightly more clean thanks to new coin control being present).,https://github.com/bitcoin/bitcoin/pull/10386#issuecomment-314948266,314948266,
kallewoof,2018-01-10T01:04:18Z,"@promag Thanks for the review! Fixed the default usage issue.\n\nEdit: and the commit message dots.",https://github.com/bitcoin/bitcoin/pull/10386#issuecomment-356465581,356465581,
DrahtBot,2018-07-24T18:52:05Z,<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase,https://github.com/bitcoin/bitcoin/pull/10386#issuecomment-407513937,407513937,
jonasschnelli,2017-05-11T06:18:43Z,Maybe use a constant for the default value here.,https://github.com/bitcoin/bitcoin/pull/10386#discussion_r115911714,115911714,src/wallet/wallet.cpp
jonasschnelli,2017-05-11T06:19:36Z,"Missing default value (something like  `(strprintf(_(""(default: %u)""), DEFAULT_AVOIDREUSE));`).",https://github.com/bitcoin/bitcoin/pull/10386#discussion_r115911800,115911800,src/wallet/wallet.cpp
jonasschnelli,2017-05-11T06:22:26Z,Maybe add a `AssertLockHeld(cs_wallet);` somewhere above `GetDestData`?,https://github.com/bitcoin/bitcoin/pull/10386#discussion_r115912058,115912058,src/wallet/wallet.cpp
jonasschnelli,2017-05-11T06:26:28Z,Why `unavailable`? Someone may just have enabled `-avoidreuse` but hasn't rescanned. Maybe keep a state somewhere if we have scanned with `-avoidreuse` up to the wallets bestblock.,https://github.com/bitcoin/bitcoin/pull/10386#discussion_r115912463,115912463,src/wallet/rpcwallet.cpp
kallewoof,2017-05-11T06:50:29Z,"It returns ""unavailable"" if you do not have the feature turned on. I don't want people to think they can avoid using dirty coins if they are running without the flag. I.e. even by explicitly saying `allowdirty=false`, it will still use dirty coins when `-avoidreuse` is not enabled.\n\nYou are right though, that it will still use dirty coins unless you rescan. Feels like that should be mentioned ",https://github.com/bitcoin/bitcoin/pull/10386#discussion_r115915245,115915245,src/wallet/rpcwallet.cpp
promag,2018-01-09T12:46:44Z,"`bool allow_dirty_addresses`.\n  \n  ",https://github.com/bitcoin/bitcoin/pull/10386#discussion_r160396590,160396590,src/wallet/coincontrol.h
promag,2018-01-09T12:50:16Z,This does not default to `DEFAULT_AVOIDREUSE`.,https://github.com/bitcoin/bitcoin/pull/10386#discussion_r160397286,160397286,src/wallet/rpcwallet.cpp
kallewoof,2018-01-11T07:33:04Z,Missed this comment earlier; fixed.,https://github.com/bitcoin/bitcoin/pull/10386#discussion_r160881132,160881132,src/wallet/coincontrol.h
