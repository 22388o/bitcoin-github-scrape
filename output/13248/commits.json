[
  {
    "sha": "6d5fcad576962e5950641f7e7b113a6ac6f397e5",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ZDVmY2FkNTc2OTYyZTU5NTA2NDFmN2U3YjExM2E2YWM2ZjM5N2U1",
    "commit": {
      "author": {
        "name": "Cristian Mircea Messel",
        "email": "mess110@gmail.com",
        "date": "2018-05-16T20:05:09Z"
      },
      "committer": {
        "name": "Cristian Mircea Messel",
        "email": "mess110@gmail.com",
        "date": "2018-07-24T22:03:26Z"
      },
      "message": "[gui] Make proxy icon from statusbar clickable\n\nClicking on the proxy icon will open settings showing the network tab\nCreate enum Tab in OptionsModel\nUse new connect syntax\nUse lambda for private slots",
      "tree": {
        "sha": "e650b09380890669bbd3623bfbd5c5960ebf84eb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e650b09380890669bbd3623bfbd5c5960ebf84eb"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6d5fcad576962e5950641f7e7b113a6ac6f397e5",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6d5fcad576962e5950641f7e7b113a6ac6f397e5",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6d5fcad576962e5950641f7e7b113a6ac6f397e5",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6d5fcad576962e5950641f7e7b113a6ac6f397e5/comments",
    "author": {
      "login": "mess110",
      "id": 226170,
      "node_id": "MDQ6VXNlcjIyNjE3MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/226170?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mess110",
      "html_url": "https://github.com/mess110",
      "followers_url": "https://api.github.com/users/mess110/followers",
      "following_url": "https://api.github.com/users/mess110/following{/other_user}",
      "gists_url": "https://api.github.com/users/mess110/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mess110/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mess110/subscriptions",
      "organizations_url": "https://api.github.com/users/mess110/orgs",
      "repos_url": "https://api.github.com/users/mess110/repos",
      "events_url": "https://api.github.com/users/mess110/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mess110/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "mess110",
      "id": 226170,
      "node_id": "MDQ6VXNlcjIyNjE3MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/226170?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mess110",
      "html_url": "https://github.com/mess110",
      "followers_url": "https://api.github.com/users/mess110/followers",
      "following_url": "https://api.github.com/users/mess110/following{/other_user}",
      "gists_url": "https://api.github.com/users/mess110/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mess110/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mess110/subscriptions",
      "organizations_url": "https://api.github.com/users/mess110/orgs",
      "repos_url": "https://api.github.com/users/mess110/repos",
      "events_url": "https://api.github.com/users/mess110/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mess110/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7ebd8c6385253bfa30175169a22f93474d8ddfaf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7ebd8c6385253bfa30175169a22f93474d8ddfaf",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7ebd8c6385253bfa30175169a22f93474d8ddfaf"
      }
    ],
    "stats": {
      "total": 64,
      "additions": 46,
      "deletions": 18
    },
    "files": [
      {
        "sha": "a26bacd5dd7082189f71c27bcafe513308476a48",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 19,
        "deletions": 13,
        "changes": 32,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6d5fcad576962e5950641f7e7b113a6ac6f397e5/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6d5fcad576962e5950641f7e7b113a6ac6f397e5/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=6d5fcad576962e5950641f7e7b113a6ac6f397e5",
        "patch": "@@ -146,7 +146,7 @@ BitcoinGUI::BitcoinGUI(interfaces::Node& node, const PlatformStyle *_platformSty\n     unitDisplayControl = new UnitDisplayStatusBarControl(platformStyle);\n     labelWalletEncryptionIcon = new QLabel();\n     labelWalletHDStatusIcon = new QLabel();\n-    labelProxyIcon = new QLabel();\n+    labelProxyIcon = new GUIUtil::ClickableLabel();\n     connectionsControl = new GUIUtil::ClickableLabel();\n     labelBlocksIcon = new GUIUtil::ClickableLabel();\n     if(enableWallet)\n@@ -193,7 +193,12 @@ BitcoinGUI::BitcoinGUI(interfaces::Node& node, const PlatformStyle *_platformSty\n     // Subscribe to notifications from core\n     subscribeToCoreSignals();\n \n-    connect(connectionsControl, SIGNAL(clicked(QPoint)), this, SLOT(toggleNetworkActive()));\n+    connect(connectionsControl, &GUIUtil::ClickableLabel::clicked, [this] {\n+        m_node.setNetworkActive(!m_node.getNetworkActive());\n+    });\n+    connect(labelProxyIcon, &GUIUtil::ClickableLabel::clicked, [this] {\n+        openOptionsDialogWithTab(OptionsDialog::TAB_NETWORK);\n+    });\n \n     modalOverlay = new ModalOverlay(this->centralWidget());\n #ifdef ENABLE_WALLET\n@@ -635,12 +640,7 @@ void BitcoinGUI::trayIconActivated(QSystemTrayIcon::ActivationReason reason)\n \n void BitcoinGUI::optionsClicked()\n {\n-    if(!clientModel || !clientModel->getOptionsModel())\n-        return;\n-\n-    OptionsDialog dlg(this, enableWallet);\n-    dlg.setModel(clientModel->getOptionsModel());\n-    dlg.exec();\n+    openOptionsDialogWithTab(OptionsDialog::TAB_MAIN);\n }\n \n void BitcoinGUI::aboutClicked()\n@@ -764,6 +764,17 @@ void BitcoinGUI::updateHeadersSyncProgressLabel()\n         progressBarLabel->setText(tr(\"Syncing Headers (%1%)...\").arg(QString::number(100.0 / (headersTipHeight+estHeadersLeft)*headersTipHeight, 'f', 1)));\n }\n \n+void BitcoinGUI::openOptionsDialogWithTab(OptionsDialog::Tab tab)\n+{\n+    if (!clientModel || !clientModel->getOptionsModel())\n+        return;\n+\n+    OptionsDialog dlg(this, enableWallet);\n+    dlg.setCurrentTab(tab);\n+    dlg.setModel(clientModel->getOptionsModel());\n+    dlg.exec();\n+}\n+\n void BitcoinGUI::setNumBlocks(int count, const QDateTime& blockDate, double nVerificationProgress, bool header)\n {\n     if (modalOverlay)\n@@ -1231,11 +1242,6 @@ void BitcoinGUI::unsubscribeFromCoreSignals()\n     m_handler_question->disconnect();\n }\n \n-void BitcoinGUI::toggleNetworkActive()\n-{\n-    m_node.setNetworkActive(!m_node.getNetworkActive());\n-}\n-\n UnitDisplayStatusBarControl::UnitDisplayStatusBarControl(const PlatformStyle *platformStyle) :\n     optionsModel(0),\n     menu(0)"
      },
      {
        "sha": "2b4c19ec593ebd3bee9c768f500f02310d7a87c6",
        "filename": "src/qt/bitcoingui.h",
        "status": "modified",
        "additions": 11,
        "deletions": 5,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6d5fcad576962e5950641f7e7b113a6ac6f397e5/src/qt/bitcoingui.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6d5fcad576962e5950641f7e7b113a6ac6f397e5/src/qt/bitcoingui.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.h?ref=6d5fcad576962e5950641f7e7b113a6ac6f397e5",
        "patch": "@@ -9,6 +9,8 @@\n #include <config/bitcoin-config.h>\n #endif\n \n+#include <qt/optionsdialog.h>\n+\n #include <amount.h>\n \n #include <QLabel>\n@@ -45,6 +47,10 @@ class QProgressBar;\n class QProgressDialog;\n QT_END_NAMESPACE\n \n+namespace GUIUtil {\n+class ClickableLabel;\n+}\n+\n /**\n   Bitcoin GUI main class. This class represents the main window of the Bitcoin UI. It communicates with both the client and\n   wallet models to give the user an up-to-date view of the current core state.\n@@ -93,8 +99,8 @@ class BitcoinGUI : public QMainWindow\n     UnitDisplayStatusBarControl* unitDisplayControl = nullptr;\n     QLabel* labelWalletEncryptionIcon = nullptr;\n     QLabel* labelWalletHDStatusIcon = nullptr;\n-    QLabel* labelProxyIcon = nullptr;\n-    QLabel* connectionsControl = nullptr;\n+    GUIUtil::ClickableLabel* labelProxyIcon = nullptr;\n+    GUIUtil::ClickableLabel* connectionsControl = nullptr;\n     QLabel* labelBlocksIcon = nullptr;\n     QLabel* progressBarLabel = nullptr;\n     QProgressBar* progressBar = nullptr;\n@@ -166,6 +172,9 @@ class BitcoinGUI : public QMainWindow\n \n     void updateHeadersSyncProgressLabel();\n \n+    /** Open the OptionsDialog on the specified tab index */\n+    void openOptionsDialogWithTab(OptionsDialog::Tab tab);\n+\n Q_SIGNALS:\n     /** Signal raised when a URI was entered or dragged to the GUI */\n     void receivedURI(const QString &uri);\n@@ -266,9 +275,6 @@ private Q_SLOTS:\n     /** When hideTrayIcon setting is changed in OptionsModel hide or show the icon accordingly. */\n     void setTrayIconVisible(bool);\n \n-    /** Toggle networking */\n-    void toggleNetworkActive();\n-\n     void showModalOverlay();\n };\n "
      },
      {
        "sha": "79f4f7777a2a5ba31e975ad87c0091af2072351b",
        "filename": "src/qt/optionsdialog.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6d5fcad576962e5950641f7e7b113a6ac6f397e5/src/qt/optionsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6d5fcad576962e5950641f7e7b113a6ac6f397e5/src/qt/optionsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsdialog.cpp?ref=6d5fcad576962e5950641f7e7b113a6ac6f397e5",
        "patch": "@@ -170,6 +170,16 @@ void OptionsDialog::setModel(OptionsModel *_model)\n     connect(ui->thirdPartyTxUrls, SIGNAL(textChanged(const QString &)), this, SLOT(showRestartWarning()));\n }\n \n+void OptionsDialog::setCurrentTab(OptionsDialog::Tab tab)\n+{\n+    QWidget *tab_widget = nullptr;\n+    if (tab == OptionsDialog::Tab::TAB_NETWORK) tab_widget = ui->tabNetwork;\n+    if (tab == OptionsDialog::Tab::TAB_MAIN) tab_widget = ui->tabMain;\n+    if (tab_widget && ui->tabWidget->currentWidget() != tab_widget) {\n+        ui->tabWidget->setCurrentWidget(tab_widget);\n+    }\n+}\n+\n void OptionsDialog::setMapper()\n {\n     /* Main */"
      },
      {
        "sha": "482f61658ed872f69f4a75ace80dfaeb0b8948a4",
        "filename": "src/qt/optionsdialog.h",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6d5fcad576962e5950641f7e7b113a6ac6f397e5/src/qt/optionsdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6d5fcad576962e5950641f7e7b113a6ac6f397e5/src/qt/optionsdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsdialog.h?ref=6d5fcad576962e5950641f7e7b113a6ac6f397e5",
        "patch": "@@ -40,8 +40,14 @@ class OptionsDialog : public QDialog\n     explicit OptionsDialog(QWidget *parent, bool enableWallet);\n     ~OptionsDialog();\n \n+    enum Tab {\n+        TAB_MAIN,\n+        TAB_NETWORK,\n+    };\n+\n     void setModel(OptionsModel *model);\n     void setMapper();\n+    void setCurrentTab(OptionsDialog::Tab tab);\n \n private Q_SLOTS:\n     /* set OK button state (enabled / disabled) */"
      }
    ]
  }
]