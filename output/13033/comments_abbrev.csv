Sjors,2018-04-20T09:49:21Z,"If anyone wants to read the old PR and has difficulty loading the page, it helps to use another browser session that's logged out.\n\nOnly comment of mine I'd like to export to this PR is the suggestion to backport ""the migration code that removes txindex without requiring a reindex would be useful for folks who regret having set `txindex=1` on a node with slow hardware.""\n\nTested 3272b17637c",https://github.com/bitcoin/bitcoin/pull/13033#issuecomment-383045954,383045954,
jamesob,2018-04-23T16:03:11Z,"Reverse chron. summary of ACKs from #11857:\n- @TheBlueMatt: utACK https://github.com/bitcoin/bitcoin/commit/523dd763bfe39150e369332e415215d33f2a3ef5\n- @jamesob: Tested ACK https://github.com/bitcoin/bitcoin/commit/ea8be45ace75b649584c163deca3051c4f33aa16\n- @jtimon: Concept ACK\n- @ryanofsky: utACK https://github.com/bitcoin/bitcoin/commit/806b2f1764b6e5a9c7abec887bfa89cd386648d8\n- @Sjors:",https://github.com/bitcoin/bitcoin/pull/13033#issuecomment-383629372,383629372,
sipa,2018-04-26T01:20:35Z,"utACK 9b2704777ceeca48d57ce058ae91674c7764b143\n\nAlso compared with a re-merge of master with 806b2f1 (which had utACK from @ryanofsky and @Sjors), with a re-merge of master with 523dd76 (which had utACK from @TheBlueMatt), and with a re-merge of master with ea8be45 (which had Tested ACK from @jamesob) to find the only differences are:\n* Adding an abstracted-out function `TxIndex::WriteBestBl",https://github.com/bitcoin/bitcoin/pull/13033#issuecomment-384482634,384482634,
jamesob,2018-04-26T04:50:36Z,":tada: nice work, @jimpo.",https://github.com/bitcoin/bitcoin/pull/13033#issuecomment-384512294,384512294,
promag,2018-04-24T14:24:20Z,Rename file? PR changed.,https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183750401,183750401,doc/release-notes-pr11857.md
promag,2018-04-24T14:25:31Z,"nit, 2018? (and 2 more files)",https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183750891,183750891,src/index/txindex.cpp
promag,2018-04-24T14:46:24Z,"In order to avoid locking and lookup here, how about adding the argument `CBlockIndex* pindex` to `TxToJSON`? (I know this is only called from `getrawtransaction`).",https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183759742,183759742,src/rpc/rawtransaction.cpp
promag,2018-04-24T15:07:01Z,"nit, `LookupTransaction`.",https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183768895,183768895,src/index/txindex.h
promag,2018-04-24T15:07:15Z,Drop `raw`?,https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183768997,183768997,src/index/txindex.h
promag,2018-04-24T15:07:29Z,Drop raw? ,https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183769081,183769081,src/index/txindex.h
promag,2018-04-24T15:34:21Z,"I don't understand this case, should exit instead?",https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183779526,183779526,src/index/txindex.cpp
promag,2018-04-24T15:43:40Z,"Instead of nesting, repeat the lock:\n```cpp\nif (!request.params[1].isNull()) {\n    hashBlock = uint256S(request.params[1].get_str());\n    LOCK(cs_main);\n    ...\n} else {\n    LOCK(cs_main);\n    ...\n}\n```",https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183782972,183782972,src/rpc/rawtransaction.cpp
jimpo,2018-04-24T17:56:36Z,I'm pretty against adding more to this PR. Seems like a good follow-on cleanup item.,https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183825895,183825895,src/rpc/rawtransaction.cpp
jimpo,2018-04-24T18:02:17Z,"My thinking is that logging and running without the TxIndex is better than FatalError, but I could see it the other way too. Probably a good idea to add a log line at the very least.",https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183827664,183827664,src/index/txindex.cpp
jimpo,2018-04-24T18:05:02Z,Your wish is my command.,https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183828483,183828483,src/index/txindex.h
promag,2018-04-24T18:17:11Z,Fair.,https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183832216,183832216,src/rpc/rawtransaction.cpp
promag,2018-04-24T20:30:09Z,I'd say running without the desired functionality should exit.,https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183869704,183869704,src/index/txindex.cpp
sipa,2018-04-24T22:06:06Z,"As this is called in the middle of `ThreadSync()`, shouldn't this be writing a locator for `pindex` rather than `chainActive`?",https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183894739,183894739,src/index/txindex.cpp
sipa,2018-04-24T22:20:16Z,"I agree with @promag. If the daemon can't provide the service that is requested, it should fail early. Otherwise you may just complicate debugging.",https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183897451,183897451,src/index/txindex.cpp
jimpo,2018-04-24T23:13:04Z,"Yeah, wow, oops. Good catch.",https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183906474,183906474,src/index/txindex.cpp
jimpo,2018-04-24T23:22:24Z,Changed to FatalError.,https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183907852,183907852,src/index/txindex.cpp
sipa,2018-04-24T23:40:56Z,This function takes an argument now.,https://github.com/bitcoin/bitcoin/pull/13033#discussion_r183910622,183910622,src/index/txindex.cpp
