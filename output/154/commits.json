[
  {
    "sha": "a5843203574aba93a94df09eed9c922ec0f41d78",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphNTg0MzIwMzU3NGFiYTkzYTk0ZGYwOWVlZDljOTIyZWMwZjQxZDc4",
    "commit": {
      "author": {
        "name": "Jeff Garzik",
        "email": "jeff@garzik.org",
        "date": "2011-04-15T07:58:28Z"
      },
      "committer": {
        "name": "Jeff Garzik",
        "email": "jgarzik@pobox.com",
        "date": "2011-04-15T07:58:28Z"
      },
      "message": "Ensure version number->string conversion is consistent",
      "tree": {
        "sha": "f8fb337c49ab85be2fa48eade2f788be34e85a2d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f8fb337c49ab85be2fa48eade2f788be34e85a2d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a5843203574aba93a94df09eed9c922ec0f41d78",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a5843203574aba93a94df09eed9c922ec0f41d78",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a5843203574aba93a94df09eed9c922ec0f41d78",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a5843203574aba93a94df09eed9c922ec0f41d78/comments",
    "author": null,
    "committer": {
      "login": "jgarzik",
      "id": 494411,
      "node_id": "MDQ6VXNlcjQ5NDQxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/494411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jgarzik",
      "html_url": "https://github.com/jgarzik",
      "followers_url": "https://api.github.com/users/jgarzik/followers",
      "following_url": "https://api.github.com/users/jgarzik/following{/other_user}",
      "gists_url": "https://api.github.com/users/jgarzik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jgarzik/subscriptions",
      "organizations_url": "https://api.github.com/users/jgarzik/orgs",
      "repos_url": "https://api.github.com/users/jgarzik/repos",
      "events_url": "https://api.github.com/users/jgarzik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jgarzik/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b37f09aa2e80b17028ad7fe1e87362c0f07c7406",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b37f09aa2e80b17028ad7fe1e87362c0f07c7406",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b37f09aa2e80b17028ad7fe1e87362c0f07c7406"
      }
    ],
    "stats": {
      "total": 44,
      "additions": 33,
      "deletions": 11
    },
    "files": [
      {
        "sha": "906bcbe13717b6aec27a69b96ff82894c337da33",
        "filename": "init.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a5843203574aba93a94df09eed9c922ec0f41d78/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a5843203574aba93a94df09eed9c922ec0f41d78/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/init.cpp?ref=a5843203574aba93a94df09eed9c922ec0f41d78",
        "patch": "@@ -143,7 +143,7 @@ bool AppInit2(int argc, char* argv[])\n     {\n         string beta = VERSION_IS_BETA ? _(\" beta\") : \"\";\n         string strUsage = string() +\n-          _(\"Bitcoin version\") + \" \" + FormatVersion(VERSION) + pszSubVer + beta + \"\\n\\n\" +\n+          _(\"Bitcoin version\") + \" \" + FormatFullVersion() + \"\\n\\n\" +\n           _(\"Usage:\") + \"\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\n\" +\n             \"  bitcoin [options]                   \\t  \" + \"\\n\" +\n             \"  bitcoin [options] <command> [params]\\t  \" + _(\"Send command to -server or bitcoind\\n\") +\n@@ -262,7 +262,7 @@ bool AppInit2(int argc, char* argv[])\n     if (!fDebug && !pszSetDataDir[0])\n         ShrinkDebugFile();\n     printf(\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\");\n-    printf(\"Bitcoin version %s%s%s\\n\", FormatVersion(VERSION).c_str(), pszSubVer, VERSION_IS_BETA ? _(\" beta\") : \"\");\n+    printf(\"Bitcoin version %s\\n\", FormatFullVersion().c_str());\n #ifdef GUI\n     printf(\"OS version %s\\n\", ((string)wxGetOsDescription()).c_str());\n     printf(\"System default language is %d %s\\n\", g_locale.GetSystemLanguage(), ((string)g_locale.GetSysName()).c_str());"
      },
      {
        "sha": "5d4c6529ff8d65469407c7252f1c995486e9978c",
        "filename": "ui.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a5843203574aba93a94df09eed9c922ec0f41d78/ui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a5843203574aba93a94df09eed9c922ec0f41d78/ui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ui.cpp?ref=a5843203574aba93a94df09eed9c922ec0f41d78",
        "patch": "@@ -1814,7 +1814,7 @@ void COptionsDialog::OnButtonApply(wxCommandEvent& event)\n \n CAboutDialog::CAboutDialog(wxWindow* parent) : CAboutDialogBase(parent)\n {\n-    m_staticTextVersion->SetLabel(strprintf(_(\"version %s%s BETA\"), FormatVersion(VERSION).c_str(), pszSubVer));\n+    m_staticTextVersion->SetLabel(strprintf(_(\"version %s\"), FormatFullVersion().c_str()));\n \n     // Change (c) into UTF-8 or ANSI copyright symbol\n     wxString str = m_staticTextMain->GetLabel();"
      },
      {
        "sha": "1c685ba42dd50f88d9f794dc961e0ae009df6eb6",
        "filename": "util.cpp",
        "status": "modified",
        "additions": 29,
        "deletions": 0,
        "changes": 29,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a5843203574aba93a94df09eed9c922ec0f41d78/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a5843203574aba93a94df09eed9c922ec0f41d78/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/util.cpp?ref=a5843203574aba93a94df09eed9c922ec0f41d78",
        "patch": "@@ -855,3 +855,32 @@ void AddTimeData(unsigned int ip, int64 nTime)\n         printf(\"|  nTimeOffset = %+\"PRI64d\"  (%+\"PRI64d\" minutes)\\n\", nTimeOffset, nTimeOffset/60);\n     }\n }\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+string FormatVersion(int nVersion)\n+{\n+    if (nVersion%100 == 0)\n+        return strprintf(\"%d.%d.%d\", nVersion/1000000, (nVersion/10000)%100, (nVersion/100)%100);\n+    else\n+        return strprintf(\"%d.%d.%d.%d\", nVersion/1000000, (nVersion/10000)%100, (nVersion/100)%100, nVersion%100);\n+}\n+\n+string FormatFullVersion()\n+{\n+    string s = FormatVersion(VERSION) + pszSubVer;\n+    if (VERSION_IS_BETA)\n+        s += _(\"-beta\");\n+    return s;\n+}\n+\n+\n+\n+\n+"
      },
      {
        "sha": "d1754c9e5ec03b77eb2a7c93b331a4e9f21d506e",
        "filename": "util.h",
        "status": "modified",
        "additions": 1,
        "deletions": 8,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a5843203574aba93a94df09eed9c922ec0f41d78/util.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a5843203574aba93a94df09eed9c922ec0f41d78/util.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/util.h?ref=a5843203574aba93a94df09eed9c922ec0f41d78",
        "patch": "@@ -184,6 +184,7 @@ uint64 GetRand(uint64 nMax);\n int64 GetTime();\n int64 GetAdjustedTime();\n void AddTimeData(unsigned int ip, int64 nTime);\n+string FormatFullVersion();\n \n \n \n@@ -431,14 +432,6 @@ inline bool GetBoolArg(const string& strArg)\n     return false;\n }\n \n-inline string FormatVersion(int nVersion)\n-{\n-    if (nVersion%100 == 0)\n-        return strprintf(\"%d.%d.%d\", nVersion/1000000, (nVersion/10000)%100, (nVersion/100)%100);\n-    else\n-        return strprintf(\"%d.%d.%d.%d\", nVersion/1000000, (nVersion/10000)%100, (nVersion/100)%100, nVersion%100);\n-}\n-\n \n \n "
      }
    ]
  },
  {
    "sha": "17616eac17979ce0b3e0426e7d66ec893a2cb6c6",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxNzYxNmVhYzE3OTc5Y2UwYjNlMDQyNmU3ZDY2ZWM4OTNhMmNiNmM2",
    "commit": {
      "author": {
        "name": "Jeff Garzik",
        "email": "jeff@garzik.org",
        "date": "2011-04-13T19:16:38Z"
      },
      "committer": {
        "name": "Jeff Garzik",
        "email": "jgarzik@pobox.com",
        "date": "2011-04-15T07:58:42Z"
      },
      "message": "Send/return full bitcoin version string in Server and User-Agent HTTP headers",
      "tree": {
        "sha": "026bd682f6657d2926303abfd885ad3a7a92be19",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/026bd682f6657d2926303abfd885ad3a7a92be19"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/17616eac17979ce0b3e0426e7d66ec893a2cb6c6",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/17616eac17979ce0b3e0426e7d66ec893a2cb6c6",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/17616eac17979ce0b3e0426e7d66ec893a2cb6c6",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/17616eac17979ce0b3e0426e7d66ec893a2cb6c6/comments",
    "author": null,
    "committer": {
      "login": "jgarzik",
      "id": 494411,
      "node_id": "MDQ6VXNlcjQ5NDQxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/494411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jgarzik",
      "html_url": "https://github.com/jgarzik",
      "followers_url": "https://api.github.com/users/jgarzik/followers",
      "following_url": "https://api.github.com/users/jgarzik/following{/other_user}",
      "gists_url": "https://api.github.com/users/jgarzik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jgarzik/subscriptions",
      "organizations_url": "https://api.github.com/users/jgarzik/orgs",
      "repos_url": "https://api.github.com/users/jgarzik/repos",
      "events_url": "https://api.github.com/users/jgarzik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jgarzik/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a5843203574aba93a94df09eed9c922ec0f41d78",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a5843203574aba93a94df09eed9c922ec0f41d78",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a5843203574aba93a94df09eed9c922ec0f41d78"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 5,
      "deletions": 4
    },
    "files": [
      {
        "sha": "257065583416b2ef557be1fb78b07c28451895e5",
        "filename": "rpc.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 4,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/17616eac17979ce0b3e0426e7d66ec893a2cb6c6/rpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/17616eac17979ce0b3e0426e7d66ec893a2cb6c6/rpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/rpc.cpp?ref=17616eac17979ce0b3e0426e7d66ec893a2cb6c6",
        "patch": "@@ -1480,7 +1480,7 @@ string HTTPPost(const string& strMsg, const map<string,string>& mapRequestHeader\n {\n     ostringstream s;\n     s << \"POST / HTTP/1.1\\r\\n\"\n-      << \"User-Agent: json-rpc/1.0\\r\\n\"\n+      << \"User-Agent: bitcoin-json-rpc/\" << FormatFullVersion() << \"\\r\\n\"\n       << \"Host: 127.0.0.1\\r\\n\"\n       << \"Content-Type: application/json\\r\\n\"\n       << \"Content-Length: \" << strMsg.size() << \"\\r\\n\"\n@@ -1507,7 +1507,7 @@ string HTTPReply(int nStatus, const string& strMsg)\n     if (nStatus == 401)\n         return strprintf(\"HTTP/1.0 401 Authorization Required\\r\\n\"\n             \"Date: %s\\r\\n\"\n-            \"Server: bitcoin-json-rpc\\r\\n\"\n+            \"Server: bitcoin-json-rpc/%s\\r\\n\"\n             \"WWW-Authenticate: Basic realm=\\\"jsonrpc\\\"\\r\\n\"\n             \"Content-Type: text/html\\r\\n\"\n             \"Content-Length: 296\\r\\n\"\n@@ -1520,7 +1520,7 @@ string HTTPReply(int nStatus, const string& strMsg)\n             \"<META HTTP-EQUIV='Content-Type' CONTENT='text/html; charset=ISO-8859-1'>\\r\\n\"\n             \"</HEAD>\\r\\n\"\n             \"<BODY><H1>401 Unauthorized.</H1></BODY>\\r\\n\"\n-            \"</HTML>\\r\\n\", rfc1123Time().c_str());\n+            \"</HTML>\\r\\n\", rfc1123Time().c_str(), FormatFullVersion().c_str());\n     string strStatus;\n          if (nStatus == 200) strStatus = \"OK\";\n     else if (nStatus == 400) strStatus = \"Bad Request\";\n@@ -1532,13 +1532,14 @@ string HTTPReply(int nStatus, const string& strMsg)\n             \"Connection: close\\r\\n\"\n             \"Content-Length: %d\\r\\n\"\n             \"Content-Type: application/json\\r\\n\"\n-            \"Server: bitcoin-json-rpc/1.0\\r\\n\"\n+            \"Server: bitcoin-json-rpc/%s\\r\\n\"\n             \"\\r\\n\"\n             \"%s\",\n         nStatus,\n         strStatus.c_str(),\n         rfc1123Time().c_str(),\n         strMsg.size(),\n+        FormatFullVersion().c_str(),\n         strMsg.c_str());\n }\n "
      }
    ]
  }
]