[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/746854240",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20676#issuecomment-746854240",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20676",
    "id": 746854240,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0Njg1NDI0MA==",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-16T19:12:31Z",
    "updated_at": "2020-12-16T19:12:31Z",
    "author_association": "MEMBER",
    "body": "This kind of refactor was requested in https://github.com/bitcoin/bitcoin/pull/19858#issuecomment-685440307.  While I think it's helpful for `net_processing` code to be using a more meaningful function name rather than check for nullptr in all these places, it's not entirely clear to me whether it would be best to have the helper function be checking the connection type, or just checking whether `m_tx_relay` is nullptr or not.\r\n\r\nI opted for the latter approach, because right now (nearly) all those nullptr checks are done before dereferencing `m_tx_relay`, so I didn't like the idea of getting rid of the explicit check that the object isn't null.  But if others think that this is not the best way to clean this up, I'm open to suggestions.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/746854240/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/746908028",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20676#issuecomment-746908028",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20676",
    "id": 746908028,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NjkwODAyOA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-16T19:47:52Z",
    "updated_at": "2020-12-16T19:47:52Z",
    "author_association": "MEMBER",
    "body": "Code review ACK c80de7834ad59fba93548024fc96f541f02b60f7, this does not change behavior",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/746908028/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747053900",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20676#issuecomment-747053900",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20676",
    "id": 747053900,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzA1MzkwMA==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-16T21:31:58Z",
    "updated_at": "2020-12-16T21:31:58Z",
    "author_association": "MEMBER",
    "body": "Concept ACK. This seems much clearer to me.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747053900/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747055543",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20676#issuecomment-747055543",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20676",
    "id": 747055543,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzA1NTU0Mw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-16T21:35:38Z",
    "updated_at": "2020-12-16T21:35:38Z",
    "author_association": "MEMBER",
    "body": "utACK c80de7834ad59fba93548024fc96f541f02b60f7",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747055543/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747071735",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20676#issuecomment-747071735",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20676",
    "id": 747071735,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzA3MTczNQ==",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-16T22:11:45Z",
    "updated_at": "2020-12-16T22:11:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "This idea was discussed in the original blocks only PR, https://github.com/bitcoin/bitcoin/pull/15759/files#r310366329 -- the reasoning was the explicit `== nullptr` checks makes it clear that the following dereferencing is safe. That still seems like it makes sense to me, so I'm -0.5 (or however we're writing weak-nack) on this.\r\n\r\nI tend to think `if (m_tx_relay != nullptr && pfrom.ShouldThisPeerGetThisTx(tx))` would be a better way to separate the concepts -- makes it clear dereferencing is safe, and the function only needs to deal with the policy decision being made, node code safety. If we know relay is never warranted for this peer, setting `m_tx_relay = nullptr` at `VERACK` not just initial connection might be an option (in which case writing `if (m_tx_relay != nullptr) { Assume(pfrom.ThisPeerShouldGetTheseTxs()); ... }` might make sense)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747071735/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747077499",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20676#issuecomment-747077499",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20676",
    "id": 747077499,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzA3NzQ5OQ==",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-16T22:25:46Z",
    "updated_at": "2020-12-16T22:25:46Z",
    "author_association": "MEMBER",
    "body": "> This idea was discussed in the original blocks only PR, https://github.com/bitcoin/bitcoin/pull/15759/files#r310366329 -- \r\nthe reasoning was the explicit `== nullptr` checks makes it clear that the following dereferencing is safe.\r\n\r\n@ajtowns Thanks for the reminder of that discussion, I had forgotten about it!  I guess my uneasiness about removing `nullptr` checks altogether has remained consistent, though I guess I've moved a bit on thinking that it's also hard to reason about what exactly the `nullptr` check means.\r\n\r\nIt occurs to me that the problem may be a bigger issue around the separation between `net` and `net_processing`.  I think in many ways we want the net_processing layer concerned only about connection types and high level behaviors and not implementation details about the data structures that implement the behaviors.  But in fact we dive into the internals of `CNode` all the time in net_processing (eg grabbing locks and accessing data members directly), which makes attempts to use higher-level abstraction seem incompatible with the rest of the code -- if there's no way around knowing the implementation details, then what is the point of introducing some abstraction?\r\n\r\n> I tend to think `if (m_tx_relay != nullptr && pfrom.ShouldThisPeerGetThisTx(tx))` would be a better way to separate the concepts -- makes it clear dereferencing is safe, and the function only needs to deal with the policy decision being made, node code safety. If we know relay is never warranted for this peer, setting `m_tx_relay = nullptr` at `VERACK` not just initial connection might be an option (in which case writing `if (m_tx_relay != nullptr) { Assume(pfrom.ThisPeerShouldGetTheseTxs()); ... }` might make sense)\r\n\r\nI would also be okay with that an approach that checks for nullptr explicitly and also does the `Assume()` thing on some other function that is checking the connection type (or vice versa) -- do other reviewers have concerns with @ajtowns' suggestion?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747077499/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747083947",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20676#issuecomment-747083947",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20676",
    "id": 747083947,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzA4Mzk0Nw==",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-16T22:40:43Z",
    "updated_at": "2020-12-16T22:40:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "> But in fact we dive into the internals of `CNode` all the time in net_processing (eg grabbing locks and accessing data members directly),\r\n\r\nMaybe that will change as @jnewbery's net/net_processing separation stuff (#19398) progresses? It proposes moving all of `m_tx_relay` out of net/CNode into net_processing.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747083947/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747149653",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20676#issuecomment-747149653",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20676",
    "id": 747149653,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzE0OTY1Mw==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-17T01:44:22Z",
    "updated_at": "2020-12-17T01:44:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20083 (p2p: Disconnect, not discourage, misbehaving NODE_BLOOM peers by MarcoFalke)\n* #18819 (net: Replace cs_feeFilter with simple std::atomic by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747149653/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747293975",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20676#issuecomment-747293975",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20676",
    "id": 747293975,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzI5Mzk3NQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-17T08:35:02Z",
    "updated_at": "2020-12-17T17:48:59Z",
    "author_association": "MEMBER",
    "body": "Code review ACK c80de7834ad59fba93548024fc96f541f02b60f7\r\n\r\n> Maybe that will change as @jnewbery's net/net_processing separation stuff (#19398) progresses? It proposes moving all of m_tx_relay out of net/CNode into net_processing.\r\n\r\nThat's the hope. Eventually there should be much less reaching across the net/net_processing divide. net_processing eventually will need to access almost nothing from CNode.\r\n\r\nIt might make sense to also have a `const ConnectionType m_conn_type` as a member of `Peer` (similar to how we have `address` and `m_is_inbound` in `CNodeState`). All of these `RelayAddrsWithConn`, `RelayTxsWithConn`, etc functions are net_processing concerns, so it doesn't make sense that they exist in net.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747293975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747532844",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20676#issuecomment-747532844",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20676",
    "id": 747532844,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzUzMjg0NA==",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-17T16:02:11Z",
    "updated_at": "2020-12-17T16:02:11Z",
    "author_association": "MEMBER",
    "body": "It occurs to me that moving `m_tx_relay` to net_processing might change the way we think about the abstraction.  I'm okay with closing this PR and deferring how we think about the relationship between the two until @jnewbery's work to move it lands...  It does seem like this PR may be near-sighted in thinking about how `net_processing` should understand the peer connection behavior, if there are bigger changes in the works?\r\n\r\nI could also just add an assert that `m_tx_relay != nullptr` after invoking RelayTxsWithConn(), wherever we need it?  That would be redundant (as what we're doing is first checking whether it's nullptr in that function, then asserting right afterward), but it would document the understanding of how this works inside `net_processing`, which may be what we're aiming for.  @ajtowns What do you think?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747532844/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747599415",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20676#issuecomment-747599415",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20676",
    "id": 747599415,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzU5OTQxNQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-17T17:55:16Z",
    "updated_at": "2020-12-17T17:55:16Z",
    "author_association": "MEMBER",
    "body": "I think that this is an improvement, but also agree that the same lines will need to be changed again when the tx inventory data is moved into net_processing, so it might make sense to just leave this for now.\r\n\r\nThe next PR in the net/net_processing split series is #19829 if you'd like to help with that work.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747599415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747602007",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20676#issuecomment-747602007",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20676",
    "id": 747602007,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzYwMjAwNw==",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-17T17:59:52Z",
    "updated_at": "2020-12-17T17:59:52Z",
    "author_association": "MEMBER",
    "body": "@jnewbery Sounds good to me, will close.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747602007/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]