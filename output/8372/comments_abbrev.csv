sdaftuar,2016-08-05T17:41:32Z,"Interesting observation!  Thanks for working on this -- I've wondered if we had this type of bug on a few occasions but was never able to pin it down.  And I do think you're on to something, as your PR has made clear at least one situation where I can see that we might end up with extra references to the same node: I believe it can be reproduced by eg using `-connect=<ip>` and `-connect=<hostname>",https://github.com/bitcoin/bitcoin/pull/8372#issuecomment-237914913,237914913,
theuni,2016-08-05T20:59:51Z,"@sdaftuar I believe #8085 contains some of those locking fixes, though more are needed. I'll be rebasing that and begging for review after #8128 goes in. As a follow-up (or maybe it's in that branch?) CNodes move to shared_ptrs (which never leave CConnman iirc), so that we don't have to worry about manual refcounting.\n\nNot opposed to fixing this up as-is, but yes, this logic is set for removal.\",https://github.com/bitcoin/bitcoin/pull/8372#issuecomment-237964825,237964825,
