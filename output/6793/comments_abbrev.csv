gmaxwell,2015-10-09T18:01:56Z,ACK both bumping and value (though I'm not dead committed on a particular value). This is what we release-note recommended on 0.11. \n,https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-146948906,146948906,
btcdrak,2015-10-09T18:02:30Z,Agreed.\n,https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-146949050,146949050,
paveljanik,2015-10-09T18:05:07Z,ACK for 0.10 and 0.11. I hope this is not needed for 0.12...\n,https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-146949692,146949692,
morcos,2015-10-09T18:42:06Z,"ACK.  I think I prefer a lower number (2000 or 2500), but do not have objection to 5000 if thats more popular.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-146957836,146957836,
TheBlueMatt,2015-10-09T19:05:26Z,"I dont have any specific comments on the number, and generally agree for 0.10 and 0.11, but NACK for 0.12. #6722 should change what this is used for, so unless you want it in 0.12 to meet backport policy and then revert it in #6722, NACK.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-146962718,146962718,
morcos,2015-10-09T19:16:44Z,"@TheBlueMatt ahh, that was part of my objection to the higher number.  we might want higher than 1000 as just a relay fee anyway though....  ugh.. we need some better way than just hardcoding it.  \n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-146964981,146964981,
gmaxwell,2015-10-09T19:28:21Z,@TheBlueMatt Why would you care about carrying this in git master until the dynamic stuff is merged?\n\nDynamic PR when rebased on this can simply set it back.\n,https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-146967534,146967534,
TheBlueMatt,2015-10-09T19:29:56Z,"Oops, maybe I wasnt clear - I have no objections to carrying it in master until #6722 is merged, just noting that I would push to revert it in #6722 (and if there was disagreement there, I would have a problem).\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-146967911,146967911,
laanwj,2015-10-09T19:36:36Z,I'd hope to get rid of the entire hardcoded value before 0.12\n,https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-146969142,146969142,
TheBlueMatt,2015-10-09T19:38:10Z,"@laanwj #6722 changes its definition, mostly. I think its doable to nearly get rid of its usage as a default min-relay fee, but we should discuss that on #6722.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-146969420,146969420,
laanwj,2015-10-09T19:44:33Z,"@TheBlueMatt Right, if you want a different meaning for it in 0.12, probably best to rename it too. But yes, discussion belongs there.\n\n@morcos No problem changing it to 2500.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-146970516,146970516,
morcos,2015-10-09T20:32:17Z,"@laanwj Let's stick with 5000.  To be slightly pedantic, you could view raising it to 5000 so mempools don't blow up as changing the meaning of it.  1000 is perfectly sufficient as a **relay fee** for now.  Almost every transaction that has ever been transmitted with a fee over 1000 has been mined, so that implies it's almost too HIGH of a fee as a min relay fee.  But I like raising it to 5000 and",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-146979695,146979695,
paveljanik,2015-10-10T06:03:10Z,"```\ntest/transaction_tests.cpp(349): error in ""test_IsStandard"": check IsStandardTx(t, reason) failed\n\n    t.vout[0].nValue = 601; // not dust\n    BOOST_CHECK(IsStandardTx(t, reason));\n```\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147042707,147042707,
NicolasDorier,2015-10-10T12:15:14Z,"Does it means this change will make every (except OP_RETURN) 600 satoshi TxOut Dust ?\n\nIf this is the case, this is a very big change for every colored coin protocols, since every colored coin wallets are using 600 satoshi output for carrying the color. (at least OA)\nIs it possible to decouple the minrelaytxfee from the dust definition ?\n\nI understand this is not your priority, but the goal o",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147084218,147084218,
laanwj,2015-10-10T12:29:58Z,"@NicolasDorier No one really _likes_ doing this, but as nodes are crashing we have to act in some way, and this is the only knob that can be quickly adjusted that brings down the transaction spam. It is meant to be temporary.\n\nDecoupling dust from minRelayTxFee would be possible (what would the other consequences of this be?) but we really want to get a release out soon (due to the upnp vulnerab",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147085142,147085142,
dexX7,2015-10-10T13:01:29Z,"Yes @NicolasDorier, and this also affects other meta-layer protocols such as Counterparty, Omni, ChanceCoin, NewbieCoin, ....\n\nHowever, I believe this change is mostly intended to avoid mempool bloat, and as long as there are still a few nodes (and miners!) accepting the transactions, it hopefully has no ""blackout"" effect.\n\nI acknowledge the need for a solution like this, at least temporarily,",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147087560,147087560,
laanwj,2015-10-10T13:09:59Z,"It works because it makes spamming your mempool full 5 times as expensive. This answers the ""why is it better than 1000"" part. In practice quite a few people have been using this value and it has apparently avoided their mempool sizes from getting out of hand.\n\nIt may be too _high_ though - more then is needed to prevent the current floods, as said, I'm not wedded to the specific value.\n\nAgain",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147087943,147087943,
dexX7,2015-10-10T13:28:53Z,"> It may be too high though - more then is needed to prevent the current floods, as said, I'm not wedded to the specific value.\n\nGiven that these protocols use very-close-to-dust values, from that perspective it probably doesn't matter, whether it's 1500 or 5000, so 5000 seems to be as good (or bad) as any other value above the old default.\n\n> Again, if you have a better solution quickly, that",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147089633,147089633,
dexX7,2015-10-10T13:32:47Z,"Just in case, if anyone is wondering, what the new dust thresholds with `-minrelayfee=0.00005` are:\n- Pay-to-pubkey-hash (34 byte): 0.00002730 BTC\n- Multisig, two compressed public keys (80 byte): 0.00003420 BTC\n- Multisig, one compressed, one uncompressed public key (112 byte): 0.00003900 BTC\n- Multisig, three compressed public keys (114 byte): 0.00003930 BTC\n- Multisig, one uncompressed, tw",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147089803,147089803,
ptschip,2015-10-10T15:58:38Z,"I just put out PR #6803 if anyone wants to take a look.  It\nautomatically adjust minrelaytxfee and limitfreerelay up or down\ndepending on the mempool height. \n\nOn 10/10/2015 5:30 AM, Wladimir J. van der Laan wrote:\n\n> @NicolasDorier https://github.com/NicolasDorier No one really\n> /likes/ doing this, but as nodes are crashing we have to act in some\n> way, and this is the only knob that can",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147101829,147101829,
NicolasDorier,2015-10-11T01:25:03Z,"@laanwj I understand the need for this. What I am saying is that every times you do a change on dust it requires enormous amount of change/build/update for all meta protocol. This is worse for us than a hard fork, because for the hardfork you only need to update the node.\n\nOne alternative is to hardcode the limit of ""Dust"" to what it was before, I think you are raising this limit temporary anywa",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147144117,147144117,
luke-jr,2015-10-11T01:32:54Z,"Prefer 0.0001 BTC for the value, but utACK.\n\n@NicolasDorier This is just node policy. Nothing should ever be hard-coded to assume anything. I'm also unaware of any BIP (even draft) that does. For both of these reasons individually, there is no reason to consider it a concern.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147144288,147144288,
NicolasDorier,2015-10-11T01:35:19Z,"@luke-jr, let me know a solution about how to fix all those protocols which does not care about nValue so that we don't get hit by a the nuke collaterally next time.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147144354,147144354,
luke-jr,2015-10-11T01:42:01Z,"@NicolasDorier What protocols? Like I said, I am not aware of any BIP draft that cares about this.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147144494,147144494,
NicolasDorier,2015-10-11T01:43:16Z," Counterparty, Omni, ChanceCoin, NewbieCoin, OpenAsset, EPOBC, Colu, in fact anything that does not care about ""nValue"".\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147144525,147144525,
luke-jr,2015-10-11T01:48:22Z,"Where are the BIP drafts for those? If they don't have one, I assume they're pre-alpha and can change on a dime drop. If they don't care about nValue, this change shouldn't affect them anyway.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147144639,147144639,
NicolasDorier,2015-10-11T01:54:52Z,"It is. They use 600 satoshi for every TxOut. When v0.12 will get out then they'll need to go to the whole rebuild/redeploy process, which is way more painful than a hardfork.\n\nWell, I don't think I'll make you change your mind anyway, we'll take the blow, not knowing when it will happens again.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147144803,147144803,
luke-jr,2015-10-11T02:02:20Z,"BTW, I think you're very much underestimating the effect of hardforks... generally, they require modifying every piece of software in the ecosystem.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147144968,147144968,
NicolasDorier,2015-10-11T02:10:13Z,"they do not, most likely people depends on either lib consensus or bitcoin core to do validation for them. So redeploying Bitcoin core (or using new dll) is generally enough.\n\nI'm just a bit down to be hit collaterally by a good idea to prevent spam. Especially when raising IsDust does not prevent spam at all. It is like we get hit, without benefit for any party, neither for spammers, you, us, o",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147145160,147145160,
NicolasDorier,2015-10-11T02:16:06Z,"btw, does someone has any link on the rational of the Dust limit ? if we take the blow now, I'd like at least find a solution and maybe submit a BIP for next time.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147146486,147146486,
dexX7,2015-10-11T02:16:13Z,"@NicolasDorier: actually the setting for [counterparty-lib](https://github.com/CounterpartyXCP/counterparty-lib/blob/f566dd043452c025c4c69323ac286e0088bdd5f0/counterpartylib/lib/config.py#L77-L84) can be set via a config file, and [Omni Core](https://github.com/OmniLayer/omnicore/blob/99cb16fb253b063f256d649133d65110cf8f50c7/src/omnicore/script.cpp#L18-L40) calculates the values on the fly, based ",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147146493,147146493,
NicolasDorier,2015-10-11T02:28:39Z,"I think I will index the Dust amount based on the fees from now on, should be more solid in the future. I am only assuming than minrelayfees are lowing than mintxfees which seems reasonable.\n\nIt should not require communication of new default value.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147146778,147146778,
dexX7,2015-10-11T02:44:11Z,"@NicolasDorier: I'm not sure if it helps, but if OA/colorcore uses Bitcoin Core as backend, then you may just use the relay fee directly as basis for the dust threshold calculation. It's exposed [via RPC](https://github.com/bitcoin/bitcoin/blob/9623e934732ba0f0a5176cd3d993ebcda327b413/src/rpcnet.cpp#L429) (`""getnetworkinfo""`).\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147148870,147148870,
jgarzik,2015-10-11T02:52:14Z,"ACK 2500 or 5000 as emergency measure, as long as it is clearly release-noted + mentioned on social media [pending better mempool management].\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147149252,147149252,
btcdrak,2015-10-11T03:49:49Z,ACK on 5000\n,https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147151727,147151727,
CodeShark,2015-10-11T03:57:08Z,ACK pending better mempool management\n,https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147152089,147152089,
laanwj,2015-10-11T08:31:55Z,My nodes are shutting down due to outrageous mempool memory usage. Can't be the only one. We need to merge this deploy new versions now.\n,https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147172206,147172206,
dexX7,2015-10-11T11:41:34Z,"@NicolasDorier: as an additional note: the next step from here are likely floating relay fees (see #6722 for example), which is far worse in my opinion (from the perspective of using it to find a dust threshold), because it seems this basically breaks the assumption that there is a quasi static relay fee on a larger (network) scale. It would probably be best to either use a very high value, which ",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147185581,147185581,
NicolasDorier,2015-10-11T14:13:25Z,"@dexX7 I want user on NBitcoin to make valid transaction easily. They can already set the Dust amount by themselves, but most use the default value. I need to find a default policy that is good enough and solid without dependency. \n\nI think I'll base the dust value on the feerate which should evolve nicely, even with the floating relay fee.\nI'll work on that now.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147200002,147200002,
actioncrypto,2015-10-12T01:49:04Z,"For the record, I've had multiple nodes running 24/7 throughout the spam attacks: one with minrelayfee at 0.00003 and a few others at 0.00002 - all my nodes are running fine and seem to be unaffected. 41,289,086 and 38,068,607 mempool size for example - So you don't need it at 0.00005 IMHO. ~40mb mempool is pretty reasonable...\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147272736,147272736,
taariq,2015-10-12T02:16:28Z,"Many thanks @dexX7 for the analysis on both costs and impact. This was extremely helpful to understand the impact on Counterparty type transactions. Also, thanks as well for the quick notes on updating the Counterparty-lib settings for this change.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147274150,147274150,
bharathrao,2015-10-12T05:26:06Z,"I personally have no complaints about 5000 or even 1000 satoshi. However, I think this is a band-aid and does not address the real problem, which is that mempools will keep getting filled by tx using the lowest allowed fees.\n\nThe right solution for this is to have near-dust transactions as ""Fill or Kill"". That is, if a transaction is not confirmed within n blocks (say 5), it is dropped from the ",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147294353,147294353,
voisine,2015-10-12T06:00:22Z,"Changing network relay rules suddenly is an drastic measure. (although not necessarily unwarranted in drastic times) Many wallets will be forced to rush out updates, and even more users will find their software broken until they update. Getting 100% of users to update or reconfigure their software is a long process. Thankfully we have an api hook in place for breadwallet to bump fees remotely (wit",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147297924,147297924,
luke-jr,2015-10-12T06:29:31Z,"@voisine There are no relay _rules_, just relay _policy_, which has always been decided on a per-node basis by the node operator and should never be relied on to be consistent.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147299980,147299980,
rubensayshi,2015-10-12T06:54:07Z,but as a wallet operator if you offer users the option to choose an (calculated) 'low priority' fee then knowing that a big part of the network runs a certain default means you'll get it relayed. \n\n0.00005 will be higher then `bitcoin-cli estimatefee 3` for example... \n\nutACK but I also agree that hardcoding dust or otherwise documenting the reasoning behind it would be very helpful for the me,https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147303186,147303186,
voisine,2015-10-12T07:30:52Z,"@luke-jr, indeed, it's up to each node operator to decide if they want to follow standard policy and help, or to diverge and hinder the functioning of p2p gossip network. For the network to be useful for wallets, nodes need to follow a predictable relay policy that wallets can adhere to. Otherwise they'll need to find some alternate method of getting transactions to miners.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147311455,147311455,
mikehearn,2015-10-12T16:06:54Z,"This will break many wallets that do not fetch fee data from a central server, as BreadWallet does.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147447671,147447671,
bharathrao,2015-10-12T16:29:39Z,"Even if we raise the fee, with enough volume, mempools will be full of Tx that are not confirmed in a block. These transactions will languish in mempools indefinitely and the bitcoins in them are in a state of limbo for days. The solution can't be to keep raising the fee until we are more expensive than paypal.\n\nBitcoins hanging in mempools for indefinite duration is bad for meta-protocols, micr",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147453058,147453058,
dthorpe,2015-10-12T19:37:45Z,"Does the relay penalty on transactions containing a low value (""dust"") output apply to transactions that pay a minimum or better network fee?\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147500047,147500047,
dexX7,2015-10-12T19:59:41Z,"@dthorpe:\n\n> Does the relay penalty on transactions containing a low value (""dust"") output apply to transactions that pay a minimum or better network fee?\n\nYes. A node, which considers an output as dust, won't relay the transaction, even with high transaction fees.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147504135,147504135,
dthorpe,2015-10-12T21:02:39Z,"@dexX7 \n\n> Yes. A node, which considers an output as dust, won't relay the transaction, even with high transaction fees.\n\nThanks for the info.  \n\nDoesn't that seem a little overbearing?  If a transaction is paying sufficient network fee, it seems to me it should be exempt from dust spam filtering, because the network fee puts a real cost on spammy transactions.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147521616,147521616,
luke-jr,2015-10-12T21:36:31Z,"@dthorpe Just because it has a real cost doesn't mean it should be relayed or mined. Also remember the standard fees today do _not_ nearly cover the cost of transactions, nor are they paid to the people affected by them.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147528759,147528759,
dexX7,2015-10-12T21:37:14Z,"@dthorpe: actually it's pretty interesting in my opinion.\n\nThe general idea behind ""dust"" is that no output should be ""uneconomic"", i.e.: it should not cost more to spend an output than the output is worth (if this is really satisfied on a larger scale is a different question, but anyway..).\n\nConsider for example a transaction with high fee, but outputs with only 1 satoshi. This would be fine,",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147528893,147528893,
NicolasDorier,2015-10-13T02:53:02Z,"@dexX7  So the main rational with the dust is only to prevent utxo bloat ?\n\nSaying that dust is uneconomic to spend is untrue with colored coin protocols.\n\nIt seems there is massive complexity in preparation for a floating minRelayTxFee, when really I doubt it gives any advantage, except a potential UTXO bloat. But UTXO size is negligible compared to the blocks.\n\nBut let's admit : ""Saying th",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147580551,147580551,
dthorpe,2015-10-13T07:07:21Z,"@luke-jr \n\n> Just because it has a real cost doesn't mean it should be relayed or mined. \n\nTrue, there are always other factors in play. I was referring to the network fee as an unrecoverable real cost as a spam deterrent. \n\n> Also remember the standard fees today do not nearly cover the cost of transactions, nor are they paid to the people affected by them.  \n\nI'm well aware of that. That",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147625659,147625659,
dexX7,2015-10-13T10:17:23Z,"@NicolasDorier:\n\n> So the main rational with the dust is only to prevent utxo bloat ?\n\nThat's my understanding, yes, and to some degree that coins are not ""lost"" (e.g. consider what might happen, if there were millions of uneconomic outputs, hehe). There was quite a bit of discussion, which may be interesting to read: #2351, #2577 (also discusses colored coins)\n\n> But UTXO size is negligible",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147673041,147673041,
NicolasDorier,2015-10-13T18:30:43Z,"@dexX7 \n\n> Let's say there were a network wide default static transaction fees of 0.00001 BTC, and you built a wallet, which always sends transactions with 0.00001 BTC transaction fees. At some point the default fees are raised to a static value of 0.00005 BTC. Or let's say, at some point the default fees are no longer static, but instead floating. Wouldn'd you agree that a wallet that assumes t",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147805016,147805016,
sipa,2015-10-13T18:34:11Z,"The dust rule is about _creating_ uneconomical outputs, not about spending\nthem.\n",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147805859,147805859,
sipa,2015-10-13T18:49:22Z,"In the long term it is unmaintainable that every node has every block\nreadily available, and thankfully also unnecessary. Pruning right now is\nblack or white (have nothing or have everything available for the network),\nbut that is not expectes to remain the case. There is much more demand on\nthe network for recent blocks that for historical ones, so it makes sense\nthat far more nodes can offe",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147810865,147810865,
dexX7,2015-10-13T19:12:43Z,"> If I understand what you mean, you are saying it makes sense to block the spending of an uneconomical output.\n\nSorry, no, this was probably a bit unclear: spending should not be blocked, but to determine whether an output is uneconomic or not, the context when spending the output comes into play. It's given that only a) historical data can be used, and b) the data that is available when sendin",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147818685,147818685,
NicolasDorier,2015-10-14T03:52:53Z,"Ok, thanks sipa I see where pruning is going now, it convinces me that dust is useful. I was reflecting on the current state which is black or white.\n\n@dexX7  You are already using indirectly historical data b) if you use only the transaction fee as base for dust definition, because nowadays always, the transaction fee is already taking into account historical data.\nAnd you are also sure that i",https://github.com/bitcoin/bitcoin/pull/6793#issuecomment-147927126,147927126,
