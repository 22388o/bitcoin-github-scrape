[
  {
    "sha": "faccf8b1e1af293dfe9158d732718e7798a2fd89",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWNjZjhiMWUxYWYyOTNkZmU5MTU4ZDczMjcxOGU3Nzk4YTJmZDg5",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-12-26T12:00:48Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-12-26T16:32:14Z"
      },
      "message": "refactor: Enable -Wswitch for FeeEstimateHorizon",
      "tree": {
        "sha": "7b76af65e3140f7881acb5756512a9c409a041d4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7b76af65e3140f7881acb5756512a9c409a041d4"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faccf8b1e1af293dfe9158d732718e7798a2fd89",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgQgQv8DydXvJdJZGSGUAUxBEg1muuqzvtExmrEKl6sOJJdGlzfHyupNO+KORbF\n7PN3+gEDQQsKq0XTpdSznoewIfZHdxnEFeEoOdmn8s8CPClFBPIerpneV3sl9yl4\nfygM28NCLq/xQiICSgqPL1oA6iVctOPLZ3cfZ41g3URH+kDYmr9zpugow90onZv7\nZl6xdtVW2q6aABEz7UVlC4ZIHIOX84WoGtK4Vhehf8esvHb4cp4lD1rcZ3lHyjU2\nz+1d6YfWXnjo+l77A6A4NLy03zb/SGNHSkj8PVnZ3x6ay6oFOux+3HpnfP35j4eg\nmtrEliap6wo8YiM+OquIwIdEfbjekY+d9KBkk1V3Wom26xiLij8AjrwcQy1m0Eb0\ncuhxlf+hmfpUj2IzIaxgfq5/YBfUtREUjkqLX7zicbqXv6go/TYb5zfjbVuGMB9t\neaEP1C9eWHmiKbngoTYbwiDVJFdxBQienI0v2tTBlCj06Qv4Tdv3n1gGl2a6PFBF\n8mNXOuf/\n=Xpiz\n-----END PGP SIGNATURE-----",
        "payload": "tree 7b76af65e3140f7881acb5756512a9c409a041d4\nparent 43fc7a569c135a9f24db23e6fcbb30b839859094\nauthor MarcoFalke <falke.marco@gmail.com> 1608984048 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1609000334 +0100\n\nrefactor: Enable -Wswitch for FeeEstimateHorizon\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faccf8b1e1af293dfe9158d732718e7798a2fd89",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/faccf8b1e1af293dfe9158d732718e7798a2fd89",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faccf8b1e1af293dfe9158d732718e7798a2fd89/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "43fc7a569c135a9f24db23e6fcbb30b839859094",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/43fc7a569c135a9f24db23e6fcbb30b839859094",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/43fc7a569c135a9f24db23e6fcbb30b839859094"
      }
    ],
    "stats": {
      "total": 35,
      "additions": 14,
      "deletions": 21
    },
    "files": [
      {
        "sha": "462f231eba4a5df9dc21b8a6029eacabe8c3f86b",
        "filename": "src/policy/fees.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 21,
        "changes": 35,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/faccf8b1e1af293dfe9158d732718e7798a2fd89/src/policy/fees.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/faccf8b1e1af293dfe9158d732718e7798a2fd89/src/policy/fees.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/policy/fees.cpp?ref=faccf8b1e1af293dfe9158d732718e7798a2fd89",
        "patch": "@@ -12,21 +12,18 @@\n #include <txmempool.h>\n #include <util/system.h>\n \n-static const char* FEE_ESTIMATES_FILENAME=\"fee_estimates.dat\";\n+static const char* FEE_ESTIMATES_FILENAME = \"fee_estimates.dat\";\n \n static constexpr double INF_FEERATE = 1e99;\n \n-std::string StringForFeeEstimateHorizon(FeeEstimateHorizon horizon) {\n-    static const std::map<FeeEstimateHorizon, std::string> horizon_strings = {\n-        {FeeEstimateHorizon::SHORT_HALFLIFE, \"short\"},\n-        {FeeEstimateHorizon::MED_HALFLIFE, \"medium\"},\n-        {FeeEstimateHorizon::LONG_HALFLIFE, \"long\"},\n-    };\n-    auto horizon_string = horizon_strings.find(horizon);\n-\n-    if (horizon_string == horizon_strings.end()) return \"unknown\";\n-\n-    return horizon_string->second;\n+std::string StringForFeeEstimateHorizon(FeeEstimateHorizon horizon)\n+{\n+    switch (horizon) {\n+    case FeeEstimateHorizon::SHORT_HALFLIFE: return \"short\";\n+    case FeeEstimateHorizon::MED_HALFLIFE: return \"medium\";\n+    case FeeEstimateHorizon::LONG_HALFLIFE: return \"long\";\n+    } // no default case, so the compiler can warn about missing cases\n+    assert(false);\n }\n \n /**\n@@ -644,7 +641,7 @@ CFeeRate CBlockPolicyEstimator::estimateFee(int confTarget) const\n \n CFeeRate CBlockPolicyEstimator::estimateRawFee(int confTarget, double successThreshold, FeeEstimateHorizon horizon, EstimationResult* result) const\n {\n-    TxConfirmStats* stats;\n+    TxConfirmStats* stats = nullptr;\n     double sufficientTxs = SUFFICIENT_FEETXS;\n     switch (horizon) {\n     case FeeEstimateHorizon::SHORT_HALFLIFE: {\n@@ -660,10 +657,8 @@ CFeeRate CBlockPolicyEstimator::estimateRawFee(int confTarget, double successThr\n         stats = longStats.get();\n         break;\n     }\n-    default: {\n-        throw std::out_of_range(\"CBlockPolicyEstimator::estimateRawFee unknown FeeEstimateHorizon\");\n-    }\n-    }\n+    } // no default case, so the compiler can warn about missing cases\n+    assert(stats);\n \n     LOCK(m_cs_fee_estimator);\n     // Return failure if trying to analyze a target we're not tracking\n@@ -693,10 +688,8 @@ unsigned int CBlockPolicyEstimator::HighestTargetTracked(FeeEstimateHorizon hori\n     case FeeEstimateHorizon::LONG_HALFLIFE: {\n         return longStats->GetMaxConfirms();\n     }\n-    default: {\n-        throw std::out_of_range(\"CBlockPolicyEstimator::HighestTargetTracked unknown FeeEstimateHorizon\");\n-    }\n-    }\n+    } // no default case, so the compiler can warn about missing cases\n+    assert(false);\n }\n \n unsigned int CBlockPolicyEstimator::BlockSpan() const"
      }
    ]
  }
]