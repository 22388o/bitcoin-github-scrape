[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546570620",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-546570620",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 546570620,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NjU3MDYyMA==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-26T05:17:46Z",
    "updated_at": "2019-10-26T05:17:46Z",
    "author_association": "MEMBER",
    "body": "The final diff is very similar to #16341 just with some things dropped as they were deemed unnecessary.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546570620/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546582908",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-546582908",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 546582908,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NjU4MjkwOA==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-26T08:35:58Z",
    "updated_at": "2019-10-26T08:36:43Z",
    "author_association": "MEMBER",
    "body": "For comparison, my last [ACK](https://github.com/bitcoin/bitcoin/pull/16341#issuecomment-546274939) on the original was for c37be15. That code was identical to @ryanofsky's [branch](https://github.com/ryanofsky/bitcoin/commits/pr/keyman) at  299296e51f6ea0e416aa84d7fc139195be96a58d, just using a different set of commits to get there.   This PR rebases that on master @25d7e2e78137d07eb612c44d19b0d496050c947a, with the last two commits (952ba99a447b619e353816cac429f825cb3bcaff & 299296e51f6ea0e416aa84d7fc139195be96a58d) dropped.  The result is f47ffe0a88111a63e1d7d98c25fbe2184215dbbe here (minus two linter changes).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546582908/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546596120",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-546596120",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 546596120,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NjU5NjEyMA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-26T11:55:59Z",
    "updated_at": "2020-01-29T22:54:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17954](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17954.html) (wallet: Remove calls to Chain::Lock methods by ryanofsky)\n* [#17878](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17878.html) (wip: zmq: Support -zmqpubwallettx by promag)\n* [#17786](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17786.html) (refactor: Nuke policy/fees->mempool circular dependencies by hebasto)\n* [#17681](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17681.html) (wallet: Keep inactive seeds after sethdseed and derive keys from them as needed by achow101)\n* [#17484](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17484.html) (wallet: add cached m_is_ibd to remove Chain::isInitialBlockDownload by ariard)\n* [#17443](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17443.html) (Drop checkFinalTx and use Median Time Past to check finality of wallet transactions by ariard)\n* [#17211](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17211.html) (Allow fundrawtransaction and walletcreatefundedpsbt to take external inputs by achow101)\n* [#16946](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16946.html) (wallet: include a checksum of encrypted private keys by achow101)\n* [#16910](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16910.html) (wallet: reduce loading time by using unordered maps by achow101)\n* [#16698](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16698.html) (Mempool: rework rebroadcast logic to improve privacy by amitiuttarwar)\n* [#16528](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16528.html) ([WIP] Native Descriptor Wallets (take 2) by achow101)\n* [#16440](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16440.html) (BIP-322: Generic signed message format by kallewoof)\n* [#16224](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16224.html) (gui: Bilingual GUI error messages by hebasto)\n* [#15761](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15761.html) (Replace -upgradewallet startup option with upgradewallet RPC by achow101)\n* [#15719](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15719.html) (Drop Chain::requestMempoolTransactions method by ryanofsky)\n* [#10443](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/10443.html) (Add fee_est tool for debugging fee estimation code by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546596120/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547570983",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-547570983",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 547570983,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NzU3MDk4Mw==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-29T18:39:58Z",
    "updated_at": "2019-10-29T18:40:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "Suggestion: there's a cluster of fairly trivial refactoring commits in this PR that I think could be pulled out into a separate PR and merged pretty quickly. Doing this would reduce the number of commits here by almost half:\r\n\r\n- [ ] b318219c51e316cfb75639f0820cc1b8017bfdfd MOVEONLY: Reorder LegacyScriptPubKeyMan methods (4/36)\r\n- [ ] 8c7eac4de3e94adcf3ec8a0358c410a198b8b844 Refactor: Declare LegacyScriptPubKeyMan methods as virtual (5/36)\r\n- [ ] f0339ba0b3a9d54f04b0e5f0ec80a9f791567caa Refactor: Add new ScriptPubKeyMan virtual methods (6/36)\r\n- [ ] 5321cf7eb565834a7e69331d690543375890d516 Refactor: Move SetAddressBook call out of LegacyScriptPubKeyMan::GetNewDestination (7/36)\r\n- [ ] 44f524e6c2116a4c57e9e47c4b130efe751cf5a7 Refactor: Move SetWalletFlag out of LegacyScriptPubKeyMan::UpgradeKeyMetadata (8/36)\r\n- [ ] 2b92e87104868e11be9a0e2129d1340677ebc81c Refactor: Remove UnsetWalletFlag call from LegacyScriptPubKeyMan::SetHDSeed (9/36)\r\n- [ ] 802dfb95abf9465efe34d16ece4f7e6dc8349177 Refactor: Move SetAddressBookWithDB call out of LegacyScriptPubKeyMan::ImportScriptPubKeys (10/36)\r\n- [ ] d8d2d31e55a53bfeb3860f278e47692970bdcd84 Refactor: Move LoadKey LegacyScriptPubKeyMan method definition (11/36)\r\n- [ ] 9f20667b5bb4f7939efa2cf16e3f12abf34ebbe5 Refactor: Move GetMetadata code out of getaddressinfo (12/36)\r\n- [ ] 309ee44cc663c8d753729d94100bbbe694c2e091 Refactor: Move MarkUnusedAddresses code out of CWallet::AddToWalletIfInvolvingMe (13/36)\r\n- [ ] 1ffce090c62ca340e09ace89d859843b995b0ee9 Refactor: Move Upgrade code out of CWallet::CreateWalletFromFile (14/36)\r\n- [ ] f09be4ff1cc00390fc50147c63260983a2d98d71 Refactor: Move HavePrivateKeys code out of CWallet::CreateWalletFromFile (15/36)\r\n- [ ] 25d904ce890f2989cbd3f677972be59d1381e98c Refactor: Move SetupGeneration code out of CWallet (16/36)\r\n- [ ] a207dbc464a647342c55cfd3c81e9866c063cdce Refactor: Move RewriteDB code out of CWallet (17/36)\r\n- [ ] 1cca908e4d1f855e961eb513ff87deda6a615323 Refactor: Move GetKeypoolSize code out of CWallet (18/36)\r\n- [ ] 23008f4c36d3bd982dcdb70698b6dc05b673c4e0 Refactor: Move nTimeFirstKey accesses out of CWallet (19/36)\r\n\r\n@achow101, would you want to pull out the commits above into a separate PR? I'd also be happy to make the PR if it would be more convenient.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547570983/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547581348",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-547581348",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 547581348,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NzU4MTM0OA==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-29T19:03:56Z",
    "updated_at": "2019-10-29T19:03:56Z",
    "author_association": "MEMBER",
    "body": "@ryanofsky Done as #17304 ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547581348/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547609311",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-547609311",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 547609311,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NzYwOTMxMQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-29T20:15:09Z",
    "updated_at": "2019-10-29T20:15:57Z",
    "author_association": "MEMBER",
    "body": ">  fanquake added this to Blockers in High-priority for review 5 hours ago \r\n\r\nWhy? I thought that high-prio could only be used once per week per contributor.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547609311/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547613017",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-547613017",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 547613017,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NzYxMzAxNw==",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?u=a0e0040aacd7d4f0787481e8ac30b494fa429e11&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-29T20:24:32Z",
    "updated_at": "2019-10-29T20:24:32Z",
    "author_association": "MEMBER",
    "body": "Achow requested it via IRC. He didn't have anything in high-prio.\n\nOn Tue, 29 Oct 2019 at 16:15, MarcoFalke <notifications@github.com> wrote:\n\n> fanquake added this to Blockers in High-priority for review 5 hours ago\n>\n> Why?\n>\n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/17261?email_source=notifications&email_token=AAGS34SKBDHCRX7QCH2LWVLQRCKWDA5CNFSM4JFL4BW2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOECR5VXY#issuecomment-547609311>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAGS34RIQ5JLGSG4BKV3SCTQRCKWDANCNFSM4JFL4BWQ>\n> .\n>\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547613017/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547688818",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-547688818",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 547688818,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NzY4ODgxOA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-30T00:36:21Z",
    "updated_at": "2019-10-30T00:36:21Z",
    "author_association": "MEMBER",
    "body": "https://github.com/bitcoin/bitcoin/pull/17260#event-2751955233 was in for this week, but fair enough",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547688818/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549445203",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-549445203",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 549445203,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTQ0NTIwMw==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-04T16:51:41Z",
    "updated_at": "2019-11-04T16:51:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "In case its useful, rebased branch [`pr/keyman`](https://github.com/ryanofsky/bitcoin/commits/pr/keyman) 9e776722b902d8f6d095d06053b12746065baa46 -> 6ff0b88d5a98465eb79a02ceb7a46afb31d43708 ([`pr/keyman.9`](https://github.com/ryanofsky/bitcoin/commits/pr/keyman.9) -> [`pr/keyman.10`](https://github.com/ryanofsky/bitcoin/commits/pr/keyman.10)) after #17300 and #17304",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549445203/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549473896",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-549473896",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 549473896,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTQ3Mzg5Ng==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-04T17:59:48Z",
    "updated_at": "2019-11-04T17:59:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "Updated branch [`pr/keyman`](https://github.com/ryanofsky/bitcoin/commits/pr/keyman) 6ff0b88d5a98465eb79a02ceb7a46afb31d43708 -> 72df6f1050d27a13435fab77f20c1a0e08fdbf51 ([`pr/keyman.10`](https://github.com/ryanofsky/bitcoin/commits/pr/keyman.10) -> [`pr/keyman.11`](https://github.com/ryanofsky/bitcoin/commits/pr/keyman.11), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/keyman.10..pr/keyman.11)) to fix exception in `CWallet::GetLegacyScriptPubKeyMan()` caused by being called from `CWallet::UpgradeKeyMetadata()` early in initialization. This makes tests pass.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549473896/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549486714",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-549486714",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 549486714,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTQ4NjcxNA==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-04T18:31:06Z",
    "updated_at": "2019-11-04T18:31:06Z",
    "author_association": "MEMBER",
    "body": "Rebased",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549486714/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549487627",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-549487627",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 549487627,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTQ4NzYyNw==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-04T18:33:22Z",
    "updated_at": "2019-11-04T18:33:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Now that most of code movement is done, to make more progress on this, I'd say the following individual commits are complicated enough to be their own PRs which could all be reviewed and merged in parallel:\r\n\r\n- [ ] b5f456eb91e687ed39bc38e5b9b4e5aca0434515 Always try to sign for all pubkeys in multisig (2/20)\r\n- [ ] a1297615cce13bba3c16412418e0522e3f7f9eff Store p2sh scripts in AddAndGetDestinationForScript (3/20)\r\n- [ ] 09d99fc720998c892b60c26ff02e7dc11f69fee4 Refactor: Move encryption code between KeyMan and Wallet (4/20)\r\n- [ ] 11157cffc8925fe129d045d0238106db3bfb444a Refactor: Allow LegacyScriptPubKeyMan to be null (6/20)\r\n- [ ] a0b524c10f6944195f8fffa2a6558e002647fe23 Refactor: Require scriptPubKey to get wallet SigningProvider (7/20)\r\n- [ ] ac8cbde93df8cf365a08f472d2018f9667fae7c9 IsMine: Set state to WATCH_ONLY if we can get the pubkey (14/20)\r\n\r\nThen there is a set of keypool tweaks and fixes, which could go in a single PR (reviewed in parallel with PRs above):\r\n\r\n- [ ] 71f1a7ff10408211b7f86ee3c932a3d264441643 Key pool: Move CanGetAddresses call (8/20)\r\n- [ ] 5733cc0303673d58e887313965e5fb045f08e472 Key pool: Move LearnRelated and GetDestination calls (9/20)\r\n- [ ] 922252b6ff74a9d0da60c7bd87217eb5b938e220 Key pool: Move TopUp call (10/20)\r\n- [ ] 4fb82dcb7fac2f3684b9c4345946956488066d7a Key pool: Change ReturnDestination interface to take address instead of key (11/20)\r\n- [ ] 0c823e4d5c687fe116d2de550888558a3005b184 Key pool: Make TopUp fail if unexpected wallet flags are set (12/20)\r\n- [ ] 68a35f25bf3036d3390243c1a06887681d144586 Key pool: Fix omitted pre-split count in GetKeyPoolSize (13/20)\r\n\r\nAfter the encryption change above is in (09d99fc720998c892b60c26ff02e7dc11f69fee4), the cs_wallet/cs_keystore locking change could be a quick followup PR:\r\n\r\n- [ ] 558e0bb42cc0336bde941fb3a6e871e98a96962f Locking: Lock cs_KeyStore instead of cs_main in legacy keyman (5/20)\r\n\r\nAfter that, the remaining commits in this PR would add the new key manager maps and lookup code, and do final cleanups and tweaks:\r\n\r\n- [ ] fbcf6ad0ee6a87ac718c3ee2d9fa7663e18495a2 List output types in an array in order to be iterated over (1/20)\r\n- [ ] 85a1bb8e3a363eeca8f15505b716d6c04733cd11 HD Split: Avoid redundant upgrades (15/20)\r\n- [ ] 2fa9e854da0641d289b5d975ab3d15449fe59deb Box the wallet: Add multiple keyman maps and loops (16/20)\r\n- [ ] dd447f855324d5c6cebc2054db03d2fb5fdc4149 Refactor: Copy CWallet signals and print function to LegacyScriptPubKeyMan (17/20)\r\n- [ ] ddf78847a8abc62b3339fe98aea467a2fce894c6 Cleanup: Update message strings and comments (18/20)\r\n- [ ] 32ec05d7aec6574928f5ca019c61ce24dccb1c25 Cleanup: Drop unused GUI learnRelatedScripts method (19/20)\r\n- [ ] 72df6f1050d27a13435fab77f20c1a0e08fdbf51 Refactor: Replace SigningProvider pointers with unique_ptrs (20/20)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549487627/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549598810",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-549598810",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 549598810,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTU5ODgxMA==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-04T23:46:50Z",
    "updated_at": "2019-11-04T23:46:50Z",
    "author_association": "MEMBER",
    "body": "\"Refactor: Move encryption code between KeyMan and Wallet\" was split into #17369\r\n\r\n\"Refactor: Require scriptPubKey to get wallet SigningProvider\" was split into #17371 \r\n\r\nThe Keypool commits were split into #17373\r\n\r\n\"IsMine: Set state to WATCH_ONLY if we can get the pubkey\" was split into #17374\r\n\r\nI had some issues with making \"Refactor: Allow LegacyScriptPubKeyMan to be null\" standalone, there were some segfaults and other conflicting changes since it comes after the locking and encryption commits. So I don't think I will make this standalone.\r\n\r\nBoth \"Always try to sign for all pubkeys in multisig\" and \"Store p2sh scripts in AddAndGetDestinationForScript\" aren't needed until \"Box the wallet: Add multiple keyman maps and loops\". I don't think they make sense by themselves, and they aren't really complicated. So I would prefer to bundle them with \"Box the wallet: Add multiple keyman maps and loops\".\r\n\r\nI'll PR the locking commit after the encryption commit is merged.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549598810/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551078486",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-551078486",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 551078486,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTA3ODQ4Ng==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-07T13:27:50Z",
    "updated_at": "2019-11-07T13:27:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Maybe say at the top of the PR description that this builds on #17369, #17371, #17373, and those PRs should be reviewed first to avoid misplaced review comments here.\r\n\r\nCan also link to the descriptor wallet project url which lists all PRs https://github.com/bitcoin/bitcoin/projects/12",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551078486/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/559089495",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-559089495",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 559089495,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1OTA4OTQ5NQ==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-27T13:35:01Z",
    "updated_at": "2019-11-27T13:35:14Z",
    "author_association": "MEMBER",
    "body": "For those interested in helping out, please review #17369, #17537 and #17261.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/559089495/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/559095239",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-559095239",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 559095239,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1OTA5NTIzOQ==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-27T13:50:05Z",
    "updated_at": "2019-11-27T13:50:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "> For those interested in helping out, please review #17369, #17537 and #17261.\r\n\r\nWould add #17373. You can also check https://github.com/bitcoin/bitcoin/projects/12 for the latest list of descriptor wallet pull requests.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/559095239/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570703818",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-570703818",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 570703818,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MDcwMzgxOA==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-03T21:29:30Z",
    "updated_at": "2020-01-03T21:29:30Z",
    "author_association": "MEMBER",
    "body": "utACK https://github.com/bitcoin/bitcoin/pull/17261/commits/db4a741d30a44ebd975c905cef0f9578c816e8f2\r\n\r\nupdates are as requested",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570703818/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570761068",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-570761068",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 570761068,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MDc2MTA2OA==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-04T06:24:47Z",
    "updated_at": "2020-01-04T06:24:47Z",
    "author_association": "MEMBER",
    "body": "85901a994ea00a6fa9af44eeaed418b968829f26 `Refactor: Allow LegacyScriptPubKeyMan to be null` breaks `sethdseed` for blank wallets, because of the `EnsureLegacyScriptPubKeyMan` check. None of the tests catch this.\r\n\r\nI'm also seeing `\"keypoololdest\": 1578118989` (instead of `0`) for blank wallets, not when created, but after a restart. That may be a pre-existing issue.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570761068/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570810888",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-570810888",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 570810888,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MDgxMDg4OA==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-04T19:06:24Z",
    "updated_at": "2020-01-04T19:06:37Z",
    "author_association": "MEMBER",
    "body": "> I'm also seeing \"keypoololdest\": 1578118989 (instead of 0) for blank wallets, not when created, but after a restart. That may be a pre-existing issue.\r\n\r\nFrom my reading of the code that's what it's \"supposed\" to do when the keypool is empty on master; it will just use current clock time. Help should probably detail that.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570810888/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570832827",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-570832827",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 570832827,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MDgzMjgyNw==",
    "user": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?u=8aa4d0fd79dff5cf64a98205c78bc1c96b0bf4b6&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-05T00:34:34Z",
    "updated_at": "2020-01-05T00:34:34Z",
    "author_association": "MEMBER",
    "body": "@instagibbs \r\n> From my reading of the code that's what it's \"supposed\" to do when the keypool is empty on master; it will just use current clock time. Help should probably detail that.\r\n\r\nI think the problem here is that it is `0` before restart, not that it uses current clock time.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570832827/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570834864",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-570834864",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 570834864,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MDgzNDg2NA==",
    "user": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?u=8aa4d0fd79dff5cf64a98205c78bc1c96b0bf4b6&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-05T01:18:00Z",
    "updated_at": "2020-01-05T01:18:29Z",
    "author_association": "MEMBER",
    "body": "Tested ACK db4a741d30a44ebd975c905cef0f9578c816e8f2\r\n\r\nTested on top of signet patch. Received and sent funds. All seems to work a-OK. (Did not test GUI.)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570834864/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571268922",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-571268922",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 571268922,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MTI2ODkyMg==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-06T19:07:11Z",
    "updated_at": "2020-01-06T19:26:38Z",
    "author_association": "MEMBER",
    "body": "Fixed the sethdseed problem.\r\n\r\nEdit: I changed the fix so that it also has the `import*` RPCs work with blank wallets too.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571268922/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571469973",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-571469973",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 571469973,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MTQ2OTk3Mw==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-07T07:29:04Z",
    "updated_at": "2020-01-07T07:29:04Z",
    "author_association": "MEMBER",
    "body": "Code review re-ACK b5afe999206ee6982fd555b490fae6dd50a1c0c3\r\n\r\nI assume we don't want to  add a `LegacyScriptPubKeyMan` to a (future) descriptor based wallet. That's working correctly I believe, because  `EnsureLegacyScriptPubKeyMan(*wallet, true)` calls `SetupLegacyScriptPubKeyMan` which fails if any other `ScriptPubKeyMan` types exist. But I would prefer if `EnsureLegacyScriptPubKeyMan` checked this directly.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571469973/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571486095",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-571486095",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 571486095,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MTQ4NjA5NQ==",
    "user": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?u=8aa4d0fd79dff5cf64a98205c78bc1c96b0bf4b6&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-07T08:27:01Z",
    "updated_at": "2020-01-07T08:30:41Z",
    "author_association": "MEMBER",
    "body": "Is b5afe999206ee6982fd555b490fae6dd50a1c0c3 not meant to be squashed into d8a3c7830e1292c8b7d52b5a02fdd1d2459de3ef?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571486095/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571630835",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-571630835",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 571630835,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MTYzMDgzNQ==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-07T15:18:20Z",
    "updated_at": "2020-01-07T15:18:20Z",
    "author_association": "MEMBER",
    "body": "> EnsureLegacyScriptPubKeyMan(*wallet, true) calls SetupLegacyScriptPubKeyMan which fails if any other ScriptPubKeyMan types exist\r\n\r\nIt'll hit asserts, right? Yeah I'd rather things be explicitly checked and handled instead if possible.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571630835/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571681499",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-571681499",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 571681499,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MTY4MTQ5OQ==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-07T17:11:28Z",
    "updated_at": "2020-01-07T17:11:28Z",
    "author_association": "MEMBER",
    "body": "> I assume we don't want to add a `LegacyScriptPubKeyMan` to a (future) descriptor based wallet. That's working correctly I believe, because `EnsureLegacyScriptPubKeyMan(*wallet, true)` calls `SetupLegacyScriptPubKeyMan` which fails if any other `ScriptPubKeyMan` types exist. But I would prefer if `EnsureLegacyScriptPubKeyMan` checked this directly.\r\n\r\nWhat do you mean by \"checked this directly\"? Have the same wallet flag check or something else?\r\n\r\n> It'll hit asserts, right? Yeah I'd rather things be explicitly checked and handled instead if possible.\r\n\r\nThe descriptor wallet PR checks the wallet flag and will return early if the descriptor wallet flag is set. No asserts.\r\n\r\n> Is [b5afe99](https://github.com/bitcoin/bitcoin/commit/b5afe999206ee6982fd555b490fae6dd50a1c0c3) not meant to be squashed into [d8a3c78](https://github.com/bitcoin/bitcoin/commit/d8a3c7830e1292c8b7d52b5a02fdd1d2459de3ef)?\r\n\r\nI guess it can be. Hadn't really noticed that.\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571681499/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571909471",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-571909471",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 571909471,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MTkwOTQ3MQ==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-08T06:26:10Z",
    "updated_at": "2020-01-08T06:26:10Z",
    "author_association": "MEMBER",
    "body": "> The descriptor wallet PR checks the wallet flag and will return early if the descriptor wallet flag is set. No asserts.\r\n\r\nIt's good that `EnsureLegacyScriptPubKeyMan` never gets called for a descriptor wallet, but it would be better if it explicitly checked that there is no other `ScriptPubKeyMan` out there. Currently it only checks that there's no `LegacyScriptPubKeyMan` out there, but then hit an assert later on if it wasn't the only `ScriptPubKeyMan`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571909471/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/573131579",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-573131579",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 573131579,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MzEzMTU3OQ==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-10T17:34:02Z",
    "updated_at": "2020-01-10T17:34:02Z",
    "author_association": "MEMBER",
    "body": "> > The descriptor wallet PR checks the wallet flag and will return early if the descriptor wallet flag is set. No asserts.\r\n> \r\n> It's good that `EnsureLegacyScriptPubKeyMan` never gets called for a descriptor wallet, but it would be better if it explicitly checked that there is no other `ScriptPubKeyMan` out there. Currently it only checks that there's no `LegacyScriptPubKeyMan` out there, but then hit an assert later on if it wasn't the only `ScriptPubKeyMan`.\r\n\r\nI don't quite understand what you want me to do here. We don't have any other `ScriptPubKeyMan`s yet, so we can't check if it is something else. And if there are other `ScriptPubKeyMan`s in a wallet that has a `LegacyScriptPubKeyMan`, then it definitely should assert and crash because that's not a safe or consistent state for the wallet to be in.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/573131579/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/574464622",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-574464622",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 574464622,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDQ2NDYyMg==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-15T02:20:22Z",
    "updated_at": "2020-01-15T02:20:22Z",
    "author_association": "MEMBER",
    "body": "Instead of:\r\n```cpp\r\n LegacyScriptPubKeyMan* spk_man = nullptr;\r\n if (also_create) {\r\n     spk_man = wallet.GetOrCreateLegacyScriptPubKeyMan();\r\n } else {\r\n     spk_man = wallet.GetLegacyScriptPubKeyMan();\r\n }\r\n```\r\n\r\nThis seems more clear:\r\n```cpp\r\n LegacyScriptPubKeyMan* spk_man = wallet.GetLegacyScriptPubKeyMan();\r\n if (!spk_man && also_create) {\r\n     spk_man = wallet.GetOrCreateLegacyScriptPubKeyMan();\r\n }\r\n```\r\n\r\nAnd instead of:\r\n```cpp\r\nvoid CWallet::SetupLegacyScriptPubKeyMan()\r\n{\r\n    if (m_internal_spk_managers.empty() && m_external_spk_managers.empty() && m_spk_managers.empty()) {\r\n        auto spk_manager = std::unique_ptr<ScriptPubKeyMan>(new LegacyScriptPubKeyMan(*this));\r\n```\r\n\r\nTry:\r\n```cpp\r\nvoid CWallet::SetupLegacyScriptPubKeyMan()\r\n{\r\n    if(m_internal_spk_managers.count(OutputType::LEGACY) > 0) {\r\n        return;\r\n    }\r\n    assert(m_internal_spk_managers.empty() && m_external_spk_managers.empty() && m_spk_managers.empty());\r\n    auto spk_manager = std::unique_ptr<ScriptPubKeyMan>(new LegacyScriptPubKeyMan(*this));\r\n```\r\n\r\n(this top `if` statement might be avoidable by having a separate `CreateLegacyScriptPubKeyMan()`)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/574464622/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/574771817",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-574771817",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 574771817,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDc3MTgxNw==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-15T17:40:10Z",
    "updated_at": "2020-01-15T17:40:23Z",
    "author_association": "MEMBER",
    "body": "Rebased.\r\n\r\n@Sjors Done. I changed your suggestion for `SetupLegacyScriptPubKeyMan` to check whether any of the `*spk_managers` maps has a `ScriptPubKeyMan`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/574771817/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/574911385",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-574911385",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 574911385,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDkxMTM4NQ==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-15T23:49:31Z",
    "updated_at": "2020-01-15T23:49:31Z",
    "author_association": "MEMBER",
    "body": "utACK https://github.com/bitcoin/bitcoin/pull/17261/commits/bbf50a006410bd3e56908983664c5a1a0b475c2c",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/574911385/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575133163",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-575133163",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 575133163,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NTEzMzE2Mw==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-16T12:38:21Z",
    "updated_at": "2020-01-16T12:38:21Z",
    "author_association": "MEMBER",
    "body": "Code review ACK bbf50a006410bd3e56908983664c5a1a0b475c2c",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575133163/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575432835",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-575432835",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 575432835,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NTQzMjgzNQ==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-17T02:10:50Z",
    "updated_at": "2020-01-17T02:10:50Z",
    "author_association": "MEMBER",
    "body": "Rebased",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575432835/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575540707",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-575540707",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 575540707,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NTU0MDcwNw==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-17T09:12:21Z",
    "updated_at": "2020-01-17T09:12:21Z",
    "author_association": "MEMBER",
    "body": "re-ACK c985aea9be828c0a49eb81f5a5d54b42147ef20c; just a rebase with merged #17843 content dropped.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575540707/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575994760",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-575994760",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 575994760,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NTk5NDc2MA==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-19T11:23:14Z",
    "updated_at": "2020-01-19T11:23:14Z",
    "author_association": "MEMBER",
    "body": "re-utACK 126d6945e38cdc47b1227cdacfaa456714efcdf5",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575994760/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/577903160",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-577903160",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 577903160,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NzkwMzE2MA==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-23T22:15:36Z",
    "updated_at": "2020-01-23T22:15:36Z",
    "author_association": "MEMBER",
    "body": "re-utACK https://github.com/bitcoin/bitcoin/pull/17261/commits/3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/577903160/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/578040227",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-578040227",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 578040227,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3ODA0MDIyNw==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-24T08:38:23Z",
    "updated_at": "2020-01-24T08:38:23Z",
    "author_association": "MEMBER",
    "body": "re-utACK 3f373659d732a5b1e5fdc692a45b2b8179f66bec (it still compiles on macOS after https://github.com/bitcoin/bitcoin/pull/17261#discussion_r370377070)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/578040227/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/580076232",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#issuecomment-580076232",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17261",
    "id": 580076232,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MDA3NjIzMg==",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?u=447cdc9e2966cbee415545c8ff452954ee1209af&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-30T04:20:22Z",
    "updated_at": "2020-01-30T04:20:22Z",
    "author_association": "MEMBER",
    "body": "Tested re-ACK 3f373659d732a5b1e5fdc692a45b2b8179f66bec\r\n\r\nI think this is ready to go in",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/580076232/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342210748",
    "pull_request_review_id": 311281404,
    "id": 342210748,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjIxMDc0OA==",
    "diff_hunk": "@@ -292,8 +292,7 @@ class LegacyScriptPubKeyMan : public ScriptPubKeyMan, public FillableSigningProv\n \n     void MarkUnusedAddresses(const CScript& script) override;\n \n-    //! Upgrade stored CKeyMetadata objects to store key origin info as KeyOriginInfo",
    "path": "src/wallet/scriptpubkeyman.h",
    "position": 97,
    "original_position": 59,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "90287119f4bab55e3ffb8e5b9139d19f11eebd61",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"Locking: Lock cs_KeyStore instead of cs_main in legacy keyman\" (90287119f4bab55e3ffb8e5b9139d19f11eebd61):\r\n\r\nLooks like comment this line was unintentionally deleted (mistake during rebase)\r\n",
    "created_at": "2019-11-04T18:50:09Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r342210748",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342210748"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r342210748"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342210748/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 299,
    "original_line": 299,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342224444",
    "pull_request_review_id": 311299018,
    "id": 342224444,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjIyNDQ0NA==",
    "diff_hunk": "@@ -292,8 +292,7 @@ class LegacyScriptPubKeyMan : public ScriptPubKeyMan, public FillableSigningProv\n \n     void MarkUnusedAddresses(const CScript& script) override;\n \n-    //! Upgrade stored CKeyMetadata objects to store key origin info as KeyOriginInfo",
    "path": "src/wallet/scriptpubkeyman.h",
    "position": 97,
    "original_position": 59,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "90287119f4bab55e3ffb8e5b9139d19f11eebd61",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Added it back in.",
    "created_at": "2019-11-04T19:19:46Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r342224444",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342224444"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r342224444"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342224444/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 299,
    "original_line": 299,
    "side": "LEFT",
    "in_reply_to_id": 342210748
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343629024",
    "pull_request_review_id": 313310038,
    "id": 343629024,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzYyOTAyNA==",
    "diff_hunk": "@@ -278,6 +278,8 @@ bool LegacyScriptPubKeyMan::GetReservedDestination(const OutputType type, bool i\n     if (!ReserveKeyFromKeyPool(index, keypool, internal)) {\n         return false;\n     }\n+    LearnRelatedScripts(keypool.vchPubKey, type);",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "3499674136167f662e5b0ef0b599c02f5a959558",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "3499674136167f662e5b0ef0b599c02f5a959558\r\n\r\nYou gave ACK in #17237 so I wonder why is this here?",
    "created_at": "2019-11-07T12:40:18Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r343629024",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343629024"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r343629024"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343629024/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 281,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343645137",
    "pull_request_review_id": 313331747,
    "id": 343645137,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzY0NTEzNw==",
    "diff_hunk": "@@ -278,6 +278,8 @@ bool LegacyScriptPubKeyMan::GetReservedDestination(const OutputType type, bool i\n     if (!ReserveKeyFromKeyPool(index, keypool, internal)) {\n         return false;\n     }\n+    LearnRelatedScripts(keypool.vchPubKey, type);",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "3499674136167f662e5b0ef0b599c02f5a959558",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> [3499674](https://github.com/bitcoin/bitcoin/commit/3499674136167f662e5b0ef0b599c02f5a959558)\r\n> \r\n> You gave ACK in #17237 so I wonder why is this here?\r\n\r\nBetter to ask this question in #17373 where this commit was moved than this PR. Specifically [17373/commits/35c37b5](https://github.com/bitcoin/bitcoin/pull/17373/commits/35c37b59c5bb918c15aca3092b6506ef3974e50c)\r\n\r\nProbably this code change just precedes your PR",
    "created_at": "2019-11-07T13:21:13Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r343645137",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343645137"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r343645137"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343645137/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 281,
    "side": "RIGHT",
    "in_reply_to_id": 343629024
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343667539",
    "pull_request_review_id": 313361226,
    "id": 343667539,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzY2NzUzOQ==",
    "diff_hunk": "@@ -278,6 +278,8 @@ bool LegacyScriptPubKeyMan::GetReservedDestination(const OutputType type, bool i\n     if (!ReserveKeyFromKeyPool(index, keypool, internal)) {\n         return false;\n     }\n+    LearnRelatedScripts(keypool.vchPubKey, type);",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "3499674136167f662e5b0ef0b599c02f5a959558",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks for pointing to the right PR, I think I'll just wait for this get merged.",
    "created_at": "2019-11-07T14:06:37Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r343667539",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343667539"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r343667539"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343667539/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 281,
    "side": "RIGHT",
    "in_reply_to_id": 343629024
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343671731",
    "pull_request_review_id": 313366994,
    "id": 343671731,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzY3MTczMQ==",
    "diff_hunk": "@@ -278,6 +278,8 @@ bool LegacyScriptPubKeyMan::GetReservedDestination(const OutputType type, bool i\n     if (!ReserveKeyFromKeyPool(index, keypool, internal)) {\n         return false;\n     }\n+    LearnRelatedScripts(keypool.vchPubKey, type);",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "3499674136167f662e5b0ef0b599c02f5a959558",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It would be nice to get more review on #17373, even if this question won't be raised. The changes there are confusing to me, and might be more straightforward to you. (The changes there are minor and seem safe but I don't understand why they are made.)",
    "created_at": "2019-11-07T14:14:50Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r343671731",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343671731"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r343671731"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343671731/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 281,
    "side": "RIGHT",
    "in_reply_to_id": 343629024
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343679653",
    "pull_request_review_id": 313377733,
    "id": 343679653,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzY3OTY1Mw==",
    "diff_hunk": "@@ -278,6 +278,8 @@ bool LegacyScriptPubKeyMan::GetReservedDestination(const OutputType type, bool i\n     if (!ReserveKeyFromKeyPool(index, keypool, internal)) {\n         return false;\n     }\n+    LearnRelatedScripts(keypool.vchPubKey, type);",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "3499674136167f662e5b0ef0b599c02f5a959558",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You mean #17373, not #17237 right? If so I'll review the first.",
    "created_at": "2019-11-07T14:29:44Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r343679653",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343679653"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r343679653"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343679653/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 281,
    "side": "RIGHT",
    "in_reply_to_id": 343629024
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360091041",
    "pull_request_review_id": 334908426,
    "id": 360091041,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDA5MTA0MQ==",
    "diff_hunk": "@@ -141,8 +141,7 @@ void TestGUI(interfaces::Node& node)\n     {\n         auto spk_man = wallet->GetLegacyScriptPubKeyMan();\n         auto locked_chain = wallet->chain().lock();\n-        LOCK(wallet->cs_wallet);\n-        AssertLockHeld(spk_man->cs_wallet);\n+        LOCK2(wallet->cs_wallet, spk_man->cs_KeyStore);",
    "path": "src/qt/test/wallettests.cpp",
    "position": 9,
    "original_position": 6,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "a5e0d06d4b39acbf902428ec2b38caeca9f2a618",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "little confused; the commit says `cs_main` and I see `cs_wallet` being deleted. Fix commit message?",
    "created_at": "2019-12-19T20:21:09Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r360091041",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360091041"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r360091041"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360091041/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 148,
    "original_line": 148,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362041319",
    "pull_request_review_id": 334908426,
    "id": 362041319,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjA0MTMxOQ==",
    "diff_hunk": "@@ -196,8 +196,16 @@ class ScriptPubKeyMan\n \n     virtual int64_t GetTimeFirstKey() const { return 0; }\n \n-    //! Return address metadata\n     virtual const CKeyMetadata* GetMetadata(const CTxDestination& dest) const { return nullptr; }\n+\n+    virtual const SigningProvider* GetSigningProvider(const CScript& script) const { return nullptr; }\n+\n+    /** Whether this ScriptPubKeyMan can provide a SigningProvider (via GetSigningProvider) that, combined with\n+      * sigdata, can produce a valid signature.",
    "path": "src/wallet/scriptpubkeyman.h",
    "position": 10,
    "original_position": 10,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "9020b9f0b19fc6caef17bec92c8d41c8a28b4ba9",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`s/can/is sufficient/` since the wallet itself may actually be unable to sign(watchonly)\r\n\r\n",
    "created_at": "2019-12-30T17:03:49Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362041319",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362041319"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362041319"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362041319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 204,
    "original_line": 204,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362043257",
    "pull_request_review_id": 334908426,
    "id": 362043257,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjA0MzI1Nw==",
    "diff_hunk": "@@ -491,6 +519,11 @@ const CKeyMetadata* LegacyScriptPubKeyMan::GetMetadata(const CTxDestination& des\n     return nullptr;\n }\n \n+uint256 LegacyScriptPubKeyMan::GetID() const\n+{\n+    return uint256S(\"0000000000000000000000000000000000000000000000000000000000000001\");",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": null,
    "original_position": 41,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "9020b9f0b19fc6caef17bec92c8d41c8a28b4ba9",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Let's make a constant like `CWalletTx::ABANDON_HASH`, or rename that one since it's the same constant...",
    "created_at": "2019-12-30T17:12:03Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362043257",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362043257"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362043257"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362043257/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 524,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362045611",
    "pull_request_review_id": 334908426,
    "id": 362045611,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjA0NTYxMQ==",
    "diff_hunk": "@@ -3073,7 +3076,7 @@ size_t CWallet::KeypoolCountExternalKeys()\n     AssertLockHeld(cs_wallet);",
    "path": "src/wallet/wallet.cpp",
    "position": 243,
    "original_position": 123,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "9020b9f0b19fc6caef17bec92c8d41c8a28b4ba9",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "For keypool checks do we want to assert that these are only being used for LegacySPKM?",
    "created_at": "2019-12-30T17:20:52Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362045611",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362045611"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362045611"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362045611/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3109,
    "original_line": 3109,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362049084",
    "pull_request_review_id": 334908426,
    "id": 362049084,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjA0OTA4NA==",
    "diff_hunk": "@@ -4056,24 +4061,81 @@ bool CWallet::Unlock(const CKeyingMaterial& vMasterKeyIn, bool accept_no_keys)\n     return true;\n }\n \n+std::set<ScriptPubKeyMan*> CWallet::GetActiveScriptPubKeyMans() const\n+{\n+    std::set<ScriptPubKeyMan*> spk_mans;\n+    for (bool internal : {false, true}) {\n+        for (OutputType t : OUTPUT_TYPES) {\n+            auto spk_man = GetScriptPubKeyMan(t, internal);\n+            if (spk_man) {\n+                spk_mans.insert(spk_man);\n+            }\n+        }\n+    }\n+    return spk_mans;\n+}\n+\n+ScriptPubKeyMan* CWallet::GetScriptPubKeyMan(const OutputType& type, bool internal) const\n+{\n+    if (internal) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 250,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "9020b9f0b19fc6caef17bec92c8d41c8a28b4ba9",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "could make this function roughly half the code by making a temporary reference `spk_managers` which points to internal(or not) based on the argument, which avoids code copying/pasting.",
    "created_at": "2019-12-30T17:35:02Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362049084",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362049084"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362049084"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362049084/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 4080,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362050426",
    "pull_request_review_id": 334908426,
    "id": 362050426,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjA1MDQyNg==",
    "diff_hunk": "@@ -1116,13 +1123,22 @@ class CWallet final : public WalletStorage, private interfaces::Chain::Notificat\n         LogPrintf((\"%s \" + fmt).c_str(), GetDisplayName(), parameters...);\n     };\n \n+    //! De-duplicates and returns all ScriptPubKeyMans in m_internal_spk_managers and m_external_spk_managers",
    "path": "src/wallet/wallet.h",
    "position": null,
    "original_position": 18,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "9020b9f0b19fc6caef17bec92c8d41c8a28b4ba9",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "s/De-duplicates and returns all ScriptPubKeyMans/Returns all unique ScriptPubKeyMans/",
    "created_at": "2019-12-30T17:40:34Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362050426",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362050426"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362050426"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362050426/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1126,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362057697",
    "pull_request_review_id": 334908426,
    "id": 362057697,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjA1NzY5Nw==",
    "diff_hunk": "@@ -3297,21 +3297,21 @@ UniValue signrawtransactionwithwallet(const JSONRPCRequest& request)\n     // Parse the prevtxs array\n     ParsePrevouts(request.params[1], nullptr, coins);\n \n-    std::set<const SigningProvider*> providers;\n+    std::set<std::shared_ptr<SigningProvider>> providers;\n     for (const std::pair<COutPoint, Coin> coin_pair : coins) {\n-        const SigningProvider* provider = pwallet->GetSigningProvider(coin_pair.second.out.scriptPubKey);\n+        std::unique_ptr<SigningProvider> provider = pwallet->GetSigningProvider(coin_pair.second.out.scriptPubKey);\n         if (provider) {\n             providers.insert(std::move(provider));\n         }\n     }\n     if (providers.size() == 0) {\n         // When there are no available providers, use DUMMY_SIGNING_PROVIDER so we can check if the tx is complete",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 41,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "16c36d85811631c166b9be4c562e8f69cdfcfdb4",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "comment is now out of date",
    "created_at": "2019-12-30T18:12:41Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362057697",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362057697"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362057697"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362057697/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3308,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362068459",
    "pull_request_review_id": 337205922,
    "id": 362068459,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjA2ODQ1OQ==",
    "diff_hunk": "@@ -196,8 +196,16 @@ class ScriptPubKeyMan\n \n     virtual int64_t GetTimeFirstKey() const { return 0; }\n \n-    //! Return address metadata\n     virtual const CKeyMetadata* GetMetadata(const CTxDestination& dest) const { return nullptr; }\n+\n+    virtual const SigningProvider* GetSigningProvider(const CScript& script) const { return nullptr; }\n+\n+    /** Whether this ScriptPubKeyMan can provide a SigningProvider (via GetSigningProvider) that, combined with\n+      * sigdata, can produce a valid signature.",
    "path": "src/wallet/scriptpubkeyman.h",
    "position": 10,
    "original_position": 10,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "9020b9f0b19fc6caef17bec92c8d41c8a28b4ba9",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Is that not stated by the \"combined with sigdata\" part?",
    "created_at": "2019-12-30T18:59:39Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362068459",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362068459"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362068459"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362068459/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 204,
    "original_line": 204,
    "side": "RIGHT",
    "in_reply_to_id": 362041319
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362078899",
    "pull_request_review_id": 337218258,
    "id": 362078899,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjA3ODg5OQ==",
    "diff_hunk": "@@ -3073,7 +3076,7 @@ size_t CWallet::KeypoolCountExternalKeys()\n     AssertLockHeld(cs_wallet);",
    "path": "src/wallet/wallet.cpp",
    "position": 243,
    "original_position": 123,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "9020b9f0b19fc6caef17bec92c8d41c8a28b4ba9",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "No, they still apply to other SPKMs.",
    "created_at": "2019-12-30T19:44:18Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362078899",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362078899"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362078899"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362078899/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3109,
    "original_line": 3109,
    "side": "RIGHT",
    "in_reply_to_id": 362045611
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362081526",
    "pull_request_review_id": 337221504,
    "id": 362081526,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjA4MTUyNg==",
    "diff_hunk": "@@ -141,8 +141,7 @@ void TestGUI(interfaces::Node& node)\n     {\n         auto spk_man = wallet->GetLegacyScriptPubKeyMan();\n         auto locked_chain = wallet->chain().lock();\n-        LOCK(wallet->cs_wallet);\n-        AssertLockHeld(spk_man->cs_wallet);\n+        LOCK2(wallet->cs_wallet, spk_man->cs_KeyStore);",
    "path": "src/qt/test/wallettests.cpp",
    "position": 9,
    "original_position": 6,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "a5e0d06d4b39acbf902428ec2b38caeca9f2a618",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed.",
    "created_at": "2019-12-30T19:56:03Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362081526",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362081526"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362081526"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362081526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 148,
    "original_line": 148,
    "side": "RIGHT",
    "in_reply_to_id": 360091041
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362081740",
    "pull_request_review_id": 337221734,
    "id": 362081740,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjA4MTc0MA==",
    "diff_hunk": "@@ -491,6 +519,11 @@ const CKeyMetadata* LegacyScriptPubKeyMan::GetMetadata(const CTxDestination& des\n     return nullptr;\n }\n \n+uint256 LegacyScriptPubKeyMan::GetID() const\n+{\n+    return uint256S(\"0000000000000000000000000000000000000000000000000000000000000001\");",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": null,
    "original_position": 41,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "9020b9f0b19fc6caef17bec92c8d41c8a28b4ba9",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Since this value of one is used in a couple of other places,  I've added a commit refactor those uses and adding a constant `UINT256_ONE` to uint256.h. So we use that constant and so do the other places that use that value of one.",
    "created_at": "2019-12-30T19:57:01Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362081740",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362081740"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362081740"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362081740/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 524,
    "side": "RIGHT",
    "in_reply_to_id": 362043257
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362081774",
    "pull_request_review_id": 337221775,
    "id": 362081774,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjA4MTc3NA==",
    "diff_hunk": "@@ -4056,24 +4061,81 @@ bool CWallet::Unlock(const CKeyingMaterial& vMasterKeyIn, bool accept_no_keys)\n     return true;\n }\n \n+std::set<ScriptPubKeyMan*> CWallet::GetActiveScriptPubKeyMans() const\n+{\n+    std::set<ScriptPubKeyMan*> spk_mans;\n+    for (bool internal : {false, true}) {\n+        for (OutputType t : OUTPUT_TYPES) {\n+            auto spk_man = GetScriptPubKeyMan(t, internal);\n+            if (spk_man) {\n+                spk_mans.insert(spk_man);\n+            }\n+        }\n+    }\n+    return spk_mans;\n+}\n+\n+ScriptPubKeyMan* CWallet::GetScriptPubKeyMan(const OutputType& type, bool internal) const\n+{\n+    if (internal) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 250,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "9020b9f0b19fc6caef17bec92c8d41c8a28b4ba9",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done",
    "created_at": "2019-12-30T19:57:11Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362081774",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362081774"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362081774"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362081774/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 4080,
    "side": "RIGHT",
    "in_reply_to_id": 362049084
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362081802",
    "pull_request_review_id": 337221812,
    "id": 362081802,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjA4MTgwMg==",
    "diff_hunk": "@@ -1116,13 +1123,22 @@ class CWallet final : public WalletStorage, private interfaces::Chain::Notificat\n         LogPrintf((\"%s \" + fmt).c_str(), GetDisplayName(), parameters...);\n     };\n \n+    //! De-duplicates and returns all ScriptPubKeyMans in m_internal_spk_managers and m_external_spk_managers",
    "path": "src/wallet/wallet.h",
    "position": null,
    "original_position": 18,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "9020b9f0b19fc6caef17bec92c8d41c8a28b4ba9",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done",
    "created_at": "2019-12-30T19:57:18Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362081802",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362081802"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362081802"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362081802/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1126,
    "side": "RIGHT",
    "in_reply_to_id": 362050426
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362081945",
    "pull_request_review_id": 337221988,
    "id": 362081945,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjA4MTk0NQ==",
    "diff_hunk": "@@ -3297,21 +3297,21 @@ UniValue signrawtransactionwithwallet(const JSONRPCRequest& request)\n     // Parse the prevtxs array\n     ParsePrevouts(request.params[1], nullptr, coins);\n \n-    std::set<const SigningProvider*> providers;\n+    std::set<std::shared_ptr<SigningProvider>> providers;\n     for (const std::pair<COutPoint, Coin> coin_pair : coins) {\n-        const SigningProvider* provider = pwallet->GetSigningProvider(coin_pair.second.out.scriptPubKey);\n+        std::unique_ptr<SigningProvider> provider = pwallet->GetSigningProvider(coin_pair.second.out.scriptPubKey);\n         if (provider) {\n             providers.insert(std::move(provider));\n         }\n     }\n     if (providers.size() == 0) {\n         // When there are no available providers, use DUMMY_SIGNING_PROVIDER so we can check if the tx is complete",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 41,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "16c36d85811631c166b9be4c562e8f69cdfcfdb4",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Updated",
    "created_at": "2019-12-30T19:57:59Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362081945",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362081945"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362081945"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362081945/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3308,
    "side": "RIGHT",
    "in_reply_to_id": 362057697
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362967421",
    "pull_request_review_id": 338283291,
    "id": 362967421,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk2NzQyMQ==",
    "diff_hunk": "@@ -196,8 +196,16 @@ class ScriptPubKeyMan\n \n     virtual int64_t GetTimeFirstKey() const { return 0; }\n \n-    //! Return address metadata\n     virtual const CKeyMetadata* GetMetadata(const CTxDestination& dest) const { return nullptr; }\n+\n+    virtual const SigningProvider* GetSigningProvider(const CScript& script) const { return nullptr; }\n+\n+    /** Whether this ScriptPubKeyMan can provide a SigningProvider (via GetSigningProvider) that, combined with\n+      * sigdata, can produce a valid signature.",
    "path": "src/wallet/scriptpubkeyman.h",
    "position": 10,
    "original_position": 10,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "9020b9f0b19fc6caef17bec92c8d41c8a28b4ba9",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "If I think of better wording I'll let you know.",
    "created_at": "2020-01-03T21:29:52Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362967421",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362967421"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r362967421"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362967421/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 204,
    "original_line": 204,
    "side": "RIGHT",
    "in_reply_to_id": 362041319
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363021586",
    "pull_request_review_id": 338341981,
    "id": 363021586,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzAyMTU4Ng==",
    "diff_hunk": "@@ -47,4 +50,3 @@ std::vector<CTxDestination> GetAllDestinationsForKey(const CPubKey& key);\n CTxDestination AddAndGetDestinationForScript(FillableSigningProvider& keystore, const CScript& script, OutputType);\n \n #endif // BITCOIN_OUTPUTTYPE_H\n-",
    "path": "src/outputtype.h",
    "position": 21,
    "original_position": 21,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "a92b77e82f4905e8a0568b3de6b53345356dbf58",
    "user": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit a92b77e82f4905e8a0568b3de6b53345356dbf58 (\"List output types in an array in order to be iterated over\"):\r\n\r\nNit: leave newline at end of file (or am I misreading this diff?)",
    "created_at": "2020-01-04T07:35:47Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363021586",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363021586"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363021586"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363021586/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 50,
    "original_line": 50,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363021754",
    "pull_request_review_id": 338341981,
    "id": 363021754,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzAyMTc1NA==",
    "diff_hunk": "@@ -80,22 +80,30 @@ CTxDestination AddAndGetDestinationForScript(FillableSigningProvider& keystore,\n {\n     // Add script to keystore\n     keystore.AddCScript(script);\n+    ScriptHash sh(script);\n     // Note that scripts over 520 bytes are not yet supported.\n     switch (type) {\n-    case OutputType::LEGACY:\n-        return ScriptHash(script);\n+    case OutputType::LEGACY: {\n+        keystore.AddCScript(GetScriptForDestination(sh));\n+        return sh;\n+    }",
    "path": "src/outputtype.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "50145c8ad53c604713689ae587badbb0a473471a",
    "user": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit 50145c8ad53c604713689ae587badbb0a473471a (\"Store p2sh scripts in AddAndGetDestinationForScript\"):\r\n\r\nWhy add brackets?",
    "created_at": "2020-01-04T07:40:42Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363021754",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363021754"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363021754"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363021754/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 89,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363021900",
    "pull_request_review_id": 338341981,
    "id": 363021900,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzAyMTkwMA==",
    "diff_hunk": "@@ -80,22 +80,30 @@ CTxDestination AddAndGetDestinationForScript(FillableSigningProvider& keystore,\n {\n     // Add script to keystore\n     keystore.AddCScript(script);\n+    ScriptHash sh(script);\n     // Note that scripts over 520 bytes are not yet supported.\n     switch (type) {\n-    case OutputType::LEGACY:\n-        return ScriptHash(script);\n+    case OutputType::LEGACY: {\n+        keystore.AddCScript(GetScriptForDestination(sh));\n+        return sh;\n+    }\n     case OutputType::P2SH_SEGWIT:\n     case OutputType::BECH32: {\n         CTxDestination witdest = WitnessV0ScriptHash(script);\n         CScript witprog = GetScriptForDestination(witdest);\n         // Check if the resulting program is solvable (i.e. doesn't use an uncompressed key)\n-        if (!IsSolvable(keystore, witprog)) return ScriptHash(script);\n+        if (!IsSolvable(keystore, witprog)) {\n+            keystore.AddCScript(GetScriptForDestination(sh));",
    "path": "src/outputtype.cpp",
    "position": 28,
    "original_position": 20,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "50145c8ad53c604713689ae587badbb0a473471a",
    "user": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit 50145c8ad53c604713689ae587badbb0a473471a (\"Store p2sh scripts in AddAndGetDestinationForScript\"):\r\n\r\nI think this could use a comment explaining why the `sh` dest is added to `keystore` when `witprog` is not solvable.",
    "created_at": "2020-01-04T07:43:34Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363021900",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363021900"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363021900"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363021900/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 98,
    "original_line": 98,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363027478",
    "pull_request_review_id": 338347019,
    "id": 363027478,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzAyNzQ3OA==",
    "diff_hunk": "@@ -572,9 +573,9 @@ bool CWallet::EncryptWallet(const SecureString& strWalletPassphrase)\n         Unlock(strWalletPassphrase);\n \n         // if we are using HD, replace the HD seed with a new one\n-        if (auto spk_man = m_spk_man.get()) {\n-            if (spk_man->IsHDEnabled()) {\n-                if (!spk_man->SetupGeneration(true)) {\n+        for (const auto& spk_man_pair : m_spk_managers) {\n+            if (spk_man_pair.second->IsHDEnabled()) {\n+                if (!spk_man_pair.second->SetupGeneration(true)) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 28,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "426ca7efd8e407e340610325de87c722db0def33",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is fine while there's only one (legacy) scriptPubKeyManager, but with descriptor wallets this would cause the seed to be reset three times. In the current descriptor wallet PR there's a separate code branch for descriptor wallets: https://github.com/bitcoin/bitcoin/pull/16528/files#diff-b2bb174788c7409b671c46ccc86034bdR580\r\n\r\nInstead of a loop, maybe just call the `LegacyScriptPubkeyMan`?",
    "created_at": "2020-01-04T10:22:07Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363027478",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363027478"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363027478"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363027478/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 578,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363058528",
    "pull_request_review_id": 338341981,
    "id": 363058528,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA1ODUyOA==",
    "diff_hunk": "@@ -144,4 +144,6 @@ inline uint256 uint256S(const std::string& str)\n     return rv;\n }\n \n+uint256& UINT256_ONE();",
    "path": "src/uint256.h",
    "position": 4,
    "original_position": 4,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "20a5c56d2f958bdd62e75bf9a5b4b3b95a7c2235",
    "user": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why not simply make this `extern uint256 UINT256_ONE;` instead of a function? ",
    "created_at": "2020-01-04T22:31:53Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363058528",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363058528"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363058528"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363058528/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 147,
    "original_line": 147,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363059635",
    "pull_request_review_id": 338373239,
    "id": 363059635,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA1OTYzNQ==",
    "diff_hunk": "@@ -1876,7 +1876,7 @@ static UniValue keypoolrefill(const JSONRPCRequest& request)\n     pwallet->TopUpKeyPool(kpSize);\n \n     if (pwallet->GetKeyPoolSize() < kpSize) {\n-        throw JSONRPCError(RPC_WALLET_ERROR, \"Error refreshing keypool.\");\n+        throw JSONRPCError(RPC_WALLET_ERROR, strprintf(\"Error refreshing keypool. %d\", pwallet->GetKeyPoolSize()));",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "15488dfc3efefe8d1517237b99fb0e778ed675fc",
    "user": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This looks like debug leftovers.",
    "created_at": "2020-01-04T23:06:39Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363059635",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363059635"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363059635"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363059635/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1879,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363060157",
    "pull_request_review_id": 338373239,
    "id": 363060157,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA2MDE1Nw==",
    "diff_hunk": "@@ -442,4 +442,20 @@ class LegacyScriptPubKeyMan : public ScriptPubKeyMan, public FillableSigningProv\n     std::set<CKeyID> GetKeys() const override;\n };\n \n+/** Wraps a LegacyScriptPubKeyMan so that it can be returned in a new unique_ptr */\n+class LegacySigningProvider : public SigningProvider\n+{\n+private:\n+    const LegacyScriptPubKeyMan& spk_man;\n+public:\n+    LegacySigningProvider(const LegacyScriptPubKeyMan& spk_man) : spk_man(spk_man) {}",
    "path": "src/wallet/scriptpubkeyman.h",
    "position": null,
    "original_position": 28,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "ea610db77da7f4ffa67792e31e8f824add178c33",
    "user": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Call it `m_spk_man` and avoid `a(a)` \u2192 `m_spk_man(spk_man)` ?",
    "created_at": "2020-01-04T23:22:52Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363060157",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363060157"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363060157"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363060157/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 451,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363425800",
    "pull_request_review_id": 338819302,
    "id": 363425800,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzQyNTgwMA==",
    "diff_hunk": "@@ -47,4 +50,3 @@ std::vector<CTxDestination> GetAllDestinationsForKey(const CPubKey& key);\n CTxDestination AddAndGetDestinationForScript(FillableSigningProvider& keystore, const CScript& script, OutputType);\n \n #endif // BITCOIN_OUTPUTTYPE_H\n-",
    "path": "src/outputtype.h",
    "position": 21,
    "original_position": 21,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "a92b77e82f4905e8a0568b3de6b53345356dbf58",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "There's an extra newline that's being removed.\r\n\r\nTechnically an unnecessary change, but oh well.",
    "created_at": "2020-01-06T18:42:19Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363425800",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363425800"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363425800"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363425800/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 50,
    "original_line": 50,
    "side": "LEFT",
    "in_reply_to_id": 363021586
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363430301",
    "pull_request_review_id": 338825153,
    "id": 363430301,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzQzMDMwMQ==",
    "diff_hunk": "@@ -144,4 +144,6 @@ inline uint256 uint256S(const std::string& str)\n     return rv;\n }\n \n+uint256& UINT256_ONE();",
    "path": "src/uint256.h",
    "position": 4,
    "original_position": 4,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "20a5c56d2f958bdd62e75bf9a5b4b3b95a7c2235",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Clang didn't like it. Something about static initialization order resulting in a potential uninitialized object access. There's a failed travis build you can check for the error.",
    "created_at": "2020-01-06T18:52:44Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363430301",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363430301"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363430301"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363430301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 147,
    "original_line": 147,
    "side": "RIGHT",
    "in_reply_to_id": 363058528
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363436115",
    "pull_request_review_id": 338832698,
    "id": 363436115,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzQzNjExNQ==",
    "diff_hunk": "@@ -572,9 +573,9 @@ bool CWallet::EncryptWallet(const SecureString& strWalletPassphrase)\n         Unlock(strWalletPassphrase);\n \n         // if we are using HD, replace the HD seed with a new one\n-        if (auto spk_man = m_spk_man.get()) {\n-            if (spk_man->IsHDEnabled()) {\n-                if (!spk_man->SetupGeneration(true)) {\n+        for (const auto& spk_man_pair : m_spk_managers) {\n+            if (spk_man_pair.second->IsHDEnabled()) {\n+                if (!spk_man_pair.second->SetupGeneration(true)) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 28,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "426ca7efd8e407e340610325de87c722db0def33",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done",
    "created_at": "2020-01-06T19:06:28Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363436115",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363436115"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363436115"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363436115/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 578,
    "side": "RIGHT",
    "in_reply_to_id": 363027478
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363436223",
    "pull_request_review_id": 338832817,
    "id": 363436223,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzQzNjIyMw==",
    "diff_hunk": "@@ -80,22 +80,30 @@ CTxDestination AddAndGetDestinationForScript(FillableSigningProvider& keystore,\n {\n     // Add script to keystore\n     keystore.AddCScript(script);\n+    ScriptHash sh(script);\n     // Note that scripts over 520 bytes are not yet supported.\n     switch (type) {\n-    case OutputType::LEGACY:\n-        return ScriptHash(script);\n+    case OutputType::LEGACY: {\n+        keystore.AddCScript(GetScriptForDestination(sh));\n+        return sh;\n+    }",
    "path": "src/outputtype.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "50145c8ad53c604713689ae587badbb0a473471a",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "They were needed in a previous iteration. Removed.",
    "created_at": "2020-01-06T19:06:42Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363436223",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363436223"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363436223"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363436223/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 89,
    "side": "RIGHT",
    "in_reply_to_id": 363021754
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363436265",
    "pull_request_review_id": 338832858,
    "id": 363436265,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzQzNjI2NQ==",
    "diff_hunk": "@@ -80,22 +80,30 @@ CTxDestination AddAndGetDestinationForScript(FillableSigningProvider& keystore,\n {\n     // Add script to keystore\n     keystore.AddCScript(script);\n+    ScriptHash sh(script);\n     // Note that scripts over 520 bytes are not yet supported.\n     switch (type) {\n-    case OutputType::LEGACY:\n-        return ScriptHash(script);\n+    case OutputType::LEGACY: {\n+        keystore.AddCScript(GetScriptForDestination(sh));\n+        return sh;\n+    }\n     case OutputType::P2SH_SEGWIT:\n     case OutputType::BECH32: {\n         CTxDestination witdest = WitnessV0ScriptHash(script);\n         CScript witprog = GetScriptForDestination(witdest);\n         // Check if the resulting program is solvable (i.e. doesn't use an uncompressed key)\n-        if (!IsSolvable(keystore, witprog)) return ScriptHash(script);\n+        if (!IsSolvable(keystore, witprog)) {\n+            keystore.AddCScript(GetScriptForDestination(sh));",
    "path": "src/outputtype.cpp",
    "position": 28,
    "original_position": 20,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "50145c8ad53c604713689ae587badbb0a473471a",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done",
    "created_at": "2020-01-06T19:06:48Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363436265",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363436265"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363436265"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363436265/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 98,
    "original_line": 98,
    "side": "RIGHT",
    "in_reply_to_id": 363021900
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363436303",
    "pull_request_review_id": 338832899,
    "id": 363436303,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzQzNjMwMw==",
    "diff_hunk": "@@ -1876,7 +1876,7 @@ static UniValue keypoolrefill(const JSONRPCRequest& request)\n     pwallet->TopUpKeyPool(kpSize);\n \n     if (pwallet->GetKeyPoolSize() < kpSize) {\n-        throw JSONRPCError(RPC_WALLET_ERROR, \"Error refreshing keypool.\");\n+        throw JSONRPCError(RPC_WALLET_ERROR, strprintf(\"Error refreshing keypool. %d\", pwallet->GetKeyPoolSize()));",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "15488dfc3efefe8d1517237b99fb0e778ed675fc",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Removed",
    "created_at": "2020-01-06T19:06:52Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363436303",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363436303"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363436303"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363436303/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1879,
    "side": "RIGHT",
    "in_reply_to_id": 363059635
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363436342",
    "pull_request_review_id": 338832949,
    "id": 363436342,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzQzNjM0Mg==",
    "diff_hunk": "@@ -442,4 +442,20 @@ class LegacyScriptPubKeyMan : public ScriptPubKeyMan, public FillableSigningProv\n     std::set<CKeyID> GetKeys() const override;\n };\n \n+/** Wraps a LegacyScriptPubKeyMan so that it can be returned in a new unique_ptr */\n+class LegacySigningProvider : public SigningProvider\n+{\n+private:\n+    const LegacyScriptPubKeyMan& spk_man;\n+public:\n+    LegacySigningProvider(const LegacyScriptPubKeyMan& spk_man) : spk_man(spk_man) {}",
    "path": "src/wallet/scriptpubkeyman.h",
    "position": null,
    "original_position": 28,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "ea610db77da7f4ffa67792e31e8f824add178c33",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done",
    "created_at": "2020-01-06T19:06:57Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363436342",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363436342"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363436342"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363436342/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 451,
    "side": "RIGHT",
    "in_reply_to_id": 363060157
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363561777",
    "pull_request_review_id": 338994112,
    "id": 363561777,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzU2MTc3Nw==",
    "diff_hunk": "@@ -47,4 +50,3 @@ std::vector<CTxDestination> GetAllDestinationsForKey(const CPubKey& key);\n CTxDestination AddAndGetDestinationForScript(FillableSigningProvider& keystore, const CScript& script, OutputType);\n \n #endif // BITCOIN_OUTPUTTYPE_H\n-",
    "path": "src/outputtype.h",
    "position": 21,
    "original_position": 21,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "a92b77e82f4905e8a0568b3de6b53345356dbf58",
    "user": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Oh, I misread then. +1 removing extra NL.",
    "created_at": "2020-01-07T01:50:49Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363561777",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363561777"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363561777"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363561777/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 50,
    "original_line": 50,
    "side": "LEFT",
    "in_reply_to_id": 363021586
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363562064",
    "pull_request_review_id": 338994441,
    "id": 363562064,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzU2MjA2NA==",
    "diff_hunk": "@@ -144,4 +144,6 @@ inline uint256 uint256S(const std::string& str)\n     return rv;\n }\n \n+uint256& UINT256_ONE();",
    "path": "src/uint256.h",
    "position": 4,
    "original_position": 4,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "20a5c56d2f958bdd62e75bf9a5b4b3b95a7c2235",
    "user": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Weird. :/ I've seen that once before too. Sounds like a compiler bug tbh.",
    "created_at": "2020-01-07T01:52:17Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363562064",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363562064"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363562064"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363562064/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 147,
    "original_line": 147,
    "side": "RIGHT",
    "in_reply_to_id": 363058528
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363792482",
    "pull_request_review_id": 339295117,
    "id": 363792482,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzc5MjQ4Mg==",
    "diff_hunk": "@@ -569,7 +574,7 @@ bool CWallet::EncryptWallet(const SecureString& strWalletPassphrase)\n         Unlock(strWalletPassphrase);\n \n         // if we are using HD, replace the HD seed with a new one\n-        if (auto spk_man = m_spk_man.get()) {\n+        if (auto spk_man = GetLegacyScriptPubKeyMan()) {",
    "path": "src/wallet/wallet.cpp",
    "position": 58,
    "original_position": 58,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "b5afe999206ee6982fd555b490fae6dd50a1c0c3",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Are we not going to replace the seed for descriptor wallets?",
    "created_at": "2020-01-07T15:08:16Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363792482",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363792482"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363792482"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363792482/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 585,
    "original_line": 585,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363851907",
    "pull_request_review_id": 339375414,
    "id": 363851907,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg1MTkwNw==",
    "diff_hunk": "@@ -569,7 +574,7 @@ bool CWallet::EncryptWallet(const SecureString& strWalletPassphrase)\n         Unlock(strWalletPassphrase);\n \n         // if we are using HD, replace the HD seed with a new one\n-        if (auto spk_man = m_spk_man.get()) {\n+        if (auto spk_man = GetLegacyScriptPubKeyMan()) {",
    "path": "src/wallet/wallet.cpp",
    "position": 58,
    "original_position": 58,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "b5afe999206ee6982fd555b490fae6dd50a1c0c3",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "No, descriptor wallets have a different way of doing it.",
    "created_at": "2020-01-07T17:05:38Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363851907",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363851907"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363851907"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363851907/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 585,
    "original_line": 585,
    "side": "RIGHT",
    "in_reply_to_id": 363792482
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367091529",
    "pull_request_review_id": 343500995,
    "id": 367091529,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzA5MTUyOQ==",
    "diff_hunk": "@@ -124,9 +124,12 @@ void EnsureWalletIsUnlocked(const CWallet* pwallet)\n     }\n }\n \n-LegacyScriptPubKeyMan& EnsureLegacyScriptPubKeyMan(CWallet& wallet)\n+LegacyScriptPubKeyMan& EnsureLegacyScriptPubKeyMan(CWallet& wallet, bool also_create)",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 6,
    "original_position": 5,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "cb90d1b6f9d92fb8aaabb76ff129e001aae89e6b",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "What's the general usage for this new boolean? I see it's set to true for most importing, but not for `addmultisigaddress` for instance. A guiding comment on usage would be helpful.",
    "created_at": "2020-01-15T20:30:17Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367091529",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367091529"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367091529"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367091529/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 128,
    "original_line": 128,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367094287",
    "pull_request_review_id": 343500995,
    "id": 367094287,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzA5NDI4Nw==",
    "diff_hunk": "@@ -80,22 +80,30 @@ CTxDestination AddAndGetDestinationForScript(FillableSigningProvider& keystore,\n {\n     // Add script to keystore\n     keystore.AddCScript(script);\n+    ScriptHash sh(script);\n     // Note that scripts over 520 bytes are not yet supported.\n     switch (type) {\n     case OutputType::LEGACY:\n-        return ScriptHash(script);\n+        keystore.AddCScript(GetScriptForDestination(sh));\n+        return sh;\n     case OutputType::P2SH_SEGWIT:\n     case OutputType::BECH32: {\n         CTxDestination witdest = WitnessV0ScriptHash(script);\n         CScript witprog = GetScriptForDestination(witdest);\n         // Check if the resulting program is solvable (i.e. doesn't use an uncompressed key)\n-        if (!IsSolvable(keystore, witprog)) return ScriptHash(script);\n+        if (!IsSolvable(keystore, witprog)) {\n+            // Since the wsh is invalid, add and return the sh instead.\n+            keystore.AddCScript(GetScriptForDestination(sh));\n+            return sh;\n+        }\n         // Add the redeemscript, so that P2WSH and P2SH-P2WSH outputs are recognized as ours.\n         keystore.AddCScript(witprog);\n         if (type == OutputType::BECH32) {\n             return witdest;\n         } else {\n-            return ScriptHash(witprog);\n+            ScriptHash wsh = ScriptHash(witprog);",
    "path": "src/outputtype.cpp",
    "position": null,
    "original_position": 28,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "28cea92c227b7fdcc1b39caf5bfc9efb8b63141d",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "micro-nit: wsh is a bit of a minsnomer, it's `sh_w`, or something",
    "created_at": "2020-01-15T20:36:43Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367094287",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367094287"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367094287"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367094287/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 104,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367095280",
    "pull_request_review_id": 343500995,
    "id": 367095280,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzA5NTI4MA==",
    "diff_hunk": "@@ -384,7 +384,7 @@ bool LegacyScriptPubKeyMan::Upgrade(int prev_version, std::string& error)\n         hd_upgrade = true;\n     }\n     // Upgrade to HD chain split if necessary\n-    if (m_storage.CanSupportFeature(FEATURE_HD_SPLIT)) {\n+    if (m_storage.CanSupportFeature(FEATURE_HD_SPLIT) && hdChain.nVersion < 2 /* VERSION_HD_CHAIN_SPLIT */) {",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "c5842c171b9f94411ae826ac6214ec819f8bdda1",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "any way to actually use the constant rather than referring to it and hoping the value never changes?",
    "created_at": "2020-01-15T20:39:10Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367095280",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367095280"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367095280"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367095280/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 387,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367165331",
    "pull_request_review_id": 343595873,
    "id": 367165331,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE2NTMzMQ==",
    "diff_hunk": "@@ -124,9 +124,12 @@ void EnsureWalletIsUnlocked(const CWallet* pwallet)\n     }\n }\n \n-LegacyScriptPubKeyMan& EnsureLegacyScriptPubKeyMan(CWallet& wallet)\n+LegacyScriptPubKeyMan& EnsureLegacyScriptPubKeyMan(CWallet& wallet, bool also_create)",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 6,
    "original_position": 5,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "cb90d1b6f9d92fb8aaabb76ff129e001aae89e6b",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Added a comment.\r\n\r\nIt's to be used for RPCs that make a blank wallet no longer blank. `addmultisigaddress` wasn't doing this before, although I suppose the expected behavior of it with a blank wallet isn't really known (i.e. what do we want it to do?).",
    "created_at": "2020-01-15T23:44:19Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367165331",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367165331"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367165331"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367165331/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 128,
    "original_line": 128,
    "side": "RIGHT",
    "in_reply_to_id": 367091529
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367165372",
    "pull_request_review_id": 343595940,
    "id": 367165372,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE2NTM3Mg==",
    "diff_hunk": "@@ -80,22 +80,30 @@ CTxDestination AddAndGetDestinationForScript(FillableSigningProvider& keystore,\n {\n     // Add script to keystore\n     keystore.AddCScript(script);\n+    ScriptHash sh(script);\n     // Note that scripts over 520 bytes are not yet supported.\n     switch (type) {\n     case OutputType::LEGACY:\n-        return ScriptHash(script);\n+        keystore.AddCScript(GetScriptForDestination(sh));\n+        return sh;\n     case OutputType::P2SH_SEGWIT:\n     case OutputType::BECH32: {\n         CTxDestination witdest = WitnessV0ScriptHash(script);\n         CScript witprog = GetScriptForDestination(witdest);\n         // Check if the resulting program is solvable (i.e. doesn't use an uncompressed key)\n-        if (!IsSolvable(keystore, witprog)) return ScriptHash(script);\n+        if (!IsSolvable(keystore, witprog)) {\n+            // Since the wsh is invalid, add and return the sh instead.\n+            keystore.AddCScript(GetScriptForDestination(sh));\n+            return sh;\n+        }\n         // Add the redeemscript, so that P2WSH and P2SH-P2WSH outputs are recognized as ours.\n         keystore.AddCScript(witprog);\n         if (type == OutputType::BECH32) {\n             return witdest;\n         } else {\n-            return ScriptHash(witprog);\n+            ScriptHash wsh = ScriptHash(witprog);",
    "path": "src/outputtype.cpp",
    "position": null,
    "original_position": 28,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "28cea92c227b7fdcc1b39caf5bfc9efb8b63141d",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done",
    "created_at": "2020-01-15T23:44:28Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367165372",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367165372"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367165372"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367165372/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 104,
    "side": "RIGHT",
    "in_reply_to_id": 367094287
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367165559",
    "pull_request_review_id": 343596188,
    "id": 367165559,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE2NTU1OQ==",
    "diff_hunk": "@@ -384,7 +384,7 @@ bool LegacyScriptPubKeyMan::Upgrade(int prev_version, std::string& error)\n         hd_upgrade = true;\n     }\n     // Upgrade to HD chain split if necessary\n-    if (m_storage.CanSupportFeature(FEATURE_HD_SPLIT)) {\n+    if (m_storage.CanSupportFeature(FEATURE_HD_SPLIT) && hdChain.nVersion < 2 /* VERSION_HD_CHAIN_SPLIT */) {",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "c5842c171b9f94411ae826ac6214ec819f8bdda1",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes. the proper header is being imported now, so no need for this hack. Changed it.\r\n\r\nAlso, the value should never change because its persisted to wallet files and changing it would break backwards compatibility.",
    "created_at": "2020-01-15T23:45:13Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367165559",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367165559"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367165559"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367165559/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 387,
    "side": "RIGHT",
    "in_reply_to_id": 367095280
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367166645",
    "pull_request_review_id": 343597483,
    "id": 367166645,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE2NjY0NQ==",
    "diff_hunk": "@@ -124,9 +124,12 @@ void EnsureWalletIsUnlocked(const CWallet* pwallet)\n     }\n }\n \n-LegacyScriptPubKeyMan& EnsureLegacyScriptPubKeyMan(CWallet& wallet)\n+LegacyScriptPubKeyMan& EnsureLegacyScriptPubKeyMan(CWallet& wallet, bool also_create)",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 6,
    "original_position": 5,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "cb90d1b6f9d92fb8aaabb76ff129e001aae89e6b",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Hm, yeah it would be a weird non-blank wallet. I'm fine as-is for now.",
    "created_at": "2020-01-15T23:49:13Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367166645",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367166645"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367166645"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367166645/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 128,
    "original_line": 128,
    "side": "RIGHT",
    "in_reply_to_id": 367091529
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367837892",
    "pull_request_review_id": 344450791,
    "id": 367837892,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzgzNzg5Mg==",
    "diff_hunk": "@@ -2993,10 +2993,9 @@ DBErrors CWallet::LoadWallet(bool& fFirstRunRet)\n         }\n     }\n \n+    // This wallet is in its first run if all of these are empty and this isn't blank or no privkeys",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "6c953ae84f4272d036602d5c7cf19456d9f39863",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Comment doesn't make sense referring to \"all of these are empty\" now.\r\n\r\nEDIT: it makes slightly more sense after later commit, but it would be better to explicitly say \"all the SPK managers are empty\"",
    "created_at": "2020-01-17T09:23:31Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367837892",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367837892"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367837892"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367837892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2996,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367840645",
    "pull_request_review_id": 344450791,
    "id": 367840645,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg0MDY0NQ==",
    "diff_hunk": "@@ -1056,7 +1055,7 @@ bool LegacyScriptPubKeyMan::NewKeyPool()\n         if (!TopUp()) {\n             return false;\n         }\n-        WalletLogPrintf(\"LegacyScriptPubKeyMan::NewKeyPool rewrote keypool\\n\");\n+        WalletLogPrintf(\"CWallet::NewKeyPool rewrote keypool\\n\");",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": null,
    "original_position": 24,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "0c4cb4956003c83706c812dfd699f5b22ab58d44",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't understand the purpose of this change, more explanation pls?",
    "created_at": "2020-01-17T09:29:52Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367840645",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367840645"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367840645"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367840645/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1058,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367855853",
    "pull_request_review_id": 344450791,
    "id": 367855853,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg1NTg1Mw==",
    "diff_hunk": "@@ -4135,7 +4188,26 @@ LegacyScriptPubKeyMan* CWallet::GetOrCreateLegacyScriptPubKeyMan()\n \n void CWallet::SetupLegacyScriptPubKeyMan()\n {\n-    if (!m_spk_man) m_spk_man = MakeUnique<LegacyScriptPubKeyMan>(*this);\n+    if (!m_internal_spk_managers.empty() || !m_external_spk_managers.empty() || !m_spk_managers.empty()) {\n+        return;\n+    }\n+\n+    assert(m_internal_spk_managers.empty() && m_external_spk_managers.empty() && m_spk_managers.empty());",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 312,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "b4c48fbd5602f57e9bc59de83c6c256fdd0f2d71",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This assert seems a little unnecessary considering the if-statement above",
    "created_at": "2020-01-17T10:02:52Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367855853",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367855853"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367855853"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367855853/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 4195,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367859220",
    "pull_request_review_id": 344450791,
    "id": 367859220,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg1OTIyMA==",
    "diff_hunk": "@@ -4135,7 +4188,26 @@ LegacyScriptPubKeyMan* CWallet::GetOrCreateLegacyScriptPubKeyMan()\n \n void CWallet::SetupLegacyScriptPubKeyMan()\n {\n-    if (!m_spk_man) m_spk_man = MakeUnique<LegacyScriptPubKeyMan>(*this);\n+    if (!m_internal_spk_managers.empty() || !m_external_spk_managers.empty() || !m_spk_managers.empty()) {\n+        return;\n+    }\n+\n+    assert(m_internal_spk_managers.empty() && m_external_spk_managers.empty() && m_spk_managers.empty());\n+    auto spk_manager = std::unique_ptr<ScriptPubKeyMan>(new LegacyScriptPubKeyMan(*this));\n+    for (const auto& type : OUTPUT_TYPES) {\n+        m_internal_spk_managers[type] = spk_manager.get();\n+        m_external_spk_managers[type] = spk_manager.get();\n+    }\n+    m_spk_managers[spk_manager->GetID()] = std::move(spk_manager);\n+\n+    // These all need to exist and be the same\n+    assert(m_internal_spk_managers.count(OutputType::LEGACY) > 0);\n+    ScriptPubKeyMan* spk_man = m_internal_spk_managers.at(OutputType::LEGACY);\n+    for (const auto& type : OUTPUT_TYPES) {\n+        assert(m_internal_spk_managers.at(type) == spk_man);\n+        assert(m_external_spk_managers.at(type) == spk_man);\n+    }\n+    assert(m_spk_managers.size() == 1);",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 327,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "b4c48fbd5602f57e9bc59de83c6c256fdd0f2d71",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In what case would these asserts ever be hit, directly following the setup code? Is there a scenario you can think of?",
    "created_at": "2020-01-17T10:10:27Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367859220",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367859220"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367859220"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367859220/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 4203,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 4210,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367861313",
    "pull_request_review_id": 344450791,
    "id": 367861313,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg2MTMxMw==",
    "diff_hunk": "@@ -3906,7 +3910,7 @@ std::shared_ptr<CWallet> CWallet::CreateWalletFromFile(interfaces::Chain& chain,\n         // No need to read and scan block if block was created before\n         // our wallet birthday (as adjusted for block time variability)\n         Optional<int64_t> time_first_key;\n-        if (auto spk_man = walletInstance->m_spk_man.get()) {\n+        for (auto spk_man : walletInstance->GetActiveScriptPubKeyMans()) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 210,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "b4c48fbd5602f57e9bc59de83c6c256fdd0f2d71",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why only check the \"active\" SPKMans here?",
    "created_at": "2020-01-17T10:15:17Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367861313",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367861313"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367861313"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367861313/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3913,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367943118",
    "pull_request_review_id": 344587768,
    "id": 367943118,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk0MzExOA==",
    "diff_hunk": "@@ -2993,10 +2993,9 @@ DBErrors CWallet::LoadWallet(bool& fFirstRunRet)\n         }\n     }\n \n+    // This wallet is in its first run if all of these are empty and this isn't blank or no privkeys",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "6c953ae84f4272d036602d5c7cf19456d9f39863",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Edited the comment.",
    "created_at": "2020-01-17T13:48:51Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367943118",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367943118"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367943118"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367943118/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2996,
    "side": "RIGHT",
    "in_reply_to_id": 367837892
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367943252",
    "pull_request_review_id": 344587973,
    "id": 367943252,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk0MzI1Mg==",
    "diff_hunk": "@@ -1056,7 +1055,7 @@ bool LegacyScriptPubKeyMan::NewKeyPool()\n         if (!TopUp()) {\n             return false;\n         }\n-        WalletLogPrintf(\"LegacyScriptPubKeyMan::NewKeyPool rewrote keypool\\n\");\n+        WalletLogPrintf(\"CWallet::NewKeyPool rewrote keypool\\n\");",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": null,
    "original_position": 24,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "0c4cb4956003c83706c812dfd699f5b22ab58d44",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "On further examination, that entire commit doesn't make sense, so I've dropped it.",
    "created_at": "2020-01-17T13:49:09Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367943252",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367943252"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367943252"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367943252/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1058,
    "side": "RIGHT",
    "in_reply_to_id": 367840645
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367943290",
    "pull_request_review_id": 344588036,
    "id": 367943290,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk0MzI5MA==",
    "diff_hunk": "@@ -4135,7 +4188,26 @@ LegacyScriptPubKeyMan* CWallet::GetOrCreateLegacyScriptPubKeyMan()\n \n void CWallet::SetupLegacyScriptPubKeyMan()\n {\n-    if (!m_spk_man) m_spk_man = MakeUnique<LegacyScriptPubKeyMan>(*this);\n+    if (!m_internal_spk_managers.empty() || !m_external_spk_managers.empty() || !m_spk_managers.empty()) {\n+        return;\n+    }\n+\n+    assert(m_internal_spk_managers.empty() && m_external_spk_managers.empty() && m_spk_managers.empty());",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 312,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "b4c48fbd5602f57e9bc59de83c6c256fdd0f2d71",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Removed",
    "created_at": "2020-01-17T13:49:16Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367943290",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367943290"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367943290"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367943290/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 4195,
    "side": "RIGHT",
    "in_reply_to_id": 367855853
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367943387",
    "pull_request_review_id": 344588193,
    "id": 367943387,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk0MzM4Nw==",
    "diff_hunk": "@@ -4135,7 +4188,26 @@ LegacyScriptPubKeyMan* CWallet::GetOrCreateLegacyScriptPubKeyMan()\n \n void CWallet::SetupLegacyScriptPubKeyMan()\n {\n-    if (!m_spk_man) m_spk_man = MakeUnique<LegacyScriptPubKeyMan>(*this);\n+    if (!m_internal_spk_managers.empty() || !m_external_spk_managers.empty() || !m_spk_managers.empty()) {\n+        return;\n+    }\n+\n+    assert(m_internal_spk_managers.empty() && m_external_spk_managers.empty() && m_spk_managers.empty());\n+    auto spk_manager = std::unique_ptr<ScriptPubKeyMan>(new LegacyScriptPubKeyMan(*this));\n+    for (const auto& type : OUTPUT_TYPES) {\n+        m_internal_spk_managers[type] = spk_manager.get();\n+        m_external_spk_managers[type] = spk_manager.get();\n+    }\n+    m_spk_managers[spk_manager->GetID()] = std::move(spk_manager);\n+\n+    // These all need to exist and be the same\n+    assert(m_internal_spk_managers.count(OutputType::LEGACY) > 0);\n+    ScriptPubKeyMan* spk_man = m_internal_spk_managers.at(OutputType::LEGACY);\n+    for (const auto& type : OUTPUT_TYPES) {\n+        assert(m_internal_spk_managers.at(type) == spk_man);\n+        assert(m_external_spk_managers.at(type) == spk_man);\n+    }\n+    assert(m_spk_managers.size() == 1);",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 327,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "b4c48fbd5602f57e9bc59de83c6c256fdd0f2d71",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't think so. I've removed these asserts.",
    "created_at": "2020-01-17T13:49:29Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367943387",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367943387"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367943387"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367943387/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 4203,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 4210,
    "side": "RIGHT",
    "in_reply_to_id": 367859220
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367943443",
    "pull_request_review_id": 344588259,
    "id": 367943443,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk0MzQ0Mw==",
    "diff_hunk": "@@ -3906,7 +3910,7 @@ std::shared_ptr<CWallet> CWallet::CreateWalletFromFile(interfaces::Chain& chain,\n         // No need to read and scan block if block was created before\n         // our wallet birthday (as adjusted for block time variability)\n         Optional<int64_t> time_first_key;\n-        if (auto spk_man = walletInstance->m_spk_man.get()) {\n+        for (auto spk_man : walletInstance->GetActiveScriptPubKeyMans()) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 210,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "b4c48fbd5602f57e9bc59de83c6c256fdd0f2d71",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Changed to check all.",
    "created_at": "2020-01-17T13:49:36Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367943443",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367943443"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r367943443"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367943443/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3913,
    "side": "RIGHT",
    "in_reply_to_id": 367861313
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368050039",
    "pull_request_review_id": 344728927,
    "id": 368050039,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA1MDAzOQ==",
    "diff_hunk": "@@ -4135,7 +4188,26 @@ LegacyScriptPubKeyMan* CWallet::GetOrCreateLegacyScriptPubKeyMan()\n \n void CWallet::SetupLegacyScriptPubKeyMan()\n {\n-    if (!m_spk_man) m_spk_man = MakeUnique<LegacyScriptPubKeyMan>(*this);\n+    if (!m_internal_spk_managers.empty() || !m_external_spk_managers.empty() || !m_spk_managers.empty()) {\n+        return;\n+    }\n+\n+    assert(m_internal_spk_managers.empty() && m_external_spk_managers.empty() && m_spk_managers.empty());\n+    auto spk_manager = std::unique_ptr<ScriptPubKeyMan>(new LegacyScriptPubKeyMan(*this));\n+    for (const auto& type : OUTPUT_TYPES) {\n+        m_internal_spk_managers[type] = spk_manager.get();\n+        m_external_spk_managers[type] = spk_manager.get();\n+    }\n+    m_spk_managers[spk_manager->GetID()] = std::move(spk_manager);\n+\n+    // These all need to exist and be the same\n+    assert(m_internal_spk_managers.count(OutputType::LEGACY) > 0);\n+    ScriptPubKeyMan* spk_man = m_internal_spk_managers.at(OutputType::LEGACY);\n+    for (const auto& type : OUTPUT_TYPES) {\n+        assert(m_internal_spk_managers.at(type) == spk_man);\n+        assert(m_external_spk_managers.at(type) == spk_man);\n+    }\n+    assert(m_spk_managers.size() == 1);",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 327,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "b4c48fbd5602f57e9bc59de83c6c256fdd0f2d71",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think a better solution would be to have this return a bool, but that's an improvement we can make in the future as it's really a belt-and-suspenders check. And also have this check sameness check somewhere.",
    "created_at": "2020-01-17T17:25:29Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r368050039",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368050039"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r368050039"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368050039/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 4203,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 4210,
    "side": "RIGHT",
    "in_reply_to_id": 367859220
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368059107",
    "pull_request_review_id": 344741034,
    "id": 368059107,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA1OTEwNw==",
    "diff_hunk": "@@ -3906,7 +3910,7 @@ std::shared_ptr<CWallet> CWallet::CreateWalletFromFile(interfaces::Chain& chain,\n         // No need to read and scan block if block was created before\n         // our wallet birthday (as adjusted for block time variability)\n         Optional<int64_t> time_first_key;\n-        if (auto spk_man = walletInstance->m_spk_man.get()) {\n+        for (auto spk_man : walletInstance->GetActiveScriptPubKeyMans()) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 210,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "b4c48fbd5602f57e9bc59de83c6c256fdd0f2d71",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "not sure this was needed, but it's a safe change",
    "created_at": "2020-01-17T17:48:46Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r368059107",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368059107"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r368059107"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368059107/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3913,
    "side": "RIGHT",
    "in_reply_to_id": 367861313
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368691383",
    "pull_request_review_id": 345490342,
    "id": 368691383,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODY5MTM4Mw==",
    "diff_hunk": "@@ -27,6 +28,8 @@ enum class OutputType {\n     CHANGE_AUTO,\n };\n \n+const std::array<OutputType, 3> OUTPUT_TYPES = {OutputType::LEGACY, OutputType::P2SH_SEGWIT, OutputType::BECH32};",
    "path": "src/outputtype.h",
    "position": null,
    "original_position": 12,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "126d6945e38cdc47b1227cdacfaa456714efcdf5",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Doesn't defining the value of non-primitive constants in the header file potentially cause linker issues in C++ (or duplication, as this literal data will be included in multiple files)?. I think it's better to only declare the variable here then initialize the value in the `cpp`.",
    "created_at": "2020-01-20T19:03:02Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r368691383",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368691383"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r368691383"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368691383/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 31,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368739441",
    "pull_request_review_id": 345549285,
    "id": 368739441,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODczOTQ0MQ==",
    "diff_hunk": "@@ -27,6 +28,8 @@ enum class OutputType {\n     CHANGE_AUTO,\n };\n \n+const std::array<OutputType, 3> OUTPUT_TYPES = {OutputType::LEGACY, OutputType::P2SH_SEGWIT, OutputType::BECH32};",
    "path": "src/outputtype.h",
    "position": null,
    "original_position": 12,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "126d6945e38cdc47b1227cdacfaa456714efcdf5",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't think this would cause any issues since it's const. I also haven't seen any linker warnings or errors about this. I think there would only be some duplication, but isn't that the same for any constant global variable that is defined in a header?",
    "created_at": "2020-01-20T22:01:51Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r368739441",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368739441"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r368739441"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368739441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 31,
    "side": "RIGHT",
    "in_reply_to_id": 368691383
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368766440",
    "pull_request_review_id": 345581846,
    "id": 368766440,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODc2NjQ0MA==",
    "diff_hunk": "@@ -27,6 +28,8 @@ enum class OutputType {\n     CHANGE_AUTO,\n };\n \n+const std::array<OutputType, 3> OUTPUT_TYPES = {OutputType::LEGACY, OutputType::P2SH_SEGWIT, OutputType::BECH32};",
    "path": "src/outputtype.h",
    "position": null,
    "original_position": 12,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "126d6945e38cdc47b1227cdacfaa456714efcdf5",
    "user": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "If you are fine trusting the word of [Microsoft](https://docs.microsoft.com/en-us/cpp/cpp/const-cpp?view=vs-2019),\r\n\r\n> In C, constant values default to external linkage, so they can appear only in source files. In C++, constant values default to internal linkage, which allows them to appear in header files.\r\n\r\nAnother source said C++ does not normally create storage for consts, which I assume means they work like #defines, in which case there shouldn't be wasted duplicate data entries either.",
    "created_at": "2020-01-21T00:28:25Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r368766440",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368766440"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r368766440"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368766440/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 31,
    "side": "RIGHT",
    "in_reply_to_id": 368691383
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370316391",
    "pull_request_review_id": 347557798,
    "id": 370316391,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMxNjM5MQ==",
    "diff_hunk": "@@ -27,6 +28,8 @@ enum class OutputType {\n     CHANGE_AUTO,\n };\n \n+const std::array<OutputType, 3> OUTPUT_TYPES = {OutputType::LEGACY, OutputType::P2SH_SEGWIT, OutputType::BECH32};",
    "path": "src/outputtype.h",
    "position": null,
    "original_position": 12,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "126d6945e38cdc47b1227cdacfaa456714efcdf5",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "If you replace the {...} initializer with a function call, and then have the constant in multiple translation units, the function will get called once for each.",
    "created_at": "2020-01-23T19:39:20Z",
    "updated_at": "2020-01-23T21:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r370316391",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370316391"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r370316391"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370316391/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 31,
    "side": "RIGHT",
    "in_reply_to_id": 368691383
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370377070",
    "pull_request_review_id": 347636494,
    "id": 370377070,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM3NzA3MA==",
    "diff_hunk": "@@ -27,6 +28,8 @@ enum class OutputType {\n     CHANGE_AUTO,\n };\n \n+const std::array<OutputType, 3> OUTPUT_TYPES = {OutputType::LEGACY, OutputType::P2SH_SEGWIT, OutputType::BECH32};",
    "path": "src/outputtype.h",
    "position": null,
    "original_position": 12,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "126d6945e38cdc47b1227cdacfaa456714efcdf5",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I moved the initialization to the cpp file",
    "created_at": "2020-01-23T21:58:46Z",
    "updated_at": "2020-01-23T21:58:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r370377070",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370377070"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r370377070"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370377070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 31,
    "side": "RIGHT",
    "in_reply_to_id": 368691383
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/375419985",
    "pull_request_review_id": 353929306,
    "id": 375419985,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQxOTk4NQ==",
    "diff_hunk": "@@ -384,7 +384,7 @@ bool LegacyScriptPubKeyMan::Upgrade(int prev_version, std::string& error)\n         hd_upgrade = true;\n     }\n     // Upgrade to HD chain split if necessary\n-    if (m_storage.CanSupportFeature(FEATURE_HD_SPLIT)) {\n+    if (m_storage.CanSupportFeature(FEATURE_HD_SPLIT) && CHDChain::VERSION_HD_CHAIN_SPLIT) {",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": 69,
    "original_position": 5,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "415afcccd3e5583defdb76e3a280f48e98983301",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"HD Split: Avoid redundant upgrades\" (415afcccd3e5583defdb76e3a280f48e98983301):\r\n\r\nThis seems buggy and the change looks like it has no effect. Is this supposed to say `&& hdChain.nVersion < CHDChain::VERSION_HD_CHAIN_SPLIT`?",
    "created_at": "2020-02-05T18:08:25Z",
    "updated_at": "2020-02-05T18:57:12Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r375419985",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/375419985"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r375419985"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/375419985/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 386,
    "original_line": 387,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/375426516",
    "pull_request_review_id": 353929306,
    "id": 375426516,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQyNjUxNg==",
    "diff_hunk": "@@ -569,7 +574,7 @@ bool CWallet::EncryptWallet(const SecureString& strWalletPassphrase)\n         Unlock(strWalletPassphrase);\n \n         // if we are using HD, replace the HD seed with a new one\n-        if (auto spk_man = m_spk_man.get()) {\n+        if (auto spk_man = GetLegacyScriptPubKeyMan()) {",
    "path": "src/wallet/wallet.cpp",
    "position": 58,
    "original_position": 58,
    "commit_id": "3f373659d732a5b1e5fdc692a45b2b8179f66bec",
    "original_commit_id": "b5afe999206ee6982fd555b490fae6dd50a1c0c3",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "re: https://github.com/bitcoin/bitcoin/pull/17261#discussion_r363792482\r\n\r\n> No, descriptor wallets have a different way of doing it.\r\n\r\nIn commit \"Box the wallet: Add multiple keyman maps and loops\" (c729afd0a3b74a3943e4c359270beaf3e6ff8a7b):\r\n\r\nIt seems bad to do nothing at all and keep using unencrypted seeds for non-legacy wallets, and the comment here doesn't here doesn't explain any legacy/nonlegacy distinction. It would seem safer to trigger some kind of error for non-legacy wallets if planned behavior hasn't been implemented yet, than to just do nothing.\r\n\r\nIf there is supposed to be legacy / non-legacy distinction, it would seem better to move legacy code out of CWallet into LegacyScriptPubKeyMan in a `PostEncrypt` or similar ScriptPubKeyMan virtual method\r\n\r\n",
    "created_at": "2020-02-05T18:21:00Z",
    "updated_at": "2020-02-05T18:57:12Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r375426516",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/375426516"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17261#discussion_r375426516"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/375426516/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 585,
    "original_line": 585,
    "side": "RIGHT",
    "in_reply_to_id": 363792482
  }
]