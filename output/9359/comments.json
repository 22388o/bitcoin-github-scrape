[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/267559195",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9359#issuecomment-267559195",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9359",
    "id": 267559195,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NzU1OTE5NQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-16T10:03:09Z",
    "updated_at": "2016-12-16T10:04:24Z",
    "author_association": "MEMBER",
    "body": "Seems a duplicate of #8717?\r\n\r\n(except that you add a test)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/267559195/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/267628548",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9359#issuecomment-267628548",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9359",
    "id": 267628548,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NzYyODU0OA==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-16T16:08:36Z",
    "updated_at": "2016-12-16T16:08:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "@laanwj, it's basically the same as #8717 (which I didn't know about) except it adds the test and places the new assignment in between fCreditCached and fAvailableCreditCached following the order of CWalletTx class members. So I think it's a slightly better PR.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/267628548/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268489355",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9359#issuecomment-268489355",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9359",
    "id": 268489355,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODQ4OTM1NQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-21T10:29:38Z",
    "updated_at": "2016-12-21T10:30:21Z",
    "author_association": "MEMBER",
    "body": "Right. Will merge #8717 first, then we can rebase this into a test-only pull.\r\n(utACK otherwise)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268489355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/278553319",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9359#issuecomment-278553319",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9359",
    "id": 278553319,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODU1MzMxOQ==",
    "user": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?u=8aa4d0fd79dff5cf64a98205c78bc1c96b0bf4b6&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-09T05:46:46Z",
    "updated_at": "2017-02-09T05:46:46Z",
    "author_association": "MEMBER",
    "body": "ACK 52045d1 (test passes on version rebased onto master)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/278553319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/283307455",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9359#issuecomment-283307455",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9359",
    "id": 283307455,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MzMwNzQ1NQ==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-01T10:47:13Z",
    "updated_at": "2017-03-01T10:47:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased 52045d1bb71cd4be7ae269c63a8260df02a8cb56 -> 7ed143c10ec7c34843cb025951a6bbf279d1774d ([immature.5](https://github.com/ryanofsky/bitcoin/commits/pr/immature.5) -> [immature.6](https://github.com/ryanofsky/bitcoin/commits/pr/immature.6)) because of conflict with recent changes in wallet_tests.cpp.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/283307455/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/283786968",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9359#issuecomment-283786968",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9359",
    "id": 283786968,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4Mzc4Njk2OA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-02T21:26:06Z",
    "updated_at": "2017-03-02T21:26:06Z",
    "author_association": "MEMBER",
    "body": "utACK 7ed143c10ec7c34843cb025951a6bbf279d1774d. Sorry, somehow forgot about this pull.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/283786968/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93428610",
    "pull_request_review_id": 13955117,
    "id": 93428610,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDkzNDI4NjEw",
    "diff_hunk": "@@ -351,4 +353,28 @@ BOOST_AUTO_TEST_CASE(ApproximateBestSubset)\n     BOOST_CHECK_EQUAL(setCoinsRet.size(), 2U);\n }\n \n+// Check that GetImmatureCredit() returns a newly calculated value instead of\n+// the cached value after a MarkDirty() call.\n+//\n+// This is regression test written to verify a bugfix for the immature credit\n+// function. Similar tests probably should be written for the other credit and\n+// debit functions.\n+BOOST_FIXTURE_TEST_CASE(coin_mark_dirty_immature_credit, TestChain100Setup)\n+{\n+    CWallet wallet;\n+    CWalletTx wtx(&wallet, MakeTransactionRef(coinbaseTxns.back()));\n+    wtx.hashBlock = chainActive.Tip()->GetBlockHash();\n+    wtx.nIndex = 0;\n+\n+    // Call GetImmatureCredit() once before adding the key to the wallet to\n+    // cache the current immature credit amount, which is 0.\n+    BOOST_CHECK_EQUAL(wtx.GetImmatureCredit(), 0);",
    "path": "src/wallet/test/wallet_tests.cpp",
    "position": 20,
    "original_position": 28,
    "commit_id": "7ed143c10ec7c34843cb025951a6bbf279d1774d",
    "original_commit_id": "e18c4b6178ff5067675c07f21652d26eca6389bf",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Travis:\r\n\r\n```\r\nAssertion failed: lock cs_main not held in ../../src/wallet/wallet.cpp:3761; locks held:\r\nRunning 221 test cases...\r\nunknown location(0): fatal error: in \"wallet_tests/coin_mark_dirty_immature_credit\": signal: SIGABRT (application abort requested)\r\n../../src/wallet/test/wallet_tests.cpp(371): last checkpoint\r\ntest_bitcoin: ../../src/key.cpp:300: void ECC_Start(): Assertion `secp256k1_context_sign == __null' failed.\r\nunknown location(0): fatal error: in \"wallet_tests/coin_selection_tests\": signal: SIGABRT (application abort requested)\r\n../../src/wallet/test/wallet_tests.cpp(70): last checkpoint: \"coin_selection_tests\" fixture entry.\r\ntest_bitcoin: ../../src/key.cpp:300: void ECC_Start(): Assertion `secp256k1_context_sign == __null' failed.\r\nunknown location(0): fatal error: in \"wallet_crypto/decrypt\": signal: SIGABRT (application abort requested)\r\n../../src/wallet/test/crypto_tests.cpp(217): last checkpoint: \"decrypt\" fixture entry.",
    "created_at": "2016-12-21T12:22:40Z",
    "updated_at": "2017-03-01T10:45:53Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9359#discussion_r93428610",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93428610"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9359#discussion_r93428610"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93428610/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 447,
    "original_line": 371,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94689464",
    "pull_request_review_id": 15223142,
    "id": 94689464,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk0Njg5NDY0",
    "diff_hunk": "@@ -351,4 +353,28 @@ BOOST_AUTO_TEST_CASE(ApproximateBestSubset)\n     BOOST_CHECK_EQUAL(setCoinsRet.size(), 2U);\n }\n \n+// Check that GetImmatureCredit() returns a newly calculated value instead of\n+// the cached value after a MarkDirty() call.\n+//\n+// This is regression test written to verify a bugfix for the immature credit\n+// function. Similar tests probably should be written for the other credit and\n+// debit functions.\n+BOOST_FIXTURE_TEST_CASE(coin_mark_dirty_immature_credit, TestChain100Setup)\n+{\n+    CWallet wallet;\n+    CWalletTx wtx(&wallet, MakeTransactionRef(coinbaseTxns.back()));\n+    wtx.hashBlock = chainActive.Tip()->GetBlockHash();\n+    wtx.nIndex = 0;\n+\n+    // Call GetImmatureCredit() once before adding the key to the wallet to\n+    // cache the current immature credit amount, which is 0.\n+    BOOST_CHECK_EQUAL(wtx.GetImmatureCredit(), 0);",
    "path": "src/wallet/test/wallet_tests.cpp",
    "position": 20,
    "original_position": 28,
    "commit_id": "7ed143c10ec7c34843cb025951a6bbf279d1774d",
    "original_commit_id": "e18c4b6178ff5067675c07f21652d26eca6389bf",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks, the locking error has been fixed.",
    "created_at": "2017-01-04T23:43:45Z",
    "updated_at": "2017-03-01T10:45:53Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9359#discussion_r94689464",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94689464"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9359#discussion_r94689464"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94689464/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 447,
    "original_line": 371,
    "side": "RIGHT",
    "in_reply_to_id": 93428610
  }
]