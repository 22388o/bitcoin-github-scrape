[
  {
    "sha": "fa981756970548f0f24ec224ce976b9eb2a6436c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTk4MTc1Njk3MDU0OGYwZjI0ZWMyMjRjZTk3NmI5ZWIyYTY0MzZj",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-10-08T10:01:37Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-10-08T09:53:55Z"
      },
      "message": "test: Speed up wallet_resendwallettransactions test with mockscheduler RPC",
      "tree": {
        "sha": "b03a6a01c57538f7965c9e98288eb8eb59aa1fb1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b03a6a01c57538f7965c9e98288eb8eb59aa1fb1"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa981756970548f0f24ec224ce976b9eb2a6436c",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgTQAv+KvGdqxHAah9w6h/HWng0ywkcWPilO3BMYecVx3MxWpwUWMdxuC8kB2Mc\nXdtvQMlYwia9cx4HVVm37jrZaqD3e/HqKv9gO+ifR29ZVQD8H9BgZrC95PFcBAS1\nyXERLGdxj47PFFr2XQX1cS4Zt0zsI1J40dxqxs1iw1Z1UWLsLHGSVR+KiYUN9kaH\nUlZPXrXgyqKmuyZxqFBRuKWhc+818uQKNdX8O1Z/2j1MkCaMaykL/1Msq2trvzGt\nIVw+MoS+3ugAdjMWSkKd0NxOFZVw/f8icz/hTUjJJECFv+noBH4HjMRgoG/VOHBD\nkf6HIGHWGSiAdCbd8VeJwkhUl2gmzcOm/7Ovfh1FIWiP4AhJulLwAa3SZUORDCz9\nbmPINyUx6zZJ2fRV5pstn+nkTlVko3LDTGCkoLrWEesO2NL/cxADUGxc/7it+SmS\nKHmyLw2pipHa/SKlP9T/mBktObYhCEboeXeoA1JwQjHk2ekE5tjs6iJGfOcEgVbN\n4w0e5v4r\n=7PG1\n-----END PGP SIGNATURE-----",
        "payload": "tree b03a6a01c57538f7965c9e98288eb8eb59aa1fb1\nparent 9dd4de2832e298398436b957375d62de67f0a928\nauthor MarcoFalke <falke.marco@gmail.com> 1602151297 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1602150835 +0200\n\ntest: Speed up wallet_resendwallettransactions test with mockscheduler RPC\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa981756970548f0f24ec224ce976b9eb2a6436c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa981756970548f0f24ec224ce976b9eb2a6436c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa981756970548f0f24ec224ce976b9eb2a6436c/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9dd4de2832e298398436b957375d62de67f0a928",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9dd4de2832e298398436b957375d62de67f0a928",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9dd4de2832e298398436b957375d62de67f0a928"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 5,
      "deletions": 4
    },
    "files": [
      {
        "sha": "8c72bce57dc9ccaac99e1e224ef8252b1d956735",
        "filename": "test/functional/wallet_resendwallettransactions.py",
        "status": "modified",
        "additions": 5,
        "deletions": 4,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa981756970548f0f24ec224ce976b9eb2a6436c/test/functional/wallet_resendwallettransactions.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa981756970548f0f24ec224ce976b9eb2a6436c/test/functional/wallet_resendwallettransactions.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/wallet_resendwallettransactions.py?ref=fa981756970548f0f24ec224ce976b9eb2a6436c",
        "patch": "@@ -11,6 +11,7 @@\n from test_framework.test_framework import BitcoinTestFramework\n from test_framework.util import assert_equal\n \n+\n class ResendWalletTransactionsTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 1\n@@ -27,10 +28,10 @@ def run_test(self):\n         txid = node.sendtoaddress(node.getnewaddress(), 1)\n \n         # Wallet rebroadcast is first scheduled 1 sec after startup (see\n-        # nNextResend in ResendWalletTransactions()). Sleep for just over a\n-        # second to be certain that it has been called before the first\n+        # nNextResend in ResendWalletTransactions()). Tell scheduler to call\n+        # MaybeResendWalletTxn now to initialize nNextResend before the first\n         # setmocktime call below.\n-        time.sleep(1.1)\n+        node.mockscheduler(1)\n \n         # Can take a few seconds due to transaction trickling\n         peer_first.wait_for_broadcast([txid])\n@@ -57,7 +58,7 @@ def run_test(self):\n         twelve_hrs = 12 * 60 * 60\n         two_min = 2 * 60\n         node.setmocktime(now + twelve_hrs - two_min)\n-        time.sleep(2) # ensure enough time has passed for rebroadcast attempt to occur\n+        node.mockscheduler(1)  # Tell scheduler to call MaybeResendWalletTxn now\n         assert_equal(int(txid, 16) in peer_second.get_invs(), False)\n \n         self.log.info(\"Bump time & check that transaction is rebroadcast\")"
      }
    ]
  },
  {
    "sha": "fac37bca5509e466765c895d9058f2f6f98d8a1f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWMzN2JjYTU1MDllNDY2NzY1Yzg5NWQ5MDU4ZjJmNmY5OGQ4YTFm",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-10-08T10:09:37Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-10-08T10:12:07Z"
      },
      "message": "test: Enable mocktime RPC for all test chains",
      "tree": {
        "sha": "e698237805ec5a79be4b9189bd2d252c4776b258",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e698237805ec5a79be4b9189bd2d252c4776b258"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fac37bca5509e466765c895d9058f2f6f98d8a1f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUhYbwv9F+b91WhCJBBRz+GtVaZws5KI1qFuNDPvVhMQb5o2hkQh2tdJHL6Kp2Jf\nUiDso2kmmh+KnNj06cM2sodONv6ziCWM6W9wQSactChPLJLJff0AzjI1p+/2DKvb\nx4BmC1mWuE1GI/3NaYYePqOROgzvJiEFZliXWbLfVq+2RsmSSV+L6zmP1SoZOyiI\n/CS53u8oga3K6IGupGYXkc8QNZBkNRpL7aw4ddrxFneDabc1BSzHnfG6aj6LX1rV\nMbmc+JI3fhEkxJgAFmDAo6oNI0kEpfA2dDoFvL3PQ9Vb80Cg2JSd14y6hokquK8y\n8umY2dD1gC501BDPcTnzzr9Ldwk+Elyo0AeKgQ4xmafPegKtHjyEppUkC9RwKbj9\n9oBmVrW1Qn0rydCFI/O6nquKgZyNpEBxDstCawMLTLPLO1sFR6v6XUPC2W+aXafT\ne6FsoaO1rgSn7jW63NjTT3mN8hprzrXjRxznulX3/aiUSmFkIZQsAEnniVTBedtf\n0quWkkxP\n=7ZZg\n-----END PGP SIGNATURE-----",
        "payload": "tree e698237805ec5a79be4b9189bd2d252c4776b258\nparent fa981756970548f0f24ec224ce976b9eb2a6436c\nauthor MarcoFalke <falke.marco@gmail.com> 1602151777 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1602151927 +0200\n\ntest: Enable mocktime RPC for all test chains\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fac37bca5509e466765c895d9058f2f6f98d8a1f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fac37bca5509e466765c895d9058f2f6f98d8a1f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fac37bca5509e466765c895d9058f2f6f98d8a1f/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa981756970548f0f24ec224ce976b9eb2a6436c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa981756970548f0f24ec224ce976b9eb2a6436c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa981756970548f0f24ec224ce976b9eb2a6436c"
      }
    ],
    "stats": {
      "total": 26,
      "additions": 14,
      "deletions": 12
    },
    "files": [
      {
        "sha": "5662876ce9644c4a05e29ecd14f7708c931b9cbc",
        "filename": "src/chainparams.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fac37bca5509e466765c895d9058f2f6f98d8a1f/src/chainparams.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fac37bca5509e466765c895d9058f2f6f98d8a1f/src/chainparams.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/chainparams.cpp?ref=fac37bca5509e466765c895d9058f2f6f98d8a1f",
        "patch": "@@ -238,7 +238,7 @@ class CTestNetParams : public CChainParams {\n         fDefaultConsistencyChecks = false;\n         fRequireStandard = false;\n         m_is_test_chain = true;\n-        m_is_mockable_chain = false;\n+        m_is_mockable_chain = true;\n \n         checkpointData = {\n             {\n@@ -348,7 +348,7 @@ class SigNetParams : public CChainParams {\n         fDefaultConsistencyChecks = false;\n         fRequireStandard = true;\n         m_is_test_chain = true;\n-        m_is_mockable_chain = false;\n+        m_is_mockable_chain = true;\n     }\n };\n "
      },
      {
        "sha": "28e70af5dbeb343642f44596af56bb4af46f227b",
        "filename": "src/rpc/misc.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 10,
        "changes": 20,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fac37bca5509e466765c895d9058f2f6f98d8a1f/src/rpc/misc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fac37bca5509e466765c895d9058f2f6f98d8a1f/src/rpc/misc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/misc.cpp?ref=fac37bca5509e466765c895d9058f2f6f98d8a1f",
        "patch": "@@ -360,17 +360,17 @@ static RPCHelpMan signmessagewithprivkey()\n static RPCHelpMan setmocktime()\n {\n     return RPCHelpMan{\"setmocktime\",\n-                \"\\nSet the local time to given timestamp (-regtest only)\\n\",\n-                {\n-                    {\"timestamp\", RPCArg::Type::NUM, RPCArg::Optional::NO, UNIX_EPOCH_TIME + \"\\n\"\n+        \"\\nSet the local time to given timestamp (for testing only)\\n\",\n+        {\n+            {\"timestamp\", RPCArg::Type::NUM, RPCArg::Optional::NO, UNIX_EPOCH_TIME + \"\\n\"\n             \"   Pass 0 to go back to using the system time.\"},\n-                },\n-                RPCResult{RPCResult::Type::NONE, \"\", \"\"},\n-                RPCExamples{\"\"},\n+        },\n+        RPCResult{RPCResult::Type::NONE, \"\", \"\"},\n+        RPCExamples{\"\"},\n         [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n {\n     if (!Params().IsMockableChain()) {\n-        throw std::runtime_error(\"setmocktime is for regression testing (-regtest mode) only\");\n+        throw std::runtime_error(\"setmocktime is not enabled on current chain\");\n     }\n \n     // For now, don't change mocktime if we're in the middle of validation, as\n@@ -397,16 +397,16 @@ static RPCHelpMan setmocktime()\n static RPCHelpMan mockscheduler()\n {\n     return RPCHelpMan{\"mockscheduler\",\n-        \"\\nBump the scheduler into the future (-regtest only)\\n\",\n+        \"\\nBump the scheduler into the future\\n\",\n         {\n-            {\"delta_time\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"Number of seconds to forward the scheduler into the future.\" },\n+            {\"delta_time\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"Number of seconds to forward the scheduler into the future.\"},\n         },\n         RPCResult{RPCResult::Type::NONE, \"\", \"\"},\n         RPCExamples{\"\"},\n         [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n {\n     if (!Params().IsMockableChain()) {\n-        throw std::runtime_error(\"mockscheduler is for regression testing (-regtest mode) only\");\n+        throw std::runtime_error(\"mockscheduler is not enabled on current chain\");\n     }\n \n     // check params are valid values"
      },
      {
        "sha": "ce3a54d7062af2c8965851801f8a337b4bacb36b",
        "filename": "test/functional/feature_signet.py",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fac37bca5509e466765c895d9058f2f6f98d8a1f/test/functional/feature_signet.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fac37bca5509e466765c895d9058f2f6f98d8a1f/test/functional/feature_signet.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_signet.py?ref=fac37bca5509e466765c895d9058f2f6f98d8a1f",
        "patch": "@@ -69,6 +69,8 @@ def run_test(self):\n         with self.nodes[0].assert_debug_log([\"Signet derived magic (message start)\"]):\n             self.restart_node(0)\n \n+        self.nodes[0].setmocktime(0)  # Check that mocktime RPC is enabled for signet\n+\n \n if __name__ == '__main__':\n     SignetBasicTest().main()"
      }
    ]
  }
]