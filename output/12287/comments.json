[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361088026",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12287#issuecomment-361088026",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12287",
    "id": 361088026,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTA4ODAyNg==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-28T19:20:08Z",
    "updated_at": "2018-01-28T19:20:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Not meant for 0.16.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361088026/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361178015",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12287#issuecomment-361178015",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12287",
    "id": 361178015,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTE3ODAxNQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-29T08:52:39Z",
    "updated_at": "2018-01-29T08:52:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "Related:\r\n* #11652 (\"Add missing locks to init.cpp (in AppInitMain + ThreadImport) and validation.cpp\")\r\n* #11694 (\"rpc: Add missing cs_main lock in getblocktemplate(...)\")\r\n* #11754 (\"wallet: Add missing cs_wallet locks when accessing m_last_block_processed\")\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361178015/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361775197",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12287#issuecomment-361775197",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12287",
    "id": 361775197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTc3NTE5Nw==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-30T23:53:32Z",
    "updated_at": "2018-01-30T23:53:32Z",
    "author_association": "MEMBER",
    "body": "@jonasschnelli please see 6e36821 which came after discussing with @ryanofsky on IRC.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361775197/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361813999",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12287#issuecomment-361813999",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12287",
    "id": 361813999,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTgxMzk5OQ==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-31T03:38:42Z",
    "updated_at": "2018-01-31T03:50:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "~~@promag https://github.com/bitcoin/bitcoin/commit/6e36821823b498c307787543ad59b9e9ccffcc63 seems good work. I'll propose to do this in a separate PR.~~",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361813999/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361815531",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12287#issuecomment-361815531",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12287",
    "id": 361815531,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTgxNTUzMQ==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-31T03:50:59Z",
    "updated_at": "2018-01-31T03:50:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Changed my mind. Included https://github.com/bitcoin/bitcoin/commit/6e36821823b498c307787543ad59b9e9ccffcc63.\r\n* Fixed @ryanofsky point about `AssertLockHeld()`\r\n* Followed @promag's advice and moved cs_main lock up (https://github.com/bitcoin/bitcoin/pull/12287#discussion_r164444275)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361815531/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361947221",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12287#issuecomment-361947221",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12287",
    "id": 361947221,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTk0NzIyMQ==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-31T14:24:57Z",
    "updated_at": "2018-01-31T14:24:57Z",
    "author_association": "MEMBER",
    "body": "Thread https://github.com/bitcoin/bitcoin/pull/12287#discussion_r164570542\r\n\r\nIn this case, where `nChainTx` may require the lock and `GuessVerificationProgress()` is always called with the lock, I'd prefer to assert the lock and be *correct* like @gmaxwell said in IRC.\r\n\r\nOther than that, utACK 90ba2df.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361947221/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364351566",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12287#issuecomment-364351566",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12287",
    "id": 364351566,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDM1MTU2Ng==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-09T06:55:35Z",
    "updated_at": "2018-02-09T06:55:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Changed the PR title.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364351566/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/367533973",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12287#issuecomment-367533973",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12287",
    "id": 367533973,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NzUzMzk3Mw==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-22T01:13:03Z",
    "updated_at": "2018-02-22T01:13:03Z",
    "author_association": "MEMBER",
    "body": "Tested ACK 90ba2df.\r\n\r\nLet's get this merged? \ud83d\ude44",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/367533973/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164444275",
    "pull_request_review_id": 92216984,
    "id": 164444275,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NDQ0NDI3NQ==",
    "diff_hunk": "@@ -143,6 +143,7 @@ double ClientModel::getVerificationProgress(const CBlockIndex *tipIn) const\n         LOCK(cs_main);\n         tip = chainActive.Tip();\n     }\n+    LOCK(cs_main);",
    "path": "src/qt/clientmodel.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "90ba2df11b5bc943ac48b49b5da8023864dc842d",
    "original_commit_id": "61b20a100d24698695c3c515c01cab7eddf56e69",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Just move the above lock up?",
    "created_at": "2018-01-29T14:24:22Z",
    "updated_at": "2018-01-31T03:49:36Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12287#discussion_r164444275",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12287",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164444275"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12287#discussion_r164444275"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12287"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164444275/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 146,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164518333",
    "pull_request_review_id": 92303713,
    "id": 164518333,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NDUxODMzMw==",
    "diff_hunk": "@@ -4659,7 +4662,9 @@ bool DumpMempool(void)\n }\n \n //! Guess how far we are in the verification process at the given block index\n+//! needs cs_main due to access of pindex->nChainTx (mutable)\n double GuessVerificationProgress(const ChainTxData& data, const CBlockIndex *pindex) {\n+    AssertLockHeld(cs_main);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 24,
    "commit_id": "90ba2df11b5bc943ac48b49b5da8023864dc842d",
    "original_commit_id": "61b20a100d24698695c3c515c01cab7eddf56e69",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think maybe the new lock and assert here could be dropped and comment above could be changed to: \"require cs_main if pindex has not been validated yet (because nChainTx might be unset).\"\r\n\r\nIf we're calling this on blocks from chainActive, it seems like locking should be unnecessary.",
    "created_at": "2018-01-29T18:21:38Z",
    "updated_at": "2018-01-31T03:49:36Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12287#discussion_r164518333",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12287",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164518333"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12287#discussion_r164518333"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12287"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164518333/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 4667,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164563230",
    "pull_request_review_id": 92355829,
    "id": 164563230,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NDU2MzIzMA==",
    "diff_hunk": "@@ -3803,10 +3803,13 @@ bool LoadChainTip(const CChainParams& chainparams)\n \n     g_chainstate.PruneBlockIndexCandidates();\n \n-    LogPrintf(\"Loaded best chain: hashBestChain=%s height=%d date=%s progress=%f\\n\",\n-        chainActive.Tip()->GetBlockHash().ToString(), chainActive.Height(),\n-        DateTimeStrFormat(\"%Y-%m-%d %H:%M:%S\", chainActive.Tip()->GetBlockTime()),\n-        GuessVerificationProgress(chainparams.TxData(), chainActive.Tip()));\n+    {\n+        LOCK(cs_main);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "90ba2df11b5bc943ac48b49b5da8023864dc842d",
    "original_commit_id": "61b20a100d24698695c3c515c01cab7eddf56e69",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The whole function should lock `cs_main`. However this is only called in `AppInitMain`, and #11041 adds the lock [there](https://github.com/bitcoin/bitcoin/pull/11041/files#diff-c865a8939105e6350a50af02766291b7).\r\n\r\nIf this goes first, I suggest cherry pick 3d40869 instead.",
    "created_at": "2018-01-29T21:03:58Z",
    "updated_at": "2018-01-31T03:49:36Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12287#discussion_r164563230",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12287",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164563230"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12287#discussion_r164563230"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12287"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164563230/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3807,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164563767",
    "pull_request_review_id": 92355829,
    "id": 164563767,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NDU2Mzc2Nw==",
    "diff_hunk": "@@ -4659,7 +4662,9 @@ bool DumpMempool(void)\n }\n \n //! Guess how far we are in the verification process at the given block index\n+//! needs cs_main due to access of pindex->nChainTx (mutable)\n double GuessVerificationProgress(const ChainTxData& data, const CBlockIndex *pindex) {\n+    AssertLockHeld(cs_main);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 24,
    "commit_id": "90ba2df11b5bc943ac48b49b5da8023864dc842d",
    "original_commit_id": "61b20a100d24698695c3c515c01cab7eddf56e69",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "After 3d40869, `ClientModel::getVerificationProgress` is the only caller without the lock, so `AssertLockHeld` seems fine to me.",
    "created_at": "2018-01-29T21:06:09Z",
    "updated_at": "2018-01-31T03:49:36Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12287#discussion_r164563767",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12287",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164563767"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12287#discussion_r164563767"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12287"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164563767/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 4667,
    "side": "RIGHT",
    "in_reply_to_id": 164518333
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164570542",
    "pull_request_review_id": 92364355,
    "id": 164570542,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NDU3MDU0Mg==",
    "diff_hunk": "@@ -4659,7 +4662,9 @@ bool DumpMempool(void)\n }\n \n //! Guess how far we are in the verification process at the given block index\n+//! needs cs_main due to access of pindex->nChainTx (mutable)\n double GuessVerificationProgress(const ChainTxData& data, const CBlockIndex *pindex) {\n+    AssertLockHeld(cs_main);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 24,
    "commit_id": "90ba2df11b5bc943ac48b49b5da8023864dc842d",
    "original_commit_id": "61b20a100d24698695c3c515c01cab7eddf56e69",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> AssertLockHeld seems fine to me\r\n\r\nGetting rid of this could avoid a new lock in Rescan, and remove an existing lock. It also seems not ideal if code and documentation implies locking is required when it isn't.",
    "created_at": "2018-01-29T21:32:10Z",
    "updated_at": "2018-01-31T03:49:36Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12287#discussion_r164570542",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12287",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164570542"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12287#discussion_r164570542"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12287"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164570542/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 4667,
    "side": "RIGHT",
    "in_reply_to_id": 164518333
  }
]