[
  {
    "sha": "70ba01a30148522f738d85af906f0558c927261e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3MGJhMDFhMzAxNDg1MjJmNzM4ZDg1YWY5MDZmMDU1OGM5MjcyNjFl",
    "commit": {
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2019-09-30T10:02:22Z"
      },
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2019-09-30T10:02:22Z"
      },
      "message": "[validation]  make m_cs_chainstate public",
      "tree": {
        "sha": "7260712a4ce0404377fba45d50d2369245bac2ee",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7260712a4ce0404377fba45d50d2369245bac2ee"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/70ba01a30148522f738d85af906f0558c927261e",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAl2R0q4ACgkQV/+b28ww\nEAmX0w//VeHS69Cw+qvPdrTMAOf36pPiNiWsU8mo6QrgnSjoCOnbT37H24ieRpOD\nirVer/f0K/6hie+8EJkWhbeYZCUzKwgNOYh59TkjA/9hMssg4ybzHWYfwYHW5IWY\nyGjbFLaSskLHG7Gcim0hQqfYlHF8XEfy/MD9uqSkgHL4d3gDz3rLrUrGJiCerM0+\n+9jLydsVv30UWTx1ylOaEmHWI5wMf06r+hfj/XewMxpmOuC6Vi7SRu1uKH701OjK\n9BERxX4mcpZjiqDxtqSGf+Azh5UM0TLs9O/qE6XT5ri+1swpubLktnFLIJIXoyUf\nrP6nzC/2dE9Oo1+XlN5FJrhLNPvIE4Tpz0QTu3xYpR7zugZSP09qvBUvC59vuybb\nL2v4LI9qlzUcG7sOEHmo1BHr/1B/ZdGeLoRKS9OIeFKQv0X0sG1yfRcboRSeRm6I\n6KBmGtZWk/xfgFVavlkn7ofmgaj0jcV/pXW2MVapQhxIZjZQpJu/4gzVZlYAlFEZ\n1Ng4q0e2Hwc2z3v6jOCRAwDXDDpKwOBzfOahfl8ZNNviFLQTyw8dUtiWShdjJqFh\nsLlj9N2Tr37aA35PjOCabwmA5M+IOpoW//wI2CvY9cdhegs7iLlVG8ZOv+LpIr67\nItOvZpJBnINmF+ZBvYPO/XS2E0JsYT0wlTSkaYfQzQGb5iz0KOE=\n=U/KF\n-----END PGP SIGNATURE-----",
        "payload": "tree 7260712a4ce0404377fba45d50d2369245bac2ee\nparent b658ca71b363ac248135f33d24e21df205fca7b7\nauthor Sjors Provoost <sjors@sprovoost.nl> 1569837742 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1569837742 +0200\n\n[validation]  make m_cs_chainstate public\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/70ba01a30148522f738d85af906f0558c927261e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/70ba01a30148522f738d85af906f0558c927261e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/70ba01a30148522f738d85af906f0558c927261e/comments",
    "author": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b658ca71b363ac248135f33d24e21df205fca7b7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b658ca71b363ac248135f33d24e21df205fca7b7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b658ca71b363ac248135f33d24e21df205fca7b7"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 6,
      "deletions": 6
    },
    "files": [
      {
        "sha": "06ddd4c4821fd5e23862ec5040f1804377996797",
        "filename": "src/validation.h",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/70ba01a30148522f738d85af906f0558c927261e/src/validation.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/70ba01a30148522f738d85af906f0558c927261e/src/validation.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.h?ref=70ba01a30148522f738d85af906f0558c927261e",
        "patch": "@@ -561,12 +561,6 @@ class CChainState {\n     /** chainwork for the last block that preciousblock has been applied to. */\n     arith_uint256 nLastPreciousChainwork = 0;\n \n-    /**\n-     * the ChainState CriticalSection\n-     * A lock that must be held when modifying this ChainState - held in ActivateBestChain()\n-     */\n-    CCriticalSection m_cs_chainstate;\n-\n     /**\n      * Whether this chainstate is undergoing initial block download.\n      *\n@@ -587,6 +581,12 @@ class CChainState {\n     CChainState(BlockManager& blockman) : m_blockman(blockman) {}\n     CChainState();\n \n+    /**\n+     * the ChainState CriticalSection\n+     * A lock that must be held when modifying this ChainState - held in ActivateBestChain()\n+     */\n+    CCriticalSection m_cs_chainstate;\n+\n     /**\n      * Initialize the CoinsViews UTXO set database management data structures. The in-memory\n      * cache is initialized separately."
      }
    ]
  },
  {
    "sha": "4610b2c29737e88d7a2906c2ff8c1fa1b910db9d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0NjEwYjJjMjk3MzdlODhkN2EyOTA2YzJmZjhjMWZhMWI5MTBkYjlk",
    "commit": {
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2019-09-30T10:02:49Z"
      },
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2019-09-30T10:02:49Z"
      },
      "message": "[rpc] gettxoutsetinfo: lock m_cs_chainstate",
      "tree": {
        "sha": "a92e5f6b5768b46dd9bf29e88c09681aa4fd725e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a92e5f6b5768b46dd9bf29e88c09681aa4fd725e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4610b2c29737e88d7a2906c2ff8c1fa1b910db9d",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAl2R0skACgkQV/+b28ww\nEAldMBAAgEGbZq+262kP786YkOfihCUOl/7AHQextveznEcB/JuCtk2tra66csRM\nphzDBA1kJ/t5r/guxBklkib7DX07cexY5K6pDUrUtvj9Hqd0bAYzzG8LXij4PxNn\ngmFls0tdpQ+a4DExDQX4/wlEWRuWshU64LS2UiGaOaMshZHsq7iABPMxHySkcIv9\nZLfIZI/PP0EpP+EybI9X8Jxw/eRm85y5cfMUrxWTj89R3RbWWHnoWut043Jiyjfe\nxjH+P1TotiI9MUg7i8+IvX2qGWThTAUv95WOk3/ZZG8lXrLfisVyscYu4/T0ttM5\neBJRw73LC0AQLcNOM/2vWFx4LpGEd1il0V0aH+p5E06H3oO1h2zQWeDZ1lOAFVEl\n5gD0STmZOum2vo+6V87cq/OW73qIFRDUTLu9cE2wvJrz41OVNMrUKFCMyLlBkbMb\nDN1239+06EIQbDmMo7CRluArbfvG24WNifGzRowZp8zH8oISc1T+HwAd0fOm6GRz\ntxadfJvK9WSSSPZkQYOkKDtoeq7oJ76DRKBv9IAHl3eiNK1HluY9yMNTvcqTX+ii\ndpi5OjZLxBn4l7HJHxW5AIGraEa/kZFfixTuOlnYXRMEz2JfDpy+tLdBsTEPCB3p\ncU1ZTQwN4f+oXVKkEKiWP0pQDC4R/wlt1kxNEvdq2Pj+svA74M8=\n=9Qqo\n-----END PGP SIGNATURE-----",
        "payload": "tree a92e5f6b5768b46dd9bf29e88c09681aa4fd725e\nparent 70ba01a30148522f738d85af906f0558c927261e\nauthor Sjors Provoost <sjors@sprovoost.nl> 1569837769 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1569837769 +0200\n\n[rpc] gettxoutsetinfo: lock m_cs_chainstate\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4610b2c29737e88d7a2906c2ff8c1fa1b910db9d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/4610b2c29737e88d7a2906c2ff8c1fa1b910db9d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4610b2c29737e88d7a2906c2ff8c1fa1b910db9d/comments",
    "author": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "70ba01a30148522f738d85af906f0558c927261e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/70ba01a30148522f738d85af906f0558c927261e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/70ba01a30148522f738d85af906f0558c927261e"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 3,
      "deletions": 0
    },
    "files": [
      {
        "sha": "66be23754b99baf0691c10bcbe1a5e09c7e41080",
        "filename": "src/rpc/blockchain.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4610b2c29737e88d7a2906c2ff8c1fa1b910db9d/src/rpc/blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4610b2c29737e88d7a2906c2ff8c1fa1b910db9d/src/rpc/blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.cpp?ref=4610b2c29737e88d7a2906c2ff8c1fa1b910db9d",
        "patch": "@@ -993,6 +993,9 @@ static UniValue gettxoutsetinfo(const JSONRPCRequest& request)\n     UniValue ret(UniValue::VOBJ);\n \n     CCoinsStats stats;\n+\n+    LOCK(::ChainstateActive().m_cs_chainstate);\n+\n     ::ChainstateActive().ForceFlushStateToDisk();\n \n     CCoinsView* coins_view = WITH_LOCK(cs_main, return &ChainstateActive().CoinsDB());"
      }
    ]
  }
]