[
  {
    "sha": "44cc75f80ee7805a117e9298a182af1a44bcbff4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0NGNjNzVmODBlZTc4MDVhMTE3ZTkyOThhMTgyYWYxYTQ0YmNiZmY0",
    "commit": {
      "author": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2020-03-03T05:09:02Z"
      },
      "committer": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2020-05-05T05:09:20Z"
      },
      "message": "wallet: error if an explicit fee rate was given but the needed fee rate differed\n\nThis avoids cases where a user requests a fee rate below the minimum and is silently overruled by the wallet.",
      "tree": {
        "sha": "ec0e9e9d5f4c6d786654802965bd44b65999aaca",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ec0e9e9d5f4c6d786654802965bd44b65999aaca"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/44cc75f80ee7805a117e9298a182af1a44bcbff4",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEExCr/fGGz5EoUVM01V692LbM1MyIFAl6w9QAACgkQV692LbM1\nMyLRVQ/9EdOVCANWDY52bHW6p7ErKXUhWp+SArUjKdwRZIeLiFX5nqyl5j88AU2j\n77tnAZm6nQCfTnK9cqwNOLTdbhqC4Sv1NXF9iLBS6CAUX99bzdoDM2TLyhwRJZHD\nxACQGyhx6wYNVaduKZX7Onl9EsPZ0KRaPaD6jOyAghaOWwWagKuKlUhkQ8ohiaou\nud/Hlu6Tv4Fa6vjxwDhQjQIBe0z/z5INrnb9RWJ7IhG35SChrf1jZH75O4PnusjN\ncHhYYKfPCHqSsLT7FQX++8S6N8yUz/bKAKcjH030Qxpj9giY7qi1OXG2qXEe0Afb\niEGIR8mchKxu9BO18d9/RfXcrFJWoYRTCU1zfmBM/Q9fsAeV3VGTpUWjbuzbMiEx\ntcEjwedoQ41g4t5Dvk29eXigvOK/KErYvYwZyyjcbbpjGunwV/AIb3WTPKs8BpM9\nM3SDVEmwfe+wmC4NTBALNGrs0aAxuDblW4BGN5KD5cHOGJrJ7vsmMMg4gJEUJ9sr\nvb1wlFuyUWHFAVLa/BAAg0Nl7SObv0b95gifrRVsP4mzQuLV1xN7owJV8nzADU3S\nLVqHNpBmGsp0d5n2LiEM3eZp2ON/avqFjjVoqp4MIOkShg51MwbboYpRtoT3pVw7\n+w29qkKEM0DxnDIFR/37tjuciWgLd3Wq/b3YbUoABC2j2FYvtQo=\n=tZgX\n-----END PGP SIGNATURE-----",
        "payload": "tree ec0e9e9d5f4c6d786654802965bd44b65999aaca\nparent ec79b5f86b22ad8f77c736f9bb76c2e4d7faeaa4\nauthor Karl-Johan Alm <karljohan-alm@garage.co.jp> 1583212142 +0900\ncommitter Karl-Johan Alm <karljohan-alm@garage.co.jp> 1588655360 +0900\n\nwallet: error if an explicit fee rate was given but the needed fee rate differed\n\nThis avoids cases where a user requests a fee rate below the minimum and is silently overruled by the wallet.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/44cc75f80ee7805a117e9298a182af1a44bcbff4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/44cc75f80ee7805a117e9298a182af1a44bcbff4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/44cc75f80ee7805a117e9298a182af1a44bcbff4/comments",
    "author": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ec79b5f86b22ad8f77c736f9bb76c2e4d7faeaa4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ec79b5f86b22ad8f77c736f9bb76c2e4d7faeaa4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ec79b5f86b22ad8f77c736f9bb76c2e4d7faeaa4"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 6,
      "deletions": 0
    },
    "files": [
      {
        "sha": "894cd510d940ff057ca20a9901faa74c2cd9d26c",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/44cc75f80ee7805a117e9298a182af1a44bcbff4/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/44cc75f80ee7805a117e9298a182af1a44bcbff4/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=44cc75f80ee7805a117e9298a182af1a44bcbff4",
        "patch": "@@ -2729,6 +2729,12 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n \n             // Get the fee rate to use effective values in coin selection\n             CFeeRate nFeeRateNeeded = GetMinimumFeeRate(*this, coin_control, &feeCalc);\n+            // Do not, ever, assume that it's fine to change the fee rate if the user has explicitly\n+            // provided one\n+            if (coin_control.m_feerate && nFeeRateNeeded > *coin_control.m_feerate) {\n+                error = strprintf(_(\"Fee rate (%s) is lower than the minimum fee rate setting (%s)\"), coin_control.m_feerate->ToString(), nFeeRateNeeded.ToString());\n+                return false;\n+            }\n \n             nFeeRet = 0;\n             bool pick_new_inputs = true;"
      }
    ]
  }
]