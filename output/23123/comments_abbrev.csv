fanquake,2021-09-29 07:17:20,Concept ACK,https://github.com/bitcoin/bitcoin/pull/23123#issuecomment-929905494,929905494,
Sjors,2021-09-29 08:35:19,utACK 256314b,https://github.com/bitcoin/bitcoin/pull/23123#issuecomment-929961734,929961734,
laanwj,2021-09-29 10:24:00,Concept and code review ACK 256314b984a215fab0cf16b13a234ae002e987c4,https://github.com/bitcoin/bitcoin/pull/23123#issuecomment-930047706,930047706,
DrahtBot,2021-09-29 17:38:04,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22928](https://github.com/bitcoin/bitcoin/pull/22928) (refactor: Remove `gArgs` from `wallet.h` and `wallet.cpp` (2) by ",https://github.com/bitcoin/bitcoin/pull/23123#issuecomment-930394598,930394598,
meshcollider,2021-09-29 23:13:09,"Modified second commit to use `DBErrors::RESCAN_REQUIRED` instead of an out bool, as suggested by @achow101 ",https://github.com/bitcoin/bitcoin/pull/23123#issuecomment-930612569,930612569,
achow101,2021-09-30 01:10:39,ACK dc3ec74d67abc85e8f724648f93efdd097e6f783,https://github.com/bitcoin/bitcoin/pull/23123#issuecomment-930663507,930663507,
laanwj,2021-09-30 18:49:09,re-ACK dc3ec74d67abc85e8f724648f93efdd097e6f783,https://github.com/bitcoin/bitcoin/pull/23123#issuecomment-931576655,931576655,
meshcollider,2021-09-30 19:12:03,Merged here: 571bb94dfb5047c9be8fcbae5dae71de7256b86c,https://github.com/bitcoin/bitcoin/pull/23123#issuecomment-931592527,931592527,
MarcoFalke,2021-09-29 05:56:19,"nit: Could leave it uninitialized to clarify this is an unused out param? (Same for other places)\n\n```suggestion\n        bool dummy;\n        load_wallet_ret = wallet_instance->LoadWallet(/*rescan_required=*/dummy);\n```",https://github.com/bitcoin/bitcoin/pull/23123#discussion_r718175302,718175302,src/wallet/wallettool.cpp
MarcoFalke,2021-09-29 06:11:37,shouldn't this be adjusted to test that the rescan RPC also notifies?,https://github.com/bitcoin/bitcoin/pull/23123#discussion_r718182061,718182061,test/functional/feature_notifications.py
meshcollider,2021-09-29 06:43:28,"Good point, done.",https://github.com/bitcoin/bitcoin/pull/23123#discussion_r718198641,718198641,test/functional/feature_notifications.py
meshcollider,2021-09-29 06:49:01,Done :),https://github.com/bitcoin/bitcoin/pull/23123#discussion_r718201879,718201879,src/wallet/wallettool.cpp
achow101,2021-09-29 17:20:31,"In a751305ed7d0e085d80c76dfe1b419858ce331df ""Corrupt wallet tx shouldn't trigger rescan of all wallets""\n\nIt seems like it would be cleaner to add a `DBErrors:RESCAN_REQUIRED` instead of this `rescan_required` parameter and requiring a bunch of callers to provide a dummy bool.",https://github.com/bitcoin/bitcoin/pull/23123#discussion_r718731708,718731708,src/wallet/wallet.h
Sjors,2021-09-29 19:49:51,I like this approach too.,https://github.com/bitcoin/bitcoin/pull/23123#discussion_r718834821,718834821,src/wallet/wallet.h
promag,2021-09-29 21:16:52,"That requires changing https://github.com/bitcoin/bitcoin/blob/419afa93419e6840f78cb94b4a39d826eb10e139/src/wallet/wallet.cpp#L2546\n\nA low effort alternative is to use pointer:\n```cpp\nDBErrors LoadWallet(bool* rescan_required = nullptr);\n```\nor overload\n```cpp\nDBErrors LoadWallet() { bool dummy; return LoadWallet(dummy); }\n```",https://github.com/bitcoin/bitcoin/pull/23123#discussion_r718891478,718891478,src/wallet/wallet.h
meshcollider,2021-09-29 22:05:48,"I'll use a pointer as @promag suggests :+1:\nI was just erring on the side of caution when it came to hiding the parameter, so it wasn't accidentally ignored.",https://github.com/bitcoin/bitcoin/pull/23123#discussion_r718917571,718917571,src/wallet/wallet.h
achow101,2021-09-29 22:19:54,I really don't think it should be an out parameter since we have this enum for loading errors.,https://github.com/bitcoin/bitcoin/pull/23123#discussion_r718924121,718924121,src/wallet/wallet.h
meshcollider,2021-09-29 22:39:03,"Ok fair enough, I'll use your approach",https://github.com/bitcoin/bitcoin/pull/23123#discussion_r718932259,718932259,src/wallet/wallet.h
ryanofsky,2021-09-30 18:55:51,"In commit ""Corrupt wallet tx shouldn't trigger rescan of all wallets"" (f963b0fa8cdd5223feb828c5faf6c57bc4107c8a)\n\nMinor: Might call this `NEED_RESCAN` to be consistent with `NEED_REWRITE`",https://github.com/bitcoin/bitcoin/pull/23123#discussion_r719676828,719676828,src/wallet/walletdb.h
laanwj,2021-09-30 19:47:58,I think this is a good suggestion to be more consistent. Maybe in a follow-up PR.,https://github.com/bitcoin/bitcoin/pull/23123#discussion_r719709924,719709924,src/wallet/walletdb.h
