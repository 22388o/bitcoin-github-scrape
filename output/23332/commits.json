[
  {
    "sha": "fa8fef6ef2287cd36ae14fbf10e852ddef7e62ac",
    "node_id": "C_kwDOABII59oAKGZhOGZlZjZlZjIyODdjZDM2YWUxNGZiZjEwZTg1MmRkZWY3ZTYyYWM",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-21T13:28:42Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-10-21T20:13:35Z"
      },
      "message": "doc: Fix CWalletTx::Confirmation doc\n\nFollow-up to:\n* commit 700c42b85d20e624bef4228eef062c93084efab5, which replaced pIndex\n  with block_hash in AddToWalletIfInvolvingMe.\n\n* commit 9700fcb47feca9d78e005b8d18b41148c8f6b25f, which replaced\n  posInBlock with confirm.nIndex.",
      "tree": {
        "sha": "a905bbdb098d2d6dcab44cc1ab6a8d19c674281c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a905bbdb098d2d6dcab44cc1ab6a8d19c674281c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa8fef6ef2287cd36ae14fbf10e852ddef7e62ac",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUhLBgwAk1EdVMlIdR1Wds5E/AGC2M6BO6Qj+H719dX8WWTPJP9TlrdkApc8Rp3x\n8YeiKIIm0p2EE5gmf6p5q/BgHFgkCPthGnXIVkMq//lbAtQBYSBpYQVLfCD2lkUn\nPryjODTQeOnqcEep4xUfyJYSV0vxCDW7jq+F+ocwWaujHVvhP2e+dQq3iQZJ1lPp\n/iBhn2Pa6xSenA9IHz8W2IEFDQce/MMM6fiWoP1D1IuF25SehDee4KM2Ei5ZTpuc\nukfYJLnHWGUV4oruQYzBJFYpoK1X1FLFGEH8I/a/DKZ1gqBsbIO7xcZBJyE3jd4B\nqGovN6sesCfFraV72NFb8MuVWc0Vby20T7GEItGunAcXw6/NK5gVjmS98/Cwbys4\nL0Jrn6VLL5v//pAbiFcaVWFY9nQ043PBE3t8AXGEB1VbIMdYZnr2c68N42MQCbz+\n9MOuOWsgChjtzt3qvFkTBJ4r/xbxBFeqy3o/H9wRiDJVC9jGbXvx0W5vOX66pSZo\n5Zv5as0k\n=oPDU\n-----END PGP SIGNATURE-----",
        "payload": "tree a905bbdb098d2d6dcab44cc1ab6a8d19c674281c\nparent 88fc7950f8db5f13a6b259819aced2e3db7ff4d8\nauthor MarcoFalke <falke.marco@gmail.com> 1632230922 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1634847215 +0200\n\ndoc: Fix CWalletTx::Confirmation doc\n\nFollow-up to:\n* commit 700c42b85d20e624bef4228eef062c93084efab5, which replaced pIndex\n  with block_hash in AddToWalletIfInvolvingMe.\n\n* commit 9700fcb47feca9d78e005b8d18b41148c8f6b25f, which replaced\n  posInBlock with confirm.nIndex.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa8fef6ef2287cd36ae14fbf10e852ddef7e62ac",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa8fef6ef2287cd36ae14fbf10e852ddef7e62ac",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa8fef6ef2287cd36ae14fbf10e852ddef7e62ac/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "88fc7950f8db5f13a6b259819aced2e3db7ff4d8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/88fc7950f8db5f13a6b259819aced2e3db7ff4d8",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/88fc7950f8db5f13a6b259819aced2e3db7ff4d8"
      }
    ],
    "stats": {
      "total": 17,
      "additions": 8,
      "deletions": 9
    },
    "files": [
      {
        "sha": "1ccef3105658c205c515dfbb5525aac99ea3e133",
        "filename": "src/wallet/transaction.h",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa8fef6ef2287cd36ae14fbf10e852ddef7e62ac/src/wallet/transaction.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa8fef6ef2287cd36ae14fbf10e852ddef7e62ac/src/wallet/transaction.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/transaction.h?ref=fa8fef6ef2287cd36ae14fbf10e852ddef7e62ac",
        "patch": "@@ -162,7 +162,8 @@ class CWalletTx\n         int block_height;\n         uint256 hashBlock;\n         int nIndex;\n-        Confirmation(Status s = UNCONFIRMED, int b = 0, uint256 h = uint256(), int i = 0) : status(s), block_height(b), hashBlock(h), nIndex(i) {}\n+        Confirmation(Status status = UNCONFIRMED, int block_height = 0, uint256 block_hash = uint256(), int block_index = 0)\n+            : status{status}, block_height{block_height}, hashBlock{block_hash}, nIndex{block_index} {}\n     };\n \n     Confirmation m_confirm;"
      },
      {
        "sha": "1b0d55bffa3bca5a3e14adddf099f362842e8d51",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa8fef6ef2287cd36ae14fbf10e852ddef7e62ac/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa8fef6ef2287cd36ae14fbf10e852ddef7e62ac/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=fa8fef6ef2287cd36ae14fbf10e852ddef7e62ac",
        "patch": "@@ -1212,7 +1212,7 @@ void CWallet::SyncTransaction(const CTransactionRef& ptx, CWalletTx::Confirmatio\n \n void CWallet::transactionAddedToMempool(const CTransactionRef& tx, uint64_t mempool_sequence) {\n     LOCK(cs_wallet);\n-    SyncTransaction(tx, {CWalletTx::Status::UNCONFIRMED, /* block height */ 0, /* block hash */ {}, /* index */ 0});\n+    SyncTransaction(tx, {CWalletTx::Status::UNCONFIRMED, /*block_height=*/0, /*block_hash=*/{}, /*block_index=*/0});\n \n     auto it = mapWallet.find(tx->GetHash());\n     if (it != mapWallet.end()) {\n@@ -1253,7 +1253,7 @@ void CWallet::transactionRemovedFromMempool(const CTransactionRef& tx, MemPoolRe\n         // distinguishing between conflicted and unconfirmed transactions are\n         // imperfect, and could be improved in general, see\n         // https://github.com/bitcoin-core/bitcoin-devwiki/wiki/Wallet-Transaction-Conflict-Tracking\n-        SyncTransaction(tx, {CWalletTx::Status::UNCONFIRMED, /* block height */ 0, /* block hash */ {}, /* index */ 0});\n+        SyncTransaction(tx, {CWalletTx::Status::UNCONFIRMED, /*block_height=*/0, /*block_hash=*/{}, /*block_index=*/0});\n     }\n }\n \n@@ -1281,7 +1281,7 @@ void CWallet::blockDisconnected(const CBlock& block, int height)\n     m_last_block_processed_height = height - 1;\n     m_last_block_processed = block.hashPrevBlock;\n     for (const CTransactionRef& ptx : block.vtx) {\n-        SyncTransaction(ptx, {CWalletTx::Status::UNCONFIRMED, /* block height */ 0, /* block hash */ {}, /* index */ 0});\n+        SyncTransaction(ptx, {CWalletTx::Status::UNCONFIRMED, /*block_height=*/0, /*block_hash=*/{}, /*block_index=*/0});\n     }\n }\n "
      },
      {
        "sha": "c911eb461ce62f2ee26ed43a57de93581e99ddec",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 3,
        "deletions": 5,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa8fef6ef2287cd36ae14fbf10e852ddef7e62ac/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa8fef6ef2287cd36ae14fbf10e852ddef7e62ac/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=fa8fef6ef2287cd36ae14fbf10e852ddef7e62ac",
        "patch": "@@ -260,17 +260,17 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n     void AddToSpends(const uint256& wtxid, WalletBatch* batch = nullptr) EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n \n     /**\n-     * Add a transaction to the wallet, or update it.  pIndex and posInBlock should\n+     * Add a transaction to the wallet, or update it.  confirm.block_* should\n      * be set when the transaction was known to be included in a block.  When\n-     * pIndex == nullptr, then wallet state is not updated in AddToWallet, but\n+     * block_hash.IsNull(), then wallet state is not updated in AddToWallet, but\n      * notifications happen and cached balances are marked dirty.\n      *\n      * If fUpdate is true, existing transactions will be updated.\n      * TODO: One exception to this is that the abandoned state is cleared under the\n      * assumption that any further notification of a transaction that was considered\n      * abandoned is an indication that it is not safe to be considered abandoned.\n      * Abandoned state should probably be more carefully tracked via different\n-     * posInBlock signals or by checking mempool presence when necessary.\n+     * chain notifications or by checking mempool presence when necessary.\n      *\n      * Should be called with rescanning_old_block set to true, if the transaction is\n      * not discovered in real time, but during a rescan of old blocks.\n@@ -285,8 +285,6 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n \n     void SyncMetaData(std::pair<TxSpends::iterator, TxSpends::iterator>) EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n \n-    /* Used by TransactionAddedToMemorypool/BlockConnected/Disconnected/ScanForWalletTransactions.\n-     * Should be called with non-zero block_hash and posInBlock if this is for a transaction that is included in a block. */\n     void SyncTransaction(const CTransactionRef& tx, CWalletTx::Confirmation confirm, bool update_tx = true, bool rescanning_old_block = false) EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n \n     /** WalletFlags set on this wallet. */"
      }
    ]
  }
]