[
  {
    "sha": "568c05a591705552b435d384e526f702e23a08c9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1NjhjMDVhNTkxNzA1NTUyYjQzNWQzODRlNTI2ZjcwMmUyM2EwOGM5",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2015-12-03T08:53:23Z"
      },
      "committer": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2017-01-23T21:23:39Z"
      },
      "message": "Allow to opt-into RBF when creating a transaction",
      "tree": {
        "sha": "59b00020770f1424e11508d630fbc239321d45de",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/59b00020770f1424e11508d630fbc239321d45de"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/568c05a591705552b435d384e526f702e23a08c9",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/568c05a591705552b435d384e526f702e23a08c9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/568c05a591705552b435d384e526f702e23a08c9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/568c05a591705552b435d384e526f702e23a08c9/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "82274c02ed2d82537dc55f008a29edb1bc09bbc4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/82274c02ed2d82537dc55f008a29edb1bc09bbc4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/82274c02ed2d82537dc55f008a29edb1bc09bbc4"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 6,
      "deletions": 1
    },
    "files": [
      {
        "sha": "4e93e929be6b94740e6e46679c4ea06d8209491f",
        "filename": "src/wallet/coincontrol.h",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/568c05a591705552b435d384e526f702e23a08c9/src/wallet/coincontrol.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/568c05a591705552b435d384e526f702e23a08c9/src/wallet/coincontrol.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/coincontrol.h?ref=568c05a591705552b435d384e526f702e23a08c9",
        "patch": "@@ -6,6 +6,7 @@\n #define BITCOIN_WALLET_COINCONTROL_H\n \n #include \"primitives/transaction.h\"\n+#include \"wallet/wallet.h\"\n \n /** Coin Control Features. */\n class CCoinControl\n@@ -24,6 +25,8 @@ class CCoinControl\n     CFeeRate nFeeRate;\n     //! Override the default confirmation target, 0 = use default\n     int nConfirmTarget;\n+    //! Signal BIP-125 replace by fee.\n+    bool signalRbf;\n \n     CCoinControl()\n     {\n@@ -40,6 +43,7 @@ class CCoinControl\n         nFeeRate = CFeeRate(0);\n         fOverrideFeeRate = false;\n         nConfirmTarget = 0;\n+        signalRbf = fWalletRbf;\n     }\n \n     bool HasSelected() const"
      },
      {
        "sha": "1dddafb77d7bf3eb91c27a444f4014547b6fbee1",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/568c05a591705552b435d384e526f702e23a08c9/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/568c05a591705552b435d384e526f702e23a08c9/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=568c05a591705552b435d384e526f702e23a08c9",
        "patch": "@@ -2566,9 +2566,10 @@ bool CWallet::CreateTransaction(const vector<CRecipient>& vecSend, CWalletTx& wt\n                 // to avoid conflicting with other possible uses of nSequence,\n                 // and in the spirit of \"smallest posible change from prior\n                 // behavior.\"\n+                bool rbf = coinControl ? coinControl->signalRbf : fWalletRbf;\n                 for (const auto& coin : setCoins)\n                     txNew.vin.push_back(CTxIn(coin.first->GetHash(),coin.second,CScript(),\n-                                              std::numeric_limits<unsigned int>::max() - (fWalletRbf ? 2 : 1)));\n+                                              std::numeric_limits<unsigned int>::max() - (rbf ? 2 : 1)));\n \n                 // Fill in dummy signatures for fee calculation.\n                 int nIn = 0;"
      }
    ]
  },
  {
    "sha": "838a58e7ca5c534ae125ab510fbd65d2feec72a9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4MzhhNThlN2NhNWM1MzRhZTEyNWFiNTEwZmJkNjVkMmZlZWM3MmE5",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-04-05T14:55:41Z"
      },
      "committer": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2017-01-25T17:51:06Z"
      },
      "message": "[Qt] Add simple optin-RBF checkbox and confirmation info",
      "tree": {
        "sha": "00750aad071cde8d5fa4a7ef0442520f11ff06ec",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/00750aad071cde8d5fa4a7ef0442520f11ff06ec"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/838a58e7ca5c534ae125ab510fbd65d2feec72a9",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/838a58e7ca5c534ae125ab510fbd65d2feec72a9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/838a58e7ca5c534ae125ab510fbd65d2feec72a9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/838a58e7ca5c534ae125ab510fbd65d2feec72a9/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "568c05a591705552b435d384e526f702e23a08c9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/568c05a591705552b435d384e526f702e23a08c9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/568c05a591705552b435d384e526f702e23a08c9"
      }
    ],
    "stats": {
      "total": 23,
      "additions": 21,
      "deletions": 2
    },
    "files": [
      {
        "sha": "e25fe054e3ccd36887e43e8881743211f3088e74",
        "filename": "src/qt/forms/sendcoinsdialog.ui",
        "status": "modified",
        "additions": 12,
        "deletions": 2,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/838a58e7ca5c534ae125ab510fbd65d2feec72a9/src/qt/forms/sendcoinsdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/838a58e7ca5c534ae125ab510fbd65d2feec72a9/src/qt/forms/sendcoinsdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/sendcoinsdialog.ui?ref=838a58e7ca5c534ae125ab510fbd65d2feec72a9",
        "patch": "@@ -1158,6 +1158,16 @@\n              </item>\n             </layout>\n            </item>\n+           <item>\n+            <widget class=\"QCheckBox\" name=\"optInRBF\">\n+             <property name=\"text\">\n+              <string>Request Replace-By-Fee</string>\n+             </property>\n+             <property name=\"toolTip\">\n+              <string>Indicates that the sender may wish to replace this transaction with a new one paying higher fees (prior to being confirmed).</string>\n+             </property>\n+            </widget>\n+           </item>\n           </layout>\n          </widget>\n         </item>\n@@ -1168,8 +1178,8 @@\n           </property>\n           <property name=\"sizeHint\" stdset=\"0\">\n            <size>\n-            <width>800</width>\n-            <height>1</height>\n+            <width>40</width>\n+            <height>5</height>\n            </size>\n           </property>\n          </spacer>"
      },
      {
        "sha": "c30120c027a6b99a6cbfc7a4bbf37471d3e343b3",
        "filename": "src/qt/sendcoinsdialog.cpp",
        "status": "modified",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/838a58e7ca5c534ae125ab510fbd65d2feec72a9/src/qt/sendcoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/838a58e7ca5c534ae125ab510fbd65d2feec72a9/src/qt/sendcoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.cpp?ref=838a58e7ca5c534ae125ab510fbd65d2feec72a9",
        "patch": "@@ -245,6 +245,8 @@ void SendCoinsDialog::on_sendButton_clicked()\n     else\n         ctrl.nConfirmTarget = 0;\n \n+    ctrl.signalRbf = ui->optInRBF->isChecked();\n+\n     prepareStatus = model->prepareTransaction(currentTransaction, &ctrl);\n \n     // process prepareStatus and on error generate message shown to user\n@@ -324,6 +326,13 @@ void SendCoinsDialog::on_sendButton_clicked()\n     questionString.append(QString(\"<span style='font-size:10pt;font-weight:normal;'><br />(=%2)</span>\")\n         .arg(alternativeUnits.join(\" \" + tr(\"or\") + \"<br />\")));\n \n+    if (ui->optInRBF->isChecked())\n+    {\n+        questionString.append(\"<hr /><span>\");\n+        questionString.append(tr(\"This transaction signals replaceability (optin-RBF).\"));\n+        questionString.append(\"</span>\");\n+    }\n+\n     SendConfirmationDialog confirmationDialog(tr(\"Confirm send coins\"),\n         questionString.arg(formatted.join(\"<br />\")), SEND_CONFIRM_DELAY, this);\n     confirmationDialog.exec();"
      }
    ]
  },
  {
    "sha": "c4e4792c537bae6228fc3438dd971634985922f4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjNGU0NzkyYzUzN2JhZTYyMjhmYzM0MzhkZDk3MTYzNDk4NTkyMmY0",
    "commit": {
      "author": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2017-01-19T23:19:39Z"
      },
      "committer": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2017-01-25T17:51:06Z"
      },
      "message": "[Qt] Change RBF checkbox to reflect -walletrbf setting\n\nBefore this commit, the checkbox would always start off unchecked. After this\ncommit it will respect the -walletrbf setting (which is currently false by\ndefault).",
      "tree": {
        "sha": "13ed02f29b20fddf8e533847f3d2d4d53193273d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/13ed02f29b20fddf8e533847f3d2d4d53193273d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c4e4792c537bae6228fc3438dd971634985922f4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c4e4792c537bae6228fc3438dd971634985922f4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c4e4792c537bae6228fc3438dd971634985922f4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c4e4792c537bae6228fc3438dd971634985922f4/comments",
    "author": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "838a58e7ca5c534ae125ab510fbd65d2feec72a9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/838a58e7ca5c534ae125ab510fbd65d2feec72a9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/838a58e7ca5c534ae125ab510fbd65d2feec72a9"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 8,
      "deletions": 0
    },
    "files": [
      {
        "sha": "ee841c254fc76804dc514c59fb3a60ebc763844a",
        "filename": "src/qt/sendcoinsdialog.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c4e4792c537bae6228fc3438dd971634985922f4/src/qt/sendcoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c4e4792c537bae6228fc3438dd971634985922f4/src/qt/sendcoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.cpp?ref=c4e4792c537bae6228fc3438dd971634985922f4",
        "patch": "@@ -112,6 +112,7 @@ SendCoinsDialog::SendCoinsDialog(const PlatformStyle *_platformStyle, QWidget *p\n     ui->groupCustomFee->button((int)std::max(0, std::min(1, settings.value(\"nCustomFeeRadio\").toInt())))->setChecked(true);\n     ui->customFee->setValue(settings.value(\"nTransactionFee\").toLongLong());\n     ui->checkBoxMinimumFee->setChecked(settings.value(\"fPayOnlyMinFee\").toBool());\n+    ui->optInRBF->setCheckState(model->getDefaultWalletRbf() ? Qt::Checked : Qt::Unchecked);\n     minimizeFeeSection(settings.value(\"fFeeSectionMinimized\").toBool());\n }\n "
      },
      {
        "sha": "8004e9b253f17398a184f0dfdd7573a0c16f2441",
        "filename": "src/qt/walletmodel.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c4e4792c537bae6228fc3438dd971634985922f4/src/qt/walletmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c4e4792c537bae6228fc3438dd971634985922f4/src/qt/walletmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.cpp?ref=c4e4792c537bae6228fc3438dd971634985922f4",
        "patch": "@@ -706,3 +706,8 @@ int WalletModel::getDefaultConfirmTarget() const\n {\n     return nTxConfirmTarget;\n }\n+\n+bool WalletModel::getDefaultWalletRbf() const\n+{\n+    return fWalletRbf;\n+}"
      },
      {
        "sha": "78e45dc3693b4568ad4daca086e9f3f300eafc53",
        "filename": "src/qt/walletmodel.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c4e4792c537bae6228fc3438dd971634985922f4/src/qt/walletmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c4e4792c537bae6228fc3438dd971634985922f4/src/qt/walletmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.h?ref=c4e4792c537bae6228fc3438dd971634985922f4",
        "patch": "@@ -213,6 +213,8 @@ class WalletModel : public QObject\n \n     int getDefaultConfirmTarget() const;\n \n+    bool getDefaultWalletRbf() const;\n+\n private:\n     CWallet *wallet;\n     bool fHaveWatchOnly;"
      }
    ]
  }
]