sipa,2016-07-18T17:53:57Z,"This does not prevent the vulnerability, I think? Someone can still create a large number of high-(legacy)sigops transactions, and the mining code will include them, resulting in a very small block.\n\nAFAIK the only workable solution is to treat transactions in the mempool as if their size was max(size, sigops \* MAX_BLOCK_SIZE / MAX_SIGOPS).\n",https://github.com/bitcoin/bitcoin/pull/8364#issuecomment-233405628,233405628,
f139975,2016-07-18T18:01:01Z,"> This does not prevent the vulnerability, I think?\n\nThat's not the objective of this submission, but to remove the side effect of making multisig transactions non-standard, which was introduced by #7081, while leaving #7081 as intact as possible.\n\n> AFAIK the only workable solution is to scale up the mempool transaction size to max(size, sigops \* MAX_BLOCK_SIZE / MAX_SIGOPS).\n\nI'd be happy",https://github.com/bitcoin/bitcoin/pull/8364#issuecomment-233407774,233407774,
sipa,2016-07-18T18:02:34Z,"@f139975 I'll see what I can do. I understand the desire to have #8079 fixed, but not by reintroducing the attack that #7081 prevented.\n",https://github.com/bitcoin/bitcoin/pull/8364#issuecomment-233408255,233408255,
f139975,2016-07-18T18:03:10Z,Thank you!\n,https://github.com/bitcoin/bitcoin/pull/8364#issuecomment-233408423,233408423,
btcdrak,2016-07-18T18:36:48Z,ping @rubensayshi @NicolasDorier \n,https://github.com/bitcoin/bitcoin/pull/8364#issuecomment-233418229,233418229,
luke-jr,2016-07-18T19:50:48Z,"@sipa The DoS being addressed here was based on actual verification time, not the miner limit. So this fix (at least as described; have not reviewed the code) should be okay. Whether the mining code wants to demand a higher fee or not, is a separate (and perhaps reasonable) issue.\n\nConcept ACK. Would be nice if someone reopened and/or merged #5231 at the same time.\n",https://github.com/bitcoin/bitcoin/pull/8364#issuecomment-233438385,233438385,
sipa,2016-07-18T20:01:14Z,"@luke-jr 20000 verification operations are allowed, and that is not currently changed by any of the proposals (neither #7081, this PR, or #8365). If that is a problem, we should propose a softfork to reduce the sigops limit, not change relay policy (which only prevents it in an easily-avoided case).\n",https://github.com/bitcoin/bitcoin/pull/8364#issuecomment-233441097,233441097,
gmaxwell,2016-07-18T20:02:34Z,I don't see what use this serves. It makes the code more complex and doesn't constrain anyone's ability to cause computation. #8365 is sensible.\n,https://github.com/bitcoin/bitcoin/pull/8364#issuecomment-233441471,233441471,
laanwj,2016-07-26T12:28:24Z,"Closing in favor of #8365, which was merged today\n",https://github.com/bitcoin/bitcoin/pull/8364#issuecomment-235252623,235252623,
