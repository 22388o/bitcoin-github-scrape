[
  {
    "sha": "58c5cc9ce726ad5728761e4c06c69f1285cac91b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1OGM1Y2M5Y2U3MjZhZDU3Mjg3NjFlNGMwNmM2OWYxMjg1Y2FjOTFi",
    "commit": {
      "author": {
        "name": "James Hilliard",
        "email": "james.hilliard1@gmail.com",
        "date": "2018-10-25T00:39:46Z"
      },
      "committer": {
        "name": "James Hilliard",
        "email": "james.hilliard1@gmail.com",
        "date": "2018-11-10T21:39:35Z"
      },
      "message": "Adjust configure so that only bip70 is disabled when protobuf is missing instead of the GUI",
      "tree": {
        "sha": "09e6ac37e5e76e3426bcb5b85168106231f5899c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/09e6ac37e5e76e3426bcb5b85168106231f5899c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/58c5cc9ce726ad5728761e4c06c69f1285cac91b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/58c5cc9ce726ad5728761e4c06c69f1285cac91b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/58c5cc9ce726ad5728761e4c06c69f1285cac91b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/58c5cc9ce726ad5728761e4c06c69f1285cac91b/comments",
    "author": {
      "login": "jameshilliard",
      "id": 3298484,
      "node_id": "MDQ6VXNlcjMyOTg0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3298484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jameshilliard",
      "html_url": "https://github.com/jameshilliard",
      "followers_url": "https://api.github.com/users/jameshilliard/followers",
      "following_url": "https://api.github.com/users/jameshilliard/following{/other_user}",
      "gists_url": "https://api.github.com/users/jameshilliard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jameshilliard/subscriptions",
      "organizations_url": "https://api.github.com/users/jameshilliard/orgs",
      "repos_url": "https://api.github.com/users/jameshilliard/repos",
      "events_url": "https://api.github.com/users/jameshilliard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jameshilliard/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jameshilliard",
      "id": 3298484,
      "node_id": "MDQ6VXNlcjMyOTg0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3298484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jameshilliard",
      "html_url": "https://github.com/jameshilliard",
      "followers_url": "https://api.github.com/users/jameshilliard/followers",
      "following_url": "https://api.github.com/users/jameshilliard/following{/other_user}",
      "gists_url": "https://api.github.com/users/jameshilliard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jameshilliard/subscriptions",
      "organizations_url": "https://api.github.com/users/jameshilliard/orgs",
      "repos_url": "https://api.github.com/users/jameshilliard/repos",
      "events_url": "https://api.github.com/users/jameshilliard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jameshilliard/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "edc715240cb6738262ae96dea476544052eb5351",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/edc715240cb6738262ae96dea476544052eb5351",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/edc715240cb6738262ae96dea476544052eb5351"
      }
    ],
    "stats": {
      "total": 30,
      "additions": 20,
      "deletions": 10
    },
    "files": [
      {
        "sha": "ba4ea063d1845234e9961f2c18c528e2573b6ae6",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 20,
        "deletions": 10,
        "changes": 30,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/58c5cc9ce726ad5728761e4c06c69f1285cac91b/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/58c5cc9ce726ad5728761e4c06c69f1285cac91b/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=58c5cc9ce726ad5728761e4c06c69f1285cac91b",
        "patch": "@@ -213,7 +213,7 @@ AC_ARG_ENABLE([bip70],\n   [AS_HELP_STRING([--disable-bip70],\n   [disable BIP70 (payment protocol) support in GUI (enabled by default)])],\n   [enable_bip70=$enableval],\n-  [enable_bip70=yes])\n+  [enable_bip70=auto])\n \n AC_ARG_WITH([protoc-bindir],[AS_HELP_STRING([--with-protoc-bindir=BIN_DIR],[specify protoc bin path])], [protoc_bin_path=$withval], [])\n \n@@ -1088,7 +1088,7 @@ if test x$use_pkgconfig = xyes; then\n       PKG_CHECK_MODULES([SSL], [libssl],, [AC_MSG_ERROR(openssl not found.)])\n       PKG_CHECK_MODULES([CRYPTO], [libcrypto],,[AC_MSG_ERROR(libcrypto not found.)])\n       if test x$enable_bip70 != xno; then\n-        BITCOIN_QT_CHECK([PKG_CHECK_MODULES([PROTOBUF], [protobuf], [have_protobuf=yes], [BITCOIN_QT_FAIL(libprotobuf not found)])])\n+        BITCOIN_QT_CHECK([PKG_CHECK_MODULES([PROTOBUF], [protobuf], [have_protobuf=yes], [have_protobuf=no])])\n       fi\n       if test x$use_qr != xno; then\n         BITCOIN_QT_CHECK([PKG_CHECK_MODULES([QR], [libqrencode], [have_qrencode=yes], [have_qrencode=no])])\n@@ -1150,7 +1150,7 @@ else\n   fi\n \n   if test x$enable_bip70 != xno; then\n-    BITCOIN_QT_CHECK(AC_CHECK_LIB([protobuf] ,[main],[PROTOBUF_LIBS=-lprotobuf], BITCOIN_QT_FAIL(libprotobuf not found)))\n+    BITCOIN_QT_CHECK(AC_CHECK_LIB([protobuf] ,[main],[PROTOBUF_LIBS=-lprotobuf], [have_protobuf=no]))\n   fi\n   if test x$use_qr != xno; then\n     BITCOIN_QT_CHECK([AC_CHECK_LIB([qrencode], [main],[QR_LIBS=-lqrencode], [have_qrencode=no])])\n@@ -1229,8 +1229,10 @@ AM_CONDITIONAL([EMBEDDED_UNIVALUE],[test x$need_bundled_univalue = xyes])\n AC_SUBST(UNIVALUE_CFLAGS)\n AC_SUBST(UNIVALUE_LIBS)\n \n-if test x$enable_bip70 != xno; then\n-BITCOIN_QT_PATH_PROGS([PROTOC], [protoc],$protoc_bin_path)\n+\n+if test x$have_protobuf != xno &&\n+   test x$enable_bip70 != xno; then\n+  BITCOIN_QT_PATH_PROGS([PROTOC], [protoc],$protoc_bin_path)\n fi\n \n AC_MSG_CHECKING([whether to build bitcoind])\n@@ -1351,12 +1353,20 @@ if test x$bitcoin_enable_qt != xno; then\n   fi\n \n   AC_MSG_CHECKING([whether to build BIP70 support])\n-  if test x$enable_bip70 != xno; then\n-    AC_DEFINE([ENABLE_BIP70],[1],[Define if BIP70 support should be compiled in])\n-    enable_bip70=yes\n-    AC_MSG_RESULT([yes])\n+  if test x$have_protobuf = xno; then\n+    if test x$enable_bip70 = xyes; then\n+      AC_MSG_ERROR(protobuf missing)\n+    fi\n+    enable_bip70=no\n+    AC_MSG_RESULT(no)\n   else\n-    AC_MSG_RESULT([no])\n+    if test x$enable_bip70 != xno; then\n+      AC_DEFINE([ENABLE_BIP70],[1],[Define if BIP70 support should be compiled in])\n+      enable_bip70=yes\n+      AC_MSG_RESULT([yes])\n+    else\n+      AC_MSG_RESULT([no])\n+    fi\n   fi\n fi\n "
      }
    ]
  }
]