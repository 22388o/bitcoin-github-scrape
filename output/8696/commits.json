[
  {
    "sha": "59adc86680911a83dcccf5b23db299a370fc92f2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1OWFkYzg2NjgwOTExYTgzZGNjY2Y1YjIzZGIyOTlhMzcwZmM5MmYy",
    "commit": {
      "author": {
        "name": "Patrick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2016-09-10T01:53:23Z"
      },
      "committer": {
        "name": "Patrick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2016-09-15T13:52:15Z"
      },
      "message": "Add CWallet::ListAccountCreditDebit\n\nSimple pass through for CWalletDB::ListAccountCreditDebit",
      "tree": {
        "sha": "44f3a18b2e07624ed5b4f5769ed10945d1dca7b8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/44f3a18b2e07624ed5b4f5769ed10945d1dca7b8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/59adc86680911a83dcccf5b23db299a370fc92f2",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/59adc86680911a83dcccf5b23db299a370fc92f2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/59adc86680911a83dcccf5b23db299a370fc92f2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/59adc86680911a83dcccf5b23db299a370fc92f2/comments",
    "author": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a82e5d8220bbc8b5d786bed99b0876f530b9b7cc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a82e5d8220bbc8b5d786bed99b0876f530b9b7cc",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a82e5d8220bbc8b5d786bed99b0876f530b9b7cc"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 7,
      "deletions": 1
    },
    "files": [
      {
        "sha": "1863652fd72fc0ccecfc2dacf659bb7b13d7aea2",
        "filename": "src/wallet/test/accounting_tests.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/59adc86680911a83dcccf5b23db299a370fc92f2/src/wallet/test/accounting_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/59adc86680911a83dcccf5b23db299a370fc92f2/src/wallet/test/accounting_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/test/accounting_tests.cpp?ref=59adc86680911a83dcccf5b23db299a370fc92f2",
        "patch": "@@ -23,7 +23,7 @@ GetResults(CWalletDB& walletdb, std::map<CAmount, CAccountingEntry>& results)\n \n     results.clear();\n     BOOST_CHECK(walletdb.ReorderTransactions(pwalletMain) == DB_LOAD_OK);\n-    walletdb.ListAccountCreditDebit(\"\", aes);\n+    pwalletMain->ListAccountCreditDebit(\"\", aes);\n     BOOST_FOREACH(CAccountingEntry& ae, aes)\n     {\n         results[ae.nOrderPos] = ae;"
      },
      {
        "sha": "7b5511167370862e164fda4e4f55e4b1643ad6fd",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/59adc86680911a83dcccf5b23db299a370fc92f2/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/59adc86680911a83dcccf5b23db299a370fc92f2/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=59adc86680911a83dcccf5b23db299a370fc92f2",
        "patch": "@@ -2501,6 +2501,11 @@ bool CWallet::CommitTransaction(CWalletTx& wtxNew, CReserveKey& reservekey, CCon\n     return true;\n }\n \n+void CWallet::ListAccountCreditDebit(const std::string& strAccount, std::list<CAccountingEntry>& entries) {\n+    CWalletDB walletdb(strWalletFile);\n+    return walletdb.ListAccountCreditDebit(strAccount, entries);\n+}\n+\n bool CWallet::AddAccountingEntry(const CAccountingEntry& acentry, CWalletDB & pwalletdb)\n {\n     if (!pwalletdb.WriteAccountingEntry_Backend(acentry))"
      },
      {
        "sha": "160e097a8e7a43d0e7fc9c03b83560dcd68e71f5",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/59adc86680911a83dcccf5b23db299a370fc92f2/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/59adc86680911a83dcccf5b23db299a370fc92f2/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=59adc86680911a83dcccf5b23db299a370fc92f2",
        "patch": "@@ -775,6 +775,7 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n                            std::string& strFailReason, const CCoinControl *coinControl = NULL, bool sign = true);\n     bool CommitTransaction(CWalletTx& wtxNew, CReserveKey& reservekey, CConnman* connman);\n \n+    void ListAccountCreditDebit(const std::string& strAccount, std::list<CAccountingEntry>& entries);\n     bool AddAccountingEntry(const CAccountingEntry&, CWalletDB & pwalletdb);\n \n     static CFeeRate minTxFee;"
      }
    ]
  },
  {
    "sha": "d2e678d7d220e2f430c2cb4bde559acee00c8c7c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkMmU2NzhkN2QyMjBlMmY0MzBjMmNiNGJkZTU1OWFjZWUwMGM4Yzdj",
    "commit": {
      "author": {
        "name": "Patrick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2016-09-10T02:21:44Z"
      },
      "committer": {
        "name": "Patrick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2016-09-15T13:52:15Z"
      },
      "message": "Add CWallet::ReorderTransactions and use in accounting_tests.cpp",
      "tree": {
        "sha": "23bf275b725f77657292e7a8a281e4c49b2a6378",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/23bf275b725f77657292e7a8a281e4c49b2a6378"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d2e678d7d220e2f430c2cb4bde559acee00c8c7c",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d2e678d7d220e2f430c2cb4bde559acee00c8c7c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d2e678d7d220e2f430c2cb4bde559acee00c8c7c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d2e678d7d220e2f430c2cb4bde559acee00c8c7c/comments",
    "author": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "59adc86680911a83dcccf5b23db299a370fc92f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/59adc86680911a83dcccf5b23db299a370fc92f2",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/59adc86680911a83dcccf5b23db299a370fc92f2"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 8,
      "deletions": 1
    },
    "files": [
      {
        "sha": "ad2f081b4edc8b00b6a57c098adaefb6bf17fe25",
        "filename": "src/wallet/test/accounting_tests.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d2e678d7d220e2f430c2cb4bde559acee00c8c7c/src/wallet/test/accounting_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d2e678d7d220e2f430c2cb4bde559acee00c8c7c/src/wallet/test/accounting_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/test/accounting_tests.cpp?ref=d2e678d7d220e2f430c2cb4bde559acee00c8c7c",
        "patch": "@@ -22,7 +22,7 @@ GetResults(CWalletDB& walletdb, std::map<CAmount, CAccountingEntry>& results)\n     std::list<CAccountingEntry> aes;\n \n     results.clear();\n-    BOOST_CHECK(walletdb.ReorderTransactions(pwalletMain) == DB_LOAD_OK);\n+    BOOST_CHECK(pwalletMain->ReorderTransactions() == DB_LOAD_OK);\n     pwalletMain->ListAccountCreditDebit(\"\", aes);\n     BOOST_FOREACH(CAccountingEntry& ae, aes)\n     {"
      },
      {
        "sha": "fe9671926a8d10ced8727cf30bf134d787447941",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d2e678d7d220e2f430c2cb4bde559acee00c8c7c/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d2e678d7d220e2f430c2cb4bde559acee00c8c7c/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=d2e678d7d220e2f430c2cb4bde559acee00c8c7c",
        "patch": "@@ -649,6 +649,12 @@ bool CWallet::EncryptWallet(const SecureString& strWalletPassphrase)\n     return true;\n }\n \n+DBErrors CWallet::ReorderTransactions()\n+{\n+    CWalletDB walletdb(strWalletFile);\n+    return walletdb.ReorderTransactions(this);\n+}\n+\n int64_t CWallet::IncOrderPosNext(CWalletDB *pwalletdb)\n {\n     AssertLockHeld(cs_wallet); // nOrderPosNext"
      },
      {
        "sha": "2b978ba1ee09297cdde13deae98f0067cbfdf971",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d2e678d7d220e2f430c2cb4bde559acee00c8c7c/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d2e678d7d220e2f430c2cb4bde559acee00c8c7c/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=d2e678d7d220e2f430c2cb4bde559acee00c8c7c",
        "patch": "@@ -741,6 +741,7 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n      * @return next transaction order id\n      */\n     int64_t IncOrderPosNext(CWalletDB *pwalletdb = NULL);\n+    DBErrors ReorderTransactions();\n     bool AccountMove(std::string strFrom, std::string strTo, CAmount nAmount, std::string strComment = \"\");\n     bool GetAccountPubkey(CPubKey &pubKey, std::string strAccount, bool bForceNew = false);\n "
      }
    ]
  },
  {
    "sha": "02e2a815367945ea556a1ae9c3596917553ddfdb",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMmUyYTgxNTM2Nzk0NWVhNTU2YTFhZTljMzU5NjkxNzU1M2RkZmRi",
    "commit": {
      "author": {
        "name": "Patrick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2016-09-10T02:22:59Z"
      },
      "committer": {
        "name": "Patrick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2016-09-15T20:50:59Z"
      },
      "message": "Remove pwalletdb parameter from CWallet::AddAccountingEntry",
      "tree": {
        "sha": "c8b2ec6a40fe8e0d395b12b3f667084cf0120d6a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c8b2ec6a40fe8e0d395b12b3f667084cf0120d6a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/02e2a815367945ea556a1ae9c3596917553ddfdb",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/02e2a815367945ea556a1ae9c3596917553ddfdb",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/02e2a815367945ea556a1ae9c3596917553ddfdb",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/02e2a815367945ea556a1ae9c3596917553ddfdb/comments",
    "author": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d2e678d7d220e2f430c2cb4bde559acee00c8c7c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d2e678d7d220e2f430c2cb4bde559acee00c8c7c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d2e678d7d220e2f430c2cb4bde559acee00c8c7c"
      }
    ],
    "stats": {
      "total": 26,
      "additions": 17,
      "deletions": 9
    },
    "files": [
      {
        "sha": "6fc3a32aefe3aeb94a485855d623b4744dd63a20",
        "filename": "src/wallet/test/accounting_tests.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/02e2a815367945ea556a1ae9c3596917553ddfdb/src/wallet/test/accounting_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/02e2a815367945ea556a1ae9c3596917553ddfdb/src/wallet/test/accounting_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/test/accounting_tests.cpp?ref=02e2a815367945ea556a1ae9c3596917553ddfdb",
        "patch": "@@ -45,7 +45,7 @@ BOOST_AUTO_TEST_CASE(acc_orderupgrade)\n     ae.nTime = 1333333333;\n     ae.strOtherAccount = \"b\";\n     ae.strComment = \"\";\n-    pwalletMain->AddAccountingEntry(ae, walletdb);\n+    pwalletMain->AddAccountingEntry(ae);\n \n     wtx.mapValue[\"comment\"] = \"z\";\n     pwalletMain->AddToWallet(wtx);\n@@ -55,7 +55,7 @@ BOOST_AUTO_TEST_CASE(acc_orderupgrade)\n \n     ae.nTime = 1333333336;\n     ae.strOtherAccount = \"c\";\n-    pwalletMain->AddAccountingEntry(ae, walletdb);\n+    pwalletMain->AddAccountingEntry(ae);\n \n     GetResults(walletdb, results);\n \n@@ -71,7 +71,7 @@ BOOST_AUTO_TEST_CASE(acc_orderupgrade)\n     ae.nTime = 1333333330;\n     ae.strOtherAccount = \"d\";\n     ae.nOrderPos = pwalletMain->IncOrderPosNext();\n-    pwalletMain->AddAccountingEntry(ae, walletdb);\n+    pwalletMain->AddAccountingEntry(ae);\n \n     GetResults(walletdb, results);\n \n@@ -121,7 +121,7 @@ BOOST_AUTO_TEST_CASE(acc_orderupgrade)\n     ae.nTime = 1333333334;\n     ae.strOtherAccount = \"e\";\n     ae.nOrderPos = -1;\n-    pwalletMain->AddAccountingEntry(ae, walletdb);\n+    pwalletMain->AddAccountingEntry(ae);\n \n     GetResults(walletdb, results);\n "
      },
      {
        "sha": "1d7ddd99a33606c527f97de88a121f748dcbee88",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 4,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/02e2a815367945ea556a1ae9c3596917553ddfdb/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/02e2a815367945ea556a1ae9c3596917553ddfdb/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=02e2a815367945ea556a1ae9c3596917553ddfdb",
        "patch": "@@ -683,7 +683,7 @@ bool CWallet::AccountMove(std::string strFrom, std::string strTo, CAmount nAmoun\n     debit.nTime = nNow;\n     debit.strOtherAccount = strTo;\n     debit.strComment = strComment;\n-    AddAccountingEntry(debit, walletdb);\n+    AddAccountingEntry(debit, &walletdb);\n \n     // Credit\n     CAccountingEntry credit;\n@@ -693,7 +693,7 @@ bool CWallet::AccountMove(std::string strFrom, std::string strTo, CAmount nAmoun\n     credit.nTime = nNow;\n     credit.strOtherAccount = strFrom;\n     credit.strComment = strComment;\n-    AddAccountingEntry(credit, walletdb);\n+    AddAccountingEntry(credit, &walletdb);\n \n     if (!walletdb.TxnCommit())\n         return false;\n@@ -2512,9 +2512,16 @@ void CWallet::ListAccountCreditDebit(const std::string& strAccount, std::list<CA\n     return walletdb.ListAccountCreditDebit(strAccount, entries);\n }\n \n-bool CWallet::AddAccountingEntry(const CAccountingEntry& acentry, CWalletDB & pwalletdb)\n+bool CWallet::AddAccountingEntry(const CAccountingEntry& acentry)\n {\n-    if (!pwalletdb.WriteAccountingEntry_Backend(acentry))\n+    CWalletDB walletdb(strWalletFile);\n+\n+    return AddAccountingEntry(acentry, &walletdb);\n+}\n+\n+bool CWallet::AddAccountingEntry(const CAccountingEntry& acentry, CWalletDB *pwalletdb)\n+{\n+    if (!pwalletdb->WriteAccountingEntry_Backend(acentry))\n         return false;\n \n     laccentries.push_back(acentry);"
      },
      {
        "sha": "584f01320493188a9908be67d1b5626b82475dae",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/02e2a815367945ea556a1ae9c3596917553ddfdb/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/02e2a815367945ea556a1ae9c3596917553ddfdb/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=02e2a815367945ea556a1ae9c3596917553ddfdb",
        "patch": "@@ -777,7 +777,8 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n     bool CommitTransaction(CWalletTx& wtxNew, CReserveKey& reservekey, CConnman* connman);\n \n     void ListAccountCreditDebit(const std::string& strAccount, std::list<CAccountingEntry>& entries);\n-    bool AddAccountingEntry(const CAccountingEntry&, CWalletDB & pwalletdb);\n+    bool AddAccountingEntry(const CAccountingEntry&);\n+    bool AddAccountingEntry(const CAccountingEntry&, CWalletDB *pwalletdb);\n \n     static CFeeRate minTxFee;\n     static CFeeRate fallbackFee;"
      }
    ]
  },
  {
    "sha": "2ca6b9df1dfe50c294b01b5f06c5c5c7489f46c3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyY2E2YjlkZjFkZmU1MGMyOTRiMDFiNWYwNmM1YzVjNzQ4OWY0NmMz",
    "commit": {
      "author": {
        "name": "Patrick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2016-09-10T02:23:36Z"
      },
      "committer": {
        "name": "Patrick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2016-09-15T20:51:04Z"
      },
      "message": "Remove last reference to CWalletDB from accounting_tests.cpp",
      "tree": {
        "sha": "c76ec498f576621627f8869ba10127090249bb6e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c76ec498f576621627f8869ba10127090249bb6e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2ca6b9df1dfe50c294b01b5f06c5c5c7489f46c3",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2ca6b9df1dfe50c294b01b5f06c5c5c7489f46c3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2ca6b9df1dfe50c294b01b5f06c5c5c7489f46c3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2ca6b9df1dfe50c294b01b5f06c5c5c7489f46c3/comments",
    "author": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "02e2a815367945ea556a1ae9c3596917553ddfdb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/02e2a815367945ea556a1ae9c3596917553ddfdb",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/02e2a815367945ea556a1ae9c3596917553ddfdb"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 5,
      "deletions": 7
    },
    "files": [
      {
        "sha": "a833be13d065a397f2a5796dd5e5535153835bfc",
        "filename": "src/wallet/test/accounting_tests.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 7,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2ca6b9df1dfe50c294b01b5f06c5c5c7489f46c3/src/wallet/test/accounting_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2ca6b9df1dfe50c294b01b5f06c5c5c7489f46c3/src/wallet/test/accounting_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/test/accounting_tests.cpp?ref=2ca6b9df1dfe50c294b01b5f06c5c5c7489f46c3",
        "patch": "@@ -3,7 +3,6 @@\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n #include \"wallet/wallet.h\"\n-#include \"wallet/walletdb.h\"\n \n #include \"wallet/test/wallet_test_fixture.h\"\n \n@@ -17,7 +16,7 @@ extern CWallet* pwalletMain;\n BOOST_FIXTURE_TEST_SUITE(accounting_tests, WalletTestingSetup)\n \n static void\n-GetResults(CWalletDB& walletdb, std::map<CAmount, CAccountingEntry>& results)\n+GetResults(std::map<CAmount, CAccountingEntry>& results)\n {\n     std::list<CAccountingEntry> aes;\n \n@@ -32,7 +31,6 @@ GetResults(CWalletDB& walletdb, std::map<CAmount, CAccountingEntry>& results)\n \n BOOST_AUTO_TEST_CASE(acc_orderupgrade)\n {\n-    CWalletDB walletdb(pwalletMain->strWalletFile);\n     std::vector<CWalletTx*> vpwtx;\n     CWalletTx wtx;\n     CAccountingEntry ae;\n@@ -57,7 +55,7 @@ BOOST_AUTO_TEST_CASE(acc_orderupgrade)\n     ae.strOtherAccount = \"c\";\n     pwalletMain->AddAccountingEntry(ae);\n \n-    GetResults(walletdb, results);\n+    GetResults(results);\n \n     BOOST_CHECK(pwalletMain->nOrderPosNext == 3);\n     BOOST_CHECK(2 == results.size());\n@@ -73,7 +71,7 @@ BOOST_AUTO_TEST_CASE(acc_orderupgrade)\n     ae.nOrderPos = pwalletMain->IncOrderPosNext();\n     pwalletMain->AddAccountingEntry(ae);\n \n-    GetResults(walletdb, results);\n+    GetResults(results);\n \n     BOOST_CHECK(results.size() == 3);\n     BOOST_CHECK(pwalletMain->nOrderPosNext == 4);\n@@ -105,7 +103,7 @@ BOOST_AUTO_TEST_CASE(acc_orderupgrade)\n     vpwtx[2]->nTimeReceived = (unsigned int)1333333329;\n     vpwtx[2]->nOrderPos = -1;\n \n-    GetResults(walletdb, results);\n+    GetResults(results);\n \n     BOOST_CHECK(results.size() == 3);\n     BOOST_CHECK(pwalletMain->nOrderPosNext == 6);\n@@ -123,7 +121,7 @@ BOOST_AUTO_TEST_CASE(acc_orderupgrade)\n     ae.nOrderPos = -1;\n     pwalletMain->AddAccountingEntry(ae);\n \n-    GetResults(walletdb, results);\n+    GetResults(results);\n \n     BOOST_CHECK(results.size() == 4);\n     BOOST_CHECK(pwalletMain->nOrderPosNext == 7);"
      }
    ]
  }
]