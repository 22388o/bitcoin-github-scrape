[
  {
    "sha": "fadb44606f26a80daf4320eee046c9572e85fe3e",
    "node_id": "C_kwDOABII59oAKGZhZGI0NDYwNmYyNmE4MGRhZjQzMjBlZWUwNDZjOTU3MmU4NWZlM2U",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-10-21T10:52:18Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-10-21T11:57:09Z"
      },
      "message": "build: Inline FUZZ_SUITE_LDFLAGS_COMMON\n\nThis is a refactor",
      "tree": {
        "sha": "17b2b755e5f4b8c0dee49cd9b0a3c6ba78a165c1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/17b2b755e5f4b8c0dee49cd9b0a3c6ba78a165c1"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fadb44606f26a80daf4320eee046c9572e85fe3e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUiuIQv8DRVQvt7T7dS1ilDt4iHeXnqG+PRIo0axh8mY/4d7uqHnVWFzvL3kXfdI\n0i14a7d4cD+g6t35pr9EfQNjfBxkD8ta8VL/zdwHPpWWERwiTfrVssF+NMKG9SHA\nBF9rkIdt+2VpZPpownbP77G89UslIroHjmLnyxLMMpXKYxb0dE+ORi+oy/PmADsj\nwS/SQMZL+5s/pe2OfF+QkovTV/krTJ/54Cqpde1pLx9zwSO+alGgN6eYucK9GF6j\nLM4aCbkHBbr5tj/xnkLAYpmZFLJdrenoELwc7a36jE8v8f3evbUWzuVGAAWRS0a1\nv6fUXkaDUSQ5QmmBPs3HX88xwtIFP28LbG6xg7MYLmL3J1YcwbSLVUv+i3A0ysSH\nTaWACUwGU6sqXa8vb5kmFSlj02hDDDI7H1anHFUJW/5SJW0niK2H4VtrlPSNKRkX\nqvNC2AGoElwN5HGbpt1bs8J/cCrK8D1n3Lji7/jFj1X/7Ei/BmamHE4KNGAFK7yF\nDcSlpd4I\n=5c68\n-----END PGP SIGNATURE-----",
        "payload": "tree 17b2b755e5f4b8c0dee49cd9b0a3c6ba78a165c1\nparent 88fc7950f8db5f13a6b259819aced2e3db7ff4d8\nauthor MarcoFalke <falke.marco@gmail.com> 1634813538 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1634817429 +0200\n\nbuild: Inline FUZZ_SUITE_LDFLAGS_COMMON\n\nThis is a refactor\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fadb44606f26a80daf4320eee046c9572e85fe3e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fadb44606f26a80daf4320eee046c9572e85fe3e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fadb44606f26a80daf4320eee046c9572e85fe3e/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "88fc7950f8db5f13a6b259819aced2e3db7ff4d8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/88fc7950f8db5f13a6b259819aced2e3db7ff4d8",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/88fc7950f8db5f13a6b259819aced2e3db7ff4d8"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 1,
      "deletions": 3
    },
    "files": [
      {
        "sha": "16b44ebec29a2f8216f26fe3cf96d0ca9ff26918",
        "filename": "src/Makefile.test.include",
        "status": "modified",
        "additions": 1,
        "deletions": 3,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fadb44606f26a80daf4320eee046c9572e85fe3e/src/Makefile.test.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fadb44606f26a80daf4320eee046c9572e85fe3e/src/Makefile.test.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.test.include?ref=fadb44606f26a80daf4320eee046c9572e85fe3e",
        "patch": "@@ -199,13 +199,11 @@ test_test_bitcoin_LDADD += $(LIBBITCOIN_ZMQ) $(ZMQ_LIBS)\n FUZZ_SUITE_LD_COMMON += $(LIBBITCOIN_ZMQ) $(ZMQ_LIBS)\n endif\n \n-FUZZ_SUITE_LDFLAGS_COMMON = $(RELDFLAGS) $(AM_LDFLAGS) $(LIBTOOL_APP_LDFLAGS) $(PTHREAD_FLAGS)\n-\n if ENABLE_FUZZ_BINARY\n test_fuzz_fuzz_CPPFLAGS = $(AM_CPPFLAGS) $(BITCOIN_INCLUDES)\n test_fuzz_fuzz_CXXFLAGS = $(AM_CXXFLAGS) $(PIE_FLAGS)\n test_fuzz_fuzz_LDADD = $(FUZZ_SUITE_LD_COMMON)\n-test_fuzz_fuzz_LDFLAGS = $(FUZZ_SUITE_LDFLAGS_COMMON) $(RUNTIME_LDFLAGS)\n+test_fuzz_fuzz_LDFLAGS = $(RELDFLAGS) $(AM_LDFLAGS) $(LIBTOOL_APP_LDFLAGS) $(PTHREAD_FLAGS) $(RUNTIME_LDFLAGS)\n test_fuzz_fuzz_SOURCES = \\\n  test/fuzz/addition_overflow.cpp \\\n  test/fuzz/addrman.cpp \\"
      }
    ]
  },
  {
    "sha": "fa59d2ce5b8d6fe8c610f170a13675c756aef58f",
    "node_id": "C_kwDOABII59oAKGZhNTlkMmNlNWI4ZDZmZThjNjEwZjE3MGExMzY3NWM3NTZhZWY1OGY",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-10-21T12:16:44Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-10-22T10:42:12Z"
      },
      "message": "refactor: Use local args instead of global gArgs in CWallet::Create\n\nCan be reviewed with --word-diff-regex=.",
      "tree": {
        "sha": "67cb8d6c2b59a5a730eaf6debca3b13ff401d7f6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/67cb8d6c2b59a5a730eaf6debca3b13ff401d7f6"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa59d2ce5b8d6fe8c610f170a13675c756aef58f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgFTAv/WnMkrcgxU7JBlJH+L1nAl4yM+WbMwVVg8FSlVaaIzeYteFGpi1oCBxgo\nIIniLIDtuQNUXKJ2mzndh3JDZ4Xtx4YXfQC7UxpHd3Wat/3Kyf5bVpl6SKF4joo6\n/lDOgBJuNP23D8jgzWKHNLGuc4MtIzQCh8vwiSh8skhh8tPCoaaRsrS30U97yS4x\nlDOQ3YalxpLuzHEsUFxbpGjsovoSr8ueWs/+A3uo0z8lEy6DzT5ufZXIwpvGAq+I\nKgHcIs15oSy2LCCGHwlto/i/eTl3eh7RNCN1HE0sfLf/uGhyDJapuzrQpaw8umiL\n6VB0dQbahW4LabEb+ARZLdBm2l+RjTtqBPPqFry8jYDomcOWu36KZNxAiAGYzh46\nphyzbAHRVds6lnUQFVMICWWUBu7d2RN+8vjSOjS1XaUUpLDaJMBG49GK5PAfWdTi\nq3q5bmkwa1NeR/JepmjeQdGXbVut3gXMXBHbGKBKdN3RiACnyXrke5OhEjTLyQZh\ntSvQ0f+s\n=/uqa\n-----END PGP SIGNATURE-----",
        "payload": "tree 67cb8d6c2b59a5a730eaf6debca3b13ff401d7f6\nparent fadb44606f26a80daf4320eee046c9572e85fe3e\nauthor MarcoFalke <falke.marco@gmail.com> 1634818604 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1634899332 +0200\n\nrefactor: Use local args instead of global gArgs in CWallet::Create\n\nCan be reviewed with --word-diff-regex=.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa59d2ce5b8d6fe8c610f170a13675c756aef58f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa59d2ce5b8d6fe8c610f170a13675c756aef58f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa59d2ce5b8d6fe8c610f170a13675c756aef58f/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fadb44606f26a80daf4320eee046c9572e85fe3e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fadb44606f26a80daf4320eee046c9572e85fe3e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fadb44606f26a80daf4320eee046c9572e85fe3e"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 3,
      "deletions": 3
    },
    "files": [
      {
        "sha": "2cf9229cbc244f72aed5fffe90e6361bafbc2491",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa59d2ce5b8d6fe8c610f170a13675c756aef58f/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa59d2ce5b8d6fe8c610f170a13675c756aef58f/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=fa59d2ce5b8d6fe8c610f170a13675c756aef58f",
        "patch": "@@ -2732,11 +2732,11 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n         walletInstance->m_default_max_tx_fee = max_fee.value();\n     }\n \n-    if (gArgs.IsArgSet(\"-consolidatefeerate\")) {\n-        if (std::optional<CAmount> consolidate_feerate = ParseMoney(gArgs.GetArg(\"-consolidatefeerate\", \"\"))) {\n+    if (args.IsArgSet(\"-consolidatefeerate\")) {\n+        if (std::optional<CAmount> consolidate_feerate = ParseMoney(args.GetArg(\"-consolidatefeerate\", \"\"))) {\n             walletInstance->m_consolidate_feerate = CFeeRate(*consolidate_feerate);\n         } else {\n-            error = AmountErrMsg(\"consolidatefeerate\", gArgs.GetArg(\"-consolidatefeerate\", \"\"));\n+            error = AmountErrMsg(\"consolidatefeerate\", args.GetArg(\"-consolidatefeerate\", \"\"));\n             return nullptr;\n         }\n     }"
      }
    ]
  },
  {
    "sha": "fa7c6efca66627e4c76adecc824f96da220af69c",
    "node_id": "C_kwDOABII59oAKGZhN2M2ZWZjYTY2NjI3ZTRjNzZhZGVjYzgyNGY5NmRhMjIwYWY2OWM",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-10-21T12:07:36Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-10-22T10:43:18Z"
      },
      "message": "fuzz: Add wallet fuzz test",
      "tree": {
        "sha": "9bb807a51c0ff3a274b6e3767a4df64f025648de",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9bb807a51c0ff3a274b6e3767a4df64f025648de"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa7c6efca66627e4c76adecc824f96da220af69c",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUil5Av9Fq+wMAl3M6qK4UAB8novd5qgn+gtizdRTxP2sn8GaDW3Uadss/gl7TJn\nl0OMWS2Nu1CnLOnvB2T7uckMjbWfg794SOD/IqDmKZXJdoP0TT5Vr1TpxsK8uTqk\nRjDCsNYgJ3XgvuUIHJshhPdLLH41sjrBKP01uLHEueJmBmRa4mFumoACYhFymn/g\n10j+vtIZgGDXD6Xg3nRCj3BGzZytEFiplSBbmGkgLEQFUCePEnAcIB2x4eXf8rgZ\nHCzH6P9nkzYAGdS5wCG4H8UftOydQW0i8aqfu0VJO6KRWtUl8RRYF1mV4uUGn5+R\nFJ+VBtCfMsMCCNdbuHY0c1hUGz2ngCSSzZiSCcWyM+Fv0Ni/cpEt9uwtUZWz3/JI\nzs4CUG3BrH8VJ5nzCLkxoyjuAxlY5alCDS0e0nFUisMGzrZ4y34kMwESN4IZ4pRQ\n0NFeJPGsQ3I5f94tQpGauJDpSL8RRZQCR68IpWJB7/00jVw2P+1styIKFAtj+Rnw\nCsNvKBsg\n=hDAp\n-----END PGP SIGNATURE-----",
        "payload": "tree 9bb807a51c0ff3a274b6e3767a4df64f025648de\nparent fa59d2ce5b8d6fe8c610f170a13675c756aef58f\nauthor MarcoFalke <falke.marco@gmail.com> 1634818056 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1634899398 +0200\n\nfuzz: Add wallet fuzz test\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa7c6efca66627e4c76adecc824f96da220af69c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa7c6efca66627e4c76adecc824f96da220af69c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa7c6efca66627e4c76adecc824f96da220af69c/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa59d2ce5b8d6fe8c610f170a13675c756aef58f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa59d2ce5b8d6fe8c610f170a13675c756aef58f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa59d2ce5b8d6fe8c610f170a13675c756aef58f"
      }
    ],
    "stats": {
      "total": 181,
      "additions": 179,
      "deletions": 2
    },
    "files": [
      {
        "sha": "7e8b124b020fea1fff7e317f39a32028374020de",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa7c6efca66627e4c76adecc824f96da220af69c/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa7c6efca66627e4c76adecc824f96da220af69c/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=fa7c6efca66627e4c76adecc824f96da220af69c",
        "patch": "@@ -1244,7 +1244,6 @@ if test \"x$enable_fuzz\" = \"xyes\"; then\n   bitcoin_enable_qt=no\n   bitcoin_enable_qt_test=no\n   bitcoin_enable_qt_dbus=no\n-  enable_wallet=no\n   use_bench=no\n   use_external_signer=no\n   use_upnp=no"
      },
      {
        "sha": "5a5c74c044dd054a14bf6656a6b4e72f0bb9707a",
        "filename": "src/Makefile.test.include",
        "status": "modified",
        "additions": 6,
        "deletions": 1,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa7c6efca66627e4c76adecc824f96da220af69c/src/Makefile.test.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa7c6efca66627e4c76adecc824f96da220af69c/src/Makefile.test.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.test.include?ref=fa7c6efca66627e4c76adecc824f96da220af69c",
        "patch": "@@ -170,6 +170,10 @@ if USE_BDB\n BITCOIN_TESTS += wallet/test/db_tests.cpp\n endif\n \n+if USE_SQLITE\n+FUZZ_WALLET_SRC = \\\n+ wallet/test/fuzz/notifications.cpp\n+endif # USE_SQLITE\n \n BITCOIN_TEST_SUITE += \\\n   wallet/test/util.cpp \\\n@@ -178,7 +182,7 @@ BITCOIN_TEST_SUITE += \\\n   wallet/test/wallet_test_fixture.h \\\n   wallet/test/init_test_fixture.cpp \\\n   wallet/test/init_test_fixture.h\n-endif\n+endif # ENABLE_WALLET\n \n test_test_bitcoin_SOURCES = $(BITCOIN_TEST_SUITE) $(BITCOIN_TESTS) $(JSON_TEST_FILES) $(RAW_TEST_FILES)\n test_test_bitcoin_CPPFLAGS = $(AM_CPPFLAGS) $(BITCOIN_INCLUDES) $(TESTDEFS) $(EVENT_CFLAGS)\n@@ -205,6 +209,7 @@ test_fuzz_fuzz_CXXFLAGS = $(AM_CXXFLAGS) $(PIE_FLAGS)\n test_fuzz_fuzz_LDADD = $(FUZZ_SUITE_LD_COMMON)\n test_fuzz_fuzz_LDFLAGS = $(RELDFLAGS) $(AM_LDFLAGS) $(LIBTOOL_APP_LDFLAGS) $(PTHREAD_FLAGS) $(RUNTIME_LDFLAGS)\n test_fuzz_fuzz_SOURCES = \\\n+ $(FUZZ_WALLET_SRC) \\\n  test/fuzz/addition_overflow.cpp \\\n  test/fuzz/addrman.cpp \\\n  test/fuzz/asmap.cpp \\"
      },
      {
        "sha": "252832785b7dadeddd5fbd7768ef091747ac222d",
        "filename": "src/wallet/test/fuzz/notifications.cpp",
        "status": "added",
        "additions": 173,
        "deletions": 0,
        "changes": 173,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa7c6efca66627e4c76adecc824f96da220af69c/src/wallet/test/fuzz/notifications.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa7c6efca66627e4c76adecc824f96da220af69c/src/wallet/test/fuzz/notifications.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/test/fuzz/notifications.cpp?ref=fa7c6efca66627e4c76adecc824f96da220af69c",
        "patch": "@@ -0,0 +1,173 @@\n+// Copyright (c) 2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <util/translation.h>\n+#include <wallet/context.h>\n+#include <wallet/receive.h>\n+#include <wallet/wallet.h>\n+#include <wallet/walletdb.h>\n+#include <wallet/walletutil.h>\n+\n+#include <cassert>\n+#include <cstdint>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+const TestingSetup* g_setup;\n+\n+void initialize_setup()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+    g_setup = testing_setup.get();\n+}\n+\n+/**\n+ * Wraps a descriptor wallet for fuzzing. The constructor writes the sqlite db\n+ * to disk, the destructor deletes it.\n+ */\n+struct FuzzedWallet {\n+    ArgsManager args;\n+    WalletContext context;\n+    std::shared_ptr<CWallet> wallet;\n+    FuzzedWallet(const std::string& name)\n+    {\n+        context.args = &args;\n+        context.chain = g_setup->m_node.chain.get();\n+\n+        DatabaseOptions options;\n+        options.require_create = true;\n+        options.create_flags = WALLET_FLAG_DESCRIPTORS;\n+        const std::optional<bool> load_on_start;\n+        gArgs.ForceSetArg(\"-keypool\", \"0\"); // Avoid timeout in TopUp()\n+\n+        DatabaseStatus status;\n+        bilingual_str error;\n+        std::vector<bilingual_str> warnings;\n+        wallet = CreateWallet(context, name, load_on_start, options, status, error, warnings);\n+        assert(wallet);\n+        assert(error.empty());\n+        assert(warnings.empty());\n+        assert(wallet->IsWalletFlagSet(WALLET_FLAG_DESCRIPTORS));\n+    }\n+    ~FuzzedWallet()\n+    {\n+        const auto name{wallet->GetName()};\n+        std::vector<bilingual_str> warnings;\n+        std::optional<bool> load_on_start;\n+        assert(RemoveWallet(context, wallet, load_on_start, warnings));\n+        assert(warnings.empty());\n+        UnloadWallet(std::move(wallet));\n+        fs::remove_all(GetWalletDir() / name);\n+    }\n+    CScript GetScriptPubKey(FuzzedDataProvider& fuzzed_data_provider)\n+    {\n+        auto type{fuzzed_data_provider.PickValueInArray(OUTPUT_TYPES)};\n+        if (type == OutputType::BECH32M) {\n+            type = OutputType::BECH32; // TODO: Setup taproot descriptor and remove this line\n+        }\n+        CTxDestination dest;\n+        bilingual_str error;\n+        if (fuzzed_data_provider.ConsumeBool()) {\n+            assert(wallet->GetNewDestination(type, \"\", dest, error));\n+        } else {\n+            assert(wallet->GetNewChangeDestination(type, dest, error));\n+        }\n+        assert(error.empty());\n+        return GetScriptForDestination(dest);\n+    }\n+};\n+\n+FUZZ_TARGET_INIT(wallet_notifications, initialize_setup)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+    // The total amount, to be distributed to the wallets a and b in txs\n+    // without fee. Thus, the balance of the wallets should always equal the\n+    // total amount.\n+    const auto total_amount{ConsumeMoney(fuzzed_data_provider)};\n+    FuzzedWallet a{\"fuzzed_wallet_a\"};\n+    FuzzedWallet b{\"fuzzed_wallet_b\"};\n+\n+    // Keep track of all coins in this test.\n+    // Each tuple in the chain represents the coins and the block created with\n+    // those coins. Once the block is mined, the next tuple will have an empty\n+    // block and the freshly mined coins.\n+    using Coins = std::set<std::tuple<CAmount, COutPoint>>;\n+    std::vector<std::tuple<Coins, CBlock>> chain;\n+    {\n+        // Add the inital entry\n+        chain.emplace_back();\n+        auto& [coins, block]{chain.back()};\n+        coins.emplace(total_amount, COutPoint{uint256::ONE, 1});\n+    }\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 200)\n+    {\n+        CallOneOf(\n+            fuzzed_data_provider,\n+            [&] {\n+                auto& [coins_orig, block]{chain.back()};\n+                // Copy the coins for this block and consume all of them\n+                Coins coins = coins_orig;\n+                while (!coins.empty()) {\n+                    // Create a new tx\n+                    CMutableTransaction tx{};\n+                    // Add some coins as inputs to it\n+                    auto num_inputs{fuzzed_data_provider.ConsumeIntegralInRange<int>(1, coins.size())};\n+                    CAmount in{0};\n+                    while (num_inputs-- > 0) {\n+                        const auto& [coin_amt, coin_outpoint]{*coins.begin()};\n+                        in += coin_amt;\n+                        tx.vin.emplace_back(coin_outpoint);\n+                        coins.erase(coins.begin());\n+                    }\n+                    // Create some outputs spending all inputs, without fee\n+                    LIMITED_WHILE(in > 0 && fuzzed_data_provider.ConsumeBool(), 100)\n+                    {\n+                        const auto out_value{ConsumeMoney(fuzzed_data_provider, in)};\n+                        in -= out_value;\n+                        auto& wallet{fuzzed_data_provider.ConsumeBool() ? a : b};\n+                        tx.vout.emplace_back(out_value, wallet.GetScriptPubKey(fuzzed_data_provider));\n+                    }\n+                    // Spend the remaining input value, if any\n+                    auto& wallet{fuzzed_data_provider.ConsumeBool() ? a : b};\n+                    tx.vout.emplace_back(in, wallet.GetScriptPubKey(fuzzed_data_provider));\n+                    // Add tx to block\n+                    block.vtx.emplace_back(MakeTransactionRef(tx));\n+                }\n+                // Mine block\n+                a.wallet->blockConnected(block, chain.size());\n+                b.wallet->blockConnected(block, chain.size());\n+                // Store the coins for the next block\n+                Coins coins_new;\n+                for (const auto& tx : block.vtx) {\n+                    uint32_t i{0};\n+                    for (const auto& out : tx->vout) {\n+                        coins_new.emplace(out.nValue, COutPoint{tx->GetHash(), i++});\n+                    }\n+                }\n+                chain.emplace_back(coins_new, CBlock{});\n+            },\n+            [&] {\n+                if (chain.size() <= 1) return; // The first entry can't be removed\n+                auto& [coins, block]{chain.back()};\n+                if (block.vtx.empty()) return; // Can only disconnect if the block was submitted first\n+                // Disconnect block\n+                a.wallet->blockDisconnected(block, chain.size() - 1);\n+                b.wallet->blockDisconnected(block, chain.size() - 1);\n+                chain.pop_back();\n+            });\n+        auto& [coins, first_block]{chain.front()};\n+        if (!first_block.vtx.empty()) {\n+            // Only check balance when at least one block was submitted\n+            const auto bal_a{GetBalance(*a.wallet).m_mine_trusted};\n+            const auto bal_b{GetBalance(*b.wallet).m_mine_trusted};\n+            assert(total_amount == bal_a + bal_b);\n+        }\n+    }\n+}\n+} // namespace"
      }
    ]
  },
  {
    "sha": "11115169a14d0d0be5b7b1c3f6fdc9673a9098d9",
    "node_id": "C_kwDOABII59oAKDExMTE1MTY5YTE0ZDBkMGJlNWI3YjFjM2Y2ZmRjOTY3M2E5MDk4ZDk",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-10-28T12:38:55Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-10-28T12:32:47Z"
      },
      "message": "ci: Build fuzz with libsqlite3-dev",
      "tree": {
        "sha": "f7e3c9edbc100a8b88c96a26e8018e94832c11b6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f7e3c9edbc100a8b88c96a26e8018e94832c11b6"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/11115169a14d0d0be5b7b1c3f6fdc9673a9098d9",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUj2YwwAukhjcNBDxSxQyGnI86Sv91BmRqnHEb/QTJjuF1FONOynpCcQoVtlmrax\nfgCWkQQpQbEwgvQDPPuS6v3l+lpSpvuaApBBdjMPujQ4EDuaU0W2+MxSGq1ICHF9\nHVLYDRixsSsV/M8Z82PzolaywaLOs5gY9mBTwF5I+hCuPuUKIMAXdONdnLT6ZDqa\njozzOyvjJdkAYN9NQVJMZcy9CKINHpZIrDiEqb4GoVOoYnN2arDHgMZEMqfQt0Ke\nEh1jV9VGWCkTS9crcjVx6OXRQpT+ZUBT7xgtq8Byj67zG1ZqpuXVWIKHwl1i6lbK\npzyqVoRxQVAUf4F41/CSH8YHekOIl1vRc0d5dlZyFgBvthCiUhJNtN/ZSr4OcxjI\nXMlZwNWhaBH0qNPnM1P5h2yXsKLxg3pUQXIymVsJdFDJR6mKZkuAA1oUT/3uis84\nF/KT2l7ntadiKAVGsQvoNMpcf1z9PpEhEu3TDzz8Z1b5AfHCYfviJ1Cs6bhGXqRc\nPMBNfseq\n=4uIR\n-----END PGP SIGNATURE-----",
        "payload": "tree f7e3c9edbc100a8b88c96a26e8018e94832c11b6\nparent fa7c6efca66627e4c76adecc824f96da220af69c\nauthor MarcoFalke <falke.marco@gmail.com> 1635424735 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1635424367 +0100\n\nci: Build fuzz with libsqlite3-dev\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/11115169a14d0d0be5b7b1c3f6fdc9673a9098d9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/11115169a14d0d0be5b7b1c3f6fdc9673a9098d9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/11115169a14d0d0be5b7b1c3f6fdc9673a9098d9/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa7c6efca66627e4c76adecc824f96da220af69c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa7c6efca66627e4c76adecc824f96da220af69c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa7c6efca66627e4c76adecc824f96da220af69c"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "9c34cfdf5045539a7690f4a4c5b476d3ea63e7ba",
        "filename": "ci/test/00_setup_env_native_fuzz.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/11115169a14d0d0be5b7b1c3f6fdc9673a9098d9/ci/test/00_setup_env_native_fuzz.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/11115169a14d0d0be5b7b1c3f6fdc9673a9098d9/ci/test/00_setup_env_native_fuzz.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/00_setup_env_native_fuzz.sh?ref=11115169a14d0d0be5b7b1c3f6fdc9673a9098d9",
        "patch": "@@ -8,7 +8,7 @@ export LC_ALL=C.UTF-8\n \n export DOCKER_NAME_TAG=\"ubuntu:20.04\"\n export CONTAINER_NAME=ci_native_fuzz\n-export PACKAGES=\"clang llvm python3 libevent-dev bsdmainutils libboost-dev libboost-system-dev libboost-filesystem-dev libboost-test-dev\"\n+export PACKAGES=\"clang llvm python3 libevent-dev bsdmainutils libboost-dev libboost-system-dev libboost-filesystem-dev libboost-test-dev libsqlite3-dev\"\n export NO_DEPENDS=1\n export RUN_UNIT_TESTS=false\n export RUN_FUNCTIONAL_TESTS=false"
      },
      {
        "sha": "673326ded73402e586f244bb92b69dd9ce4d33e9",
        "filename": "ci/test/00_setup_env_native_fuzz_with_valgrind.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/11115169a14d0d0be5b7b1c3f6fdc9673a9098d9/ci/test/00_setup_env_native_fuzz_with_valgrind.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/11115169a14d0d0be5b7b1c3f6fdc9673a9098d9/ci/test/00_setup_env_native_fuzz_with_valgrind.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/00_setup_env_native_fuzz_with_valgrind.sh?ref=11115169a14d0d0be5b7b1c3f6fdc9673a9098d9",
        "patch": "@@ -8,7 +8,7 @@ export LC_ALL=C.UTF-8\n \n export DOCKER_NAME_TAG=\"ubuntu:20.04\"\n export CONTAINER_NAME=ci_native_fuzz_valgrind\n-export PACKAGES=\"clang llvm python3 libevent-dev bsdmainutils libboost-dev libboost-system-dev libboost-filesystem-dev libboost-test-dev valgrind\"\n+export PACKAGES=\"clang llvm python3 libevent-dev bsdmainutils libboost-dev libboost-system-dev libboost-filesystem-dev libboost-test-dev libsqlite3-dev valgrind\"\n export NO_DEPENDS=1\n export RUN_UNIT_TESTS=false\n export RUN_FUNCTIONAL_TESTS=false"
      }
    ]
  }
]