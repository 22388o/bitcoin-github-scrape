[
  {
    "sha": "0b807a417f4a15f3e37ae35e70a72e6169f01c02",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowYjgwN2E0MTdmNGExNWYzZTM3YWUzNWU3MGE3MmU2MTY5ZjAxYzAy",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2012-02-18T13:55:02Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2012-02-18T14:42:29Z"
      },
      "message": "Add SetMinVersion to CWallet",
      "tree": {
        "sha": "da6bc0f32945d45a8cb9a366d6a729260e33bdda",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/da6bc0f32945d45a8cb9a366d6a729260e33bdda"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0b807a417f4a15f3e37ae35e70a72e6169f01c02",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0b807a417f4a15f3e37ae35e70a72e6169f01c02",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0b807a417f4a15f3e37ae35e70a72e6169f01c02",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0b807a417f4a15f3e37ae35e70a72e6169f01c02/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2d36b60f9278f2b6fedadbb3b5f29e19244f5cef",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2d36b60f9278f2b6fedadbb3b5f29e19244f5cef",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2d36b60f9278f2b6fedadbb3b5f29e19244f5cef"
      }
    ],
    "stats": {
      "total": 46,
      "additions": 44,
      "deletions": 2
    },
    "files": [
      {
        "sha": "ea6d46a6e57ee232ac708faf7fb6b70b9682db82",
        "filename": "src/db.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0b807a417f4a15f3e37ae35e70a72e6169f01c02/src/db.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0b807a417f4a15f3e37ae35e70a72e6169f01c02/src/db.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/db.cpp?ref=0b807a417f4a15f3e37ae35e70a72e6169f01c02",
        "patch": "@@ -940,6 +940,7 @@ int CWalletDB::LoadWallet(CWallet* pwallet)\n                 ssValue >> nMinVersion;\n                 if (nMinVersion > CLIENT_VERSION)\n                     return DB_TOO_NEW;\n+                pwallet->LoadMinVersion(nMinVersion);\n             }\n             else if (strType == \"cscript\")\n             {"
      },
      {
        "sha": "2611faa461280668e23e914e1363f8505d239122",
        "filename": "src/db.h",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0b807a417f4a15f3e37ae35e70a72e6169f01c02/src/db.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0b807a417f4a15f3e37ae35e70a72e6169f01c02/src/db.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/db.h?ref=0b807a417f4a15f3e37ae35e70a72e6169f01c02",
        "patch": "@@ -486,6 +486,11 @@ class CWalletDB : public CDB\n         return Write(std::make_pair(std::string(\"setting\"), strKey), value);\n     }\n \n+    bool WriteMinVersion(int nVersion)\n+    {\n+        return Write(std::string(\"minversion\"), nVersion);\n+    }\n+\n     bool ReadAccount(const std::string& strAccount, CAccount& account);\n     bool WriteAccount(const std::string& strAccount, const CAccount& account);\n     bool WriteAccountingEntry(const CAccountingEntry& acentry);"
      },
      {
        "sha": "42c49aa89176846fabb57cc13ac98ea6afd12f09",
        "filename": "src/wallet.cpp",
        "status": "modified",
        "additions": 29,
        "deletions": 2,
        "changes": 31,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0b807a417f4a15f3e37ae35e70a72e6169f01c02/src/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0b807a417f4a15f3e37ae35e70a72e6169f01c02/src/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet.cpp?ref=0b807a417f4a15f3e37ae35e70a72e6169f01c02",
        "patch": "@@ -131,6 +131,32 @@ class CCorruptAddress\n     )\n };\n \n+bool CWallet::SetMinVersion(int nVersion, CWalletDB* pwalletdbIn)\n+{\n+    if (nWalletVersion >= nVersion)\n+        return true;\n+\n+    nWalletVersion = nVersion;\n+\n+    if (fFileBacked)\n+    {\n+        CWalletDB* pwalletdb = pwalletdbIn ? pwalletdbIn : new CWalletDB(strWalletFile);\n+        if (nWalletVersion >= 40000)\n+        {\n+            // Versions prior to 0.4.0 did not support the \"minversion\" record.\n+            // Use a CCorruptAddress to make them crash instead.\n+            CCorruptAddress corruptAddress;\n+            pwalletdb->WriteSetting(\"addrIncoming\", corruptAddress);\n+        }\n+        if (nWalletVersion > 40000)\n+            pwalletdb->WriteMinVersion(nWalletVersion);\n+        if (!pwalletdbIn)\n+            delete pwalletdb;\n+    }\n+\n+    return true;\n+}\n+\n bool CWallet::EncryptWallet(const SecureString& strWalletPassphrase)\n {\n     if (IsCrypted())\n@@ -184,10 +210,11 @@ bool CWallet::EncryptWallet(const SecureString& strWalletPassphrase)\n             exit(1); //We now probably have half of our keys encrypted in memory, and half not...die and let the user reload their unencrypted wallet.\n         }\n \n+        // Encryption was introduced in version 0.4.0\n+        SetMinVersion(40000, pwalletdbEncryption);\n+\n         if (fFileBacked)\n         {\n-            CCorruptAddress corruptAddress;\n-            pwalletdbEncryption->WriteSetting(\"addrIncoming\", corruptAddress);\n             if (!pwalletdbEncryption->TxnCommit())\n                 exit(1); //We now have keys encrypted in memory, but no on disk...die to avoid confusion and let the user reload their unencrypted wallet.\n "
      },
      {
        "sha": "622ff974b9b0c0de538988f00f27d32ddf723fad",
        "filename": "src/wallet.h",
        "status": "modified",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0b807a417f4a15f3e37ae35e70a72e6169f01c02/src/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0b807a417f4a15f3e37ae35e70a72e6169f01c02/src/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet.h?ref=0b807a417f4a15f3e37ae35e70a72e6169f01c02",
        "patch": "@@ -25,6 +25,8 @@ class CWallet : public CCryptoKeyStore\n \n     CWalletDB *pwalletdbEncryption;\n \n+    int nWalletVersion;\n+\n public:\n     mutable CCriticalSection cs_wallet;\n \n@@ -33,18 +35,21 @@ class CWallet : public CCryptoKeyStore\n \n     std::set<int64> setKeyPool;\n \n+\n     typedef std::map<unsigned int, CMasterKey> MasterKeyMap;\n     MasterKeyMap mapMasterKeys;\n     unsigned int nMasterKeyMaxID;\n \n     CWallet()\n     {\n+        nWalletVersion = 0;\n         fFileBacked = false;\n         nMasterKeyMaxID = 0;\n         pwalletdbEncryption = NULL;\n     }\n     CWallet(std::string strWalletFileIn)\n     {\n+        nWalletVersion = 0;\n         strWalletFile = strWalletFileIn;\n         fFileBacked = true;\n         nMasterKeyMaxID = 0;\n@@ -66,6 +71,8 @@ class CWallet : public CCryptoKeyStore\n     // Adds a key to the store, without saving it to disk (used by LoadWallet)\n     bool LoadKey(const CKey& key) { return CCryptoKeyStore::AddKey(key); }\n \n+    bool LoadMinVersion(int nVersion) { nWalletVersion = nVersion; return true; }\n+\n     // Adds an encrypted key to the store, and saves it to disk.\n     bool AddCryptedKey(const std::vector<unsigned char> &vchPubKey, const std::vector<unsigned char> &vchCryptedSecret);\n     // Adds an encrypted key to the store, without saving it to disk (used by LoadWallet)\n@@ -206,6 +213,8 @@ class CWallet : public CCryptoKeyStore\n     bool GetTransaction(const uint256 &hashTx, CWalletTx& wtx);\n \n     bool SetDefaultKey(const std::vector<unsigned char> &vchPubKey);\n+\n+    bool SetMinVersion(int nVersion, CWalletDB* pwalletdbIn = NULL);\n };\n \n "
      }
    ]
  },
  {
    "sha": "9976cf070fdda61afa30cd65ef5bcddad4f43e81",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5OTc2Y2YwNzBmZGRhNjFhZmEzMGNkNjVlZjViY2RkYWQ0ZjQzZTgx",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2012-02-18T14:02:36Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2012-02-18T14:42:38Z"
      },
      "message": "Move GenerateNewKey back to CWallet",
      "tree": {
        "sha": "79b6434a7ab3303a6c4fb3c03769272c0ff3a47a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/79b6434a7ab3303a6c4fb3c03769272c0ff3a47a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9976cf070fdda61afa30cd65ef5bcddad4f43e81",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9976cf070fdda61afa30cd65ef5bcddad4f43e81",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/9976cf070fdda61afa30cd65ef5bcddad4f43e81",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9976cf070fdda61afa30cd65ef5bcddad4f43e81/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0b807a417f4a15f3e37ae35e70a72e6169f01c02",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0b807a417f4a15f3e37ae35e70a72e6169f01c02",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0b807a417f4a15f3e37ae35e70a72e6169f01c02"
      }
    ],
    "stats": {
      "total": 24,
      "additions": 12,
      "deletions": 12
    },
    "files": [
      {
        "sha": "e76f7790f1e9795ea6763e8d9fbb4abfbf632e75",
        "filename": "src/keystore.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 10,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9976cf070fdda61afa30cd65ef5bcddad4f43e81/src/keystore.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9976cf070fdda61afa30cd65ef5bcddad4f43e81/src/keystore.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/keystore.cpp?ref=9976cf070fdda61afa30cd65ef5bcddad4f43e81",
        "patch": "@@ -8,16 +8,6 @@\n #include \"db.h\"\n #include \"script.h\"\n \n-std::vector<unsigned char> CKeyStore::GenerateNewKey()\n-{\n-    RandAddSeedPerfmon();\n-    CKey key;\n-    key.MakeNewKey();\n-    if (!AddKey(key))\n-        throw std::runtime_error(\"CKeyStore::GenerateNewKey() : AddKey failed\");\n-    return key.GetPubKey();\n-}\n-\n bool CKeyStore::GetPubKey(const CBitcoinAddress &address, std::vector<unsigned char> &vchPubKeyOut) const\n {\n     CKey key;"
      },
      {
        "sha": "6757834bd889c231fe3bc0c2e2279fac03a2a934",
        "filename": "src/keystore.h",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9976cf070fdda61afa30cd65ef5bcddad4f43e81/src/keystore.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9976cf070fdda61afa30cd65ef5bcddad4f43e81/src/keystore.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/keystore.h?ref=9976cf070fdda61afa30cd65ef5bcddad4f43e81",
        "patch": "@@ -29,8 +29,6 @@ class CKeyStore\n     virtual bool HaveCScript(const uint160 &hash) const =0;\n     virtual bool GetCScript(const uint160 &hash, CScript& redeemScriptOut) const =0;\n \n-    // Generate a new key, and add it to the store\n-    virtual std::vector<unsigned char> GenerateNewKey();\n     virtual bool GetSecret(const CBitcoinAddress &address, CSecret& vchSecret, bool &fCompressed) const\n     {\n         CKey key;"
      },
      {
        "sha": "da64aa5103960c8f3fff971ee5282bbb662a73db",
        "filename": "src/wallet.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9976cf070fdda61afa30cd65ef5bcddad4f43e81/src/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9976cf070fdda61afa30cd65ef5bcddad4f43e81/src/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet.cpp?ref=9976cf070fdda61afa30cd65ef5bcddad4f43e81",
        "patch": "@@ -15,6 +15,16 @@ using namespace std;\n // mapWallet\n //\n \n+std::vector<unsigned char> CWallet::GenerateNewKey()\n+{\n+    RandAddSeedPerfmon();\n+    CKey key;\n+    key.MakeNewKey();\n+    if (!AddKey(key))\n+        throw std::runtime_error(\"CWallet::GenerateNewKey() : AddKey failed\");\n+    return key.GetPubKey();\n+}\n+\n bool CWallet::AddKey(const CKey& key)\n {\n     if (!CCryptoKeyStore::AddKey(key))"
      },
      {
        "sha": "fea329778889ee0e1574ca832a07a86ca71228b5",
        "filename": "src/wallet.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9976cf070fdda61afa30cd65ef5bcddad4f43e81/src/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9976cf070fdda61afa30cd65ef5bcddad4f43e81/src/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet.h?ref=9976cf070fdda61afa30cd65ef5bcddad4f43e81",
        "patch": "@@ -66,6 +66,8 @@ class CWallet : public CCryptoKeyStore\n     std::vector<unsigned char> vchDefaultKey;\n \n     // keystore implementation\n+    // Generate a new key\n+    std::vector<unsigned char> GenerateNewKey();\n     // Adds a key to the store, and saves it to disk.\n     bool AddKey(const CKey& key);\n     // Adds a key to the store, without saving it to disk (used by LoadWallet)"
      }
    ]
  },
  {
    "sha": "38067c18f8b54c7121643fa3291ffe81b6eefef1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozODA2N2MxOGY4YjU0YzcxMjE2NDNmYTMyOTFmZmU4MWI2ZWVmZWYx",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2012-02-18T14:06:32Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2012-02-18T14:42:38Z"
      },
      "message": "Make compressed pubkeys require 0.6.0",
      "tree": {
        "sha": "fce09f2e449d290386e5c392fc3f4c61229ca83a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fce09f2e449d290386e5c392fc3f4c61229ca83a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/38067c18f8b54c7121643fa3291ffe81b6eefef1",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/38067c18f8b54c7121643fa3291ffe81b6eefef1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/38067c18f8b54c7121643fa3291ffe81b6eefef1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/38067c18f8b54c7121643fa3291ffe81b6eefef1/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9976cf070fdda61afa30cd65ef5bcddad4f43e81",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9976cf070fdda61afa30cd65ef5bcddad4f43e81",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9976cf070fdda61afa30cd65ef5bcddad4f43e81"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 9,
      "deletions": 2
    },
    "files": [
      {
        "sha": "43c8d84520eadeb97ce536cf61ee422276c009a9",
        "filename": "src/key.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/38067c18f8b54c7121643fa3291ffe81b6eefef1/src/key.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/38067c18f8b54c7121643fa3291ffe81b6eefef1/src/key.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/key.h?ref=38067c18f8b54c7121643fa3291ffe81b6eefef1",
        "patch": "@@ -114,7 +114,7 @@ class CKey\n         return fCompressedPubKey;\n     }\n \n-    void MakeNewKey(bool fCompressed = true)\n+    void MakeNewKey(bool fCompressed)\n     {\n         if (!EC_KEY_generate_key(pkey))\n             throw key_error(\"CKey::MakeNewKey() : EC_KEY_generate_key failed\");"
      },
      {
        "sha": "8a33041a1c24ed4cdda5880d0c78525e35a86319",
        "filename": "src/wallet.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 1,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/38067c18f8b54c7121643fa3291ffe81b6eefef1/src/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/38067c18f8b54c7121643fa3291ffe81b6eefef1/src/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet.cpp?ref=38067c18f8b54c7121643fa3291ffe81b6eefef1",
        "patch": "@@ -17,9 +17,16 @@ using namespace std;\n \n std::vector<unsigned char> CWallet::GenerateNewKey()\n {\n+    bool fCompressed = true; // default to compressed public keys\n+\n     RandAddSeedPerfmon();\n     CKey key;\n-    key.MakeNewKey();\n+    key.MakeNewKey(fCompressed);\n+\n+    // Compressed public keys were introduced in version 0.6.0\n+    if (fCompressed)\n+        SetMinVersion(59900);\n+\n     if (!AddKey(key))\n         throw std::runtime_error(\"CWallet::GenerateNewKey() : AddKey failed\");\n     return key.GetPubKey();"
      }
    ]
  }
]