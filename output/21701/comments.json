[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/820633021",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21701#issuecomment-820633021",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21701",
    "id": 820633021,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMDYzMzAyMQ==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-15T18:14:54Z",
    "updated_at": "2021-04-15T19:02:15Z",
    "author_association": "MEMBER",
    "body": "~tACK 724e4948004c8127f093db90f9d78e6ed9e46541~ on Ubuntu\r\n\r\nI verified as follows:\r\n\r\n```\r\ngit checkout origin/0.21\r\ngit checkout -b speedy-trial-backport\r\ngit cherry-pick 63879f0a4760c0c0f784029849cb5d21ee088abb^..ffe33dfbd4c3b11e3475b022b6c1dd077613de79\r\ngit cherry-pick f979b3237f1cfc28f9c4ccb07beab558d5357a55\r\ngit diff 724e4948004c8127f093db90f9d78e6ed9e46541\r\nsrc/test/test_bitcoin --run_test=versionbits_tests\r\n````\r\n\r\nGit diff only shows a difference in the trailing `U` for this test (presumably related to https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614279839): `BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height, 0U);`\r\n\r\nI had manually resolve a conflict for dd07e6da48040dc7eae46bc7941db48d98a669fd.\r\n\r\nI also managed to spin up the node and see the softfork as \"defined\" in `getblockchaininfo`.\r\n\r\n---\r\n\r\nI'm unable to reproduce the CI failure on macOS 11.2.3 with homebrew Boost 1.75.0. It doesn't happen for me with depends either. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/820633021/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/820773731",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21701#issuecomment-820773731",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21701",
    "id": 820773731,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMDc3MzczMQ==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-15T22:45:36Z",
    "updated_at": "2021-04-15T22:45:36Z",
    "author_association": "MEMBER",
    "body": "I don't know why CI is having a hard time building this. I am able to do a gitian build of this branch, so it should be working.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/820773731/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/820864428",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21701#issuecomment-820864428",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21701",
    "id": 820864428,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMDg2NDQyOA==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-16T02:30:23Z",
    "updated_at": "2021-04-16T02:30:23Z",
    "author_association": "MEMBER",
    "body": "cherry-pick ACK https://github.com/bitcoin/bitcoin/pull/21701/commits/cbd64c3a28a7466f421477daadc6e6e6b69b898a",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/820864428/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821006259",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21701#issuecomment-821006259",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21701",
    "id": 821006259,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMTAwNjI1OQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-16T08:18:11Z",
    "updated_at": "2021-04-16T08:18:11Z",
    "author_association": "MEMBER",
    "body": "ACK cbd64c3a28a7466f421477daadc6e6e6b69b898a\r\n\r\nRepeated the rebase/cherry-pick myself and the only differences were the unsigned/signed fixups here: https://github.com/bitcoin/bitcoin/pull/21701#pullrequestreview-637244766.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821006259/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821019372",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21701#issuecomment-821019372",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21701",
    "id": 821019372,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMTAxOTM3Mg==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-16T08:39:45Z",
    "updated_at": "2021-04-16T08:39:45Z",
    "author_association": "MEMBER",
    "body": "tACK cbd64c3",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821019372/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821038511",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21701#issuecomment-821038511",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21701",
    "id": 821038511,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMTAzODUxMQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-16T09:12:20Z",
    "updated_at": "2021-04-16T09:12:20Z",
    "author_association": "MEMBER",
    "body": "cherry-pick-only ACK cbd64c3a28a7466f421477daadc6e6e6b69b898a \ud83c\udf3e\r\n\r\n<details><summary>Show signature and timestamp</summary>\r\n\r\nSignature:\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\ncherry-pick-only ACK cbd64c3a28a7466f421477daadc6e6e6b69b898a \ud83c\udf3e\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\r\npUiVXAwAm+m81VxCGAQs/vB2ZvE43rHYlW8QBpQbRB4ckkjnmXxSoNJipajP02Je\r\n3CwjtSrxS9A0Dam8u4D3BHHdYyyT/UJF02JJMNEzTlO9b2OW5v0SrGZqGGIxSluC\r\noltxBDg5ry3tHSs4Zkm2o71je9L00ZgOMQD4Yan5yOCVmCVWfIaBFR3oXhL/pdhr\r\n0UrlkPWPuF3h2Lt7dqEqhd3/rZzV7dtMK0tBqX7B7IE8sX/g5qvEIAAnstn6jJeN\r\nrYbTwEkVMKDstIvonGa1EcMAr4TMay2V1h+q53JNvAmqkIj+8nZvH/5hbpnVNuTg\r\nCivIvZKffc3C+4cigKsiJSHcT9vAeK6K/C5MW5G/9uio1kqdZq7McA3my7AmlDN5\r\ne3jtTBDIUN/BMhOiizS1iYsqwHZjF4qPdfySxgDPw4Z49toee2ziN0BMv9NTrKc6\r\nWI5hPKFG38l8O4YHO6tyCRJfVJuoP2ByhGiU7/pTJO0NvKnRh+Wma3kRa61sTbrl\r\ncfriU22f\r\n=gYxK\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\n[Timestamp of file with hash `1d1c8419f375b140d9bb77c1f31aa2bb76a54e095fe73d7ba926604fb50abc88  -`](https://opentimestamps.org/info/?004f70656e54696d657374616d7073000050726f6f6600bf89e2e884e8929401081d1c8419f375b140d9bb77c1f31aa2bb76a54e095fe73d7ba926604fb50abc88f0108bcec35bb42f033500defb6bd9d561e108fff0107ac2f0a2d8b1769a208a2c365253b78608f104607954e8f00826bda2fcb35e53860083dfe30d2ef90c8e232268747470733a2f2f6274632e63616c656e6461722e636174616c6c6178792e636f6dfff010d47757cecd6b4fc6ef7f12206d1118ea08f104607954e8f0089085028672c5c0f50083dfe30d2ef90c8e2e2d68747470733a2f2f616c6963652e6274632e63616c656e6461722e6f70656e74696d657374616d70732e6f7267fff010e98923edb26908ea72859d8ef8894b7408f120e429f81109645ad65b77fa2df601b408e097fa6a4a4f668431dd23da0b189e5208f104607954e9f008689b099f717513f10083dfe30d2ef90c8e2c2b68747470733a2f2f626f622e6274632e63616c656e6461722e6f70656e74696d657374616d70732e6f7267f010fa58b5c61423f4cdacaafb917c817d7708f1046079470ef008915a75964c3c57340083dfe30d2ef90c8e292868747470733a2f2f66696e6e65792e63616c656e6461722e657465726e69747977616c6c2e636f6d)\r\n\r\n</details>\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821038511/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821068905",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21701#issuecomment-821068905",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21701",
    "id": 821068905,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMTA2ODkwNQ==",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-16T10:06:21Z",
    "updated_at": "2021-04-16T10:06:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "Post-merge ACK cbd64c3a28a7466f421477daadc6e6e6b69b898a -- checked fuzzer compiles at each step, visually compared new patches with originals, checked original patches are in master",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821068905/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614262360",
    "pull_request_review_id": 636950420,
    "id": 614262360,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDI2MjM2MA==",
    "diff_hunk": "@@ -226,6 +267,13 @@ BOOST_AUTO_TEST_CASE(versionbits_test)\n         // Make sure that no deployment tries to set an invalid bit.\n         BOOST_CHECK_EQUAL(bitmask & ~(uint32_t)VERSIONBITS_TOP_MASK, bitmask);\n \n+        // Check min_activation_height is on a retarget boundary\n+        BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height % mainnetParams.nMinerConfirmationWindow, 0);\n+        // Check min_activation_height is 0 for ALWAYS_ACTIVE and never active deployments\n+        if (mainnetParams.vDeployments[i].nStartTime == Consensus::BIP9Deployment::ALWAYS_ACTIVE || mainnetParams.vDeployments[i].nStartTime == Consensus::BIP9Deployment::NEVER_ACTIVE) {\n+            BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height, 0);",
    "path": "src/test/versionbits_tests.cpp",
    "position": 232,
    "original_position": 232,
    "commit_id": "cbd64c3a28a7466f421477daadc6e6e6b69b898a",
    "original_commit_id": "37c255cdebfefdf84c2c38863b6d07639d24266f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n            BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height, 0U);\r\n```\r\n\r\nLooks like you are hitting some stupid compiler error",
    "created_at": "2021-04-15T17:28:51Z",
    "updated_at": "2021-04-16T01:00:03Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614262360",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614262360"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614262360"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614262360/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 274,
    "original_line": 274,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614279839",
    "pull_request_review_id": 636973591,
    "id": 614279839,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDI3OTgzOQ==",
    "diff_hunk": "@@ -226,6 +267,13 @@ BOOST_AUTO_TEST_CASE(versionbits_test)\n         // Make sure that no deployment tries to set an invalid bit.\n         BOOST_CHECK_EQUAL(bitmask & ~(uint32_t)VERSIONBITS_TOP_MASK, bitmask);\n \n+        // Check min_activation_height is on a retarget boundary\n+        BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height % mainnetParams.nMinerConfirmationWindow, 0);\n+        // Check min_activation_height is 0 for ALWAYS_ACTIVE and never active deployments\n+        if (mainnetParams.vDeployments[i].nStartTime == Consensus::BIP9Deployment::ALWAYS_ACTIVE || mainnetParams.vDeployments[i].nStartTime == Consensus::BIP9Deployment::NEVER_ACTIVE) {\n+            BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height, 0);",
    "path": "src/test/versionbits_tests.cpp",
    "position": 232,
    "original_position": 232,
    "commit_id": "cbd64c3a28a7466f421477daadc6e6e6b69b898a",
    "original_commit_id": "37c255cdebfefdf84c2c38863b6d07639d24266f",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed.",
    "created_at": "2021-04-15T17:56:17Z",
    "updated_at": "2021-04-16T01:00:03Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614279839",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614279839"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614279839"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614279839/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 274,
    "original_line": 274,
    "side": "RIGHT",
    "in_reply_to_id": 614262360
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614485951",
    "pull_request_review_id": 637244766,
    "id": 614485951,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDQ4NTk1MQ==",
    "diff_hunk": "@@ -226,6 +267,13 @@ BOOST_AUTO_TEST_CASE(versionbits_test)\n         // Make sure that no deployment tries to set an invalid bit.\n         BOOST_CHECK_EQUAL(bitmask & ~(uint32_t)VERSIONBITS_TOP_MASK, bitmask);\n \n+        // Check min_activation_height is on a retarget boundary\n+        BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height % mainnetParams.nMinerConfirmationWindow, 0);",
    "path": "src/test/versionbits_tests.cpp",
    "position": null,
    "original_position": 229,
    "commit_id": "cbd64c3a28a7466f421477daadc6e6e6b69b898a",
    "original_commit_id": "724e4948004c8127f093db90f9d78e6ed9e46541",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n        BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height % mainnetParams.nMinerConfirmationWindow, 0U);\r\n```",
    "created_at": "2021-04-16T00:53:44Z",
    "updated_at": "2021-04-16T01:00:03Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614485951",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614485951"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614485951"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614485951/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 271,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614486021",
    "pull_request_review_id": 637244766,
    "id": 614486021,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDQ4NjAyMQ==",
    "diff_hunk": "@@ -226,6 +267,13 @@ BOOST_AUTO_TEST_CASE(versionbits_test)\n         // Make sure that no deployment tries to set an invalid bit.\n         BOOST_CHECK_EQUAL(bitmask & ~(uint32_t)VERSIONBITS_TOP_MASK, bitmask);\n \n+        // Check min_activation_height is on a retarget boundary\n+        BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height % mainnetParams.nMinerConfirmationWindow, 0);\n+        // Check min_activation_height is 0 for ALWAYS_ACTIVE and never active deployments\n+        if (mainnetParams.vDeployments[i].nStartTime == Consensus::BIP9Deployment::ALWAYS_ACTIVE || mainnetParams.vDeployments[i].nStartTime == Consensus::BIP9Deployment::NEVER_ACTIVE) {\n+            BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height, 0U);",
    "path": "src/test/versionbits_tests.cpp",
    "position": null,
    "original_position": 232,
    "commit_id": "cbd64c3a28a7466f421477daadc6e6e6b69b898a",
    "original_commit_id": "724e4948004c8127f093db90f9d78e6ed9e46541",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n            BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height, 0);\r\n```",
    "created_at": "2021-04-16T00:54:03Z",
    "updated_at": "2021-04-16T01:00:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614486021",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614486021"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614486021"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614486021/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 274,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614486086",
    "pull_request_review_id": 637244766,
    "id": 614486086,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDQ4NjA4Ng==",
    "diff_hunk": "@@ -242,81 +290,118 @@ BOOST_AUTO_TEST_CASE(versionbits_test)\n     }\n }\n \n-BOOST_AUTO_TEST_CASE(versionbits_computeblockversion)\n+/** Check that ComputeBlockVersion will set the appropriate bit correctly */\n+static void check_computeblockversion(const Consensus::Params& params, Consensus::DeploymentPos dep)\n {\n-    // Check that ComputeBlockVersion will set the appropriate bit correctly\n-    // on mainnet.\n-    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::MAIN);\n-    const Consensus::Params &mainnetParams = chainParams->GetConsensus();\n+    // This implicitly uses versionbitscache, so clear it every time\n+    versionbitscache.Clear();\n+\n+    int64_t bit = params.vDeployments[dep].bit;\n+    int64_t nStartTime = params.vDeployments[dep].nStartTime;\n+    int64_t nTimeout = params.vDeployments[dep].nTimeout;\n+    int min_activation_height = params.vDeployments[dep].min_activation_height;\n+\n+    // should not be any signalling for first block\n+    BOOST_CHECK_EQUAL(ComputeBlockVersion(nullptr, params), VERSIONBITS_TOP_BITS);\n \n-    // Use the TESTDUMMY deployment for testing purposes.\n-    int64_t bit = mainnetParams.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].bit;\n-    int64_t nStartTime = mainnetParams.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].nStartTime;\n-    int64_t nTimeout = mainnetParams.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].nTimeout;\n+    // always/never active deployments shouldn't need to be tested further\n+    if (nStartTime == Consensus::BIP9Deployment::ALWAYS_ACTIVE) return;\n+    if (nStartTime == Consensus::BIP9Deployment::NEVER_ACTIVE) return;\n \n-    assert(nStartTime < nTimeout);\n+    BOOST_REQUIRE(nStartTime < nTimeout);\n+    BOOST_REQUIRE(nStartTime >= 0);\n+    BOOST_REQUIRE(nTimeout <= std::numeric_limits<uint32_t>::max() || nTimeout == Consensus::BIP9Deployment::NO_TIMEOUT);\n+    BOOST_REQUIRE(0 <= bit && bit < 32);\n+    BOOST_REQUIRE(((1 << bit) & VERSIONBITS_TOP_MASK) == 0);\n+    BOOST_REQUIRE(min_activation_height >= 0);\n+    BOOST_REQUIRE_EQUAL(min_activation_height % params.nMinerConfirmationWindow, 0);",
    "path": "src/test/versionbits_tests.cpp",
    "position": null,
    "original_position": 276,
    "commit_id": "cbd64c3a28a7466f421477daadc6e6e6b69b898a",
    "original_commit_id": "724e4948004c8127f093db90f9d78e6ed9e46541",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n    BOOST_REQUIRE_EQUAL(min_activation_height % params.nMinerConfirmationWindow, 0U);\r\n```",
    "created_at": "2021-04-16T00:54:14Z",
    "updated_at": "2021-04-16T01:00:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614486086",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614486086"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614486086"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614486086/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 317,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614487587",
    "pull_request_review_id": 637246507,
    "id": 614487587,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDQ4NzU4Nw==",
    "diff_hunk": "@@ -226,6 +267,13 @@ BOOST_AUTO_TEST_CASE(versionbits_test)\n         // Make sure that no deployment tries to set an invalid bit.\n         BOOST_CHECK_EQUAL(bitmask & ~(uint32_t)VERSIONBITS_TOP_MASK, bitmask);\n \n+        // Check min_activation_height is on a retarget boundary\n+        BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height % mainnetParams.nMinerConfirmationWindow, 0);",
    "path": "src/test/versionbits_tests.cpp",
    "position": null,
    "original_position": 229,
    "commit_id": "cbd64c3a28a7466f421477daadc6e6e6b69b898a",
    "original_commit_id": "724e4948004c8127f093db90f9d78e6ed9e46541",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done",
    "created_at": "2021-04-16T00:59:32Z",
    "updated_at": "2021-04-16T01:00:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614487587",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614487587"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614487587"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614487587/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 271,
    "side": "RIGHT",
    "in_reply_to_id": 614485951
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614487601",
    "pull_request_review_id": 637246533,
    "id": 614487601,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDQ4NzYwMQ==",
    "diff_hunk": "@@ -226,6 +267,13 @@ BOOST_AUTO_TEST_CASE(versionbits_test)\n         // Make sure that no deployment tries to set an invalid bit.\n         BOOST_CHECK_EQUAL(bitmask & ~(uint32_t)VERSIONBITS_TOP_MASK, bitmask);\n \n+        // Check min_activation_height is on a retarget boundary\n+        BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height % mainnetParams.nMinerConfirmationWindow, 0);\n+        // Check min_activation_height is 0 for ALWAYS_ACTIVE and never active deployments\n+        if (mainnetParams.vDeployments[i].nStartTime == Consensus::BIP9Deployment::ALWAYS_ACTIVE || mainnetParams.vDeployments[i].nStartTime == Consensus::BIP9Deployment::NEVER_ACTIVE) {\n+            BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height, 0U);",
    "path": "src/test/versionbits_tests.cpp",
    "position": null,
    "original_position": 232,
    "commit_id": "cbd64c3a28a7466f421477daadc6e6e6b69b898a",
    "original_commit_id": "724e4948004c8127f093db90f9d78e6ed9e46541",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done",
    "created_at": "2021-04-16T00:59:35Z",
    "updated_at": "2021-04-16T01:00:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614487601",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614487601"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614487601"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614487601/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 274,
    "side": "RIGHT",
    "in_reply_to_id": 614486021
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614487615",
    "pull_request_review_id": 637246554,
    "id": 614487615,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDQ4NzYxNQ==",
    "diff_hunk": "@@ -242,81 +290,118 @@ BOOST_AUTO_TEST_CASE(versionbits_test)\n     }\n }\n \n-BOOST_AUTO_TEST_CASE(versionbits_computeblockversion)\n+/** Check that ComputeBlockVersion will set the appropriate bit correctly */\n+static void check_computeblockversion(const Consensus::Params& params, Consensus::DeploymentPos dep)\n {\n-    // Check that ComputeBlockVersion will set the appropriate bit correctly\n-    // on mainnet.\n-    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::MAIN);\n-    const Consensus::Params &mainnetParams = chainParams->GetConsensus();\n+    // This implicitly uses versionbitscache, so clear it every time\n+    versionbitscache.Clear();\n+\n+    int64_t bit = params.vDeployments[dep].bit;\n+    int64_t nStartTime = params.vDeployments[dep].nStartTime;\n+    int64_t nTimeout = params.vDeployments[dep].nTimeout;\n+    int min_activation_height = params.vDeployments[dep].min_activation_height;\n+\n+    // should not be any signalling for first block\n+    BOOST_CHECK_EQUAL(ComputeBlockVersion(nullptr, params), VERSIONBITS_TOP_BITS);\n \n-    // Use the TESTDUMMY deployment for testing purposes.\n-    int64_t bit = mainnetParams.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].bit;\n-    int64_t nStartTime = mainnetParams.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].nStartTime;\n-    int64_t nTimeout = mainnetParams.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].nTimeout;\n+    // always/never active deployments shouldn't need to be tested further\n+    if (nStartTime == Consensus::BIP9Deployment::ALWAYS_ACTIVE) return;\n+    if (nStartTime == Consensus::BIP9Deployment::NEVER_ACTIVE) return;\n \n-    assert(nStartTime < nTimeout);\n+    BOOST_REQUIRE(nStartTime < nTimeout);\n+    BOOST_REQUIRE(nStartTime >= 0);\n+    BOOST_REQUIRE(nTimeout <= std::numeric_limits<uint32_t>::max() || nTimeout == Consensus::BIP9Deployment::NO_TIMEOUT);\n+    BOOST_REQUIRE(0 <= bit && bit < 32);\n+    BOOST_REQUIRE(((1 << bit) & VERSIONBITS_TOP_MASK) == 0);\n+    BOOST_REQUIRE(min_activation_height >= 0);\n+    BOOST_REQUIRE_EQUAL(min_activation_height % params.nMinerConfirmationWindow, 0);",
    "path": "src/test/versionbits_tests.cpp",
    "position": null,
    "original_position": 276,
    "commit_id": "cbd64c3a28a7466f421477daadc6e6e6b69b898a",
    "original_commit_id": "724e4948004c8127f093db90f9d78e6ed9e46541",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done",
    "created_at": "2021-04-16T00:59:39Z",
    "updated_at": "2021-04-16T01:00:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614487615",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614487615"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614487615"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614487615/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 317,
    "side": "RIGHT",
    "in_reply_to_id": 614486086
  }
]