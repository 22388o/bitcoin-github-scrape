[
  {
    "sha": "110b62f06992d0fb989153afff2dc3aea62a674f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxMTBiNjJmMDY5OTJkMGZiOTg5MTUzYWZmZjJkYzNhZWE2MmE2NzRm",
    "commit": {
      "author": {
        "name": "Patrick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2016-02-18T06:44:32Z"
      },
      "committer": {
        "name": "Patrick Strateman",
        "email": "patrick.strateman@gmail.com",
        "date": "2016-02-18T07:21:27Z"
      },
      "message": "Remove vfReachable and modify IsReachable to only use vfLimited.\n\nWe do not know that a class of Network is reachable, only that it is not.",
      "tree": {
        "sha": "1d2e7f7dc68300c437f07430239b6b1f9f165343",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1d2e7f7dc68300c437f07430239b6b1f9f165343"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/110b62f06992d0fb989153afff2dc3aea62a674f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/110b62f06992d0fb989153afff2dc3aea62a674f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/110b62f06992d0fb989153afff2dc3aea62a674f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/110b62f06992d0fb989153afff2dc3aea62a674f/comments",
    "author": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8b70a64d62c6e64288762d062414cc979f880c54",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8b70a64d62c6e64288762d062414cc979f880c54",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8b70a64d62c6e64288762d062414cc979f880c54"
      }
    ],
    "stats": {
      "total": 22,
      "additions": 6,
      "deletions": 16
    },
    "files": [
      {
        "sha": "fe05bc15913ad7d13d63dda92519a58a33670b25",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/110b62f06992d0fb989153afff2dc3aea62a674f/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/110b62f06992d0fb989153afff2dc3aea62a674f/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=110b62f06992d0fb989153afff2dc3aea62a674f",
        "patch": "@@ -1199,6 +1199,7 @@ bool AppInit2(boost::thread_group& threadGroup, CScheduler& scheduler)\n     // -proxy sets a proxy for all outgoing network traffic\n     // -noproxy (or -proxy=0) as well as the empty string can be used to not set a proxy, this is the default\n     std::string proxyArg = GetArg(\"-proxy\", \"\");\n+    SetLimited(NET_TOR);\n     if (proxyArg != \"\" && proxyArg != \"0\") {\n         proxyType addrProxy = proxyType(CService(proxyArg, 9050), proxyRandomize);\n         if (!addrProxy.IsValid())\n@@ -1208,7 +1209,7 @@ bool AppInit2(boost::thread_group& threadGroup, CScheduler& scheduler)\n         SetProxy(NET_IPV6, addrProxy);\n         SetProxy(NET_TOR, addrProxy);\n         SetNameProxy(addrProxy);\n-        SetReachable(NET_TOR); // by default, -proxy sets onion as reachable, unless -noonion later\n+        SetLimited(NET_TOR, false); // by default, -proxy sets onion as reachable, unless -noonion later\n     }\n \n     // -onion can be used to set only a proxy for .onion, or override normal proxy for .onion addresses\n@@ -1217,13 +1218,13 @@ bool AppInit2(boost::thread_group& threadGroup, CScheduler& scheduler)\n     std::string onionArg = GetArg(\"-onion\", \"\");\n     if (onionArg != \"\") {\n         if (onionArg == \"0\") { // Handle -noonion/-onion=0\n-            SetReachable(NET_TOR, false); // set onions as unreachable\n+            SetLimited(NET_TOR); // set onions as unreachable\n         } else {\n             proxyType addrOnion = proxyType(CService(onionArg, 9050), proxyRandomize);\n             if (!addrOnion.IsValid())\n                 return InitError(strprintf(_(\"Invalid -onion address: '%s'\"), onionArg));\n             SetProxy(NET_TOR, addrOnion);\n-            SetReachable(NET_TOR);\n+            SetLimited(NET_TOR, false);\n         }\n     }\n "
      },
      {
        "sha": "b589692d1b45fe804bb5af36c80b3dc00e569806",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 11,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/110b62f06992d0fb989153afff2dc3aea62a674f/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/110b62f06992d0fb989153afff2dc3aea62a674f/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=110b62f06992d0fb989153afff2dc3aea62a674f",
        "patch": "@@ -79,7 +79,6 @@ bool fListen = true;\n uint64_t nLocalServices = NODE_NETWORK;\n CCriticalSection cs_mapLocalHost;\n map<CNetAddr, LocalServiceInfo> mapLocalHost;\n-static bool vfReachable[NET_MAX] = {};\n static bool vfLimited[NET_MAX] = {};\n static CNode* pnodeLocalHost = NULL;\n uint64_t nLocalHostNonce = 0;\n@@ -226,14 +225,6 @@ void AdvertiseLocal(CNode *pnode)\n     }\n }\n \n-void SetReachable(enum Network net, bool fFlag)\n-{\n-    LOCK(cs_mapLocalHost);\n-    vfReachable[net] = fFlag;\n-    if (net == NET_IPV6 && fFlag)\n-        vfReachable[NET_IPV4] = true;\n-}\n-\n // learn a new local address\n bool AddLocal(const CService& addr, int nScore)\n {\n@@ -256,7 +247,6 @@ bool AddLocal(const CService& addr, int nScore)\n             info.nScore = nScore + (fAlready ? 1 : 0);\n             info.nPort = addr.GetPort();\n         }\n-        SetReachable(addr.GetNetwork());\n     }\n \n     return true;\n@@ -319,7 +309,7 @@ bool IsLocal(const CService& addr)\n bool IsReachable(enum Network net)\n {\n     LOCK(cs_mapLocalHost);\n-    return vfReachable[net] && !vfLimited[net];\n+    return !vfLimited[net];\n }\n \n /** check whether a given address is in a network we can probably connect to */"
      },
      {
        "sha": "ec296e2abacd57b787c49d378d7ff31681bb2cb5",
        "filename": "src/net.h",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/110b62f06992d0fb989153afff2dc3aea62a674f/src/net.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/110b62f06992d0fb989153afff2dc3aea62a674f/src/net.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.h?ref=110b62f06992d0fb989153afff2dc3aea62a674f",
        "patch": "@@ -146,7 +146,6 @@ bool IsLocal(const CService& addr);\n bool GetLocal(CService &addr, const CNetAddr *paddrPeer = NULL);\n bool IsReachable(enum Network net);\n bool IsReachable(const CNetAddr &addr);\n-void SetReachable(enum Network net, bool fFlag = true);\n CAddress GetLocalAddress(const CNetAddr *paddrPeer = NULL);\n \n "
      },
      {
        "sha": "6fa8ce9d5b2a81f3999304109db04c30967ae495",
        "filename": "src/torcontrol.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/110b62f06992d0fb989153afff2dc3aea62a674f/src/torcontrol.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/110b62f06992d0fb989153afff2dc3aea62a674f/src/torcontrol.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/torcontrol.cpp?ref=110b62f06992d0fb989153afff2dc3aea62a674f",
        "patch": "@@ -459,7 +459,7 @@ void TorController::auth_cb(TorControlConnection& conn, const TorControlReply& r\n         if (GetArg(\"-onion\", \"\") == \"\") {\n             proxyType addrOnion = proxyType(CService(\"127.0.0.1\", 9050), true);\n             SetProxy(NET_TOR, addrOnion);\n-            SetReachable(NET_TOR);\n+            SetLimited(NET_TOR, false);\n         }\n \n         // Finally - now create the service"
      }
    ]
  }
]