DrahtBot,2021-03-22 11:27:45,<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.,https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-803990176,803990176,
DrahtBot,2021-05-03 09:33:10,<!--4a62be1de6b64f3ed646cdc7932c8cf5-->\n🕵️ @achow101 @sipa have been requested to review this pull request as specified in the REVIEWERS file.,https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-831142261,831142261,
achow101,2021-06-03 21:01:09,Concept ACK. The second commit seems unrelated.,https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-854176603,854176603,
S3RK,2021-06-24 06:41:46,Fixed silent merge conflict and split the 2nd commit into #22334,https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-867382867,867382867,
prayank23,2021-07-07 13:21:49,"Tried `listdescriptors` RPC although I have no clue what are these 6 descriptors. \n\nCreate Wallet:\n\n```\nPOST / HTTP/1.1\nHost: 127.0.0.1:18777\nAuthorization: Basic hObGNqTTZjR0Z6YzNkd\nContent-Type: text/plain\nContent-Length: 106\n\n{""jsonrpc"": ""1.0"", ""id"": ""curltest"", ""method"": ""createwallet"", ""params"": [""DT1"",false,false,"""",true,true]}\n\n```\nList descriptors:\n```\n\nPO",https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-875598879,875598879,
achow101,2021-07-07 16:31:31,"> Response (I get the same response for `true` and `false` in params:\n\nAre you sure you are using this branch? I get the private key with `true`, and the normalized public descriptor with `false`.",https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-875751034,875751034,
achow101,2021-07-07 16:31:59,"ACK 2854ddca9bf9662170fecc2657ec3c19d364d2e2\n\nReviewed code and tested manually.",https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-875751344,875751344,
prayank23,2021-07-07 17:13:00,"> Are you sure you are using this branch? I get the private key with true, and the normalized public descriptor with false.\n\nYes just noticed the difference. `false` returns `tpub` and `true` returns `tprv`\n\nSorry they looked same and both had 6 results. So, I was confused.",https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-875780137,875780137,
S3RK,2021-07-07 19:43:35,"@prayank23 Thanks for testing! By default descriptor wallet has two descriptors for each type:\n\n1. Legacy — `pkh(...)`\n2. Wrapped SegWit — `sh(wpkh(...))` \n3. Native SegWit, bech32 — `wpkh(...)`\n\nOne of the two descriptors is for receiving, marked with `internal: false` and one for change `internal: true`.\n\nSo in the end you've got 6 of them. Each descriptor is derived from the sam",https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-875881470,875881470,
Rspigler,2021-07-07 20:59:17,"I'm getting a build error trying to test:\n\n(edited out).\n\nI'm getting these on master as well, so investigating/removing from here as it is not this PR specific.",https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-875928707,875928707,
S3RK,2021-07-10 13:23:43,Added a test case for the error when trying to get private descriptors for watch-only wallet. Plus minor readability and grammar fixes,https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-877637386,877637386,
achow101,2021-07-22 20:54:59,re-ACK bb822a7af86897a9b6a5d616f193c258e8e76729,https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-885226320,885226320,
S3RK,2021-08-03 07:36:38,@prayank23 @Rspigler do you want to check the latest version?,https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-891611426,891611426,
prayank23,2021-08-03 13:33:52,"Sure. Will try today. I had two questions, maybe @practicalswift can help me:\n\n1. Does it make sense to try SQL queries in fuzzing descriptor wallet related RPCs? I tried but could not find anything interesting:  https://link.medium.com/iQBbB5Tbqib\n2. Are emojis a part of strings that are used in fuzzing Bitcoin Core? https://github.com/danielmiessler/SecLists/blob/master/Fuzzing/big-list-of",https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-891851384,891851384,
prayank23,2021-08-03 23:56:13,"> In case of watch-only wallet without private keys there will be following output:\nerror code: -4\nerror message:\nCan't get descriptor string.\n\nI don't see this warning for watch only wallet. It returns wallet name and blank array for descriptors.",https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-892244021,892244021,
Rspigler,2021-08-04 01:33:08,"tACK bb822a7af86897a9b6a5d616f193c258e8e76729\n\nThis would be very helpful for metal or paper backups\n\n`listdescriptors`:\n\n> {\n>   ""wallet_name"": ""Test_ListDescriptors"",\n>   ""descriptors"": [\n>     {\n>       ""desc"": ""pkh([db98369e/44'/0'/0']xpub6DFFBCcFzoG7cfKDPRX39zd3ZBydFnM26VmDEVDLryPU6u6coYZKkBpe7DKPa8V1RjAvvdx4UebiXqSirkevEpsdByAbS1GjF1WGofMWcNc/0/*)#6j60t7ur"",\n>       ""ti",https://github.com/bitcoin/bitcoin/pull/21500#issuecomment-892289279,892289279,
luke-jr,2021-05-13 22:47:06,I don't think this should be a numbered parameter.,https://github.com/bitcoin/bitcoin/pull/21500#discussion_r632149181,632149181,src/wallet/rpcdump.cpp
luke-jr,2021-05-13 22:47:23,IMO it would be better to have a separate RPC method for private data.,https://github.com/bitcoin/bitcoin/pull/21500#discussion_r632149261,632149261,src/wallet/rpcdump.cpp
S3RK,2021-05-19 07:50:17,"Are you saying it shouldn't be a parameter at all? Or it should be a ""named-only"" parameter? I can't see how to make it ""named-only""",https://github.com/bitcoin/bitcoin/pull/21500#discussion_r634995434,634995434,src/wallet/rpcdump.cpp
luke-jr,2021-06-24 15:33:02,"Named-only parameters are provided in the positional API as an ""options"" Object.",https://github.com/bitcoin/bitcoin/pull/21500#discussion_r658057718,658057718,src/wallet/rpcdump.cpp
jonatack,2021-07-08 13:02:14,"```suggestion\n        ""\nList descriptors imported into a descriptor-enabled wallet.\n"",\n```\n```\n$ ./src/bitcoin-cli help listdescriptors\nlistdescriptors ( private )\n\nList descriptors imported into a descriptor-enabled wallet.\n\nArguments:\n1. private    (boolean, optional, default=false) Show private descriptors.\n\nResult:\n{                                 (json object)\n ",https://github.com/bitcoin/bitcoin/pull/21500#discussion_r666171386,666171386,src/wallet/rpcdump.cpp
jonatack,2021-07-08 13:10:37,"```suggestion\n        if (desc_spk_man->GetDescriptorString(desc_str, /* priv */ false)) {\n```",https://github.com/bitcoin/bitcoin/pull/21500#discussion_r666178096,666178096,src/wallet/rpcwallet.cpp
jonatack,2021-07-08 13:13:09,"```diff\n-        // For private version always return master key to avoid exposing child private keys.\n-        // The risk implications of exposing child private key together with parent xpub\n-        // could be not obvious for users.\n+        // For the private version, always return the master key to avoid\n+        // exposing child private keys. The risk implications of exposing chi",https://github.com/bitcoin/bitcoin/pull/21500#discussion_r666180212,666180212,src/wallet/scriptpubkeyman.cpp
jonatack,2021-07-08 13:15:23,"```suggestion\n        self.log.info('Test list private descriptors')\n```",https://github.com/bitcoin/bitcoin/pull/21500#discussion_r666181967,666181967,test/functional/wallet_listdescriptors.py
jonatack,2021-07-08 13:15:39,"```suggestion\n        self.log.info('Test list private descriptors with encrypted wallet')\n```",https://github.com/bitcoin/bitcoin/pull/21500#discussion_r666182189,666182189,test/functional/wallet_listdescriptors.py
jonatack,2021-07-08 13:27:03,This seems untested.,https://github.com/bitcoin/bitcoin/pull/21500#discussion_r666191677,666191677,src/wallet/rpcdump.cpp
S3RK,2021-07-10 13:21:35,Thanks. Added a test case for this error,https://github.com/bitcoin/bitcoin/pull/21500#discussion_r667338743,667338743,src/wallet/rpcdump.cpp
jonatack,2021-07-10 13:47:34,"(pico-nit, only if you retouch)\n```suggestion\n        assert_raises_rpc_error(-4, ""Can't get descriptor string"", watch_only_wallet.listdescriptors, True)\n```",https://github.com/bitcoin/bitcoin/pull/21500#discussion_r667341376,667341376,test/functional/wallet_listdescriptors.py
jonatack,2021-07-10 13:53:32,"maybe use named args (as this argument is new and true/false isn't very descriptive), feel free to ignore\n```diff\n         assert_equal(expected, wallet.listdescriptors())\n-        assert_equal(expected, wallet.listdescriptors(False))\n+        assert_equal(expected, wallet.listdescriptors(private=False))\n \n         self.log.info('Test list private descriptors')\n         expected_priv",https://github.com/bitcoin/bitcoin/pull/21500#discussion_r667342098,667342098,test/functional/wallet_listdescriptors.py
