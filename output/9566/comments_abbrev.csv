fanquake,2017-01-17T02:28:58Z,"Failed on both Windows builds with:\n```\nutiltime.cpp: In function ‘const tm gmtime_int(time_t)’:\nutiltime.cpp:31:25: error: cannot convert ‘time_t* {aka long int*}’ to ‘tm*’ for argument ‘1’ to ‘errno_t gmtime_s(tm*, const time_t*)’\n     gmtime_s(&time, &out);\n```",https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-273006235,273006235,
theuni,2017-01-17T03:58:04Z,"_Of course_ windows has reversed arguments. Why wouldn't it?\n\nPushed the reversal.",https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-273016693,273016693,
zstardust,2017-01-17T14:44:43Z,"There's a few places in Bitcoin Core where non monotonic time stamps can cause the node to act strangely, for example if NTP tweaks the time backwards between a p2p `PING` and `PONG`, the `int64` for node latency can overflow. Without much review, does this change any of the behavior in that respect? `chrono::steady_clock` assures monotone time where required. ",https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-273186969,273186969,
theuni,2017-01-17T16:53:57Z,@zstardust There is (should be) no behavioral change here. steady_clock would indeed make sense for some of those cases.,https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-273227869,273227869,
laanwj,2017-01-17T20:31:36Z,"Agreed, using monotonic clock makes sense where only differences in time are important, when there is no need to print the time (as it will have an arbitrary starting offset). That's orthogonal to the changes here, though.",https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-273290634,273290634,
TheBlueMatt,2017-01-23T16:43:40Z,"I think we need to think more about how we use time everywhere, see eg the issues turned up in #9606 - do we want our own types for time to enforce that we dont compare mock and non-mock time? Do we want multiple types of mock times? etc.",https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-274542292,274542292,
theuni,2017-01-23T18:22:38Z,"@TheBlueMatt This is intended to just be a replacement of what we have now. The behavioral changes can come next.\n\nI have an impl of a clock/time_point that I've made that is explicitly non-convertable from one type to another. Happy to PR that for discussion as well. I expect that it would replace our current timestamp usage, but I figured it'd be best to get rid of boost first, since the boo",https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-274572671,274572671,
jtimon,2017-02-01T01:48:37Z,"Concept ACK. With C++ std or with C time functions. Seems like removing boost's dependency here is better irrespective of next steps.\nNeeds rebase.",https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-276550688,276550688,
laanwj,2017-03-09T09:05:05Z,Needs rebase/nit fix.,https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-285294439,285294439,
laanwj,2017-04-19T08:27:19Z,Is this still in your plans @theuni?,https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-295161111,295161111,
theuni,2017-06-27T20:10:41Z,"Thanks for the reminder, I'll circle back to this.",https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-311470989,311470989,
sipa,2017-07-13T18:10:43Z,What is the status here? Going to make it for 0.15?,https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-315158329,315158329,
theuni,2017-07-13T19:00:29Z,"I'll go ahead and rebase/clean this up now, but it's not a priority for 0.15.",https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-315171565,315171565,
danra,2017-09-30T15:34:25Z,Needs rebase,https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-333316201,333316201,
laanwj,2018-02-08T18:32:45Z,@theuni Ping,https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-364205929,364205929,
theuni,2018-03-06T19:44:54Z,"After discussion with @laanwj, closing this in favor of a different approach.",https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-370904060,370904060,
MarcoFalke,2018-12-03T20:01:55Z,"Anyone remembers what the ""different approach"" was?",https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-443850089,443850089,
MarcoFalke,2020-03-06T21:43:52Z,ping @theuni :grimacing: ,https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-595977883,595977883,
MarcoFalke,2020-03-07T15:09:40Z,"> After discussion with @laanwj, closing this in favor of a different approach.\n\nOr maybe, ping @laanwj :grimacing: ",https://github.com/bitcoin/bitcoin/pull/9566#issuecomment-596097958,596097958,
laanwj,2017-01-17T06:28:34Z,"Needing something like this makes me wonder if we're not better off just using the C time functions, which guarantee being based on the UNIX epoch. \n\nEspecially as we're already probing for gmtime_int anyway. This seems double.\n\nDo we need something that is only offered by std::chrono? (or needs much less code with std::chrono)",https://github.com/bitcoin/bitcoin/pull/9566#discussion_r96350569,96350569,src/utiltime.cpp
theuni,2017-01-17T16:50:41Z,"@laanwj Best I can tell from google and reading the c spec, it's not guaranteed to be based on the UNIX epoch either :(. Of course, I've never seen an implementation that isn't, as that would likely break years worth of assumptions. And based on that, I would assume that c++ implementations will be using the underlying c implementation.\n\nSo my logic was: if we can run a quick sanity check here",https://github.com/bitcoin/bitcoin/pull/9566#discussion_r96455920,96455920,src/utiltime.cpp
laanwj,2017-01-17T20:35:19Z,"> Best I can tell from google and reading the c spec, it's not guaranteed to be based on the UNIX epoch either :(\n\nWhich ones? The man page of ""gmtime"" tells me the following:\n```\n       The  ctime(),  gmtime()  and localtime() functions all take an argument of data type time_t, which represents calendar time.  When interpreted as an absolute time value, it represents the\n       number o",https://github.com/bitcoin/bitcoin/pull/9566#discussion_r96504428,96504428,src/utiltime.cpp
theuni,2017-01-17T21:10:13Z,"@laanwj Posix uses a value since the Unix epoch, but time_t is implementation-defined according to the c spec. But it really doesn't matter, realistically it'll be the Unix epoch everywhere we run. Sorry for the distraction.\n\nI only brought it up because the c++ system_clock's epoch is technically implementation-defined as well, I was just making the case that it's probably just as safe to ass",https://github.com/bitcoin/bitcoin/pull/9566#discussion_r96510968,96510968,src/utiltime.cpp
laanwj,2017-02-01T07:56:29Z,Why the `\` at the end of the line?,https://github.com/bitcoin/bitcoin/pull/9566#discussion_r98842126,98842126,src/utiltime.cpp
laanwj,2017-02-01T07:57:41Z,nit: bracing style: we decided to always use braces unless the if and the statement can be on one line: https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md   ,https://github.com/bitcoin/bitcoin/pull/9566#discussion_r98842239,98842239,src/utiltime.cpp
