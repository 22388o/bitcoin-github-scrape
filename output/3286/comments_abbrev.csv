Diapolo,2013-11-21T17:55:19Z,"@laanwj Am I right that MaxAddressLength is not the MinAddressLength ;)? And if this is the case, what is the minimum length of a BTC address? This is not yet mergable in the current state ^^.\n",https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-29006854,29006854,
Diapolo,2013-11-22T08:07:23Z,"@laanwj Re-worked, can you check for correctness?\n",https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-29055366,29055366,
laanwj,2013-11-22T08:15:28Z,"Looks ok, but I'm not sure we should really be checking the length of the address at all, as we have much more reliable methods to check the validity of an address.\n",https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-29055864,29055864,
Diapolo,2013-11-22T09:57:54Z,"This is just a pre-check, if that fails why would we check with CBitcoinAddress anyway ;)? The big plus is that too short addresses will already mark the field as invalid, when focusing out, I like that behaviour, try it.\n",https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-29061281,29061281,
Diapolo,2013-12-01T13:20:40Z,"@laanwj Anything I can do here, to help you merge/test it?\n",https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-29573554,29573554,
laanwj,2013-12-02T06:46:01Z,"The problem I have with enforcing the length is that the 'address' is supposed to just be a data blob that encodes a TxDest.\nNew types of address that are longer or shorter could be added later, and then we'd have to update all these checks.\nI feel pretty strongly that the only test we need to do is the CBitcoinAddress one.\n\n**Edit:** but we could do this check on focus out of course, I think ",https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-29597605,29597605,
Diapolo,2013-12-02T12:26:40Z,"So you suggest to remove `MaxAddressLength` and `MinAddressLength` altogether? But this leads to the fact one can input addresses with ""unlimited"" (maximum Qt accepts) length into our BTC address fields... if this doesn't matter yeah, I can remove these checks and hope the underlying CBitcoinAddress class can handle them ^^.\n",https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-29613713,29613713,
Diapolo,2013-12-09T16:51:56Z,"@laanwj Massive update, can you take a look?\n",https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-30148907,30148907,
Diapolo,2014-01-06T13:26:02Z,@laanwj Can you try to give a view or do some testing without beeing implementation specific :)? I would like to know if the functionality at least is something you consider valuable in the current state of this pull.\n,https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-31647757,31647757,
laanwj,2014-01-06T13:52:05Z,Sure!\n,https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-31649340,31649340,
Diapolo,2014-01-17T14:57:42Z,@laanwj Renamed isBtcAddressField to checkOnFocusOut and reworked a comment. Can you give some more feedback on this and test the pull?\n,https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-32612182,32612182,
BitcoinPullTester,2014-01-22T09:53:53Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/33e863dfcdb9f92a8c85460fd321b9bca18d9a3d for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-33006981,33006981,
Diapolo,2014-01-22T13:14:01Z,@laanwj Did you do any testing yet?\n,https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-33020206,33020206,
laanwj,2014-01-22T16:27:00Z,"@Diapolo yes, I like the functionality, going to try to refactor the code a bit\n",https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-33039544,33039544,
Diapolo,2014-01-22T22:20:10Z,"@laanwj Good idea, better than me trying to do what you have in your brain ^^,\n",https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-33075396,33075396,
Diapolo,2014-01-28T10:01:23Z,@laanwj Any progress with the refactor?\n,https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-33464863,33464863,
laanwj,2014-01-28T12:36:47Z,"Yes, I've thought about it. I think I'm going to give a QValidatedLineEdit _two_ QValidators (both which are optional). One for the normal QLineEdit business, and one for the 'exit check'.\n\nSimilarly I'll split up BitcoinAddressValidator into a class BitcoinAddressEntryValidator with the current ::validate and a class BitcoinAddressCheckValidator that has ::validateAddress as ::validate.\n",https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-33474445,33474445,
laanwj,2014-01-28T16:07:07Z,See here:\nhttps://github.com/laanwj/bitcoin/tree/2014_01_qt_validator_refactor\nhttps://github.com/laanwj/bitcoin/commit/dd551a1b829abb48ff206b46cd576458de2c176f\n,https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-33492781,33492781,
laanwj,2014-01-29T13:16:42Z,Merged via c78bd937017212c89c1c7aab07399cec5b6b3bdd\n,https://github.com/bitcoin/bitcoin/pull/3286#issuecomment-33583213,33583213,
laanwj,2013-12-09T17:00:08Z,"I like the overall idea, but putting this code in ValidatedLineEdit is wrong. This needs to be in a separate policy object instead that does the validation.\nI suppose putting it in BitcoinAddressValidator would make sense in this case.\n",https://github.com/bitcoin/bitcoin/pull/3286#discussion_r8203342,8203342,src/qt/qvalidatedlineedit.cpp
Diapolo,2013-12-20T10:36:27Z,"Can you please explain what a `separate policy` means in that context? I'd like to finish this soon :).\nI pushed my recent version, but need you to help me out ^^.\n",https://github.com/bitcoin/bitcoin/pull/3286#discussion_r8496583,8496583,src/qt/qvalidatedlineedit.cpp
laanwj,2013-12-20T11:30:30Z,"It means that there should be no bitcoin address specific code in the\n""generic"" class QValidatedLineEdit, but it should call into a validator\nobject to do the validation. This keeps the code general.\n\nA policy class is a class such as QValidator subclasses that implements one\naspect, in this case validation, and can be plugged into another object (a\nQLineEdit or QValidatedLineEdit, in this c",https://github.com/bitcoin/bitcoin/pull/3286#discussion_r8497501,8497501,src/qt/qvalidatedlineedit.cpp
Diapolo,2013-12-20T14:38:23Z,"I moved the check into a static function in the QValidator subclass, but I don't get the clue, how to really implement what you suggest. Can you give a hint with pseudo-code (only if you've got a little time for this)? Thanks for helping :).\n",https://github.com/bitcoin/bitcoin/pull/3286#discussion_r8500502,8500502,src/qt/qvalidatedlineedit.cpp
laanwj,2013-12-20T14:38:51Z,"A concrete alternative that creates no dependency specifically on BTC addresses would be to adapt BitcoinAddressValidator's validate() function to return QValidator::Acceptable only on a valid bitcoin address.\n\nThen change this code that if a validator() is set, setValid() here based on hasAcceptableInput().\n",https://github.com/bitcoin/bitcoin/pull/3286#discussion_r8500511,8500511,src/qt/qvalidatedlineedit.cpp
Diapolo,2014-01-06T13:24:21Z,"The problem with changing the `validate()` function of BitcoinAddressValidator is, that it re-checks after every new character you enter in a QValidatedLineEdit, which then results in problems, because you don't know when the final address is in.\n",https://github.com/bitcoin/bitcoin/pull/3286#discussion_r8664579,8664579,src/qt/qvalidatedlineedit.cpp
laanwj,2014-01-06T13:31:14Z,What's the problem with calling it for every character? What behavior would it result in?\n\naddr.IsValid() knows when the whole address is entered. An incomplete subset of a bitcoin address is never a valid address.\n,https://github.com/bitcoin/bitcoin/pull/3286#discussion_r8664664,8664664,src/qt/qvalidatedlineedit.cpp
Diapolo,2014-01-06T13:37:22Z,"For example it prevented adding additional characters into the field, if input is considered invalid.\n",https://github.com/bitcoin/bitcoin/pull/3286#discussion_r8664726,8664726,src/qt/qvalidatedlineedit.cpp
laanwj,2014-01-06T13:47:15Z,Hmm makes sense; so maybe return Intermediate instead of Invalid if the address isn't fully valid?\n,https://github.com/bitcoin/bitcoin/pull/3286#discussion_r8664905,8664905,src/qt/qvalidatedlineedit.cpp
Diapolo,2014-01-06T14:24:09Z,"IMHO this gives a hint that a final isValid check should only happen when focusing out (address is considered valid by user), which perhaps makes it easier to explicitly mark a QValidatedLineEdit to be a btc input field via isBtcAddressField flag?\n",https://github.com/bitcoin/bitcoin/pull/3286#discussion_r8665577,8665577,src/qt/qvalidatedlineedit.cpp
laanwj,2014-01-06T14:29:02Z,"Yes, that's a good solution. So the flag would be `checkOnFocusOut` instead of `isBtcAddressField`, which would check on focus out instead of while typing, and it would work generally for other kinds of validators too.\n",https://github.com/bitcoin/bitcoin/pull/3286#discussion_r8665655,8665655,src/qt/qvalidatedlineedit.cpp
