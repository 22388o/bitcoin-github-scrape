MarcoFalke,2018-07-24T12:44:45Z,"Hmm, this is just replacing a boost header with a self-written header that offers the same functionality and comes with unit tests. Do we really want to re-implement all of boost we are currently using? I mean straightforward replacing `boost::` with `std::` is fine, but re-implementing boost should be one of our low priority goals, no?",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-407393565,407393565,
l2a5b1,2018-07-24T14:56:42Z,"That's a fair point @MarcoFalke üëç \n\nThe goal was not to re-implement boost. This is an attempt to drop the `boost::split` dependency with as little changes to the existing codebase as possible.\n\nI have eliminated boost where it was trivial to do: `boost::algorithm::is_any_of` has been refactored to a `std::string` and `boost::algorithm::trim_right` to a `std::string:erase`.\n\nThere are ",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-407437229,407437229,
DrahtBot,2018-07-25T15:00:28Z,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17037](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17037.html) (Testschains: Many regtests with different g",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-407785518,407785518,
practicalswift,2018-07-25T15:56:12Z,"Concept ACK\n\nThe short self-contained non-Boost version is easier to reason about.\n\nEvery small step counts in our journey to get rid of our Boost dependencies! :-)",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-407804860,407804860,
MarcoFalke,2018-07-25T16:45:49Z,"@practicalswift Sure, but it has to go through review to verify that it supports everything that was supported by boost the way we used it.\n\nWe are stuck with boost until we adopt C++17, since implementing `std::optional` or `std::variant` on our own wouldn't be too wise, imo. So at least there is no rush in getting rid of non-trivial boost features that are not already in `std::`.",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-407820583,407820583,
practicalswift,2018-07-25T18:58:19Z,@MarcoFalke Agreed ‚Äì no rush in removing non-trivial Boost features. Let‚Äôs do it incrementally starting with the low hanging fruit :-),https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-407860189,407860189,
l2a5b1,2018-07-25T19:05:12Z,"> So at least there is no rush in getting rid of non-trivial boost features that are not already in `std::`\n\n@MarcoFalke, apologies about this. I have totally misinterpreted the objective of the Boost migration.\n",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-407862106,407862106,
MarcoFalke,2018-07-25T19:22:34Z,Sorry for being so pessimistic about it. You can definitely leave this open and see what other reviewers think. I was just saying that we have about 3 years time to finish up everything.,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-407866700,407866700,
l2a5b1,2018-07-25T19:40:42Z,Thanks @MarcoFalke!,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-407871430,407871430,
practicalswift,2018-07-25T19:57:12Z,@251Labs Text splitting should be in the low hanging fruit category I mentioned :-),https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-407875926,407875926,
sipa,2018-07-26T00:17:29Z,"Note there is a function with similar functionality in #13697, but operating on `Span<const char>`s rather than `std::string`s.",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-407936291,407936291,
practicalswift,2018-07-26T07:17:11Z,@251Labs See if you can base your work in this PR on @sipa:s code in #13697 :-),https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-408000964,408000964,
l2a5b1,2018-08-04T16:28:29Z,5502212 addresses review comments https://github.com/bitcoin/bitcoin/pull/13751#discussion_r207340164 and https://github.com/bitcoin/bitcoin/pull/13751#discussion_r207341411,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-410461048,410461048,
laanwj,2018-08-31T10:45:40Z," #13697 was merged\nwe now have in `src/script/descriptor.cpp`\n\n`std::vector<Span<const char>> Split(const Span<const char>& sp, char sep)`\n\nwould make sense to move that to a public header instead and use that",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-417626657,417626657,
l2a5b1,2018-08-31T18:43:24Z,"Hey, thanks @laanwj!\n\nYeah, good point. \n\nI had been thinking about this a while back when @sipa and @practicalswift hinted at the same, but didn't see an easy non-invasive way to do this, because the code that uses `boost::split` relies on specific external behaviour that`std::vector<Span<const char>> Split(const Span<const char>& sp, char sep)` doesn't provide.\n\nFor example:\n1. `to",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-417756316,417756316,
laanwj,2018-09-05T16:57:10Z,"@251Labs fair enough, if it's so much hassle it is probably better to add another function, and leave the other split() private to the descriptor parsing code",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-418803936,418803936,
l2a5b1,2018-09-26T08:23:46Z,"Thanks again @practicalswift, I have addressed your feedback in 99074d1",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-424629312,424629312,
l2a5b1,2018-11-06T08:28:52Z,Rebased 5005a8f,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-436169921,436169921,
sipa,2018-11-15T00:26:32Z,Concept ACK,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-438869465,438869465,
l2a5b1,2018-11-16T09:19:04Z,e236c47 renames lower camel case variable names to snake_case equivalents.,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-439331334,439331334,
l2a5b1,2018-12-29T15:59:32Z,rebased ab2a18d,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-450502235,450502235,
practicalswift,2018-12-29T16:55:31Z,@251Labs Looks good. I‚Äôm near a utACK - could you rebase on top of #15043 and add a fuzzer for the split method which would split random input on random delimiter(s) and then make sure the result matches the result from `boost::split`?,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-450505754,450505754,
Empact,2018-12-29T23:40:08Z,@luke-jr I thought we've been working toward a long term goal of removing boost entirely. Is that not right?,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-450528791,450528791,
practicalswift,2018-12-29T23:52:41Z,In contrast to @luke-jr: let me re-iterate my concept ACK. IMO we should take small incremental steps towards a code base free from Boost which is exactly what this PR does.,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-450529303,450529303,
luke-jr,2018-12-30T02:21:47Z,"The goal is to replace Boost with standard C++ features. If C++ doesn't have a standard replacement yet, then it only makes sense to keep using Boost for that until it does.",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-450534711,450534711,
l2a5b1,2019-01-15T15:45:55Z,"rebased 6ff558f\n\n@practicalswift:\n> IMO we should take small incremental steps towards a code base free from Boost which is exactly what this PR does.\n\n+1\n\n> could you rebase on top of #15043 and add a fuzzer for the split method\n\nThat is a good suggestion!\n\nHappy to follow up on that once it is merged and this PR is not NACked.\n\n@luke-jr:\n> NACK. Using dependencies is ",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-454439715,454439715,
tiendq,2019-01-17T08:08:36Z,@251Labs @MarcoFalke I just came here from a Boost to C++ 11 migration project page. Where can I find more information of migration plan? (if there is one). Just curious to know in case I could give it a hand :),https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-455079096,455079096,
MarcoFalke,2019-01-17T15:21:06Z,"The migration is pretty much just to replace `boost::` with `std::`. Though, the low hanging fruits in C++11 have already been collected (see https://github.com/bitcoin/bitcoin/projects/3).",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-455209643,455209643,
MarcoFalke,2019-01-17T15:22:16Z,"If `boost::split` was the last dependency we used from boost, this pull could be merged, but I don't see that coming any time soon.",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-455210149,455210149,
l2a5b1,2019-02-15T20:03:49Z,rebased d7ff8eb,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-464181551,464181551,
l2a5b1,2019-04-10T17:38:06Z,rebased 388257f,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-481789313,481789313,
l2a5b1,2019-04-18T20:09:38Z,rebased 9f811c3,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-484671059,484671059,
l2a5b1,2019-05-07T15:20:18Z,"rebased 402da1c\n\nTravis build error is unrelated:\n```\nError! Initial build successful, but not enough time remains to run later build stages and tests. \nPlease manually re-run this job by using the travis restart button or asking a bitcoin maintainer \nto restart. The next run should not time out because the build cache has been saved.\n```",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-490125624,490125624,
promag,2019-05-07T15:28:06Z,@251Labs restarted.,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-490128795,490128795,
l2a5b1,2019-05-07T20:10:49Z,Thanks @promag!,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-490237183,490237183,
l2a5b1,2019-06-06T19:45:05Z,Rebased 6186091,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-499640015,499640015,
l2a5b1,2019-06-21T07:04:29Z,rebased 47a758b,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-504316831,504316831,
l2a5b1,2019-07-03T14:05:02Z,Rebased 5730465,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-508107527,508107527,
DrahtBot,2019-10-10T22:40:58Z,<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase,https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-540828307,540828307,
fanquake,2019-10-31T19:19:20Z,"Thanks for the work you've done here. However the project has decided that while it remains impossible to remove all of our Boost usage, we are no longer going to remove smaller components by rewriting them ourselves. ",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-548529477,548529477,
l2a5b1,2019-10-31T23:42:29Z,"Thanks @fanquake.\n\nContext FWIW:\n\n[bitcoin-core-dev/2019-10-31.log](http://gnusha.org/bitcoin-core-dev/2019-10-31.log)\n\n> 12:08 < wumpus> #topic close Boost -> C++11 migration project for now (wumpus)\n> 12:09 < warren> too much change required?\n> 12:09 < wumpus> so it looks like all the low-hanging fruit for replacing boost has been picked now\n> 12:10 < wumpus> what remains is ha",https://github.com/bitcoin/bitcoin/pull/13751#issuecomment-548611518,548611518,
Empact,2018-08-02T19:06:21Z,"nit: this would be a bit simpler in implementation if it always referred to the end of the token, and you stashed the beginning here and continued to operate on it:\n\n```C++\nfor (auto it = begin; it < end; ++it) {\n    bool foundSeparator = false;\n    auto start = it;\n    while (it < end && !(foundSeparator = anyOfSeparator.find(*it) != std::string::npos)) {\n        ++it;\n    }\n   ",https://github.com/bitcoin/bitcoin/pull/13751#discussion_r207340164,207340164,src/utilsplitstring.h
Empact,2018-08-02T19:10:54Z,"I'm not sure this restriction is helpful - absent it the args would be limited to whatever is compatible with `std::inserter`, which could be fine...",https://github.com/bitcoin/bitcoin/pull/13751#discussion_r207341411,207341411,src/utilsplitstring.h
l2a5b1,2018-08-03T23:24:59Z,"Thanks, that's a good point.\n\nI have added the `static_assert`, because I didn't want to make any assumptions for containers other than `std::vector<std::string>` and `std::set<std::string>`. The compile time assert is there for the next person who wants to use this function with another type of container. \n\nI am going to update the message to make the purpose of the assert clear. This may",https://github.com/bitcoin/bitcoin/pull/13751#discussion_r207688432,207688432,src/utilsplitstring.h
l2a5b1,2018-08-03T23:25:02Z,"Thanks for the review @Empact!\n\nI have updated the PR and addressed your feedback.\n\nPlease note that the separate `if` statements below are intentional and cover the case where `it` equals `begin` and `it` equals `end - 1`, in which case two empty tokens need to be inserted to be boost compliant.\n\n```c++\n        if (it == begin) {\n            *insertIt = """";\n        }\n        i",https://github.com/bitcoin/bitcoin/pull/13751#discussion_r207688443,207688443,src/utilsplitstring.h
practicalswift,2018-09-05T09:32:23Z,Try to reformulate without mixing assignment and comparison. That would make it easier to read and reason about :-),https://github.com/bitcoin/bitcoin/pull/13751#discussion_r215198496,215198496,src/utilsplitstring.h
l2a5b1,2018-09-05T13:11:16Z,"Hey, thanks @practicalswift! Yes, absolutely. Please see 3704125.",https://github.com/bitcoin/bitcoin/pull/13751#discussion_r215262214,215262214,src/utilsplitstring.h
practicalswift,2018-09-26T05:22:03Z,`foundSeparator` can be unintialized here? Please initialize `foundSeparator` to `false` above.,https://github.com/bitcoin/bitcoin/pull/13751#discussion_r220429279,220429279,src/utilsplitstring.h
l2a5b1,2018-09-26T07:35:54Z,"Hey @practicalswift, thanks!\n\nI don't think `foundSeparator` can be uninitialized at this point, because the outer for-loop of the `Split` function guarantees that it will go at least once through the inner for-loop where it is initialized, but I will revert back to explicit initialization of this variable for clarity.",https://github.com/bitcoin/bitcoin/pull/13751#discussion_r220453752,220453752,src/utilsplitstring.h
sipa,2018-11-15T00:23:35Z,Nit: Can you follow the coding style guidelines (see `doc/developer-notes.md`) here? Variables are snake_case.,https://github.com/bitcoin/bitcoin/pull/13751#discussion_r233672706,233672706,src/util/splitstring.h
l2a5b1,2018-11-16T09:18:36Z,"Thanks @sipa, sure! See e236c47.",https://github.com/bitcoin/bitcoin/pull/13751#discussion_r234135769,234135769,src/util/splitstring.h
