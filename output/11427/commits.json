[
  {
    "sha": "912b1a12c2fabaf384e704076ecb9358377c900b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5MTJiMWExMmMyZmFiYWYzODRlNzA0MDc2ZWNiOTM1ODM3N2M5MDBi",
    "commit": {
      "author": {
        "name": "Jorge Tim\u00f3n",
        "email": "jtimon@jtimon.cc",
        "date": "2017-09-30T12:58:58Z"
      },
      "committer": {
        "name": "Jorge Tim\u00f3n",
        "email": "jtimon@jtimon.cc",
        "date": "2017-09-30T18:03:58Z"
      },
      "message": "Optimization: Remove Consensus::Params::BIP34Hash",
      "tree": {
        "sha": "5efbb6d0d3b7bf86de0001d618d06c60626b1541",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5efbb6d0d3b7bf86de0001d618d06c60626b1541"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/912b1a12c2fabaf384e704076ecb9358377c900b",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQIcBAABCAAGBQJZz9yOAAoJEIhmwY6hyUSifBsQAJPNY2m23QDBJsZfON5IHMhA\nQufTuJ8JdiLXEuPAK0kRmETm+5ZxTeWG/y/OMha+sl4BnMlz7EMvYcPP8+S9omY4\nBU4nEzTIU41LpT/UjHL45VLE5TgVyje+yPex6RjoDajkmFlt+4ku40xKefDWoaw/\n4wQ/wGL7MeGHpsbaFKlP2Pr6jpDR+1NkauxMN06eugdpJNtSAI+cYq3suztvMLZb\nuUODLwaF5Rg+mn+wFp9kqNjQr1Xx1fAKYu4sa/mf+Nr2hVNDSQPyvMmKnzn6VjZy\nM0h/xd4yNJJzLoGGWAE+Utvc43/mLYox0OutKbdxvFypL/7SEg7YOaB3DANr4xFX\nRd3wvF53zrRXrquXTOtF+eNurjESCw+8gVHgMu9bQj+zhCU9Q+4yb8ZyRSNIK3Az\nxTdZSPjLyykXHpsx2weY0iRnkpoqRbkfL2mJyUIG2L75ct/OVSN9XabONa9ThFkx\nwBD58gpbgCv3u5NDScK0UYK/tzAR18ztkv6cRg4Gy51nH/PTfLgEIjJSVKSQBc12\nEJOJn+LoW+chPjWg49XbBR2Y1AL2PHyOy6ABUPA/gC0eACt8qOyp7a8Qaqi/mJnQ\nTX3O9n07vNwVRnQEgpAzkEapFjonJvS8YJ1eBQF4Jv2NizL/BBP9NRC6WT1idsh7\nv0Ctp2J+eaV8G1EKcxyz\n=MXUg\n-----END PGP SIGNATURE-----",
        "payload": "tree 5efbb6d0d3b7bf86de0001d618d06c60626b1541\nparent 763231051596b8e3455b839911ad6a3a1f1c3c74\nauthor Jorge Tim\u00f3n <jtimon@jtimon.cc> 1506776338 +0200\ncommitter Jorge Tim\u00f3n <jtimon@jtimon.cc> 1506794638 +0200\n\nOptimization: Remove Consensus::Params::BIP34Hash\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/912b1a12c2fabaf384e704076ecb9358377c900b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/912b1a12c2fabaf384e704076ecb9358377c900b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/912b1a12c2fabaf384e704076ecb9358377c900b/comments",
    "author": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "763231051596b8e3455b839911ad6a3a1f1c3c74",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/763231051596b8e3455b839911ad6a3a1f1c3c74",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/763231051596b8e3455b839911ad6a3a1f1c3c74"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 2,
      "deletions": 9
    },
    "files": [
      {
        "sha": "4ca840a49e6b6806bc4eca7735ae349d06369e1c",
        "filename": "src/chainparams.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/912b1a12c2fabaf384e704076ecb9358377c900b/src/chainparams.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/912b1a12c2fabaf384e704076ecb9358377c900b/src/chainparams.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/chainparams.cpp?ref=912b1a12c2fabaf384e704076ecb9358377c900b",
        "patch": "@@ -76,7 +76,6 @@ class CMainParams : public CChainParams {\n         strNetworkID = \"main\";\n         consensus.nSubsidyHalvingInterval = 210000;\n         consensus.BIP34Height = 227931;\n-        consensus.BIP34Hash = uint256S(\"0x000000000000024b89b42a942fe0d9fea3bb44ab7bd1b19115dd6a759c0808b8\");\n         consensus.BIP65Height = 388381; // 000000000000000004c2b624ed5d7756c508d90fd0da2c7c679febfa6c4735f0\n         consensus.BIP66Height = 363725; // 00000000000000000379eaa19dce8c9b722d46ae6a57c2f1a988119488b50931\n         consensus.powLimit = uint256S(\"00000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\n@@ -182,7 +181,6 @@ class CTestNetParams : public CChainParams {\n         strNetworkID = \"test\";\n         consensus.nSubsidyHalvingInterval = 210000;\n         consensus.BIP34Height = 21111;\n-        consensus.BIP34Hash = uint256S(\"0x0000000023b3a96d3484e5abb3755c413e7d41500f8e2a5c3f0dd01299cd8ef8\");\n         consensus.BIP65Height = 581885; // 00000000007f6655f22f98e72ed80d8b06dc761d5da09df0fa1dc4be4f861eb6\n         consensus.BIP66Height = 330776; // 000000002104c8c45e99a8853285a3b592602a3ccde2b832481da85e9e4ba182\n         consensus.powLimit = uint256S(\"00000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\n@@ -272,7 +270,6 @@ class CRegTestParams : public CChainParams {\n         strNetworkID = \"regtest\";\n         consensus.nSubsidyHalvingInterval = 150;\n         consensus.BIP34Height = 100000000; // BIP34 has not activated on regtest (far in the future so block v1 are not rejected in tests)\n-        consensus.BIP34Hash = uint256();\n         consensus.BIP65Height = 1351; // BIP65 activated on regtest (Used in rpc activation tests)\n         consensus.BIP66Height = 1251; // BIP66 activated on regtest (Used in rpc activation tests)\n         consensus.powLimit = uint256S(\"7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");"
      },
      {
        "sha": "5472385e03ff50a1e8822d4d5c57bcd552219e02",
        "filename": "src/consensus/params.h",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/912b1a12c2fabaf384e704076ecb9358377c900b/src/consensus/params.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/912b1a12c2fabaf384e704076ecb9358377c900b/src/consensus/params.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/params.h?ref=912b1a12c2fabaf384e704076ecb9358377c900b",
        "patch": "@@ -39,9 +39,8 @@ struct BIP9Deployment {\n struct Params {\n     uint256 hashGenesisBlock;\n     int nSubsidyHalvingInterval;\n-    /** Block height and hash at which BIP34 becomes active */\n+    /** Block height at which BIP34 becomes active */\n     int BIP34Height;\n-    uint256 BIP34Hash;\n     /** Block height at which BIP65 becomes active */\n     int BIP65Height;\n     /** Block height at which BIP66 becomes active */"
      },
      {
        "sha": "4101945f8e2bdaed440f6eadfa024b88745af5bb",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 4,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/912b1a12c2fabaf384e704076ecb9358377c900b/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/912b1a12c2fabaf384e704076ecb9358377c900b/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=912b1a12c2fabaf384e704076ecb9358377c900b",
        "patch": "@@ -1712,10 +1712,7 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n     // before the first had been spent.  Since those coinbases are sufficiently buried its no longer possible to create further\n     // duplicate transactions descending from the known pairs either.\n     // If we're on the known chain at height greater than where BIP34 activated, we can save the db accesses needed for the BIP30 check.\n-    assert(pindex->pprev);\n-    CBlockIndex *pindexBIP34height = pindex->pprev->GetAncestor(chainparams.GetConsensus().BIP34Height);\n-    //Only continue to enforce if we're below BIP34 activation height or the block hash at that height doesn't correspond.\n-    fEnforceBIP30 = fEnforceBIP30 && (!pindexBIP34height || !(pindexBIP34height->GetBlockHash() == chainparams.GetConsensus().BIP34Hash));\n+    fEnforceBIP30 = fEnforceBIP30 && pindex->nHeight < chainparams.GetConsensus().BIP34Height;\n \n     if (fEnforceBIP30) {\n         for (const auto& tx : block.vtx) {"
      }
    ]
  }
]