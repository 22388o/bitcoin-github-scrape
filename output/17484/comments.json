[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554144937",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-554144937",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 554144937,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDE0NDkzNw==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-15T00:08:16Z",
    "updated_at": "2019-11-15T00:08:16Z",
    "author_association": "MEMBER",
    "body": "> It let call `sethseed` while being disconnected, which may be blameworthty but as `createwallet` let you already generate a HD wallet without checking for IBD, we should go either way or the other, i.e can generate HD-seed without out-of-IBD or can't generate HD-seed without out-of-IBD. Thoughts ?\r\n\r\nThe reason that you had to be out of IBD in order to set an HD seed is because by setting a new HD seed, no new keys would ever be generated from the old seed. So if there were a transaction that involved a key that hadn't been generated yet and was in a block after where you were currently synced, setting a new HD seed would mean that you don't detect that transaction. That would be bad.\r\n\r\nWith `createwallet`, the difference is that it's a completely new wallet with no history at all so it is safe to make a new wallet when you are behind.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554144937/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554157612",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-554157612",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 554157612,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDE1NzYxMg==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-15T00:52:05Z",
    "updated_at": "2020-08-06T10:31:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18354 (Use shared pointers only in validation interface by bvbfan)\n* #14582 (wallet: always do avoid partial spends if fees are within a specified range by kallewoof)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554157612/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554181307",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-554181307",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 554181307,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDE4MTMwNw==",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-15T02:26:57Z",
    "updated_at": "2019-11-15T02:26:57Z",
    "author_association": "MEMBER",
    "body": ">  So if there were a transaction that involved a key that hadn't been generated yet and was in a block after where you were currently synced\r\n\r\nYou're talking about a key derived from the old seed here ? I didn't dig in code but if I understand when we set a new seed we discard checking keys for old one right ? Node is getting out of IBD at tip N - DEFAULT_TIP_AGE(~144), which means you can set a new seed at N - 144, but you're not going to see a tx with an old key in block N - 100 for example, so is this mechanism reliable ?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554181307/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554515006",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-554515006",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 554515006,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDUxNTAwNg==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-15T20:25:36Z",
    "updated_at": "2019-11-15T20:25:36Z",
    "author_association": "MEMBER",
    "body": "> You're talking about a key derived from the old seed here ? I didn't dig in code but if I understand when we set a new seed we discard checking keys for old one right ?\r\n\r\nYes, I'm talking about keys derived from the old seed. Any key that has already been derived and added to the wallet (i.e. it was in the keypool or already marked as used) will still be checked for. Setting a new seed doesn't change that. Setting a new seed only makes it so that no new keys will be derived from the old seed.\r\n\r\n> Node is getting out of IBD at tip N - DEFAULT_TIP_AGE(~144), which means you can set a new seed at N - 144, but you're not going to see a tx with an old key in block N - 100 for example, so is this mechanism reliable ?\r\n\r\nI think it's reasonably reliable as I think it is unlikely that someone used the entire keypool in 144 blocks.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554515006/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/555615147",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-555615147",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 555615147,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NTYxNTE0Nw==",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-19T17:22:36Z",
    "updated_at": "2019-11-19T17:22:36Z",
    "author_association": "MEMBER",
    "body": "Thanks @achow101 for your insights, I'm going to hold-on this PR once the wallet init its state asynchronously like thanks to change here https://github.com/ariard/bitcoin/commits/2019-08-rescan-index-refactor so it would avoid behavior change on the point you raised.\r\n\r\nThanks for your review @jonatack, will fix comments once PR gets Concept ACK.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/555615147/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558341261",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-558341261",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 558341261,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1ODM0MTI2MQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-25T21:10:12Z",
    "updated_at": "2019-11-25T21:10:12Z",
    "author_association": "MEMBER",
    "body": "Concept ACK.\r\n\r\n@achow101 to be clear, is the failure scenario as follows:\r\n\r\n1. user has an HD wallet\r\n2. user makes a backup from the wallet\r\n3. user hands out more keys then they have in their keypool (currently 1000, previously 100) and receives payments to keys handed out after the initial keypool was drained\r\n4. user restores original backup wallet on unsync'ed node, then calls `sethdseed` before the node has synced. The payments to the keys handed out after the initial keypool was drained are lost.\r\n\r\n(1) must be an HD wallet because restoring a non-HD wallet backup that has drained its initial keypool keys always results in funds loss\r\n(3) must drain the initial keypool because setting a new HD seed does not remove the initial keypool from the wallet. It simply marks them as not in the keypool\r\n\r\nNot allowing `sethdseed` to be called before we're out of IBD isn't perfect protection against this. If many addresses (more than in the initial keypool) have been handed out, the user could still receive a payment to one of those addresses after they've changed their hdseed and lose the payment.\r\n\r\n@ariard - is it possible to change this so `m_is_ibd` initializes to `true` and then call `Chain::isInitialBlockDownload()` once on wallet start-up?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558341261/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558369059",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-558369059",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 558369059,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1ODM2OTA1OQ==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-25T22:27:34Z",
    "updated_at": "2019-11-25T22:27:34Z",
    "author_association": "MEMBER",
    "body": "For some context about the IBD and `sethdseed` stuff: https://github.com/bitcoin/bitcoin/pull/12560#issuecomment-377567454\r\n\r\n>  is the failure scenario as follows:\r\n\r\nYes.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558369059/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558377305",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-558377305",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 558377305,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1ODM3NzMwNQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-25T22:53:56Z",
    "updated_at": "2019-11-25T22:53:56Z",
    "author_association": "MEMBER",
    "body": "@achow101 Thanks for the cross-reference :pray: \r\n\r\n> can we either check that we're fully synced before allowing an HD master rotate or keep around old HD keys for key derivation? I'd prefer the second\r\n\r\nKeeping the old key for key derivation definitely seems like the correct fix. How complex is that (and does descriptor wallets do that automatically?)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558377305/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558390026",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-558390026",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 558390026,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1ODM5MDAyNg==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-25T23:35:42Z",
    "updated_at": "2019-11-25T23:35:42Z",
    "author_association": "MEMBER",
    "body": "> Keeping the old key for key derivation definitely seems like the correct fix. How complex is that\r\n\r\nI don't think it would be too complex. Although I think it would be a fairly large change. We would need to keep track of the old hd seeds and keep track of where we've derived up to for a particular seed. And a bunch of things that do things on the seed would need to be changed to do things on any seed. We would have to add several more records to the wallet.\r\n\r\nAlternatively we could have `sethdseed` make a new `LegacyScriptPubKeyMan` with the seed, but that may also require a bit of re-architecting as the primary assumption about `LegacyScriptPubKeyMan`s will change. But we would have to wait for the full `ScriptPubKeyMan` and `CWallet` separation before that can happen.\r\n\r\n> and does descriptor wallets do that automatically?\r\n\r\nNot the current implementation. But it also would be pretty trivial to do it.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558390026/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558851799",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-558851799",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 558851799,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1ODg1MTc5OQ==",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-26T22:52:30Z",
    "updated_at": "2019-11-26T22:52:54Z",
    "author_association": "MEMBER",
    "body": "@jnewbery \r\n\r\n> is it possible to change this so m_is_ibd initializes to true and then call Chain::isInitialBlockDownload() once on wallet start-up?\r\n\r\nYes but that removes PR interest of drying up the Chain interface. I think best it to wait wallet registering its sync state with the Chain::interface (https://github.com/ariard/bitcoin/commits/2019-08-rescan-index-refactor) at start-up so after rescan done wallet knows it's out of IBD. \r\n\r\n> can we either check that we're fully synced before allowing an HD master rotate or keep around old HD keys for key derivation? I'd prefer the second\r\n\r\nI think by robustness we should go for the second option. Reading https://github.com/bitcoin-core/bitcoin-devwiki/wiki/Wallet-Class-Structure-Changes, best option is to have multiple `Scri[tPubKeyMan` or one with multiple `hdChain` ?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558851799/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/560845316",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-560845316",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 560845316,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MDg0NTMxNg==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-02T23:06:50Z",
    "updated_at": "2019-12-02T23:13:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Reading https://github.com/bitcoin-core/bitcoin-devwiki/wiki/Wallet-Class-Structure-Changes, best option is to have multiple Scri[tPubKeyMan or one with multiple hdChain ?\r\n\r\nI think you could have separate LegacyScriptPubKeyMan instances for each hdseed, but this would probably be more work than necessary, and not very related to what this PR is trying to do.\r\n\r\nI think the minimal fix to prevent running out of keys for old hd seeds would be to do some extra checking and topping up inside [`LegacyScriptPubKeyMan::MarkUnusedAddresses`](https://github.com/bitcoin/bitcoin/blob/35eda631ed3bd23d4a41761a85a96f925d4a6337/src/wallet/scriptpubkeyman.cpp#L283-L298). Add a check there to see if the affected key has metadata associated with an inactive hd seed. If it does and the key number in the metadata is close enough to the highest generated key on that hd path, generate more keys on the path and add them to the wallet. I don't think this would require very much code. To work efficiently the `LegacyScriptPubKeyMan` instance would need to have a new `map` from `KeyOriginInfo` hd path to the maximum generated key number on that path.\r\n\r\nActually, I think you would need to do what I just described even if you did want to instantiate different `LegacyScriptPubKeyMan` instances for each seed, because inactive hd seeds aren't going to have any pool data, so `m_pool_key_to_index data` will be empty and existing topup code won't work for them. So you'd need this new `LegacyScriptPubKeyMan::MarkUnusedAddresses` code anyway.\r\n\r\nIf it is desirable to have separate `LegacyScriptPubKeyMan` instances in the wallet, I think that might not be too hard to implement. The trickiest part would just be loading them. In `walletdb.cpp` as keys and scripts are loaded you would have to examine their metadata to figure out what seed they were associated with and load them into the appropriate keyman instance based on that seed.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/560845316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/562336013",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-562336013",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 562336013,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MjMzNjAxMw==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-05T21:54:59Z",
    "updated_at": "2019-12-05T21:54:59Z",
    "author_association": "MEMBER",
    "body": "I've dealt with the `sethdseed` stuff in #17681 ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/562336013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/562371933",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-562371933",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 562371933,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MjM3MTkzMw==",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-05T23:58:54Z",
    "updated_at": "2019-12-05T23:58:54Z",
    "author_association": "MEMBER",
    "body": "Whoa awesome, will review #17681 !",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/562371933/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/625140350",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-625140350",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 625140350,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTE0MDM1MA==",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-07T09:29:24Z",
    "updated_at": "2020-05-07T09:29:24Z",
    "author_association": "MEMBER",
    "body": "Thanks @ryanofsky for call-up on this and #17443! I will rebase them tomorrow-ish but I think for this one it would be better for achow one to get first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/625140350/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/633041278",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-633041278",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 633041278,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMzA0MTI3OA==",
    "user": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?u=348c27f90b6fff8fd72fa27232272651436a2ff0&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-23T12:17:36Z",
    "updated_at": "2020-05-23T12:17:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK, will do full review when this is rebased.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/633041278/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638535575",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-638535575",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 638535575,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzODUzNTU3NQ==",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-04T00:52:43Z",
    "updated_at": "2020-06-04T00:52:43Z",
    "author_association": "MEMBER",
    "body": "Rebased the PR but this is not worthy to review now, after thinking a bit more I want to avoid behavior changes and for so, it would be better to get #15719 and its follow-up first to always ensure we are in-sync with node wrt to IBD after wallet startup.\r\n\r\nThis current PR may provoke issue if a privacy leak if user broadcast a transaction without being at tip.\r\n\r\nUpdated PR description in consequence.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638535575/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/674665975",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#issuecomment-674665975",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17484",
    "id": 674665975,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NDY2NTk3NQ==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-17T05:35:59Z",
    "updated_at": "2020-08-17T05:35:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n\ud83d\udc19 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/674665975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347344035",
    "pull_request_review_id": 318282512,
    "id": 347344035,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzM0NDAzNQ==",
    "diff_hunk": "@@ -1158,6 +1165,11 @@ class CWallet final : public WalletStorage, private interfaces::Chain::Notificat\n         m_last_block_processed_height = block_height;\n         m_last_block_processed = block_hash;\n     };\n+    /** Get if chain is initial block download */\n+    bool IsIBD() EXCLUSIVE_LOCKS_REQUIRED(cs_wallet)",
    "path": "src/wallet/wallet.h",
    "position": null,
    "original_position": 28,
    "commit_id": "20eb0dacdd6d698b02d5b151dd2ca7f9bfba4f8c",
    "original_commit_id": "a5a674857d0ae6d535e4725337968492c821c635",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "naming: perhaps `isInitialBlockDownload` if you want to follow the current convention",
    "created_at": "2019-11-18T12:05:57Z",
    "updated_at": "2020-06-04T00:50:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r347344035",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347344035"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r347344035"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347344035/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1169,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347344871",
    "pull_request_review_id": 318282512,
    "id": 347344871,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzM0NDg3MQ==",
    "diff_hunk": "@@ -1158,6 +1165,11 @@ class CWallet final : public WalletStorage, private interfaces::Chain::Notificat\n         m_last_block_processed_height = block_height;\n         m_last_block_processed = block_hash;\n     };\n+    /** Get if chain is initial block download */",
    "path": "src/wallet/wallet.h",
    "position": null,
    "original_position": 27,
    "commit_id": "20eb0dacdd6d698b02d5b151dd2ca7f9bfba4f8c",
    "original_commit_id": "a5a674857d0ae6d535e4725337968492c821c635",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "perhaps: \"Whether or not the chain is in initial block download.\"",
    "created_at": "2019-11-18T12:08:12Z",
    "updated_at": "2020-06-04T00:50:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r347344871",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347344871"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r347344871"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347344871/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1168,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347345851",
    "pull_request_review_id": 318282512,
    "id": 347345851,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzM0NTg1MQ==",
    "diff_hunk": "@@ -699,6 +699,13 @@ class CWallet final : public WalletStorage, private interfaces::Chain::Notificat\n      */\n     int m_last_block_processed_height GUARDED_BY(cs_wallet) = -1;\n \n+    /* Flag to indicate chain is still in initial block download. Set it to\n+     * false to let wallet generating new seed without being connected to a node.\n+     * Othersaid, a wallet evaluates chain being out of initial block download\n+     * until it's proven false.\n+     */\n+    bool m_is_ibd GUARDED_BY(cs_wallet) = false;",
    "path": "src/wallet/wallet.h",
    "position": 8,
    "original_position": 9,
    "commit_id": "20eb0dacdd6d698b02d5b151dd2ca7f9bfba4f8c",
    "original_commit_id": "a5a674857d0ae6d535e4725337968492c821c635",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "naming: perhaps `m_is_in_ibd`",
    "created_at": "2019-11-18T12:10:54Z",
    "updated_at": "2020-06-04T00:50:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r347345851",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347345851"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r347345851"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347345851/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 730,
    "original_line": 730,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347346608",
    "pull_request_review_id": 318282512,
    "id": 347346608,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzM0NjYwOA==",
    "diff_hunk": "@@ -184,7 +184,7 @@ class NotificationsHandlerImpl : public Handler, CValidationInterface\n     }\n     void UpdatedBlockTip(const CBlockIndex* index, const CBlockIndex* fork_index, bool is_ibd) override",
    "path": "src/interfaces/chain.cpp",
    "position": null,
    "original_position": 2,
    "commit_id": "20eb0dacdd6d698b02d5b151dd2ca7f9bfba4f8c",
    "original_commit_id": "a5a674857d0ae6d535e4725337968492c821c635",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "naming: perhaps `is_in_ibd`",
    "created_at": "2019-11-18T12:12:54Z",
    "updated_at": "2020-06-04T00:50:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r347346608",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347346608"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r347346608"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347346608/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 185,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347350877",
    "pull_request_review_id": 318282512,
    "id": 347350877,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzM1MDg3Nw==",
    "diff_hunk": "@@ -699,6 +699,13 @@ class CWallet final : public WalletStorage, private interfaces::Chain::Notificat\n      */\n     int m_last_block_processed_height GUARDED_BY(cs_wallet) = -1;\n \n+    /* Flag to indicate chain is still in initial block download. Set it to\n+     * false to let wallet generating new seed without being connected to a node.\n+     * Othersaid, a wallet evaluates chain being out of initial block download\n+     * until it's proven false.",
    "path": "src/wallet/wallet.h",
    "position": null,
    "original_position": 7,
    "commit_id": "20eb0dacdd6d698b02d5b151dd2ca7f9bfba4f8c",
    "original_commit_id": "a5a674857d0ae6d535e4725337968492c821c635",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks for adding this documentation. Suggestion (if I understand correctly that _othersaid_ means _autrement dit_, which translates to _in other words_):\r\n```diff\r\n-    /* Flag to indicate chain is still in initial block download. Set it to\r\n-     * false to let wallet generating new seed without being connected to a node.\r\n-     * Othersaid, a wallet evaluates chain being out of initial block download\r\n-     * until it's proven false.\r\n+    /* Flag to indicate whether or not the chain is still in initial block\r\n+     * download. Defaults to false to allow the wallet to generate new seeds\r\n+     * without being connected to a node. In other words, the wallet assumes the\r\n+     * chain is out of initial block download unless shown otherwise.\r\n```\r\n",
    "created_at": "2019-11-18T12:23:07Z",
    "updated_at": "2020-06-04T00:50:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r347350877",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347350877"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r347350877"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347350877/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 705,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347356227",
    "pull_request_review_id": 318282512,
    "id": 347356227,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzM1NjIyNw==",
    "diff_hunk": "@@ -3932,17 +3932,17 @@ UniValue sethdseed(const JSONRPCRequest& request)\n \n     LegacyScriptPubKeyMan& spk_man = EnsureLegacyScriptPubKeyMan(*pwallet);\n \n-    if (pwallet->chain().isInitialBlockDownload()) {",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "20eb0dacdd6d698b02d5b151dd2ca7f9bfba4f8c",
    "original_commit_id": "a5a674857d0ae6d535e4725337968492c821c635",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Perhaps make this change in the last commit where the other removals of `isInitialBlockDownload` take place? \r\n\r\nIIUC, the commit is misnamed and could better be called something like \"Remove Chain::isInitialBlockDownload`",
    "created_at": "2019-11-18T12:36:35Z",
    "updated_at": "2020-06-04T00:50:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r347356227",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347356227"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r347356227"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347356227/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3935,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347356956",
    "pull_request_review_id": 318282512,
    "id": 347356956,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzM1Njk1Ng==",
    "diff_hunk": "@@ -1948,6 +1951,8 @@ void CWallet::ResendWalletTransactions()\n         auto locked_chain = chain().lock();\n         LOCK(cs_wallet);\n \n+        if (m_is_ibd) return;",
    "path": "src/wallet/wallet.cpp",
    "position": 17,
    "original_position": 18,
    "commit_id": "20eb0dacdd6d698b02d5b151dd2ca7f9bfba4f8c",
    "original_commit_id": "a5a674857d0ae6d535e4725337968492c821c635",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Perhaps make this change in the commit \"Add m_is_ibd in CWallet` (or merge the two commits, IIUC)",
    "created_at": "2019-11-18T12:38:36Z",
    "updated_at": "2020-06-04T00:50:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r347356956",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347356956"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r347356956"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347356956/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2019,
    "original_line": 2019,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/418384945",
    "pull_request_review_id": 403988319,
    "id": 418384945,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODM4NDk0NQ==",
    "diff_hunk": "@@ -1105,6 +1105,9 @@ void CWallet::BlockDisconnected(const CBlock& block, int height)\n void CWallet::UpdatedBlockTip(bool is_ibd)\n {\n     m_best_block_time = GetTime();\n+    auto locked_chain = chain().lock();",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "20eb0dacdd6d698b02d5b151dd2ca7f9bfba4f8c",
    "original_commit_id": "dca4246dac0f4fa6369a71ee787b2bf1f6415c6d",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"Add m_is_ibd in CWallet\" (dca4246dac0f4fa6369a71ee787b2bf1f6415c6d)\r\n\r\nCalling chain lock not unnecessary here (but harmless)",
    "created_at": "2020-05-01T02:06:27Z",
    "updated_at": "2020-06-04T00:50:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r418384945",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/418384945"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r418384945"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/418384945/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1108,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/418389172",
    "pull_request_review_id": 403988319,
    "id": 418389172,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODM4OTE3Mg==",
    "diff_hunk": "@@ -191,9 +191,6 @@ class Chain\n     //! Check if the node is ready to broadcast transactions.\n     virtual bool isReadyToBroadcast() = 0;",
    "path": "src/interfaces/chain.h",
    "position": 2,
    "original_position": 2,
    "commit_id": "20eb0dacdd6d698b02d5b151dd2ca7f9bfba4f8c",
    "original_commit_id": "a5a674857d0ae6d535e4725337968492c821c635",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"Remove Chain::isReadyToBroadcast method\" (a5a674857d0ae6d535e4725337968492c821c635)\r\n\r\nImplementation and meaning of isReadyToBroadcast method is changing a lot, so I would rename it to something like \"isInitializing\" or \"isLoading\" and update the comment.\r\n\r\nAlso commit title could be changed to mention removing isInitialBlockDownload",
    "created_at": "2020-05-01T02:27:32Z",
    "updated_at": "2020-06-04T00:50:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r418389172",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/418389172"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r418389172"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/418389172/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 213,
    "original_start_line": 191,
    "start_side": "RIGHT",
    "line": 214,
    "original_line": 214,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/418390573",
    "pull_request_review_id": 403988319,
    "id": 418390573,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODM5MDU3Mw==",
    "diff_hunk": "@@ -1948,6 +1951,8 @@ void CWallet::ResendWalletTransactions()\n         auto locked_chain = chain().lock();\n         LOCK(cs_wallet);\n \n+        if (m_is_ibd) return;",
    "path": "src/wallet/wallet.cpp",
    "position": 17,
    "original_position": 18,
    "commit_id": "20eb0dacdd6d698b02d5b151dd2ca7f9bfba4f8c",
    "original_commit_id": "a5a674857d0ae6d535e4725337968492c821c635",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "re: https://github.com/bitcoin/bitcoin/pull/17484#discussion_r347356956\r\n\r\nIn commit \"Remove Chain::isReadyToBroadcast method\" (a5a674857d0ae6d535e4725337968492c821c635)\r\n\r\n> Perhaps make this change in the commit \"Add m_is_ibd in CWallet` (or merge the two commits, IIUC)\r\n\r\nChange does make sense (and is necessary) in this commit due to isReadyToBroadcast call a few lines up. But it would be good to add a comment here mentioning this is also needed to avoid spamming nodes with old transactions.",
    "created_at": "2020-05-01T02:34:18Z",
    "updated_at": "2020-06-04T00:50:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r418390573",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/418390573"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r418390573"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/418390573/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2019,
    "original_line": 2019,
    "side": "RIGHT",
    "in_reply_to_id": 347356956
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/418392128",
    "pull_request_review_id": 403995949,
    "id": 418392128,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODM5MjEyOA==",
    "diff_hunk": "@@ -3932,17 +3932,17 @@ UniValue sethdseed(const JSONRPCRequest& request)\n \n     LegacyScriptPubKeyMan& spk_man = EnsureLegacyScriptPubKeyMan(*pwallet);\n \n-    if (pwallet->chain().isInitialBlockDownload()) {\n-        throw JSONRPCError(RPC_CLIENT_IN_INITIAL_DOWNLOAD, \"Cannot set a new HD seed while still in Initial Block Download\");\n-    }\n-\n     if (pwallet->IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS)) {\n         throw JSONRPCError(RPC_WALLET_ERROR, \"Cannot set a HD seed to a wallet with private keys disabled\");\n     }\n \n     auto locked_chain = pwallet->chain().lock();\n     LOCK(pwallet->cs_wallet);\n \n+    if (pwallet->IsIBD()) {\n+        throw JSONRPCError(RPC_CLIENT_IN_INITIAL_DOWNLOAD, \"Cannot set a new HD seed while still in Initial Block Download\");",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 16,
    "commit_id": "20eb0dacdd6d698b02d5b151dd2ca7f9bfba4f8c",
    "original_commit_id": "dca4246dac0f4fa6369a71ee787b2bf1f6415c6d",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"Add m_is_ibd in CWallet\" (dca4246dac0f4fa6369a71ee787b2bf1f6415c6d)\r\n\r\nIs the commit message correct? It says there is a behavior change here, but there doesn't seem to be one if this is still raising an error.\r\n\r\n",
    "created_at": "2020-05-01T02:42:25Z",
    "updated_at": "2020-06-04T00:50:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r418392128",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/418392128"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r418392128"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/418392128/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3943,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439179496",
    "pull_request_review_id": 429428841,
    "id": 439179496,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE3OTQ5Ng==",
    "diff_hunk": "@@ -2014,6 +2016,8 @@ void CWallet::ResendWalletTransactions()\n     { // cs_wallet scope\n         LOCK(cs_wallet);\n \n+        if (m_is_ibd) return;",
    "path": "src/wallet/wallet.cpp",
    "position": 17,
    "original_position": 13,
    "commit_id": "20eb0dacdd6d698b02d5b151dd2ca7f9bfba4f8c",
    "original_commit_id": "797ec9dc2b4c1b4fbf2ac3377a3c47f406383248",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"[wallet] Add m_is_ibd in CWallet\" (797ec9dc2b4c1b4fbf2ac3377a3c47f406383248)\r\n\r\nI do think it would be helpful to have comment here saying this is skipped during ibd to avoid spam.\r\n\r\nAlso the comment above for isReadyToBroadcast() is incorrect after commit \"[interfaces] Remove Chain::isReadyToBroadcast\" (20eb0dacdd6d698b02d5b151dd2ca7f9bfba4f8c), and should be updated to not mention IBD since the IBD check isn't there anymore\r\n",
    "created_at": "2020-06-12T02:52:58Z",
    "updated_at": "2020-06-12T15:04:13Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r439179496",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439179496"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17484#discussion_r439179496"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17484"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439179496/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2019,
    "original_line": 2019,
    "side": "RIGHT"
  }
]