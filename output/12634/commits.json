[
  {
    "sha": "b9ef21dd727dde33f5bd3c33226b05d07eb12aac",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiOWVmMjFkZDcyN2RkZTMzZjViZDNjMzMyMjZiMDVkMDdlYjEyYWFj",
    "commit": {
      "author": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-05-21T02:15:12Z"
      },
      "committer": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-06-11T10:04:55Z"
      },
      "message": "mempool: Add explicit max_descendants\n\nTransactionWithinChainLimits would take a 'limit' and check it against ascendants and descendants. This is changed to take an explicit\nmax ancestors and max descendants value, and to test the corresponding value against its corresponding max.",
      "tree": {
        "sha": "2d69bd7ea53574c7b08b25c978c1a5e7e605b2dd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2d69bd7ea53574c7b08b25c978c1a5e7e605b2dd"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b9ef21dd727dde33f5bd3c33226b05d07eb12aac",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIyBAABCAAdFiEExCr/fGGz5EoUVM01V692LbM1MyIFAlseSUcACgkQV692LbM1\nMyJB5g/48+78HakQfK0ugvutpBm979qXFmDryYYWRyWUmy/NOeV4kcESbCxcIqaa\nethGjlgGGXtOKJWo5f3c+rTta2ZfPVbkDaSi/VGSRWlRxZ06l0CErqLZIa77j1nf\nXSFM/gfKgdHFu8VYgUTwztVB/CpD3TQrQZ6YTqx2ZpwAxS9R7/Tst/i3KwhUM3pS\nIHSzNgEsLGUQRxGvw6bemkDqI3rdTTq7oBnnkkN8RrUG8C27oRUThYlcc7EaODCH\nZL10iT1gWYK7zxrwXeEEW9g86PqYE34/lp3toBXmHHRfMre+SNUz1U1ffCEbINi6\n4QbDMKOw+7aONq6HDooFP0mpx9/AvmW1TVqna0/mZT7i+Lwe54NUQUCrci5TGXPp\nBwJh/JzYdrsonBQRMR79WjEFW09YWxubX8Ek3HdfKJWhVh9dgYte3hUubYxeCbua\nKr16mr49LmAtbdu65x38KW+XTGCFHDNQiNvw9asy/83MxYBkDjtR03FzOwnpOvzw\no74Net1QnGANTqQDxq8U6gTbgDHsRtdbCIJAL4G5Q6IuW8hFF+i0EnUZJKFALhmT\nDK5ZeXcIzt7pzNrRWnU9EFMyu+3ZNW50/3zr1hq/jQXxH6ug7nyhb6uRaycp+zqo\n5/pPmeyI9QplkHlFdYWREr8fp5TrKtDvVCuGOwczqoA3kajBYQ==\n=9M1Q\n-----END PGP SIGNATURE-----",
        "payload": "tree 2d69bd7ea53574c7b08b25c978c1a5e7e605b2dd\nparent 56f69360dc98bd68704f19646a84d045788d199e\nauthor Karl-Johan Alm <karljohan-alm@garage.co.jp> 1526868912 +0900\ncommitter Karl-Johan Alm <karljohan-alm@garage.co.jp> 1528711495 +0900\n\nmempool: Add explicit max_descendants\n\nTransactionWithinChainLimits would take a 'limit' and check it against ascendants and descendants. This is changed to take an explicit\nmax ancestors and max descendants value, and to test the corresponding value against its corresponding max.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b9ef21dd727dde33f5bd3c33226b05d07eb12aac",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b9ef21dd727dde33f5bd3c33226b05d07eb12aac",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b9ef21dd727dde33f5bd3c33226b05d07eb12aac/comments",
    "author": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "56f69360dc98bd68704f19646a84d045788d199e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/56f69360dc98bd68704f19646a84d045788d199e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/56f69360dc98bd68704f19646a84d045788d199e"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 8,
      "deletions": 6
    },
    "files": [
      {
        "sha": "d3f5c1bd2a120d4b2235e608994cf678934fd732",
        "filename": "src/txmempool.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b9ef21dd727dde33f5bd3c33226b05d07eb12aac/src/txmempool.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b9ef21dd727dde33f5bd3c33226b05d07eb12aac/src/txmempool.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txmempool.cpp?ref=b9ef21dd727dde33f5bd3c33226b05d07eb12aac",
        "patch": "@@ -1055,11 +1055,11 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n     }\n }\n \n-bool CTxMemPool::TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const {\n+bool CTxMemPool::TransactionWithinChainLimit(const uint256& txid, size_t ancestor_limit, size_t descendant_limit) const {\n     LOCK(cs);\n     auto it = mapTx.find(txid);\n-    return it == mapTx.end() || (it->GetCountWithAncestors() < chainLimit &&\n-       it->GetCountWithDescendants() < chainLimit);\n+    return it == mapTx.end() || (it->GetCountWithAncestors() < ancestor_limit &&\n+       it->GetCountWithDescendants() < descendant_limit);\n }\n \n SaltedTxidHasher::SaltedTxidHasher() : k0(GetRand(std::numeric_limits<uint64_t>::max())), k1(GetRand(std::numeric_limits<uint64_t>::max())) {}"
      },
      {
        "sha": "f6792b096861c199c100d29c3b72ed969e561aeb",
        "filename": "src/txmempool.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b9ef21dd727dde33f5bd3c33226b05d07eb12aac/src/txmempool.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b9ef21dd727dde33f5bd3c33226b05d07eb12aac/src/txmempool.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txmempool.h?ref=b9ef21dd727dde33f5bd3c33226b05d07eb12aac",
        "patch": "@@ -620,7 +620,7 @@ class CTxMemPool\n     int Expire(int64_t time);\n \n     /** Returns false if the transaction is in the mempool and not within the chain limit specified. */\n-    bool TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const;\n+    bool TransactionWithinChainLimit(const uint256& txid, size_t ancestor_limit, size_t descendant_limit) const;\n \n     unsigned long size()\n     {"
      },
      {
        "sha": "306f62819684d07870141521a9d41636e110c7f3",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b9ef21dd727dde33f5bd3c33226b05d07eb12aac/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b9ef21dd727dde33f5bd3c33226b05d07eb12aac/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=b9ef21dd727dde33f5bd3c33226b05d07eb12aac",
        "patch": "@@ -2469,7 +2469,7 @@ bool CWallet::OutputEligibleForSpending(const COutput& output, const CoinEligibi\n     if (output.nDepth < (output.tx->IsFromMe(ISMINE_ALL) ? eligibility_filter.conf_mine : eligibility_filter.conf_theirs))\n         return false;\n \n-    if (!mempool.TransactionWithinChainLimit(output.tx->GetHash(), eligibility_filter.max_ancestors))\n+    if (!mempool.TransactionWithinChainLimit(output.tx->GetHash(), eligibility_filter.max_ancestors, eligibility_filter.max_descendants))\n         return false;\n \n     return true;"
      },
      {
        "sha": "1ec2a9e7716e7ba068d69e830e64962f288d1796",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b9ef21dd727dde33f5bd3c33226b05d07eb12aac/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b9ef21dd727dde33f5bd3c33226b05d07eb12aac/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=b9ef21dd727dde33f5bd3c33226b05d07eb12aac",
        "patch": "@@ -662,8 +662,10 @@ struct CoinEligibilityFilter\n     const int conf_mine;\n     const int conf_theirs;\n     const uint64_t max_ancestors;\n+    const uint64_t max_descendants;\n \n-    CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors) {}\n+    CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors), max_descendants(max_ancestors) {}\n+    CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors, uint64_t max_descendants) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors), max_descendants(max_descendants) {}\n };\n \n class WalletRescanReserver; //forward declarations for ScanForWalletTransactions/RescanFromTime"
      }
    ]
  },
  {
    "sha": "46847d69d2c1cc908fd779daac7884e365955dbd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0Njg0N2Q2OWQyYzFjYzkwOGZkNzc5ZGFhYzc4ODRlMzY1OTU1ZGJk",
    "commit": {
      "author": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-05-21T03:37:44Z"
      },
      "committer": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-06-11T10:04:55Z"
      },
      "message": "mempool: Fix max descendants check\n\nThe chain limits check for max descendants would check the descendants of the transaction itself even though the description for -limitdescendantcount says 'any ancestor'. This commit corrects the descendant count check by finding the top parent transaction in the mempool and comparing against that.",
      "tree": {
        "sha": "03b2ab8a66fcf7a3f09f99d087faaed4ba0d7e75",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/03b2ab8a66fcf7a3f09f99d087faaed4ba0d7e75"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/46847d69d2c1cc908fd779daac7884e365955dbd",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEExCr/fGGz5EoUVM01V692LbM1MyIFAlseSUcACgkQV692LbM1\nMyIQoQ/9E0qX+zXRlmJfrhV+bxrGOZToFBQaIAcu8nKg45gwbF/cTA7y7yW/ckmY\nBA8k8ocqKEWUbK1/TqkFOJkx1MY/lcUPIwTKnYXqhUrhpKX0FiTodx1BZ8xxp1Ey\n8dMs+jis/G3bc3MJLIEXfYqlWY0Zzd/nwXWAL9deQzLLOgF9GCS5Ndv5bO9FRj1O\nSA4IdS51r2rfnUsaR784jC1DI80KbboIbRZU/7K71C+IfrgXHMxfKd+yDTT03Ish\njzVV9CkrbzBZFuntvFnasWpfipxPVgxRP4HNknuAHCOYciZIRIKg0pv6KZ6Drp+G\nqpB1dIGhpSgADuNoXOgC6fgrbAYJZnWpWOwA3xmlWQ+NfM+dxaCWxMfCJimw5+CZ\ns8XgA3iMcdNNxp95tVAhomp1iajqT2EHAWj9KQeLM70DUTdrAEV3svUSCmrmxvjR\nXd6N82XGPRd9hxWYcK7BkT/dMzTrJgqSMQJSUtcXXOVpABw71kg5GpTsCLisVt1s\nb/X43QEW+j5EqOVa35B4sgSagk4R5Z94LFICi6gZE163b0sCawLiWWAq8edqYini\n+FYhK09UmjOWbc8IumP135k0sye1g0A8o7ldFiQ9WBKncred4eKly/VmpFTPJ8I3\nrZJy6CuMYbkiGDp+PigRaQSFgsjBCiFNJ4FWGoaUSZPkixdCN8E=\n=Enyr\n-----END PGP SIGNATURE-----",
        "payload": "tree 03b2ab8a66fcf7a3f09f99d087faaed4ba0d7e75\nparent b9ef21dd727dde33f5bd3c33226b05d07eb12aac\nauthor Karl-Johan Alm <karljohan-alm@garage.co.jp> 1526873864 +0900\ncommitter Karl-Johan Alm <karljohan-alm@garage.co.jp> 1528711495 +0900\n\nmempool: Fix max descendants check\n\nThe chain limits check for max descendants would check the descendants of the transaction itself even though the description for -limitdescendantcount says 'any ancestor'. This commit corrects the descendant count check by finding the top parent transaction in the mempool and comparing against that.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/46847d69d2c1cc908fd779daac7884e365955dbd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/46847d69d2c1cc908fd779daac7884e365955dbd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/46847d69d2c1cc908fd779daac7884e365955dbd/comments",
    "author": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b9ef21dd727dde33f5bd3c33226b05d07eb12aac",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b9ef21dd727dde33f5bd3c33226b05d07eb12aac",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b9ef21dd727dde33f5bd3c33226b05d07eb12aac"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 13,
      "deletions": 1
    },
    "files": [
      {
        "sha": "52d223656b690205d9fdeb2725c24b894a43c3fd",
        "filename": "src/txmempool.cpp",
        "status": "modified",
        "additions": 12,
        "deletions": 1,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/46847d69d2c1cc908fd779daac7884e365955dbd/src/txmempool.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/46847d69d2c1cc908fd779daac7884e365955dbd/src/txmempool.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txmempool.cpp?ref=46847d69d2c1cc908fd779daac7884e365955dbd",
        "patch": "@@ -1055,11 +1055,22 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n     }\n }\n \n+uint64_t CTxMemPool::CalculateDescendantMaximum(txiter entry) const {\n+    // find top parent\n+    txiter top = entry;\n+    for (;;) {\n+        const setEntries& parents = GetMemPoolParents(top);\n+        if (parents.size() == 0) break;\n+        top = *parents.begin();\n+    }\n+    return top->GetCountWithDescendants();\n+}\n+\n bool CTxMemPool::TransactionWithinChainLimit(const uint256& txid, size_t ancestor_limit, size_t descendant_limit) const {\n     LOCK(cs);\n     auto it = mapTx.find(txid);\n     return it == mapTx.end() || (it->GetCountWithAncestors() < ancestor_limit &&\n-       it->GetCountWithDescendants() < descendant_limit);\n+                                 CalculateDescendantMaximum(it) < descendant_limit);\n }\n \n SaltedTxidHasher::SaltedTxidHasher() : k0(GetRand(std::numeric_limits<uint64_t>::max())), k1(GetRand(std::numeric_limits<uint64_t>::max())) {}"
      },
      {
        "sha": "b60c2c50b113564c3957db29f88502d2cf22c75e",
        "filename": "src/txmempool.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/46847d69d2c1cc908fd779daac7884e365955dbd/src/txmempool.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/46847d69d2c1cc908fd779daac7884e365955dbd/src/txmempool.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txmempool.h?ref=46847d69d2c1cc908fd779daac7884e365955dbd",
        "patch": "@@ -498,6 +498,7 @@ class CTxMemPool\n \n     const setEntries & GetMemPoolParents(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n     const setEntries & GetMemPoolChildren(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n+    uint64_t CalculateDescendantMaximum(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n private:\n     typedef std::map<txiter, setEntries, CompareIteratorByHash> cacheMap;\n "
      }
    ]
  },
  {
    "sha": "475a385a80198a46a6d99846f99b968f04e9b470",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0NzVhMzg1YTgwMTk4YTQ2YTZkOTk4NDZmOTliOTY4ZjA0ZTliNDcw",
    "commit": {
      "author": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-03-08T17:15:42Z"
      },
      "committer": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-06-11T10:04:55Z"
      },
      "message": "Add GetTransactionAncestry to CTxMemPool for general purpose chain limit checking",
      "tree": {
        "sha": "90b792ecd5f336c4f7c35051f6d90060348ea004",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/90b792ecd5f336c4f7c35051f6d90060348ea004"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/475a385a80198a46a6d99846f99b968f04e9b470",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEExCr/fGGz5EoUVM01V692LbM1MyIFAlseSUcACgkQV692LbM1\nMyKGqxAAmwh8hYUodE35/GROP696n7YhvupM4LQK7YSN6yrP2bgj/NoCOAE2VabK\nrdAmKaThOSut4O7UmZUJocFX8FWehMrgcfJUW3WRsAeXtk6MZ1qo0N8tnCbANKac\nxFoVpVvOCUAJNWfORA1yOYDCyrMFKPWhks0YYpEmVLlUaWxqSzXIXcTJrjs3pbCU\nQLxvGUswkEwSq/exDEZEnYYgt6d/DHpUlan5eQCNA85xBm4siJsxar9BuTABZ0gZ\nJ9aNAH3QdgWla+enwPcpb9HjZdXpNvXb3NHHZWJa/E/4QZR/8p70oRHiUbzSnKeM\naffVG7CTNZjokwdREJkWufU89DtTB+HSsUpPRPcmsZQXD6a6thI/lPOsWe0zdJzz\na45hJaLhMKTJ50+5aRwX5LGtIZEnjhC5g7OijfwaZ1/0zkUW8TJmllB3lK7QNbkx\nbIUFjMuoASyJ/L3I66EC3FjftiJ6gR7ln+f8O4u7d4l6Kb8lzNCPE2lBDoZwLTg4\nF/2CwkEJam9NztdLDk182OXznrxvKIfOJ18mErLfYEI2HLgIEA3LHF2JiHkqbYZ4\ne/nf1qD6rRLHVJF/CrCZ58K5o0InUz4AJF+VhiMcya6XrbgZg+9tuDzVy25qoMpM\nqBjqIryOP9Rrx82egY7tpF5jneiHFew/DWjOhuSXOdgL5ut43/Q=\n=EKmW\n-----END PGP SIGNATURE-----",
        "payload": "tree 90b792ecd5f336c4f7c35051f6d90060348ea004\nparent 46847d69d2c1cc908fd779daac7884e365955dbd\nauthor Karl-Johan Alm <karljohan-alm@garage.co.jp> 1520529342 -0500\ncommitter Karl-Johan Alm <karljohan-alm@garage.co.jp> 1528711495 +0900\n\nAdd GetTransactionAncestry to CTxMemPool for general purpose chain limit checking\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/475a385a80198a46a6d99846f99b968f04e9b470",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/475a385a80198a46a6d99846f99b968f04e9b470",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/475a385a80198a46a6d99846f99b968f04e9b470/comments",
    "author": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "46847d69d2c1cc908fd779daac7884e365955dbd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/46847d69d2c1cc908fd779daac7884e365955dbd",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/46847d69d2c1cc908fd779daac7884e365955dbd"
      }
    ],
    "stats": {
      "total": 16,
      "additions": 16,
      "deletions": 0
    },
    "files": [
      {
        "sha": "4f740b7c0a4b0fd0972105345ae7e76771681fb6",
        "filename": "src/txmempool.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/475a385a80198a46a6d99846f99b968f04e9b470/src/txmempool.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/475a385a80198a46a6d99846f99b968f04e9b470/src/txmempool.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txmempool.cpp?ref=475a385a80198a46a6d99846f99b968f04e9b470",
        "patch": "@@ -1066,6 +1066,16 @@ uint64_t CTxMemPool::CalculateDescendantMaximum(txiter entry) const {\n     return top->GetCountWithDescendants();\n }\n \n+void CTxMemPool::GetTransactionAncestry(const uint256& txid, size_t& ancestors, size_t& descendants) const {\n+    LOCK(cs);\n+    auto it = mapTx.find(txid);\n+    ancestors = descendants = 0;\n+    if (it != mapTx.end()) {\n+        ancestors = it->GetCountWithAncestors();\n+        descendants = CalculateDescendantMaximum(it);\n+    }\n+}\n+\n bool CTxMemPool::TransactionWithinChainLimit(const uint256& txid, size_t ancestor_limit, size_t descendant_limit) const {\n     LOCK(cs);\n     auto it = mapTx.find(txid);"
      },
      {
        "sha": "d32c29a18f3a83fc7d94e156b09db952b57b5712",
        "filename": "src/txmempool.h",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/475a385a80198a46a6d99846f99b968f04e9b470/src/txmempool.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/475a385a80198a46a6d99846f99b968f04e9b470/src/txmempool.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txmempool.h?ref=475a385a80198a46a6d99846f99b968f04e9b470",
        "patch": "@@ -620,6 +620,12 @@ class CTxMemPool\n     /** Expire all transaction (and their dependencies) in the mempool older than time. Return the number of removed transactions. */\n     int Expire(int64_t time);\n \n+    /**\n+     * Calculate the ancestor and descendant count for the given transaction.\n+     * The counts include the transaction itself.\n+     */\n+    void GetTransactionAncestry(const uint256& txid, size_t& ancestors, size_t& descendants) const;\n+\n     /** Returns false if the transaction is in the mempool and not within the chain limit specified. */\n     bool TransactionWithinChainLimit(const uint256& txid, size_t ancestor_limit, size_t descendant_limit) const;\n "
      }
    ]
  },
  {
    "sha": "47847515473b054929af0c8de3d54b6672500cab",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0Nzg0NzUxNTQ3M2IwNTQ5MjlhZjBjOGRlM2Q1NGI2NjcyNTAwY2Fi",
    "commit": {
      "author": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-03-08T17:16:16Z"
      },
      "committer": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-06-11T10:04:55Z"
      },
      "message": "Switch to GetTransactionAncestry() in OutputEligibleForSpending",
      "tree": {
        "sha": "17029c41d7022675c4024d0c35ff22d6bb5f5991",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/17029c41d7022675c4024d0c35ff22d6bb5f5991"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/47847515473b054929af0c8de3d54b6672500cab",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEExCr/fGGz5EoUVM01V692LbM1MyIFAlseSUcACgkQV692LbM1\nMyLEWQ/9Hx9ArXS3ChJP1zCQPDhceE/CP6r7Kfxfv6G80EboIlCXIu4v3ip6XFSQ\npcd3oA1qNjGwOm0A4Wdfg5/KJDUIgdFmgxYUezAupq5BDILiJAY5Ens+dNRixmiw\nPwjsQs/YMMqquXklqplmB4ZfK36FHW/yAG2r/G4fVLyLtOs1ijxiarD4m3sEDBbl\nlWRdmXtZdO2FL9MBT0BqiG7MXUvgh3N7K9oDTLvPaj+2m/s0EHlD06xGp6y0wfJO\nTli+egrl3AWSqST8aSA4t6FfQE6CFlba64la/lliLQpmsF5Ctg8fZs+znJ66aNg4\np66aCRf6qoYlkrp/r75Wk+rMcD6YYoE6ZnAi640h9pmFCbhjOoymmXNwUPXc4vLj\nPvQ335lA1IzKyNnBl7t2xv2/6c4o2KT4Ss1RtecGfuYoeZcJFqABtVTnB3rsjuUU\nmA2MBDgOvUYGL55ihp5H+ayXkAYbdsi9PoTtCXX87RnWUsWcp9KriyJpQjhh46Ns\nxTlAWsaDsKHbeUjBIq5Hk62A0lyNA/p8avp7Y/9e+fVJvcNyNuCIFOzoMbFt/ZO9\ngqQdK478Us7ViEvDgOi8/XwmekZiU/q47Fm3jiejpTInTDU/PRrkCClI98vstAyf\nI8POMF83Rv5KWkeSq2X2KgSW90i3fQ3WqoH3cG3quJqvlIBI318=\n=jZzP\n-----END PGP SIGNATURE-----",
        "payload": "tree 17029c41d7022675c4024d0c35ff22d6bb5f5991\nparent 475a385a80198a46a6d99846f99b968f04e9b470\nauthor Karl-Johan Alm <karljohan-alm@garage.co.jp> 1520529376 -0500\ncommitter Karl-Johan Alm <karljohan-alm@garage.co.jp> 1528711495 +0900\n\nSwitch to GetTransactionAncestry() in OutputEligibleForSpending\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/47847515473b054929af0c8de3d54b6672500cab",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/47847515473b054929af0c8de3d54b6672500cab",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/47847515473b054929af0c8de3d54b6672500cab/comments",
    "author": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "475a385a80198a46a6d99846f99b968f04e9b470",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/475a385a80198a46a6d99846f99b968f04e9b470",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/475a385a80198a46a6d99846f99b968f04e9b470"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 4,
      "deletions": 1
    },
    "files": [
      {
        "sha": "eed17c2800ffc67ba31cba2eae230bd55ad031f4",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/47847515473b054929af0c8de3d54b6672500cab/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/47847515473b054929af0c8de3d54b6672500cab/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=47847515473b054929af0c8de3d54b6672500cab",
        "patch": "@@ -2469,8 +2469,11 @@ bool CWallet::OutputEligibleForSpending(const COutput& output, const CoinEligibi\n     if (output.nDepth < (output.tx->IsFromMe(ISMINE_ALL) ? eligibility_filter.conf_mine : eligibility_filter.conf_theirs))\n         return false;\n \n-    if (!mempool.TransactionWithinChainLimit(output.tx->GetHash(), eligibility_filter.max_ancestors, eligibility_filter.max_descendants))\n+    int64_t ancestors, descendants;\n+    mempool.GetTransactionAncestry(output.tx->GetHash(), ancestors, descendants);\n+    if (ancestors >= eligibility_filter.max_ancestors || descendants >= eligibility_filter.max_descendants) {\n         return false;\n+    }\n \n     return true;\n }"
      }
    ]
  },
  {
    "sha": "322b12ac4e0a8c892e81a760ff7225619248b74f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozMjJiMTJhYzRlMGE4Yzg5MmU4MWE3NjBmZjcyMjU2MTkyNDhiNzRm",
    "commit": {
      "author": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-03-07T15:45:24Z"
      },
      "committer": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-06-11T10:04:56Z"
      },
      "message": "Remove deprecated TransactionWithinChainLimit",
      "tree": {
        "sha": "01ed3d8ae153a7c010e868fb8c522de2ba406d4f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/01ed3d8ae153a7c010e868fb8c522de2ba406d4f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/322b12ac4e0a8c892e81a760ff7225619248b74f",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEExCr/fGGz5EoUVM01V692LbM1MyIFAlseSUgACgkQV692LbM1\nMyJCFRAAkhMz5cy8G/MMbMDoDS4KMPPU5G7oFkB0wLOrre78ZIzxDnaWdoGVQpAI\nQojxNFfWQ/67JFQjkWaMOOwSK9bLdkiYXcKobyD9rQ71La4AUUeOW1AAEgMAFzLR\nGzOFzC7BO0toUV1TVgFau61oWrI/gwwaiZGIZlyXwBAHfSZB1uHMIBprsB+v9sx/\nS4+rib9M/aUl9aAnaXxTi8Wog1GhmNhgk1oEfQawWc+8mprkSyZhIQ1tNmQH+qzb\nsmSfcaDR2RkQstIgAuXH7fCcQ705hzxUqzO0S14CsNmQ6+cpZM74CLx0p28jNf8K\n0L2ZhKZCBVm2DqfKLDaUOh/jB12sjycoxpTF7o0qHsupgdJFjGHoBKITsqIe1tA6\neubH7zQMC0EyIHZaa3lhsTGRlYUW/8YHuAzSeEd39HjNNXg4SM6mgPDp+XQ2TH2L\nnmD5Ry372pvvaHB8irL2ljdYc/m8/C5p4d3DiCmiSBynkxIe3n6nt+Q8I3ll+nF8\ntxfrtLnTmsTodO7w9JSluUqJAPgJK2NHdt1912GsVTQhhtCQO4gpSQXMMjimieN6\n/Q+q3tffJEdaptIc+7+W7acvH9XjO0ip1czV49AYrq40aFE3RT+L/1izdNfYmyWo\nIq1hCgSuvLAnuVV4jhi5m4edtAOIlgWiMATx5yHk0/2ggSjLmJE=\n=sMhL\n-----END PGP SIGNATURE-----",
        "payload": "tree 01ed3d8ae153a7c010e868fb8c522de2ba406d4f\nparent 47847515473b054929af0c8de3d54b6672500cab\nauthor Karl-Johan Alm <karljohan-alm@garage.co.jp> 1520437524 -0500\ncommitter Karl-Johan Alm <karljohan-alm@garage.co.jp> 1528711496 +0900\n\nRemove deprecated TransactionWithinChainLimit\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/322b12ac4e0a8c892e81a760ff7225619248b74f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/322b12ac4e0a8c892e81a760ff7225619248b74f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/322b12ac4e0a8c892e81a760ff7225619248b74f/comments",
    "author": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "47847515473b054929af0c8de3d54b6672500cab",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/47847515473b054929af0c8de3d54b6672500cab",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/47847515473b054929af0c8de3d54b6672500cab"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 0,
      "deletions": 10
    },
    "files": [
      {
        "sha": "9df9b0e45acdfd23b8402b708f1a2810ff35df0b",
        "filename": "src/txmempool.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 7,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/322b12ac4e0a8c892e81a760ff7225619248b74f/src/txmempool.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/322b12ac4e0a8c892e81a760ff7225619248b74f/src/txmempool.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txmempool.cpp?ref=322b12ac4e0a8c892e81a760ff7225619248b74f",
        "patch": "@@ -1076,11 +1076,4 @@ void CTxMemPool::GetTransactionAncestry(const uint256& txid, size_t& ancestors,\n     }\n }\n \n-bool CTxMemPool::TransactionWithinChainLimit(const uint256& txid, size_t ancestor_limit, size_t descendant_limit) const {\n-    LOCK(cs);\n-    auto it = mapTx.find(txid);\n-    return it == mapTx.end() || (it->GetCountWithAncestors() < ancestor_limit &&\n-                                 CalculateDescendantMaximum(it) < descendant_limit);\n-}\n-\n SaltedTxidHasher::SaltedTxidHasher() : k0(GetRand(std::numeric_limits<uint64_t>::max())), k1(GetRand(std::numeric_limits<uint64_t>::max())) {}"
      },
      {
        "sha": "bda812b42fb2d68fc5892e736edacd8ae15cbe0b",
        "filename": "src/txmempool.h",
        "status": "modified",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/322b12ac4e0a8c892e81a760ff7225619248b74f/src/txmempool.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/322b12ac4e0a8c892e81a760ff7225619248b74f/src/txmempool.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txmempool.h?ref=322b12ac4e0a8c892e81a760ff7225619248b74f",
        "patch": "@@ -626,9 +626,6 @@ class CTxMemPool\n      */\n     void GetTransactionAncestry(const uint256& txid, size_t& ancestors, size_t& descendants) const;\n \n-    /** Returns false if the transaction is in the mempool and not within the chain limit specified. */\n-    bool TransactionWithinChainLimit(const uint256& txid, size_t ancestor_limit, size_t descendant_limit) const;\n-\n     unsigned long size()\n     {\n         LOCK(cs);"
      }
    ]
  },
  {
    "sha": "6888195b062c8c58dd776fd10b44b25554eb1f15",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ODg4MTk1YjA2MmM4YzU4ZGQ3NzZmZDEwYjQ0YjI1NTU0ZWIxZjE1",
    "commit": {
      "author": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-05-22T23:41:36Z"
      },
      "committer": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-06-11T10:04:56Z"
      },
      "message": "wallet: Strictly greater than for ancestor caps",
      "tree": {
        "sha": "fc5352aa016867cc9a61db6f43a41ce4313d8ebd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fc5352aa016867cc9a61db6f43a41ce4313d8ebd"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6888195b062c8c58dd776fd10b44b25554eb1f15",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEExCr/fGGz5EoUVM01V692LbM1MyIFAlseSUgACgkQV692LbM1\nMyIuIhAAij8m4C52eIn/WYl5c5WvRC5q3/rXxv5WTLCmf+iXFN9BWxqzXjW30q9c\n4TKgJPtfXL5aGMlTNJq772GxTsMMgyIFPXpJHOhhrsFoKse30njwqdZ8NYnIz315\n6JMjFnBQUfzMwyhkjOTOcCHCwJ9GLAoW8R6rYCGkvwRxNJ0lpk+IhCZt1B92A+4U\nvEmIMWId4s35kKJFlt5a3FXF/MnOud+4BJs0kV5q6RQdk3m17tZsgjvFmlAWwk9V\nd/XN9gcJpfijfbxIuKs+KPFgfiLE48VC4y08+0hvp2DhlE/uu7oheQUiIMXWsTIx\ngvg9BM50VQjS4APreOROGrtNu3BCtjbzY/xeshEh3BMWvhEXeJzmBBEkGpbWR4ZX\n6JB/mrv5RkWt6S9tIYYYYQyiYwCxJS29+CdT5N5k6DTzl6TzQVVv/2YVZNu4FrtG\nApyYu+/ntQO/My2FUG/Gl5mlWIqU3+ux/p64iwC8JTCPAGxnPla6M720cz2xCwJx\nvNx+mA9xDfAKiw/Iq2Wj2sTugZs+Ajk7yxp+tBugsmn6h0VYxO5RbB6dYfOWrkTq\n7qj0QXdHMKkRqBYUSCWGDMgd1PuvbN7ZIwvC0QwpmS3AyhWseEIbt7/VjFMRW9yv\nXLiUtXRk4MmmdCUwxbh6SAYnMKXTA8qExNnPCCDDN/gwhI1zRZE=\n=SH4D\n-----END PGP SIGNATURE-----",
        "payload": "tree fc5352aa016867cc9a61db6f43a41ce4313d8ebd\nparent 322b12ac4e0a8c892e81a760ff7225619248b74f\nauthor Karl-Johan Alm <karljohan-alm@garage.co.jp> 1527032496 +0900\ncommitter Karl-Johan Alm <karljohan-alm@garage.co.jp> 1528711496 +0900\n\nwallet: Strictly greater than for ancestor caps\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6888195b062c8c58dd776fd10b44b25554eb1f15",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6888195b062c8c58dd776fd10b44b25554eb1f15",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6888195b062c8c58dd776fd10b44b25554eb1f15/comments",
    "author": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "322b12ac4e0a8c892e81a760ff7225619248b74f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/322b12ac4e0a8c892e81a760ff7225619248b74f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/322b12ac4e0a8c892e81a760ff7225619248b74f"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 4,
      "deletions": 4
    },
    "files": [
      {
        "sha": "67e7253326895460d29b01d93cc2484ae5848940",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6888195b062c8c58dd776fd10b44b25554eb1f15/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6888195b062c8c58dd776fd10b44b25554eb1f15/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=6888195b062c8c58dd776fd10b44b25554eb1f15",
        "patch": "@@ -2469,9 +2469,9 @@ bool CWallet::OutputEligibleForSpending(const COutput& output, const CoinEligibi\n     if (output.nDepth < (output.tx->IsFromMe(ISMINE_ALL) ? eligibility_filter.conf_mine : eligibility_filter.conf_theirs))\n         return false;\n \n-    int64_t ancestors, descendants;\n+    size_t ancestors, descendants;\n     mempool.GetTransactionAncestry(output.tx->GetHash(), ancestors, descendants);\n-    if (ancestors >= eligibility_filter.max_ancestors || descendants >= eligibility_filter.max_descendants) {\n+    if (ancestors > eligibility_filter.max_ancestors || descendants > eligibility_filter.max_descendants) {\n         return false;\n     }\n \n@@ -2585,7 +2585,7 @@ bool CWallet::SelectCoins(const std::vector<COutput>& vAvailableCoins, const CAm\n             ++it;\n     }\n \n-    size_t nMaxChainLength = std::min(gArgs.GetArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT), gArgs.GetArg(\"-limitdescendantcount\", DEFAULT_DESCENDANT_LIMIT));\n+    size_t nMaxChainLength = (size_t)std::max<int64_t>(1, std::min(gArgs.GetArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT), gArgs.GetArg(\"-limitdescendantcount\", DEFAULT_DESCENDANT_LIMIT)));\n     bool fRejectLongChains = gArgs.GetBoolArg(\"-walletrejectlongchains\", DEFAULT_WALLET_REJECT_LONG_CHAINS);\n \n     bool res = nTargetValue <= nValueFromPresetInputs ||\n@@ -2594,7 +2594,7 @@ bool CWallet::SelectCoins(const std::vector<COutput>& vAvailableCoins, const CAm\n         (m_spend_zero_conf_change && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(0, 1, 2), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) ||\n         (m_spend_zero_conf_change && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(0, 1, std::min((size_t)4, nMaxChainLength/3)), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) ||\n         (m_spend_zero_conf_change && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(0, 1, nMaxChainLength/2), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) ||\n-        (m_spend_zero_conf_change && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(0, 1, nMaxChainLength), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) ||\n+        (m_spend_zero_conf_change && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(0, 1, nMaxChainLength-1), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) ||\n         (m_spend_zero_conf_change && !fRejectLongChains && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(0, 1, std::numeric_limits<uint64_t>::max()), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used));\n \n     // because SelectCoinsMinConf clears the setCoinsRet, we now add the possible inputs to the coinset"
      }
    ]
  },
  {
    "sha": "6d3568371eb2559d65a3e2334252d36a262319e8",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ZDM1NjgzNzFlYjI1NTlkNjVhM2UyMzM0MjUyZDM2YTI2MjMxOWU4",
    "commit": {
      "author": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-05-22T02:13:34Z"
      },
      "committer": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-06-11T10:04:56Z"
      },
      "message": "wallet: Switch to using ancestor/descendant limits\n\nInstead of combining the -limitancestorcount and -limitdescendantcount into a nMaxChainLength, this commit uses each one separately in the coin eligibility filters.",
      "tree": {
        "sha": "01915bb11741d0624fddaafc7fc21f2140db7a86",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/01915bb11741d0624fddaafc7fc21f2140db7a86"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6d3568371eb2559d65a3e2334252d36a262319e8",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEExCr/fGGz5EoUVM01V692LbM1MyIFAlseSUgACgkQV692LbM1\nMyJ6rg//cBZQ3Z/5WkyeuH/9lmJSaKcbB0hGxKijhGVfJx5uoRhoilA//AogpzlQ\nKcBa6RqZiIRFH6YR5WFWUbSmMgfRezmZuX41LNPx2ZL/s4lKbwHgKEnFnrJYwwDJ\nwZBmlIgSeip2yUw5dt6aNQKlmP0UUqYCHgT4v1ViZNVru1NvjIoGZrMy95jZLnAD\ntQHvN5y4UhPc08HT0amKi4HOQCcyFM9mi6qN0FdYIhPnAqcvNOEF2kmm2GDGNSRh\n5cYO+9Ovul4Q/KRabs7K8LnMlh3zqkBaHHbQpJctcoraQBHuUuOQY+r3pEN4Ufux\ndaJvczgfh4cdrMUcGX2bqqbc0y+gfLnEBMa1FO0qiXMIBxZ0s7wxsXNKPXbVSD9s\nP2wij1gQcf85VE4lB/kjoX/z+n2QV9PLTz2e8QEl+obEYWLtQNHf1RUWOIZqbvGQ\nBbQTPxvWKoSJpzLeACq3rknEEGQs06RPjiL7cDKBhoddfKDrd7yCDdjLkCmEra7H\nVmDxk6uqjK2r10H5HvH1ejBnua8wCV4PQ/mEoavgzP8Z3ibRoxcHJNvXbBQhDGVx\nTxmUsht0cS9ZtEuxHlFw9By98mbHiCLajZ1oHfOckYvGj/Oz0m6fCyBFhSqa/jbX\nkhE+t041wj7SZUFDJY5yoAG5D68jtkzqeKsOIFoeFQdAVExsBr0=\n=5cWN\n-----END PGP SIGNATURE-----",
        "payload": "tree 01915bb11741d0624fddaafc7fc21f2140db7a86\nparent 6888195b062c8c58dd776fd10b44b25554eb1f15\nauthor Karl-Johan Alm <karljohan-alm@garage.co.jp> 1526955214 +0900\ncommitter Karl-Johan Alm <karljohan-alm@garage.co.jp> 1528711496 +0900\n\nwallet: Switch to using ancestor/descendant limits\n\nInstead of combining the -limitancestorcount and -limitdescendantcount into a nMaxChainLength, this commit uses each one separately in the coin eligibility filters.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6d3568371eb2559d65a3e2334252d36a262319e8",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6d3568371eb2559d65a3e2334252d36a262319e8",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6d3568371eb2559d65a3e2334252d36a262319e8/comments",
    "author": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6888195b062c8c58dd776fd10b44b25554eb1f15",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6888195b062c8c58dd776fd10b44b25554eb1f15",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6888195b062c8c58dd776fd10b44b25554eb1f15"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 5,
      "deletions": 4
    },
    "files": [
      {
        "sha": "78cacc02066412807d7e910e6a310549df368978",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 4,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6d3568371eb2559d65a3e2334252d36a262319e8/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6d3568371eb2559d65a3e2334252d36a262319e8/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=6d3568371eb2559d65a3e2334252d36a262319e8",
        "patch": "@@ -2585,16 +2585,17 @@ bool CWallet::SelectCoins(const std::vector<COutput>& vAvailableCoins, const CAm\n             ++it;\n     }\n \n-    size_t nMaxChainLength = (size_t)std::max<int64_t>(1, std::min(gArgs.GetArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT), gArgs.GetArg(\"-limitdescendantcount\", DEFAULT_DESCENDANT_LIMIT)));\n+    size_t max_ancestors = (size_t)std::max<int64_t>(1, gArgs.GetArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT));\n+    size_t max_descendants = (size_t)std::max<int64_t>(1, gArgs.GetArg(\"-limitdescendantcount\", DEFAULT_DESCENDANT_LIMIT));\n     bool fRejectLongChains = gArgs.GetBoolArg(\"-walletrejectlongchains\", DEFAULT_WALLET_REJECT_LONG_CHAINS);\n \n     bool res = nTargetValue <= nValueFromPresetInputs ||\n         SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(1, 6, 0), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used) ||\n         SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(1, 1, 0), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used) ||\n         (m_spend_zero_conf_change && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(0, 1, 2), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) ||\n-        (m_spend_zero_conf_change && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(0, 1, std::min((size_t)4, nMaxChainLength/3)), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) ||\n-        (m_spend_zero_conf_change && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(0, 1, nMaxChainLength/2), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) ||\n-        (m_spend_zero_conf_change && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(0, 1, nMaxChainLength-1), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) ||\n+        (m_spend_zero_conf_change && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(0, 1, std::min((size_t)4, max_ancestors/3), std::min((size_t)4, max_descendants/3)), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) ||\n+        (m_spend_zero_conf_change && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(0, 1, max_ancestors/2, max_descendants/2), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) ||\n+        (m_spend_zero_conf_change && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(0, 1, max_ancestors-1, max_descendants-1), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) ||\n         (m_spend_zero_conf_change && !fRejectLongChains && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, CoinEligibilityFilter(0, 1, std::numeric_limits<uint64_t>::max()), vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used));\n \n     // because SelectCoinsMinConf clears the setCoinsRet, we now add the possible inputs to the coinset"
      }
    ]
  },
  {
    "sha": "a08d76bcfee6f563a268933357931abe32060668",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphMDhkNzZiY2ZlZTZmNTYzYTI2ODkzMzM1NzkzMWFiZTMyMDYwNjY4",
    "commit": {
      "author": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-05-23T00:13:43Z"
      },
      "committer": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-06-11T10:09:44Z"
      },
      "message": "mempool: Calculate descendant maximum thoroughly",
      "tree": {
        "sha": "15034792750cfd2d8630d17b99f2c28748acb330",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/15034792750cfd2d8630d17b99f2c28748acb330"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a08d76bcfee6f563a268933357931abe32060668",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEExCr/fGGz5EoUVM01V692LbM1MyIFAlseSmgACgkQV692LbM1\nMyIWxQ//eABED6e8lU4rNut7+ZTIZ4D0wCU+fUqt4Bk8snTkUVUePUiLs6Mh/6Le\nmWmi8GJPKFjtbC2TXzUD1mlwu52kqUwQFJIDY1ohEFjmwp4sqraLlXryleLuq5ka\nrR2QJzIcYMFKepUX+dkJWBzFbpqmVhWlOboTjRnRH7+4HOBOnjbcj5Ia4urAi4gj\n9jKoHIuy8c3kcZ48lwBdchXPe/Xp7ujIbPI0Lh8FGDSkMUSH/sj/UZR4SiNK4Uqs\n9Gu3fHKnyoG5YrMuTM9B10Ts8Puy23iidPcgszU5tlXbnw4OXB+DM73tiF8AwFqJ\nMXKZ8aqMi9O0vaXC55IiRhz6Bj9UOAYnjxPGOtbW/J+Jvkh+G8ZvsM8IGMm/dWZN\nRxWYdl5xJxVB+0JYHSLohThz+h1BUMjV4AxG4mQB0+dDYwrwBLT2ZaKBuUY2N9ow\n9ISrsDP0Vk4QrzeFFmt3SD5K4uqkHGGrj42yLmRzxBQnzPu3VWkaIR3ZcHcRWogC\nQvl5aZA/r37XbHu/0riwdmNHYN6hBfs0pb9PfbIf/xuWB23CP5cHSTZZfikmepUa\nCdT0I/TJX3NP6mdmvWkym9nMO7keHxH3VVFZy28JafyGkzZiL1wuIwUyb9IPnobe\nMsqxeSs34ra7cr6ar32bXwPcHu/iCe+qgf/MRne8Vk7fCQtMitE=\n=Wzfm\n-----END PGP SIGNATURE-----",
        "payload": "tree 15034792750cfd2d8630d17b99f2c28748acb330\nparent 6d3568371eb2559d65a3e2334252d36a262319e8\nauthor Karl-Johan Alm <karljohan-alm@garage.co.jp> 1527034423 +0900\ncommitter Karl-Johan Alm <karljohan-alm@garage.co.jp> 1528711784 +0900\n\nmempool: Calculate descendant maximum thoroughly\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a08d76bcfee6f563a268933357931abe32060668",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a08d76bcfee6f563a268933357931abe32060668",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a08d76bcfee6f563a268933357931abe32060668/comments",
    "author": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6d3568371eb2559d65a3e2334252d36a262319e8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6d3568371eb2559d65a3e2334252d36a262319e8",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6d3568371eb2559d65a3e2334252d36a262319e8"
      }
    ],
    "stats": {
      "total": 25,
      "additions": 18,
      "deletions": 7
    },
    "files": [
      {
        "sha": "c1145d964353b571da5e424c095e2bf4e09ded0f",
        "filename": "src/txmempool.cpp",
        "status": "modified",
        "additions": 18,
        "deletions": 7,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a08d76bcfee6f563a268933357931abe32060668/src/txmempool.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a08d76bcfee6f563a268933357931abe32060668/src/txmempool.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txmempool.cpp?ref=a08d76bcfee6f563a268933357931abe32060668",
        "patch": "@@ -1056,14 +1056,25 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n }\n \n uint64_t CTxMemPool::CalculateDescendantMaximum(txiter entry) const {\n-    // find top parent\n-    txiter top = entry;\n-    for (;;) {\n-        const setEntries& parents = GetMemPoolParents(top);\n-        if (parents.size() == 0) break;\n-        top = *parents.begin();\n+    // find parent with highest descendant count\n+    std::vector<txiter> candidates;\n+    setEntries counted;\n+    candidates.push_back(entry);\n+    uint64_t maximum = 0;\n+    while (candidates.size()) {\n+        txiter candidate = candidates.back();\n+        candidates.pop_back();\n+        if (!counted.insert(candidate).second) continue;\n+        const setEntries& parents = GetMemPoolParents(candidate);\n+        if (parents.size() == 0) {\n+            maximum = std::max(maximum, candidate->GetCountWithDescendants());\n+        } else {\n+            for (txiter i : parents) {\n+                candidates.push_back(i);\n+            }\n+        }\n     }\n-    return top->GetCountWithDescendants();\n+    return maximum;\n }\n \n void CTxMemPool::GetTransactionAncestry(const uint256& txid, size_t& ancestors, size_t& descendants) const {"
      }
    ]
  },
  {
    "sha": "f77e1d34fd5f17304ce319b5f962b8005592501a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmNzdlMWQzNGZkNWYxNzMwNGNlMzE5YjVmOTYyYjgwMDU1OTI1MDFh",
    "commit": {
      "author": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-05-24T09:50:46Z"
      },
      "committer": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2018-06-11T10:09:44Z"
      },
      "message": "test: Add MempoolAncestryTests",
      "tree": {
        "sha": "4e7446b646a6c531f1ce8669966810f46ec20ac2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4e7446b646a6c531f1ce8669966810f46ec20ac2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f77e1d34fd5f17304ce319b5f962b8005592501a",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEExCr/fGGz5EoUVM01V692LbM1MyIFAlseSmgACgkQV692LbM1\nMyKMvg//eeGa2ejIs3lSuUsYw2ElILt4GkQKu7fO/oU8OYutXr1OO4Bbn/FMZu++\nnLemKqlAeJEp5hBmC9GtlsWyjp/pgw02VQYJ+/v4r9iLpewdgoJEgui4LD5IN0Ah\nKFQSaBv15OGVw7IorW8VBc473ZMyBfnNDfmkdsUrRYlif818I+PZukU1SH793i5E\nW42XB273TdWB6csUvEBMc7LrnDqASpNTBFSvHGrto/sQ65tVpPydZd1eXbwt3Thp\nZvW23Ryx0gxtXSQNeGc/Ct2uRNr0sAd+92PNSnu/sWcxpoNZyrGs/qQQNysHEH61\nIf1rWtgYM0WEbDl6e00TsXzx0PYkEyHejaOI9SoDcvBmIQEE1kNcie/iasa10iog\nBJ/6kta4zuSXn3ImGC2qLf+mu3xYvnjcC4h5P4Ll4sg6dRQtV0oLX3Yj4VgzuEIX\n5E/rdx6kdHWFmYc25YIKGfjFPsL7evYCSFTaRbgW05wMTBzSENGoDQQnOi+7Q6Ho\nPvdN7cBI1lECMsYJ7DPhRtcg23h/wsfKOqG+8qtDLJSTY4ndpPP8XsmcVBRwrmTh\nHTUJ5q+7x61BTPQqmKtNu+sFCKoEbL/mKzbinrKDAKfLconFT8w/Sgvb4KyCqgcr\nnVyYt1mK3x40cE2CtgS9KuqCKF7uNKJs2m1bQyS0qJDNoKnjRI0=\n=U9qU\n-----END PGP SIGNATURE-----",
        "payload": "tree 4e7446b646a6c531f1ce8669966810f46ec20ac2\nparent a08d76bcfee6f563a268933357931abe32060668\nauthor Karl-Johan Alm <karljohan-alm@garage.co.jp> 1527155446 +0900\ncommitter Karl-Johan Alm <karljohan-alm@garage.co.jp> 1528711784 +0900\n\ntest: Add MempoolAncestryTests\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f77e1d34fd5f17304ce319b5f962b8005592501a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f77e1d34fd5f17304ce319b5f962b8005592501a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f77e1d34fd5f17304ce319b5f962b8005592501a/comments",
    "author": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a08d76bcfee6f563a268933357931abe32060668",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a08d76bcfee6f563a268933357931abe32060668",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a08d76bcfee6f563a268933357931abe32060668"
      }
    ],
    "stats": {
      "total": 178,
      "additions": 178,
      "deletions": 0
    },
    "files": [
      {
        "sha": "4070642537d967d604af17c6b05c563d85615cb9",
        "filename": "src/test/mempool_tests.cpp",
        "status": "modified",
        "additions": 178,
        "deletions": 0,
        "changes": 178,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f77e1d34fd5f17304ce319b5f962b8005592501a/src/test/mempool_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f77e1d34fd5f17304ce319b5f962b8005592501a/src/test/mempool_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/mempool_tests.cpp?ref=f77e1d34fd5f17304ce319b5f962b8005592501a",
        "patch": "@@ -571,4 +571,182 @@ BOOST_AUTO_TEST_CASE(MempoolSizeLimitTest)\n     SetMockTime(0);\n }\n \n+inline CTransactionRef make_tx(std::vector<CAmount>&& output_values, std::vector<CTransactionRef>&& inputs=std::vector<CTransactionRef>(), std::vector<uint32_t>&& input_indices=std::vector<uint32_t>())\n+{\n+    CMutableTransaction tx = CMutableTransaction();\n+    tx.vin.resize(inputs.size());\n+    tx.vout.resize(output_values.size());\n+    for (size_t i = 0; i < inputs.size(); ++i) {\n+        tx.vin[i].prevout.hash = inputs[i]->GetHash();\n+        tx.vin[i].prevout.n = input_indices.size() > i ? input_indices[i] : 0;\n+    }\n+    for (size_t i = 0; i < output_values.size(); ++i) {\n+        tx.vout[i].scriptPubKey = CScript() << OP_11 << OP_EQUAL;\n+        tx.vout[i].nValue = output_values[i];\n+    }\n+    return MakeTransactionRef(tx);\n+}\n+\n+#define MK_OUTPUTS(amounts...) std::vector<CAmount>{amounts}\n+#define MK_INPUTS(txs...) std::vector<CTransactionRef>{txs}\n+#define MK_INPUT_IDX(idxes...) std::vector<uint32_t>{idxes}\n+\n+BOOST_AUTO_TEST_CASE(MempoolAncestryTests)\n+{\n+    size_t ancestors, descendants;\n+\n+    CTxMemPool pool;\n+    TestMemPoolEntryHelper entry;\n+\n+    /* Base transaction */\n+    //\n+    // [tx1]\n+    //\n+    CTransactionRef tx1 = make_tx(MK_OUTPUTS(10 * COIN));\n+    pool.addUnchecked(tx1->GetHash(), entry.Fee(10000LL).FromTx(tx1));\n+\n+    // Ancestors / descendants should be 1 / 1 (itself / itself)\n+    pool.GetTransactionAncestry(tx1->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 1ULL);\n+    BOOST_CHECK_EQUAL(descendants, 1ULL);\n+\n+    /* Child transaction */\n+    //\n+    // [tx1].0 <- [tx2]\n+    //\n+    CTransactionRef tx2 = make_tx(MK_OUTPUTS(495 * CENT, 5 * COIN), MK_INPUTS(tx1));\n+    pool.addUnchecked(tx2->GetHash(), entry.Fee(10000LL).FromTx(tx2));\n+\n+    // Ancestors / descendants should be:\n+    // transaction  ancestors   descendants\n+    // ============ =========== ===========\n+    // tx1          1 (tx1)     2 (tx1,2)\n+    // tx2          2 (tx1,2)   2 (tx1,2)\n+    pool.GetTransactionAncestry(tx1->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 1ULL);\n+    BOOST_CHECK_EQUAL(descendants, 2ULL);\n+    pool.GetTransactionAncestry(tx2->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 2ULL);\n+    BOOST_CHECK_EQUAL(descendants, 2ULL);\n+\n+    /* Grand-child 1 */\n+    //\n+    // [tx1].0 <- [tx2].0 <- [tx3]\n+    //\n+    CTransactionRef tx3 = make_tx(MK_OUTPUTS(290 * CENT, 200 * CENT), MK_INPUTS(tx2));\n+    pool.addUnchecked(tx3->GetHash(), entry.Fee(10000LL).FromTx(tx3));\n+\n+    // Ancestors / descendants should be:\n+    // transaction  ancestors   descendants\n+    // ============ =========== ===========\n+    // tx1          1 (tx1)     3 (tx1,2,3)\n+    // tx2          2 (tx1,2)   3 (tx1,2,3)\n+    // tx3          3 (tx1,2,3) 3 (tx1,2,3)\n+    pool.GetTransactionAncestry(tx1->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 1ULL);\n+    BOOST_CHECK_EQUAL(descendants, 3ULL);\n+    pool.GetTransactionAncestry(tx2->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 2ULL);\n+    BOOST_CHECK_EQUAL(descendants, 3ULL);\n+    pool.GetTransactionAncestry(tx3->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 3ULL);\n+    BOOST_CHECK_EQUAL(descendants, 3ULL);\n+\n+    /* Grand-child 2 */\n+    //\n+    // [tx1].0 <- [tx2].0 <- [tx3]\n+    //              |\n+    //              \\---1 <- [tx4]\n+    //\n+    CTransactionRef tx4 = make_tx(MK_OUTPUTS(290 * CENT, 250 * CENT), MK_INPUTS(tx2), MK_INPUT_IDX(1));\n+    pool.addUnchecked(tx4->GetHash(), entry.Fee(10000LL).FromTx(tx4));\n+\n+    // Ancestors / descendants should be:\n+    // transaction  ancestors   descendants\n+    // ============ =========== ===========\n+    // tx1          1 (tx1)     4 (tx1,2,3,4)\n+    // tx2          2 (tx1,2)   4 (tx1,2,3,4)\n+    // tx3          3 (tx1,2,3) 4 (tx1,2,3,4)\n+    // tx4          3 (tx1,2,4) 4 (tx1,2,3,4)\n+    pool.GetTransactionAncestry(tx1->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 1ULL);\n+    BOOST_CHECK_EQUAL(descendants, 4ULL);\n+    pool.GetTransactionAncestry(tx2->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 2ULL);\n+    BOOST_CHECK_EQUAL(descendants, 4ULL);\n+    pool.GetTransactionAncestry(tx3->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 3ULL);\n+    BOOST_CHECK_EQUAL(descendants, 4ULL);\n+    pool.GetTransactionAncestry(tx4->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 3ULL);\n+    BOOST_CHECK_EQUAL(descendants, 4ULL);\n+\n+    /* Make an alternate branch that is longer and connect it to tx3 */\n+    //\n+    // [ty1].0 <- [ty2].0 <- [ty3].0 <- [ty4].0 <- [ty5].0\n+    //                                              |\n+    // [tx1].0 <- [tx2].0 <- [tx3].0 <- [ty6] --->--/\n+    //              |\n+    //              \\---1 <- [tx4]\n+    //\n+    CTransactionRef ty1, ty2, ty3, ty4, ty5;\n+    CTransactionRef* ty[5] = {&ty1, &ty2, &ty3, &ty4, &ty5};\n+    CAmount v = 5 * COIN;\n+    for (uint64_t i = 0; i < 5; i++) {\n+        CTransactionRef& tyi = *ty[i];\n+        tyi = make_tx(MK_OUTPUTS(v), i > 0 ? MK_INPUTS(*ty[i-1]) : std::vector<CTransactionRef>());\n+        v -= 50 * CENT;\n+        pool.addUnchecked(tyi->GetHash(), entry.Fee(10000LL).FromTx(tyi));\n+        pool.GetTransactionAncestry(tyi->GetHash(), ancestors, descendants);\n+        BOOST_CHECK_EQUAL(ancestors, i+1);\n+        BOOST_CHECK_EQUAL(descendants, i+1);\n+    }\n+    CTransactionRef ty6 = make_tx(MK_OUTPUTS(5 * COIN), MK_INPUTS(tx3, ty5));\n+    pool.addUnchecked(ty6->GetHash(), entry.Fee(10000LL).FromTx(ty6));\n+\n+    // Ancestors / descendants should be:\n+    // transaction  ancestors           descendants\n+    // ============ =================== ===========\n+    // tx1          1 (tx1)             5 (tx1,2,3,4, ty6)\n+    // tx2          2 (tx1,2)           5 (tx1,2,3,4, ty6)\n+    // tx3          3 (tx1,2,3)         5 (tx1,2,3,4, ty6)\n+    // tx4          3 (tx1,2,4)         5 (tx1,2,3,4, ty6)\n+    // ty1          1 (ty1)             6 (ty1,2,3,4,5,6)\n+    // ty2          2 (ty1,2)           6 (ty1,2,3,4,5,6)\n+    // ty3          3 (ty1,2,3)         6 (ty1,2,3,4,5,6)\n+    // ty4          4 (y1234)           6 (ty1,2,3,4,5,6)\n+    // ty5          5 (y12345)          6 (ty1,2,3,4,5,6)\n+    // ty6          9 (tx123, ty123456) 6 (ty1,2,3,4,5,6)\n+    pool.GetTransactionAncestry(tx1->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 1ULL);\n+    BOOST_CHECK_EQUAL(descendants, 5ULL);\n+    pool.GetTransactionAncestry(tx2->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 2ULL);\n+    BOOST_CHECK_EQUAL(descendants, 5ULL);\n+    pool.GetTransactionAncestry(tx3->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 3ULL);\n+    BOOST_CHECK_EQUAL(descendants, 5ULL);\n+    pool.GetTransactionAncestry(tx4->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 3ULL);\n+    BOOST_CHECK_EQUAL(descendants, 5ULL);\n+    pool.GetTransactionAncestry(ty1->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 1ULL);\n+    BOOST_CHECK_EQUAL(descendants, 6ULL);\n+    pool.GetTransactionAncestry(ty2->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 2ULL);\n+    BOOST_CHECK_EQUAL(descendants, 6ULL);\n+    pool.GetTransactionAncestry(ty3->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 3ULL);\n+    BOOST_CHECK_EQUAL(descendants, 6ULL);\n+    pool.GetTransactionAncestry(ty4->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 4ULL);\n+    BOOST_CHECK_EQUAL(descendants, 6ULL);\n+    pool.GetTransactionAncestry(ty5->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 5ULL);\n+    BOOST_CHECK_EQUAL(descendants, 6ULL);\n+    pool.GetTransactionAncestry(ty6->GetHash(), ancestors, descendants);\n+    BOOST_CHECK_EQUAL(ancestors, 9ULL);\n+    BOOST_CHECK_EQUAL(descendants, 6ULL);\n+}\n+\n BOOST_AUTO_TEST_SUITE_END()"
      }
    ]
  }
]