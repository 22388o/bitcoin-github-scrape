laanwj,2014-09-04T11:33:48Z,"Ideally we wouldn't be using floats for monetary amounts at all, not in the test cases either. In Python this means either integers as satoshis or Decimal() with fixed 8 decimals.\n",https://github.com/bitcoin/bitcoin/pull/4836#issuecomment-54457741,54457741,
jgarzik,2014-09-04T12:33:50Z,@laanwj Seconded.  This probably wants Decimal()\n,https://github.com/bitcoin/bitcoin/pull/4836#issuecomment-54466804,54466804,
gavinandresen,2014-09-04T13:22:32Z,"I remember fixing this bug, but the fix is probably lost on some long-forgotten branch.\n\nJust using Decimal isn't good enough if I recall correctly, the default rounding mode will still give you two inputs that add up to one satoshi more than is correct.\n",https://github.com/bitcoin/bitcoin/pull/4836#issuecomment-54474771,54474771,
gavinandresen,2014-09-04T13:27:39Z,"Ah, found it:\n\n```\ndef make_change(from_node, amount_in, amount_out, fee):\n    """"""\n    Create change output(s), return them\n    """"""\n    outputs = {}\n    amount = amount_out+fee\n    change = amount_in - amount\n    if change > amount*2:\n        # Create an extra change output to break up big inputs\n        change_address = from_node.getnewaddress()\n        # Split change in two, being c",https://github.com/bitcoin/bitcoin/pull/4836#issuecomment-54475839,54475839,
morcos,2014-09-05T13:39:34Z,"OK, I updated the PR to use Gavin's fix instead.  It fixes the test case that was breaking for me as well.\n",https://github.com/bitcoin/bitcoin/pull/4836#issuecomment-54625686,54625686,
BitcoinPullTester,2014-09-05T13:52:00Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4836_3a7c3483b6df12e84aefb937b85afec746b06b5e/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-te",https://github.com/bitcoin/bitcoin/pull/4836#issuecomment-54627215,54627215,
