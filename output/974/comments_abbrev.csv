gavinandresen,2012-03-22T17:49:40Z,"Thumbnail sketch of test plan:\n- Create a wallet using 0.3.\* version of bitcoin\n- Run 0.6, create a couple of new keys via getnewaddress RPC\n- Verify:  0.3.\* version of bitcoin can still read wallet, version number in wallet is old\n\nRepeat for 0.4 and an encrypted wallet.\n- Run 0.6 with -walletupgrade arg\n- Verify: version number in wallet is new, new keys are compressed\n- Run 0.6 with a",https://github.com/bitcoin/bitcoin/pull/974#issuecomment-4644305,4644305,
sipa,2012-03-22T23:19:39Z,Results of test:\n\nstart with a 0.3.24 wallet\nstart 0.6.0 (master + this pull)\nreported wallet version is low\nrequest 101 new addresses\nvalidateaddress reports that all are uncompressed \nstart 0.3.24\nvalidateaddress reports that earlier address are 'ismine'\n\nstart with an encrypted 0.4.1 wallet\nstart 0.6.0\nreported wallet version is 40000\nrequest 101 new addresses\nkeypool runs out\nun,https://github.com/bitcoin/bitcoin/pull/974#issuecomment-4650548,4650548,
gavinandresen,2012-03-23T19:49:50Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/974#issuecomment-4666646,4666646,
TheBlueMatt,2012-03-23T22:28:02Z,"Code-read ACK, though do we want to enable compression when we encrypt wallets in 0.6 or only encrypt and set minversion to 0.4?\nThough maybe I dont understand why we would want to do an ""explicit"" upgrade when encrypting.  Also, what, exactly, is meant by an ""explicit"" upgrade?\n",https://github.com/bitcoin/bitcoin/pull/974#issuecomment-4669103,4669103,
sipa,2012-03-23T22:39:02Z,"Explicit upgrade = the user takes an action from which one can reasonably expect that it makes the wallet incompatible with older versions. Wallet encryption is such an action (and for now, the only one).\n\nAlso, when an upgrade is done, it always upgrades all the way, unless a parameter is passed to -upgradewallet, and that constraint does not need to be broken.\n",https://github.com/bitcoin/bitcoin/pull/974#issuecomment-4669224,4669224,
TheBlueMatt,2012-03-23T22:40:17Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/974#issuecomment-4669243,4669243,
sipa,2012-03-24T01:24:42Z,"A summary of the policy implemented by this patch:\n- -upgradewallet and -upgradewallet=0 force an upgrade to the latest version\n- -upgradewallet=<version> allows (but does not force) upgrades up to version <version>, unless the user takes an explicit action that requires upgrading beyond <version>, in which case an upgrade to the latest version is done.\n- no argument is identical to -upgradewal",https://github.com/bitcoin/bitcoin/pull/974#issuecomment-4670803,4670803,
