laanwj,2021-05-26 09:08:02,"Thanks for your first contribution!\n\nI'm a bit divided on whether to add yet another configuration option for this. Either something like this makes sense as default behavior, or you might just as well follow the manual steps.",https://github.com/bitcoin/bitcoin/pull/22072#issuecomment-848604298,848604298,
AaronDewes,2021-05-26 09:57:53,"> Either something like this makes sense as default behavior, or you might just as well follow the manual steps.\n\nIn my opinion, it would make sense to have this as the default behavior, because the user can't do anything except reindexing anyway (Maybe still ask the user on the GUI though).",https://github.com/bitcoin/bitcoin/pull/22072#issuecomment-848637671,848637671,
sipa,2021-05-26 16:39:24,"I'm not sure about this. If the chainstate gets corrupted the user should be made aware, so they can fix their hardware or setup.\n\nIf you reindex automatically without changing anything in the environment, there is no reason why the situation would be any different, and it'll just end up reindexing again?",https://github.com/bitcoin/bitcoin/pull/22072#issuecomment-848932820,848932820,
AaronDewes,2021-05-26 16:56:40,"> I'm not sure about this. If the chainstate gets corrupted the user should be made aware, so they can fix their hardware or setup.\n\nYes, so maybe leave it as an option, of course, users should fix their setup in such a case, but a sudden power outage can happen, and this would allow to try to automatically fix this.\n\n> If you reindex automatically without changing anything in the environm",https://github.com/bitcoin/bitcoin/pull/22072#issuecomment-848945582,848945582,
sipa,2021-05-26 16:59:51,"If a power outage causes corruptions, you probably have bigger problems with your setup.\n\nMy point is: if you automatically reindex, the user isn't made aware of the corruption, can't do anything to resolve whatever is causing it, and the next time it gets corrupted you'll just start all over again.",https://github.com/bitcoin/bitcoin/pull/22072#issuecomment-848947628,848947628,
AaronDewes,2021-05-26 17:07:40,"> If a power outage causes corruptions, you probably have bigger problems with your setup.\n\nSolutions like RapiBlitz, Umbrel or MyNode make setting up a node really easy. These are cheap and easy to build nodes, but Raspberry Pis don't deal with power outages well, and that can often lead to data corruption. A power outage causing problems is in my opinion okay for personal nodes, many users j",https://github.com/bitcoin/bitcoin/pull/22072#issuecomment-848952572,848952572,
sipa,2021-05-26 17:15:49,"@AaronDewes Is it so easy to corrupt such hardware? That sounds terrible...\n\nI'll let others chime in about this, I'm -0 on it. I think it's always better to make sure the user is aware that corruptions happens so they can investigate - and just putting it in the log will mostly be overlooked. That said I see the convenience for setups where the user isn't directly using the node themselves.",https://github.com/bitcoin/bitcoin/pull/22072#issuecomment-848960170,848960170,
jamesob,2021-05-26 17:21:32,"I think provided\n\n(i) this is not the default behavior,\n(ii) the code change is fairly limited (as it appears to be),\n(iii) automatic reindexes are clearly logged, and\n(iv) it actually does resolve the issue of a non-UPS'd setup recovering from a power-loss based corruption,\n\nthen this is a pretty compelling feature to add.\n\nI am not sure how frequent corruption that is solely ba",https://github.com/bitcoin/bitcoin/pull/22072#issuecomment-848963942,848963942,
AaronDewes,2021-05-26 17:27:32,"> I am not sure how frequent corruption that is solely based upon power loss (vs. bad hardware) is, though.\n\nI've been helping a lot of Umbrel users with such issues, and if it was a bad drive, either\n\n(a) The drive wouldn't mount\n(b) There would be different errors (that I don't remember right now)\n\nEvery time this message got printed, a reindex actually helped.\n\n> and just putt",https://github.com/bitcoin/bitcoin/pull/22072#issuecomment-848970421,848970421,
ryanofsky,2021-05-26 18:25:37,"This seems like a good feature. Just to bikeshed, maybe this could be a new reindex value, `-reindex=auto` complementing current `-reindex=0` and `-reindex=1` so it is less vague than `-attemptrecovery` and maybe more discoverable. `attemptrecovery` sounds more like a one time emergency flag to me than something I would configure permanently on my raspberry pi.",https://github.com/bitcoin/bitcoin/pull/22072#issuecomment-849017244,849017244,
MarcoFalke,2021-05-27 04:45:07,"> having to worry about removing the reindex flag again. (Which isn't much effort, but can be annoying to forget)\n\nAn alternative solution to that would be to only store `fReindex` on `-reindex` and then stop immediately with instructions to restart. Also it will refuse to start with `-reindex` enabled again.",https://github.com/bitcoin/bitcoin/pull/22072#issuecomment-849315383,849315383,
AaronDewes,2021-05-27 06:33:02,"I implemented @ryanofsky's idea now, with reindex defaulting to 0, but I can change the default to auto if that makes more sense for you.\n\n> An alternative solution to that would be to only store fReindex on -reindex and then stop immediately with instructions to restart. \n\nThis is true, but the user would still have to manually add this flag in case of a power outage.\n\n_This can be es",https://github.com/bitcoin/bitcoin/pull/22072#issuecomment-849367736,849367736,
amadeuszpawlik,2021-05-26 16:15:22,Couldn't this comment be (re)moved?,https://github.com/bitcoin/bitcoin/pull/22072#discussion_r639885352,639885352,src/init.cpp
AaronDewes,2021-05-26 16:36:59,"Yes, I'll move it.",https://github.com/bitcoin/bitcoin/pull/22072#discussion_r639910850,639910850,src/init.cpp
