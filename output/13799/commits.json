[
  {
    "sha": "04ce0d88ca146962311743812a18819ae55fc9ae",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowNGNlMGQ4OGNhMTQ2OTYyMzExNzQzODEyYTE4ODE5YWU1NWZjOWFl",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-30T07:14:18Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-30T07:35:44Z"
      },
      "message": "Report when unknown config file options are ignored",
      "tree": {
        "sha": "0581c9c029bffec3b333bfe5f6cd37c1e87e3e03",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0581c9c029bffec3b333bfe5f6cd37c1e87e3e03"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/04ce0d88ca146962311743812a18819ae55fc9ae",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/04ce0d88ca146962311743812a18819ae55fc9ae",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/04ce0d88ca146962311743812a18819ae55fc9ae",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/04ce0d88ca146962311743812a18819ae55fc9ae/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "222e627322ce4de3292259a4868d23983f2a5394",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/222e627322ce4de3292259a4868d23983f2a5394",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/222e627322ce4de3292259a4868d23983f2a5394"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 7,
      "deletions": 3
    },
    "files": [
      {
        "sha": "238554ee4a555509ddcce39bb7053ef6f926b24f",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 3,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/04ce0d88ca146962311743812a18819ae55fc9ae/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/04ce0d88ca146962311743812a18819ae55fc9ae/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=04ce0d88ca146962311743812a18819ae55fc9ae",
        "patch": "@@ -859,9 +859,13 @@ bool ArgsManager::ReadConfigStream(std::istream& stream, std::string& error, boo\n         }\n \n         // Check that the arg is known\n-        if (!IsArgKnown(strKey) && !ignore_invalid_keys) {\n-            error = strprintf(\"Invalid configuration value %s\", option.first.c_str());\n-            return false;\n+        if (!IsArgKnown(strKey)) {\n+            if (!ignore_invalid_keys) {\n+                error = strprintf(\"Invalid configuration value %s\", option.first.c_str());\n+                return false;\n+            } else {\n+                LogPrintf(\"Ignoring unknown configuration value %s\\n\", option.first);\n+            }\n         }\n     }\n     return true;"
      }
    ]
  },
  {
    "sha": "247d5740d29752c35861136a2fc561831c7e9832",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyNDdkNTc0MGQyOTc1MmMzNTg2MTEzNmEyZmM1NjE4MzFjN2U5ODMy",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-30T07:25:25Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-31T01:01:20Z"
      },
      "message": "Ignore unknown config file options for now",
      "tree": {
        "sha": "d44aaba21af59601a568e103575e87eb27a3649e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d44aaba21af59601a568e103575e87eb27a3649e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/247d5740d29752c35861136a2fc561831c7e9832",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/247d5740d29752c35861136a2fc561831c7e9832",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/247d5740d29752c35861136a2fc561831c7e9832",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/247d5740d29752c35861136a2fc561831c7e9832/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "04ce0d88ca146962311743812a18819ae55fc9ae",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/04ce0d88ca146962311743812a18819ae55fc9ae",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/04ce0d88ca146962311743812a18819ae55fc9ae"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 7,
      "deletions": 5
    },
    "files": [
      {
        "sha": "4d010c0d14e0e1a8f51e386486dc6f5d910a5604",
        "filename": "src/bitcoind.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/247d5740d29752c35861136a2fc561831c7e9832/src/bitcoind.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/247d5740d29752c35861136a2fc561831c7e9832/src/bitcoind.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoind.cpp?ref=247d5740d29752c35861136a2fc561831c7e9832",
        "patch": "@@ -96,7 +96,7 @@ static bool AppInit(int argc, char* argv[])\n             fprintf(stderr, \"Error: Specified data directory \\\"%s\\\" does not exist.\\n\", gArgs.GetArg(\"-datadir\", \"\").c_str());\n             return false;\n         }\n-        if (!gArgs.ReadConfigFiles(error)) {\n+        if (!gArgs.ReadConfigFiles(error, true)) {\n             fprintf(stderr, \"Error reading configuration file: %s\\n\", error.c_str());\n             return false;\n         }"
      },
      {
        "sha": "106dd38f60f7f7df2c13c69f655566f9b5bd6fd0",
        "filename": "src/interfaces/node.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/247d5740d29752c35861136a2fc561831c7e9832/src/interfaces/node.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/247d5740d29752c35861136a2fc561831c7e9832/src/interfaces/node.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/interfaces/node.cpp?ref=247d5740d29752c35861136a2fc561831c7e9832",
        "patch": "@@ -53,7 +53,7 @@ class NodeImpl : public Node\n     {\n         return gArgs.ParseParameters(argc, argv, error);\n     }\n-    bool readConfigFiles(std::string& error) override { return gArgs.ReadConfigFiles(error); }\n+    bool readConfigFiles(std::string& error) override { return gArgs.ReadConfigFiles(error, true); }\n     bool softSetArg(const std::string& arg, const std::string& value) override { return gArgs.SoftSetArg(arg, value); }\n     bool softSetBoolArg(const std::string& arg, bool value) override { return gArgs.SoftSetBoolArg(arg, value); }\n     void selectParams(const std::string& network) override { SelectParams(network); }"
      },
      {
        "sha": "d06f6826f0723715189880ce4a44511211894605",
        "filename": "test/functional/feature_includeconf.py",
        "status": "modified",
        "additions": 5,
        "deletions": 3,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/247d5740d29752c35861136a2fc561831c7e9832/test/functional/feature_includeconf.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/247d5740d29752c35861136a2fc561831c7e9832/test/functional/feature_includeconf.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_includeconf.py?ref=247d5740d29752c35861136a2fc561831c7e9832",
        "patch": "@@ -55,9 +55,11 @@ def run_test(self):\n         self.stop_node(0, expected_stderr=\"warning: -includeconf cannot be used from included files; ignoring -includeconf=relative2.conf\")\n \n         self.log.info(\"-includeconf cannot contain invalid arg\")\n-        with open(os.path.join(self.options.tmpdir, \"node0\", \"relative.conf\"), \"w\", encoding=\"utf8\") as f:\n-            f.write(\"foo=bar\\n\")\n-        self.nodes[0].assert_start_raises_init_error(expected_msg=\"Error reading configuration file: Invalid configuration value foo\")\n+\n+        # Commented out as long as we ignore invalid arguments in configuration files\n+        #with open(os.path.join(self.options.tmpdir, \"node0\", \"relative.conf\"), \"w\", encoding=\"utf8\") as f:\n+        #    f.write(\"foo=bar\\n\")\n+        #self.nodes[0].assert_start_raises_init_error(expected_msg=\"Error reading configuration file: Invalid configuration value foo\")\n \n         self.log.info(\"-includeconf cannot be invalid path\")\n         os.remove(os.path.join(self.options.tmpdir, \"node0\", \"relative.conf\"))"
      }
    ]
  }
]