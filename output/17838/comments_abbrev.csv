DrahtBot,2019-12-31 08:22:26,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17889](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17889.html) (wallet: Improve CWallet:MarkDestinationsDir",https://github.com/bitcoin/bitcoin/pull/17838#issuecomment-569887198,569887198,
kallewoof,2019-12-31 10:41:50,@jonatack I spoke^Wpushed too soon (I must have been absent-minded as I saw that error locally before pushing).,https://github.com/bitcoin/bitcoin/pull/17838#issuecomment-569907345,569907345,
kallewoof,2020-01-01 04:06:21,Removed left-over print and tweaked comment.,https://github.com/bitcoin/bitcoin/pull/17838#issuecomment-570018989,570018989,
DrahtBot,2020-01-15 10:11:54,<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase,https://github.com/bitcoin/bitcoin/pull/17838#issuecomment-574590076,574590076,
kallewoof,2020-01-15 10:45:01,Rendered redundant with #17843.,https://github.com/bitcoin/bitcoin/pull/17838#issuecomment-574603600,574603600,
jonatack,2019-12-31 09:06:53,"nits: s/change/changed/, and s/self/itself/ ?",https://github.com/bitcoin/bitcoin/pull/17838#discussion_r362175874,362175874,test/functional/wallet_avoidreuse.py
jonatack,2019-12-31 09:26:02,This assert is failing for me; will provide details in the review summary.,https://github.com/bitcoin/bitcoin/pull/17838#discussion_r362179474,362179474,test/functional/wallet_avoidreuse.py
kallewoof,2019-12-31 10:42:26,"It's change, as in money given back, so I think it's correct as it is, but I'll make it clearer.",https://github.com/bitcoin/bitcoin/pull/17838#discussion_r362192326,362192326,test/functional/wallet_avoidreuse.py
jonatack,2019-12-31 11:14:05,"Oh, of course. Yes, I read it wrong.",https://github.com/bitcoin/bitcoin/pull/17838#discussion_r362197317,362197317,test/functional/wallet_avoidreuse.py
kallewoof,2019-12-31 11:26:58,"Thanks for testing -- I have modified the test to work according to the implementation, which has the limitation that it only marks *new* utxos as used when it sees them -- to get the 100% correct behavior the user would have to run a rescan. To be honest, this should probably be fixed..",https://github.com/bitcoin/bitcoin/pull/17838#discussion_r362199036,362199036,test/functional/wallet_avoidreuse.py
jonatack,2019-12-31 17:22:28,Remove this print?,https://github.com/bitcoin/bitcoin/pull/17838#discussion_r362251814,362251814,test/functional/wallet_avoidreuse.py
jimmysong,2020-01-02 17:56:01,"Generally, this is not a pattern seen in the codebase. When list comprehensions are done, they're done to assign to a variable. It's also a little harder to read. A two-liner like this is easier.:\n\n    for _ in range(30):\n        self.nodes[0].sendtoaddress(fundaddr, 1)\n\n",https://github.com/bitcoin/bitcoin/pull/17838#discussion_r362566959,362566959,test/functional/wallet_avoidreuse.py
jimmysong,2020-01-02 17:57:29,"Also, a comment above would be useful ( `# send one bitcoin to the funding address 30 times`)",https://github.com/bitcoin/bitcoin/pull/17838#discussion_r362567371,362567371,test/functional/wallet_avoidreuse.py
jonatack,2020-01-02 18:47:21,"Verified what happens after a rescan: getbalances changes, but not listunspent.\n```diff\n+\n+        # After -rescan, getbalances shows 1 unused 9 btc output, and 10 used 1 btc outputs.\n+        self.restart_node(1, extra_args=self.extra_args[1] + ['-rescan'])\n+        assert_unspent(self.nodes[1], total_count=11, total_sum=19, reused_supported=True, reused_count=10)\n+        assert_bala",https://github.com/bitcoin/bitcoin/pull/17838#discussion_r362583694,362583694,test/functional/wallet_avoidreuse.py
kallewoof,2020-01-03 03:49:34,"No, there are cases where this is done:\n\nhttps://github.com/bitcoin/bitcoin/blob/17e14ac92fced92457945859463eda5d435bdd49/test/functional/feature_block.py#L1301\n\nhttps://github.com/bitcoin/bitcoin/blob/17e14ac92fced92457945859463eda5d435bdd49/test/functional/p2p_compactblocks.py#L601\n\nExactly the same pattern:\n\nhttps://github.com/bitcoin/bitcoin/blob/17e14ac92fced92457945859463eda5",https://github.com/bitcoin/bitcoin/pull/17838#discussion_r362700302,362700302,test/functional/wallet_avoidreuse.py
jimmysong,2020-01-03 04:13:40,"OK, I missed those. I still don't think it's that clear, but if it's there already, I'm happy to have it be a pattern.",https://github.com/bitcoin/bitcoin/pull/17838#discussion_r362702489,362702489,test/functional/wallet_avoidreuse.py
kallewoof,2020-01-03 04:38:50,"Yeah, you're probably right. I'll change it to be more clear and add comment. Thanks for the feedback.",https://github.com/bitcoin/bitcoin/pull/17838#discussion_r362704763,362704763,test/functional/wallet_avoidreuse.py
kallewoof,2020-01-03 04:40:32,"Good idea! Thanks, added to test.",https://github.com/bitcoin/bitcoin/pull/17838#discussion_r362704874,362704874,test/functional/wallet_avoidreuse.py
