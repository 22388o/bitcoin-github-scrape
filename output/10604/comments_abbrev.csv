ryanofsky,2017-06-15T18:17:22Z,"It's good to add the wallet name to `getwalletinfo` but I don't see a reason to break backwards compatibility by returning an array in place of the previous wallet info object.\n\nI thought the approach we were going to take for multiwallet RPC support was to add some kind of `listwallets` API that would return wallet names, and some kind of RPC session variable that would control which wallet i",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-308825765,308825765,
ryanofsky,2017-06-15T18:21:08Z,"Jonas had a suggestion about how we could use different RPC endpoints to access individual wallets here: https://github.com/bitcoin/bitcoin/pull/8694#issuecomment-246095336\n\nAlso more discussion in https://github.com/bitcoin/bitcoin/pull/8788",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-308826700,308826700,
jnewbery,2017-06-15T19:01:20Z,"> Jonas had a suggestion about how we could use different RPC endpoints to access individual wallets\n\nSounds good, although I don't think that's relevant for this PR, since it doesn't touch any RPCs that are specific to a single wallet.\n\n> I thought the approach we were going to take for multiwallet RPC support was to add some kind of `listwallets` API\n\nI missed that discussion (and ca",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-308836821,308836821,
ryanofsky,2017-06-15T19:05:25Z,"> Sounds good, although I don't think that's relevant for this PR, since it doesn't touch any RPCs that are specific to a single wallet.\n\nDeriving the wallet from the RPC endpoint is relevant to this PR if you want getwalletinfo to be able to return information about all wallets without changing it to return an array.\n\n> I missed that discussion (and can't find mention of listwallets in th",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-308837798,308837798,
laanwj,2017-06-22T12:53:44Z,"> It's good to add the wallet name to getwalletinfo but I don't see a reason to break backwards compatibility by returning an array in place of the previous wallet info object.\n> I thought the approach we were going to take for multiwallet RPC support was to add some kind of  listwallets API that would return wallet names, and some kind of RPC session variable that would control which wallet is ",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-310371252,310371252,
jnewbery,2017-06-27T13:52:26Z,"@ryanofsky @laanwj - thanks for the useful feedback on the API here.\n\nI've updated this PR to add a new `listwallets` RPC, which simply lists the names of the currently loaded wallets. The command intentionally shows no information about the wallet. If/when we add multi-user multiwallet functionality, the `listwallet` RPC should not reveal the contents of the individual wallets.\n\nThe PR st",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-311364736,311364736,
instagibbs,2017-07-03T18:11:13Z,will review,https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-312706810,312706810,
jnewbery,2017-07-04T07:48:38Z,rebased,https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-312806140,312806140,
instagibbs,2017-07-05T12:59:20Z,"API makes sense to me \n\ntACK https://github.com/bitcoin/bitcoin/pull/10604/commits/74882ca0ebc070ba80304e910af4562659e44a1f",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-313095592,313095592,
jonasschnelli,2017-07-05T16:32:37Z,"Looks good.\nI'm not sure if we should call it `wallet_name` on the RPC layer. It's actually the `wallet_filename`. Maybe we never do, but there is a chance that we once allow to give wallets a name (like other multiwallet software) and not sure if we want the filename char limits there.",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-313156489,313156489,
jnewbery,2017-07-05T16:41:23Z,"> I'm not sure if we should call it wallet_name on the RPC layer\n\nYes, good point to bring up. I see there was some discussion of this here: https://github.com/bitcoin/bitcoin/pull/10650#issuecomment-310606962 . My personal opinion is that wallet name should always equal filename to avoid confusion, but I'm happy to discuss if other people have different ideas. Perhaps one to bring up in tomor",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-313158866,313158866,
ryanofsky,2017-07-12T22:35:04Z,"Also, should maybe clean up the PR description (remove all caps ""EDITED"") now that #10786 is merged.",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-314917042,314917042,
jnewbery,2017-07-13T11:45:48Z,@ryanofsky's and @morcos's comments addressed,https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-315054514,315054514,
morcos,2017-07-13T13:59:09Z,"ACK 011a860\n\nwill be awesome to show people all the wallets they can't access!\n",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-315086079,315086079,
instagibbs,2017-07-13T14:06:22Z,re-ACK https://github.com/bitcoin/bitcoin/pull/10604/commits/011a860db94b179ca158dfc38acf7beefca2bed1,https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-315088156,315088156,
jnewbery,2017-07-13T15:06:02Z,"This conflicts (slightly) with #10650. I have a branch of this rebased on top of that, so if both are going in to v0.15, #10650 can go in first and I'll push the rebased branch.",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-315106261,315106261,
jnewbery,2017-07-14T14:48:20Z,Rebased on the latest #10650 ,https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-315378903,315378903,
instagibbs,2017-07-14T14:59:40Z,re-re-ACK https://github.com/bitcoin/bitcoin/pull/10604/commits/5baca3ad700e748d08b0b8f08ef014ea2c478d13,https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-315381876,315381876,
jnewbery,2017-07-20T21:07:58Z,"rebased on master now that we have the endpoint PR merged.\n\n@laanwj: Any chance of tagging this 0.15? It has 4 ACKs pre-rebase. I think it's useful multiwallet management functionality.",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-316830360,316830360,
sipa,2017-07-20T21:37:43Z,utACK 3707fcd94e6251384235d16faafc975853d49e3d,https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-316837389,316837389,
instagibbs,2017-07-21T01:49:40Z,"test failing:\n    assert_raises_jsonrpc(-13, ""Please enter the wallet passphrase with walletpassphrase first"", self.nodes[0].dumpprivkey, address)\n  File ""/home/travis/build/bitcoin/bitcoin/build/bitcoin-i686-pc-linux-gnu/test/functional/test_framework/util.py"", line 87, in assert_raises_jsonrpc\n    raise AssertionError(""No exception raised"")\n\nfrom walletencryption.py",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-316878978,316878978,
jnewbery,2017-07-21T13:18:02Z,bah! Unrelated intermittent travis failure. Job restarted.,https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-316998343,316998343,
jonasschnelli,2017-07-21T13:20:11Z,utACK 3707fcd94e6251384235d16faafc975853d49e3d,https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-316998831,316998831,
instagibbs,2017-07-21T13:28:04Z,ACK https://github.com/bitcoin/bitcoin/pull/10604/commits/3707fcd94e6251384235d16faafc975853d49e3d,https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-317000689,317000689,
MarcoFalke,2017-07-21T13:43:42Z,"Nit: No need to run multiwallet.py twice in the test runner ;)\n\nOn Fri, Jul 21, 2017 at 3:38 PM, Wladimir J. van der Laan <\nnotifications@github.com> wrote:\n\n> Merged #10604 <https://github.com/bitcoin/bitcoin/pull/10604>.\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-317004390,317004390,
jnewbery,2017-07-21T13:51:48Z,"> Nit: No need to run multiwallet.py twice in the test runner ;)\n\nOops. Good catch!",https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-317006599,317006599,
morcos,2017-07-12T22:11:40Z,ultranit: extra white  space,https://github.com/bitcoin/bitcoin/pull/10604#discussion_r127085848,127085848,src/wallet/wallet.h
ryanofsky,2017-07-12T22:28:43Z,"Probably should drop the cs_main lock. I don't think we decided what lock will be used to guard the vpwallets array, and no lock is used other places (it's not needed since the list doesn't change after initialization) so it would be inconsistent to add this here.",https://github.com/bitcoin/bitcoin/pull/10604#discussion_r127088810,127088810,src/wallet/rpcwallet.cpp
ryanofsky,2017-07-12T22:30:55Z,"Should drop the `:xxxx,` here since an array is just a list of items, not key/value pairs.",https://github.com/bitcoin/bitcoin/pull/10604#discussion_r127089175,127089175,src/wallet/rpcwallet.cpp
morcos,2017-07-12T22:31:25Z,"it just prints the wallet name, not a pair",https://github.com/bitcoin/bitcoin/pull/10604#discussion_r127089248,127089248,src/wallet/rpcwallet.cpp
jnewbery,2017-07-13T11:44:56Z,Thanks. fixed,https://github.com/bitcoin/bitcoin/pull/10604#discussion_r127194606,127194606,src/wallet/wallet.h
jnewbery,2017-07-13T11:45:03Z,quite right. Fixed,https://github.com/bitcoin/bitcoin/pull/10604#discussion_r127194626,127194626,src/wallet/rpcwallet.cpp
jnewbery,2017-07-13T11:45:09Z,yup. Fixed,https://github.com/bitcoin/bitcoin/pull/10604#discussion_r127194640,127194640,src/wallet/rpcwallet.cpp
jnewbery,2017-07-13T11:45:16Z,Done. Thanks!,https://github.com/bitcoin/bitcoin/pull/10604#discussion_r127194658,127194658,src/wallet/rpcwallet.cpp
jonasschnelli,2017-07-21T13:19:53Z,nit newline,https://github.com/bitcoin/bitcoin/pull/10604#discussion_r128759358,128759358,src/wallet/rpcwallet.cpp
jnewbery,2017-07-21T13:24:56Z,"Yes, agree, but in the interests of getting this merged, I won't change this now that https://github.com/bitcoin/bitcoin/commit/3707fcd94e6251384235d16faafc975853d49e3d has two ACKs",https://github.com/bitcoin/bitcoin/pull/10604#discussion_r128760376,128760376,src/wallet/rpcwallet.cpp
