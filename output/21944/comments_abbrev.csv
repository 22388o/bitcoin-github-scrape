Talkless,2021-05-13 18:34:29,"Welp, I did crazy thing and launched `bitcoind` as root, with:\n```\nsudo src/bitcoind -regtest -walletdir=/ -datadir=/tmp/datadir -server\n```\nCreated wallet, and then listed:\n```\n{\n  ""wallets"": [\n    {\n      ""name"": ""est""\n    },\n    {\n      ""name"": ""ome/vincas/.bitcoin/regtest/wallets""\n    },\n    {\n      ""name"": ""ome/vincas/code/eclair/eclair_recovery_tool.git/eclair-c",https://github.com/bitcoin/bitcoin/pull/21944#issuecomment-840750672,840750672,
prayank23,2021-05-14 00:25:29,"> Interesting to see bitcoind scan whole system for wallets :D (log even printed ListDatabases: Error scanning /sys/fs/bpf: boost::filesystem::status: Operation not permitted: ""/sys/fs/bpf/wallet.dat"").\n\nYes it recursively iterates path mentioned. How much time did this take?\n\n> Anyhow, issue is the same on Linux, and this PR did fix that too\n\nInteresting. Thanks for testing this on Li",https://github.com/bitcoin/bitcoin/pull/21944#issuecomment-840913891,840913891,
DrahtBot,2021-05-17 16:00:34,<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.,https://github.com/bitcoin/bitcoin/pull/21944#issuecomment-842443204,842443204,
Talkless,2021-05-19 17:42:13,"> Yes it recursively iterates path mentioned. How much time did this take?\n\nAbout 19s in a VM running on i7 laptop with SATA SSD.",https://github.com/bitcoin/bitcoin/pull/21944#issuecomment-844325744,844325744,
prayank23,2021-05-20 16:34:21,"> Not sure it's worth adding these cases considering #20744 unless we want to backport the fix.\n\nCc: @MarcoFalke @meshcollider ",https://github.com/bitcoin/bitcoin/pull/21944#issuecomment-845273555,845273555,
ryanofsky,2021-05-28 00:13:56,"Definitely good to have a fix for this issue. Would welcome simplifying the PR though. I think the following would be a simpler short term fix than c5ee096d596766b5f9dd6e3f8d81c8e87c0e9c3a:\n\n```diff\ndiff --git a/src/wallet/db.cpp b/src/wallet/db.cpp\nindex cd49baeb786..993dd09b8b9 100644\n--- a/src/wallet/db.cpp\n+++ b/src/wallet/db.cpp\n@@ -12,7 +12,7 @@\n \n std::vector<fs::path> Lis",https://github.com/bitcoin/bitcoin/pull/21944#issuecomment-850023110,850023110,
prayank23,2021-06-01 15:08:40,"Thanks for the review @ryanofsky \n\nMade changes in https://github.com/bitcoin/bitcoin/commit/d44a261acff40c1c8727d3cc0106bde65a6416d0\n\n> Would welcome simplifying the PR though. I think the following would be a simpler short term fix than c5ee096\n\nAgree\n",https://github.com/bitcoin/bitcoin/pull/21944#issuecomment-852203424,852203424,
Talkless,2021-05-13 18:50:09,"You could still keep `path` const as before, by utilizing immediately-invoked lambda, as suggested in [ES.28: Use lambdas for complex initialization, especially of const variables](https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Res-lambda-init) guideline, with something like this (also avoiding re-initializing `path` variable):\n\n```\n            const fs::path path = [&wallet_di",https://github.com/bitcoin/bitcoin/pull/21944#discussion_r632029229,632029229,src/wallet/db.cpp
prayank23,2021-05-14 00:26:16,Will try this approach ,https://github.com/bitcoin/bitcoin/pull/21944#discussion_r632180545,632180545,src/wallet/db.cpp
promag,2021-05-15 09:43:37,"nit, wrong indent",https://github.com/bitcoin/bitcoin/pull/21944#discussion_r632923386,632923386,src/wallet/db.cpp
