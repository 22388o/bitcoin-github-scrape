[
  {
    "sha": "879b39075868edd8073d08f75eb91ee0bc07c450",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4NzliMzkwNzU4NjhlZGQ4MDczZDA4Zjc1ZWI5MWVlMGJjMDdjNDUw",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2014-02-16T14:53:42Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2014-02-17T14:11:06Z"
      },
      "message": "Increase default dbcache to 100 MiB",
      "tree": {
        "sha": "27ec8734ed366c8da1c091549b4e08bdda2d621f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/27ec8734ed366c8da1c091549b4e08bdda2d621f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/879b39075868edd8073d08f75eb91ee0bc07c450",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/879b39075868edd8073d08f75eb91ee0bc07c450",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/879b39075868edd8073d08f75eb91ee0bc07c450",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/879b39075868edd8073d08f75eb91ee0bc07c450/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": null,
    "parents": [
      {
        "sha": "29ecccb597fd373f7b9ab2979f3a13fb486513bb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/29ecccb597fd373f7b9ab2979f3a13fb486513bb",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/29ecccb597fd373f7b9ab2979f3a13fb486513bb"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 3,
      "deletions": 3
    },
    "files": [
      {
        "sha": "787c72e154c527316ecefdedf58f23183bc90518",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/879b39075868edd8073d08f75eb91ee0bc07c450/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/879b39075868edd8073d08f75eb91ee0bc07c450/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=879b39075868edd8073d08f75eb91ee0bc07c450",
        "patch": "@@ -196,7 +196,7 @@ std::string HelpMessage(HelpMessageMode hmm)\n     strUsage += \"  -testnet               \" + _(\"Use the test network\") + \"\\n\";\n     strUsage += \"  -pid=<file>            \" + _(\"Specify pid file (default: bitcoind.pid)\") + \"\\n\";\n     strUsage += \"  -gen                   \" + _(\"Generate coins (default: 0)\") + \"\\n\";\n-    strUsage += \"  -dbcache=<n>           \" + _(\"Set database cache size in megabytes (default: 25)\") + \"\\n\";\n+    strUsage += \"  -dbcache=<n>           \" + _(\"Set database cache size in megabytes (default: 100)\") + \"\\n\";\n     strUsage += \"  -timeout=<n>           \" + _(\"Specify connection timeout in milliseconds (default: 5000)\") + \"\\n\";\n     strUsage += \"  -proxy=<ip:port>       \" + _(\"Connect through SOCKS proxy\") + \"\\n\";\n     strUsage += \"  -socks=<n>             \" + _(\"Select SOCKS version for -proxy (4 or 5, default: 5)\") + \"\\n\";\n@@ -776,7 +776,7 @@ bool AppInit2(boost::thread_group& threadGroup)\n     }\n \n     // cache size calculations\n-    size_t nTotalCache = GetArg(\"-dbcache\", 25) << 20;\n+    size_t nTotalCache = GetArg(\"-dbcache\", 100) << 20;\n     if (nTotalCache < (1 << 22))\n         nTotalCache = (1 << 22); // total cache cannot be less than 4 MiB\n     size_t nBlockTreeDBCache = nTotalCache / 8;"
      },
      {
        "sha": "e0c47887224f186644040e669dcdb838bfdd8e79",
        "filename": "src/qt/optionsmodel.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/879b39075868edd8073d08f75eb91ee0bc07c450/src/qt/optionsmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/879b39075868edd8073d08f75eb91ee0bc07c450/src/qt/optionsmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsmodel.cpp?ref=879b39075868edd8073d08f75eb91ee0bc07c450",
        "patch": "@@ -84,7 +84,7 @@ void OptionsModel::Init()\n #endif\n \n     if (!settings.contains(\"nDatabaseCache\"))\n-        settings.setValue(\"nDatabaseCache\", 25);\n+        settings.setValue(\"nDatabaseCache\", 100);\n     if (!SoftSetArg(\"-dbcache\", settings.value(\"nDatabaseCache\").toString().toStdString()))\n         strOverriddenByCommandLine += \"-dbcache \";\n "
      }
    ]
  },
  {
    "sha": "82e96006ae03a7debebb9ad36f939ddabb0d2f9f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4MmU5NjAwNmFlMDNhN2RlYmViYjlhZDM2ZjkzOWRkYWJiMGQyZjlm",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2014-02-16T21:00:12Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2014-02-17T14:44:21Z"
      },
      "message": "add constants for shared (GUI/core) -dbcache settings\n\n- adds nDefaultDbCache, nMaxDbCache and nMinDbCache in txdb.h",
      "tree": {
        "sha": "dc250edee27c6e4bae33abcafa999cf74acc0c6e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dc250edee27c6e4bae33abcafa999cf74acc0c6e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/82e96006ae03a7debebb9ad36f939ddabb0d2f9f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/82e96006ae03a7debebb9ad36f939ddabb0d2f9f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/82e96006ae03a7debebb9ad36f939ddabb0d2f9f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/82e96006ae03a7debebb9ad36f939ddabb0d2f9f/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "879b39075868edd8073d08f75eb91ee0bc07c450",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/879b39075868edd8073d08f75eb91ee0bc07c450",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/879b39075868edd8073d08f75eb91ee0bc07c450"
      }
    ],
    "stats": {
      "total": 38,
      "additions": 20,
      "deletions": 18
    },
    "files": [
      {
        "sha": "c05ed4356c1d9f290a77fdf668a5f0f6b9ed1f97",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 4,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/82e96006ae03a7debebb9ad36f939ddabb0d2f9f/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/82e96006ae03a7debebb9ad36f939ddabb0d2f9f/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=82e96006ae03a7debebb9ad36f939ddabb0d2f9f",
        "patch": "@@ -196,7 +196,7 @@ std::string HelpMessage(HelpMessageMode hmm)\n     strUsage += \"  -testnet               \" + _(\"Use the test network\") + \"\\n\";\n     strUsage += \"  -pid=<file>            \" + _(\"Specify pid file (default: bitcoind.pid)\") + \"\\n\";\n     strUsage += \"  -gen                   \" + _(\"Generate coins (default: 0)\") + \"\\n\";\n-    strUsage += \"  -dbcache=<n>           \" + _(\"Set database cache size in megabytes (default: 100)\") + \"\\n\";\n+    strUsage += \"  -dbcache=<n>           \" + strprintf(_(\"Set database cache size in megabytes (%d to %d, default: %d)\"), nMinDbCache, nMaxDbCache, nDefaultDbCache) + \"\\n\";\n     strUsage += \"  -timeout=<n>           \" + _(\"Specify connection timeout in milliseconds (default: 5000)\") + \"\\n\";\n     strUsage += \"  -proxy=<ip:port>       \" + _(\"Connect through SOCKS proxy\") + \"\\n\";\n     strUsage += \"  -socks=<n>             \" + _(\"Select SOCKS version for -proxy (4 or 5, default: 5)\") + \"\\n\";\n@@ -776,9 +776,11 @@ bool AppInit2(boost::thread_group& threadGroup)\n     }\n \n     // cache size calculations\n-    size_t nTotalCache = GetArg(\"-dbcache\", 100) << 20;\n-    if (nTotalCache < (1 << 22))\n-        nTotalCache = (1 << 22); // total cache cannot be less than 4 MiB\n+    size_t nTotalCache = (GetArg(\"-dbcache\", nDefaultDbCache) << 20);\n+    if (nTotalCache < (nMinDbCache << 20))\n+        nTotalCache = (nMinDbCache << 20); // total cache cannot be less than nMinDbCache\n+    else if (nTotalCache > (nMaxDbCache << 20))\n+        nTotalCache = (nMaxDbCache << 20); // total cache cannot be greater than nMaxDbCache\n     size_t nBlockTreeDBCache = nTotalCache / 8;\n     if (nBlockTreeDBCache > (1 << 21) && !GetBoolArg(\"-txindex\", false))\n         nBlockTreeDBCache = (1 << 21); // block tree db cache shouldn't be larger than 2 MiB"
      },
      {
        "sha": "a0626f989ca28c1ab706844a503c32aa599145fd",
        "filename": "src/qt/forms/optionsdialog.ui",
        "status": "modified",
        "additions": 1,
        "deletions": 11,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/82e96006ae03a7debebb9ad36f939ddabb0d2f9f/src/qt/forms/optionsdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/82e96006ae03a7debebb9ad36f939ddabb0d2f9f/src/qt/forms/optionsdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/optionsdialog.ui?ref=82e96006ae03a7debebb9ad36f939ddabb0d2f9f",
        "patch": "@@ -53,17 +53,7 @@\n           </widget>\n          </item>\n          <item>\n-          <widget class=\"QSpinBox\" name=\"databaseCache\">\n-           <property name=\"toolTip\">\n-            <string>Set database cache size in megabytes (default: 25)</string>\n-           </property>\n-           <property name=\"maximum\">\n-            <number>1024</number>\n-           </property>\n-           <property name=\"value\">\n-            <number>25</number>\n-           </property>\n-          </widget>\n+          <widget class=\"QSpinBox\" name=\"databaseCache\"/>\n          </item>\n          <item>\n           <widget class=\"QLabel\" name=\"databaseCacheUnitLabel\">"
      },
      {
        "sha": "e31542961cad5790e979d3c37ce4f92ae4edd868",
        "filename": "src/qt/optionsdialog.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/82e96006ae03a7debebb9ad36f939ddabb0d2f9f/src/qt/optionsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/82e96006ae03a7debebb9ad36f939ddabb0d2f9f/src/qt/optionsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsdialog.cpp?ref=82e96006ae03a7debebb9ad36f939ddabb0d2f9f",
        "patch": "@@ -14,8 +14,9 @@\n #include \"monitoreddatamapper.h\"\n #include \"optionsmodel.h\"\n \n+#include \"main.h\" // for CTransaction::nMinTxFee\n #include \"netbase.h\"\n-#include \"main.h\"\n+#include \"txdb.h\" // for -dbcache defaults\n \n #include <QDir>\n #include <QIntValidator>\n@@ -34,7 +35,8 @@ OptionsDialog::OptionsDialog(QWidget *parent) :\n     GUIUtil::restoreWindowGeometry(\"nOptionsDialogWindow\", this->size(), this);\n \n     /* Main elements init */\n-    ui->databaseCache->setMaximum(sizeof(void*) > 4 ? 4096 : 1024);\n+    ui->databaseCache->setMinimum(nMinDbCache);\n+    ui->databaseCache->setMaximum(nMaxDbCache);\n \n     /* Network elements init */\n #ifndef USE_UPNP"
      },
      {
        "sha": "1a460b927829173f70a81fd3f8f97ca156f5221c",
        "filename": "src/qt/optionsmodel.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/82e96006ae03a7debebb9ad36f939ddabb0d2f9f/src/qt/optionsmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/82e96006ae03a7debebb9ad36f939ddabb0d2f9f/src/qt/optionsmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsmodel.cpp?ref=82e96006ae03a7debebb9ad36f939ddabb0d2f9f",
        "patch": "@@ -14,6 +14,7 @@\n #include \"init.h\"\n #include \"main.h\"\n #include \"net.h\"\n+#include \"txdb.h\" // for -dbcache defaults\n #ifdef ENABLE_WALLET\n #include \"wallet.h\"\n #include \"walletdb.h\"\n@@ -84,7 +85,7 @@ void OptionsModel::Init()\n #endif\n \n     if (!settings.contains(\"nDatabaseCache\"))\n-        settings.setValue(\"nDatabaseCache\", 100);\n+        settings.setValue(\"nDatabaseCache\", nDefaultDbCache);\n     if (!SoftSetArg(\"-dbcache\", settings.value(\"nDatabaseCache\").toString().toStdString()))\n         strOverriddenByCommandLine += \"-dbcache \";\n "
      },
      {
        "sha": "0512396e973ccb7fff849c70c20c4559e439f66d",
        "filename": "src/txdb.h",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/82e96006ae03a7debebb9ad36f939ddabb0d2f9f/src/txdb.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/82e96006ae03a7debebb9ad36f939ddabb0d2f9f/src/txdb.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txdb.h?ref=82e96006ae03a7debebb9ad36f939ddabb0d2f9f",
        "patch": "@@ -18,6 +18,13 @@ class CBigNum;\n class CCoins;\n class uint256;\n \n+// -dbcache default (MiB)\n+static const int nDefaultDbCache = 100;\n+// max. -dbcache in (MiB)\n+static const int nMaxDbCache = sizeof(void*) > 4 ? 4096 : 1024;\n+// min. -dbcache in (MiB)\n+static const int nMinDbCache = 4;\n+\n /** CCoinsView backed by the LevelDB coin database (chainstate/) */\n class CCoinsViewDB : public CCoinsView\n {"
      }
    ]
  }
]