laanwj,2017-09-15T08:43:37Z,"Nice find! So we've spend versions after version trying to iterate and get something working that was already in Qt.\n\nIt isn't even remotely new either:\n> This function was introduced in Qt 4.2.\n\nConcept ACK. As there might be OS-specific magic involved, delegating this to Qt is the right thing to do. And from here on we can just blame upstream if it bugs out again...",https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-329720385,329720385,
promag,2017-09-15T09:06:33Z,"utACK e70a784.\n\nIndeed Qt does more: http://code.qt.io/cgit/qt/qtbase.git/tree/src/widgets/kernel/qwidget.cpp#n7423.\n",https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-329725661,329725661,
promag,2017-09-15T09:18:52Z,re-utACK after squash.,https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-329728577,329728577,
meshcollider,2017-09-15T09:20:00Z,Squashed,https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-329728884,329728884,
promag,2017-09-15T09:20:51Z,utACK 011e31b.,https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-329729063,329729063,
achow101,2017-09-15T13:54:26Z,"~Currently this will segfault for anyone who does not have the QSetting values of `MainWindowGeometry` and `RPCConsoleWindowGeometry`. You will need to check that those values exist and, if they don't, write default values for them.~\n\nNevermind that. That was an unclean working directory during my testing.\n\nThe window will open in the bottom righthand corner of the screen if those setting ",https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-329789558,329789558,
meshcollider,2017-09-16T07:52:26Z,"@achow101 on what OS? It opens center screen by default for me\n\nEdit: I've done some digging, and Qt apparently uses the OS default position if there is no setting ([reference](https://doc.qt.io/qt-5/qwindow.html#show)) which seems sensible anyway, that's completely in line with the idea of letting Qt handle OS specific window behavior.",https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-329953132,329953132,
KanoczTomas,2017-09-16T08:12:34Z,"ah cool, that bug is really annoying! Cool it gets fixe!",https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-329953975,329953975,
achow101,2017-09-16T16:02:43Z,@MeshCollider I'm using Ubuntu 17.04 it just opens the window in some random corner (it's apparently inconsistent) if the geometry settings don't exist.,https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-329977353,329977353,
meshcollider,2017-09-17T03:34:02Z,"@achow101 could you try on your OS with something like https://github.com/bitcoin/bitcoin/pull/11335/commits/e1166d5dad2a146cea57d0f74a886178fe33f7dd? Although if we're going to leave window positioning up to Qt, I'm not sure we should try and interfere to fix where it positions the window, is it really an issue if it decides to not center it on some operating systems?",https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-330013950,330013950,
achow101,2017-09-17T03:49:08Z,@MeshCollider e1166d5dad2a146cea57d0f74a886178fe33f7dd centers it for me.,https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-330015856,330015856,
laanwj,2017-09-19T15:42:41Z,utACK after squash,https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-330581463,330581463,
achow101,2017-09-20T19:37:11Z,utACK d6e8c6687227f96f846210a3c0a8dc6118141528 after squash,https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-330958073,330958073,
meshcollider,2017-09-20T20:26:49Z,Squashed,https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-330970639,330970639,
promag,2017-09-20T20:32:06Z,I'll review in a hour or so.,https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-330972041,330972041,
jonasschnelli,2017-09-22T05:34:50Z,"utACK 13baf7217bf8394ae02efc376208ae86eac4d0f6\nWill test on Windows soon.",https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-331354450,331354450,
jonasschnelli,2017-09-22T20:47:37Z,"Tested ACK 13baf7217bf8394ae02efc376208ae86eac4d0f6 (macOS / Window 8.1).\nnits:\n* current window position (in current master) is lost after running Core with this PR.\n* Unused settings (`nWindow`, ...) remain in QSettings container (I guess that okay).",https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-331556706,331556706,
luke-jr,2017-09-22T20:58:56Z,"`restoreWindowGeometry` should probably be retained only temporarily, for compatibility with current saved positions. Although not a huge deal if we lose that, IMO.\n\nCentering the window by default seems like a bad idea, but maybe that discussion belongs elsewhere. (If there's no saved position, the window manager should position it.)",https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-331559093,331559093,
meshcollider,2017-09-22T22:58:21Z,"@luke-jr it seems most WMs center by default (tested on windows and Mac) but achow101 said his Ubuntu system was randomly placing it on screen, hence forced centering (which is the current behaviour) makes sense imo.\n\nAnd I think losing saved position is a non-issue when upgrading to a new version of the software, it would be an unnecessary mess in the code to check for legacy position/size va",https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-331579141,331579141,
luke-jr,2017-09-22T23:34:02Z,"@MeshCollider If the OS/WM decides to place randomly, that's what it *should* be...",https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-331583129,331583129,
meshcollider,2017-09-23T02:44:58Z,"@luke-jr I mentioned that above (https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-330013950 and https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-329953132), but it seemed the consensus to center it",https://github.com/bitcoin/bitcoin/pull/11335#issuecomment-331605508,331605508,
promag,2017-09-15T14:15:20Z,Remove `this->`.,https://github.com/bitcoin/bitcoin/pull/11335#discussion_r139160158,139160158,src/qt/rpcconsole.cpp
promag,2017-09-15T14:16:21Z,No need to `this->`.,https://github.com/bitcoin/bitcoin/pull/11335#discussion_r139160435,139160435,src/qt/rpcconsole.cpp
promag,2017-09-16T07:57:18Z,Remove this :),https://github.com/bitcoin/bitcoin/pull/11335#discussion_r139281300,139281300,src/qt/bitcoingui.cpp
meshcollider,2017-09-16T08:00:13Z,"Done, and the one on line 266 as well which you missed ;) ",https://github.com/bitcoin/bitcoin/pull/11335#discussion_r139281341,139281341,src/qt/bitcoingui.cpp
promag,2017-09-21T09:13:13Z,Honestly I think it's better to keep `restoreWindowGeometry` and move this there.,https://github.com/bitcoin/bitcoin/pull/11335#discussion_r140188417,140188417,src/qt/bitcoingui.cpp
promag,2017-09-21T09:19:12Z,"I believe this is wrong (don't have 2nd screen to test) since `rect()` is relative to widget as in `QRect(0, 0, width(), height())`.",https://github.com/bitcoin/bitcoin/pull/11335#discussion_r140189940,140189940,src/qt/bitcoingui.cpp
promag,2017-09-21T09:25:42Z,"Should be something like?\n```cpp\nmove(QApplication::desktop()->availableGeometry().center() - geometry().center());\n```",https://github.com/bitcoin/bitcoin/pull/11335#discussion_r140191391,140191391,src/qt/bitcoingui.cpp
promag,2017-09-21T09:30:02Z,"Funny fact, in Qt documentation this is done by overriding `QWidget::closeEvent`. Is the geometry available in the destructor in all platforms?",https://github.com/bitcoin/bitcoin/pull/11335#discussion_r140192349,140192349,src/qt/rpcconsole.cpp
promag,2017-09-21T09:30:54Z,"The same as above, I would keep `GUIUtil::saveWindowGeometry`, maybe add some logging there too.",https://github.com/bitcoin/bitcoin/pull/11335#discussion_r140192510,140192510,src/qt/rpcconsole.cpp
meshcollider,2017-09-21T10:36:38Z,"I disagree, it's pretty excessive to leave one line of code in its own function, and this is pretty inconsequential behavior so I don't think its worth logging, unless others think it is?",https://github.com/bitcoin/bitcoin/pull/11335#discussion_r140206144,140206144,src/qt/rpcconsole.cpp
meshcollider,2017-09-21T10:37:03Z,"Fixed, thanks :-)",https://github.com/bitcoin/bitcoin/pull/11335#discussion_r140206217,140206217,src/qt/bitcoingui.cpp
meshcollider,2017-09-21T10:38:09Z,"Same as below, I think its a lot cleaner inline, will change if others agree though :+1:",https://github.com/bitcoin/bitcoin/pull/11335#discussion_r140206430,140206430,src/qt/bitcoingui.cpp
laanwj,2017-09-22T11:58:45Z,"No, IMO, no need to have utility functions for something that is a one-liner. That just makes code harder to follow.\n",https://github.com/bitcoin/bitcoin/pull/11335#discussion_r140475726,140475726,src/qt/rpcconsole.cpp
