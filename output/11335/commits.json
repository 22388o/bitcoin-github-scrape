[
  {
    "sha": "13baf7217bf8394ae02efc376208ae86eac4d0f6",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxM2JhZjcyMTdiZjgzOTRhZTAyZWZjMzc2MjA4YWU4NmVhYzRkMGY2",
    "commit": {
      "author": {
        "name": "MeshCollider",
        "email": "dobsonsa68@gmail.com",
        "date": "2017-09-15T04:38:42Z"
      },
      "committer": {
        "name": "MeshCollider",
        "email": "dobsonsa68@gmail.com",
        "date": "2017-09-21T10:34:58Z"
      },
      "message": "Replace save|restoreWindowGeometry with Qt functions",
      "tree": {
        "sha": "a7fc95221ed9049b4daf1f18716644704197518a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a7fc95221ed9049b4daf1f18716644704197518a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/13baf7217bf8394ae02efc376208ae86eac4d0f6",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/13baf7217bf8394ae02efc376208ae86eac4d0f6",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/13baf7217bf8394ae02efc376208ae86eac4d0f6",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/13baf7217bf8394ae02efc376208ae86eac4d0f6/comments",
    "author": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0f399a9ff227896265cafab9b2e9fab6cdb9b5b9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0f399a9ff227896265cafab9b2e9fab6cdb9b5b9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0f399a9ff227896265cafab9b2e9fab6cdb9b5b9"
      }
    ],
    "stats": {
      "total": 51,
      "additions": 15,
      "deletions": 36
    },
    "files": [
      {
        "sha": "dc551419002a45aea838ec17596634e1d5f26218",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 2,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/13baf7217bf8394ae02efc376208ae86eac4d0f6/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/13baf7217bf8394ae02efc376208ae86eac4d0f6/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=13baf7217bf8394ae02efc376208ae86eac4d0f6",
        "patch": "@@ -123,7 +123,11 @@ BitcoinGUI::BitcoinGUI(const PlatformStyle *_platformStyle, const NetworkStyle *\n     spinnerFrame(0),\n     platformStyle(_platformStyle)\n {\n-    GUIUtil::restoreWindowGeometry(\"nWindow\", QSize(850, 550), this);\n+    QSettings settings;\n+    if (!restoreGeometry(settings.value(\"MainWindowGeometry\").toByteArray())) {\n+        // Restore failed (perhaps missing setting), center the window\n+        move(QApplication::desktop()->availableGeometry().center() - frameGeometry().center());\n+    }\n \n     QString windowTitle = tr(PACKAGE_NAME) + \" - \";\n #ifdef ENABLE_WALLET\n@@ -261,7 +265,8 @@ BitcoinGUI::~BitcoinGUI()\n     // Unsubscribe from notifications from core\n     unsubscribeFromCoreSignals();\n \n-    GUIUtil::saveWindowGeometry(\"nWindow\", this);\n+    QSettings settings;\n+    settings.setValue(\"MainWindowGeometry\", saveGeometry());\n     if(trayIcon) // Hide tray icon, as deleting will let it linger until quit (on Ubuntu)\n         trayIcon->hide();\n #ifdef Q_OS_MAC"
      },
      {
        "sha": "b916df69aaeef520c9d75d5ce2a9395957aece67",
        "filename": "src/qt/guiutil.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 26,
        "changes": 26,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/13baf7217bf8394ae02efc376208ae86eac4d0f6/src/qt/guiutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/13baf7217bf8394ae02efc376208ae86eac4d0f6/src/qt/guiutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.cpp?ref=13baf7217bf8394ae02efc376208ae86eac4d0f6",
        "patch": "@@ -862,32 +862,6 @@ bool SetStartOnSystemStartup(bool fAutoStart) { return false; }\n \n #endif\n \n-void saveWindowGeometry(const QString& strSetting, QWidget *parent)\n-{\n-    QSettings settings;\n-    settings.setValue(strSetting + \"Pos\", parent->pos());\n-    settings.setValue(strSetting + \"Size\", parent->size());\n-}\n-\n-void restoreWindowGeometry(const QString& strSetting, const QSize& defaultSize, QWidget *parent)\n-{\n-    QSettings settings;\n-    QPoint pos = settings.value(strSetting + \"Pos\").toPoint();\n-    QSize size = settings.value(strSetting + \"Size\", defaultSize).toSize();\n-\n-    parent->resize(size);\n-    parent->move(pos);\n-\n-    if ((!pos.x() && !pos.y()) || (QApplication::desktop()->screenNumber(parent) == -1))\n-    {\n-        QRect screen = QApplication::desktop()->screenGeometry();\n-        QPoint defaultPos((screen.width() - defaultSize.width()) / 2,\n-                          (screen.height() - defaultSize.height()) / 2);\n-        parent->resize(defaultSize);\n-        parent->move(defaultPos);\n-    }\n-}\n-\n void setClipboard(const QString& str)\n {\n     QApplication::clipboard()->setText(str, QClipboard::Clipboard);"
      },
      {
        "sha": "d10818d0c88e9804497266e5eb738d3948e484e0",
        "filename": "src/qt/guiutil.h",
        "status": "modified",
        "additions": 0,
        "deletions": 5,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/13baf7217bf8394ae02efc376208ae86eac4d0f6/src/qt/guiutil.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/13baf7217bf8394ae02efc376208ae86eac4d0f6/src/qt/guiutil.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.h?ref=13baf7217bf8394ae02efc376208ae86eac4d0f6",
        "patch": "@@ -179,11 +179,6 @@ namespace GUIUtil\n     bool GetStartOnSystemStartup();\n     bool SetStartOnSystemStartup(bool fAutoStart);\n \n-    /** Save window size and position */\n-    void saveWindowGeometry(const QString& strSetting, QWidget *parent);\n-    /** Restore window size and position */\n-    void restoreWindowGeometry(const QString& strSetting, const QSize &defaultSizeIn, QWidget *parent);\n-\n     /* Convert QString to OS specific boost path through UTF-8 */\n     fs::path qstringToBoostPath(const QString &path);\n "
      },
      {
        "sha": "d895fc16630c96c621bd2c358adcb7499d156781",
        "filename": "src/qt/rpcconsole.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 3,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/13baf7217bf8394ae02efc376208ae86eac4d0f6/src/qt/rpcconsole.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/13baf7217bf8394ae02efc376208ae86eac4d0f6/src/qt/rpcconsole.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/rpcconsole.cpp?ref=13baf7217bf8394ae02efc376208ae86eac4d0f6",
        "patch": "@@ -28,6 +28,7 @@\n #include <wallet/wallet.h>\n #endif\n \n+#include <QDesktopWidget>\n #include <QKeyEvent>\n #include <QMenu>\n #include <QMessageBox>\n@@ -428,7 +429,11 @@ RPCConsole::RPCConsole(const PlatformStyle *_platformStyle, QWidget *parent) :\n     consoleFontSize(0)\n {\n     ui->setupUi(this);\n-    GUIUtil::restoreWindowGeometry(\"nRPCConsoleWindow\", this->size(), this);\n+    QSettings settings;\n+    if (!restoreGeometry(settings.value(\"RPCConsoleWindowGeometry\").toByteArray())) {\n+        // Restore failed (perhaps missing setting), center the window\n+        move(QApplication::desktop()->availableGeometry().center() - frameGeometry().center());\n+    }\n \n     ui->openDebugLogfileButton->setToolTip(ui->openDebugLogfileButton->toolTip().arg(tr(PACKAGE_NAME)));\n \n@@ -466,14 +471,14 @@ RPCConsole::RPCConsole(const PlatformStyle *_platformStyle, QWidget *parent) :\n     ui->detailWidget->hide();\n     ui->peerHeading->setText(tr(\"Select a peer to view detailed information.\"));\n \n-    QSettings settings;\n     consoleFontSize = settings.value(fontSizeSettingsKey, QFontInfo(QFont()).pointSize()).toInt();\n     clear();\n }\n \n RPCConsole::~RPCConsole()\n {\n-    GUIUtil::saveWindowGeometry(\"nRPCConsoleWindow\", this);\n+    QSettings settings;\n+    settings.setValue(\"RPCConsoleWindowGeometry\", saveGeometry());\n     RPCUnsetTimerInterface(rpcTimerInterface);\n     delete rpcTimerInterface;\n     delete ui;"
      }
    ]
  }
]