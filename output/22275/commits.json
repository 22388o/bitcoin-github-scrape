[
  {
    "sha": "addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphZGRiOWI1YTcxZmY5NmJkYjFhNGMxNWJjOTM0NWRlMGQ3ZjJjOThj",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2021-06-17T23:54:56Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2021-08-20T18:29:23Z"
      },
      "message": "Improve comments in taproot signing logic",
      "tree": {
        "sha": "7d3753ee845ed37f88755bec6c0ce8a8784b00c9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7d3753ee845ed37f88755bec6c0ce8a8784b00c9"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4fc15d15667d9d9c4fb5515ce73c05b4596298ec",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4fc15d15667d9d9c4fb5515ce73c05b4596298ec",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4fc15d15667d9d9c4fb5515ce73c05b4596298ec"
      }
    ],
    "stats": {
      "total": 31,
      "additions": 23,
      "deletions": 8
    },
    "files": [
      {
        "sha": "92cbc1e899e3546f50861b90e1b21dd36dda1412",
        "filename": "src/key.h",
        "status": "modified",
        "additions": 9,
        "deletions": 4,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c/src/key.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c/src/key.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/key.h?ref=addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c",
        "patch": "@@ -133,10 +133,15 @@ class CKey\n      * optionally tweaked by *merkle_root. Additional nonce entropy can be provided through\n      * aux.\n      *\n-     * When merkle_root is not nullptr, this results in a signature with a modified key as\n-     * specified in BIP341:\n-     * - If merkle_root->IsNull(): key + H_TapTweak(pubkey)*G\n-     * - Otherwise:                key + H_TapTweak(pubkey || *merkle_root)\n+     * merkle_root is used to optionally perform tweaking of the private key, as specified\n+     * in BIP341:\n+     * - If merkle_root == nullptr: no tweaking is done, sign with key directly (this is\n+     *                              used for signatures in BIP342 script).\n+     * - If merkle_root->IsNull():  sign with key + H_TapTweak(pubkey) (this is used for\n+     *                              key path spending when no scripts are present).\n+     * - Otherwise:                 sign with key + H_TapTweak(pubkey || *merkle_root)\n+     *                              (this is used for key path spending, with specific\n+     *                              Merkle root of the script tree).\n      */\n     bool SignSchnorr(const uint256& hash, Span<unsigned char> sig, const uint256* merkle_root = nullptr, const uint256* aux = nullptr) const;\n "
      },
      {
        "sha": "ab49e8457782f9a2f65af30e8810cbdb183981a7",
        "filename": "src/script/interpreter.h",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c/src/script/interpreter.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c/src/script/interpreter.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/script/interpreter.h?ref=addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c",
        "patch": "@@ -170,6 +170,13 @@ struct PrecomputedTransactionData\n \n     PrecomputedTransactionData() = default;\n \n+    /** Initialize this PrecomputedTransactionData with transaction data.\n+     *\n+     * @param[in]   tx             The transaction for which data is being precomputed.\n+     * @param[in]   spent_outputs  The CTxOuts being spent, one for each tx.vin, in order.\n+     * @param[in]   force          Whether to precompute data for all optional features,\n+     *                             regardless of what is in the inputs (used at signing\n+     *                             time, when the inputs aren't filled in yet). */\n     template <class T>\n     void Init(const T& tx, std::vector<CTxOut>&& spent_outputs, bool force = false);\n "
      },
      {
        "sha": "2a1c99e3871ec7b27139695975ed493d0eac14ae",
        "filename": "src/script/sign.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c/src/script/sign.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c/src/script/sign.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/script/sign.cpp?ref=addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c",
        "patch": "@@ -61,7 +61,7 @@ bool MutableTransactionSignatureCreator::CreateSchnorrSig(const SigningProvider&\n \n     CKey key;\n     {\n-        // For now, use the old full pubkey-based key derivation logic. As it indexed by\n+        // For now, use the old full pubkey-based key derivation logic. As it is indexed by\n         // Hash160(full pubkey), we need to try both a version prefixed with 0x02, and one\n         // with 0x03.\n         unsigned char b[33] = {0x02};"
      },
      {
        "sha": "78492733dbdb2890d248ab6ace6f4332c395ae6e",
        "filename": "src/script/standard.h",
        "status": "modified",
        "additions": 6,
        "deletions": 3,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c/src/script/standard.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c/src/script/standard.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/script/standard.h?ref=addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c",
        "patch": "@@ -227,8 +227,11 @@ struct TaprootSpendData\n     /** The Merkle root of the script tree (0 if no scripts). */\n     uint256 merkle_root;\n     /** Map from (script, leaf_version) to (sets of) control blocks.\n-     *  The control blocks are sorted by size, so that the signing logic can\n-     *  easily prefer the cheapest one. */\n+     *  More than one control block for a given script is only possible if it\n+     *  appears in multiple branches of the tree. We keep them all so that\n+     *  inference can reconstruct the full tree. Within each set, the control\n+     *  blocks are sorted by size, so that the signing logic can easily\n+     *  prefer the cheapest one. */\n     std::map<std::pair<CScript, int>, std::set<std::vector<unsigned char>, ShortestVectorFirstComparator>> scripts;\n     /** Merge other TaprootSpendData (for the same scriptPubKey) into this. */\n     void Merge(TaprootSpendData other);\n@@ -252,7 +255,7 @@ class TaprootBuilder\n         /** Merkle hash of this node. */\n         uint256 hash;\n         /** Tracked leaves underneath this node (either from the node itself, or its children).\n-         *  The merkle_branch field for each is the partners to get to *this* node. */\n+         *  The merkle_branch field of each is the partners to get to *this* node. */\n         std::vector<LeafInfo> leaves;\n     };\n     /** Whether the builder is in a valid state so far. */"
      }
    ]
  },
  {
    "sha": "c7048aae9545afd8d522e200ecadcf69f22399a0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjNzA0OGFhZTk1NDVhZmQ4ZDUyMmUyMDBlY2FkY2Y2OWYyMjM5OWEw",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2021-06-18T00:25:07Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2021-08-20T18:29:23Z"
      },
      "message": "Simplify SignTransaction precomputation loop",
      "tree": {
        "sha": "a8f12594d62f7b4eda6d96c8be56b99e5c519394",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a8f12594d62f7b4eda6d96c8be56b99e5c519394"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c7048aae9545afd8d522e200ecadcf69f22399a0",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c7048aae9545afd8d522e200ecadcf69f22399a0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c7048aae9545afd8d522e200ecadcf69f22399a0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c7048aae9545afd8d522e200ecadcf69f22399a0/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/addb9b5a71ff96bdb1a4c15bc9345de0d7f2c98c"
      }
    ],
    "stats": {
      "total": 15,
      "additions": 6,
      "deletions": 9
    },
    "files": [
      {
        "sha": "4714d0ef11c448d02064ffb49671b6f6d17d7cfa",
        "filename": "src/script/sign.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 9,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c7048aae9545afd8d522e200ecadcf69f22399a0/src/script/sign.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c7048aae9545afd8d522e200ecadcf69f22399a0/src/script/sign.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/script/sign.cpp?ref=c7048aae9545afd8d522e200ecadcf69f22399a0",
        "patch": "@@ -640,25 +640,22 @@ bool SignTransaction(CMutableTransaction& mtx, const SigningProvider* keystore,\n \n     PrecomputedTransactionData txdata;\n     std::vector<CTxOut> spent_outputs;\n-    spent_outputs.resize(mtx.vin.size());\n-    bool have_all_spent_outputs = true;\n-    for (unsigned int i = 0; i < mtx.vin.size(); i++) {\n+    for (unsigned int i = 0; i < mtx.vin.size(); ++i) {\n         CTxIn& txin = mtx.vin[i];\n         auto coin = coins.find(txin.prevout);\n         if (coin == coins.end() || coin->second.IsSpent()) {\n-            have_all_spent_outputs = false;\n+            txdata.Init(txConst, /* spent_outputs */ {}, /* force */ true);\n+            break;\n         } else {\n-            spent_outputs[i] = CTxOut(coin->second.out.nValue, coin->second.out.scriptPubKey);\n+            spent_outputs.emplace_back(coin->second.out.nValue, coin->second.out.scriptPubKey);\n         }\n     }\n-    if (have_all_spent_outputs) {\n+    if (spent_outputs.size() == mtx.vin.size()) {\n         txdata.Init(txConst, std::move(spent_outputs), true);\n-    } else {\n-        txdata.Init(txConst, {}, true);\n     }\n \n     // Sign what we can:\n-    for (unsigned int i = 0; i < mtx.vin.size(); i++) {\n+    for (unsigned int i = 0; i < mtx.vin.size(); ++i) {\n         CTxIn& txin = mtx.vin[i];\n         auto coin = coins.find(txin.prevout);\n         if (coin == coins.end() || coin->second.IsSpent()) {"
      }
    ]
  },
  {
    "sha": "d8f4b976d5ae9e6eee741dfdda53b8bc8573221b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkOGY0Yjk3NmQ1YWU5ZTZlZWU3NDFkZmRkYTUzYjhiYzg1NzMyMjFi",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2021-06-18T00:36:48Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2021-08-20T18:29:23Z"
      },
      "message": "Remove default nHashTypeIn arguments to MutableTransactionSignatureCreator\n\nThese were unused except in tests, and were also overlooked when changing\nSIGHASH_ALL -> SIGHASH_DEFAULT.",
      "tree": {
        "sha": "93f6a44d89fe942ec988c9596ca0512c7514ffbc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/93f6a44d89fe942ec988c9596ca0512c7514ffbc"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d8f4b976d5ae9e6eee741dfdda53b8bc8573221b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d8f4b976d5ae9e6eee741dfdda53b8bc8573221b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d8f4b976d5ae9e6eee741dfdda53b8bc8573221b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d8f4b976d5ae9e6eee741dfdda53b8bc8573221b/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c7048aae9545afd8d522e200ecadcf69f22399a0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c7048aae9545afd8d522e200ecadcf69f22399a0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c7048aae9545afd8d522e200ecadcf69f22399a0"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 4,
      "deletions": 4
    },
    "files": [
      {
        "sha": "6d3479c1438995b378c43e82de40c6ceb050fc7a",
        "filename": "src/script/sign.h",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d8f4b976d5ae9e6eee741dfdda53b8bc8573221b/src/script/sign.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d8f4b976d5ae9e6eee741dfdda53b8bc8573221b/src/script/sign.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/script/sign.h?ref=d8f4b976d5ae9e6eee741dfdda53b8bc8573221b",
        "patch": "@@ -45,8 +45,8 @@ class MutableTransactionSignatureCreator : public BaseSignatureCreator {\n     const PrecomputedTransactionData* m_txdata;\n \n public:\n-    MutableTransactionSignatureCreator(const CMutableTransaction* txToIn, unsigned int nInIn, const CAmount& amountIn, int nHashTypeIn = SIGHASH_ALL);\n-    MutableTransactionSignatureCreator(const CMutableTransaction* txToIn, unsigned int nInIn, const CAmount& amountIn, const PrecomputedTransactionData* txdata, int nHashTypeIn = SIGHASH_ALL);\n+    MutableTransactionSignatureCreator(const CMutableTransaction* txToIn, unsigned int nInIn, const CAmount& amountIn, int nHashTypeIn);\n+    MutableTransactionSignatureCreator(const CMutableTransaction* txToIn, unsigned int nInIn, const CAmount& amountIn, const PrecomputedTransactionData* txdata, int nHashTypeIn);\n     const BaseSignatureChecker& Checker() const override { return checker; }\n     bool CreateSig(const SigningProvider& provider, std::vector<unsigned char>& vchSig, const CKeyID& keyid, const CScript& scriptCode, SigVersion sigversion) const override;\n     bool CreateSchnorrSig(const SigningProvider& provider, std::vector<unsigned char>& sig, const XOnlyPubKey& pubkey, const uint256* leaf_hash, const uint256* merkle_root, SigVersion sigversion) const override;"
      },
      {
        "sha": "2c39cbffb9a3f0962275559d79c0f1d666d2f4e2",
        "filename": "src/test/script_tests.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d8f4b976d5ae9e6eee741dfdda53b8bc8573221b/src/test/script_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d8f4b976d5ae9e6eee741dfdda53b8bc8573221b/src/test/script_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/script_tests.cpp?ref=d8f4b976d5ae9e6eee741dfdda53b8bc8573221b",
        "patch": "@@ -1160,7 +1160,7 @@ SignatureData CombineSignatures(const CTxOut& txout, const CMutableTransaction&\n     SignatureData data;\n     data.MergeSignatureData(scriptSig1);\n     data.MergeSignatureData(scriptSig2);\n-    ProduceSignature(DUMMY_SIGNING_PROVIDER, MutableTransactionSignatureCreator(&tx, 0, txout.nValue), txout.scriptPubKey, data);\n+    ProduceSignature(DUMMY_SIGNING_PROVIDER, MutableTransactionSignatureCreator(&tx, 0, txout.nValue, SIGHASH_DEFAULT), txout.scriptPubKey, data);\n     return data;\n }\n "
      },
      {
        "sha": "97fd0600fa2c0d1a1a201c518b9b3251681d8410",
        "filename": "src/test/transaction_tests.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d8f4b976d5ae9e6eee741dfdda53b8bc8573221b/src/test/transaction_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d8f4b976d5ae9e6eee741dfdda53b8bc8573221b/src/test/transaction_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/transaction_tests.cpp?ref=d8f4b976d5ae9e6eee741dfdda53b8bc8573221b",
        "patch": "@@ -561,7 +561,7 @@ SignatureData CombineSignatures(const CMutableTransaction& input1, const CMutabl\n     SignatureData sigdata;\n     sigdata = DataFromTransaction(input1, 0, tx->vout[0]);\n     sigdata.MergeSignatureData(DataFromTransaction(input2, 0, tx->vout[0]));\n-    ProduceSignature(DUMMY_SIGNING_PROVIDER, MutableTransactionSignatureCreator(&input1, 0, tx->vout[0].nValue), tx->vout[0].scriptPubKey, sigdata);\n+    ProduceSignature(DUMMY_SIGNING_PROVIDER, MutableTransactionSignatureCreator(&input1, 0, tx->vout[0].nValue, SIGHASH_ALL), tx->vout[0].scriptPubKey, sigdata);\n     return sigdata;\n }\n "
      }
    ]
  },
  {
    "sha": "08f57a0057c58f19cd8ae3de89548d014980478a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowOGY1N2EwMDU3YzU4ZjE5Y2Q4YWUzZGU4OTU0OGQwMTQ5ODA0Nzhh",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2021-06-18T01:14:53Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2021-08-20T18:29:23Z"
      },
      "message": "Assert that IsComplete() in GetSpendData()",
      "tree": {
        "sha": "a82757bec253541152d84c9a2b0fc8b6302f9764",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a82757bec253541152d84c9a2b0fc8b6302f9764"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/08f57a0057c58f19cd8ae3de89548d014980478a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/08f57a0057c58f19cd8ae3de89548d014980478a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/08f57a0057c58f19cd8ae3de89548d014980478a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/08f57a0057c58f19cd8ae3de89548d014980478a/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d8f4b976d5ae9e6eee741dfdda53b8bc8573221b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d8f4b976d5ae9e6eee741dfdda53b8bc8573221b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d8f4b976d5ae9e6eee741dfdda53b8bc8573221b"
      }
    ],
    "stats": {
      "total": 1,
      "additions": 1,
      "deletions": 0
    },
    "files": [
      {
        "sha": "67a79a157cf35e4163623a550c53b8d51412ca37",
        "filename": "src/script/standard.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/08f57a0057c58f19cd8ae3de89548d014980478a/src/script/standard.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/08f57a0057c58f19cd8ae3de89548d014980478a/src/script/standard.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/script/standard.cpp?ref=08f57a0057c58f19cd8ae3de89548d014980478a",
        "patch": "@@ -504,6 +504,7 @@ WitnessV1Taproot TaprootBuilder::GetOutput() { return WitnessV1Taproot{m_output_\n \n TaprootSpendData TaprootBuilder::GetSpendData() const\n {\n+    assert(IsComplete());\n     TaprootSpendData spd;\n     spd.merkle_root = m_branch.size() == 0 ? uint256() : m_branch[0]->hash;\n     spd.internal_key = m_internal_key;"
      }
    ]
  }
]