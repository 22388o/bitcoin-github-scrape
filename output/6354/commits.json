[
  {
    "sha": "a3ba9a553acefd567ccb304b8600d2149ffab9aa",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphM2JhOWE1NTNhY2VmZDU2N2NjYjMwNGI4NjAwZDIxNDlmZmFiOWFh",
    "commit": {
      "author": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2015-06-29T19:02:37Z"
      },
      "committer": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2015-06-30T14:57:14Z"
      },
      "message": "gitian: make the windows signing process match OSX",
      "tree": {
        "sha": "f41a21362fbf674d23b28bee13112d0cefdb0873",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f41a21362fbf674d23b28bee13112d0cefdb0873"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a3ba9a553acefd567ccb304b8600d2149ffab9aa",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a3ba9a553acefd567ccb304b8600d2149ffab9aa",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a3ba9a553acefd567ccb304b8600d2149ffab9aa",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a3ba9a553acefd567ccb304b8600d2149ffab9aa/comments",
    "author": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0564c5b795d1be675a0ac0a2e8038db0970ac376",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0564c5b795d1be675a0ac0a2e8038db0970ac376",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0564c5b795d1be675a0ac0a2e8038db0970ac376"
      }
    ],
    "stats": {
      "total": 22,
      "additions": 15,
      "deletions": 7
    },
    "files": [
      {
        "sha": "2a73050e0e624b98c7df76e70f617d73f2848422",
        "filename": "contrib/gitian-descriptors/gitian-win-signer.yml",
        "status": "modified",
        "additions": 10,
        "deletions": 5,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a3ba9a553acefd567ccb304b8600d2149ffab9aa/contrib/gitian-descriptors/gitian-win-signer.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a3ba9a553acefd567ccb304b8600d2149ffab9aa/contrib/gitian-descriptors/gitian-win-signer.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-win-signer.yml?ref=a3ba9a553acefd567ccb304b8600d2149ffab9aa",
        "patch": "@@ -14,21 +14,26 @@ remotes:\n files:\n - \"osslsigncode-1.7.1.tar.gz\"\n - \"osslsigncode-Backports-to-1.7.1.patch\"\n-- \"bitcoin-win32-setup.exe\"\n-- \"bitcoin-win64-setup.exe\"\n+- \"bitcoin-win-unsigned.tar.gz\"\n script: |\n   BUILD_DIR=`pwd`\n   SIGDIR=${BUILD_DIR}/signature/win\n+  UNSIGNED_DIR=${BUILD_DIR}/unsigned\n \n   echo \"f9a8cdb38b9c309326764ebc937cba1523a3a751a7ab05df3ecc99d18ae466c9  osslsigncode-1.7.1.tar.gz\" | sha256sum -c\n   echo \"a8c4e9cafba922f89de0df1f2152e7be286aba73f78505169bc351a7938dd911  osslsigncode-Backports-to-1.7.1.patch\" | sha256sum -c\n \n+  mkdir -p ${UNSIGNED_DIR}\n+  tar -C ${UNSIGNED_DIR} -xf bitcoin-win-unsigned.tar.gz\n+\n   tar xf osslsigncode-1.7.1.tar.gz\n   cd osslsigncode-1.7.1\n   patch -p1 < ${BUILD_DIR}/osslsigncode-Backports-to-1.7.1.patch\n \n   ./configure --without-gsf --without-curl --disable-dependency-tracking\n   make\n-\n-  ./osslsigncode attach-signature -in ${BUILD_DIR}/bitcoin-win32-setup.exe -out ${OUTDIR}/bitcoin-win32-setup-signed.exe -sigin ${SIGDIR}/bitcoin-win32-setup.exe.pem\n-  ./osslsigncode attach-signature -in ${BUILD_DIR}/bitcoin-win64-setup.exe -out ${OUTDIR}/bitcoin-win64-setup-signed.exe -sigin ${SIGDIR}/bitcoin-win64-setup.exe.pem\n+  find ${UNSIGNED_DIR} -name \"*-unsigned.exe\" | while read i; do\n+    INFILE=\"`basename \"${i}\"`\"\n+    OUTFILE=\"`echo \"${INFILE}\" | sed s/-unsigned//`\"\n+    ./osslsigncode attach-signature -in \"${i}\" -out \"${OUTDIR}/${OUTFILE}\" -sigin \"${SIGDIR}/${INFILE}.pem\"\n+  done"
      },
      {
        "sha": "966820ec510641705e8533ac322a66acf41b7e1b",
        "filename": "contrib/gitian-descriptors/gitian-win.yml",
        "status": "modified",
        "additions": 5,
        "deletions": 2,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a3ba9a553acefd567ccb304b8600d2149ffab9aa/contrib/gitian-descriptors/gitian-win.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a3ba9a553acefd567ccb304b8600d2149ffab9aa/contrib/gitian-descriptors/gitian-win.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-win.yml?ref=a3ba9a553acefd567ccb304b8600d2149ffab9aa",
        "patch": "@@ -84,6 +84,8 @@ script: |\n   pushd temp\n   tar xf ../$SOURCEDIST\n   find bitcoin-* | sort | tar --no-recursion --mode='u+rw,go+r-w,a+X' --owner=0 --group=0 -c -T - | gzip -9n > ../$SOURCEDIST\n+  mkdir -p $OUTDIR/src\n+  cp ../$SOURCEDIST $OUTDIR/src\n   popd\n \n   ORIGPATH=\"$PATH\"\n@@ -109,7 +111,8 @@ script: |\n     find ${DISTNAME} -type f | sort | zip -X@ ${OUTDIR}/${DISTNAME}-${i}.zip\n     cd ../..\n   done\n-  mkdir -p $OUTDIR/src\n-  mv $SOURCEDIST $OUTDIR/src\n+  cd $OUTDIR\n+  rename 's/-setup\\.exe$/-setup-unsigned.exe/' *-setup.exe\n+  find . -name \"*-setup-unsigned.exe\" | sort | tar --no-recursion --mode='u+rw,go+r-w,a+X' --owner=0 --group=0 -c -T - | gzip -9n > ${OUTDIR}/${DISTNAME}-win-unsigned.tar.gz\n   mv ${OUTDIR}/${DISTNAME}-x86_64-*.zip ${OUTDIR}/${DISTNAME}-win64.zip\n   mv ${OUTDIR}/${DISTNAME}-i686-*.zip ${OUTDIR}/${DISTNAME}-win32.zip"
      }
    ]
  },
  {
    "sha": "6e849b8309558ec83710d86c0f784566996da58b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ZTg0OWI4MzA5NTU4ZWM4MzcxMGQ4NmMwZjc4NDU2Njk5NmRhNThi",
    "commit": {
      "author": {
        "name": "Micha",
        "email": "michagogo@server.fake",
        "date": "2015-06-26T12:48:41Z"
      },
      "committer": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2015-06-30T15:22:41Z"
      },
      "message": "Ideal release process for Windows detached signing\n\nThis is an ideal version of what the release process should look like,\nmaking it more consistent with the OS X process. Some of the changes\ndescribed here would need to be made in the descriptors, which is somewhat\nbeyond what I would feel comfortable doing, not really understanding the signature process in depth.\n\n[skip ci]",
      "tree": {
        "sha": "cf4c5bad3a9499d6dcb4606e711a75bd8231e814",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cf4c5bad3a9499d6dcb4606e711a75bd8231e814"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6e849b8309558ec83710d86c0f784566996da58b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6e849b8309558ec83710d86c0f784566996da58b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6e849b8309558ec83710d86c0f784566996da58b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6e849b8309558ec83710d86c0f784566996da58b/comments",
    "author": {
      "login": "Michagogo",
      "id": 2559390,
      "node_id": "MDQ6VXNlcjI1NTkzOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2559390?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Michagogo",
      "html_url": "https://github.com/Michagogo",
      "followers_url": "https://api.github.com/users/Michagogo/followers",
      "following_url": "https://api.github.com/users/Michagogo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Michagogo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Michagogo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Michagogo/subscriptions",
      "organizations_url": "https://api.github.com/users/Michagogo/orgs",
      "repos_url": "https://api.github.com/users/Michagogo/repos",
      "events_url": "https://api.github.com/users/Michagogo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Michagogo/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a3ba9a553acefd567ccb304b8600d2149ffab9aa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a3ba9a553acefd567ccb304b8600d2149ffab9aa",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a3ba9a553acefd567ccb304b8600d2149ffab9aa"
      }
    ],
    "stats": {
      "total": 25,
      "additions": 12,
      "deletions": 13
    },
    "files": [
      {
        "sha": "5ecb9334f5481ce53eeec248aa82aca411be263d",
        "filename": "doc/release-process.md",
        "status": "modified",
        "additions": 12,
        "deletions": 13,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6e849b8309558ec83710d86c0f784566996da58b/doc/release-process.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6e849b8309558ec83710d86c0f784566996da58b/doc/release-process.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-process.md?ref=6e849b8309558ec83710d86c0f784566996da58b",
        "patch": "@@ -25,7 +25,7 @@ Release Process\n \n ###update gitian\n \n- In order to take advantage of the new caching features in gitian, be sure to update to a recent version (e9741525c or higher is recommended)\n+ In order to take advantage of the new caching features in gitian, be sure to update to a recent version (`e9741525c` or later is recommended)\n \n ###perform gitian builds\n \n@@ -66,30 +66,29 @@ Release Process\n \t./bin/gsign --signer $SIGNER --release ${VERSION}-linux --destination ../gitian.sigs/ ../bitcoin/contrib/gitian-descriptors/gitian-linux.yml\n \tmv build/out/bitcoin-*.tar.gz build/out/src/bitcoin-*.tar.gz ../\n \t./bin/gbuild --commit bitcoin=v${VERSION} ../bitcoin/contrib/gitian-descriptors/gitian-win.yml\n-\t./bin/gsign --signer $SIGNER --release ${VERSION}-win --destination ../gitian.sigs/ ../bitcoin/contrib/gitian-descriptors/gitian-win.yml\n-\tmv build/out/bitcoin-*.zip ../\n-\tmv build/out/bitcoin-*-win64-setup.exe inputs/bitcoin-win64-setup.exe\n-\tmv build/out/bitcoin-*-win32-setup.exe inputs/bitcoin-win32-setup.exe\n+\t./bin/gsign --signer $SIGNER --release ${VERSION}-win-unsigned --destination ../gitian.sigs/ ../bitcoin/contrib/gitian-descriptors/gitian-win.yml\n+\tmv build/out/bitcoin-*-win-unsigned.tar.gz inputs/bitcoin-win-unsigned.tar.gz\n+\tmv build/out/bitcoin-*.zip build/out/bitcoin-*.exe ../\n \t./bin/gbuild --commit bitcoin=v${VERSION} ../bitcoin/contrib/gitian-descriptors/gitian-osx.yml\n \t./bin/gsign --signer $SIGNER --release ${VERSION}-osx-unsigned --destination ../gitian.sigs/ ../bitcoin/contrib/gitian-descriptors/gitian-osx.yml\n-\tmv build/out/bitcoin-*-unsigned.tar.gz inputs/bitcoin-osx-unsigned.tar.gz\n+\tmv build/out/bitcoin-*-osx-unsigned.tar.gz inputs/bitcoin-osx-unsigned.tar.gz\n \tmv build/out/bitcoin-*.tar.gz build/out/bitcoin-*.dmg ../\n \tpopd\n   Build output expected:\n \n   1. source tarball (bitcoin-${VERSION}.tar.gz)\n-  2. linux 32-bit and 64-bit binaries dist tarballs (bitcoin-${VERSION}-linux[32|64].tar.gz)\n-  3. windows 32-bit and 64-bit unsigned installers and dist zips (bitcoin-${VERSION}-win[32|64]-setup.exe, bitcoin-${VERSION}-win[32|64].zip)\n-  4. OSX unsigned installer (bitcoin-${VERSION}-osx-unsigned.dmg)\n-  5. Gitian signatures (in gitian.sigs/${VERSION}-<linux|win|osx-unsigned>/(your gitian key)/\n+  2. linux 32-bit and 64-bit dist tarballs (bitcoin-${VERSION}-linux[32|64].tar.gz)\n+  3. windows 32-bit and 64-bit unsigned installers and dist zips (bitcoin-${VERSION}-win[32|64]-setup-unsigned.exe, bitcoin-${VERSION}-win[32|64].zip)\n+  4. OSX unsigned installer and dist tarball (bitcoin-${VERSION}-osx-unsigned.dmg, bitcoin-${VERSION}-osx64.tar.gz)\n+  5. Gitian signatures (in gitian.sigs/${VERSION}-<linux|{win,osx}-unsigned>/(your gitian key)/\n \n ###Next steps:\n \n Commit your signature to gitian.sigs:\n \n \tpushd gitian.sigs\n \tgit add ${VERSION}-linux/${SIGNER}\n-\tgit add ${VERSION}-win/${SIGNER}\n+\tgit add ${VERSION}-win-unsigned/${SIGNER}\n \tgit add ${VERSION}-osx-unsigned/${SIGNER}\n \tgit commit -a\n \tgit push  # Assuming you can push to the gitian.sigs tree\n@@ -112,8 +111,8 @@ Commit your signature to gitian.sigs:\n \tpushd ./gitian-builder\n \t./bin/gbuild -i --commit signature=v${VERSION} ../bitcoin/contrib/gitian-descriptors/gitian-win-signer.yml\n \t./bin/gsign --signer $SIGNER --release ${VERSION}-win-signed --destination ../gitian.sigs/ ../bitcoin/contrib/gitian-descriptors/gitian-win-signer.yml\n-\tmv build/out/bitcoin-win64-setup-signed.exe ../bitcoin-${VERSION}-win64-setup.exe\n-\tmv build/out/bitcoin-win32-setup-signed.exe ../bitcoin-${VERSION}-win32-setup.exe\n+\tmv build/out/bitcoin-*win64-setup.exe ../bitcoin-${VERSION}-win64-setup.exe\n+\tmv build/out/bitcoin-*win32-setup.exe ../bitcoin-${VERSION}-win32-setup.exe\n \tpopd\n \n Commit your signature for the signed OSX/Windows binaries:"
      }
    ]
  }
]