[
  {
    "sha": "04d2eb177b1618fc64c600211173604518074911",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowNGQyZWIxNzdiMTYxOGZjNjRjNjAwMjExMTczNjA0NTE4MDc0OTEx",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-04-07T09:30:40Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-04-07T09:30:40Z"
      },
      "message": "[CLI] refactor wallets RPC JSON conversions",
      "tree": {
        "sha": "f530fd2081e345e1716af0b1552712caecfa3cd4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f530fd2081e345e1716af0b1552712caecfa3cd4"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/04d2eb177b1618fc64c600211173604518074911",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJXBij3AAoJECnUvLZBb1Ps/pcP/3P6EDX+fbuXEQM/7mASVkw3\nCujk2GIZQb9iapu/hbYc3n2O9p5p8n/55AiB963s6RbMOCEuVM6K6atnDUk3JZxs\nMaKcln6jYmwd8uifVxNu5atIytAtEp1z/zX0TgdCDf6Q+mAnpL0ctC5I00g6s1OP\n+b6I57+VQQdKSfQs7A+4b5IPilVmn5bM0FelaHbeZZXJq3MRi1dIpUhFTyyWXCxa\nqUnx9HlTItXH+FcvGad83LhooGVUvUsJfZUMRK7iDH4JWr27OfTov6DytWGA8YUN\nzYECgJ6oaV/tPgE6OxwwFE0kx69RmxGfvKDU5fFqgKSpxlJXrzo0EGAxFveOQ8+q\nZ+o+bDZqGx8NeiLTeyQ2fIHfxVqLghuogl/eKuChRSoTyO9ATBbYj7ycV0Crzof7\nIv30eXREN1su5mTRZvN6xDxz9HkxIVh/b0IRg+q3NLO2VzFJppLzprm2tzoP1s8A\nPgL6tfZjPw9CWiCpqxzPWDfz3U+P+cLTSJT4LxaoEDqGVKVTvsR0c4s5xvJPzJTv\nCgKJfOCC6Vcr+gVsUaOqQrCcy0Hqx8MflVwrKL+/Stq8YvMpmZNRhO8qJ4vMnv5h\nd8UA6+4SuBFRIImqhx2J+dVIH1KTnVFc5/6YVRkeRaIAeUxwdUhLajPgk6IjXYwY\nYEZQkzOfwY5Xlux3t6kz\n=E562\n-----END PGP SIGNATURE-----",
        "payload": "tree f530fd2081e345e1716af0b1552712caecfa3cd4\nparent 3bc71e1572cbe2e1f85bd487c77a63c46cf4b5bb\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1460021440 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1460021440 +0200\n\n[CLI] refactor wallets RPC JSON conversions\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/04d2eb177b1618fc64c600211173604518074911",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/04d2eb177b1618fc64c600211173604518074911",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/04d2eb177b1618fc64c600211173604518074911/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "3bc71e1572cbe2e1f85bd487c77a63c46cf4b5bb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3bc71e1572cbe2e1f85bd487c77a63c46cf4b5bb",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/3bc71e1572cbe2e1f85bd487c77a63c46cf4b5bb"
      }
    ],
    "stats": {
      "total": 129,
      "additions": 75,
      "deletions": 54
    },
    "files": [
      {
        "sha": "f8dc8e206cd6a13b597d74af8c2b0cfae9441970",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/04d2eb177b1618fc64c600211173604518074911/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/04d2eb177b1618fc64c600211173604518074911/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=04d2eb177b1618fc64c600211173604518074911",
        "patch": "@@ -156,6 +156,7 @@ BITCOIN_CORE_H = \\\n   wallet/crypter.h \\\n   wallet/db.h \\\n   wallet/rpcwallet.h \\\n+  wallet/rpcjsonconversion.h \\\n   wallet/wallet.h \\\n   wallet/wallet_ismine.h \\\n   wallet/walletdb.h \\"
      },
      {
        "sha": "9d4e7888a2a91dcc43690eff3909e51b597b3da2",
        "filename": "src/rpc/client.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 54,
        "changes": 68,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/04d2eb177b1618fc64c600211173604518074911/src/rpc/client.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/04d2eb177b1618fc64c600211173604518074911/src/rpc/client.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/client.cpp?ref=04d2eb177b1618fc64c600211173604518074911",
        "patch": "@@ -7,6 +7,10 @@\n #include \"rpc/protocol.h\"\n #include \"util.h\"\n \n+#ifdef ENABLE_WALLET\n+#include \"wallet/rpcjsonconversion.h\"\n+#endif\n+\n #include <set>\n #include <stdint.h>\n \n@@ -15,14 +19,9 @@\n \n using namespace std;\n \n-class CRPCConvertParam\n-{\n-public:\n-    std::string methodName; //!< method whose params want conversion\n-    int paramIdx;           //!< 0-based idx of param to convert\n-};\n+#define ARRAYLEN(array)     (sizeof(array)/sizeof((array)[0]))\n \n-static const CRPCConvertParam vRPCConvertParams[] =\n+static const struct RPCConvertParam vRPCConvertParams[] =\n {\n     { \"stop\", 0 },\n     { \"setmocktime\", 0 },\n@@ -33,66 +32,24 @@ static const CRPCConvertParam vRPCConvertParams[] =\n     { \"generatetoaddress\", 2 },\n     { \"getnetworkhashps\", 0 },\n     { \"getnetworkhashps\", 1 },\n-    { \"sendtoaddress\", 1 },\n-    { \"sendtoaddress\", 4 },\n-    { \"settxfee\", 0 },\n-    { \"getreceivedbyaddress\", 1 },\n-    { \"getreceivedbyaccount\", 1 },\n-    { \"listreceivedbyaddress\", 0 },\n-    { \"listreceivedbyaddress\", 1 },\n-    { \"listreceivedbyaddress\", 2 },\n-    { \"listreceivedbyaccount\", 0 },\n-    { \"listreceivedbyaccount\", 1 },\n-    { \"listreceivedbyaccount\", 2 },\n-    { \"getbalance\", 1 },\n-    { \"getbalance\", 2 },\n     { \"getblockhash\", 0 },\n-    { \"move\", 2 },\n-    { \"move\", 3 },\n-    { \"sendfrom\", 2 },\n-    { \"sendfrom\", 3 },\n-    { \"listtransactions\", 1 },\n-    { \"listtransactions\", 2 },\n-    { \"listtransactions\", 3 },\n-    { \"listaccounts\", 0 },\n-    { \"listaccounts\", 1 },\n-    { \"walletpassphrase\", 1 },\n     { \"getblocktemplate\", 0 },\n-    { \"listsinceblock\", 1 },\n-    { \"listsinceblock\", 2 },\n-    { \"sendmany\", 1 },\n-    { \"sendmany\", 2 },\n-    { \"sendmany\", 4 },\n-    { \"addmultisigaddress\", 0 },\n-    { \"addmultisigaddress\", 1 },\n     { \"createmultisig\", 0 },\n     { \"createmultisig\", 1 },\n-    { \"listunspent\", 0 },\n-    { \"listunspent\", 1 },\n-    { \"listunspent\", 2 },\n     { \"getblock\", 1 },\n     { \"getblockheader\", 1 },\n-    { \"gettransaction\", 1 },\n     { \"getrawtransaction\", 1 },\n     { \"createrawtransaction\", 0 },\n     { \"createrawtransaction\", 1 },\n     { \"createrawtransaction\", 2 },\n     { \"signrawtransaction\", 1 },\n     { \"signrawtransaction\", 2 },\n     { \"sendrawtransaction\", 1 },\n-    { \"fundrawtransaction\", 1 },\n     { \"gettxout\", 1 },\n     { \"gettxout\", 2 },\n     { \"gettxoutproof\", 0 },\n-    { \"lockunspent\", 0 },\n-    { \"lockunspent\", 1 },\n-    { \"importprivkey\", 2 },\n-    { \"importaddress\", 2 },\n-    { \"importaddress\", 3 },\n-    { \"importpubkey\", 2 },\n     { \"verifychain\", 0 },\n     { \"verifychain\", 1 },\n-    { \"keypoolrefill\", 0 },\n     { \"getrawmempool\", 0 },\n     { \"estimatefee\", 0 },\n     { \"estimatepriority\", 0 },\n@@ -119,13 +76,16 @@ class CRPCConvertTable\n \n CRPCConvertTable::CRPCConvertTable()\n {\n-    const unsigned int n_elem =\n-        (sizeof(vRPCConvertParams) / sizeof(vRPCConvertParams[0]));\n-\n-    for (unsigned int i = 0; i < n_elem; i++) {\n-        members.insert(std::make_pair(vRPCConvertParams[i].methodName,\n+    for (unsigned int i = 0; i < ARRAYLEN(vRPCConvertParams); i++) {\n+        members.insert(std::make_pair(std::string(vRPCConvertParams[i].methodName),\n                                       vRPCConvertParams[i].paramIdx));\n     }\n+#ifdef ENABLE_WALLET\n+    for (unsigned int i = 0; i < ARRAYLEN(walletRPCConversions); i++) {\n+        members.insert(std::make_pair(std::string(walletRPCConversions[i].methodName),\n+                                      walletRPCConversions[i].paramIdx));\n+    }\n+#endif\n }\n \n static CRPCConvertTable rpcCvtTable;"
      },
      {
        "sha": "3140f596c2c5a20f2ae69a9b2e83ce2aa7d559e6",
        "filename": "src/rpc/client.h",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/04d2eb177b1618fc64c600211173604518074911/src/rpc/client.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/04d2eb177b1618fc64c600211173604518074911/src/rpc/client.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/client.h?ref=04d2eb177b1618fc64c600211173604518074911",
        "patch": "@@ -8,6 +8,12 @@\n \n #include <univalue.h>\n \n+struct RPCConvertParam\n+{\n+    char methodName[128]; //!< method whose params want conversion\n+    int paramIdx; //!< 0-based idx of param to convert\n+};\n+\n UniValue RPCConvertValues(const std::string& strMethod, const std::vector<std::string>& strParams);\n /** Non-RFC4627 JSON parser, accepts internal values (such as numbers, true, false, null)\n  * as well as objects and arrays."
      },
      {
        "sha": "cf5d919bb8e94432a04326b7deac08ac5d99c7ea",
        "filename": "src/wallet/rpcjsonconversion.h",
        "status": "added",
        "additions": 54,
        "deletions": 0,
        "changes": 54,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/04d2eb177b1618fc64c600211173604518074911/src/wallet/rpcjsonconversion.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/04d2eb177b1618fc64c600211173604518074911/src/wallet/rpcjsonconversion.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcjsonconversion.h?ref=04d2eb177b1618fc64c600211173604518074911",
        "patch": "@@ -0,0 +1,54 @@\n+// Copyright (c) 2016 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_WALLET_RPCJSONCONVERSION_H\n+#define BITCOIN_WALLET_RPCJSONCONVERSION_H\n+\n+static const struct RPCConvertParam walletRPCConversions[] =\n+{\n+    { \"sendtoaddress\", 1 },\n+    { \"sendtoaddress\", 4 },\n+    { \"settxfee\", 0 },\n+    { \"getreceivedbyaddress\", 1 },\n+    { \"getreceivedbyaccount\", 1 },\n+    { \"listreceivedbyaddress\", 0 },\n+    { \"listreceivedbyaddress\", 1 },\n+    { \"listreceivedbyaddress\", 2 },\n+    { \"listreceivedbyaccount\", 0 },\n+    { \"listreceivedbyaccount\", 1 },\n+    { \"listreceivedbyaccount\", 2 },\n+    { \"getbalance\", 1 },\n+    { \"getbalance\", 2 },\n+    { \"move\", 2 },\n+    { \"move\", 3 },\n+    { \"sendfrom\", 2 },\n+    { \"sendfrom\", 3 },\n+    { \"listtransactions\", 1 },\n+    { \"listtransactions\", 2 },\n+    { \"listtransactions\", 3 },\n+    { \"listaccounts\", 0 },\n+    { \"listaccounts\", 1 },\n+    { \"walletpassphrase\", 1 },\n+    { \"listsinceblock\", 1 },\n+    { \"listsinceblock\", 2 },\n+    { \"sendmany\", 1 },\n+    { \"sendmany\", 2 },\n+    { \"sendmany\", 4 },\n+    { \"addmultisigaddress\", 0 },\n+    { \"addmultisigaddress\", 1 },\n+    { \"listunspent\", 0 },\n+    { \"listunspent\", 1 },\n+    { \"listunspent\", 2 },\n+    { \"gettransaction\", 1 },\n+    { \"fundrawtransaction\", 1 },\n+    { \"lockunspent\", 0 },\n+    { \"lockunspent\", 1 },\n+    { \"importprivkey\", 2 },\n+    { \"importaddress\", 2 },\n+    { \"importaddress\", 3 },\n+    { \"importpubkey\", 2 },\n+    { \"keypoolrefill\", 0 },\n+};\n+\n+#endif //BITCOIN_WALLET_RPCJSONCONVERSION_H"
      }
    ]
  }
]