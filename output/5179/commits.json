[
  {
    "sha": "c4820685e6102a6e390650cb493c7a8973ad936a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjNDgyMDY4NWU2MTAyYTZlMzkwNjUwY2I0OTNjN2E4OTczYWQ5MzZh",
    "commit": {
      "author": {
        "name": "David Hill",
        "email": "dhill@conformal.com",
        "date": "2014-10-30T14:36:28Z"
      },
      "committer": {
        "name": "David Hill",
        "email": "dhill@conformal.com",
        "date": "2014-10-30T14:36:28Z"
      },
      "message": "Ignore alert messages that fail signature verification.",
      "tree": {
        "sha": "2499c2ba0d79a143c068e7fd6f936722d3fd6664",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2499c2ba0d79a143c068e7fd6f936722d3fd6664"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c4820685e6102a6e390650cb493c7a8973ad936a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c4820685e6102a6e390650cb493c7a8973ad936a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c4820685e6102a6e390650cb493c7a8973ad936a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c4820685e6102a6e390650cb493c7a8973ad936a/comments",
    "author": {
      "login": "dajohi",
      "id": 3308193,
      "node_id": "MDQ6VXNlcjMzMDgxOTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3308193?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dajohi",
      "html_url": "https://github.com/dajohi",
      "followers_url": "https://api.github.com/users/dajohi/followers",
      "following_url": "https://api.github.com/users/dajohi/following{/other_user}",
      "gists_url": "https://api.github.com/users/dajohi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dajohi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dajohi/subscriptions",
      "organizations_url": "https://api.github.com/users/dajohi/orgs",
      "repos_url": "https://api.github.com/users/dajohi/repos",
      "events_url": "https://api.github.com/users/dajohi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dajohi/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dajohi",
      "id": 3308193,
      "node_id": "MDQ6VXNlcjMzMDgxOTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3308193?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dajohi",
      "html_url": "https://github.com/dajohi",
      "followers_url": "https://api.github.com/users/dajohi/followers",
      "following_url": "https://api.github.com/users/dajohi/following{/other_user}",
      "gists_url": "https://api.github.com/users/dajohi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dajohi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dajohi/subscriptions",
      "organizations_url": "https://api.github.com/users/dajohi/orgs",
      "repos_url": "https://api.github.com/users/dajohi/repos",
      "events_url": "https://api.github.com/users/dajohi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dajohi/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c1def0df51678d6303d8f7e75798d2330bbd61a2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c1def0df51678d6303d8f7e75798d2330bbd61a2",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c1def0df51678d6303d8f7e75798d2330bbd61a2"
      }
    ],
    "stats": {
      "total": 35,
      "additions": 17,
      "deletions": 18
    },
    "files": [
      {
        "sha": "50e05342d50ef8943d697b062e3717b99fa7c728",
        "filename": "src/alert.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c4820685e6102a6e390650cb493c7a8973ad936a/src/alert.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c4820685e6102a6e390650cb493c7a8973ad936a/src/alert.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/alert.cpp?ref=c4820685e6102a6e390650cb493c7a8973ad936a",
        "patch": "@@ -167,8 +167,6 @@ CAlert CAlert::getAlertByHash(const uint256 &hash)\n \n bool CAlert::ProcessAlert(bool fThread)\n {\n-    if (!CheckSignature())\n-        return false;\n     if (!IsInEffect())\n         return false;\n "
      },
      {
        "sha": "03f1ba13fee7b399cd49f1ed209c077a94119212",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 17,
        "deletions": 16,
        "changes": 33,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c4820685e6102a6e390650cb493c7a8973ad936a/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c4820685e6102a6e390650cb493c7a8973ad936a/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=c4820685e6102a6e390650cb493c7a8973ad936a",
        "patch": "@@ -4069,25 +4069,26 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n         uint256 alertHash = alert.GetHash();\n         if (pfrom->setKnown.count(alertHash) == 0)\n         {\n-            if (alert.ProcessAlert())\n+            // Verify the signature before processing the alert.  If the\n+            // verification fails, silently ignore the message.\n+            if (alert.CheckSignature())\n             {\n-                // Relay\n-                pfrom->setKnown.insert(alertHash);\n+                if (alert.ProcessAlert())\n                 {\n-                    LOCK(cs_vNodes);\n-                    BOOST_FOREACH(CNode* pnode, vNodes)\n-                        alert.RelayTo(pnode);\n+                    // Relay\n+                    pfrom->setKnown.insert(alertHash);\n+                    {\n+                        LOCK(cs_vNodes);\n+                        BOOST_FOREACH(CNode* pnode, vNodes)\n+                            alert.RelayTo(pnode);\n+                    }\n                 }\n-            }\n-            else {\n-                // Small DoS penalty so peers that send us lots of\n-                // duplicate/expired/invalid-signature/whatever alerts\n-                // eventually get banned.\n-                // This isn't a Misbehaving(100) (immediate ban) because the\n-                // peer might be an older or different implementation with\n-                // a different signature key, etc.\n-                Misbehaving(pfrom->GetId(), 10);\n-            }\n+                else {\n+                    // Small DoS penalty so peers that send us lots of\n+                    // duplicate, expired, etc alerts eventually get banned.\n+                    Misbehaving(pfrom->GetId(), 10);\n+                }\n+\t    }\n         }\n     }\n "
      }
    ]
  }
]